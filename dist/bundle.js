(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __markAsModule = (target) => __defProp(target, "__esModule", {value: true});
  var __commonJS = (callback, module) => () => {
    if (!module) {
      module = {exports: {}};
      callback(module.exports, module);
    }
    return module.exports;
  };
  var __export = (target, all) => {
    __markAsModule(target);
    for (var name in all)
      __defProp(target, name, {get: all[name], enumerable: true});
  };
  var __exportStar = (target, module, desc) => {
    __markAsModule(target);
    if (module && typeof module === "object" || typeof module === "function") {
      for (let key of __getOwnPropNames(module))
        if (!__hasOwnProp.call(target, key) && key !== "default")
          __defProp(target, key, {get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable});
    }
    return target;
  };
  var __toModule = (module) => {
    if (module && module.__esModule)
      return module;
    return __exportStar(__defProp(module != null ? __create(__getProtoOf(module)) : {}, "default", {value: module, enumerable: true}), module);
  };

  // node_modules/es6-promise-polyfill/promise.js
  var require_promise = __commonJS((exports) => {
    (function(global2) {
      var NativePromise = global2["Promise"];
      var nativePromiseSupported = NativePromise && "resolve" in NativePromise && "reject" in NativePromise && "all" in NativePromise && "race" in NativePromise && function() {
        var resolve2;
        new NativePromise(function(r) {
          resolve2 = r;
        });
        return typeof resolve2 === "function";
      }();
      if (typeof exports !== "undefined" && exports) {
        exports.Promise = nativePromiseSupported ? NativePromise : Promise2;
        exports.Polyfill = Promise2;
      } else {
        if (typeof define == "function" && define.amd) {
          define(function() {
            return nativePromiseSupported ? NativePromise : Promise2;
          });
        } else {
          if (!nativePromiseSupported)
            global2["Promise"] = Promise2;
        }
      }
      var PENDING = "pending";
      var SEALED = "sealed";
      var FULFILLED = "fulfilled";
      var REJECTED = "rejected";
      var NOOP = function() {
      };
      function isArray(value) {
        return Object.prototype.toString.call(value) === "[object Array]";
      }
      var asyncSetTimer = typeof setImmediate !== "undefined" ? setImmediate : setTimeout;
      var asyncQueue = [];
      var asyncTimer;
      function asyncFlush() {
        for (var i = 0; i < asyncQueue.length; i++)
          asyncQueue[i][0](asyncQueue[i][1]);
        asyncQueue = [];
        asyncTimer = false;
      }
      function asyncCall(callback, arg) {
        asyncQueue.push([callback, arg]);
        if (!asyncTimer) {
          asyncTimer = true;
          asyncSetTimer(asyncFlush, 0);
        }
      }
      function invokeResolver(resolver, promise) {
        function resolvePromise(value) {
          resolve(promise, value);
        }
        function rejectPromise(reason) {
          reject(promise, reason);
        }
        try {
          resolver(resolvePromise, rejectPromise);
        } catch (e) {
          rejectPromise(e);
        }
      }
      function invokeCallback(subscriber) {
        var owner = subscriber.owner;
        var settled = owner.state_;
        var value = owner.data_;
        var callback = subscriber[settled];
        var promise = subscriber.then;
        if (typeof callback === "function") {
          settled = FULFILLED;
          try {
            value = callback(value);
          } catch (e) {
            reject(promise, e);
          }
        }
        if (!handleThenable(promise, value)) {
          if (settled === FULFILLED)
            resolve(promise, value);
          if (settled === REJECTED)
            reject(promise, value);
        }
      }
      function handleThenable(promise, value) {
        var resolved;
        try {
          if (promise === value)
            throw new TypeError("A promises callback cannot return that same promise.");
          if (value && (typeof value === "function" || typeof value === "object")) {
            var then = value.then;
            if (typeof then === "function") {
              then.call(value, function(val) {
                if (!resolved) {
                  resolved = true;
                  if (value !== val)
                    resolve(promise, val);
                  else
                    fulfill(promise, val);
                }
              }, function(reason) {
                if (!resolved) {
                  resolved = true;
                  reject(promise, reason);
                }
              });
              return true;
            }
          }
        } catch (e) {
          if (!resolved)
            reject(promise, e);
          return true;
        }
        return false;
      }
      function resolve(promise, value) {
        if (promise === value || !handleThenable(promise, value))
          fulfill(promise, value);
      }
      function fulfill(promise, value) {
        if (promise.state_ === PENDING) {
          promise.state_ = SEALED;
          promise.data_ = value;
          asyncCall(publishFulfillment, promise);
        }
      }
      function reject(promise, reason) {
        if (promise.state_ === PENDING) {
          promise.state_ = SEALED;
          promise.data_ = reason;
          asyncCall(publishRejection, promise);
        }
      }
      function publish(promise) {
        var callbacks = promise.then_;
        promise.then_ = void 0;
        for (var i = 0; i < callbacks.length; i++) {
          invokeCallback(callbacks[i]);
        }
      }
      function publishFulfillment(promise) {
        promise.state_ = FULFILLED;
        publish(promise);
      }
      function publishRejection(promise) {
        promise.state_ = REJECTED;
        publish(promise);
      }
      function Promise2(resolver) {
        if (typeof resolver !== "function")
          throw new TypeError("Promise constructor takes a function argument");
        if (this instanceof Promise2 === false)
          throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
        this.then_ = [];
        invokeResolver(resolver, this);
      }
      Promise2.prototype = {
        constructor: Promise2,
        state_: PENDING,
        then_: null,
        data_: void 0,
        then: function(onFulfillment, onRejection) {
          var subscriber = {
            owner: this,
            then: new this.constructor(NOOP),
            fulfilled: onFulfillment,
            rejected: onRejection
          };
          if (this.state_ === FULFILLED || this.state_ === REJECTED) {
            asyncCall(invokeCallback, subscriber);
          } else {
            this.then_.push(subscriber);
          }
          return subscriber.then;
        },
        catch: function(onRejection) {
          return this.then(null, onRejection);
        }
      };
      Promise2.all = function(promises) {
        var Class = this;
        if (!isArray(promises))
          throw new TypeError("You must pass an array to Promise.all().");
        return new Class(function(resolve2, reject2) {
          var results = [];
          var remaining = 0;
          function resolver(index4) {
            remaining++;
            return function(value) {
              results[index4] = value;
              if (!--remaining)
                resolve2(results);
            };
          }
          for (var i = 0, promise; i < promises.length; i++) {
            promise = promises[i];
            if (promise && typeof promise.then === "function")
              promise.then(resolver(i), reject2);
            else
              results[i] = promise;
          }
          if (!remaining)
            resolve2(results);
        });
      };
      Promise2.race = function(promises) {
        var Class = this;
        if (!isArray(promises))
          throw new TypeError("You must pass an array to Promise.race().");
        return new Class(function(resolve2, reject2) {
          for (var i = 0, promise; i < promises.length; i++) {
            promise = promises[i];
            if (promise && typeof promise.then === "function")
              promise.then(resolve2, reject2);
            else
              resolve2(promise);
          }
        });
      };
      Promise2.resolve = function(value) {
        var Class = this;
        if (value && typeof value === "object" && value.constructor === Class)
          return value;
        return new Class(function(resolve2) {
          resolve2(value);
        });
      };
      Promise2.reject = function(reason) {
        var Class = this;
        return new Class(function(resolve2, reject2) {
          reject2(reason);
        });
      };
    })(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : exports);
  });

  // node_modules/object-assign/index.js
  var require_object_assign = __commonJS((exports, module) => {
    /*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */
    "use strict";
    var getOwnPropertySymbols = Object.getOwnPropertySymbols;
    var hasOwnProperty = Object.prototype.hasOwnProperty;
    var propIsEnumerable = Object.prototype.propertyIsEnumerable;
    function toObject(val) {
      if (val === null || val === void 0) {
        throw new TypeError("Object.assign cannot be called with null or undefined");
      }
      return Object(val);
    }
    function shouldUseNative() {
      try {
        if (!Object.assign) {
          return false;
        }
        var test1 = new String("abc");
        test1[5] = "de";
        if (Object.getOwnPropertyNames(test1)[0] === "5") {
          return false;
        }
        var test2 = {};
        for (var i = 0; i < 10; i++) {
          test2["_" + String.fromCharCode(i)] = i;
        }
        var order2 = Object.getOwnPropertyNames(test2).map(function(n) {
          return test2[n];
        });
        if (order2.join("") !== "0123456789") {
          return false;
        }
        var test3 = {};
        "abcdefghijklmnopqrst".split("").forEach(function(letter) {
          test3[letter] = letter;
        });
        if (Object.keys(Object.assign({}, test3)).join("") !== "abcdefghijklmnopqrst") {
          return false;
        }
        return true;
      } catch (err) {
        return false;
      }
    }
    module.exports = shouldUseNative() ? Object.assign : function(target, source) {
      var from;
      var to = toObject(target);
      var symbols;
      for (var s = 1; s < arguments.length; s++) {
        from = Object(arguments[s]);
        for (var key in from) {
          if (hasOwnProperty.call(from, key)) {
            to[key] = from[key];
          }
        }
        if (getOwnPropertySymbols) {
          symbols = getOwnPropertySymbols(from);
          for (var i = 0; i < symbols.length; i++) {
            if (propIsEnumerable.call(from, symbols[i])) {
              to[symbols[i]] = from[symbols[i]];
            }
          }
        }
      }
      return to;
    };
  });

  // node_modules/eventemitter3/index.js
  var require_eventemitter3 = __commonJS((exports, module) => {
    "use strict";
    var has = Object.prototype.hasOwnProperty;
    var prefix = "~";
    function Events() {
    }
    if (Object.create) {
      Events.prototype = Object.create(null);
      if (!new Events().__proto__)
        prefix = false;
    }
    function EE(fn, context2, once) {
      this.fn = fn;
      this.context = context2;
      this.once = once || false;
    }
    function addListener(emitter, event, fn, context2, once) {
      if (typeof fn !== "function") {
        throw new TypeError("The listener must be a function");
      }
      var listener = new EE(fn, context2 || emitter, once), evt = prefix ? prefix + event : event;
      if (!emitter._events[evt])
        emitter._events[evt] = listener, emitter._eventsCount++;
      else if (!emitter._events[evt].fn)
        emitter._events[evt].push(listener);
      else
        emitter._events[evt] = [emitter._events[evt], listener];
      return emitter;
    }
    function clearEvent(emitter, evt) {
      if (--emitter._eventsCount === 0)
        emitter._events = new Events();
      else
        delete emitter._events[evt];
    }
    function EventEmitter() {
      this._events = new Events();
      this._eventsCount = 0;
    }
    EventEmitter.prototype.eventNames = function eventNames() {
      var names = [], events, name;
      if (this._eventsCount === 0)
        return names;
      for (name in events = this._events) {
        if (has.call(events, name))
          names.push(prefix ? name.slice(1) : name);
      }
      if (Object.getOwnPropertySymbols) {
        return names.concat(Object.getOwnPropertySymbols(events));
      }
      return names;
    };
    EventEmitter.prototype.listeners = function listeners(event) {
      var evt = prefix ? prefix + event : event, handlers = this._events[evt];
      if (!handlers)
        return [];
      if (handlers.fn)
        return [handlers.fn];
      for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {
        ee[i] = handlers[i].fn;
      }
      return ee;
    };
    EventEmitter.prototype.listenerCount = function listenerCount(event) {
      var evt = prefix ? prefix + event : event, listeners = this._events[evt];
      if (!listeners)
        return 0;
      if (listeners.fn)
        return 1;
      return listeners.length;
    };
    EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
      var evt = prefix ? prefix + event : event;
      if (!this._events[evt])
        return false;
      var listeners = this._events[evt], len = arguments.length, args, i;
      if (listeners.fn) {
        if (listeners.once)
          this.removeListener(event, listeners.fn, void 0, true);
        switch (len) {
          case 1:
            return listeners.fn.call(listeners.context), true;
          case 2:
            return listeners.fn.call(listeners.context, a1), true;
          case 3:
            return listeners.fn.call(listeners.context, a1, a2), true;
          case 4:
            return listeners.fn.call(listeners.context, a1, a2, a3), true;
          case 5:
            return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
          case 6:
            return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
        }
        for (i = 1, args = new Array(len - 1); i < len; i++) {
          args[i - 1] = arguments[i];
        }
        listeners.fn.apply(listeners.context, args);
      } else {
        var length = listeners.length, j;
        for (i = 0; i < length; i++) {
          if (listeners[i].once)
            this.removeListener(event, listeners[i].fn, void 0, true);
          switch (len) {
            case 1:
              listeners[i].fn.call(listeners[i].context);
              break;
            case 2:
              listeners[i].fn.call(listeners[i].context, a1);
              break;
            case 3:
              listeners[i].fn.call(listeners[i].context, a1, a2);
              break;
            case 4:
              listeners[i].fn.call(listeners[i].context, a1, a2, a3);
              break;
            default:
              if (!args)
                for (j = 1, args = new Array(len - 1); j < len; j++) {
                  args[j - 1] = arguments[j];
                }
              listeners[i].fn.apply(listeners[i].context, args);
          }
        }
      }
      return true;
    };
    EventEmitter.prototype.on = function on(event, fn, context2) {
      return addListener(this, event, fn, context2, false);
    };
    EventEmitter.prototype.once = function once(event, fn, context2) {
      return addListener(this, event, fn, context2, true);
    };
    EventEmitter.prototype.removeListener = function removeListener(event, fn, context2, once) {
      var evt = prefix ? prefix + event : event;
      if (!this._events[evt])
        return this;
      if (!fn) {
        clearEvent(this, evt);
        return this;
      }
      var listeners = this._events[evt];
      if (listeners.fn) {
        if (listeners.fn === fn && (!once || listeners.once) && (!context2 || listeners.context === context2)) {
          clearEvent(this, evt);
        }
      } else {
        for (var i = 0, events = [], length = listeners.length; i < length; i++) {
          if (listeners[i].fn !== fn || once && !listeners[i].once || context2 && listeners[i].context !== context2) {
            events.push(listeners[i]);
          }
        }
        if (events.length)
          this._events[evt] = events.length === 1 ? events[0] : events;
        else
          clearEvent(this, evt);
      }
      return this;
    };
    EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {
      var evt;
      if (event) {
        evt = prefix ? prefix + event : event;
        if (this._events[evt])
          clearEvent(this, evt);
      } else {
        this._events = new Events();
        this._eventsCount = 0;
      }
      return this;
    };
    EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
    EventEmitter.prototype.addListener = EventEmitter.prototype.on;
    EventEmitter.prefixed = prefix;
    EventEmitter.EventEmitter = EventEmitter;
    if (typeof module !== "undefined") {
      module.exports = EventEmitter;
    }
  });

  // node_modules/earcut/src/earcut.js
  var require_earcut = __commonJS((exports, module) => {
    "use strict";
    module.exports = earcut;
    module.exports.default = earcut;
    function earcut(data, holeIndices, dim) {
      dim = dim || 2;
      var hasHoles = holeIndices && holeIndices.length, outerLen = hasHoles ? holeIndices[0] * dim : data.length, outerNode = linkedList(data, 0, outerLen, dim, true), triangles = [];
      if (!outerNode || outerNode.next === outerNode.prev)
        return triangles;
      var minX, minY, maxX, maxY, x, y, invSize;
      if (hasHoles)
        outerNode = eliminateHoles(data, holeIndices, outerNode, dim);
      if (data.length > 80 * dim) {
        minX = maxX = data[0];
        minY = maxY = data[1];
        for (var i = dim; i < outerLen; i += dim) {
          x = data[i];
          y = data[i + 1];
          if (x < minX)
            minX = x;
          if (y < minY)
            minY = y;
          if (x > maxX)
            maxX = x;
          if (y > maxY)
            maxY = y;
        }
        invSize = Math.max(maxX - minX, maxY - minY);
        invSize = invSize !== 0 ? 1 / invSize : 0;
      }
      earcutLinked(outerNode, triangles, dim, minX, minY, invSize);
      return triangles;
    }
    function linkedList(data, start, end, dim, clockwise) {
      var i, last;
      if (clockwise === signedArea(data, start, end, dim) > 0) {
        for (i = start; i < end; i += dim)
          last = insertNode(i, data[i], data[i + 1], last);
      } else {
        for (i = end - dim; i >= start; i -= dim)
          last = insertNode(i, data[i], data[i + 1], last);
      }
      if (last && equals(last, last.next)) {
        removeNode(last);
        last = last.next;
      }
      return last;
    }
    function filterPoints(start, end) {
      if (!start)
        return start;
      if (!end)
        end = start;
      var p = start, again;
      do {
        again = false;
        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {
          removeNode(p);
          p = end = p.prev;
          if (p === p.next)
            break;
          again = true;
        } else {
          p = p.next;
        }
      } while (again || p !== end);
      return end;
    }
    function earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {
      if (!ear)
        return;
      if (!pass && invSize)
        indexCurve(ear, minX, minY, invSize);
      var stop = ear, prev, next;
      while (ear.prev !== ear.next) {
        prev = ear.prev;
        next = ear.next;
        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {
          triangles.push(prev.i / dim);
          triangles.push(ear.i / dim);
          triangles.push(next.i / dim);
          removeNode(ear);
          ear = next.next;
          stop = next.next;
          continue;
        }
        ear = next;
        if (ear === stop) {
          if (!pass) {
            earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);
          } else if (pass === 1) {
            ear = cureLocalIntersections(filterPoints(ear), triangles, dim);
            earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);
          } else if (pass === 2) {
            splitEarcut(ear, triangles, dim, minX, minY, invSize);
          }
          break;
        }
      }
    }
    function isEar(ear) {
      var a = ear.prev, b = ear, c = ear.next;
      if (area(a, b, c) >= 0)
        return false;
      var p = ear.next.next;
      while (p !== ear.prev) {
        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0)
          return false;
        p = p.next;
      }
      return true;
    }
    function isEarHashed(ear, minX, minY, invSize) {
      var a = ear.prev, b = ear, c = ear.next;
      if (area(a, b, c) >= 0)
        return false;
      var minTX = a.x < b.x ? a.x < c.x ? a.x : c.x : b.x < c.x ? b.x : c.x, minTY = a.y < b.y ? a.y < c.y ? a.y : c.y : b.y < c.y ? b.y : c.y, maxTX = a.x > b.x ? a.x > c.x ? a.x : c.x : b.x > c.x ? b.x : c.x, maxTY = a.y > b.y ? a.y > c.y ? a.y : c.y : b.y > c.y ? b.y : c.y;
      var minZ = zOrder(minTX, minTY, minX, minY, invSize), maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);
      var p = ear.prevZ, n = ear.nextZ;
      while (p && p.z >= minZ && n && n.z <= maxZ) {
        if (p !== ear.prev && p !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0)
          return false;
        p = p.prevZ;
        if (n !== ear.prev && n !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) && area(n.prev, n, n.next) >= 0)
          return false;
        n = n.nextZ;
      }
      while (p && p.z >= minZ) {
        if (p !== ear.prev && p !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0)
          return false;
        p = p.prevZ;
      }
      while (n && n.z <= maxZ) {
        if (n !== ear.prev && n !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) && area(n.prev, n, n.next) >= 0)
          return false;
        n = n.nextZ;
      }
      return true;
    }
    function cureLocalIntersections(start, triangles, dim) {
      var p = start;
      do {
        var a = p.prev, b = p.next.next;
        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {
          triangles.push(a.i / dim);
          triangles.push(p.i / dim);
          triangles.push(b.i / dim);
          removeNode(p);
          removeNode(p.next);
          p = start = b;
        }
        p = p.next;
      } while (p !== start);
      return filterPoints(p);
    }
    function splitEarcut(start, triangles, dim, minX, minY, invSize) {
      var a = start;
      do {
        var b = a.next.next;
        while (b !== a.prev) {
          if (a.i !== b.i && isValidDiagonal(a, b)) {
            var c = splitPolygon(a, b);
            a = filterPoints(a, a.next);
            c = filterPoints(c, c.next);
            earcutLinked(a, triangles, dim, minX, minY, invSize);
            earcutLinked(c, triangles, dim, minX, minY, invSize);
            return;
          }
          b = b.next;
        }
        a = a.next;
      } while (a !== start);
    }
    function eliminateHoles(data, holeIndices, outerNode, dim) {
      var queue2 = [], i, len, start, end, list;
      for (i = 0, len = holeIndices.length; i < len; i++) {
        start = holeIndices[i] * dim;
        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;
        list = linkedList(data, start, end, dim, false);
        if (list === list.next)
          list.steiner = true;
        queue2.push(getLeftmost(list));
      }
      queue2.sort(compareX);
      for (i = 0; i < queue2.length; i++) {
        eliminateHole(queue2[i], outerNode);
        outerNode = filterPoints(outerNode, outerNode.next);
      }
      return outerNode;
    }
    function compareX(a, b) {
      return a.x - b.x;
    }
    function eliminateHole(hole, outerNode) {
      outerNode = findHoleBridge(hole, outerNode);
      if (outerNode) {
        var b = splitPolygon(outerNode, hole);
        filterPoints(outerNode, outerNode.next);
        filterPoints(b, b.next);
      }
    }
    function findHoleBridge(hole, outerNode) {
      var p = outerNode, hx = hole.x, hy = hole.y, qx = -Infinity, m;
      do {
        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {
          var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);
          if (x <= hx && x > qx) {
            qx = x;
            if (x === hx) {
              if (hy === p.y)
                return p;
              if (hy === p.next.y)
                return p.next;
            }
            m = p.x < p.next.x ? p : p.next;
          }
        }
        p = p.next;
      } while (p !== outerNode);
      if (!m)
        return null;
      if (hx === qx)
        return m;
      var stop = m, mx = m.x, my = m.y, tanMin = Infinity, tan;
      p = m;
      do {
        if (hx >= p.x && p.x >= mx && hx !== p.x && pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {
          tan = Math.abs(hy - p.y) / (hx - p.x);
          if (locallyInside(p, hole) && (tan < tanMin || tan === tanMin && (p.x > m.x || p.x === m.x && sectorContainsSector(m, p)))) {
            m = p;
            tanMin = tan;
          }
        }
        p = p.next;
      } while (p !== stop);
      return m;
    }
    function sectorContainsSector(m, p) {
      return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;
    }
    function indexCurve(start, minX, minY, invSize) {
      var p = start;
      do {
        if (p.z === null)
          p.z = zOrder(p.x, p.y, minX, minY, invSize);
        p.prevZ = p.prev;
        p.nextZ = p.next;
        p = p.next;
      } while (p !== start);
      p.prevZ.nextZ = null;
      p.prevZ = null;
      sortLinked(p);
    }
    function sortLinked(list) {
      var i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;
      do {
        p = list;
        list = null;
        tail = null;
        numMerges = 0;
        while (p) {
          numMerges++;
          q = p;
          pSize = 0;
          for (i = 0; i < inSize; i++) {
            pSize++;
            q = q.nextZ;
            if (!q)
              break;
          }
          qSize = inSize;
          while (pSize > 0 || qSize > 0 && q) {
            if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {
              e = p;
              p = p.nextZ;
              pSize--;
            } else {
              e = q;
              q = q.nextZ;
              qSize--;
            }
            if (tail)
              tail.nextZ = e;
            else
              list = e;
            e.prevZ = tail;
            tail = e;
          }
          p = q;
        }
        tail.nextZ = null;
        inSize *= 2;
      } while (numMerges > 1);
      return list;
    }
    function zOrder(x, y, minX, minY, invSize) {
      x = 32767 * (x - minX) * invSize;
      y = 32767 * (y - minY) * invSize;
      x = (x | x << 8) & 16711935;
      x = (x | x << 4) & 252645135;
      x = (x | x << 2) & 858993459;
      x = (x | x << 1) & 1431655765;
      y = (y | y << 8) & 16711935;
      y = (y | y << 4) & 252645135;
      y = (y | y << 2) & 858993459;
      y = (y | y << 1) & 1431655765;
      return x | y << 1;
    }
    function getLeftmost(start) {
      var p = start, leftmost = start;
      do {
        if (p.x < leftmost.x || p.x === leftmost.x && p.y < leftmost.y)
          leftmost = p;
        p = p.next;
      } while (p !== start);
      return leftmost;
    }
    function pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {
      return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 && (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 && (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;
    }
    function isValidDiagonal(a, b) {
      return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && (area(a.prev, a, b.prev) || area(a, b.prev, b)) || equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0);
    }
    function area(p, q, r) {
      return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);
    }
    function equals(p1, p2) {
      return p1.x === p2.x && p1.y === p2.y;
    }
    function intersects(p1, q1, p2, q2) {
      var o1 = sign2(area(p1, q1, p2));
      var o2 = sign2(area(p1, q1, q2));
      var o3 = sign2(area(p2, q2, p1));
      var o4 = sign2(area(p2, q2, q1));
      if (o1 !== o2 && o3 !== o4)
        return true;
      if (o1 === 0 && onSegment(p1, p2, q1))
        return true;
      if (o2 === 0 && onSegment(p1, q2, q1))
        return true;
      if (o3 === 0 && onSegment(p2, p1, q2))
        return true;
      if (o4 === 0 && onSegment(p2, q1, q2))
        return true;
      return false;
    }
    function onSegment(p, q, r) {
      return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);
    }
    function sign2(num) {
      return num > 0 ? 1 : num < 0 ? -1 : 0;
    }
    function intersectsPolygon(a, b) {
      var p = a;
      do {
        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i && intersects(p, p.next, a, b))
          return true;
        p = p.next;
      } while (p !== a);
      return false;
    }
    function locallyInside(a, b) {
      return area(a.prev, a, a.next) < 0 ? area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 : area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;
    }
    function middleInside(a, b) {
      var p = a, inside = false, px = (a.x + b.x) / 2, py = (a.y + b.y) / 2;
      do {
        if (p.y > py !== p.next.y > py && p.next.y !== p.y && px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x)
          inside = !inside;
        p = p.next;
      } while (p !== a);
      return inside;
    }
    function splitPolygon(a, b) {
      var a2 = new Node(a.i, a.x, a.y), b2 = new Node(b.i, b.x, b.y), an = a.next, bp = b.prev;
      a.next = b;
      b.prev = a;
      a2.next = an;
      an.prev = a2;
      b2.next = a2;
      a2.prev = b2;
      bp.next = b2;
      b2.prev = bp;
      return b2;
    }
    function insertNode(i, x, y, last) {
      var p = new Node(i, x, y);
      if (!last) {
        p.prev = p;
        p.next = p;
      } else {
        p.next = last.next;
        p.prev = last;
        last.next.prev = p;
        last.next = p;
      }
      return p;
    }
    function removeNode(p) {
      p.next.prev = p.prev;
      p.prev.next = p.next;
      if (p.prevZ)
        p.prevZ.nextZ = p.nextZ;
      if (p.nextZ)
        p.nextZ.prevZ = p.prevZ;
    }
    function Node(i, x, y) {
      this.i = i;
      this.x = x;
      this.y = y;
      this.prev = null;
      this.next = null;
      this.z = null;
      this.prevZ = null;
      this.nextZ = null;
      this.steiner = false;
    }
    earcut.deviation = function(data, holeIndices, dim, triangles) {
      var hasHoles = holeIndices && holeIndices.length;
      var outerLen = hasHoles ? holeIndices[0] * dim : data.length;
      var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));
      if (hasHoles) {
        for (var i = 0, len = holeIndices.length; i < len; i++) {
          var start = holeIndices[i] * dim;
          var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;
          polygonArea -= Math.abs(signedArea(data, start, end, dim));
        }
      }
      var trianglesArea = 0;
      for (i = 0; i < triangles.length; i += 3) {
        var a = triangles[i] * dim;
        var b = triangles[i + 1] * dim;
        var c = triangles[i + 2] * dim;
        trianglesArea += Math.abs((data[a] - data[c]) * (data[b + 1] - data[a + 1]) - (data[a] - data[b]) * (data[c + 1] - data[a + 1]));
      }
      return polygonArea === 0 && trianglesArea === 0 ? 0 : Math.abs((trianglesArea - polygonArea) / polygonArea);
    };
    function signedArea(data, start, end, dim) {
      var sum = 0;
      for (var i = start, j = end - dim; i < end; i += dim) {
        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);
        j = i;
      }
      return sum;
    }
    earcut.flatten = function(data) {
      var dim = data[0][0].length, result = {vertices: [], holes: [], dimensions: dim}, holeIndex = 0;
      for (var i = 0; i < data.length; i++) {
        for (var j = 0; j < data[i].length; j++) {
          for (var d = 0; d < dim; d++)
            result.vertices.push(data[i][j][d]);
        }
        if (i > 0) {
          holeIndex += data[i - 1].length;
          result.holes.push(holeIndex);
        }
      }
      return result;
    };
  });

  // node_modules/punycode/punycode.js
  var require_punycode = __commonJS((exports, module) => {
    /*! https://mths.be/punycode v1.3.2 by @mathias */
    (function(root) {
      var freeExports = typeof exports == "object" && exports && !exports.nodeType && exports;
      var freeModule = typeof module == "object" && module && !module.nodeType && module;
      var freeGlobal = typeof global == "object" && global;
      if (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal) {
        root = freeGlobal;
      }
      var punycode, maxInt = 2147483647, base = 36, tMin = 1, tMax = 26, skew = 38, damp = 700, initialBias = 72, initialN = 128, delimiter = "-", regexPunycode = /^xn--/, regexNonASCII = /[^\x20-\x7E]/, regexSeparators = /[\x2E\u3002\uFF0E\uFF61]/g, errors = {
        overflow: "Overflow: input needs wider integers to process",
        "not-basic": "Illegal input >= 0x80 (not a basic code point)",
        "invalid-input": "Invalid input"
      }, baseMinusTMin = base - tMin, floor = Math.floor, stringFromCharCode = String.fromCharCode, key;
      function error(type) {
        throw RangeError(errors[type]);
      }
      function map4(array, fn) {
        var length = array.length;
        var result = [];
        while (length--) {
          result[length] = fn(array[length]);
        }
        return result;
      }
      function mapDomain(string, fn) {
        var parts = string.split("@");
        var result = "";
        if (parts.length > 1) {
          result = parts[0] + "@";
          string = parts[1];
        }
        string = string.replace(regexSeparators, ".");
        var labels = string.split(".");
        var encoded = map4(labels, fn).join(".");
        return result + encoded;
      }
      function ucs2decode(string) {
        var output = [], counter = 0, length = string.length, value, extra;
        while (counter < length) {
          value = string.charCodeAt(counter++);
          if (value >= 55296 && value <= 56319 && counter < length) {
            extra = string.charCodeAt(counter++);
            if ((extra & 64512) == 56320) {
              output.push(((value & 1023) << 10) + (extra & 1023) + 65536);
            } else {
              output.push(value);
              counter--;
            }
          } else {
            output.push(value);
          }
        }
        return output;
      }
      function ucs2encode(array) {
        return map4(array, function(value) {
          var output = "";
          if (value > 65535) {
            value -= 65536;
            output += stringFromCharCode(value >>> 10 & 1023 | 55296);
            value = 56320 | value & 1023;
          }
          output += stringFromCharCode(value);
          return output;
        }).join("");
      }
      function basicToDigit(codePoint) {
        if (codePoint - 48 < 10) {
          return codePoint - 22;
        }
        if (codePoint - 65 < 26) {
          return codePoint - 65;
        }
        if (codePoint - 97 < 26) {
          return codePoint - 97;
        }
        return base;
      }
      function digitToBasic(digit, flag) {
        return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);
      }
      function adapt(delta, numPoints, firstTime) {
        var k = 0;
        delta = firstTime ? floor(delta / damp) : delta >> 1;
        delta += floor(delta / numPoints);
        for (; delta > baseMinusTMin * tMax >> 1; k += base) {
          delta = floor(delta / baseMinusTMin);
        }
        return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
      }
      function decode(input) {
        var output = [], inputLength = input.length, out, i = 0, n = initialN, bias = initialBias, basic, j, index4, oldi, w, k, digit, t, baseMinusT;
        basic = input.lastIndexOf(delimiter);
        if (basic < 0) {
          basic = 0;
        }
        for (j = 0; j < basic; ++j) {
          if (input.charCodeAt(j) >= 128) {
            error("not-basic");
          }
          output.push(input.charCodeAt(j));
        }
        for (index4 = basic > 0 ? basic + 1 : 0; index4 < inputLength; ) {
          for (oldi = i, w = 1, k = base; ; k += base) {
            if (index4 >= inputLength) {
              error("invalid-input");
            }
            digit = basicToDigit(input.charCodeAt(index4++));
            if (digit >= base || digit > floor((maxInt - i) / w)) {
              error("overflow");
            }
            i += digit * w;
            t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;
            if (digit < t) {
              break;
            }
            baseMinusT = base - t;
            if (w > floor(maxInt / baseMinusT)) {
              error("overflow");
            }
            w *= baseMinusT;
          }
          out = output.length + 1;
          bias = adapt(i - oldi, out, oldi == 0);
          if (floor(i / out) > maxInt - n) {
            error("overflow");
          }
          n += floor(i / out);
          i %= out;
          output.splice(i++, 0, n);
        }
        return ucs2encode(output);
      }
      function encode(input) {
        var n, delta, handledCPCount, basicLength, bias, j, m, q, k, t, currentValue, output = [], inputLength, handledCPCountPlusOne, baseMinusT, qMinusT;
        input = ucs2decode(input);
        inputLength = input.length;
        n = initialN;
        delta = 0;
        bias = initialBias;
        for (j = 0; j < inputLength; ++j) {
          currentValue = input[j];
          if (currentValue < 128) {
            output.push(stringFromCharCode(currentValue));
          }
        }
        handledCPCount = basicLength = output.length;
        if (basicLength) {
          output.push(delimiter);
        }
        while (handledCPCount < inputLength) {
          for (m = maxInt, j = 0; j < inputLength; ++j) {
            currentValue = input[j];
            if (currentValue >= n && currentValue < m) {
              m = currentValue;
            }
          }
          handledCPCountPlusOne = handledCPCount + 1;
          if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
            error("overflow");
          }
          delta += (m - n) * handledCPCountPlusOne;
          n = m;
          for (j = 0; j < inputLength; ++j) {
            currentValue = input[j];
            if (currentValue < n && ++delta > maxInt) {
              error("overflow");
            }
            if (currentValue == n) {
              for (q = delta, k = base; ; k += base) {
                t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;
                if (q < t) {
                  break;
                }
                qMinusT = q - t;
                baseMinusT = base - t;
                output.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));
                q = floor(qMinusT / baseMinusT);
              }
              output.push(stringFromCharCode(digitToBasic(q, 0)));
              bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
              delta = 0;
              ++handledCPCount;
            }
          }
          ++delta;
          ++n;
        }
        return output.join("");
      }
      function toUnicode(input) {
        return mapDomain(input, function(string) {
          return regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;
        });
      }
      function toASCII(input) {
        return mapDomain(input, function(string) {
          return regexNonASCII.test(string) ? "xn--" + encode(string) : string;
        });
      }
      punycode = {
        version: "1.3.2",
        ucs2: {
          decode: ucs2decode,
          encode: ucs2encode
        },
        decode,
        encode,
        toASCII,
        toUnicode
      };
      if (typeof define == "function" && typeof define.amd == "object" && define.amd) {
        define("punycode", function() {
          return punycode;
        });
      } else if (freeExports && freeModule) {
        if (module.exports == freeExports) {
          freeModule.exports = punycode;
        } else {
          for (key in punycode) {
            punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);
          }
        }
      } else {
        root.punycode = punycode;
      }
    })(exports);
  });

  // node_modules/url/util.js
  var require_util = __commonJS((exports, module) => {
    "use strict";
    module.exports = {
      isString: function(arg) {
        return typeof arg === "string";
      },
      isObject: function(arg) {
        return typeof arg === "object" && arg !== null;
      },
      isNull: function(arg) {
        return arg === null;
      },
      isNullOrUndefined: function(arg) {
        return arg == null;
      }
    };
  });

  // node_modules/querystring/decode.js
  var require_decode = __commonJS((exports, module) => {
    "use strict";
    function hasOwnProperty(obj, prop) {
      return Object.prototype.hasOwnProperty.call(obj, prop);
    }
    module.exports = function(qs, sep, eq, options) {
      sep = sep || "&";
      eq = eq || "=";
      var obj = {};
      if (typeof qs !== "string" || qs.length === 0) {
        return obj;
      }
      var regexp = /\+/g;
      qs = qs.split(sep);
      var maxKeys = 1e3;
      if (options && typeof options.maxKeys === "number") {
        maxKeys = options.maxKeys;
      }
      var len = qs.length;
      if (maxKeys > 0 && len > maxKeys) {
        len = maxKeys;
      }
      for (var i = 0; i < len; ++i) {
        var x = qs[i].replace(regexp, "%20"), idx = x.indexOf(eq), kstr, vstr, k, v;
        if (idx >= 0) {
          kstr = x.substr(0, idx);
          vstr = x.substr(idx + 1);
        } else {
          kstr = x;
          vstr = "";
        }
        k = decodeURIComponent(kstr);
        v = decodeURIComponent(vstr);
        if (!hasOwnProperty(obj, k)) {
          obj[k] = v;
        } else if (Array.isArray(obj[k])) {
          obj[k].push(v);
        } else {
          obj[k] = [obj[k], v];
        }
      }
      return obj;
    };
  });

  // node_modules/querystring/encode.js
  var require_encode = __commonJS((exports, module) => {
    "use strict";
    var stringifyPrimitive = function(v) {
      switch (typeof v) {
        case "string":
          return v;
        case "boolean":
          return v ? "true" : "false";
        case "number":
          return isFinite(v) ? v : "";
        default:
          return "";
      }
    };
    module.exports = function(obj, sep, eq, name) {
      sep = sep || "&";
      eq = eq || "=";
      if (obj === null) {
        obj = void 0;
      }
      if (typeof obj === "object") {
        return Object.keys(obj).map(function(k) {
          var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
          if (Array.isArray(obj[k])) {
            return obj[k].map(function(v) {
              return ks + encodeURIComponent(stringifyPrimitive(v));
            }).join(sep);
          } else {
            return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
          }
        }).join(sep);
      }
      if (!name)
        return "";
      return encodeURIComponent(stringifyPrimitive(name)) + eq + encodeURIComponent(stringifyPrimitive(obj));
    };
  });

  // node_modules/querystring/index.js
  var require_querystring = __commonJS((exports) => {
    "use strict";
    exports.decode = exports.parse = require_decode();
    exports.encode = exports.stringify = require_encode();
  });

  // node_modules/url/url.js
  var require_url = __commonJS((exports) => {
    "use strict";
    var punycode = require_punycode();
    var util = require_util();
    exports.parse = urlParse;
    exports.resolve = urlResolve;
    exports.resolveObject = urlResolveObject;
    exports.format = urlFormat;
    exports.Url = Url2;
    function Url2() {
      this.protocol = null;
      this.slashes = null;
      this.auth = null;
      this.host = null;
      this.port = null;
      this.hostname = null;
      this.hash = null;
      this.search = null;
      this.query = null;
      this.pathname = null;
      this.path = null;
      this.href = null;
    }
    var protocolPattern = /^([a-z0-9.+-]+:)/i;
    var portPattern = /:[0-9]*$/;
    var simplePathPattern = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/;
    var delims = ["<", ">", '"', "`", " ", "\r", "\n", "	"];
    var unwise = ["{", "}", "|", "\\", "^", "`"].concat(delims);
    var autoEscape = ["'"].concat(unwise);
    var nonHostChars = ["%", "/", "?", ";", "#"].concat(autoEscape);
    var hostEndingChars = ["/", "?", "#"];
    var hostnameMaxLen = 255;
    var hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/;
    var hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/;
    var unsafeProtocol = {
      javascript: true,
      "javascript:": true
    };
    var hostlessProtocol = {
      javascript: true,
      "javascript:": true
    };
    var slashedProtocol = {
      http: true,
      https: true,
      ftp: true,
      gopher: true,
      file: true,
      "http:": true,
      "https:": true,
      "ftp:": true,
      "gopher:": true,
      "file:": true
    };
    var querystring = require_querystring();
    function urlParse(url, parseQueryString, slashesDenoteHost) {
      if (url && util.isObject(url) && url instanceof Url2)
        return url;
      var u = new Url2();
      u.parse(url, parseQueryString, slashesDenoteHost);
      return u;
    }
    Url2.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {
      if (!util.isString(url)) {
        throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
      }
      var queryIndex = url.indexOf("?"), splitter = queryIndex !== -1 && queryIndex < url.indexOf("#") ? "?" : "#", uSplit = url.split(splitter), slashRegex = /\\/g;
      uSplit[0] = uSplit[0].replace(slashRegex, "/");
      url = uSplit.join(splitter);
      var rest = url;
      rest = rest.trim();
      if (!slashesDenoteHost && url.split("#").length === 1) {
        var simplePath = simplePathPattern.exec(rest);
        if (simplePath) {
          this.path = rest;
          this.href = rest;
          this.pathname = simplePath[1];
          if (simplePath[2]) {
            this.search = simplePath[2];
            if (parseQueryString) {
              this.query = querystring.parse(this.search.substr(1));
            } else {
              this.query = this.search.substr(1);
            }
          } else if (parseQueryString) {
            this.search = "";
            this.query = {};
          }
          return this;
        }
      }
      var proto = protocolPattern.exec(rest);
      if (proto) {
        proto = proto[0];
        var lowerProto = proto.toLowerCase();
        this.protocol = lowerProto;
        rest = rest.substr(proto.length);
      }
      if (slashesDenoteHost || proto || rest.match(/^\/\/[^@\/]+@[^@\/]+/)) {
        var slashes = rest.substr(0, 2) === "//";
        if (slashes && !(proto && hostlessProtocol[proto])) {
          rest = rest.substr(2);
          this.slashes = true;
        }
      }
      if (!hostlessProtocol[proto] && (slashes || proto && !slashedProtocol[proto])) {
        var hostEnd = -1;
        for (var i = 0; i < hostEndingChars.length; i++) {
          var hec = rest.indexOf(hostEndingChars[i]);
          if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
            hostEnd = hec;
        }
        var auth, atSign;
        if (hostEnd === -1) {
          atSign = rest.lastIndexOf("@");
        } else {
          atSign = rest.lastIndexOf("@", hostEnd);
        }
        if (atSign !== -1) {
          auth = rest.slice(0, atSign);
          rest = rest.slice(atSign + 1);
          this.auth = decodeURIComponent(auth);
        }
        hostEnd = -1;
        for (var i = 0; i < nonHostChars.length; i++) {
          var hec = rest.indexOf(nonHostChars[i]);
          if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
            hostEnd = hec;
        }
        if (hostEnd === -1)
          hostEnd = rest.length;
        this.host = rest.slice(0, hostEnd);
        rest = rest.slice(hostEnd);
        this.parseHost();
        this.hostname = this.hostname || "";
        var ipv6Hostname = this.hostname[0] === "[" && this.hostname[this.hostname.length - 1] === "]";
        if (!ipv6Hostname) {
          var hostparts = this.hostname.split(/\./);
          for (var i = 0, l = hostparts.length; i < l; i++) {
            var part = hostparts[i];
            if (!part)
              continue;
            if (!part.match(hostnamePartPattern)) {
              var newpart = "";
              for (var j = 0, k = part.length; j < k; j++) {
                if (part.charCodeAt(j) > 127) {
                  newpart += "x";
                } else {
                  newpart += part[j];
                }
              }
              if (!newpart.match(hostnamePartPattern)) {
                var validParts = hostparts.slice(0, i);
                var notHost = hostparts.slice(i + 1);
                var bit = part.match(hostnamePartStart);
                if (bit) {
                  validParts.push(bit[1]);
                  notHost.unshift(bit[2]);
                }
                if (notHost.length) {
                  rest = "/" + notHost.join(".") + rest;
                }
                this.hostname = validParts.join(".");
                break;
              }
            }
          }
        }
        if (this.hostname.length > hostnameMaxLen) {
          this.hostname = "";
        } else {
          this.hostname = this.hostname.toLowerCase();
        }
        if (!ipv6Hostname) {
          this.hostname = punycode.toASCII(this.hostname);
        }
        var p = this.port ? ":" + this.port : "";
        var h = this.hostname || "";
        this.host = h + p;
        this.href += this.host;
        if (ipv6Hostname) {
          this.hostname = this.hostname.substr(1, this.hostname.length - 2);
          if (rest[0] !== "/") {
            rest = "/" + rest;
          }
        }
      }
      if (!unsafeProtocol[lowerProto]) {
        for (var i = 0, l = autoEscape.length; i < l; i++) {
          var ae = autoEscape[i];
          if (rest.indexOf(ae) === -1)
            continue;
          var esc = encodeURIComponent(ae);
          if (esc === ae) {
            esc = escape(ae);
          }
          rest = rest.split(ae).join(esc);
        }
      }
      var hash = rest.indexOf("#");
      if (hash !== -1) {
        this.hash = rest.substr(hash);
        rest = rest.slice(0, hash);
      }
      var qm = rest.indexOf("?");
      if (qm !== -1) {
        this.search = rest.substr(qm);
        this.query = rest.substr(qm + 1);
        if (parseQueryString) {
          this.query = querystring.parse(this.query);
        }
        rest = rest.slice(0, qm);
      } else if (parseQueryString) {
        this.search = "";
        this.query = {};
      }
      if (rest)
        this.pathname = rest;
      if (slashedProtocol[lowerProto] && this.hostname && !this.pathname) {
        this.pathname = "/";
      }
      if (this.pathname || this.search) {
        var p = this.pathname || "";
        var s = this.search || "";
        this.path = p + s;
      }
      this.href = this.format();
      return this;
    };
    function urlFormat(obj) {
      if (util.isString(obj))
        obj = urlParse(obj);
      if (!(obj instanceof Url2))
        return Url2.prototype.format.call(obj);
      return obj.format();
    }
    Url2.prototype.format = function() {
      var auth = this.auth || "";
      if (auth) {
        auth = encodeURIComponent(auth);
        auth = auth.replace(/%3A/i, ":");
        auth += "@";
      }
      var protocol = this.protocol || "", pathname = this.pathname || "", hash = this.hash || "", host = false, query = "";
      if (this.host) {
        host = auth + this.host;
      } else if (this.hostname) {
        host = auth + (this.hostname.indexOf(":") === -1 ? this.hostname : "[" + this.hostname + "]");
        if (this.port) {
          host += ":" + this.port;
        }
      }
      if (this.query && util.isObject(this.query) && Object.keys(this.query).length) {
        query = querystring.stringify(this.query);
      }
      var search = this.search || query && "?" + query || "";
      if (protocol && protocol.substr(-1) !== ":")
        protocol += ":";
      if (this.slashes || (!protocol || slashedProtocol[protocol]) && host !== false) {
        host = "//" + (host || "");
        if (pathname && pathname.charAt(0) !== "/")
          pathname = "/" + pathname;
      } else if (!host) {
        host = "";
      }
      if (hash && hash.charAt(0) !== "#")
        hash = "#" + hash;
      if (search && search.charAt(0) !== "?")
        search = "?" + search;
      pathname = pathname.replace(/[?#]/g, function(match) {
        return encodeURIComponent(match);
      });
      search = search.replace("#", "%23");
      return protocol + host + pathname + search + hash;
    };
    function urlResolve(source, relative) {
      return urlParse(source, false, true).resolve(relative);
    }
    Url2.prototype.resolve = function(relative) {
      return this.resolveObject(urlParse(relative, false, true)).format();
    };
    function urlResolveObject(source, relative) {
      if (!source)
        return relative;
      return urlParse(source, false, true).resolveObject(relative);
    }
    Url2.prototype.resolveObject = function(relative) {
      if (util.isString(relative)) {
        var rel = new Url2();
        rel.parse(relative, false, true);
        relative = rel;
      }
      var result = new Url2();
      var tkeys = Object.keys(this);
      for (var tk = 0; tk < tkeys.length; tk++) {
        var tkey = tkeys[tk];
        result[tkey] = this[tkey];
      }
      result.hash = relative.hash;
      if (relative.href === "") {
        result.href = result.format();
        return result;
      }
      if (relative.slashes && !relative.protocol) {
        var rkeys = Object.keys(relative);
        for (var rk = 0; rk < rkeys.length; rk++) {
          var rkey = rkeys[rk];
          if (rkey !== "protocol")
            result[rkey] = relative[rkey];
        }
        if (slashedProtocol[result.protocol] && result.hostname && !result.pathname) {
          result.path = result.pathname = "/";
        }
        result.href = result.format();
        return result;
      }
      if (relative.protocol && relative.protocol !== result.protocol) {
        if (!slashedProtocol[relative.protocol]) {
          var keys2 = Object.keys(relative);
          for (var v = 0; v < keys2.length; v++) {
            var k = keys2[v];
            result[k] = relative[k];
          }
          result.href = result.format();
          return result;
        }
        result.protocol = relative.protocol;
        if (!relative.host && !hostlessProtocol[relative.protocol]) {
          var relPath = (relative.pathname || "").split("/");
          while (relPath.length && !(relative.host = relPath.shift()))
            ;
          if (!relative.host)
            relative.host = "";
          if (!relative.hostname)
            relative.hostname = "";
          if (relPath[0] !== "")
            relPath.unshift("");
          if (relPath.length < 2)
            relPath.unshift("");
          result.pathname = relPath.join("/");
        } else {
          result.pathname = relative.pathname;
        }
        result.search = relative.search;
        result.query = relative.query;
        result.host = relative.host || "";
        result.auth = relative.auth;
        result.hostname = relative.hostname || relative.host;
        result.port = relative.port;
        if (result.pathname || result.search) {
          var p = result.pathname || "";
          var s = result.search || "";
          result.path = p + s;
        }
        result.slashes = result.slashes || relative.slashes;
        result.href = result.format();
        return result;
      }
      var isSourceAbs = result.pathname && result.pathname.charAt(0) === "/", isRelAbs = relative.host || relative.pathname && relative.pathname.charAt(0) === "/", mustEndAbs = isRelAbs || isSourceAbs || result.host && relative.pathname, removeAllDots = mustEndAbs, srcPath = result.pathname && result.pathname.split("/") || [], relPath = relative.pathname && relative.pathname.split("/") || [], psychotic = result.protocol && !slashedProtocol[result.protocol];
      if (psychotic) {
        result.hostname = "";
        result.port = null;
        if (result.host) {
          if (srcPath[0] === "")
            srcPath[0] = result.host;
          else
            srcPath.unshift(result.host);
        }
        result.host = "";
        if (relative.protocol) {
          relative.hostname = null;
          relative.port = null;
          if (relative.host) {
            if (relPath[0] === "")
              relPath[0] = relative.host;
            else
              relPath.unshift(relative.host);
          }
          relative.host = null;
        }
        mustEndAbs = mustEndAbs && (relPath[0] === "" || srcPath[0] === "");
      }
      if (isRelAbs) {
        result.host = relative.host || relative.host === "" ? relative.host : result.host;
        result.hostname = relative.hostname || relative.hostname === "" ? relative.hostname : result.hostname;
        result.search = relative.search;
        result.query = relative.query;
        srcPath = relPath;
      } else if (relPath.length) {
        if (!srcPath)
          srcPath = [];
        srcPath.pop();
        srcPath = srcPath.concat(relPath);
        result.search = relative.search;
        result.query = relative.query;
      } else if (!util.isNullOrUndefined(relative.search)) {
        if (psychotic) {
          result.hostname = result.host = srcPath.shift();
          var authInHost = result.host && result.host.indexOf("@") > 0 ? result.host.split("@") : false;
          if (authInHost) {
            result.auth = authInHost.shift();
            result.host = result.hostname = authInHost.shift();
          }
        }
        result.search = relative.search;
        result.query = relative.query;
        if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
          result.path = (result.pathname ? result.pathname : "") + (result.search ? result.search : "");
        }
        result.href = result.format();
        return result;
      }
      if (!srcPath.length) {
        result.pathname = null;
        if (result.search) {
          result.path = "/" + result.search;
        } else {
          result.path = null;
        }
        result.href = result.format();
        return result;
      }
      var last = srcPath.slice(-1)[0];
      var hasTrailingSlash = (result.host || relative.host || srcPath.length > 1) && (last === "." || last === "..") || last === "";
      var up2 = 0;
      for (var i = srcPath.length; i >= 0; i--) {
        last = srcPath[i];
        if (last === ".") {
          srcPath.splice(i, 1);
        } else if (last === "..") {
          srcPath.splice(i, 1);
          up2++;
        } else if (up2) {
          srcPath.splice(i, 1);
          up2--;
        }
      }
      if (!mustEndAbs && !removeAllDots) {
        for (; up2--; up2) {
          srcPath.unshift("..");
        }
      }
      if (mustEndAbs && srcPath[0] !== "" && (!srcPath[0] || srcPath[0].charAt(0) !== "/")) {
        srcPath.unshift("");
      }
      if (hasTrailingSlash && srcPath.join("/").substr(-1) !== "/") {
        srcPath.push("");
      }
      var isAbsolute = srcPath[0] === "" || srcPath[0] && srcPath[0].charAt(0) === "/";
      if (psychotic) {
        result.hostname = result.host = isAbsolute ? "" : srcPath.length ? srcPath.shift() : "";
        var authInHost = result.host && result.host.indexOf("@") > 0 ? result.host.split("@") : false;
        if (authInHost) {
          result.auth = authInHost.shift();
          result.host = result.hostname = authInHost.shift();
        }
      }
      mustEndAbs = mustEndAbs || result.host && srcPath.length;
      if (mustEndAbs && !isAbsolute) {
        srcPath.unshift("");
      }
      if (!srcPath.length) {
        result.pathname = null;
        result.path = null;
      } else {
        result.pathname = srcPath.join("/");
      }
      if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
        result.path = (result.pathname ? result.pathname : "") + (result.search ? result.search : "");
      }
      result.auth = relative.auth || result.auth;
      result.slashes = result.slashes || relative.slashes;
      result.href = result.format();
      return result;
    };
    Url2.prototype.parseHost = function() {
      var host = this.host;
      var port = portPattern.exec(host);
      if (port) {
        port = port[0];
        if (port !== ":") {
          this.port = port.substr(1);
        }
        host = host.substr(0, host.length - port.length);
      }
      if (host)
        this.hostname = host;
    };
  });

  // node_modules/parse-uri/index.js
  var require_parse_uri = __commonJS((exports, module) => {
    "use strict";
    function parseURI(str, opts) {
      if (!str)
        return void 0;
      opts = opts || {};
      var o = {
        key: [
          "source",
          "protocol",
          "authority",
          "userInfo",
          "user",
          "password",
          "host",
          "port",
          "relative",
          "path",
          "directory",
          "file",
          "query",
          "anchor"
        ],
        q: {
          name: "queryKey",
          parser: /(?:^|&)([^&=]*)=?([^&]*)/g
        },
        parser: {
          strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
          loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
        }
      };
      var m = o.parser[opts.strictMode ? "strict" : "loose"].exec(str);
      var uri = {};
      var i = 14;
      while (i--)
        uri[o.key[i]] = m[i] || "";
      uri[o.q.name] = {};
      uri[o.key[12]].replace(o.q.parser, function($0, $1, $2) {
        if ($1)
          uri[o.q.name][$1] = $2;
      });
      return uri;
    }
    module.exports = parseURI;
  });

  // node_modules/mini-signals/lib/mini-signals.js
  var require_mini_signals = __commonJS((exports, module) => {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    var _createClass2 = function() {
      function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
          var descriptor = props[i];
          descriptor.enumerable = descriptor.enumerable || false;
          descriptor.configurable = true;
          if ("value" in descriptor)
            descriptor.writable = true;
          Object.defineProperty(target, descriptor.key, descriptor);
        }
      }
      return function(Constructor, protoProps, staticProps) {
        if (protoProps)
          defineProperties(Constructor.prototype, protoProps);
        if (staticProps)
          defineProperties(Constructor, staticProps);
        return Constructor;
      };
    }();
    function _classCallCheck(instance, Constructor) {
      if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }
    var MiniSignalBinding = function() {
      function MiniSignalBinding2(fn, once, thisArg) {
        if (once === void 0)
          once = false;
        _classCallCheck(this, MiniSignalBinding2);
        this._fn = fn;
        this._once = once;
        this._thisArg = thisArg;
        this._next = this._prev = this._owner = null;
      }
      _createClass2(MiniSignalBinding2, [{
        key: "detach",
        value: function detach() {
          if (this._owner === null)
            return false;
          this._owner.detach(this);
          return true;
        }
      }]);
      return MiniSignalBinding2;
    }();
    function _addMiniSignalBinding(self2, node) {
      if (!self2._head) {
        self2._head = node;
        self2._tail = node;
      } else {
        self2._tail._next = node;
        node._prev = self2._tail;
        self2._tail = node;
      }
      node._owner = self2;
      return node;
    }
    var MiniSignal = function() {
      function MiniSignal2() {
        _classCallCheck(this, MiniSignal2);
        this._head = this._tail = void 0;
      }
      _createClass2(MiniSignal2, [{
        key: "handlers",
        value: function handlers() {
          var exists = arguments.length <= 0 || arguments[0] === void 0 ? false : arguments[0];
          var node = this._head;
          if (exists)
            return !!node;
          var ee = [];
          while (node) {
            ee.push(node);
            node = node._next;
          }
          return ee;
        }
      }, {
        key: "has",
        value: function has(node) {
          if (!(node instanceof MiniSignalBinding)) {
            throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");
          }
          return node._owner === this;
        }
      }, {
        key: "dispatch",
        value: function dispatch() {
          var node = this._head;
          if (!node)
            return false;
          while (node) {
            if (node._once)
              this.detach(node);
            node._fn.apply(node._thisArg, arguments);
            node = node._next;
          }
          return true;
        }
      }, {
        key: "add",
        value: function add(fn) {
          var thisArg = arguments.length <= 1 || arguments[1] === void 0 ? null : arguments[1];
          if (typeof fn !== "function") {
            throw new Error("MiniSignal#add(): First arg must be a Function.");
          }
          return _addMiniSignalBinding(this, new MiniSignalBinding(fn, false, thisArg));
        }
      }, {
        key: "once",
        value: function once(fn) {
          var thisArg = arguments.length <= 1 || arguments[1] === void 0 ? null : arguments[1];
          if (typeof fn !== "function") {
            throw new Error("MiniSignal#once(): First arg must be a Function.");
          }
          return _addMiniSignalBinding(this, new MiniSignalBinding(fn, true, thisArg));
        }
      }, {
        key: "detach",
        value: function detach(node) {
          if (!(node instanceof MiniSignalBinding)) {
            throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");
          }
          if (node._owner !== this)
            return this;
          if (node._prev)
            node._prev._next = node._next;
          if (node._next)
            node._next._prev = node._prev;
          if (node === this._head) {
            this._head = node._next;
            if (node._next === null) {
              this._tail = null;
            }
          } else if (node === this._tail) {
            this._tail = node._prev;
            this._tail._next = null;
          }
          node._owner = null;
          return this;
        }
      }, {
        key: "detachAll",
        value: function detachAll() {
          var node = this._head;
          if (!node)
            return this;
          this._head = this._tail = null;
          while (node) {
            node._owner = null;
            node = node._next;
          }
          return this;
        }
      }]);
      return MiniSignal2;
    }();
    MiniSignal.MiniSignalBinding = MiniSignalBinding;
    exports["default"] = MiniSignal;
    module.exports = exports["default"];
  });

  // node_modules/pixi.js/lib/pixi.es.js
  var pixi_es_exports = {};
  __export(pixi_es_exports, {
    ALPHA_MODES: () => ALPHA_MODES,
    AbstractBatchRenderer: () => AbstractBatchRenderer,
    AbstractRenderer: () => AbstractRenderer,
    AccessibilityManager: () => AccessibilityManager,
    AnimatedSprite: () => AnimatedSprite,
    AppLoaderPlugin: () => AppLoaderPlugin,
    Application: () => Application,
    Attribute: () => Attribute,
    BLEND_MODES: () => BLEND_MODES,
    BUFFER_BITS: () => BUFFER_BITS,
    BasePrepare: () => BasePrepare,
    BaseRenderTexture: () => BaseRenderTexture,
    BaseTexture: () => BaseTexture,
    BatchDrawCall: () => BatchDrawCall,
    BatchGeometry: () => BatchGeometry,
    BatchPluginFactory: () => BatchPluginFactory,
    BatchRenderer: () => BatchRenderer,
    BatchShaderGenerator: () => BatchShaderGenerator,
    BatchTextureArray: () => BatchTextureArray,
    BitmapFont: () => BitmapFont,
    BitmapFontData: () => BitmapFontData,
    BitmapFontLoader: () => BitmapFontLoader,
    BitmapText: () => BitmapText,
    Bounds: () => Bounds,
    Buffer: () => Buffer2,
    CLEAR_MODES: () => CLEAR_MODES,
    Circle: () => Circle,
    Container: () => Container,
    CountLimiter: () => CountLimiter,
    DEG_TO_RAD: () => DEG_TO_RAD,
    DRAW_MODES: () => DRAW_MODES,
    DisplayObject: () => DisplayObject,
    ENV: () => ENV,
    Ellipse: () => Ellipse,
    Extract: () => Extract,
    FORMATS: () => FORMATS,
    FillStyle: () => FillStyle,
    Filter: () => Filter,
    FilterState: () => FilterState,
    Framebuffer: () => Framebuffer,
    GC_MODES: () => GC_MODES,
    GLFramebuffer: () => GLFramebuffer,
    GLProgram: () => GLProgram,
    GLTexture: () => GLTexture,
    GRAPHICS_CURVES: () => GRAPHICS_CURVES,
    Geometry: () => Geometry,
    Graphics: () => Graphics,
    GraphicsData: () => GraphicsData,
    GraphicsGeometry: () => GraphicsGeometry,
    IGLUniformData: () => IGLUniformData,
    InteractionData: () => InteractionData,
    InteractionEvent: () => InteractionEvent,
    InteractionManager: () => InteractionManager,
    InteractionTrackingData: () => InteractionTrackingData,
    LINE_CAP: () => LINE_CAP,
    LINE_JOIN: () => LINE_JOIN,
    LineStyle: () => LineStyle,
    Loader: () => Loader2,
    LoaderResource: () => LoaderResource,
    MASK_TYPES: () => MASK_TYPES,
    MIPMAP_MODES: () => MIPMAP_MODES,
    MSAA_QUALITY: () => MSAA_QUALITY,
    MaskData: () => MaskData,
    Matrix: () => Matrix,
    Mesh: () => Mesh,
    MeshBatchUvs: () => MeshBatchUvs,
    MeshGeometry: () => MeshGeometry,
    MeshMaterial: () => MeshMaterial,
    NineSlicePlane: () => NineSlicePlane,
    ObjectRenderer: () => ObjectRenderer,
    ObservablePoint: () => ObservablePoint,
    PI_2: () => PI_2,
    PRECISION: () => PRECISION,
    ParticleContainer: () => ParticleContainer,
    ParticleRenderer: () => ParticleRenderer,
    PlaneGeometry: () => PlaneGeometry,
    Point: () => Point,
    Polygon: () => Polygon,
    Prepare: () => Prepare,
    Program: () => Program,
    Quad: () => Quad,
    QuadUv: () => QuadUv,
    RAD_TO_DEG: () => RAD_TO_DEG,
    RENDERER_TYPE: () => RENDERER_TYPE,
    Rectangle: () => Rectangle,
    RenderTexture: () => RenderTexture,
    RenderTexturePool: () => RenderTexturePool,
    Renderer: () => Renderer,
    RopeGeometry: () => RopeGeometry,
    RoundedRectangle: () => RoundedRectangle,
    Runner: () => Runner,
    SCALE_MODES: () => SCALE_MODES,
    SHAPES: () => SHAPES,
    Shader: () => Shader,
    SimpleMesh: () => SimpleMesh,
    SimplePlane: () => SimplePlane,
    SimpleRope: () => SimpleRope,
    Sprite: () => Sprite,
    SpriteMaskFilter: () => SpriteMaskFilter,
    Spritesheet: () => Spritesheet,
    SpritesheetLoader: () => SpritesheetLoader,
    State: () => State,
    System: () => System,
    TARGETS: () => TARGETS,
    TEXT_GRADIENT: () => TEXT_GRADIENT,
    TYPES: () => TYPES,
    TemporaryDisplayObject: () => TemporaryDisplayObject,
    Text: () => Text,
    TextMetrics: () => TextMetrics,
    TextStyle: () => TextStyle,
    Texture: () => Texture,
    TextureLoader: () => TextureLoader,
    TextureMatrix: () => TextureMatrix,
    TextureUvs: () => TextureUvs,
    Ticker: () => Ticker,
    TickerPlugin: () => TickerPlugin,
    TilingSprite: () => TilingSprite,
    TilingSpriteRenderer: () => TilingSpriteRenderer,
    TimeLimiter: () => TimeLimiter,
    Transform: () => Transform,
    UPDATE_PRIORITY: () => UPDATE_PRIORITY,
    UniformGroup: () => UniformGroup,
    VERSION: () => VERSION2,
    ViewableBuffer: () => ViewableBuffer,
    WRAP_MODES: () => WRAP_MODES,
    accessibleTarget: () => accessibleTarget,
    autoDetectRenderer: () => autoDetectRenderer,
    checkMaxIfStatementsInShader: () => checkMaxIfStatementsInShader,
    defaultFilterVertex: () => defaultFilter,
    defaultVertex: () => _default,
    filters: () => filters,
    graphicsUtils: () => index3,
    groupD8: () => groupD8,
    interactiveTarget: () => interactiveTarget,
    isMobile: () => isMobile2,
    resources: () => index,
    settings: () => settings,
    systems: () => systems,
    uniformParsers: () => uniformParsers,
    useDeprecated: () => useDeprecated,
    utils: () => utils_es_exports
  });

  // node_modules/@pixi/polyfill/lib/polyfill.es.js
  var import_es6_promise_polyfill = __toModule(require_promise());
  var import_object_assign = __toModule(require_object_assign());
  /*!
   * @pixi/polyfill - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/polyfill is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  if (!window.Promise) {
    window.Promise = import_es6_promise_polyfill.Polyfill;
  }
  if (!Object.assign) {
    Object.assign = import_object_assign.default;
  }
  var ONE_FRAME_TIME = 16;
  if (!(Date.now && Date.prototype.getTime)) {
    Date.now = function now() {
      return new Date().getTime();
    };
  }
  if (!(window.performance && window.performance.now)) {
    startTime_1 = Date.now();
    if (!window.performance) {
      window.performance = {};
    }
    window.performance.now = function() {
      return Date.now() - startTime_1;
    };
  }
  var startTime_1;
  var lastTime = Date.now();
  var vendors = ["ms", "moz", "webkit", "o"];
  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
    p = vendors[x];
    window.requestAnimationFrame = window[p + "RequestAnimationFrame"];
    window.cancelAnimationFrame = window[p + "CancelAnimationFrame"] || window[p + "CancelRequestAnimationFrame"];
  }
  var p;
  if (!window.requestAnimationFrame) {
    window.requestAnimationFrame = function(callback) {
      if (typeof callback !== "function") {
        throw new TypeError(callback + "is not a function");
      }
      var currentTime = Date.now();
      var delay = ONE_FRAME_TIME + lastTime - currentTime;
      if (delay < 0) {
        delay = 0;
      }
      lastTime = currentTime;
      return window.setTimeout(function() {
        lastTime = Date.now();
        callback(performance.now());
      }, delay);
    };
  }
  if (!window.cancelAnimationFrame) {
    window.cancelAnimationFrame = function(id) {
      return clearTimeout(id);
    };
  }
  if (!Math.sign) {
    Math.sign = function mathSign(x) {
      x = Number(x);
      if (x === 0 || isNaN(x)) {
        return x;
      }
      return x > 0 ? 1 : -1;
    };
  }
  if (!Number.isInteger) {
    Number.isInteger = function numberIsInteger(value) {
      return typeof value === "number" && isFinite(value) && Math.floor(value) === value;
    };
  }
  if (!window.ArrayBuffer) {
    window.ArrayBuffer = Array;
  }
  if (!window.Float32Array) {
    window.Float32Array = Array;
  }
  if (!window.Uint32Array) {
    window.Uint32Array = Array;
  }
  if (!window.Uint16Array) {
    window.Uint16Array = Array;
  }
  if (!window.Uint8Array) {
    window.Uint8Array = Array;
  }
  if (!window.Int32Array) {
    window.Int32Array = Array;
  }

  // node_modules/@pixi/utils/lib/utils.es.js
  var utils_es_exports = {};
  __export(utils_es_exports, {
    BaseTextureCache: () => BaseTextureCache,
    CanvasRenderTarget: () => CanvasRenderTarget,
    DATA_URI: () => DATA_URI,
    EventEmitter: () => import_eventemitter3.default,
    ProgramCache: () => ProgramCache,
    TextureCache: () => TextureCache,
    clearTextureCache: () => clearTextureCache,
    correctBlendMode: () => correctBlendMode,
    createIndicesForQuads: () => createIndicesForQuads,
    decomposeDataUri: () => decomposeDataUri,
    deprecation: () => deprecation,
    destroyTextureCache: () => destroyTextureCache,
    determineCrossOrigin: () => determineCrossOrigin,
    earcut: () => import_earcut.default,
    getBufferType: () => getBufferType,
    getResolutionOfUrl: () => getResolutionOfUrl,
    hex2rgb: () => hex2rgb,
    hex2string: () => hex2string,
    interleaveTypedArrays: () => interleaveTypedArrays,
    isMobile: () => isMobile2,
    isPow2: () => isPow2,
    isWebGLSupported: () => isWebGLSupported,
    log2: () => log2,
    nextPow2: () => nextPow2,
    premultiplyBlendMode: () => premultiplyBlendMode,
    premultiplyRgba: () => premultiplyRgba,
    premultiplyTint: () => premultiplyTint,
    premultiplyTintToRgba: () => premultiplyTintToRgba,
    removeItems: () => removeItems,
    rgb2hex: () => rgb2hex,
    sayHello: () => sayHello,
    sign: () => sign,
    skipHello: () => skipHello,
    string2hex: () => string2hex,
    trimCanvas: () => trimCanvas,
    uid: () => uid,
    url: () => import_url2.default
  });

  // node_modules/ismobilejs/esm/isMobile.js
  var appleIphone = /iPhone/i;
  var appleIpod = /iPod/i;
  var appleTablet = /iPad/i;
  var appleUniversal = /\biOS-universal(?:.+)Mac\b/i;
  var androidPhone = /\bAndroid(?:.+)Mobile\b/i;
  var androidTablet = /Android/i;
  var amazonPhone = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i;
  var amazonTablet = /Silk/i;
  var windowsPhone = /Windows Phone/i;
  var windowsTablet = /\bWindows(?:.+)ARM\b/i;
  var otherBlackBerry = /BlackBerry/i;
  var otherBlackBerry10 = /BB10/i;
  var otherOpera = /Opera Mini/i;
  var otherChrome = /\b(CriOS|Chrome)(?:.+)Mobile/i;
  var otherFirefox = /Mobile(?:.+)Firefox\b/i;
  var isAppleTabletOnIos13 = function(navigator2) {
    return typeof navigator2 !== "undefined" && navigator2.platform === "MacIntel" && typeof navigator2.maxTouchPoints === "number" && navigator2.maxTouchPoints > 1 && typeof MSStream === "undefined";
  };
  function createMatch(userAgent) {
    return function(regex) {
      return regex.test(userAgent);
    };
  }
  function isMobile(param) {
    var nav = {
      userAgent: "",
      platform: "",
      maxTouchPoints: 0
    };
    if (!param && typeof navigator !== "undefined") {
      nav = {
        userAgent: navigator.userAgent,
        platform: navigator.platform,
        maxTouchPoints: navigator.maxTouchPoints || 0
      };
    } else if (typeof param === "string") {
      nav.userAgent = param;
    } else if (param && param.userAgent) {
      nav = {
        userAgent: param.userAgent,
        platform: param.platform,
        maxTouchPoints: param.maxTouchPoints || 0
      };
    }
    var userAgent = nav.userAgent;
    var tmp = userAgent.split("[FBAN");
    if (typeof tmp[1] !== "undefined") {
      userAgent = tmp[0];
    }
    tmp = userAgent.split("Twitter");
    if (typeof tmp[1] !== "undefined") {
      userAgent = tmp[0];
    }
    var match = createMatch(userAgent);
    var result = {
      apple: {
        phone: match(appleIphone) && !match(windowsPhone),
        ipod: match(appleIpod),
        tablet: !match(appleIphone) && (match(appleTablet) || isAppleTabletOnIos13(nav)) && !match(windowsPhone),
        universal: match(appleUniversal),
        device: (match(appleIphone) || match(appleIpod) || match(appleTablet) || match(appleUniversal) || isAppleTabletOnIos13(nav)) && !match(windowsPhone)
      },
      amazon: {
        phone: match(amazonPhone),
        tablet: !match(amazonPhone) && match(amazonTablet),
        device: match(amazonPhone) || match(amazonTablet)
      },
      android: {
        phone: !match(windowsPhone) && match(amazonPhone) || !match(windowsPhone) && match(androidPhone),
        tablet: !match(windowsPhone) && !match(amazonPhone) && !match(androidPhone) && (match(amazonTablet) || match(androidTablet)),
        device: !match(windowsPhone) && (match(amazonPhone) || match(amazonTablet) || match(androidPhone) || match(androidTablet)) || match(/\bokhttp\b/i)
      },
      windows: {
        phone: match(windowsPhone),
        tablet: match(windowsTablet),
        device: match(windowsPhone) || match(windowsTablet)
      },
      other: {
        blackberry: match(otherBlackBerry),
        blackberry10: match(otherBlackBerry10),
        opera: match(otherOpera),
        firefox: match(otherFirefox),
        chrome: match(otherChrome),
        device: match(otherBlackBerry) || match(otherBlackBerry10) || match(otherOpera) || match(otherFirefox) || match(otherChrome)
      },
      any: false,
      phone: false,
      tablet: false
    };
    result.any = result.apple.device || result.android.device || result.windows.device || result.other.device;
    result.phone = result.apple.phone || result.android.phone || result.windows.phone;
    result.tablet = result.apple.tablet || result.android.tablet || result.windows.tablet;
    return result;
  }

  // node_modules/@pixi/settings/lib/settings.es.js
  /*!
   * @pixi/settings - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/settings is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var isMobile2 = isMobile(window.navigator);
  function maxRecommendedTextures(max) {
    var allowMax = true;
    if (isMobile2.tablet || isMobile2.phone) {
      if (isMobile2.apple.device) {
        var match = navigator.userAgent.match(/OS (\d+)_(\d+)?/);
        if (match) {
          var majorVersion = parseInt(match[1], 10);
          if (majorVersion < 11) {
            allowMax = false;
          }
        }
      }
      if (isMobile2.android.device) {
        var match = navigator.userAgent.match(/Android\s([0-9.]*)/);
        if (match) {
          var majorVersion = parseInt(match[1], 10);
          if (majorVersion < 7) {
            allowMax = false;
          }
        }
      }
    }
    return allowMax ? max : 4;
  }
  function canUploadSameBuffer() {
    return !isMobile2.apple.device;
  }
  var settings = {
    MIPMAP_TEXTURES: 1,
    ANISOTROPIC_LEVEL: 0,
    RESOLUTION: 1,
    FILTER_RESOLUTION: 1,
    SPRITE_MAX_TEXTURES: maxRecommendedTextures(32),
    SPRITE_BATCH_SIZE: 4096,
    RENDER_OPTIONS: {
      view: null,
      antialias: false,
      autoDensity: false,
      transparent: false,
      backgroundColor: 0,
      clearBeforeRender: true,
      preserveDrawingBuffer: false,
      width: 800,
      height: 600,
      legacy: false
    },
    GC_MODE: 0,
    GC_MAX_IDLE: 60 * 60,
    GC_MAX_CHECK_COUNT: 60 * 10,
    WRAP_MODE: 33071,
    SCALE_MODE: 1,
    PRECISION_VERTEX: "highp",
    PRECISION_FRAGMENT: isMobile2.apple.device ? "highp" : "mediump",
    CAN_UPLOAD_SAME_BUFFER: canUploadSameBuffer(),
    CREATE_IMAGE_BITMAP: false,
    ROUND_PIXELS: false
  };

  // node_modules/@pixi/utils/lib/utils.es.js
  var import_eventemitter3 = __toModule(require_eventemitter3());
  var import_earcut = __toModule(require_earcut());
  var import_url = __toModule(require_url());
  var import_url2 = __toModule(require_url());

  // node_modules/@pixi/constants/lib/constants.es.js
  /*!
   * @pixi/constants - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/constants is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var ENV;
  (function(ENV3) {
    ENV3[ENV3["WEBGL_LEGACY"] = 0] = "WEBGL_LEGACY";
    ENV3[ENV3["WEBGL"] = 1] = "WEBGL";
    ENV3[ENV3["WEBGL2"] = 2] = "WEBGL2";
  })(ENV || (ENV = {}));
  var RENDERER_TYPE;
  (function(RENDERER_TYPE3) {
    RENDERER_TYPE3[RENDERER_TYPE3["UNKNOWN"] = 0] = "UNKNOWN";
    RENDERER_TYPE3[RENDERER_TYPE3["WEBGL"] = 1] = "WEBGL";
    RENDERER_TYPE3[RENDERER_TYPE3["CANVAS"] = 2] = "CANVAS";
  })(RENDERER_TYPE || (RENDERER_TYPE = {}));
  var BUFFER_BITS;
  (function(BUFFER_BITS3) {
    BUFFER_BITS3[BUFFER_BITS3["COLOR"] = 16384] = "COLOR";
    BUFFER_BITS3[BUFFER_BITS3["DEPTH"] = 256] = "DEPTH";
    BUFFER_BITS3[BUFFER_BITS3["STENCIL"] = 1024] = "STENCIL";
  })(BUFFER_BITS || (BUFFER_BITS = {}));
  var BLEND_MODES;
  (function(BLEND_MODES3) {
    BLEND_MODES3[BLEND_MODES3["NORMAL"] = 0] = "NORMAL";
    BLEND_MODES3[BLEND_MODES3["ADD"] = 1] = "ADD";
    BLEND_MODES3[BLEND_MODES3["MULTIPLY"] = 2] = "MULTIPLY";
    BLEND_MODES3[BLEND_MODES3["SCREEN"] = 3] = "SCREEN";
    BLEND_MODES3[BLEND_MODES3["OVERLAY"] = 4] = "OVERLAY";
    BLEND_MODES3[BLEND_MODES3["DARKEN"] = 5] = "DARKEN";
    BLEND_MODES3[BLEND_MODES3["LIGHTEN"] = 6] = "LIGHTEN";
    BLEND_MODES3[BLEND_MODES3["COLOR_DODGE"] = 7] = "COLOR_DODGE";
    BLEND_MODES3[BLEND_MODES3["COLOR_BURN"] = 8] = "COLOR_BURN";
    BLEND_MODES3[BLEND_MODES3["HARD_LIGHT"] = 9] = "HARD_LIGHT";
    BLEND_MODES3[BLEND_MODES3["SOFT_LIGHT"] = 10] = "SOFT_LIGHT";
    BLEND_MODES3[BLEND_MODES3["DIFFERENCE"] = 11] = "DIFFERENCE";
    BLEND_MODES3[BLEND_MODES3["EXCLUSION"] = 12] = "EXCLUSION";
    BLEND_MODES3[BLEND_MODES3["HUE"] = 13] = "HUE";
    BLEND_MODES3[BLEND_MODES3["SATURATION"] = 14] = "SATURATION";
    BLEND_MODES3[BLEND_MODES3["COLOR"] = 15] = "COLOR";
    BLEND_MODES3[BLEND_MODES3["LUMINOSITY"] = 16] = "LUMINOSITY";
    BLEND_MODES3[BLEND_MODES3["NORMAL_NPM"] = 17] = "NORMAL_NPM";
    BLEND_MODES3[BLEND_MODES3["ADD_NPM"] = 18] = "ADD_NPM";
    BLEND_MODES3[BLEND_MODES3["SCREEN_NPM"] = 19] = "SCREEN_NPM";
    BLEND_MODES3[BLEND_MODES3["NONE"] = 20] = "NONE";
    BLEND_MODES3[BLEND_MODES3["SRC_OVER"] = 0] = "SRC_OVER";
    BLEND_MODES3[BLEND_MODES3["SRC_IN"] = 21] = "SRC_IN";
    BLEND_MODES3[BLEND_MODES3["SRC_OUT"] = 22] = "SRC_OUT";
    BLEND_MODES3[BLEND_MODES3["SRC_ATOP"] = 23] = "SRC_ATOP";
    BLEND_MODES3[BLEND_MODES3["DST_OVER"] = 24] = "DST_OVER";
    BLEND_MODES3[BLEND_MODES3["DST_IN"] = 25] = "DST_IN";
    BLEND_MODES3[BLEND_MODES3["DST_OUT"] = 26] = "DST_OUT";
    BLEND_MODES3[BLEND_MODES3["DST_ATOP"] = 27] = "DST_ATOP";
    BLEND_MODES3[BLEND_MODES3["ERASE"] = 26] = "ERASE";
    BLEND_MODES3[BLEND_MODES3["SUBTRACT"] = 28] = "SUBTRACT";
    BLEND_MODES3[BLEND_MODES3["XOR"] = 29] = "XOR";
  })(BLEND_MODES || (BLEND_MODES = {}));
  var DRAW_MODES;
  (function(DRAW_MODES3) {
    DRAW_MODES3[DRAW_MODES3["POINTS"] = 0] = "POINTS";
    DRAW_MODES3[DRAW_MODES3["LINES"] = 1] = "LINES";
    DRAW_MODES3[DRAW_MODES3["LINE_LOOP"] = 2] = "LINE_LOOP";
    DRAW_MODES3[DRAW_MODES3["LINE_STRIP"] = 3] = "LINE_STRIP";
    DRAW_MODES3[DRAW_MODES3["TRIANGLES"] = 4] = "TRIANGLES";
    DRAW_MODES3[DRAW_MODES3["TRIANGLE_STRIP"] = 5] = "TRIANGLE_STRIP";
    DRAW_MODES3[DRAW_MODES3["TRIANGLE_FAN"] = 6] = "TRIANGLE_FAN";
  })(DRAW_MODES || (DRAW_MODES = {}));
  var FORMATS;
  (function(FORMATS3) {
    FORMATS3[FORMATS3["RGBA"] = 6408] = "RGBA";
    FORMATS3[FORMATS3["RGB"] = 6407] = "RGB";
    FORMATS3[FORMATS3["ALPHA"] = 6406] = "ALPHA";
    FORMATS3[FORMATS3["LUMINANCE"] = 6409] = "LUMINANCE";
    FORMATS3[FORMATS3["LUMINANCE_ALPHA"] = 6410] = "LUMINANCE_ALPHA";
    FORMATS3[FORMATS3["DEPTH_COMPONENT"] = 6402] = "DEPTH_COMPONENT";
    FORMATS3[FORMATS3["DEPTH_STENCIL"] = 34041] = "DEPTH_STENCIL";
  })(FORMATS || (FORMATS = {}));
  var TARGETS;
  (function(TARGETS3) {
    TARGETS3[TARGETS3["TEXTURE_2D"] = 3553] = "TEXTURE_2D";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP"] = 34067] = "TEXTURE_CUBE_MAP";
    TARGETS3[TARGETS3["TEXTURE_2D_ARRAY"] = 35866] = "TEXTURE_2D_ARRAY";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_POSITIVE_X"] = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_NEGATIVE_X"] = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_POSITIVE_Y"] = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_NEGATIVE_Y"] = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_POSITIVE_Z"] = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_NEGATIVE_Z"] = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
  })(TARGETS || (TARGETS = {}));
  var TYPES;
  (function(TYPES3) {
    TYPES3[TYPES3["UNSIGNED_BYTE"] = 5121] = "UNSIGNED_BYTE";
    TYPES3[TYPES3["UNSIGNED_SHORT"] = 5123] = "UNSIGNED_SHORT";
    TYPES3[TYPES3["UNSIGNED_SHORT_5_6_5"] = 33635] = "UNSIGNED_SHORT_5_6_5";
    TYPES3[TYPES3["UNSIGNED_SHORT_4_4_4_4"] = 32819] = "UNSIGNED_SHORT_4_4_4_4";
    TYPES3[TYPES3["UNSIGNED_SHORT_5_5_5_1"] = 32820] = "UNSIGNED_SHORT_5_5_5_1";
    TYPES3[TYPES3["FLOAT"] = 5126] = "FLOAT";
    TYPES3[TYPES3["HALF_FLOAT"] = 36193] = "HALF_FLOAT";
  })(TYPES || (TYPES = {}));
  var SCALE_MODES;
  (function(SCALE_MODES3) {
    SCALE_MODES3[SCALE_MODES3["NEAREST"] = 0] = "NEAREST";
    SCALE_MODES3[SCALE_MODES3["LINEAR"] = 1] = "LINEAR";
  })(SCALE_MODES || (SCALE_MODES = {}));
  var WRAP_MODES;
  (function(WRAP_MODES3) {
    WRAP_MODES3[WRAP_MODES3["CLAMP"] = 33071] = "CLAMP";
    WRAP_MODES3[WRAP_MODES3["REPEAT"] = 10497] = "REPEAT";
    WRAP_MODES3[WRAP_MODES3["MIRRORED_REPEAT"] = 33648] = "MIRRORED_REPEAT";
  })(WRAP_MODES || (WRAP_MODES = {}));
  var MIPMAP_MODES;
  (function(MIPMAP_MODES3) {
    MIPMAP_MODES3[MIPMAP_MODES3["OFF"] = 0] = "OFF";
    MIPMAP_MODES3[MIPMAP_MODES3["POW2"] = 1] = "POW2";
    MIPMAP_MODES3[MIPMAP_MODES3["ON"] = 2] = "ON";
  })(MIPMAP_MODES || (MIPMAP_MODES = {}));
  var ALPHA_MODES;
  (function(ALPHA_MODES3) {
    ALPHA_MODES3[ALPHA_MODES3["NPM"] = 0] = "NPM";
    ALPHA_MODES3[ALPHA_MODES3["UNPACK"] = 1] = "UNPACK";
    ALPHA_MODES3[ALPHA_MODES3["PMA"] = 2] = "PMA";
    ALPHA_MODES3[ALPHA_MODES3["NO_PREMULTIPLIED_ALPHA"] = 0] = "NO_PREMULTIPLIED_ALPHA";
    ALPHA_MODES3[ALPHA_MODES3["PREMULTIPLY_ON_UPLOAD"] = 1] = "PREMULTIPLY_ON_UPLOAD";
    ALPHA_MODES3[ALPHA_MODES3["PREMULTIPLY_ALPHA"] = 2] = "PREMULTIPLY_ALPHA";
  })(ALPHA_MODES || (ALPHA_MODES = {}));
  var CLEAR_MODES;
  (function(CLEAR_MODES3) {
    CLEAR_MODES3[CLEAR_MODES3["NO"] = 0] = "NO";
    CLEAR_MODES3[CLEAR_MODES3["YES"] = 1] = "YES";
    CLEAR_MODES3[CLEAR_MODES3["AUTO"] = 2] = "AUTO";
    CLEAR_MODES3[CLEAR_MODES3["BLEND"] = 0] = "BLEND";
    CLEAR_MODES3[CLEAR_MODES3["CLEAR"] = 1] = "CLEAR";
    CLEAR_MODES3[CLEAR_MODES3["BLIT"] = 2] = "BLIT";
  })(CLEAR_MODES || (CLEAR_MODES = {}));
  var GC_MODES;
  (function(GC_MODES3) {
    GC_MODES3[GC_MODES3["AUTO"] = 0] = "AUTO";
    GC_MODES3[GC_MODES3["MANUAL"] = 1] = "MANUAL";
  })(GC_MODES || (GC_MODES = {}));
  var PRECISION;
  (function(PRECISION3) {
    PRECISION3["LOW"] = "lowp";
    PRECISION3["MEDIUM"] = "mediump";
    PRECISION3["HIGH"] = "highp";
  })(PRECISION || (PRECISION = {}));
  var MASK_TYPES;
  (function(MASK_TYPES3) {
    MASK_TYPES3[MASK_TYPES3["NONE"] = 0] = "NONE";
    MASK_TYPES3[MASK_TYPES3["SCISSOR"] = 1] = "SCISSOR";
    MASK_TYPES3[MASK_TYPES3["STENCIL"] = 2] = "STENCIL";
    MASK_TYPES3[MASK_TYPES3["SPRITE"] = 3] = "SPRITE";
  })(MASK_TYPES || (MASK_TYPES = {}));
  var MSAA_QUALITY;
  (function(MSAA_QUALITY3) {
    MSAA_QUALITY3[MSAA_QUALITY3["NONE"] = 0] = "NONE";
    MSAA_QUALITY3[MSAA_QUALITY3["LOW"] = 2] = "LOW";
    MSAA_QUALITY3[MSAA_QUALITY3["MEDIUM"] = 4] = "MEDIUM";
    MSAA_QUALITY3[MSAA_QUALITY3["HIGH"] = 8] = "HIGH";
  })(MSAA_QUALITY || (MSAA_QUALITY = {}));

  // node_modules/@pixi/utils/lib/utils.es.js
  /*!
   * @pixi/utils - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/utils is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  settings.RETINA_PREFIX = /@([0-9\.]+)x/;
  settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = true;
  var saidHello = false;
  var VERSION = "5.3.7";
  function skipHello() {
    saidHello = true;
  }
  function sayHello(type) {
    var _a2;
    if (saidHello) {
      return;
    }
    if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
      var args = [
        "\n %c %c %c PixiJS " + VERSION + " - \u2730 " + type + " \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n",
        "background: #ff66a5; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "color: #ff66a5; background: #030307; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "background: #ffc3dc; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;"
      ];
      (_a2 = window.console).log.apply(_a2, args);
    } else if (window.console) {
      window.console.log("PixiJS " + VERSION + " - " + type + " - http://www.pixijs.com/");
    }
    saidHello = true;
  }
  var supported;
  function isWebGLSupported() {
    if (typeof supported === "undefined") {
      supported = function supported2() {
        var contextOptions = {
          stencil: true,
          failIfMajorPerformanceCaveat: settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT
        };
        try {
          if (!window.WebGLRenderingContext) {
            return false;
          }
          var canvas2 = document.createElement("canvas");
          var gl = canvas2.getContext("webgl", contextOptions) || canvas2.getContext("experimental-webgl", contextOptions);
          var success = !!(gl && gl.getContextAttributes().stencil);
          if (gl) {
            var loseContext = gl.getExtension("WEBGL_lose_context");
            if (loseContext) {
              loseContext.loseContext();
            }
          }
          gl = null;
          return success;
        } catch (e) {
          return false;
        }
      }();
    }
    return supported;
  }
  function hex2rgb(hex, out) {
    if (out === void 0) {
      out = [];
    }
    out[0] = (hex >> 16 & 255) / 255;
    out[1] = (hex >> 8 & 255) / 255;
    out[2] = (hex & 255) / 255;
    return out;
  }
  function hex2string(hex) {
    var hexString = hex.toString(16);
    hexString = "000000".substr(0, 6 - hexString.length) + hexString;
    return "#" + hexString;
  }
  function string2hex(string) {
    if (typeof string === "string" && string[0] === "#") {
      string = string.substr(1);
    }
    return parseInt(string, 16);
  }
  function rgb2hex(rgb) {
    return (rgb[0] * 255 << 16) + (rgb[1] * 255 << 8) + (rgb[2] * 255 | 0);
  }
  function mapPremultipliedBlendModes() {
    var pm = [];
    var npm = [];
    for (var i = 0; i < 32; i++) {
      pm[i] = i;
      npm[i] = i;
    }
    pm[BLEND_MODES.NORMAL_NPM] = BLEND_MODES.NORMAL;
    pm[BLEND_MODES.ADD_NPM] = BLEND_MODES.ADD;
    pm[BLEND_MODES.SCREEN_NPM] = BLEND_MODES.SCREEN;
    npm[BLEND_MODES.NORMAL] = BLEND_MODES.NORMAL_NPM;
    npm[BLEND_MODES.ADD] = BLEND_MODES.ADD_NPM;
    npm[BLEND_MODES.SCREEN] = BLEND_MODES.SCREEN_NPM;
    var array = [];
    array.push(npm);
    array.push(pm);
    return array;
  }
  var premultiplyBlendMode = mapPremultipliedBlendModes();
  function correctBlendMode(blendMode, premultiplied) {
    return premultiplyBlendMode[premultiplied ? 1 : 0][blendMode];
  }
  function premultiplyRgba(rgb, alpha, out, premultiply) {
    out = out || new Float32Array(4);
    if (premultiply || premultiply === void 0) {
      out[0] = rgb[0] * alpha;
      out[1] = rgb[1] * alpha;
      out[2] = rgb[2] * alpha;
    } else {
      out[0] = rgb[0];
      out[1] = rgb[1];
      out[2] = rgb[2];
    }
    out[3] = alpha;
    return out;
  }
  function premultiplyTint(tint, alpha) {
    if (alpha === 1) {
      return (alpha * 255 << 24) + tint;
    }
    if (alpha === 0) {
      return 0;
    }
    var R = tint >> 16 & 255;
    var G = tint >> 8 & 255;
    var B = tint & 255;
    R = R * alpha + 0.5 | 0;
    G = G * alpha + 0.5 | 0;
    B = B * alpha + 0.5 | 0;
    return (alpha * 255 << 24) + (R << 16) + (G << 8) + B;
  }
  function premultiplyTintToRgba(tint, alpha, out, premultiply) {
    out = out || new Float32Array(4);
    out[0] = (tint >> 16 & 255) / 255;
    out[1] = (tint >> 8 & 255) / 255;
    out[2] = (tint & 255) / 255;
    if (premultiply || premultiply === void 0) {
      out[0] *= alpha;
      out[1] *= alpha;
      out[2] *= alpha;
    }
    out[3] = alpha;
    return out;
  }
  function createIndicesForQuads(size, outBuffer) {
    if (outBuffer === void 0) {
      outBuffer = null;
    }
    var totalIndices = size * 6;
    outBuffer = outBuffer || new Uint16Array(totalIndices);
    if (outBuffer.length !== totalIndices) {
      throw new Error("Out buffer length is incorrect, got " + outBuffer.length + " and expected " + totalIndices);
    }
    for (var i = 0, j = 0; i < totalIndices; i += 6, j += 4) {
      outBuffer[i + 0] = j + 0;
      outBuffer[i + 1] = j + 1;
      outBuffer[i + 2] = j + 2;
      outBuffer[i + 3] = j + 0;
      outBuffer[i + 4] = j + 2;
      outBuffer[i + 5] = j + 3;
    }
    return outBuffer;
  }
  function getBufferType(array) {
    if (array.BYTES_PER_ELEMENT === 4) {
      if (array instanceof Float32Array) {
        return "Float32Array";
      } else if (array instanceof Uint32Array) {
        return "Uint32Array";
      }
      return "Int32Array";
    } else if (array.BYTES_PER_ELEMENT === 2) {
      if (array instanceof Uint16Array) {
        return "Uint16Array";
      }
    } else if (array.BYTES_PER_ELEMENT === 1) {
      if (array instanceof Uint8Array) {
        return "Uint8Array";
      }
    }
    return null;
  }
  var map = {Float32Array, Uint32Array, Int32Array, Uint8Array};
  function interleaveTypedArrays(arrays, sizes) {
    var outSize = 0;
    var stride = 0;
    var views = {};
    for (var i = 0; i < arrays.length; i++) {
      stride += sizes[i];
      outSize += arrays[i].length;
    }
    var buffer = new ArrayBuffer(outSize * 4);
    var out = null;
    var littleOffset = 0;
    for (var i = 0; i < arrays.length; i++) {
      var size = sizes[i];
      var array = arrays[i];
      var type = getBufferType(array);
      if (!views[type]) {
        views[type] = new map[type](buffer);
      }
      out = views[type];
      for (var j = 0; j < array.length; j++) {
        var indexStart = (j / size | 0) * stride + littleOffset;
        var index4 = j % size;
        out[indexStart + index4] = array[j];
      }
      littleOffset += size;
    }
    return new Float32Array(buffer);
  }
  function nextPow2(v) {
    v += v === 0 ? 1 : 0;
    --v;
    v |= v >>> 1;
    v |= v >>> 2;
    v |= v >>> 4;
    v |= v >>> 8;
    v |= v >>> 16;
    return v + 1;
  }
  function isPow2(v) {
    return !(v & v - 1) && !!v;
  }
  function log2(v) {
    var r = (v > 65535 ? 1 : 0) << 4;
    v >>>= r;
    var shift = (v > 255 ? 1 : 0) << 3;
    v >>>= shift;
    r |= shift;
    shift = (v > 15 ? 1 : 0) << 2;
    v >>>= shift;
    r |= shift;
    shift = (v > 3 ? 1 : 0) << 1;
    v >>>= shift;
    r |= shift;
    return r | v >> 1;
  }
  function removeItems(arr, startIdx, removeCount) {
    var length = arr.length;
    var i;
    if (startIdx >= length || removeCount === 0) {
      return;
    }
    removeCount = startIdx + removeCount > length ? length - startIdx : removeCount;
    var len = length - removeCount;
    for (i = startIdx; i < len; ++i) {
      arr[i] = arr[i + removeCount];
    }
    arr.length = len;
  }
  function sign(n) {
    if (n === 0) {
      return 0;
    }
    return n < 0 ? -1 : 1;
  }
  var nextUid = 0;
  function uid() {
    return ++nextUid;
  }
  var warnings = {};
  function deprecation(version, message, ignoreDepth) {
    if (ignoreDepth === void 0) {
      ignoreDepth = 3;
    }
    if (warnings[message]) {
      return;
    }
    var stack = new Error().stack;
    if (typeof stack === "undefined") {
      console.warn("PixiJS Deprecation Warning: ", message + "\nDeprecated since v" + version);
    } else {
      stack = stack.split("\n").splice(ignoreDepth).join("\n");
      if (console.groupCollapsed) {
        console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", message + "\nDeprecated since v" + version);
        console.warn(stack);
        console.groupEnd();
      } else {
        console.warn("PixiJS Deprecation Warning: ", message + "\nDeprecated since v" + version);
        console.warn(stack);
      }
    }
    warnings[message] = true;
  }
  var ProgramCache = {};
  var TextureCache = Object.create(null);
  var BaseTextureCache = Object.create(null);
  function destroyTextureCache() {
    var key;
    for (key in TextureCache) {
      TextureCache[key].destroy();
    }
    for (key in BaseTextureCache) {
      BaseTextureCache[key].destroy();
    }
  }
  function clearTextureCache() {
    var key;
    for (key in TextureCache) {
      delete TextureCache[key];
    }
    for (key in BaseTextureCache) {
      delete BaseTextureCache[key];
    }
  }
  var CanvasRenderTarget = function() {
    function CanvasRenderTarget2(width, height, resolution) {
      this.canvas = document.createElement("canvas");
      this.context = this.canvas.getContext("2d");
      this.resolution = resolution || settings.RESOLUTION;
      this.resize(width, height);
    }
    CanvasRenderTarget2.prototype.clear = function() {
      this.context.setTransform(1, 0, 0, 1, 0, 0);
      this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    };
    CanvasRenderTarget2.prototype.resize = function(width, height) {
      this.canvas.width = width * this.resolution;
      this.canvas.height = height * this.resolution;
    };
    CanvasRenderTarget2.prototype.destroy = function() {
      this.context = null;
      this.canvas = null;
    };
    Object.defineProperty(CanvasRenderTarget2.prototype, "width", {
      get: function() {
        return this.canvas.width;
      },
      set: function(val) {
        this.canvas.width = val;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(CanvasRenderTarget2.prototype, "height", {
      get: function() {
        return this.canvas.height;
      },
      set: function(val) {
        this.canvas.height = val;
      },
      enumerable: false,
      configurable: true
    });
    return CanvasRenderTarget2;
  }();
  function trimCanvas(canvas2) {
    var width = canvas2.width;
    var height = canvas2.height;
    var context2 = canvas2.getContext("2d");
    var imageData = context2.getImageData(0, 0, width, height);
    var pixels = imageData.data;
    var len = pixels.length;
    var bound = {
      top: null,
      left: null,
      right: null,
      bottom: null
    };
    var data = null;
    var i;
    var x;
    var y;
    for (i = 0; i < len; i += 4) {
      if (pixels[i + 3] !== 0) {
        x = i / 4 % width;
        y = ~~(i / 4 / width);
        if (bound.top === null) {
          bound.top = y;
        }
        if (bound.left === null) {
          bound.left = x;
        } else if (x < bound.left) {
          bound.left = x;
        }
        if (bound.right === null) {
          bound.right = x + 1;
        } else if (bound.right < x) {
          bound.right = x + 1;
        }
        if (bound.bottom === null) {
          bound.bottom = y;
        } else if (bound.bottom < y) {
          bound.bottom = y;
        }
      }
    }
    if (bound.top !== null) {
      width = bound.right - bound.left;
      height = bound.bottom - bound.top + 1;
      data = context2.getImageData(bound.left, bound.top, width, height);
    }
    return {
      height,
      width,
      data
    };
  }
  var DATA_URI = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;
  function decomposeDataUri(dataUri) {
    var dataUriMatch = DATA_URI.exec(dataUri);
    if (dataUriMatch) {
      return {
        mediaType: dataUriMatch[1] ? dataUriMatch[1].toLowerCase() : void 0,
        subType: dataUriMatch[2] ? dataUriMatch[2].toLowerCase() : void 0,
        charset: dataUriMatch[3] ? dataUriMatch[3].toLowerCase() : void 0,
        encoding: dataUriMatch[4] ? dataUriMatch[4].toLowerCase() : void 0,
        data: dataUriMatch[5]
      };
    }
    return void 0;
  }
  var tempAnchor;
  function determineCrossOrigin(url, loc) {
    if (loc === void 0) {
      loc = window.location;
    }
    if (url.indexOf("data:") === 0) {
      return "";
    }
    loc = loc || window.location;
    if (!tempAnchor) {
      tempAnchor = document.createElement("a");
    }
    tempAnchor.href = url;
    var parsedUrl = import_url.parse(tempAnchor.href);
    var samePort = !parsedUrl.port && loc.port === "" || parsedUrl.port === loc.port;
    if (parsedUrl.hostname !== loc.hostname || !samePort || parsedUrl.protocol !== loc.protocol) {
      return "anonymous";
    }
    return "";
  }
  function getResolutionOfUrl(url, defaultValue2) {
    var resolution = settings.RETINA_PREFIX.exec(url);
    if (resolution) {
      return parseFloat(resolution[1]);
    }
    return defaultValue2 !== void 0 ? defaultValue2 : 1;
  }

  // node_modules/@pixi/math/lib/math.es.js
  /*!
   * @pixi/math - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/math is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var PI_2 = Math.PI * 2;
  var RAD_TO_DEG = 180 / Math.PI;
  var DEG_TO_RAD = Math.PI / 180;
  var SHAPES;
  (function(SHAPES2) {
    SHAPES2[SHAPES2["POLY"] = 0] = "POLY";
    SHAPES2[SHAPES2["RECT"] = 1] = "RECT";
    SHAPES2[SHAPES2["CIRC"] = 2] = "CIRC";
    SHAPES2[SHAPES2["ELIP"] = 3] = "ELIP";
    SHAPES2[SHAPES2["RREC"] = 4] = "RREC";
  })(SHAPES || (SHAPES = {}));
  var Rectangle = function() {
    function Rectangle3(x, y, width, height) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = 0;
      }
      if (width === void 0) {
        width = 0;
      }
      if (height === void 0) {
        height = 0;
      }
      this.x = Number(x);
      this.y = Number(y);
      this.width = Number(width);
      this.height = Number(height);
      this.type = SHAPES.RECT;
    }
    Object.defineProperty(Rectangle3.prototype, "left", {
      get: function() {
        return this.x;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Rectangle3.prototype, "right", {
      get: function() {
        return this.x + this.width;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Rectangle3.prototype, "top", {
      get: function() {
        return this.y;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Rectangle3.prototype, "bottom", {
      get: function() {
        return this.y + this.height;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Rectangle3, "EMPTY", {
      get: function() {
        return new Rectangle3(0, 0, 0, 0);
      },
      enumerable: false,
      configurable: true
    });
    Rectangle3.prototype.clone = function() {
      return new Rectangle3(this.x, this.y, this.width, this.height);
    };
    Rectangle3.prototype.copyFrom = function(rectangle) {
      this.x = rectangle.x;
      this.y = rectangle.y;
      this.width = rectangle.width;
      this.height = rectangle.height;
      return this;
    };
    Rectangle3.prototype.copyTo = function(rectangle) {
      rectangle.x = this.x;
      rectangle.y = this.y;
      rectangle.width = this.width;
      rectangle.height = this.height;
      return rectangle;
    };
    Rectangle3.prototype.contains = function(x, y) {
      if (this.width <= 0 || this.height <= 0) {
        return false;
      }
      if (x >= this.x && x < this.x + this.width) {
        if (y >= this.y && y < this.y + this.height) {
          return true;
        }
      }
      return false;
    };
    Rectangle3.prototype.pad = function(paddingX, paddingY) {
      if (paddingX === void 0) {
        paddingX = 0;
      }
      if (paddingY === void 0) {
        paddingY = paddingX;
      }
      this.x -= paddingX;
      this.y -= paddingY;
      this.width += paddingX * 2;
      this.height += paddingY * 2;
      return this;
    };
    Rectangle3.prototype.fit = function(rectangle) {
      var x1 = Math.max(this.x, rectangle.x);
      var x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);
      var y1 = Math.max(this.y, rectangle.y);
      var y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);
      this.x = x1;
      this.width = Math.max(x2 - x1, 0);
      this.y = y1;
      this.height = Math.max(y2 - y1, 0);
      return this;
    };
    Rectangle3.prototype.ceil = function(resolution, eps) {
      if (resolution === void 0) {
        resolution = 1;
      }
      if (eps === void 0) {
        eps = 1e-3;
      }
      var x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;
      var y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;
      this.x = Math.floor((this.x + eps) * resolution) / resolution;
      this.y = Math.floor((this.y + eps) * resolution) / resolution;
      this.width = x2 - this.x;
      this.height = y2 - this.y;
      return this;
    };
    Rectangle3.prototype.enlarge = function(rectangle) {
      var x1 = Math.min(this.x, rectangle.x);
      var x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);
      var y1 = Math.min(this.y, rectangle.y);
      var y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);
      this.x = x1;
      this.width = x2 - x1;
      this.y = y1;
      this.height = y2 - y1;
      return this;
    };
    return Rectangle3;
  }();
  var Circle = function() {
    function Circle2(x, y, radius) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = 0;
      }
      if (radius === void 0) {
        radius = 0;
      }
      this.x = x;
      this.y = y;
      this.radius = radius;
      this.type = SHAPES.CIRC;
    }
    Circle2.prototype.clone = function() {
      return new Circle2(this.x, this.y, this.radius);
    };
    Circle2.prototype.contains = function(x, y) {
      if (this.radius <= 0) {
        return false;
      }
      var r2 = this.radius * this.radius;
      var dx = this.x - x;
      var dy = this.y - y;
      dx *= dx;
      dy *= dy;
      return dx + dy <= r2;
    };
    Circle2.prototype.getBounds = function() {
      return new Rectangle(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);
    };
    return Circle2;
  }();
  var Ellipse = function() {
    function Ellipse2(x, y, halfWidth, halfHeight) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = 0;
      }
      if (halfWidth === void 0) {
        halfWidth = 0;
      }
      if (halfHeight === void 0) {
        halfHeight = 0;
      }
      this.x = x;
      this.y = y;
      this.width = halfWidth;
      this.height = halfHeight;
      this.type = SHAPES.ELIP;
    }
    Ellipse2.prototype.clone = function() {
      return new Ellipse2(this.x, this.y, this.width, this.height);
    };
    Ellipse2.prototype.contains = function(x, y) {
      if (this.width <= 0 || this.height <= 0) {
        return false;
      }
      var normx = (x - this.x) / this.width;
      var normy = (y - this.y) / this.height;
      normx *= normx;
      normy *= normy;
      return normx + normy <= 1;
    };
    Ellipse2.prototype.getBounds = function() {
      return new Rectangle(this.x - this.width, this.y - this.height, this.width, this.height);
    };
    return Ellipse2;
  }();
  var Polygon = function() {
    function Polygon2() {
      var arguments$1 = arguments;
      var points = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        points[_i] = arguments$1[_i];
      }
      var flat = Array.isArray(points[0]) ? points[0] : points;
      if (typeof flat[0] !== "number") {
        var p = [];
        for (var i = 0, il = flat.length; i < il; i++) {
          p.push(flat[i].x, flat[i].y);
        }
        flat = p;
      }
      this.points = flat;
      this.type = SHAPES.POLY;
      this.closeStroke = true;
    }
    Polygon2.prototype.clone = function() {
      var points = this.points.slice();
      var polygon = new Polygon2(points);
      polygon.closeStroke = this.closeStroke;
      return polygon;
    };
    Polygon2.prototype.contains = function(x, y) {
      var inside = false;
      var length = this.points.length / 2;
      for (var i = 0, j = length - 1; i < length; j = i++) {
        var xi = this.points[i * 2];
        var yi = this.points[i * 2 + 1];
        var xj = this.points[j * 2];
        var yj = this.points[j * 2 + 1];
        var intersect = yi > y !== yj > y && x < (xj - xi) * ((y - yi) / (yj - yi)) + xi;
        if (intersect) {
          inside = !inside;
        }
      }
      return inside;
    };
    return Polygon2;
  }();
  var RoundedRectangle = function() {
    function RoundedRectangle2(x, y, width, height, radius) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = 0;
      }
      if (width === void 0) {
        width = 0;
      }
      if (height === void 0) {
        height = 0;
      }
      if (radius === void 0) {
        radius = 20;
      }
      this.x = x;
      this.y = y;
      this.width = width;
      this.height = height;
      this.radius = radius;
      this.type = SHAPES.RREC;
    }
    RoundedRectangle2.prototype.clone = function() {
      return new RoundedRectangle2(this.x, this.y, this.width, this.height, this.radius);
    };
    RoundedRectangle2.prototype.contains = function(x, y) {
      if (this.width <= 0 || this.height <= 0) {
        return false;
      }
      if (x >= this.x && x <= this.x + this.width) {
        if (y >= this.y && y <= this.y + this.height) {
          if (y >= this.y + this.radius && y <= this.y + this.height - this.radius || x >= this.x + this.radius && x <= this.x + this.width - this.radius) {
            return true;
          }
          var dx = x - (this.x + this.radius);
          var dy = y - (this.y + this.radius);
          var radius2 = this.radius * this.radius;
          if (dx * dx + dy * dy <= radius2) {
            return true;
          }
          dx = x - (this.x + this.width - this.radius);
          if (dx * dx + dy * dy <= radius2) {
            return true;
          }
          dy = y - (this.y + this.height - this.radius);
          if (dx * dx + dy * dy <= radius2) {
            return true;
          }
          dx = x - (this.x + this.radius);
          if (dx * dx + dy * dy <= radius2) {
            return true;
          }
        }
      }
      return false;
    };
    return RoundedRectangle2;
  }();
  var Point = function() {
    function Point2(x, y) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = 0;
      }
      this.x = x;
      this.y = y;
    }
    Point2.prototype.clone = function() {
      return new Point2(this.x, this.y);
    };
    Point2.prototype.copyFrom = function(p) {
      this.set(p.x, p.y);
      return this;
    };
    Point2.prototype.copyTo = function(p) {
      p.set(this.x, this.y);
      return p;
    };
    Point2.prototype.equals = function(p) {
      return p.x === this.x && p.y === this.y;
    };
    Point2.prototype.set = function(x, y) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = x;
      }
      this.x = x;
      this.y = y;
      return this;
    };
    return Point2;
  }();
  var ObservablePoint = function() {
    function ObservablePoint2(cb, scope, x, y) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = 0;
      }
      this._x = x;
      this._y = y;
      this.cb = cb;
      this.scope = scope;
    }
    ObservablePoint2.prototype.clone = function(cb, scope) {
      if (cb === void 0) {
        cb = this.cb;
      }
      if (scope === void 0) {
        scope = this.scope;
      }
      return new ObservablePoint2(cb, scope, this._x, this._y);
    };
    ObservablePoint2.prototype.set = function(x, y) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = x;
      }
      if (this._x !== x || this._y !== y) {
        this._x = x;
        this._y = y;
        this.cb.call(this.scope);
      }
      return this;
    };
    ObservablePoint2.prototype.copyFrom = function(p) {
      if (this._x !== p.x || this._y !== p.y) {
        this._x = p.x;
        this._y = p.y;
        this.cb.call(this.scope);
      }
      return this;
    };
    ObservablePoint2.prototype.copyTo = function(p) {
      p.set(this._x, this._y);
      return p;
    };
    ObservablePoint2.prototype.equals = function(p) {
      return p.x === this._x && p.y === this._y;
    };
    Object.defineProperty(ObservablePoint2.prototype, "x", {
      get: function() {
        return this._x;
      },
      set: function(value) {
        if (this._x !== value) {
          this._x = value;
          this.cb.call(this.scope);
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(ObservablePoint2.prototype, "y", {
      get: function() {
        return this._y;
      },
      set: function(value) {
        if (this._y !== value) {
          this._y = value;
          this.cb.call(this.scope);
        }
      },
      enumerable: false,
      configurable: true
    });
    return ObservablePoint2;
  }();
  var Matrix = function() {
    function Matrix2(a, b, c, d, tx, ty) {
      if (a === void 0) {
        a = 1;
      }
      if (b === void 0) {
        b = 0;
      }
      if (c === void 0) {
        c = 0;
      }
      if (d === void 0) {
        d = 1;
      }
      if (tx === void 0) {
        tx = 0;
      }
      if (ty === void 0) {
        ty = 0;
      }
      this.array = null;
      this.a = a;
      this.b = b;
      this.c = c;
      this.d = d;
      this.tx = tx;
      this.ty = ty;
    }
    Matrix2.prototype.fromArray = function(array) {
      this.a = array[0];
      this.b = array[1];
      this.c = array[3];
      this.d = array[4];
      this.tx = array[2];
      this.ty = array[5];
    };
    Matrix2.prototype.set = function(a, b, c, d, tx, ty) {
      this.a = a;
      this.b = b;
      this.c = c;
      this.d = d;
      this.tx = tx;
      this.ty = ty;
      return this;
    };
    Matrix2.prototype.toArray = function(transpose, out) {
      if (!this.array) {
        this.array = new Float32Array(9);
      }
      var array = out || this.array;
      if (transpose) {
        array[0] = this.a;
        array[1] = this.b;
        array[2] = 0;
        array[3] = this.c;
        array[4] = this.d;
        array[5] = 0;
        array[6] = this.tx;
        array[7] = this.ty;
        array[8] = 1;
      } else {
        array[0] = this.a;
        array[1] = this.c;
        array[2] = this.tx;
        array[3] = this.b;
        array[4] = this.d;
        array[5] = this.ty;
        array[6] = 0;
        array[7] = 0;
        array[8] = 1;
      }
      return array;
    };
    Matrix2.prototype.apply = function(pos, newPos) {
      newPos = newPos || new Point();
      var x = pos.x;
      var y = pos.y;
      newPos.x = this.a * x + this.c * y + this.tx;
      newPos.y = this.b * x + this.d * y + this.ty;
      return newPos;
    };
    Matrix2.prototype.applyInverse = function(pos, newPos) {
      newPos = newPos || new Point();
      var id = 1 / (this.a * this.d + this.c * -this.b);
      var x = pos.x;
      var y = pos.y;
      newPos.x = this.d * id * x + -this.c * id * y + (this.ty * this.c - this.tx * this.d) * id;
      newPos.y = this.a * id * y + -this.b * id * x + (-this.ty * this.a + this.tx * this.b) * id;
      return newPos;
    };
    Matrix2.prototype.translate = function(x, y) {
      this.tx += x;
      this.ty += y;
      return this;
    };
    Matrix2.prototype.scale = function(x, y) {
      this.a *= x;
      this.d *= y;
      this.c *= x;
      this.b *= y;
      this.tx *= x;
      this.ty *= y;
      return this;
    };
    Matrix2.prototype.rotate = function(angle) {
      var cos = Math.cos(angle);
      var sin = Math.sin(angle);
      var a1 = this.a;
      var c1 = this.c;
      var tx1 = this.tx;
      this.a = a1 * cos - this.b * sin;
      this.b = a1 * sin + this.b * cos;
      this.c = c1 * cos - this.d * sin;
      this.d = c1 * sin + this.d * cos;
      this.tx = tx1 * cos - this.ty * sin;
      this.ty = tx1 * sin + this.ty * cos;
      return this;
    };
    Matrix2.prototype.append = function(matrix) {
      var a1 = this.a;
      var b1 = this.b;
      var c1 = this.c;
      var d1 = this.d;
      this.a = matrix.a * a1 + matrix.b * c1;
      this.b = matrix.a * b1 + matrix.b * d1;
      this.c = matrix.c * a1 + matrix.d * c1;
      this.d = matrix.c * b1 + matrix.d * d1;
      this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;
      this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;
      return this;
    };
    Matrix2.prototype.setTransform = function(x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {
      this.a = Math.cos(rotation + skewY) * scaleX;
      this.b = Math.sin(rotation + skewY) * scaleX;
      this.c = -Math.sin(rotation - skewX) * scaleY;
      this.d = Math.cos(rotation - skewX) * scaleY;
      this.tx = x - (pivotX * this.a + pivotY * this.c);
      this.ty = y - (pivotX * this.b + pivotY * this.d);
      return this;
    };
    Matrix2.prototype.prepend = function(matrix) {
      var tx1 = this.tx;
      if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {
        var a1 = this.a;
        var c1 = this.c;
        this.a = a1 * matrix.a + this.b * matrix.c;
        this.b = a1 * matrix.b + this.b * matrix.d;
        this.c = c1 * matrix.a + this.d * matrix.c;
        this.d = c1 * matrix.b + this.d * matrix.d;
      }
      this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;
      this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;
      return this;
    };
    Matrix2.prototype.decompose = function(transform) {
      var a = this.a;
      var b = this.b;
      var c = this.c;
      var d = this.d;
      var skewX = -Math.atan2(-c, d);
      var skewY = Math.atan2(b, a);
      var delta = Math.abs(skewX + skewY);
      if (delta < 1e-5 || Math.abs(PI_2 - delta) < 1e-5) {
        transform.rotation = skewY;
        transform.skew.x = transform.skew.y = 0;
      } else {
        transform.rotation = 0;
        transform.skew.x = skewX;
        transform.skew.y = skewY;
      }
      transform.scale.x = Math.sqrt(a * a + b * b);
      transform.scale.y = Math.sqrt(c * c + d * d);
      transform.position.x = this.tx;
      transform.position.y = this.ty;
      return transform;
    };
    Matrix2.prototype.invert = function() {
      var a1 = this.a;
      var b1 = this.b;
      var c1 = this.c;
      var d1 = this.d;
      var tx1 = this.tx;
      var n = a1 * d1 - b1 * c1;
      this.a = d1 / n;
      this.b = -b1 / n;
      this.c = -c1 / n;
      this.d = a1 / n;
      this.tx = (c1 * this.ty - d1 * tx1) / n;
      this.ty = -(a1 * this.ty - b1 * tx1) / n;
      return this;
    };
    Matrix2.prototype.identity = function() {
      this.a = 1;
      this.b = 0;
      this.c = 0;
      this.d = 1;
      this.tx = 0;
      this.ty = 0;
      return this;
    };
    Matrix2.prototype.clone = function() {
      var matrix = new Matrix2();
      matrix.a = this.a;
      matrix.b = this.b;
      matrix.c = this.c;
      matrix.d = this.d;
      matrix.tx = this.tx;
      matrix.ty = this.ty;
      return matrix;
    };
    Matrix2.prototype.copyTo = function(matrix) {
      matrix.a = this.a;
      matrix.b = this.b;
      matrix.c = this.c;
      matrix.d = this.d;
      matrix.tx = this.tx;
      matrix.ty = this.ty;
      return matrix;
    };
    Matrix2.prototype.copyFrom = function(matrix) {
      this.a = matrix.a;
      this.b = matrix.b;
      this.c = matrix.c;
      this.d = matrix.d;
      this.tx = matrix.tx;
      this.ty = matrix.ty;
      return this;
    };
    Object.defineProperty(Matrix2, "IDENTITY", {
      get: function() {
        return new Matrix2();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Matrix2, "TEMP_MATRIX", {
      get: function() {
        return new Matrix2();
      },
      enumerable: false,
      configurable: true
    });
    return Matrix2;
  }();
  var ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];
  var uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];
  var vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];
  var vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];
  var rotationCayley = [];
  var rotationMatrices = [];
  var signum = Math.sign;
  function init() {
    for (var i = 0; i < 16; i++) {
      var row = [];
      rotationCayley.push(row);
      for (var j = 0; j < 16; j++) {
        var _ux = signum(ux[i] * ux[j] + vx[i] * uy[j]);
        var _uy = signum(uy[i] * ux[j] + vy[i] * uy[j]);
        var _vx = signum(ux[i] * vx[j] + vx[i] * vy[j]);
        var _vy = signum(uy[i] * vx[j] + vy[i] * vy[j]);
        for (var k = 0; k < 16; k++) {
          if (ux[k] === _ux && uy[k] === _uy && vx[k] === _vx && vy[k] === _vy) {
            row.push(k);
            break;
          }
        }
      }
    }
    for (var i = 0; i < 16; i++) {
      var mat = new Matrix();
      mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);
      rotationMatrices.push(mat);
    }
  }
  init();
  var groupD8 = {
    E: 0,
    SE: 1,
    S: 2,
    SW: 3,
    W: 4,
    NW: 5,
    N: 6,
    NE: 7,
    MIRROR_VERTICAL: 8,
    MAIN_DIAGONAL: 10,
    MIRROR_HORIZONTAL: 12,
    REVERSE_DIAGONAL: 14,
    uX: function(ind) {
      return ux[ind];
    },
    uY: function(ind) {
      return uy[ind];
    },
    vX: function(ind) {
      return vx[ind];
    },
    vY: function(ind) {
      return vy[ind];
    },
    inv: function(rotation) {
      if (rotation & 8) {
        return rotation & 15;
      }
      return -rotation & 7;
    },
    add: function(rotationSecond, rotationFirst) {
      return rotationCayley[rotationSecond][rotationFirst];
    },
    sub: function(rotationSecond, rotationFirst) {
      return rotationCayley[rotationSecond][groupD8.inv(rotationFirst)];
    },
    rotate180: function(rotation) {
      return rotation ^ 4;
    },
    isVertical: function(rotation) {
      return (rotation & 3) === 2;
    },
    byDirection: function(dx, dy) {
      if (Math.abs(dx) * 2 <= Math.abs(dy)) {
        if (dy >= 0) {
          return groupD8.S;
        }
        return groupD8.N;
      } else if (Math.abs(dy) * 2 <= Math.abs(dx)) {
        if (dx > 0) {
          return groupD8.E;
        }
        return groupD8.W;
      } else if (dy > 0) {
        if (dx > 0) {
          return groupD8.SE;
        }
        return groupD8.SW;
      } else if (dx > 0) {
        return groupD8.NE;
      }
      return groupD8.NW;
    },
    matrixAppendRotationInv: function(matrix, rotation, tx, ty) {
      if (tx === void 0) {
        tx = 0;
      }
      if (ty === void 0) {
        ty = 0;
      }
      var mat = rotationMatrices[groupD8.inv(rotation)];
      mat.tx = tx;
      mat.ty = ty;
      matrix.append(mat);
    }
  };
  var Transform = function() {
    function Transform2() {
      this.worldTransform = new Matrix();
      this.localTransform = new Matrix();
      this.position = new ObservablePoint(this.onChange, this, 0, 0);
      this.scale = new ObservablePoint(this.onChange, this, 1, 1);
      this.pivot = new ObservablePoint(this.onChange, this, 0, 0);
      this.skew = new ObservablePoint(this.updateSkew, this, 0, 0);
      this._rotation = 0;
      this._cx = 1;
      this._sx = 0;
      this._cy = 0;
      this._sy = 1;
      this._localID = 0;
      this._currentLocalID = 0;
      this._worldID = 0;
      this._parentID = 0;
    }
    Transform2.prototype.onChange = function() {
      this._localID++;
    };
    Transform2.prototype.updateSkew = function() {
      this._cx = Math.cos(this._rotation + this.skew.y);
      this._sx = Math.sin(this._rotation + this.skew.y);
      this._cy = -Math.sin(this._rotation - this.skew.x);
      this._sy = Math.cos(this._rotation - this.skew.x);
      this._localID++;
    };
    Transform2.prototype.updateLocalTransform = function() {
      var lt = this.localTransform;
      if (this._localID !== this._currentLocalID) {
        lt.a = this._cx * this.scale.x;
        lt.b = this._sx * this.scale.x;
        lt.c = this._cy * this.scale.y;
        lt.d = this._sy * this.scale.y;
        lt.tx = this.position.x - (this.pivot.x * lt.a + this.pivot.y * lt.c);
        lt.ty = this.position.y - (this.pivot.x * lt.b + this.pivot.y * lt.d);
        this._currentLocalID = this._localID;
        this._parentID = -1;
      }
    };
    Transform2.prototype.updateTransform = function(parentTransform) {
      var lt = this.localTransform;
      if (this._localID !== this._currentLocalID) {
        lt.a = this._cx * this.scale.x;
        lt.b = this._sx * this.scale.x;
        lt.c = this._cy * this.scale.y;
        lt.d = this._sy * this.scale.y;
        lt.tx = this.position.x - (this.pivot.x * lt.a + this.pivot.y * lt.c);
        lt.ty = this.position.y - (this.pivot.x * lt.b + this.pivot.y * lt.d);
        this._currentLocalID = this._localID;
        this._parentID = -1;
      }
      if (this._parentID !== parentTransform._worldID) {
        var pt = parentTransform.worldTransform;
        var wt = this.worldTransform;
        wt.a = lt.a * pt.a + lt.b * pt.c;
        wt.b = lt.a * pt.b + lt.b * pt.d;
        wt.c = lt.c * pt.a + lt.d * pt.c;
        wt.d = lt.c * pt.b + lt.d * pt.d;
        wt.tx = lt.tx * pt.a + lt.ty * pt.c + pt.tx;
        wt.ty = lt.tx * pt.b + lt.ty * pt.d + pt.ty;
        this._parentID = parentTransform._worldID;
        this._worldID++;
      }
    };
    Transform2.prototype.setFromMatrix = function(matrix) {
      matrix.decompose(this);
      this._localID++;
    };
    Object.defineProperty(Transform2.prototype, "rotation", {
      get: function() {
        return this._rotation;
      },
      set: function(value) {
        if (this._rotation !== value) {
          this._rotation = value;
          this.updateSkew();
        }
      },
      enumerable: false,
      configurable: true
    });
    Transform2.IDENTITY = new Transform2();
    return Transform2;
  }();

  // node_modules/@pixi/display/lib/display.es.js
  /*!
   * @pixi/display - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/display is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  settings.SORTABLE_CHILDREN = false;
  var Bounds = function() {
    function Bounds2() {
      this.minX = Infinity;
      this.minY = Infinity;
      this.maxX = -Infinity;
      this.maxY = -Infinity;
      this.rect = null;
      this.updateID = -1;
    }
    Bounds2.prototype.isEmpty = function() {
      return this.minX > this.maxX || this.minY > this.maxY;
    };
    Bounds2.prototype.clear = function() {
      this.minX = Infinity;
      this.minY = Infinity;
      this.maxX = -Infinity;
      this.maxY = -Infinity;
    };
    Bounds2.prototype.getRectangle = function(rect) {
      if (this.minX > this.maxX || this.minY > this.maxY) {
        return Rectangle.EMPTY;
      }
      rect = rect || new Rectangle(0, 0, 1, 1);
      rect.x = this.minX;
      rect.y = this.minY;
      rect.width = this.maxX - this.minX;
      rect.height = this.maxY - this.minY;
      return rect;
    };
    Bounds2.prototype.addPoint = function(point) {
      this.minX = Math.min(this.minX, point.x);
      this.maxX = Math.max(this.maxX, point.x);
      this.minY = Math.min(this.minY, point.y);
      this.maxY = Math.max(this.maxY, point.y);
    };
    Bounds2.prototype.addQuad = function(vertices) {
      var minX = this.minX;
      var minY = this.minY;
      var maxX = this.maxX;
      var maxY = this.maxY;
      var x = vertices[0];
      var y = vertices[1];
      minX = x < minX ? x : minX;
      minY = y < minY ? y : minY;
      maxX = x > maxX ? x : maxX;
      maxY = y > maxY ? y : maxY;
      x = vertices[2];
      y = vertices[3];
      minX = x < minX ? x : minX;
      minY = y < minY ? y : minY;
      maxX = x > maxX ? x : maxX;
      maxY = y > maxY ? y : maxY;
      x = vertices[4];
      y = vertices[5];
      minX = x < minX ? x : minX;
      minY = y < minY ? y : minY;
      maxX = x > maxX ? x : maxX;
      maxY = y > maxY ? y : maxY;
      x = vertices[6];
      y = vertices[7];
      minX = x < minX ? x : minX;
      minY = y < minY ? y : minY;
      maxX = x > maxX ? x : maxX;
      maxY = y > maxY ? y : maxY;
      this.minX = minX;
      this.minY = minY;
      this.maxX = maxX;
      this.maxY = maxY;
    };
    Bounds2.prototype.addFrame = function(transform, x0, y0, x1, y1) {
      this.addFrameMatrix(transform.worldTransform, x0, y0, x1, y1);
    };
    Bounds2.prototype.addFrameMatrix = function(matrix, x0, y0, x1, y1) {
      var a = matrix.a;
      var b = matrix.b;
      var c = matrix.c;
      var d = matrix.d;
      var tx = matrix.tx;
      var ty = matrix.ty;
      var minX = this.minX;
      var minY = this.minY;
      var maxX = this.maxX;
      var maxY = this.maxY;
      var x = a * x0 + c * y0 + tx;
      var y = b * x0 + d * y0 + ty;
      minX = x < minX ? x : minX;
      minY = y < minY ? y : minY;
      maxX = x > maxX ? x : maxX;
      maxY = y > maxY ? y : maxY;
      x = a * x1 + c * y0 + tx;
      y = b * x1 + d * y0 + ty;
      minX = x < minX ? x : minX;
      minY = y < minY ? y : minY;
      maxX = x > maxX ? x : maxX;
      maxY = y > maxY ? y : maxY;
      x = a * x0 + c * y1 + tx;
      y = b * x0 + d * y1 + ty;
      minX = x < minX ? x : minX;
      minY = y < minY ? y : minY;
      maxX = x > maxX ? x : maxX;
      maxY = y > maxY ? y : maxY;
      x = a * x1 + c * y1 + tx;
      y = b * x1 + d * y1 + ty;
      minX = x < minX ? x : minX;
      minY = y < minY ? y : minY;
      maxX = x > maxX ? x : maxX;
      maxY = y > maxY ? y : maxY;
      this.minX = minX;
      this.minY = minY;
      this.maxX = maxX;
      this.maxY = maxY;
    };
    Bounds2.prototype.addVertexData = function(vertexData, beginOffset, endOffset) {
      var minX = this.minX;
      var minY = this.minY;
      var maxX = this.maxX;
      var maxY = this.maxY;
      for (var i = beginOffset; i < endOffset; i += 2) {
        var x = vertexData[i];
        var y = vertexData[i + 1];
        minX = x < minX ? x : minX;
        minY = y < minY ? y : minY;
        maxX = x > maxX ? x : maxX;
        maxY = y > maxY ? y : maxY;
      }
      this.minX = minX;
      this.minY = minY;
      this.maxX = maxX;
      this.maxY = maxY;
    };
    Bounds2.prototype.addVertices = function(transform, vertices, beginOffset, endOffset) {
      this.addVerticesMatrix(transform.worldTransform, vertices, beginOffset, endOffset);
    };
    Bounds2.prototype.addVerticesMatrix = function(matrix, vertices, beginOffset, endOffset, padX, padY) {
      if (padX === void 0) {
        padX = 0;
      }
      if (padY === void 0) {
        padY = padX;
      }
      var a = matrix.a;
      var b = matrix.b;
      var c = matrix.c;
      var d = matrix.d;
      var tx = matrix.tx;
      var ty = matrix.ty;
      var minX = this.minX;
      var minY = this.minY;
      var maxX = this.maxX;
      var maxY = this.maxY;
      for (var i = beginOffset; i < endOffset; i += 2) {
        var rawX = vertices[i];
        var rawY = vertices[i + 1];
        var x = a * rawX + c * rawY + tx;
        var y = d * rawY + b * rawX + ty;
        minX = Math.min(minX, x - padX);
        maxX = Math.max(maxX, x + padX);
        minY = Math.min(minY, y - padY);
        maxY = Math.max(maxY, y + padY);
      }
      this.minX = minX;
      this.minY = minY;
      this.maxX = maxX;
      this.maxY = maxY;
    };
    Bounds2.prototype.addBounds = function(bounds) {
      var minX = this.minX;
      var minY = this.minY;
      var maxX = this.maxX;
      var maxY = this.maxY;
      this.minX = bounds.minX < minX ? bounds.minX : minX;
      this.minY = bounds.minY < minY ? bounds.minY : minY;
      this.maxX = bounds.maxX > maxX ? bounds.maxX : maxX;
      this.maxY = bounds.maxY > maxY ? bounds.maxY : maxY;
    };
    Bounds2.prototype.addBoundsMask = function(bounds, mask) {
      var _minX = bounds.minX > mask.minX ? bounds.minX : mask.minX;
      var _minY = bounds.minY > mask.minY ? bounds.minY : mask.minY;
      var _maxX = bounds.maxX < mask.maxX ? bounds.maxX : mask.maxX;
      var _maxY = bounds.maxY < mask.maxY ? bounds.maxY : mask.maxY;
      if (_minX <= _maxX && _minY <= _maxY) {
        var minX = this.minX;
        var minY = this.minY;
        var maxX = this.maxX;
        var maxY = this.maxY;
        this.minX = _minX < minX ? _minX : minX;
        this.minY = _minY < minY ? _minY : minY;
        this.maxX = _maxX > maxX ? _maxX : maxX;
        this.maxY = _maxY > maxY ? _maxY : maxY;
      }
    };
    Bounds2.prototype.addBoundsMatrix = function(bounds, matrix) {
      this.addFrameMatrix(matrix, bounds.minX, bounds.minY, bounds.maxX, bounds.maxY);
    };
    Bounds2.prototype.addBoundsArea = function(bounds, area) {
      var _minX = bounds.minX > area.x ? bounds.minX : area.x;
      var _minY = bounds.minY > area.y ? bounds.minY : area.y;
      var _maxX = bounds.maxX < area.x + area.width ? bounds.maxX : area.x + area.width;
      var _maxY = bounds.maxY < area.y + area.height ? bounds.maxY : area.y + area.height;
      if (_minX <= _maxX && _minY <= _maxY) {
        var minX = this.minX;
        var minY = this.minY;
        var maxX = this.maxX;
        var maxY = this.maxY;
        this.minX = _minX < minX ? _minX : minX;
        this.minY = _minY < minY ? _minY : minY;
        this.maxX = _maxX > maxX ? _maxX : maxX;
        this.maxY = _maxY > maxY ? _maxY : maxY;
      }
    };
    Bounds2.prototype.pad = function(paddingX, paddingY) {
      if (paddingX === void 0) {
        paddingX = 0;
      }
      if (paddingY === void 0) {
        paddingY = paddingX;
      }
      if (!this.isEmpty()) {
        this.minX -= paddingX;
        this.maxX += paddingX;
        this.minY -= paddingY;
        this.maxY += paddingY;
      }
    };
    Bounds2.prototype.addFramePad = function(x0, y0, x1, y1, padX, padY) {
      x0 -= padX;
      y0 -= padY;
      x1 += padX;
      y1 += padY;
      this.minX = this.minX < x0 ? this.minX : x0;
      this.maxX = this.maxX > x1 ? this.maxX : x1;
      this.minY = this.minY < y0 ? this.minY : y0;
      this.maxY = this.maxY > y1 ? this.maxY : y1;
    };
    return Bounds2;
  }();
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics(d, b);
  };
  function __extends(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var DisplayObject = function(_super) {
    __extends(DisplayObject2, _super);
    function DisplayObject2() {
      var _this = _super.call(this) || this;
      _this.tempDisplayObjectParent = null;
      _this.transform = new Transform();
      _this.alpha = 1;
      _this.visible = true;
      _this.renderable = true;
      _this.parent = null;
      _this.worldAlpha = 1;
      _this._lastSortedIndex = 0;
      _this._zIndex = 0;
      _this.filterArea = null;
      _this.filters = null;
      _this._enabledFilters = null;
      _this._bounds = new Bounds();
      _this._localBounds = null;
      _this._boundsID = 0;
      _this._boundsRect = null;
      _this._localBoundsRect = null;
      _this._mask = null;
      _this._destroyed = false;
      _this.isSprite = false;
      _this.isMask = false;
      return _this;
    }
    DisplayObject2.mixin = function(source) {
      var keys2 = Object.keys(source);
      for (var i = 0; i < keys2.length; ++i) {
        var propertyName = keys2[i];
        Object.defineProperty(DisplayObject2.prototype, propertyName, Object.getOwnPropertyDescriptor(source, propertyName));
      }
    };
    DisplayObject2.prototype._recursivePostUpdateTransform = function() {
      if (this.parent) {
        this.parent._recursivePostUpdateTransform();
        this.transform.updateTransform(this.parent.transform);
      } else {
        this.transform.updateTransform(this._tempDisplayObjectParent.transform);
      }
    };
    DisplayObject2.prototype.updateTransform = function() {
      this._boundsID++;
      this.transform.updateTransform(this.parent.transform);
      this.worldAlpha = this.alpha * this.parent.worldAlpha;
    };
    DisplayObject2.prototype.getBounds = function(skipUpdate, rect) {
      if (!skipUpdate) {
        if (!this.parent) {
          this.parent = this._tempDisplayObjectParent;
          this.updateTransform();
          this.parent = null;
        } else {
          this._recursivePostUpdateTransform();
          this.updateTransform();
        }
      }
      if (this._bounds.updateID !== this._boundsID) {
        this.calculateBounds();
        this._bounds.updateID = this._boundsID;
      }
      if (!rect) {
        if (!this._boundsRect) {
          this._boundsRect = new Rectangle();
        }
        rect = this._boundsRect;
      }
      return this._bounds.getRectangle(rect);
    };
    DisplayObject2.prototype.getLocalBounds = function(rect) {
      if (!rect) {
        if (!this._localBoundsRect) {
          this._localBoundsRect = new Rectangle();
        }
        rect = this._localBoundsRect;
      }
      if (!this._localBounds) {
        this._localBounds = new Bounds();
      }
      var transformRef = this.transform;
      var parentRef = this.parent;
      this.parent = null;
      this.transform = this._tempDisplayObjectParent.transform;
      var worldBounds = this._bounds;
      var worldBoundsID = this._boundsID;
      this._bounds = this._localBounds;
      var bounds = this.getBounds(false, rect);
      this.parent = parentRef;
      this.transform = transformRef;
      this._bounds = worldBounds;
      this._bounds.updateID += this._boundsID - worldBoundsID;
      return bounds;
    };
    DisplayObject2.prototype.toGlobal = function(position, point, skipUpdate) {
      if (skipUpdate === void 0) {
        skipUpdate = false;
      }
      if (!skipUpdate) {
        this._recursivePostUpdateTransform();
        if (!this.parent) {
          this.parent = this._tempDisplayObjectParent;
          this.displayObjectUpdateTransform();
          this.parent = null;
        } else {
          this.displayObjectUpdateTransform();
        }
      }
      return this.worldTransform.apply(position, point);
    };
    DisplayObject2.prototype.toLocal = function(position, from, point, skipUpdate) {
      if (from) {
        position = from.toGlobal(position, point, skipUpdate);
      }
      if (!skipUpdate) {
        this._recursivePostUpdateTransform();
        if (!this.parent) {
          this.parent = this._tempDisplayObjectParent;
          this.displayObjectUpdateTransform();
          this.parent = null;
        } else {
          this.displayObjectUpdateTransform();
        }
      }
      return this.worldTransform.applyInverse(position, point);
    };
    DisplayObject2.prototype.setParent = function(container) {
      if (!container || !container.addChild) {
        throw new Error("setParent: Argument must be a Container");
      }
      container.addChild(this);
      return container;
    };
    DisplayObject2.prototype.setTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, pivotX, pivotY) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = 0;
      }
      if (scaleX === void 0) {
        scaleX = 1;
      }
      if (scaleY === void 0) {
        scaleY = 1;
      }
      if (rotation === void 0) {
        rotation = 0;
      }
      if (skewX === void 0) {
        skewX = 0;
      }
      if (skewY === void 0) {
        skewY = 0;
      }
      if (pivotX === void 0) {
        pivotX = 0;
      }
      if (pivotY === void 0) {
        pivotY = 0;
      }
      this.position.x = x;
      this.position.y = y;
      this.scale.x = !scaleX ? 1 : scaleX;
      this.scale.y = !scaleY ? 1 : scaleY;
      this.rotation = rotation;
      this.skew.x = skewX;
      this.skew.y = skewY;
      this.pivot.x = pivotX;
      this.pivot.y = pivotY;
      return this;
    };
    DisplayObject2.prototype.destroy = function(_options) {
      if (this.parent) {
        this.parent.removeChild(this);
      }
      this.removeAllListeners();
      this.transform = null;
      this.parent = null;
      this._bounds = null;
      this._mask = null;
      this.filters = null;
      this.filterArea = null;
      this.hitArea = null;
      this.interactive = false;
      this.interactiveChildren = false;
      this._destroyed = true;
    };
    Object.defineProperty(DisplayObject2.prototype, "_tempDisplayObjectParent", {
      get: function() {
        if (this.tempDisplayObjectParent === null) {
          this.tempDisplayObjectParent = new TemporaryDisplayObject();
        }
        return this.tempDisplayObjectParent;
      },
      enumerable: false,
      configurable: true
    });
    DisplayObject2.prototype.enableTempParent = function() {
      var myParent = this.parent;
      this.parent = this._tempDisplayObjectParent;
      return myParent;
    };
    DisplayObject2.prototype.disableTempParent = function(cacheParent) {
      this.parent = cacheParent;
    };
    Object.defineProperty(DisplayObject2.prototype, "x", {
      get: function() {
        return this.position.x;
      },
      set: function(value) {
        this.transform.position.x = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "y", {
      get: function() {
        return this.position.y;
      },
      set: function(value) {
        this.transform.position.y = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "worldTransform", {
      get: function() {
        return this.transform.worldTransform;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "localTransform", {
      get: function() {
        return this.transform.localTransform;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "position", {
      get: function() {
        return this.transform.position;
      },
      set: function(value) {
        this.transform.position.copyFrom(value);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "scale", {
      get: function() {
        return this.transform.scale;
      },
      set: function(value) {
        this.transform.scale.copyFrom(value);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "pivot", {
      get: function() {
        return this.transform.pivot;
      },
      set: function(value) {
        this.transform.pivot.copyFrom(value);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "skew", {
      get: function() {
        return this.transform.skew;
      },
      set: function(value) {
        this.transform.skew.copyFrom(value);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "rotation", {
      get: function() {
        return this.transform.rotation;
      },
      set: function(value) {
        this.transform.rotation = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "angle", {
      get: function() {
        return this.transform.rotation * RAD_TO_DEG;
      },
      set: function(value) {
        this.transform.rotation = value * DEG_TO_RAD;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "zIndex", {
      get: function() {
        return this._zIndex;
      },
      set: function(value) {
        this._zIndex = value;
        if (this.parent) {
          this.parent.sortDirty = true;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "worldVisible", {
      get: function() {
        var item = this;
        do {
          if (!item.visible) {
            return false;
          }
          item = item.parent;
        } while (item);
        return true;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(DisplayObject2.prototype, "mask", {
      get: function() {
        return this._mask;
      },
      set: function(value) {
        if (this._mask) {
          var maskObject = this._mask.maskObject || this._mask;
          maskObject.renderable = true;
          maskObject.isMask = false;
        }
        this._mask = value;
        if (this._mask) {
          var maskObject = this._mask.maskObject || this._mask;
          maskObject.renderable = false;
          maskObject.isMask = true;
        }
      },
      enumerable: false,
      configurable: true
    });
    return DisplayObject2;
  }(import_eventemitter3.default);
  var TemporaryDisplayObject = function(_super) {
    __extends(TemporaryDisplayObject2, _super);
    function TemporaryDisplayObject2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.sortDirty = null;
      return _this;
    }
    return TemporaryDisplayObject2;
  }(DisplayObject);
  DisplayObject.prototype.displayObjectUpdateTransform = DisplayObject.prototype.updateTransform;
  function sortChildren(a, b) {
    if (a.zIndex === b.zIndex) {
      return a._lastSortedIndex - b._lastSortedIndex;
    }
    return a.zIndex - b.zIndex;
  }
  var Container = function(_super) {
    __extends(Container2, _super);
    function Container2() {
      var _this = _super.call(this) || this;
      _this.children = [];
      _this.sortableChildren = settings.SORTABLE_CHILDREN;
      _this.sortDirty = false;
      return _this;
    }
    Container2.prototype.onChildrenChange = function(_length) {
    };
    Container2.prototype.addChild = function() {
      var arguments$1 = arguments;
      var children = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        children[_i] = arguments$1[_i];
      }
      if (children.length > 1) {
        for (var i = 0; i < children.length; i++) {
          this.addChild(children[i]);
        }
      } else {
        var child = children[0];
        if (child.parent) {
          child.parent.removeChild(child);
        }
        child.parent = this;
        this.sortDirty = true;
        child.transform._parentID = -1;
        this.children.push(child);
        this._boundsID++;
        this.onChildrenChange(this.children.length - 1);
        this.emit("childAdded", child, this, this.children.length - 1);
        child.emit("added", this);
      }
      return children[0];
    };
    Container2.prototype.addChildAt = function(child, index4) {
      if (index4 < 0 || index4 > this.children.length) {
        throw new Error(child + "addChildAt: The index " + index4 + " supplied is out of bounds " + this.children.length);
      }
      if (child.parent) {
        child.parent.removeChild(child);
      }
      child.parent = this;
      this.sortDirty = true;
      child.transform._parentID = -1;
      this.children.splice(index4, 0, child);
      this._boundsID++;
      this.onChildrenChange(index4);
      child.emit("added", this);
      this.emit("childAdded", child, this, index4);
      return child;
    };
    Container2.prototype.swapChildren = function(child, child2) {
      if (child === child2) {
        return;
      }
      var index1 = this.getChildIndex(child);
      var index22 = this.getChildIndex(child2);
      this.children[index1] = child2;
      this.children[index22] = child;
      this.onChildrenChange(index1 < index22 ? index1 : index22);
    };
    Container2.prototype.getChildIndex = function(child) {
      var index4 = this.children.indexOf(child);
      if (index4 === -1) {
        throw new Error("The supplied DisplayObject must be a child of the caller");
      }
      return index4;
    };
    Container2.prototype.setChildIndex = function(child, index4) {
      if (index4 < 0 || index4 >= this.children.length) {
        throw new Error("The index " + index4 + " supplied is out of bounds " + this.children.length);
      }
      var currentIndex = this.getChildIndex(child);
      removeItems(this.children, currentIndex, 1);
      this.children.splice(index4, 0, child);
      this.onChildrenChange(index4);
    };
    Container2.prototype.getChildAt = function(index4) {
      if (index4 < 0 || index4 >= this.children.length) {
        throw new Error("getChildAt: Index (" + index4 + ") does not exist.");
      }
      return this.children[index4];
    };
    Container2.prototype.removeChild = function() {
      var arguments$1 = arguments;
      var children = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        children[_i] = arguments$1[_i];
      }
      if (children.length > 1) {
        for (var i = 0; i < children.length; i++) {
          this.removeChild(children[i]);
        }
      } else {
        var child = children[0];
        var index4 = this.children.indexOf(child);
        if (index4 === -1) {
          return null;
        }
        child.parent = null;
        child.transform._parentID = -1;
        removeItems(this.children, index4, 1);
        this._boundsID++;
        this.onChildrenChange(index4);
        child.emit("removed", this);
        this.emit("childRemoved", child, this, index4);
      }
      return children[0];
    };
    Container2.prototype.removeChildAt = function(index4) {
      var child = this.getChildAt(index4);
      child.parent = null;
      child.transform._parentID = -1;
      removeItems(this.children, index4, 1);
      this._boundsID++;
      this.onChildrenChange(index4);
      child.emit("removed", this);
      this.emit("childRemoved", child, this, index4);
      return child;
    };
    Container2.prototype.removeChildren = function(beginIndex, endIndex) {
      if (beginIndex === void 0) {
        beginIndex = 0;
      }
      if (endIndex === void 0) {
        endIndex = this.children.length;
      }
      var begin = beginIndex;
      var end = endIndex;
      var range = end - begin;
      var removed;
      if (range > 0 && range <= end) {
        removed = this.children.splice(begin, range);
        for (var i = 0; i < removed.length; ++i) {
          removed[i].parent = null;
          if (removed[i].transform) {
            removed[i].transform._parentID = -1;
          }
        }
        this._boundsID++;
        this.onChildrenChange(beginIndex);
        for (var i = 0; i < removed.length; ++i) {
          removed[i].emit("removed", this);
          this.emit("childRemoved", removed[i], this, i);
        }
        return removed;
      } else if (range === 0 && this.children.length === 0) {
        return [];
      }
      throw new RangeError("removeChildren: numeric values are outside the acceptable range.");
    };
    Container2.prototype.sortChildren = function() {
      var sortRequired = false;
      for (var i = 0, j = this.children.length; i < j; ++i) {
        var child = this.children[i];
        child._lastSortedIndex = i;
        if (!sortRequired && child.zIndex !== 0) {
          sortRequired = true;
        }
      }
      if (sortRequired && this.children.length > 1) {
        this.children.sort(sortChildren);
      }
      this.sortDirty = false;
    };
    Container2.prototype.updateTransform = function() {
      if (this.sortableChildren && this.sortDirty) {
        this.sortChildren();
      }
      this._boundsID++;
      this.transform.updateTransform(this.parent.transform);
      this.worldAlpha = this.alpha * this.parent.worldAlpha;
      for (var i = 0, j = this.children.length; i < j; ++i) {
        var child = this.children[i];
        if (child.visible) {
          child.updateTransform();
        }
      }
    };
    Container2.prototype.calculateBounds = function() {
      this._bounds.clear();
      this._calculateBounds();
      for (var i = 0; i < this.children.length; i++) {
        var child = this.children[i];
        if (!child.visible || !child.renderable) {
          continue;
        }
        child.calculateBounds();
        if (child._mask) {
          var maskObject = child._mask.maskObject || child._mask;
          maskObject.calculateBounds();
          this._bounds.addBoundsMask(child._bounds, maskObject._bounds);
        } else if (child.filterArea) {
          this._bounds.addBoundsArea(child._bounds, child.filterArea);
        } else {
          this._bounds.addBounds(child._bounds);
        }
      }
      this._bounds.updateID = this._boundsID;
    };
    Container2.prototype.getLocalBounds = function(rect, skipChildrenUpdate) {
      if (skipChildrenUpdate === void 0) {
        skipChildrenUpdate = false;
      }
      var result = _super.prototype.getLocalBounds.call(this, rect);
      if (!skipChildrenUpdate) {
        for (var i = 0, j = this.children.length; i < j; ++i) {
          var child = this.children[i];
          if (child.visible) {
            child.updateTransform();
          }
        }
      }
      return result;
    };
    Container2.prototype._calculateBounds = function() {
    };
    Container2.prototype.render = function(renderer) {
      if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {
        return;
      }
      if (this._mask || this.filters && this.filters.length) {
        this.renderAdvanced(renderer);
      } else {
        this._render(renderer);
        for (var i = 0, j = this.children.length; i < j; ++i) {
          this.children[i].render(renderer);
        }
      }
    };
    Container2.prototype.renderAdvanced = function(renderer) {
      renderer.batch.flush();
      var filters2 = this.filters;
      var mask = this._mask;
      if (filters2) {
        if (!this._enabledFilters) {
          this._enabledFilters = [];
        }
        this._enabledFilters.length = 0;
        for (var i = 0; i < filters2.length; i++) {
          if (filters2[i].enabled) {
            this._enabledFilters.push(filters2[i]);
          }
        }
        if (this._enabledFilters.length) {
          renderer.filter.push(this, this._enabledFilters);
        }
      }
      if (mask) {
        renderer.mask.push(this, this._mask);
      }
      this._render(renderer);
      for (var i = 0, j = this.children.length; i < j; i++) {
        this.children[i].render(renderer);
      }
      renderer.batch.flush();
      if (mask) {
        renderer.mask.pop(this);
      }
      if (filters2 && this._enabledFilters && this._enabledFilters.length) {
        renderer.filter.pop();
      }
    };
    Container2.prototype._render = function(_renderer) {
    };
    Container2.prototype.destroy = function(options) {
      _super.prototype.destroy.call(this);
      this.sortDirty = false;
      var destroyChildren = typeof options === "boolean" ? options : options && options.children;
      var oldChildren = this.removeChildren(0, this.children.length);
      if (destroyChildren) {
        for (var i = 0; i < oldChildren.length; ++i) {
          oldChildren[i].destroy(options);
        }
      }
    };
    Object.defineProperty(Container2.prototype, "width", {
      get: function() {
        return this.scale.x * this.getLocalBounds().width;
      },
      set: function(value) {
        var width = this.getLocalBounds().width;
        if (width !== 0) {
          this.scale.x = value / width;
        } else {
          this.scale.x = 1;
        }
        this._width = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Container2.prototype, "height", {
      get: function() {
        return this.scale.y * this.getLocalBounds().height;
      },
      set: function(value) {
        var height = this.getLocalBounds().height;
        if (height !== 0) {
          this.scale.y = value / height;
        } else {
          this.scale.y = 1;
        }
        this._height = value;
      },
      enumerable: false,
      configurable: true
    });
    return Container2;
  }(DisplayObject);
  Container.prototype.containerUpdateTransform = Container.prototype.updateTransform;

  // node_modules/@pixi/accessibility/lib/accessibility.es.js
  /*!
   * @pixi/accessibility - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/accessibility is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var accessibleTarget = {
    accessible: false,
    accessibleTitle: null,
    accessibleHint: null,
    tabIndex: 0,
    _accessibleActive: false,
    _accessibleDiv: null,
    accessibleType: "button",
    accessiblePointerEvents: "auto",
    accessibleChildren: true,
    renderId: -1
  };
  DisplayObject.mixin(accessibleTarget);
  var KEY_CODE_TAB = 9;
  var DIV_TOUCH_SIZE = 100;
  var DIV_TOUCH_POS_X = 0;
  var DIV_TOUCH_POS_Y = 0;
  var DIV_TOUCH_ZINDEX = 2;
  var DIV_HOOK_SIZE = 1;
  var DIV_HOOK_POS_X = -1e3;
  var DIV_HOOK_POS_Y = -1e3;
  var DIV_HOOK_ZINDEX = 2;
  var AccessibilityManager = function() {
    function AccessibilityManager2(renderer) {
      this._hookDiv = null;
      if (isMobile2.tablet || isMobile2.phone) {
        this.createTouchHook();
      }
      var div = document.createElement("div");
      div.style.width = DIV_TOUCH_SIZE + "px";
      div.style.height = DIV_TOUCH_SIZE + "px";
      div.style.position = "absolute";
      div.style.top = DIV_TOUCH_POS_X + "px";
      div.style.left = DIV_TOUCH_POS_Y + "px";
      div.style.zIndex = DIV_TOUCH_ZINDEX.toString();
      this.div = div;
      this.pool = [];
      this.renderId = 0;
      this.debug = false;
      this.renderer = renderer;
      this.children = [];
      this._onKeyDown = this._onKeyDown.bind(this);
      this._onMouseMove = this._onMouseMove.bind(this);
      this._isActive = false;
      this._isMobileAccessibility = false;
      this.androidUpdateCount = 0;
      this.androidUpdateFrequency = 500;
      window.addEventListener("keydown", this._onKeyDown, false);
    }
    Object.defineProperty(AccessibilityManager2.prototype, "isActive", {
      get: function() {
        return this._isActive;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(AccessibilityManager2.prototype, "isMobileAccessibility", {
      get: function() {
        return this._isMobileAccessibility;
      },
      enumerable: false,
      configurable: true
    });
    AccessibilityManager2.prototype.createTouchHook = function() {
      var _this = this;
      var hookDiv = document.createElement("button");
      hookDiv.style.width = DIV_HOOK_SIZE + "px";
      hookDiv.style.height = DIV_HOOK_SIZE + "px";
      hookDiv.style.position = "absolute";
      hookDiv.style.top = DIV_HOOK_POS_X + "px";
      hookDiv.style.left = DIV_HOOK_POS_Y + "px";
      hookDiv.style.zIndex = DIV_HOOK_ZINDEX.toString();
      hookDiv.style.backgroundColor = "#FF0000";
      hookDiv.title = "select to enable accessability for this content";
      hookDiv.addEventListener("focus", function() {
        _this._isMobileAccessibility = true;
        _this.activate();
        _this.destroyTouchHook();
      });
      document.body.appendChild(hookDiv);
      this._hookDiv = hookDiv;
    };
    AccessibilityManager2.prototype.destroyTouchHook = function() {
      if (!this._hookDiv) {
        return;
      }
      document.body.removeChild(this._hookDiv);
      this._hookDiv = null;
    };
    AccessibilityManager2.prototype.activate = function() {
      if (this._isActive) {
        return;
      }
      this._isActive = true;
      window.document.addEventListener("mousemove", this._onMouseMove, true);
      window.removeEventListener("keydown", this._onKeyDown, false);
      this.renderer.on("postrender", this.update, this);
      if (this.renderer.view.parentNode) {
        this.renderer.view.parentNode.appendChild(this.div);
      }
    };
    AccessibilityManager2.prototype.deactivate = function() {
      if (!this._isActive || this._isMobileAccessibility) {
        return;
      }
      this._isActive = false;
      window.document.removeEventListener("mousemove", this._onMouseMove, true);
      window.addEventListener("keydown", this._onKeyDown, false);
      this.renderer.off("postrender", this.update);
      if (this.div.parentNode) {
        this.div.parentNode.removeChild(this.div);
      }
    };
    AccessibilityManager2.prototype.updateAccessibleObjects = function(displayObject) {
      if (!displayObject.visible || !displayObject.accessibleChildren) {
        return;
      }
      if (displayObject.accessible && displayObject.interactive) {
        if (!displayObject._accessibleActive) {
          this.addChild(displayObject);
        }
        displayObject.renderId = this.renderId;
      }
      var children = displayObject.children;
      for (var i = 0; i < children.length; i++) {
        this.updateAccessibleObjects(children[i]);
      }
    };
    AccessibilityManager2.prototype.update = function() {
      var now = performance.now();
      if (isMobile2.android.device && now < this.androidUpdateCount) {
        return;
      }
      this.androidUpdateCount = now + this.androidUpdateFrequency;
      if (!this.renderer.renderingToScreen) {
        return;
      }
      if (this.renderer._lastObjectRendered) {
        this.updateAccessibleObjects(this.renderer._lastObjectRendered);
      }
      var rect = this.renderer.view.getBoundingClientRect();
      var resolution = this.renderer.resolution;
      var sx = rect.width / this.renderer.width * resolution;
      var sy = rect.height / this.renderer.height * resolution;
      var div = this.div;
      div.style.left = rect.left + "px";
      div.style.top = rect.top + "px";
      div.style.width = this.renderer.width + "px";
      div.style.height = this.renderer.height + "px";
      for (var i = 0; i < this.children.length; i++) {
        var child = this.children[i];
        if (child.renderId !== this.renderId) {
          child._accessibleActive = false;
          removeItems(this.children, i, 1);
          this.div.removeChild(child._accessibleDiv);
          this.pool.push(child._accessibleDiv);
          child._accessibleDiv = null;
          i--;
        } else {
          div = child._accessibleDiv;
          var hitArea = child.hitArea;
          var wt = child.worldTransform;
          if (child.hitArea) {
            div.style.left = (wt.tx + hitArea.x * wt.a) * sx + "px";
            div.style.top = (wt.ty + hitArea.y * wt.d) * sy + "px";
            div.style.width = hitArea.width * wt.a * sx + "px";
            div.style.height = hitArea.height * wt.d * sy + "px";
          } else {
            hitArea = child.getBounds();
            this.capHitArea(hitArea);
            div.style.left = hitArea.x * sx + "px";
            div.style.top = hitArea.y * sy + "px";
            div.style.width = hitArea.width * sx + "px";
            div.style.height = hitArea.height * sy + "px";
            if (div.title !== child.accessibleTitle && child.accessibleTitle !== null) {
              div.title = child.accessibleTitle;
            }
            if (div.getAttribute("aria-label") !== child.accessibleHint && child.accessibleHint !== null) {
              div.setAttribute("aria-label", child.accessibleHint);
            }
          }
          if (child.accessibleTitle !== div.title || child.tabIndex !== div.tabIndex) {
            div.title = child.accessibleTitle;
            div.tabIndex = child.tabIndex;
            if (this.debug) {
              this.updateDebugHTML(div);
            }
          }
        }
      }
      this.renderId++;
    };
    AccessibilityManager2.prototype.updateDebugHTML = function(div) {
      div.innerHTML = "type: " + div.type + "</br> title : " + div.title + "</br> tabIndex: " + div.tabIndex;
    };
    AccessibilityManager2.prototype.capHitArea = function(hitArea) {
      if (hitArea.x < 0) {
        hitArea.width += hitArea.x;
        hitArea.x = 0;
      }
      if (hitArea.y < 0) {
        hitArea.height += hitArea.y;
        hitArea.y = 0;
      }
      if (hitArea.x + hitArea.width > this.renderer.width) {
        hitArea.width = this.renderer.width - hitArea.x;
      }
      if (hitArea.y + hitArea.height > this.renderer.height) {
        hitArea.height = this.renderer.height - hitArea.y;
      }
    };
    AccessibilityManager2.prototype.addChild = function(displayObject) {
      var div = this.pool.pop();
      if (!div) {
        div = document.createElement("button");
        div.style.width = DIV_TOUCH_SIZE + "px";
        div.style.height = DIV_TOUCH_SIZE + "px";
        div.style.backgroundColor = this.debug ? "rgba(255,255,255,0.5)" : "transparent";
        div.style.position = "absolute";
        div.style.zIndex = DIV_TOUCH_ZINDEX.toString();
        div.style.borderStyle = "none";
        if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
          div.setAttribute("aria-live", "off");
        } else {
          div.setAttribute("aria-live", "polite");
        }
        if (navigator.userAgent.match(/rv:.*Gecko\//)) {
          div.setAttribute("aria-relevant", "additions");
        } else {
          div.setAttribute("aria-relevant", "text");
        }
        div.addEventListener("click", this._onClick.bind(this));
        div.addEventListener("focus", this._onFocus.bind(this));
        div.addEventListener("focusout", this._onFocusOut.bind(this));
      }
      div.style.pointerEvents = displayObject.accessiblePointerEvents;
      div.type = displayObject.accessibleType;
      if (displayObject.accessibleTitle && displayObject.accessibleTitle !== null) {
        div.title = displayObject.accessibleTitle;
      } else if (!displayObject.accessibleHint || displayObject.accessibleHint === null) {
        div.title = "displayObject " + displayObject.tabIndex;
      }
      if (displayObject.accessibleHint && displayObject.accessibleHint !== null) {
        div.setAttribute("aria-label", displayObject.accessibleHint);
      }
      if (this.debug) {
        this.updateDebugHTML(div);
      }
      displayObject._accessibleActive = true;
      displayObject._accessibleDiv = div;
      div.displayObject = displayObject;
      this.children.push(displayObject);
      this.div.appendChild(displayObject._accessibleDiv);
      displayObject._accessibleDiv.tabIndex = displayObject.tabIndex;
    };
    AccessibilityManager2.prototype._onClick = function(e) {
      var interactionManager = this.renderer.plugins.interaction;
      interactionManager.dispatchEvent(e.target.displayObject, "click", interactionManager.eventData);
      interactionManager.dispatchEvent(e.target.displayObject, "pointertap", interactionManager.eventData);
      interactionManager.dispatchEvent(e.target.displayObject, "tap", interactionManager.eventData);
    };
    AccessibilityManager2.prototype._onFocus = function(e) {
      if (!e.target.getAttribute("aria-live")) {
        e.target.setAttribute("aria-live", "assertive");
      }
      var interactionManager = this.renderer.plugins.interaction;
      interactionManager.dispatchEvent(e.target.displayObject, "mouseover", interactionManager.eventData);
    };
    AccessibilityManager2.prototype._onFocusOut = function(e) {
      if (!e.target.getAttribute("aria-live")) {
        e.target.setAttribute("aria-live", "polite");
      }
      var interactionManager = this.renderer.plugins.interaction;
      interactionManager.dispatchEvent(e.target.displayObject, "mouseout", interactionManager.eventData);
    };
    AccessibilityManager2.prototype._onKeyDown = function(e) {
      if (e.keyCode !== KEY_CODE_TAB) {
        return;
      }
      this.activate();
    };
    AccessibilityManager2.prototype._onMouseMove = function(e) {
      if (e.movementX === 0 && e.movementY === 0) {
        return;
      }
      this.deactivate();
    };
    AccessibilityManager2.prototype.destroy = function() {
      this.destroyTouchHook();
      this.div = null;
      window.document.removeEventListener("mousemove", this._onMouseMove, true);
      window.removeEventListener("keydown", this._onKeyDown);
      this.pool = null;
      this.children = null;
      this.renderer = null;
    };
    return AccessibilityManager2;
  }();

  // node_modules/@pixi/ticker/lib/ticker.es.js
  /*!
   * @pixi/ticker - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/ticker is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  settings.TARGET_FPMS = 0.06;
  var UPDATE_PRIORITY;
  (function(UPDATE_PRIORITY2) {
    UPDATE_PRIORITY2[UPDATE_PRIORITY2["INTERACTION"] = 50] = "INTERACTION";
    UPDATE_PRIORITY2[UPDATE_PRIORITY2["HIGH"] = 25] = "HIGH";
    UPDATE_PRIORITY2[UPDATE_PRIORITY2["NORMAL"] = 0] = "NORMAL";
    UPDATE_PRIORITY2[UPDATE_PRIORITY2["LOW"] = -25] = "LOW";
    UPDATE_PRIORITY2[UPDATE_PRIORITY2["UTILITY"] = -50] = "UTILITY";
  })(UPDATE_PRIORITY || (UPDATE_PRIORITY = {}));
  var TickerListener = function() {
    function TickerListener2(fn, context2, priority, once) {
      if (context2 === void 0) {
        context2 = null;
      }
      if (priority === void 0) {
        priority = 0;
      }
      if (once === void 0) {
        once = false;
      }
      this.fn = fn;
      this.context = context2;
      this.priority = priority;
      this.once = once;
      this.next = null;
      this.previous = null;
      this._destroyed = false;
    }
    TickerListener2.prototype.match = function(fn, context2) {
      if (context2 === void 0) {
        context2 = null;
      }
      return this.fn === fn && this.context === context2;
    };
    TickerListener2.prototype.emit = function(deltaTime) {
      if (this.fn) {
        if (this.context) {
          this.fn.call(this.context, deltaTime);
        } else {
          this.fn(deltaTime);
        }
      }
      var redirect = this.next;
      if (this.once) {
        this.destroy(true);
      }
      if (this._destroyed) {
        this.next = null;
      }
      return redirect;
    };
    TickerListener2.prototype.connect = function(previous) {
      this.previous = previous;
      if (previous.next) {
        previous.next.previous = this;
      }
      this.next = previous.next;
      previous.next = this;
    };
    TickerListener2.prototype.destroy = function(hard) {
      if (hard === void 0) {
        hard = false;
      }
      this._destroyed = true;
      this.fn = null;
      this.context = null;
      if (this.previous) {
        this.previous.next = this.next;
      }
      if (this.next) {
        this.next.previous = this.previous;
      }
      var redirect = this.next;
      this.next = hard ? null : redirect;
      this.previous = null;
      return redirect;
    };
    return TickerListener2;
  }();
  var Ticker = function() {
    function Ticker2() {
      var _this = this;
      this._head = new TickerListener(null, null, Infinity);
      this._requestId = null;
      this._maxElapsedMS = 100;
      this._minElapsedMS = 0;
      this.autoStart = false;
      this.deltaTime = 1;
      this.deltaMS = 1 / settings.TARGET_FPMS;
      this.elapsedMS = 1 / settings.TARGET_FPMS;
      this.lastTime = -1;
      this.speed = 1;
      this.started = false;
      this._protected = false;
      this._lastFrame = -1;
      this._tick = function(time) {
        _this._requestId = null;
        if (_this.started) {
          _this.update(time);
          if (_this.started && _this._requestId === null && _this._head.next) {
            _this._requestId = requestAnimationFrame(_this._tick);
          }
        }
      };
    }
    Ticker2.prototype._requestIfNeeded = function() {
      if (this._requestId === null && this._head.next) {
        this.lastTime = performance.now();
        this._lastFrame = this.lastTime;
        this._requestId = requestAnimationFrame(this._tick);
      }
    };
    Ticker2.prototype._cancelIfNeeded = function() {
      if (this._requestId !== null) {
        cancelAnimationFrame(this._requestId);
        this._requestId = null;
      }
    };
    Ticker2.prototype._startIfPossible = function() {
      if (this.started) {
        this._requestIfNeeded();
      } else if (this.autoStart) {
        this.start();
      }
    };
    Ticker2.prototype.add = function(fn, context2, priority) {
      if (priority === void 0) {
        priority = UPDATE_PRIORITY.NORMAL;
      }
      return this._addListener(new TickerListener(fn, context2, priority));
    };
    Ticker2.prototype.addOnce = function(fn, context2, priority) {
      if (priority === void 0) {
        priority = UPDATE_PRIORITY.NORMAL;
      }
      return this._addListener(new TickerListener(fn, context2, priority, true));
    };
    Ticker2.prototype._addListener = function(listener) {
      var current = this._head.next;
      var previous = this._head;
      if (!current) {
        listener.connect(previous);
      } else {
        while (current) {
          if (listener.priority > current.priority) {
            listener.connect(previous);
            break;
          }
          previous = current;
          current = current.next;
        }
        if (!listener.previous) {
          listener.connect(previous);
        }
      }
      this._startIfPossible();
      return this;
    };
    Ticker2.prototype.remove = function(fn, context2) {
      var listener = this._head.next;
      while (listener) {
        if (listener.match(fn, context2)) {
          listener = listener.destroy();
        } else {
          listener = listener.next;
        }
      }
      if (!this._head.next) {
        this._cancelIfNeeded();
      }
      return this;
    };
    Object.defineProperty(Ticker2.prototype, "count", {
      get: function() {
        if (!this._head) {
          return 0;
        }
        var count = 0;
        var current = this._head;
        while (current = current.next) {
          count++;
        }
        return count;
      },
      enumerable: false,
      configurable: true
    });
    Ticker2.prototype.start = function() {
      if (!this.started) {
        this.started = true;
        this._requestIfNeeded();
      }
    };
    Ticker2.prototype.stop = function() {
      if (this.started) {
        this.started = false;
        this._cancelIfNeeded();
      }
    };
    Ticker2.prototype.destroy = function() {
      if (!this._protected) {
        this.stop();
        var listener = this._head.next;
        while (listener) {
          listener = listener.destroy(true);
        }
        this._head.destroy();
        this._head = null;
      }
    };
    Ticker2.prototype.update = function(currentTime) {
      if (currentTime === void 0) {
        currentTime = performance.now();
      }
      var elapsedMS;
      if (currentTime > this.lastTime) {
        elapsedMS = this.elapsedMS = currentTime - this.lastTime;
        if (elapsedMS > this._maxElapsedMS) {
          elapsedMS = this._maxElapsedMS;
        }
        elapsedMS *= this.speed;
        if (this._minElapsedMS) {
          var delta = currentTime - this._lastFrame | 0;
          if (delta < this._minElapsedMS) {
            return;
          }
          this._lastFrame = currentTime - delta % this._minElapsedMS;
        }
        this.deltaMS = elapsedMS;
        this.deltaTime = this.deltaMS * settings.TARGET_FPMS;
        var head = this._head;
        var listener = head.next;
        while (listener) {
          listener = listener.emit(this.deltaTime);
        }
        if (!head.next) {
          this._cancelIfNeeded();
        }
      } else {
        this.deltaTime = this.deltaMS = this.elapsedMS = 0;
      }
      this.lastTime = currentTime;
    };
    Object.defineProperty(Ticker2.prototype, "FPS", {
      get: function() {
        return 1e3 / this.elapsedMS;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Ticker2.prototype, "minFPS", {
      get: function() {
        return 1e3 / this._maxElapsedMS;
      },
      set: function(fps) {
        var minFPS = Math.min(this.maxFPS, fps);
        var minFPMS = Math.min(Math.max(0, minFPS) / 1e3, settings.TARGET_FPMS);
        this._maxElapsedMS = 1 / minFPMS;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Ticker2.prototype, "maxFPS", {
      get: function() {
        if (this._minElapsedMS) {
          return Math.round(1e3 / this._minElapsedMS);
        }
        return 0;
      },
      set: function(fps) {
        if (fps === 0) {
          this._minElapsedMS = 0;
        } else {
          var maxFPS = Math.max(this.minFPS, fps);
          this._minElapsedMS = 1 / (maxFPS / 1e3);
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Ticker2, "shared", {
      get: function() {
        if (!Ticker2._shared) {
          var shared = Ticker2._shared = new Ticker2();
          shared.autoStart = true;
          shared._protected = true;
        }
        return Ticker2._shared;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Ticker2, "system", {
      get: function() {
        if (!Ticker2._system) {
          var system = Ticker2._system = new Ticker2();
          system.autoStart = true;
          system._protected = true;
        }
        return Ticker2._system;
      },
      enumerable: false,
      configurable: true
    });
    return Ticker2;
  }();
  var TickerPlugin = function() {
    function TickerPlugin2() {
    }
    TickerPlugin2.init = function(options) {
      var _this = this;
      options = Object.assign({
        autoStart: true,
        sharedTicker: false
      }, options);
      Object.defineProperty(this, "ticker", {
        set: function(ticker) {
          if (this._ticker) {
            this._ticker.remove(this.render, this);
          }
          this._ticker = ticker;
          if (ticker) {
            ticker.add(this.render, this, UPDATE_PRIORITY.LOW);
          }
        },
        get: function() {
          return this._ticker;
        }
      });
      this.stop = function() {
        _this._ticker.stop();
      };
      this.start = function() {
        _this._ticker.start();
      };
      this._ticker = null;
      this.ticker = options.sharedTicker ? Ticker.shared : new Ticker();
      if (options.autoStart) {
        this.start();
      }
    };
    TickerPlugin2.destroy = function() {
      if (this._ticker) {
        var oldTicker = this._ticker;
        this.ticker = null;
        oldTicker.destroy();
      }
    };
    return TickerPlugin2;
  }();

  // node_modules/@pixi/interaction/lib/interaction.es.js
  /*!
   * @pixi/interaction - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/interaction is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var InteractionData = function() {
    function InteractionData2() {
      this.pressure = 0;
      this.rotationAngle = 0;
      this.twist = 0;
      this.tangentialPressure = 0;
      this.global = new Point();
      this.target = null;
      this.originalEvent = null;
      this.identifier = null;
      this.isPrimary = false;
      this.button = 0;
      this.buttons = 0;
      this.width = 0;
      this.height = 0;
      this.tiltX = 0;
      this.tiltY = 0;
      this.pointerType = null;
      this.pressure = 0;
      this.rotationAngle = 0;
      this.twist = 0;
      this.tangentialPressure = 0;
    }
    Object.defineProperty(InteractionData2.prototype, "pointerId", {
      get: function() {
        return this.identifier;
      },
      enumerable: false,
      configurable: true
    });
    InteractionData2.prototype.getLocalPosition = function(displayObject, point, globalPos) {
      return displayObject.worldTransform.applyInverse(globalPos || this.global, point);
    };
    InteractionData2.prototype.copyEvent = function(event) {
      if ("isPrimary" in event && event.isPrimary) {
        this.isPrimary = true;
      }
      this.button = "button" in event && event.button;
      var buttons = "buttons" in event && event.buttons;
      this.buttons = Number.isInteger(buttons) ? buttons : "which" in event && event.which;
      this.width = "width" in event && event.width;
      this.height = "height" in event && event.height;
      this.tiltX = "tiltX" in event && event.tiltX;
      this.tiltY = "tiltY" in event && event.tiltY;
      this.pointerType = "pointerType" in event && event.pointerType;
      this.pressure = "pressure" in event && event.pressure;
      this.rotationAngle = "rotationAngle" in event && event.rotationAngle;
      this.twist = "twist" in event && event.twist || 0;
      this.tangentialPressure = "tangentialPressure" in event && event.tangentialPressure || 0;
    };
    InteractionData2.prototype.reset = function() {
      this.isPrimary = false;
    };
    return InteractionData2;
  }();
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics2 = function(d, b) {
    extendStatics2 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics2(d, b);
  };
  function __extends2(d, b) {
    extendStatics2(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var InteractionEvent = function() {
    function InteractionEvent2() {
      this.stopped = false;
      this.stopsPropagatingAt = null;
      this.stopPropagationHint = false;
      this.target = null;
      this.currentTarget = null;
      this.type = null;
      this.data = null;
    }
    InteractionEvent2.prototype.stopPropagation = function() {
      this.stopped = true;
      this.stopPropagationHint = true;
      this.stopsPropagatingAt = this.currentTarget;
    };
    InteractionEvent2.prototype.reset = function() {
      this.stopped = false;
      this.stopsPropagatingAt = null;
      this.stopPropagationHint = false;
      this.currentTarget = null;
      this.target = null;
    };
    return InteractionEvent2;
  }();
  var InteractionTrackingData = function() {
    function InteractionTrackingData2(pointerId) {
      this._pointerId = pointerId;
      this._flags = InteractionTrackingData2.FLAGS.NONE;
    }
    InteractionTrackingData2.prototype._doSet = function(flag, yn) {
      if (yn) {
        this._flags = this._flags | flag;
      } else {
        this._flags = this._flags & ~flag;
      }
    };
    Object.defineProperty(InteractionTrackingData2.prototype, "pointerId", {
      get: function() {
        return this._pointerId;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(InteractionTrackingData2.prototype, "flags", {
      get: function() {
        return this._flags;
      },
      set: function(flags) {
        this._flags = flags;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(InteractionTrackingData2.prototype, "none", {
      get: function() {
        return this._flags === InteractionTrackingData2.FLAGS.NONE;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(InteractionTrackingData2.prototype, "over", {
      get: function() {
        return (this._flags & InteractionTrackingData2.FLAGS.OVER) !== 0;
      },
      set: function(yn) {
        this._doSet(InteractionTrackingData2.FLAGS.OVER, yn);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(InteractionTrackingData2.prototype, "rightDown", {
      get: function() {
        return (this._flags & InteractionTrackingData2.FLAGS.RIGHT_DOWN) !== 0;
      },
      set: function(yn) {
        this._doSet(InteractionTrackingData2.FLAGS.RIGHT_DOWN, yn);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(InteractionTrackingData2.prototype, "leftDown", {
      get: function() {
        return (this._flags & InteractionTrackingData2.FLAGS.LEFT_DOWN) !== 0;
      },
      set: function(yn) {
        this._doSet(InteractionTrackingData2.FLAGS.LEFT_DOWN, yn);
      },
      enumerable: false,
      configurable: true
    });
    InteractionTrackingData2.FLAGS = Object.freeze({
      NONE: 0,
      OVER: 1 << 0,
      LEFT_DOWN: 1 << 1,
      RIGHT_DOWN: 1 << 2
    });
    return InteractionTrackingData2;
  }();
  var TreeSearch = function() {
    function TreeSearch2() {
      this._tempPoint = new Point();
    }
    TreeSearch2.prototype.recursiveFindHit = function(interactionEvent, displayObject, func, hitTest, interactive) {
      if (!displayObject || !displayObject.visible) {
        return false;
      }
      var point = interactionEvent.data.global;
      interactive = displayObject.interactive || interactive;
      var hit = false;
      var interactiveParent = interactive;
      var hitTestChildren = true;
      if (displayObject.hitArea) {
        if (hitTest) {
          displayObject.worldTransform.applyInverse(point, this._tempPoint);
          if (!displayObject.hitArea.contains(this._tempPoint.x, this._tempPoint.y)) {
            hitTest = false;
            hitTestChildren = false;
          } else {
            hit = true;
          }
        }
        interactiveParent = false;
      } else if (displayObject._mask) {
        if (hitTest) {
          if (!(displayObject._mask.containsPoint && displayObject._mask.containsPoint(point))) {
            hitTest = false;
          }
        }
      }
      if (hitTestChildren && displayObject.interactiveChildren && displayObject.children) {
        var children = displayObject.children;
        for (var i = children.length - 1; i >= 0; i--) {
          var child = children[i];
          var childHit = this.recursiveFindHit(interactionEvent, child, func, hitTest, interactiveParent);
          if (childHit) {
            if (!child.parent) {
              continue;
            }
            interactiveParent = false;
            if (childHit) {
              if (interactionEvent.target) {
                hitTest = false;
              }
              hit = true;
            }
          }
        }
      }
      if (interactive) {
        if (hitTest && !interactionEvent.target) {
          if (!displayObject.hitArea && displayObject.containsPoint) {
            if (displayObject.containsPoint(point)) {
              hit = true;
            }
          }
        }
        if (displayObject.interactive) {
          if (hit && !interactionEvent.target) {
            interactionEvent.target = displayObject;
          }
          if (func) {
            func(interactionEvent, displayObject, !!hit);
          }
        }
      }
      return hit;
    };
    TreeSearch2.prototype.findHit = function(interactionEvent, displayObject, func, hitTest) {
      this.recursiveFindHit(interactionEvent, displayObject, func, hitTest, false);
    };
    return TreeSearch2;
  }();
  var interactiveTarget = {
    interactive: false,
    interactiveChildren: true,
    hitArea: null,
    get buttonMode() {
      return this.cursor === "pointer";
    },
    set buttonMode(value) {
      if (value) {
        this.cursor = "pointer";
      } else if (this.cursor === "pointer") {
        this.cursor = null;
      }
    },
    cursor: null,
    get trackedPointers() {
      if (this._trackedPointers === void 0) {
        this._trackedPointers = {};
      }
      return this._trackedPointers;
    },
    _trackedPointers: void 0
  };
  DisplayObject.mixin(interactiveTarget);
  var MOUSE_POINTER_ID = 1;
  var hitTestEvent = {
    target: null,
    data: {
      global: null
    }
  };
  var InteractionManager = function(_super) {
    __extends2(InteractionManager2, _super);
    function InteractionManager2(renderer, options) {
      var _this = _super.call(this) || this;
      options = options || {};
      _this.renderer = renderer;
      _this.autoPreventDefault = options.autoPreventDefault !== void 0 ? options.autoPreventDefault : true;
      _this.interactionFrequency = options.interactionFrequency || 10;
      _this.mouse = new InteractionData();
      _this.mouse.identifier = MOUSE_POINTER_ID;
      _this.mouse.global.set(-999999);
      _this.activeInteractionData = {};
      _this.activeInteractionData[MOUSE_POINTER_ID] = _this.mouse;
      _this.interactionDataPool = [];
      _this.eventData = new InteractionEvent();
      _this.interactionDOMElement = null;
      _this.moveWhenInside = false;
      _this.eventsAdded = false;
      _this.tickerAdded = false;
      _this.mouseOverRenderer = false;
      _this.supportsTouchEvents = "ontouchstart" in window;
      _this.supportsPointerEvents = !!window.PointerEvent;
      _this.onPointerUp = _this.onPointerUp.bind(_this);
      _this.processPointerUp = _this.processPointerUp.bind(_this);
      _this.onPointerCancel = _this.onPointerCancel.bind(_this);
      _this.processPointerCancel = _this.processPointerCancel.bind(_this);
      _this.onPointerDown = _this.onPointerDown.bind(_this);
      _this.processPointerDown = _this.processPointerDown.bind(_this);
      _this.onPointerMove = _this.onPointerMove.bind(_this);
      _this.processPointerMove = _this.processPointerMove.bind(_this);
      _this.onPointerOut = _this.onPointerOut.bind(_this);
      _this.processPointerOverOut = _this.processPointerOverOut.bind(_this);
      _this.onPointerOver = _this.onPointerOver.bind(_this);
      _this.cursorStyles = {
        default: "inherit",
        pointer: "pointer"
      };
      _this.currentCursorMode = null;
      _this.cursor = null;
      _this.resolution = 1;
      _this.delayedEvents = [];
      _this.search = new TreeSearch();
      _this._tempDisplayObject = new TemporaryDisplayObject();
      _this._useSystemTicker = options.useSystemTicker !== void 0 ? options.useSystemTicker : true;
      _this.setTargetElement(_this.renderer.view, _this.renderer.resolution);
      return _this;
    }
    Object.defineProperty(InteractionManager2.prototype, "useSystemTicker", {
      get: function() {
        return this._useSystemTicker;
      },
      set: function(useSystemTicker) {
        this._useSystemTicker = useSystemTicker;
        if (useSystemTicker) {
          this.addTickerListener();
        } else {
          this.removeTickerListener();
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(InteractionManager2.prototype, "lastObjectRendered", {
      get: function() {
        return this.renderer._lastObjectRendered || this._tempDisplayObject;
      },
      enumerable: false,
      configurable: true
    });
    InteractionManager2.prototype.hitTest = function(globalPoint, root) {
      hitTestEvent.target = null;
      hitTestEvent.data.global = globalPoint;
      if (!root) {
        root = this.lastObjectRendered;
      }
      this.processInteractive(hitTestEvent, root, null, true);
      return hitTestEvent.target;
    };
    InteractionManager2.prototype.setTargetElement = function(element, resolution) {
      if (resolution === void 0) {
        resolution = 1;
      }
      this.removeTickerListener();
      this.removeEvents();
      this.interactionDOMElement = element;
      this.resolution = resolution;
      this.addEvents();
      this.addTickerListener();
    };
    InteractionManager2.prototype.addTickerListener = function() {
      if (this.tickerAdded || !this.interactionDOMElement || !this._useSystemTicker) {
        return;
      }
      Ticker.system.add(this.tickerUpdate, this, UPDATE_PRIORITY.INTERACTION);
      this.tickerAdded = true;
    };
    InteractionManager2.prototype.removeTickerListener = function() {
      if (!this.tickerAdded) {
        return;
      }
      Ticker.system.remove(this.tickerUpdate, this);
      this.tickerAdded = false;
    };
    InteractionManager2.prototype.addEvents = function() {
      if (this.eventsAdded || !this.interactionDOMElement) {
        return;
      }
      var style = this.interactionDOMElement.style;
      if (window.navigator.msPointerEnabled) {
        style.msContentZooming = "none";
        style.msTouchAction = "none";
      } else if (this.supportsPointerEvents) {
        style.touchAction = "none";
      }
      if (this.supportsPointerEvents) {
        window.document.addEventListener("pointermove", this.onPointerMove, true);
        this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, true);
        this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, true);
        this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, true);
        window.addEventListener("pointercancel", this.onPointerCancel, true);
        window.addEventListener("pointerup", this.onPointerUp, true);
      } else {
        window.document.addEventListener("mousemove", this.onPointerMove, true);
        this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, true);
        this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, true);
        this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, true);
        window.addEventListener("mouseup", this.onPointerUp, true);
      }
      if (this.supportsTouchEvents) {
        this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, true);
        this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, true);
        this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, true);
        this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, true);
      }
      this.eventsAdded = true;
    };
    InteractionManager2.prototype.removeEvents = function() {
      if (!this.eventsAdded || !this.interactionDOMElement) {
        return;
      }
      var style = this.interactionDOMElement.style;
      if (window.navigator.msPointerEnabled) {
        style.msContentZooming = "";
        style.msTouchAction = "";
      } else if (this.supportsPointerEvents) {
        style.touchAction = "";
      }
      if (this.supportsPointerEvents) {
        window.document.removeEventListener("pointermove", this.onPointerMove, true);
        this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, true);
        this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, true);
        this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, true);
        window.removeEventListener("pointercancel", this.onPointerCancel, true);
        window.removeEventListener("pointerup", this.onPointerUp, true);
      } else {
        window.document.removeEventListener("mousemove", this.onPointerMove, true);
        this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, true);
        this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, true);
        this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, true);
        window.removeEventListener("mouseup", this.onPointerUp, true);
      }
      if (this.supportsTouchEvents) {
        this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, true);
        this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, true);
        this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, true);
        this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, true);
      }
      this.interactionDOMElement = null;
      this.eventsAdded = false;
    };
    InteractionManager2.prototype.tickerUpdate = function(deltaTime) {
      this._deltaTime += deltaTime;
      if (this._deltaTime < this.interactionFrequency) {
        return;
      }
      this._deltaTime = 0;
      this.update();
    };
    InteractionManager2.prototype.update = function() {
      if (!this.interactionDOMElement) {
        return;
      }
      if (this._didMove) {
        this._didMove = false;
        return;
      }
      this.cursor = null;
      for (var k in this.activeInteractionData) {
        if (this.activeInteractionData.hasOwnProperty(k)) {
          var interactionData = this.activeInteractionData[k];
          if (interactionData.originalEvent && interactionData.pointerType !== "touch") {
            var interactionEvent = this.configureInteractionEventForDOMEvent(this.eventData, interactionData.originalEvent, interactionData);
            this.processInteractive(interactionEvent, this.lastObjectRendered, this.processPointerOverOut, true);
          }
        }
      }
      this.setCursorMode(this.cursor);
    };
    InteractionManager2.prototype.setCursorMode = function(mode) {
      mode = mode || "default";
      if (this.currentCursorMode === mode) {
        return;
      }
      this.currentCursorMode = mode;
      var style = this.cursorStyles[mode];
      if (style) {
        switch (typeof style) {
          case "string":
            this.interactionDOMElement.style.cursor = style;
            break;
          case "function":
            style(mode);
            break;
          case "object":
            Object.assign(this.interactionDOMElement.style, style);
            break;
        }
      } else if (typeof mode === "string" && !Object.prototype.hasOwnProperty.call(this.cursorStyles, mode)) {
        this.interactionDOMElement.style.cursor = mode;
      }
    };
    InteractionManager2.prototype.dispatchEvent = function(displayObject, eventString, eventData) {
      if (!eventData.stopPropagationHint || displayObject === eventData.stopsPropagatingAt) {
        eventData.currentTarget = displayObject;
        eventData.type = eventString;
        displayObject.emit(eventString, eventData);
        if (displayObject[eventString]) {
          displayObject[eventString](eventData);
        }
      }
    };
    InteractionManager2.prototype.delayDispatchEvent = function(displayObject, eventString, eventData) {
      this.delayedEvents.push({displayObject, eventString, eventData});
    };
    InteractionManager2.prototype.mapPositionToPoint = function(point, x, y) {
      var rect;
      if (!this.interactionDOMElement.parentElement) {
        rect = {x: 0, y: 0, width: 0, height: 0};
      } else {
        rect = this.interactionDOMElement.getBoundingClientRect();
      }
      var resolutionMultiplier = 1 / this.resolution;
      point.x = (x - rect.left) * (this.interactionDOMElement.width / rect.width) * resolutionMultiplier;
      point.y = (y - rect.top) * (this.interactionDOMElement.height / rect.height) * resolutionMultiplier;
    };
    InteractionManager2.prototype.processInteractive = function(interactionEvent, displayObject, func, hitTest) {
      var hit = this.search.findHit(interactionEvent, displayObject, func, hitTest);
      var delayedEvents = this.delayedEvents;
      if (!delayedEvents.length) {
        return hit;
      }
      interactionEvent.stopPropagationHint = false;
      var delayedLen = delayedEvents.length;
      this.delayedEvents = [];
      for (var i = 0; i < delayedLen; i++) {
        var _a2 = delayedEvents[i], displayObject_1 = _a2.displayObject, eventString = _a2.eventString, eventData = _a2.eventData;
        if (eventData.stopsPropagatingAt === displayObject_1) {
          eventData.stopPropagationHint = true;
        }
        this.dispatchEvent(displayObject_1, eventString, eventData);
      }
      return hit;
    };
    InteractionManager2.prototype.onPointerDown = function(originalEvent) {
      if (this.supportsTouchEvents && originalEvent.pointerType === "touch") {
        return;
      }
      var events = this.normalizeToPointerData(originalEvent);
      if (this.autoPreventDefault && events[0].isNormalized) {
        var cancelable = originalEvent.cancelable || !("cancelable" in originalEvent);
        if (cancelable) {
          originalEvent.preventDefault();
        }
      }
      var eventLen = events.length;
      for (var i = 0; i < eventLen; i++) {
        var event = events[i];
        var interactionData = this.getInteractionDataForPointerId(event);
        var interactionEvent = this.configureInteractionEventForDOMEvent(this.eventData, event, interactionData);
        interactionEvent.data.originalEvent = originalEvent;
        this.processInteractive(interactionEvent, this.lastObjectRendered, this.processPointerDown, true);
        this.emit("pointerdown", interactionEvent);
        if (event.pointerType === "touch") {
          this.emit("touchstart", interactionEvent);
        } else if (event.pointerType === "mouse" || event.pointerType === "pen") {
          var isRightButton = event.button === 2;
          this.emit(isRightButton ? "rightdown" : "mousedown", this.eventData);
        }
      }
    };
    InteractionManager2.prototype.processPointerDown = function(interactionEvent, displayObject, hit) {
      var data = interactionEvent.data;
      var id = interactionEvent.data.identifier;
      if (hit) {
        if (!displayObject.trackedPointers[id]) {
          displayObject.trackedPointers[id] = new InteractionTrackingData(id);
        }
        this.dispatchEvent(displayObject, "pointerdown", interactionEvent);
        if (data.pointerType === "touch") {
          this.dispatchEvent(displayObject, "touchstart", interactionEvent);
        } else if (data.pointerType === "mouse" || data.pointerType === "pen") {
          var isRightButton = data.button === 2;
          if (isRightButton) {
            displayObject.trackedPointers[id].rightDown = true;
          } else {
            displayObject.trackedPointers[id].leftDown = true;
          }
          this.dispatchEvent(displayObject, isRightButton ? "rightdown" : "mousedown", interactionEvent);
        }
      }
    };
    InteractionManager2.prototype.onPointerComplete = function(originalEvent, cancelled, func) {
      var events = this.normalizeToPointerData(originalEvent);
      var eventLen = events.length;
      var eventAppend = originalEvent.target !== this.interactionDOMElement ? "outside" : "";
      for (var i = 0; i < eventLen; i++) {
        var event = events[i];
        var interactionData = this.getInteractionDataForPointerId(event);
        var interactionEvent = this.configureInteractionEventForDOMEvent(this.eventData, event, interactionData);
        interactionEvent.data.originalEvent = originalEvent;
        this.processInteractive(interactionEvent, this.lastObjectRendered, func, cancelled || !eventAppend);
        this.emit(cancelled ? "pointercancel" : "pointerup" + eventAppend, interactionEvent);
        if (event.pointerType === "mouse" || event.pointerType === "pen") {
          var isRightButton = event.button === 2;
          this.emit(isRightButton ? "rightup" + eventAppend : "mouseup" + eventAppend, interactionEvent);
        } else if (event.pointerType === "touch") {
          this.emit(cancelled ? "touchcancel" : "touchend" + eventAppend, interactionEvent);
          this.releaseInteractionDataForPointerId(event.pointerId);
        }
      }
    };
    InteractionManager2.prototype.onPointerCancel = function(event) {
      if (this.supportsTouchEvents && event.pointerType === "touch") {
        return;
      }
      this.onPointerComplete(event, true, this.processPointerCancel);
    };
    InteractionManager2.prototype.processPointerCancel = function(interactionEvent, displayObject) {
      var data = interactionEvent.data;
      var id = interactionEvent.data.identifier;
      if (displayObject.trackedPointers[id] !== void 0) {
        delete displayObject.trackedPointers[id];
        this.dispatchEvent(displayObject, "pointercancel", interactionEvent);
        if (data.pointerType === "touch") {
          this.dispatchEvent(displayObject, "touchcancel", interactionEvent);
        }
      }
    };
    InteractionManager2.prototype.onPointerUp = function(event) {
      if (this.supportsTouchEvents && event.pointerType === "touch") {
        return;
      }
      this.onPointerComplete(event, false, this.processPointerUp);
    };
    InteractionManager2.prototype.processPointerUp = function(interactionEvent, displayObject, hit) {
      var data = interactionEvent.data;
      var id = interactionEvent.data.identifier;
      var trackingData = displayObject.trackedPointers[id];
      var isTouch = data.pointerType === "touch";
      var isMouse = data.pointerType === "mouse" || data.pointerType === "pen";
      var isMouseTap = false;
      if (isMouse) {
        var isRightButton = data.button === 2;
        var flags = InteractionTrackingData.FLAGS;
        var test = isRightButton ? flags.RIGHT_DOWN : flags.LEFT_DOWN;
        var isDown = trackingData !== void 0 && trackingData.flags & test;
        if (hit) {
          this.dispatchEvent(displayObject, isRightButton ? "rightup" : "mouseup", interactionEvent);
          if (isDown) {
            this.dispatchEvent(displayObject, isRightButton ? "rightclick" : "click", interactionEvent);
            isMouseTap = true;
          }
        } else if (isDown) {
          this.dispatchEvent(displayObject, isRightButton ? "rightupoutside" : "mouseupoutside", interactionEvent);
        }
        if (trackingData) {
          if (isRightButton) {
            trackingData.rightDown = false;
          } else {
            trackingData.leftDown = false;
          }
        }
      }
      if (hit) {
        this.dispatchEvent(displayObject, "pointerup", interactionEvent);
        if (isTouch) {
          this.dispatchEvent(displayObject, "touchend", interactionEvent);
        }
        if (trackingData) {
          if (!isMouse || isMouseTap) {
            this.dispatchEvent(displayObject, "pointertap", interactionEvent);
          }
          if (isTouch) {
            this.dispatchEvent(displayObject, "tap", interactionEvent);
            trackingData.over = false;
          }
        }
      } else if (trackingData) {
        this.dispatchEvent(displayObject, "pointerupoutside", interactionEvent);
        if (isTouch) {
          this.dispatchEvent(displayObject, "touchendoutside", interactionEvent);
        }
      }
      if (trackingData && trackingData.none) {
        delete displayObject.trackedPointers[id];
      }
    };
    InteractionManager2.prototype.onPointerMove = function(originalEvent) {
      if (this.supportsTouchEvents && originalEvent.pointerType === "touch") {
        return;
      }
      var events = this.normalizeToPointerData(originalEvent);
      if (events[0].pointerType === "mouse" || events[0].pointerType === "pen") {
        this._didMove = true;
        this.cursor = null;
      }
      var eventLen = events.length;
      for (var i = 0; i < eventLen; i++) {
        var event = events[i];
        var interactionData = this.getInteractionDataForPointerId(event);
        var interactionEvent = this.configureInteractionEventForDOMEvent(this.eventData, event, interactionData);
        interactionEvent.data.originalEvent = originalEvent;
        this.processInteractive(interactionEvent, this.lastObjectRendered, this.processPointerMove, true);
        this.emit("pointermove", interactionEvent);
        if (event.pointerType === "touch") {
          this.emit("touchmove", interactionEvent);
        }
        if (event.pointerType === "mouse" || event.pointerType === "pen") {
          this.emit("mousemove", interactionEvent);
        }
      }
      if (events[0].pointerType === "mouse") {
        this.setCursorMode(this.cursor);
      }
    };
    InteractionManager2.prototype.processPointerMove = function(interactionEvent, displayObject, hit) {
      var data = interactionEvent.data;
      var isTouch = data.pointerType === "touch";
      var isMouse = data.pointerType === "mouse" || data.pointerType === "pen";
      if (isMouse) {
        this.processPointerOverOut(interactionEvent, displayObject, hit);
      }
      if (!this.moveWhenInside || hit) {
        this.dispatchEvent(displayObject, "pointermove", interactionEvent);
        if (isTouch) {
          this.dispatchEvent(displayObject, "touchmove", interactionEvent);
        }
        if (isMouse) {
          this.dispatchEvent(displayObject, "mousemove", interactionEvent);
        }
      }
    };
    InteractionManager2.prototype.onPointerOut = function(originalEvent) {
      if (this.supportsTouchEvents && originalEvent.pointerType === "touch") {
        return;
      }
      var events = this.normalizeToPointerData(originalEvent);
      var event = events[0];
      if (event.pointerType === "mouse") {
        this.mouseOverRenderer = false;
        this.setCursorMode(null);
      }
      var interactionData = this.getInteractionDataForPointerId(event);
      var interactionEvent = this.configureInteractionEventForDOMEvent(this.eventData, event, interactionData);
      interactionEvent.data.originalEvent = event;
      this.processInteractive(interactionEvent, this.lastObjectRendered, this.processPointerOverOut, false);
      this.emit("pointerout", interactionEvent);
      if (event.pointerType === "mouse" || event.pointerType === "pen") {
        this.emit("mouseout", interactionEvent);
      } else {
        this.releaseInteractionDataForPointerId(interactionData.identifier);
      }
    };
    InteractionManager2.prototype.processPointerOverOut = function(interactionEvent, displayObject, hit) {
      var data = interactionEvent.data;
      var id = interactionEvent.data.identifier;
      var isMouse = data.pointerType === "mouse" || data.pointerType === "pen";
      var trackingData = displayObject.trackedPointers[id];
      if (hit && !trackingData) {
        trackingData = displayObject.trackedPointers[id] = new InteractionTrackingData(id);
      }
      if (trackingData === void 0) {
        return;
      }
      if (hit && this.mouseOverRenderer) {
        if (!trackingData.over) {
          trackingData.over = true;
          this.delayDispatchEvent(displayObject, "pointerover", interactionEvent);
          if (isMouse) {
            this.delayDispatchEvent(displayObject, "mouseover", interactionEvent);
          }
        }
        if (isMouse && this.cursor === null) {
          this.cursor = displayObject.cursor;
        }
      } else if (trackingData.over) {
        trackingData.over = false;
        this.dispatchEvent(displayObject, "pointerout", this.eventData);
        if (isMouse) {
          this.dispatchEvent(displayObject, "mouseout", interactionEvent);
        }
        if (trackingData.none) {
          delete displayObject.trackedPointers[id];
        }
      }
    };
    InteractionManager2.prototype.onPointerOver = function(originalEvent) {
      var events = this.normalizeToPointerData(originalEvent);
      var event = events[0];
      var interactionData = this.getInteractionDataForPointerId(event);
      var interactionEvent = this.configureInteractionEventForDOMEvent(this.eventData, event, interactionData);
      interactionEvent.data.originalEvent = event;
      if (event.pointerType === "mouse") {
        this.mouseOverRenderer = true;
      }
      this.emit("pointerover", interactionEvent);
      if (event.pointerType === "mouse" || event.pointerType === "pen") {
        this.emit("mouseover", interactionEvent);
      }
    };
    InteractionManager2.prototype.getInteractionDataForPointerId = function(event) {
      var pointerId = event.pointerId;
      var interactionData;
      if (pointerId === MOUSE_POINTER_ID || event.pointerType === "mouse") {
        interactionData = this.mouse;
      } else if (this.activeInteractionData[pointerId]) {
        interactionData = this.activeInteractionData[pointerId];
      } else {
        interactionData = this.interactionDataPool.pop() || new InteractionData();
        interactionData.identifier = pointerId;
        this.activeInteractionData[pointerId] = interactionData;
      }
      interactionData.copyEvent(event);
      return interactionData;
    };
    InteractionManager2.prototype.releaseInteractionDataForPointerId = function(pointerId) {
      var interactionData = this.activeInteractionData[pointerId];
      if (interactionData) {
        delete this.activeInteractionData[pointerId];
        interactionData.reset();
        this.interactionDataPool.push(interactionData);
      }
    };
    InteractionManager2.prototype.configureInteractionEventForDOMEvent = function(interactionEvent, pointerEvent, interactionData) {
      interactionEvent.data = interactionData;
      this.mapPositionToPoint(interactionData.global, pointerEvent.clientX, pointerEvent.clientY);
      if (pointerEvent.pointerType === "touch") {
        pointerEvent.globalX = interactionData.global.x;
        pointerEvent.globalY = interactionData.global.y;
      }
      interactionData.originalEvent = pointerEvent;
      interactionEvent.reset();
      return interactionEvent;
    };
    InteractionManager2.prototype.normalizeToPointerData = function(event) {
      var normalizedEvents = [];
      if (this.supportsTouchEvents && event instanceof TouchEvent) {
        for (var i = 0, li = event.changedTouches.length; i < li; i++) {
          var touch = event.changedTouches[i];
          if (typeof touch.button === "undefined") {
            touch.button = event.touches.length ? 1 : 0;
          }
          if (typeof touch.buttons === "undefined") {
            touch.buttons = event.touches.length ? 1 : 0;
          }
          if (typeof touch.isPrimary === "undefined") {
            touch.isPrimary = event.touches.length === 1 && event.type === "touchstart";
          }
          if (typeof touch.width === "undefined") {
            touch.width = touch.radiusX || 1;
          }
          if (typeof touch.height === "undefined") {
            touch.height = touch.radiusY || 1;
          }
          if (typeof touch.tiltX === "undefined") {
            touch.tiltX = 0;
          }
          if (typeof touch.tiltY === "undefined") {
            touch.tiltY = 0;
          }
          if (typeof touch.pointerType === "undefined") {
            touch.pointerType = "touch";
          }
          if (typeof touch.pointerId === "undefined") {
            touch.pointerId = touch.identifier || 0;
          }
          if (typeof touch.pressure === "undefined") {
            touch.pressure = touch.force || 0.5;
          }
          if (typeof touch.twist === "undefined") {
            touch.twist = 0;
          }
          if (typeof touch.tangentialPressure === "undefined") {
            touch.tangentialPressure = 0;
          }
          if (typeof touch.layerX === "undefined") {
            touch.layerX = touch.offsetX = touch.clientX;
          }
          if (typeof touch.layerY === "undefined") {
            touch.layerY = touch.offsetY = touch.clientY;
          }
          touch.isNormalized = true;
          normalizedEvents.push(touch);
        }
      } else if (event instanceof MouseEvent && (!this.supportsPointerEvents || !(event instanceof window.PointerEvent))) {
        var tempEvent = event;
        if (typeof tempEvent.isPrimary === "undefined") {
          tempEvent.isPrimary = true;
        }
        if (typeof tempEvent.width === "undefined") {
          tempEvent.width = 1;
        }
        if (typeof tempEvent.height === "undefined") {
          tempEvent.height = 1;
        }
        if (typeof tempEvent.tiltX === "undefined") {
          tempEvent.tiltX = 0;
        }
        if (typeof tempEvent.tiltY === "undefined") {
          tempEvent.tiltY = 0;
        }
        if (typeof tempEvent.pointerType === "undefined") {
          tempEvent.pointerType = "mouse";
        }
        if (typeof tempEvent.pointerId === "undefined") {
          tempEvent.pointerId = MOUSE_POINTER_ID;
        }
        if (typeof tempEvent.pressure === "undefined") {
          tempEvent.pressure = 0.5;
        }
        if (typeof tempEvent.twist === "undefined") {
          tempEvent.twist = 0;
        }
        if (typeof tempEvent.tangentialPressure === "undefined") {
          tempEvent.tangentialPressure = 0;
        }
        tempEvent.isNormalized = true;
        normalizedEvents.push(tempEvent);
      } else {
        normalizedEvents.push(event);
      }
      return normalizedEvents;
    };
    InteractionManager2.prototype.destroy = function() {
      this.removeEvents();
      this.removeTickerListener();
      this.removeAllListeners();
      this.renderer = null;
      this.mouse = null;
      this.eventData = null;
      this.interactionDOMElement = null;
      this.onPointerDown = null;
      this.processPointerDown = null;
      this.onPointerUp = null;
      this.processPointerUp = null;
      this.onPointerCancel = null;
      this.processPointerCancel = null;
      this.onPointerMove = null;
      this.processPointerMove = null;
      this.onPointerOut = null;
      this.processPointerOverOut = null;
      this.onPointerOver = null;
      this.search = null;
    };
    return InteractionManager2;
  }(import_eventemitter3.default);

  // node_modules/@pixi/runner/lib/runner.es.js
  /*!
   * @pixi/runner - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/runner is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var Runner = function() {
    function Runner2(name) {
      this.items = [];
      this._name = name;
      this._aliasCount = 0;
    }
    Runner2.prototype.emit = function(a0, a1, a2, a3, a4, a5, a6, a7) {
      if (arguments.length > 8) {
        throw new Error("max arguments reached");
      }
      var _a2 = this, name = _a2.name, items = _a2.items;
      this._aliasCount++;
      for (var i = 0, len = items.length; i < len; i++) {
        items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);
      }
      if (items === this.items) {
        this._aliasCount--;
      }
      return this;
    };
    Runner2.prototype.ensureNonAliasedItems = function() {
      if (this._aliasCount > 0 && this.items.length > 1) {
        this._aliasCount = 0;
        this.items = this.items.slice(0);
      }
    };
    Runner2.prototype.add = function(item) {
      if (item[this._name]) {
        this.ensureNonAliasedItems();
        this.remove(item);
        this.items.push(item);
      }
      return this;
    };
    Runner2.prototype.remove = function(item) {
      var index4 = this.items.indexOf(item);
      if (index4 !== -1) {
        this.ensureNonAliasedItems();
        this.items.splice(index4, 1);
      }
      return this;
    };
    Runner2.prototype.contains = function(item) {
      return this.items.indexOf(item) !== -1;
    };
    Runner2.prototype.removeAll = function() {
      this.ensureNonAliasedItems();
      this.items.length = 0;
      return this;
    };
    Runner2.prototype.destroy = function() {
      this.removeAll();
      this.items = null;
      this._name = null;
    };
    Object.defineProperty(Runner2.prototype, "empty", {
      get: function() {
        return this.items.length === 0;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Runner2.prototype, "name", {
      get: function() {
        return this._name;
      },
      enumerable: false,
      configurable: true
    });
    return Runner2;
  }();
  Object.defineProperties(Runner.prototype, {
    dispatch: {value: Runner.prototype.emit},
    run: {value: Runner.prototype.emit}
  });

  // node_modules/@pixi/core/lib/core.es.js
  /*!
   * @pixi/core - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/core is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  settings.PREFER_ENV = isMobile2.any ? ENV.WEBGL : ENV.WEBGL2;
  settings.STRICT_TEXTURE_CACHE = false;
  var INSTALLED = [];
  function autoDetectResource(source, options) {
    if (!source) {
      return null;
    }
    var extension = "";
    if (typeof source === "string") {
      var result = /\.(\w{3,4})(?:$|\?|#)/i.exec(source);
      if (result) {
        extension = result[1].toLowerCase();
      }
    }
    for (var i = INSTALLED.length - 1; i >= 0; --i) {
      var ResourcePlugin = INSTALLED[i];
      if (ResourcePlugin.test && ResourcePlugin.test(source, extension)) {
        return new ResourcePlugin(source, options);
      }
    }
    throw new Error("Unrecognized source type to auto-detect Resource");
  }
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics3 = function(d, b) {
    extendStatics3 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics3(d, b);
  };
  function __extends3(d, b) {
    extendStatics3(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var Resource = function() {
    function Resource3(width, height) {
      if (width === void 0) {
        width = 0;
      }
      if (height === void 0) {
        height = 0;
      }
      this._width = width;
      this._height = height;
      this.destroyed = false;
      this.internal = false;
      this.onResize = new Runner("setRealSize");
      this.onUpdate = new Runner("update");
      this.onError = new Runner("onError");
    }
    Resource3.prototype.bind = function(baseTexture) {
      this.onResize.add(baseTexture);
      this.onUpdate.add(baseTexture);
      this.onError.add(baseTexture);
      if (this._width || this._height) {
        this.onResize.emit(this._width, this._height);
      }
    };
    Resource3.prototype.unbind = function(baseTexture) {
      this.onResize.remove(baseTexture);
      this.onUpdate.remove(baseTexture);
      this.onError.remove(baseTexture);
    };
    Resource3.prototype.resize = function(width, height) {
      if (width !== this._width || height !== this._height) {
        this._width = width;
        this._height = height;
        this.onResize.emit(width, height);
      }
    };
    Object.defineProperty(Resource3.prototype, "valid", {
      get: function() {
        return !!this._width && !!this._height;
      },
      enumerable: false,
      configurable: true
    });
    Resource3.prototype.update = function() {
      if (!this.destroyed) {
        this.onUpdate.emit();
      }
    };
    Resource3.prototype.load = function() {
      return Promise.resolve(this);
    };
    Object.defineProperty(Resource3.prototype, "width", {
      get: function() {
        return this._width;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Resource3.prototype, "height", {
      get: function() {
        return this._height;
      },
      enumerable: false,
      configurable: true
    });
    Resource3.prototype.style = function(_renderer, _baseTexture, _glTexture) {
      return false;
    };
    Resource3.prototype.dispose = function() {
    };
    Resource3.prototype.destroy = function() {
      if (!this.destroyed) {
        this.destroyed = true;
        this.dispose();
        this.onError.removeAll();
        this.onError = null;
        this.onResize.removeAll();
        this.onResize = null;
        this.onUpdate.removeAll();
        this.onUpdate = null;
      }
    };
    Resource3.test = function(_source, _extension) {
      return false;
    };
    return Resource3;
  }();
  var BufferResource = function(_super) {
    __extends3(BufferResource2, _super);
    function BufferResource2(source, options) {
      var _this = this;
      var _a2 = options || {}, width = _a2.width, height = _a2.height;
      if (!width || !height) {
        throw new Error("BufferResource width or height invalid");
      }
      _this = _super.call(this, width, height) || this;
      _this.data = source;
      return _this;
    }
    BufferResource2.prototype.upload = function(renderer, baseTexture, glTexture) {
      var gl = renderer.gl;
      gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, baseTexture.alphaMode === ALPHA_MODES.UNPACK);
      if (glTexture.width === baseTexture.width && glTexture.height === baseTexture.height) {
        gl.texSubImage2D(baseTexture.target, 0, 0, 0, baseTexture.width, baseTexture.height, baseTexture.format, baseTexture.type, this.data);
      } else {
        glTexture.width = baseTexture.width;
        glTexture.height = baseTexture.height;
        gl.texImage2D(baseTexture.target, 0, glTexture.internalFormat, baseTexture.width, baseTexture.height, 0, baseTexture.format, glTexture.type, this.data);
      }
      return true;
    };
    BufferResource2.prototype.dispose = function() {
      this.data = null;
    };
    BufferResource2.test = function(source) {
      return source instanceof Float32Array || source instanceof Uint8Array || source instanceof Uint32Array;
    };
    return BufferResource2;
  }(Resource);
  var defaultBufferOptions = {
    scaleMode: SCALE_MODES.NEAREST,
    format: FORMATS.RGBA,
    alphaMode: ALPHA_MODES.NPM
  };
  var BaseTexture = function(_super) {
    __extends3(BaseTexture2, _super);
    function BaseTexture2(resource, options) {
      if (resource === void 0) {
        resource = null;
      }
      if (options === void 0) {
        options = null;
      }
      var _this = _super.call(this) || this;
      options = options || {};
      var alphaMode = options.alphaMode, mipmap = options.mipmap, anisotropicLevel = options.anisotropicLevel, scaleMode = options.scaleMode, width = options.width, height = options.height, wrapMode = options.wrapMode, format = options.format, type = options.type, target = options.target, resolution = options.resolution, resourceOptions = options.resourceOptions;
      if (resource && !(resource instanceof Resource)) {
        resource = autoDetectResource(resource, resourceOptions);
        resource.internal = true;
      }
      _this.width = width || 0;
      _this.height = height || 0;
      _this.resolution = resolution || settings.RESOLUTION;
      _this.mipmap = mipmap !== void 0 ? mipmap : settings.MIPMAP_TEXTURES;
      _this.anisotropicLevel = anisotropicLevel !== void 0 ? anisotropicLevel : settings.ANISOTROPIC_LEVEL;
      _this.wrapMode = wrapMode || settings.WRAP_MODE;
      _this.scaleMode = scaleMode !== void 0 ? scaleMode : settings.SCALE_MODE;
      _this.format = format || FORMATS.RGBA;
      _this.type = type || TYPES.UNSIGNED_BYTE;
      _this.target = target || TARGETS.TEXTURE_2D;
      _this.alphaMode = alphaMode !== void 0 ? alphaMode : ALPHA_MODES.UNPACK;
      if (options.premultiplyAlpha !== void 0) {
        _this.premultiplyAlpha = options.premultiplyAlpha;
      }
      _this.uid = uid();
      _this.touched = 0;
      _this.isPowerOfTwo = false;
      _this._refreshPOT();
      _this._glTextures = {};
      _this.dirtyId = 0;
      _this.dirtyStyleId = 0;
      _this.cacheId = null;
      _this.valid = width > 0 && height > 0;
      _this.textureCacheIds = [];
      _this.destroyed = false;
      _this.resource = null;
      _this._batchEnabled = 0;
      _this._batchLocation = 0;
      _this.parentTextureArray = null;
      _this.setResource(resource);
      return _this;
    }
    Object.defineProperty(BaseTexture2.prototype, "realWidth", {
      get: function() {
        return Math.ceil(this.width * this.resolution - 1e-4);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BaseTexture2.prototype, "realHeight", {
      get: function() {
        return Math.ceil(this.height * this.resolution - 1e-4);
      },
      enumerable: false,
      configurable: true
    });
    BaseTexture2.prototype.setStyle = function(scaleMode, mipmap) {
      var dirty;
      if (scaleMode !== void 0 && scaleMode !== this.scaleMode) {
        this.scaleMode = scaleMode;
        dirty = true;
      }
      if (mipmap !== void 0 && mipmap !== this.mipmap) {
        this.mipmap = mipmap;
        dirty = true;
      }
      if (dirty) {
        this.dirtyStyleId++;
      }
      return this;
    };
    BaseTexture2.prototype.setSize = function(width, height, resolution) {
      this.resolution = resolution || this.resolution;
      this.width = width;
      this.height = height;
      this._refreshPOT();
      this.update();
      return this;
    };
    BaseTexture2.prototype.setRealSize = function(realWidth, realHeight, resolution) {
      this.resolution = resolution || this.resolution;
      this.width = realWidth / this.resolution;
      this.height = realHeight / this.resolution;
      this._refreshPOT();
      this.update();
      return this;
    };
    BaseTexture2.prototype._refreshPOT = function() {
      this.isPowerOfTwo = isPow2(this.realWidth) && isPow2(this.realHeight);
    };
    BaseTexture2.prototype.setResolution = function(resolution) {
      var oldResolution = this.resolution;
      if (oldResolution === resolution) {
        return this;
      }
      this.resolution = resolution;
      if (this.valid) {
        this.width = this.width * oldResolution / resolution;
        this.height = this.height * oldResolution / resolution;
        this.emit("update", this);
      }
      this._refreshPOT();
      return this;
    };
    BaseTexture2.prototype.setResource = function(resource) {
      if (this.resource === resource) {
        return this;
      }
      if (this.resource) {
        throw new Error("Resource can be set only once");
      }
      resource.bind(this);
      this.resource = resource;
      return this;
    };
    BaseTexture2.prototype.update = function() {
      if (!this.valid) {
        if (this.width > 0 && this.height > 0) {
          this.valid = true;
          this.emit("loaded", this);
          this.emit("update", this);
        }
      } else {
        this.dirtyId++;
        this.dirtyStyleId++;
        this.emit("update", this);
      }
    };
    BaseTexture2.prototype.onError = function(event) {
      this.emit("error", this, event);
    };
    BaseTexture2.prototype.destroy = function() {
      if (this.resource) {
        this.resource.unbind(this);
        if (this.resource.internal) {
          this.resource.destroy();
        }
        this.resource = null;
      }
      if (this.cacheId) {
        delete BaseTextureCache[this.cacheId];
        delete TextureCache[this.cacheId];
        this.cacheId = null;
      }
      this.dispose();
      BaseTexture2.removeFromCache(this);
      this.textureCacheIds = null;
      this.destroyed = true;
    };
    BaseTexture2.prototype.dispose = function() {
      this.emit("dispose", this);
    };
    BaseTexture2.prototype.castToBaseTexture = function() {
      return this;
    };
    BaseTexture2.from = function(source, options, strict) {
      if (strict === void 0) {
        strict = settings.STRICT_TEXTURE_CACHE;
      }
      var isFrame = typeof source === "string";
      var cacheId = null;
      if (isFrame) {
        cacheId = source;
      } else {
        if (!source._pixiId) {
          source._pixiId = "pixiid_" + uid();
        }
        cacheId = source._pixiId;
      }
      var baseTexture = BaseTextureCache[cacheId];
      if (isFrame && strict && !baseTexture) {
        throw new Error('The cacheId "' + cacheId + '" does not exist in BaseTextureCache.');
      }
      if (!baseTexture) {
        baseTexture = new BaseTexture2(source, options);
        baseTexture.cacheId = cacheId;
        BaseTexture2.addToCache(baseTexture, cacheId);
      }
      return baseTexture;
    };
    BaseTexture2.fromBuffer = function(buffer, width, height, options) {
      buffer = buffer || new Float32Array(width * height * 4);
      var resource = new BufferResource(buffer, {width, height});
      var type = buffer instanceof Float32Array ? TYPES.FLOAT : TYPES.UNSIGNED_BYTE;
      return new BaseTexture2(resource, Object.assign(defaultBufferOptions, options || {width, height, type}));
    };
    BaseTexture2.addToCache = function(baseTexture, id) {
      if (id) {
        if (baseTexture.textureCacheIds.indexOf(id) === -1) {
          baseTexture.textureCacheIds.push(id);
        }
        if (BaseTextureCache[id]) {
          console.warn("BaseTexture added to the cache with an id [" + id + "] that already had an entry");
        }
        BaseTextureCache[id] = baseTexture;
      }
    };
    BaseTexture2.removeFromCache = function(baseTexture) {
      if (typeof baseTexture === "string") {
        var baseTextureFromCache = BaseTextureCache[baseTexture];
        if (baseTextureFromCache) {
          var index4 = baseTextureFromCache.textureCacheIds.indexOf(baseTexture);
          if (index4 > -1) {
            baseTextureFromCache.textureCacheIds.splice(index4, 1);
          }
          delete BaseTextureCache[baseTexture];
          return baseTextureFromCache;
        }
      } else if (baseTexture && baseTexture.textureCacheIds) {
        for (var i = 0; i < baseTexture.textureCacheIds.length; ++i) {
          delete BaseTextureCache[baseTexture.textureCacheIds[i]];
        }
        baseTexture.textureCacheIds.length = 0;
        return baseTexture;
      }
      return null;
    };
    BaseTexture2._globalBatch = 0;
    return BaseTexture2;
  }(import_eventemitter3.default);
  var AbstractMultiResource = function(_super) {
    __extends3(AbstractMultiResource2, _super);
    function AbstractMultiResource2(length, options) {
      var _this = this;
      var _a2 = options || {}, width = _a2.width, height = _a2.height;
      _this = _super.call(this, width, height) || this;
      _this.items = [];
      _this.itemDirtyIds = [];
      for (var i = 0; i < length; i++) {
        var partTexture = new BaseTexture();
        _this.items.push(partTexture);
        _this.itemDirtyIds.push(-2);
      }
      _this.length = length;
      _this._load = null;
      _this.baseTexture = null;
      return _this;
    }
    AbstractMultiResource2.prototype.initFromArray = function(resources, options) {
      for (var i = 0; i < this.length; i++) {
        if (!resources[i]) {
          continue;
        }
        if (resources[i].castToBaseTexture) {
          this.addBaseTextureAt(resources[i].castToBaseTexture(), i);
        } else if (resources[i] instanceof Resource) {
          this.addResourceAt(resources[i], i);
        } else {
          this.addResourceAt(autoDetectResource(resources[i], options), i);
        }
      }
    };
    AbstractMultiResource2.prototype.dispose = function() {
      for (var i = 0, len = this.length; i < len; i++) {
        this.items[i].destroy();
      }
      this.items = null;
      this.itemDirtyIds = null;
      this._load = null;
    };
    AbstractMultiResource2.prototype.addResourceAt = function(resource, index4) {
      if (!this.items[index4]) {
        throw new Error("Index " + index4 + " is out of bounds");
      }
      if (resource.valid && !this.valid) {
        this.resize(resource.width, resource.height);
      }
      this.items[index4].setResource(resource);
      return this;
    };
    AbstractMultiResource2.prototype.bind = function(baseTexture) {
      if (this.baseTexture !== null) {
        throw new Error("Only one base texture per TextureArray is allowed");
      }
      _super.prototype.bind.call(this, baseTexture);
      for (var i = 0; i < this.length; i++) {
        this.items[i].parentTextureArray = baseTexture;
        this.items[i].on("update", baseTexture.update, baseTexture);
      }
    };
    AbstractMultiResource2.prototype.unbind = function(baseTexture) {
      _super.prototype.unbind.call(this, baseTexture);
      for (var i = 0; i < this.length; i++) {
        this.items[i].parentTextureArray = null;
        this.items[i].off("update", baseTexture.update, baseTexture);
      }
    };
    AbstractMultiResource2.prototype.load = function() {
      var _this = this;
      if (this._load) {
        return this._load;
      }
      var resources = this.items.map(function(item) {
        return item.resource;
      }).filter(function(item) {
        return item;
      });
      var promises = resources.map(function(item) {
        return item.load();
      });
      this._load = Promise.all(promises).then(function() {
        var _a2 = _this.items[0], realWidth = _a2.realWidth, realHeight = _a2.realHeight;
        _this.resize(realWidth, realHeight);
        return Promise.resolve(_this);
      });
      return this._load;
    };
    return AbstractMultiResource2;
  }(Resource);
  var ArrayResource = function(_super) {
    __extends3(ArrayResource2, _super);
    function ArrayResource2(source, options) {
      var _this = this;
      var _a2 = options || {}, width = _a2.width, height = _a2.height;
      var urls;
      var length;
      if (Array.isArray(source)) {
        urls = source;
        length = source.length;
      } else {
        length = source;
      }
      _this = _super.call(this, length, {width, height}) || this;
      if (urls) {
        _this.initFromArray(urls, options);
      }
      return _this;
    }
    ArrayResource2.prototype.addBaseTextureAt = function(baseTexture, index4) {
      if (baseTexture.resource) {
        this.addResourceAt(baseTexture.resource, index4);
      } else {
        throw new Error("ArrayResource does not support RenderTexture");
      }
      return this;
    };
    ArrayResource2.prototype.bind = function(baseTexture) {
      _super.prototype.bind.call(this, baseTexture);
      baseTexture.target = TARGETS.TEXTURE_2D_ARRAY;
    };
    ArrayResource2.prototype.upload = function(renderer, texture, glTexture) {
      var _a2 = this, length = _a2.length, itemDirtyIds = _a2.itemDirtyIds, items = _a2.items;
      var gl = renderer.gl;
      if (glTexture.dirtyId < 0) {
        gl.texImage3D(gl.TEXTURE_2D_ARRAY, 0, texture.format, this._width, this._height, length, 0, texture.format, texture.type, null);
      }
      for (var i = 0; i < length; i++) {
        var item = items[i];
        if (itemDirtyIds[i] < item.dirtyId) {
          itemDirtyIds[i] = item.dirtyId;
          if (item.valid) {
            gl.texSubImage3D(gl.TEXTURE_2D_ARRAY, 0, 0, 0, i, item.resource.width, item.resource.height, 1, texture.format, texture.type, item.resource.source);
          }
        }
      }
      return true;
    };
    return ArrayResource2;
  }(AbstractMultiResource);
  var BaseImageResource = function(_super) {
    __extends3(BaseImageResource2, _super);
    function BaseImageResource2(source) {
      var _this = this;
      var sourceAny = source;
      var width = sourceAny.naturalWidth || sourceAny.videoWidth || sourceAny.width;
      var height = sourceAny.naturalHeight || sourceAny.videoHeight || sourceAny.height;
      _this = _super.call(this, width, height) || this;
      _this.source = source;
      _this.noSubImage = false;
      return _this;
    }
    BaseImageResource2.crossOrigin = function(element, url, crossorigin) {
      if (crossorigin === void 0 && url.indexOf("data:") !== 0) {
        element.crossOrigin = determineCrossOrigin(url);
      } else if (crossorigin !== false) {
        element.crossOrigin = typeof crossorigin === "string" ? crossorigin : "anonymous";
      }
    };
    BaseImageResource2.prototype.upload = function(renderer, baseTexture, glTexture, source) {
      var gl = renderer.gl;
      var width = baseTexture.realWidth;
      var height = baseTexture.realHeight;
      source = source || this.source;
      gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, baseTexture.alphaMode === ALPHA_MODES.UNPACK);
      if (!this.noSubImage && baseTexture.target === gl.TEXTURE_2D && glTexture.width === width && glTexture.height === height) {
        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, baseTexture.format, baseTexture.type, source);
      } else {
        glTexture.width = width;
        glTexture.height = height;
        gl.texImage2D(baseTexture.target, 0, baseTexture.format, baseTexture.format, baseTexture.type, source);
      }
      return true;
    };
    BaseImageResource2.prototype.update = function() {
      if (this.destroyed) {
        return;
      }
      var source = this.source;
      var width = source.naturalWidth || source.videoWidth || source.width;
      var height = source.naturalHeight || source.videoHeight || source.height;
      this.resize(width, height);
      _super.prototype.update.call(this);
    };
    BaseImageResource2.prototype.dispose = function() {
      this.source = null;
    };
    return BaseImageResource2;
  }(Resource);
  var CanvasResource = function(_super) {
    __extends3(CanvasResource2, _super);
    function CanvasResource2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    CanvasResource2.test = function(source) {
      var OffscreenCanvas2 = window.OffscreenCanvas;
      if (OffscreenCanvas2 && source instanceof OffscreenCanvas2) {
        return true;
      }
      return source instanceof HTMLCanvasElement;
    };
    return CanvasResource2;
  }(BaseImageResource);
  var CubeResource = function(_super) {
    __extends3(CubeResource2, _super);
    function CubeResource2(source, options) {
      var _this = this;
      var _a2 = options || {}, width = _a2.width, height = _a2.height, autoLoad = _a2.autoLoad, linkBaseTexture = _a2.linkBaseTexture;
      if (source && source.length !== CubeResource2.SIDES) {
        throw new Error("Invalid length. Got " + source.length + ", expected 6");
      }
      _this = _super.call(this, 6, {width, height}) || this;
      for (var i = 0; i < CubeResource2.SIDES; i++) {
        _this.items[i].target = TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + i;
      }
      _this.linkBaseTexture = linkBaseTexture !== false;
      if (source) {
        _this.initFromArray(source, options);
      }
      if (autoLoad !== false) {
        _this.load();
      }
      return _this;
    }
    CubeResource2.prototype.bind = function(baseTexture) {
      _super.prototype.bind.call(this, baseTexture);
      baseTexture.target = TARGETS.TEXTURE_CUBE_MAP;
    };
    CubeResource2.prototype.addBaseTextureAt = function(baseTexture, index4, linkBaseTexture) {
      if (linkBaseTexture === void 0) {
        linkBaseTexture = this.linkBaseTexture;
      }
      if (!this.items[index4]) {
        throw new Error("Index " + index4 + " is out of bounds");
      }
      if (!this.linkBaseTexture || baseTexture.parentTextureArray || Object.keys(baseTexture._glTextures).length > 0) {
        if (baseTexture.resource) {
          this.addResourceAt(baseTexture.resource, index4);
        } else {
          throw new Error("CubeResource does not support copying of renderTexture.");
        }
      } else {
        baseTexture.target = TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + index4;
        baseTexture.parentTextureArray = this.baseTexture;
        this.items[index4] = baseTexture;
      }
      if (baseTexture.valid && !this.valid) {
        this.resize(baseTexture.realWidth, baseTexture.realHeight);
      }
      this.items[index4] = baseTexture;
      return this;
    };
    CubeResource2.prototype.upload = function(renderer, _baseTexture, glTexture) {
      var dirty = this.itemDirtyIds;
      for (var i = 0; i < CubeResource2.SIDES; i++) {
        var side = this.items[i];
        if (dirty[i] < side.dirtyId) {
          if (side.valid && side.resource) {
            side.resource.upload(renderer, side, glTexture);
            dirty[i] = side.dirtyId;
          } else if (dirty[i] < -1) {
            renderer.gl.texImage2D(side.target, 0, glTexture.internalFormat, _baseTexture.realWidth, _baseTexture.realHeight, 0, _baseTexture.format, glTexture.type, null);
            dirty[i] = -1;
          }
        }
      }
      return true;
    };
    CubeResource2.test = function(source) {
      return Array.isArray(source) && source.length === CubeResource2.SIDES;
    };
    CubeResource2.SIDES = 6;
    return CubeResource2;
  }(AbstractMultiResource);
  var ImageResource = function(_super) {
    __extends3(ImageResource2, _super);
    function ImageResource2(source, options) {
      var _this = this;
      options = options || {};
      if (!(source instanceof HTMLImageElement)) {
        var imageElement = new Image();
        BaseImageResource.crossOrigin(imageElement, source, options.crossorigin);
        imageElement.src = source;
        source = imageElement;
      }
      _this = _super.call(this, source) || this;
      if (!source.complete && !!_this._width && !!_this._height) {
        _this._width = 0;
        _this._height = 0;
      }
      _this.url = source.src;
      _this._process = null;
      _this.preserveBitmap = false;
      _this.createBitmap = (options.createBitmap !== void 0 ? options.createBitmap : settings.CREATE_IMAGE_BITMAP) && !!window.createImageBitmap;
      _this.alphaMode = typeof options.alphaMode === "number" ? options.alphaMode : null;
      if (options.premultiplyAlpha !== void 0) {
        _this.premultiplyAlpha = options.premultiplyAlpha;
      }
      _this.bitmap = null;
      _this._load = null;
      if (options.autoLoad !== false) {
        _this.load();
      }
      return _this;
    }
    ImageResource2.prototype.load = function(createBitmap) {
      var _this = this;
      if (this._load) {
        return this._load;
      }
      if (createBitmap !== void 0) {
        this.createBitmap = createBitmap;
      }
      this._load = new Promise(function(resolve, reject) {
        var source = _this.source;
        _this.url = source.src;
        var completed = function() {
          if (_this.destroyed) {
            return;
          }
          source.onload = null;
          source.onerror = null;
          _this.resize(source.width, source.height);
          _this._load = null;
          if (_this.createBitmap) {
            resolve(_this.process());
          } else {
            resolve(_this);
          }
        };
        if (source.complete && source.src) {
          completed();
        } else {
          source.onload = completed;
          source.onerror = function(event) {
            reject(event);
            _this.onError.emit(event);
          };
        }
      });
      return this._load;
    };
    ImageResource2.prototype.process = function() {
      var _this = this;
      var source = this.source;
      if (this._process !== null) {
        return this._process;
      }
      if (this.bitmap !== null || !window.createImageBitmap) {
        return Promise.resolve(this);
      }
      this._process = window.createImageBitmap(source, 0, 0, source.width, source.height, {
        premultiplyAlpha: this.alphaMode === ALPHA_MODES.UNPACK ? "premultiply" : "none"
      }).then(function(bitmap) {
        if (_this.destroyed) {
          return Promise.reject();
        }
        _this.bitmap = bitmap;
        _this.update();
        _this._process = null;
        return Promise.resolve(_this);
      });
      return this._process;
    };
    ImageResource2.prototype.upload = function(renderer, baseTexture, glTexture) {
      if (typeof this.alphaMode === "number") {
        baseTexture.alphaMode = this.alphaMode;
      }
      if (!this.createBitmap) {
        return _super.prototype.upload.call(this, renderer, baseTexture, glTexture);
      }
      if (!this.bitmap) {
        this.process();
        if (!this.bitmap) {
          return false;
        }
      }
      _super.prototype.upload.call(this, renderer, baseTexture, glTexture, this.bitmap);
      if (!this.preserveBitmap) {
        var flag = true;
        var glTextures = baseTexture._glTextures;
        for (var key in glTextures) {
          var otherTex = glTextures[key];
          if (otherTex !== glTexture && otherTex.dirtyId !== baseTexture.dirtyId) {
            flag = false;
            break;
          }
        }
        if (flag) {
          if (this.bitmap.close) {
            this.bitmap.close();
          }
          this.bitmap = null;
        }
      }
      return true;
    };
    ImageResource2.prototype.dispose = function() {
      this.source.onload = null;
      this.source.onerror = null;
      _super.prototype.dispose.call(this);
      if (this.bitmap) {
        this.bitmap.close();
        this.bitmap = null;
      }
      this._process = null;
      this._load = null;
    };
    ImageResource2.test = function(source) {
      return typeof source === "string" || source instanceof HTMLImageElement;
    };
    return ImageResource2;
  }(BaseImageResource);
  var SVGResource = function(_super) {
    __extends3(SVGResource2, _super);
    function SVGResource2(sourceBase64, options) {
      var _this = this;
      options = options || {};
      _this = _super.call(this, document.createElement("canvas")) || this;
      _this._width = 0;
      _this._height = 0;
      _this.svg = sourceBase64;
      _this.scale = options.scale || 1;
      _this._overrideWidth = options.width;
      _this._overrideHeight = options.height;
      _this._resolve = null;
      _this._crossorigin = options.crossorigin;
      _this._load = null;
      if (options.autoLoad !== false) {
        _this.load();
      }
      return _this;
    }
    SVGResource2.prototype.load = function() {
      var _this = this;
      if (this._load) {
        return this._load;
      }
      this._load = new Promise(function(resolve) {
        _this._resolve = function() {
          _this.resize(_this.source.width, _this.source.height);
          resolve(_this);
        };
        if (/^\<svg/.test(_this.svg.trim())) {
          if (!btoa) {
            throw new Error("Your browser doesn't support base64 conversions.");
          }
          _this.svg = "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(_this.svg)));
        }
        _this._loadSvg();
      });
      return this._load;
    };
    SVGResource2.prototype._loadSvg = function() {
      var _this = this;
      var tempImage = new Image();
      BaseImageResource.crossOrigin(tempImage, this.svg, this._crossorigin);
      tempImage.src = this.svg;
      tempImage.onerror = function(event) {
        if (!_this._resolve) {
          return;
        }
        tempImage.onerror = null;
        _this.onError.emit(event);
      };
      tempImage.onload = function() {
        if (!_this._resolve) {
          return;
        }
        var svgWidth = tempImage.width;
        var svgHeight = tempImage.height;
        if (!svgWidth || !svgHeight) {
          throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
        }
        var width = svgWidth * _this.scale;
        var height = svgHeight * _this.scale;
        if (_this._overrideWidth || _this._overrideHeight) {
          width = _this._overrideWidth || _this._overrideHeight / svgHeight * svgWidth;
          height = _this._overrideHeight || _this._overrideWidth / svgWidth * svgHeight;
        }
        width = Math.round(width);
        height = Math.round(height);
        var canvas2 = _this.source;
        canvas2.width = width;
        canvas2.height = height;
        canvas2._pixiId = "canvas_" + uid();
        canvas2.getContext("2d").drawImage(tempImage, 0, 0, svgWidth, svgHeight, 0, 0, width, height);
        _this._resolve();
        _this._resolve = null;
      };
    };
    SVGResource2.getSize = function(svgString) {
      var sizeMatch = SVGResource2.SVG_SIZE.exec(svgString);
      var size = {};
      if (sizeMatch) {
        size[sizeMatch[1]] = Math.round(parseFloat(sizeMatch[3]));
        size[sizeMatch[5]] = Math.round(parseFloat(sizeMatch[7]));
      }
      return size;
    };
    SVGResource2.prototype.dispose = function() {
      _super.prototype.dispose.call(this);
      this._resolve = null;
      this._crossorigin = null;
    };
    SVGResource2.test = function(source, extension) {
      return extension === "svg" || typeof source === "string" && /^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(source) || typeof source === "string" && source.indexOf("<svg") === 0;
    };
    SVGResource2.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;
    return SVGResource2;
  }(BaseImageResource);
  var VideoResource = function(_super) {
    __extends3(VideoResource2, _super);
    function VideoResource2(source, options) {
      var _this = this;
      options = options || {};
      if (!(source instanceof HTMLVideoElement)) {
        var videoElement = document.createElement("video");
        videoElement.setAttribute("preload", "auto");
        videoElement.setAttribute("webkit-playsinline", "");
        videoElement.setAttribute("playsinline", "");
        if (typeof source === "string") {
          source = [source];
        }
        var firstSrc = source[0].src || source[0];
        BaseImageResource.crossOrigin(videoElement, firstSrc, options.crossorigin);
        for (var i = 0; i < source.length; ++i) {
          var sourceElement = document.createElement("source");
          var _a2 = source[i], src = _a2.src, mime = _a2.mime;
          src = src || source[i];
          var baseSrc = src.split("?").shift().toLowerCase();
          var ext = baseSrc.substr(baseSrc.lastIndexOf(".") + 1);
          mime = mime || VideoResource2.MIME_TYPES[ext] || "video/" + ext;
          sourceElement.src = src;
          sourceElement.type = mime;
          videoElement.appendChild(sourceElement);
        }
        source = videoElement;
      }
      _this = _super.call(this, source) || this;
      _this.noSubImage = true;
      _this._autoUpdate = true;
      _this._isConnectedToTicker = false;
      _this._updateFPS = options.updateFPS || 0;
      _this._msToNextUpdate = 0;
      _this.autoPlay = options.autoPlay !== false;
      _this._load = null;
      _this._resolve = null;
      _this._onCanPlay = _this._onCanPlay.bind(_this);
      _this._onError = _this._onError.bind(_this);
      if (options.autoLoad !== false) {
        _this.load();
      }
      return _this;
    }
    VideoResource2.prototype.update = function(_deltaTime) {
      if (_deltaTime === void 0) {
        _deltaTime = 0;
      }
      if (!this.destroyed) {
        var elapsedMS = Ticker.shared.elapsedMS * this.source.playbackRate;
        this._msToNextUpdate = Math.floor(this._msToNextUpdate - elapsedMS);
        if (!this._updateFPS || this._msToNextUpdate <= 0) {
          _super.prototype.update.call(this);
          this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0;
        }
      }
    };
    VideoResource2.prototype.load = function() {
      var _this = this;
      if (this._load) {
        return this._load;
      }
      var source = this.source;
      if ((source.readyState === source.HAVE_ENOUGH_DATA || source.readyState === source.HAVE_FUTURE_DATA) && source.width && source.height) {
        source.complete = true;
      }
      source.addEventListener("play", this._onPlayStart.bind(this));
      source.addEventListener("pause", this._onPlayStop.bind(this));
      if (!this._isSourceReady()) {
        source.addEventListener("canplay", this._onCanPlay);
        source.addEventListener("canplaythrough", this._onCanPlay);
        source.addEventListener("error", this._onError, true);
      } else {
        this._onCanPlay();
      }
      this._load = new Promise(function(resolve) {
        if (_this.valid) {
          resolve(_this);
        } else {
          _this._resolve = resolve;
          source.load();
        }
      });
      return this._load;
    };
    VideoResource2.prototype._onError = function(event) {
      this.source.removeEventListener("error", this._onError, true);
      this.onError.emit(event);
    };
    VideoResource2.prototype._isSourcePlaying = function() {
      var source = this.source;
      return source.currentTime > 0 && source.paused === false && source.ended === false && source.readyState > 2;
    };
    VideoResource2.prototype._isSourceReady = function() {
      var source = this.source;
      return source.readyState === 3 || source.readyState === 4;
    };
    VideoResource2.prototype._onPlayStart = function() {
      if (!this.valid) {
        this._onCanPlay();
      }
      if (this.autoUpdate && !this._isConnectedToTicker) {
        Ticker.shared.add(this.update, this);
        this._isConnectedToTicker = true;
      }
    };
    VideoResource2.prototype._onPlayStop = function() {
      if (this._isConnectedToTicker) {
        Ticker.shared.remove(this.update, this);
        this._isConnectedToTicker = false;
      }
    };
    VideoResource2.prototype._onCanPlay = function() {
      var source = this.source;
      source.removeEventListener("canplay", this._onCanPlay);
      source.removeEventListener("canplaythrough", this._onCanPlay);
      var valid = this.valid;
      this.resize(source.videoWidth, source.videoHeight);
      if (!valid && this._resolve) {
        this._resolve(this);
        this._resolve = null;
      }
      if (this._isSourcePlaying()) {
        this._onPlayStart();
      } else if (this.autoPlay) {
        source.play();
      }
    };
    VideoResource2.prototype.dispose = function() {
      if (this._isConnectedToTicker) {
        Ticker.shared.remove(this.update, this);
      }
      var source = this.source;
      if (source) {
        source.removeEventListener("error", this._onError, true);
        source.pause();
        source.src = "";
        source.load();
      }
      _super.prototype.dispose.call(this);
    };
    Object.defineProperty(VideoResource2.prototype, "autoUpdate", {
      get: function() {
        return this._autoUpdate;
      },
      set: function(value) {
        if (value !== this._autoUpdate) {
          this._autoUpdate = value;
          if (!this._autoUpdate && this._isConnectedToTicker) {
            Ticker.shared.remove(this.update, this);
            this._isConnectedToTicker = false;
          } else if (this._autoUpdate && !this._isConnectedToTicker && this._isSourcePlaying()) {
            Ticker.shared.add(this.update, this);
            this._isConnectedToTicker = true;
          }
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(VideoResource2.prototype, "updateFPS", {
      get: function() {
        return this._updateFPS;
      },
      set: function(value) {
        if (value !== this._updateFPS) {
          this._updateFPS = value;
        }
      },
      enumerable: false,
      configurable: true
    });
    VideoResource2.test = function(source, extension) {
      return source instanceof HTMLVideoElement || VideoResource2.TYPES.indexOf(extension) > -1;
    };
    VideoResource2.TYPES = ["mp4", "m4v", "webm", "ogg", "ogv", "h264", "avi", "mov"];
    VideoResource2.MIME_TYPES = {
      ogv: "video/ogg",
      mov: "video/quicktime",
      m4v: "video/mp4"
    };
    return VideoResource2;
  }(BaseImageResource);
  var ImageBitmapResource = function(_super) {
    __extends3(ImageBitmapResource2, _super);
    function ImageBitmapResource2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ImageBitmapResource2.test = function(source) {
      return !!window.createImageBitmap && source instanceof ImageBitmap;
    };
    return ImageBitmapResource2;
  }(BaseImageResource);
  INSTALLED.push(ImageResource, ImageBitmapResource, CanvasResource, VideoResource, SVGResource, BufferResource, CubeResource, ArrayResource);
  var index = {
    Resource,
    BaseImageResource,
    INSTALLED,
    autoDetectResource,
    AbstractMultiResource,
    ArrayResource,
    BufferResource,
    CanvasResource,
    CubeResource,
    ImageResource,
    SVGResource,
    VideoResource,
    ImageBitmapResource
  };
  var System = function() {
    function System2(renderer) {
      this.renderer = renderer;
    }
    System2.prototype.destroy = function() {
      this.renderer = null;
    };
    return System2;
  }();
  var DepthResource = function(_super) {
    __extends3(DepthResource2, _super);
    function DepthResource2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    DepthResource2.prototype.upload = function(renderer, baseTexture, glTexture) {
      var gl = renderer.gl;
      gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, baseTexture.alphaMode === ALPHA_MODES.UNPACK);
      if (glTexture.width === baseTexture.width && glTexture.height === baseTexture.height) {
        gl.texSubImage2D(baseTexture.target, 0, 0, 0, baseTexture.width, baseTexture.height, baseTexture.format, baseTexture.type, this.data);
      } else {
        glTexture.width = baseTexture.width;
        glTexture.height = baseTexture.height;
        gl.texImage2D(baseTexture.target, 0, renderer.context.webGLVersion === 1 ? gl.DEPTH_COMPONENT : gl.DEPTH_COMPONENT16, baseTexture.width, baseTexture.height, 0, baseTexture.format, baseTexture.type, this.data);
      }
      return true;
    };
    return DepthResource2;
  }(BufferResource);
  var Framebuffer = function() {
    function Framebuffer2(width, height) {
      this.width = Math.ceil(width || 100);
      this.height = Math.ceil(height || 100);
      this.stencil = false;
      this.depth = false;
      this.dirtyId = 0;
      this.dirtyFormat = 0;
      this.dirtySize = 0;
      this.depthTexture = null;
      this.colorTextures = [];
      this.glFramebuffers = {};
      this.disposeRunner = new Runner("disposeFramebuffer");
      this.multisample = MSAA_QUALITY.NONE;
    }
    Object.defineProperty(Framebuffer2.prototype, "colorTexture", {
      get: function() {
        return this.colorTextures[0];
      },
      enumerable: false,
      configurable: true
    });
    Framebuffer2.prototype.addColorTexture = function(index4, texture) {
      if (index4 === void 0) {
        index4 = 0;
      }
      this.colorTextures[index4] = texture || new BaseTexture(null, {
        scaleMode: SCALE_MODES.NEAREST,
        resolution: 1,
        mipmap: MIPMAP_MODES.OFF,
        width: this.width,
        height: this.height
      });
      this.dirtyId++;
      this.dirtyFormat++;
      return this;
    };
    Framebuffer2.prototype.addDepthTexture = function(texture) {
      this.depthTexture = texture || new BaseTexture(new DepthResource(null, {width: this.width, height: this.height}), {
        scaleMode: SCALE_MODES.NEAREST,
        resolution: 1,
        width: this.width,
        height: this.height,
        mipmap: MIPMAP_MODES.OFF,
        format: FORMATS.DEPTH_COMPONENT,
        type: TYPES.UNSIGNED_SHORT
      });
      this.dirtyId++;
      this.dirtyFormat++;
      return this;
    };
    Framebuffer2.prototype.enableDepth = function() {
      this.depth = true;
      this.dirtyId++;
      this.dirtyFormat++;
      return this;
    };
    Framebuffer2.prototype.enableStencil = function() {
      this.stencil = true;
      this.dirtyId++;
      this.dirtyFormat++;
      return this;
    };
    Framebuffer2.prototype.resize = function(width, height) {
      width = Math.ceil(width);
      height = Math.ceil(height);
      if (width === this.width && height === this.height) {
        return;
      }
      this.width = width;
      this.height = height;
      this.dirtyId++;
      this.dirtySize++;
      for (var i = 0; i < this.colorTextures.length; i++) {
        var texture = this.colorTextures[i];
        var resolution = texture.resolution;
        texture.setSize(width / resolution, height / resolution);
      }
      if (this.depthTexture) {
        var resolution = this.depthTexture.resolution;
        this.depthTexture.setSize(width / resolution, height / resolution);
      }
    };
    Framebuffer2.prototype.dispose = function() {
      this.disposeRunner.emit(this, false);
    };
    Framebuffer2.prototype.destroyDepthTexture = function() {
      if (this.depthTexture) {
        this.depthTexture.destroy();
        this.depthTexture = null;
        ++this.dirtyId;
        ++this.dirtyFormat;
      }
    };
    return Framebuffer2;
  }();
  var BaseRenderTexture = function(_super) {
    __extends3(BaseRenderTexture2, _super);
    function BaseRenderTexture2(options) {
      var _this = this;
      if (typeof options === "number") {
        var width_1 = arguments[0];
        var height_1 = arguments[1];
        var scaleMode = arguments[2];
        var resolution = arguments[3];
        options = {width: width_1, height: height_1, scaleMode, resolution};
      }
      _this = _super.call(this, null, options) || this;
      var _a2 = options || {}, width = _a2.width, height = _a2.height;
      _this.mipmap = 0;
      _this.width = Math.ceil(width) || 100;
      _this.height = Math.ceil(height) || 100;
      _this.valid = true;
      _this.clearColor = [0, 0, 0, 0];
      _this.framebuffer = new Framebuffer(_this.width * _this.resolution, _this.height * _this.resolution).addColorTexture(0, _this);
      _this.maskStack = [];
      _this.filterStack = [{}];
      return _this;
    }
    BaseRenderTexture2.prototype.resize = function(width, height) {
      width = Math.ceil(width);
      height = Math.ceil(height);
      this.framebuffer.resize(width * this.resolution, height * this.resolution);
    };
    BaseRenderTexture2.prototype.dispose = function() {
      this.framebuffer.dispose();
      _super.prototype.dispose.call(this);
    };
    BaseRenderTexture2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      this.framebuffer.destroyDepthTexture();
      this.framebuffer = null;
    };
    return BaseRenderTexture2;
  }(BaseTexture);
  var TextureUvs = function() {
    function TextureUvs2() {
      this.x0 = 0;
      this.y0 = 0;
      this.x1 = 1;
      this.y1 = 0;
      this.x2 = 1;
      this.y2 = 1;
      this.x3 = 0;
      this.y3 = 1;
      this.uvsFloat32 = new Float32Array(8);
    }
    TextureUvs2.prototype.set = function(frame, baseFrame, rotate) {
      var tw = baseFrame.width;
      var th = baseFrame.height;
      if (rotate) {
        var w2 = frame.width / 2 / tw;
        var h2 = frame.height / 2 / th;
        var cX = frame.x / tw + w2;
        var cY = frame.y / th + h2;
        rotate = groupD8.add(rotate, groupD8.NW);
        this.x0 = cX + w2 * groupD8.uX(rotate);
        this.y0 = cY + h2 * groupD8.uY(rotate);
        rotate = groupD8.add(rotate, 2);
        this.x1 = cX + w2 * groupD8.uX(rotate);
        this.y1 = cY + h2 * groupD8.uY(rotate);
        rotate = groupD8.add(rotate, 2);
        this.x2 = cX + w2 * groupD8.uX(rotate);
        this.y2 = cY + h2 * groupD8.uY(rotate);
        rotate = groupD8.add(rotate, 2);
        this.x3 = cX + w2 * groupD8.uX(rotate);
        this.y3 = cY + h2 * groupD8.uY(rotate);
      } else {
        this.x0 = frame.x / tw;
        this.y0 = frame.y / th;
        this.x1 = (frame.x + frame.width) / tw;
        this.y1 = frame.y / th;
        this.x2 = (frame.x + frame.width) / tw;
        this.y2 = (frame.y + frame.height) / th;
        this.x3 = frame.x / tw;
        this.y3 = (frame.y + frame.height) / th;
      }
      this.uvsFloat32[0] = this.x0;
      this.uvsFloat32[1] = this.y0;
      this.uvsFloat32[2] = this.x1;
      this.uvsFloat32[3] = this.y1;
      this.uvsFloat32[4] = this.x2;
      this.uvsFloat32[5] = this.y2;
      this.uvsFloat32[6] = this.x3;
      this.uvsFloat32[7] = this.y3;
    };
    return TextureUvs2;
  }();
  var DEFAULT_UVS = new TextureUvs();
  var Texture = function(_super) {
    __extends3(Texture2, _super);
    function Texture2(baseTexture, frame, orig, trim, rotate, anchor) {
      var _this = _super.call(this) || this;
      _this.noFrame = false;
      if (!frame) {
        _this.noFrame = true;
        frame = new Rectangle(0, 0, 1, 1);
      }
      if (baseTexture instanceof Texture2) {
        baseTexture = baseTexture.baseTexture;
      }
      _this.baseTexture = baseTexture;
      _this._frame = frame;
      _this.trim = trim;
      _this.valid = false;
      _this._uvs = DEFAULT_UVS;
      _this.uvMatrix = null;
      _this.orig = orig || frame;
      _this._rotate = Number(rotate || 0);
      if (rotate === true) {
        _this._rotate = 2;
      } else if (_this._rotate % 2 !== 0) {
        throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");
      }
      _this.defaultAnchor = anchor ? new Point(anchor.x, anchor.y) : new Point(0, 0);
      _this._updateID = 0;
      _this.textureCacheIds = [];
      if (!baseTexture.valid) {
        baseTexture.once("loaded", _this.onBaseTextureUpdated, _this);
      } else if (_this.noFrame) {
        if (baseTexture.valid) {
          _this.onBaseTextureUpdated(baseTexture);
        }
      } else {
        _this.frame = frame;
      }
      if (_this.noFrame) {
        baseTexture.on("update", _this.onBaseTextureUpdated, _this);
      }
      return _this;
    }
    Texture2.prototype.update = function() {
      if (this.baseTexture.resource) {
        this.baseTexture.resource.update();
      }
    };
    Texture2.prototype.onBaseTextureUpdated = function(baseTexture) {
      if (this.noFrame) {
        if (!this.baseTexture.valid) {
          return;
        }
        this._frame.width = baseTexture.width;
        this._frame.height = baseTexture.height;
        this.valid = true;
        this.updateUvs();
      } else {
        this.frame = this._frame;
      }
      this.emit("update", this);
    };
    Texture2.prototype.destroy = function(destroyBase) {
      if (this.baseTexture) {
        if (destroyBase) {
          var resource = this.baseTexture;
          if (resource && resource.url && TextureCache[resource.url]) {
            Texture2.removeFromCache(resource.url);
          }
          this.baseTexture.destroy();
        }
        this.baseTexture.off("loaded", this.onBaseTextureUpdated, this);
        this.baseTexture.off("update", this.onBaseTextureUpdated, this);
        this.baseTexture = null;
      }
      this._frame = null;
      this._uvs = null;
      this.trim = null;
      this.orig = null;
      this.valid = false;
      Texture2.removeFromCache(this);
      this.textureCacheIds = null;
    };
    Texture2.prototype.clone = function() {
      return new Texture2(this.baseTexture, this.frame.clone(), this.orig.clone(), this.trim && this.trim.clone(), this.rotate, this.defaultAnchor);
    };
    Texture2.prototype.updateUvs = function() {
      if (this._uvs === DEFAULT_UVS) {
        this._uvs = new TextureUvs();
      }
      this._uvs.set(this._frame, this.baseTexture, this.rotate);
      this._updateID++;
    };
    Texture2.from = function(source, options, strict) {
      if (options === void 0) {
        options = {};
      }
      if (strict === void 0) {
        strict = settings.STRICT_TEXTURE_CACHE;
      }
      var isFrame = typeof source === "string";
      var cacheId = null;
      if (isFrame) {
        cacheId = source;
      } else {
        if (!source._pixiId) {
          source._pixiId = "pixiid_" + uid();
        }
        cacheId = source._pixiId;
      }
      var texture = TextureCache[cacheId];
      if (isFrame && strict && !texture) {
        throw new Error('The cacheId "' + cacheId + '" does not exist in TextureCache.');
      }
      if (!texture) {
        if (!options.resolution) {
          options.resolution = getResolutionOfUrl(source);
        }
        texture = new Texture2(new BaseTexture(source, options));
        texture.baseTexture.cacheId = cacheId;
        BaseTexture.addToCache(texture.baseTexture, cacheId);
        Texture2.addToCache(texture, cacheId);
      }
      return texture;
    };
    Texture2.fromURL = function(url, options) {
      var resourceOptions = Object.assign({autoLoad: false}, options === null || options === void 0 ? void 0 : options.resourceOptions);
      var texture = Texture2.from(url, Object.assign({resourceOptions}, options), false);
      var resource = texture.baseTexture.resource;
      if (texture.baseTexture.valid) {
        return Promise.resolve(texture);
      }
      return resource.load().then(function() {
        return Promise.resolve(texture);
      });
    };
    Texture2.fromBuffer = function(buffer, width, height, options) {
      return new Texture2(BaseTexture.fromBuffer(buffer, width, height, options));
    };
    Texture2.fromLoader = function(source, imageUrl, name) {
      var resource = new ImageResource(source);
      resource.url = imageUrl;
      var baseTexture = new BaseTexture(resource, {
        scaleMode: settings.SCALE_MODE,
        resolution: getResolutionOfUrl(imageUrl)
      });
      var texture = new Texture2(baseTexture);
      if (!name) {
        name = imageUrl;
      }
      BaseTexture.addToCache(texture.baseTexture, name);
      Texture2.addToCache(texture, name);
      if (name !== imageUrl) {
        BaseTexture.addToCache(texture.baseTexture, imageUrl);
        Texture2.addToCache(texture, imageUrl);
      }
      return texture;
    };
    Texture2.addToCache = function(texture, id) {
      if (id) {
        if (texture.textureCacheIds.indexOf(id) === -1) {
          texture.textureCacheIds.push(id);
        }
        if (TextureCache[id]) {
          console.warn("Texture added to the cache with an id [" + id + "] that already had an entry");
        }
        TextureCache[id] = texture;
      }
    };
    Texture2.removeFromCache = function(texture) {
      if (typeof texture === "string") {
        var textureFromCache = TextureCache[texture];
        if (textureFromCache) {
          var index4 = textureFromCache.textureCacheIds.indexOf(texture);
          if (index4 > -1) {
            textureFromCache.textureCacheIds.splice(index4, 1);
          }
          delete TextureCache[texture];
          return textureFromCache;
        }
      } else if (texture && texture.textureCacheIds) {
        for (var i = 0; i < texture.textureCacheIds.length; ++i) {
          if (TextureCache[texture.textureCacheIds[i]] === texture) {
            delete TextureCache[texture.textureCacheIds[i]];
          }
        }
        texture.textureCacheIds.length = 0;
        return texture;
      }
      return null;
    };
    Object.defineProperty(Texture2.prototype, "resolution", {
      get: function() {
        return this.baseTexture.resolution;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Texture2.prototype, "frame", {
      get: function() {
        return this._frame;
      },
      set: function(frame) {
        this._frame = frame;
        this.noFrame = false;
        var x = frame.x, y = frame.y, width = frame.width, height = frame.height;
        var xNotFit = x + width > this.baseTexture.width;
        var yNotFit = y + height > this.baseTexture.height;
        if (xNotFit || yNotFit) {
          var relationship = xNotFit && yNotFit ? "and" : "or";
          var errorX = "X: " + x + " + " + width + " = " + (x + width) + " > " + this.baseTexture.width;
          var errorY = "Y: " + y + " + " + height + " = " + (y + height) + " > " + this.baseTexture.height;
          throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + (errorX + " " + relationship + " " + errorY));
        }
        this.valid = width && height && this.baseTexture.valid;
        if (!this.trim && !this.rotate) {
          this.orig = frame;
        }
        if (this.valid) {
          this.updateUvs();
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Texture2.prototype, "rotate", {
      get: function() {
        return this._rotate;
      },
      set: function(rotate) {
        this._rotate = rotate;
        if (this.valid) {
          this.updateUvs();
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Texture2.prototype, "width", {
      get: function() {
        return this.orig.width;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Texture2.prototype, "height", {
      get: function() {
        return this.orig.height;
      },
      enumerable: false,
      configurable: true
    });
    Texture2.prototype.castToBaseTexture = function() {
      return this.baseTexture;
    };
    return Texture2;
  }(import_eventemitter3.default);
  function createWhiteTexture() {
    var canvas2 = document.createElement("canvas");
    canvas2.width = 16;
    canvas2.height = 16;
    var context2 = canvas2.getContext("2d");
    context2.fillStyle = "white";
    context2.fillRect(0, 0, 16, 16);
    return new Texture(new BaseTexture(new CanvasResource(canvas2)));
  }
  function removeAllHandlers(tex) {
    tex.destroy = function _emptyDestroy() {
    };
    tex.on = function _emptyOn() {
    };
    tex.once = function _emptyOnce() {
    };
    tex.emit = function _emptyEmit() {
    };
  }
  Texture.EMPTY = new Texture(new BaseTexture());
  removeAllHandlers(Texture.EMPTY);
  removeAllHandlers(Texture.EMPTY.baseTexture);
  Texture.WHITE = createWhiteTexture();
  removeAllHandlers(Texture.WHITE);
  removeAllHandlers(Texture.WHITE.baseTexture);
  var RenderTexture = function(_super) {
    __extends3(RenderTexture2, _super);
    function RenderTexture2(baseRenderTexture, frame) {
      var _this = this;
      var _legacyRenderer = null;
      if (!(baseRenderTexture instanceof BaseRenderTexture)) {
        var width = arguments[1];
        var height = arguments[2];
        var scaleMode = arguments[3];
        var resolution = arguments[4];
        console.warn("Please use RenderTexture.create(" + width + ", " + height + ") instead of the ctor directly.");
        _legacyRenderer = arguments[0];
        frame = null;
        baseRenderTexture = new BaseRenderTexture({
          width,
          height,
          scaleMode,
          resolution
        });
      }
      _this = _super.call(this, baseRenderTexture, frame) || this;
      _this.legacyRenderer = _legacyRenderer;
      _this.valid = true;
      _this.filterFrame = null;
      _this.filterPoolKey = null;
      _this.updateUvs();
      return _this;
    }
    Object.defineProperty(RenderTexture2.prototype, "framebuffer", {
      get: function() {
        return this.baseTexture.framebuffer;
      },
      enumerable: false,
      configurable: true
    });
    RenderTexture2.prototype.resize = function(width, height, resizeBaseTexture) {
      if (resizeBaseTexture === void 0) {
        resizeBaseTexture = true;
      }
      width = Math.ceil(width);
      height = Math.ceil(height);
      this.valid = width > 0 && height > 0;
      this._frame.width = this.orig.width = width;
      this._frame.height = this.orig.height = height;
      if (resizeBaseTexture) {
        this.baseTexture.resize(width, height);
      }
      this.updateUvs();
    };
    RenderTexture2.prototype.setResolution = function(resolution) {
      var baseTexture = this.baseTexture;
      if (baseTexture.resolution === resolution) {
        return;
      }
      baseTexture.setResolution(resolution);
      this.resize(baseTexture.width, baseTexture.height, false);
    };
    RenderTexture2.create = function(options) {
      if (typeof options === "number") {
        options = {
          width: options,
          height: arguments[1],
          scaleMode: arguments[2],
          resolution: arguments[3]
        };
      }
      return new RenderTexture2(new BaseRenderTexture(options));
    };
    return RenderTexture2;
  }(Texture);
  var RenderTexturePool = function() {
    function RenderTexturePool2(textureOptions) {
      this.texturePool = {};
      this.textureOptions = textureOptions || {};
      this.enableFullScreen = false;
      this._pixelsWidth = 0;
      this._pixelsHeight = 0;
    }
    RenderTexturePool2.prototype.createTexture = function(realWidth, realHeight) {
      var baseRenderTexture = new BaseRenderTexture(Object.assign({
        width: realWidth,
        height: realHeight,
        resolution: 1
      }, this.textureOptions));
      return new RenderTexture(baseRenderTexture);
    };
    RenderTexturePool2.prototype.getOptimalTexture = function(minWidth, minHeight, resolution) {
      if (resolution === void 0) {
        resolution = 1;
      }
      var key = RenderTexturePool2.SCREEN_KEY;
      minWidth *= resolution;
      minHeight *= resolution;
      if (!this.enableFullScreen || minWidth !== this._pixelsWidth || minHeight !== this._pixelsHeight) {
        minWidth = nextPow2(minWidth);
        minHeight = nextPow2(minHeight);
        key = (minWidth & 65535) << 16 | minHeight & 65535;
      }
      if (!this.texturePool[key]) {
        this.texturePool[key] = [];
      }
      var renderTexture = this.texturePool[key].pop();
      if (!renderTexture) {
        renderTexture = this.createTexture(minWidth, minHeight);
      }
      renderTexture.filterPoolKey = key;
      renderTexture.setResolution(resolution);
      return renderTexture;
    };
    RenderTexturePool2.prototype.getFilterTexture = function(input, resolution) {
      var filterTexture = this.getOptimalTexture(input.width, input.height, resolution || input.resolution);
      filterTexture.filterFrame = input.filterFrame;
      return filterTexture;
    };
    RenderTexturePool2.prototype.returnTexture = function(renderTexture) {
      var key = renderTexture.filterPoolKey;
      renderTexture.filterFrame = null;
      this.texturePool[key].push(renderTexture);
    };
    RenderTexturePool2.prototype.returnFilterTexture = function(renderTexture) {
      this.returnTexture(renderTexture);
    };
    RenderTexturePool2.prototype.clear = function(destroyTextures) {
      destroyTextures = destroyTextures !== false;
      if (destroyTextures) {
        for (var i in this.texturePool) {
          var textures = this.texturePool[i];
          if (textures) {
            for (var j = 0; j < textures.length; j++) {
              textures[j].destroy(true);
            }
          }
        }
      }
      this.texturePool = {};
    };
    RenderTexturePool2.prototype.setScreenSize = function(size) {
      if (size.width === this._pixelsWidth && size.height === this._pixelsHeight) {
        return;
      }
      var screenKey = RenderTexturePool2.SCREEN_KEY;
      var textures = this.texturePool[screenKey];
      this.enableFullScreen = size.width > 0 && size.height > 0;
      if (textures) {
        for (var j = 0; j < textures.length; j++) {
          textures[j].destroy(true);
        }
      }
      this.texturePool[screenKey] = [];
      this._pixelsWidth = size.width;
      this._pixelsHeight = size.height;
    };
    RenderTexturePool2.SCREEN_KEY = "screen";
    return RenderTexturePool2;
  }();
  var Attribute = function() {
    function Attribute2(buffer, size, normalized, type, stride, start, instance) {
      if (size === void 0) {
        size = 0;
      }
      if (normalized === void 0) {
        normalized = false;
      }
      if (type === void 0) {
        type = 5126;
      }
      this.buffer = buffer;
      this.size = size;
      this.normalized = normalized;
      this.type = type;
      this.stride = stride;
      this.start = start;
      this.instance = instance;
    }
    Attribute2.prototype.destroy = function() {
      this.buffer = null;
    };
    Attribute2.from = function(buffer, size, normalized, type, stride) {
      return new Attribute2(buffer, size, normalized, type, stride);
    };
    return Attribute2;
  }();
  var UID = 0;
  var Buffer2 = function() {
    function Buffer3(data, _static, index4) {
      if (_static === void 0) {
        _static = true;
      }
      if (index4 === void 0) {
        index4 = false;
      }
      this.data = data || new Float32Array(1);
      this._glBuffers = {};
      this._updateID = 0;
      this.index = index4;
      this.static = _static;
      this.id = UID++;
      this.disposeRunner = new Runner("disposeBuffer");
    }
    Buffer3.prototype.update = function(data) {
      this.data = data || this.data;
      this._updateID++;
    };
    Buffer3.prototype.dispose = function() {
      this.disposeRunner.emit(this, false);
    };
    Buffer3.prototype.destroy = function() {
      this.dispose();
      this.data = null;
    };
    Buffer3.from = function(data) {
      if (data instanceof Array) {
        data = new Float32Array(data);
      }
      return new Buffer3(data);
    };
    return Buffer3;
  }();
  function getBufferType2(array) {
    if (array.BYTES_PER_ELEMENT === 4) {
      if (array instanceof Float32Array) {
        return "Float32Array";
      } else if (array instanceof Uint32Array) {
        return "Uint32Array";
      }
      return "Int32Array";
    } else if (array.BYTES_PER_ELEMENT === 2) {
      if (array instanceof Uint16Array) {
        return "Uint16Array";
      }
    } else if (array.BYTES_PER_ELEMENT === 1) {
      if (array instanceof Uint8Array) {
        return "Uint8Array";
      }
    }
    return null;
  }
  var map2 = {
    Float32Array,
    Uint32Array,
    Int32Array,
    Uint8Array
  };
  function interleaveTypedArrays2(arrays, sizes) {
    var outSize = 0;
    var stride = 0;
    var views = {};
    for (var i = 0; i < arrays.length; i++) {
      stride += sizes[i];
      outSize += arrays[i].length;
    }
    var buffer = new ArrayBuffer(outSize * 4);
    var out = null;
    var littleOffset = 0;
    for (var i = 0; i < arrays.length; i++) {
      var size = sizes[i];
      var array = arrays[i];
      var type = getBufferType2(array);
      if (!views[type]) {
        views[type] = new map2[type](buffer);
      }
      out = views[type];
      for (var j = 0; j < array.length; j++) {
        var indexStart = (j / size | 0) * stride + littleOffset;
        var index4 = j % size;
        out[indexStart + index4] = array[j];
      }
      littleOffset += size;
    }
    return new Float32Array(buffer);
  }
  var byteSizeMap = {5126: 4, 5123: 2, 5121: 1};
  var UID$1 = 0;
  var map$1 = {
    Float32Array,
    Uint32Array,
    Int32Array,
    Uint8Array,
    Uint16Array
  };
  var Geometry = function() {
    function Geometry2(buffers, attributes) {
      if (buffers === void 0) {
        buffers = [];
      }
      if (attributes === void 0) {
        attributes = {};
      }
      this.buffers = buffers;
      this.indexBuffer = null;
      this.attributes = attributes;
      this.glVertexArrayObjects = {};
      this.id = UID$1++;
      this.instanced = false;
      this.instanceCount = 1;
      this.disposeRunner = new Runner("disposeGeometry");
      this.refCount = 0;
    }
    Geometry2.prototype.addAttribute = function(id, buffer, size, normalized, type, stride, start, instance) {
      if (size === void 0) {
        size = 0;
      }
      if (normalized === void 0) {
        normalized = false;
      }
      if (instance === void 0) {
        instance = false;
      }
      if (!buffer) {
        throw new Error("You must pass a buffer when creating an attribute");
      }
      if (!(buffer instanceof Buffer2)) {
        if (buffer instanceof Array) {
          buffer = new Float32Array(buffer);
        }
        buffer = new Buffer2(buffer);
      }
      var ids = id.split("|");
      if (ids.length > 1) {
        for (var i = 0; i < ids.length; i++) {
          this.addAttribute(ids[i], buffer, size, normalized, type);
        }
        return this;
      }
      var bufferIndex = this.buffers.indexOf(buffer);
      if (bufferIndex === -1) {
        this.buffers.push(buffer);
        bufferIndex = this.buffers.length - 1;
      }
      this.attributes[id] = new Attribute(bufferIndex, size, normalized, type, stride, start, instance);
      this.instanced = this.instanced || instance;
      return this;
    };
    Geometry2.prototype.getAttribute = function(id) {
      return this.attributes[id];
    };
    Geometry2.prototype.getBuffer = function(id) {
      return this.buffers[this.getAttribute(id).buffer];
    };
    Geometry2.prototype.addIndex = function(buffer) {
      if (!(buffer instanceof Buffer2)) {
        if (buffer instanceof Array) {
          buffer = new Uint16Array(buffer);
        }
        buffer = new Buffer2(buffer);
      }
      buffer.index = true;
      this.indexBuffer = buffer;
      if (this.buffers.indexOf(buffer) === -1) {
        this.buffers.push(buffer);
      }
      return this;
    };
    Geometry2.prototype.getIndex = function() {
      return this.indexBuffer;
    };
    Geometry2.prototype.interleave = function() {
      if (this.buffers.length === 1 || this.buffers.length === 2 && this.indexBuffer) {
        return this;
      }
      var arrays = [];
      var sizes = [];
      var interleavedBuffer = new Buffer2();
      var i;
      for (i in this.attributes) {
        var attribute = this.attributes[i];
        var buffer = this.buffers[attribute.buffer];
        arrays.push(buffer.data);
        sizes.push(attribute.size * byteSizeMap[attribute.type] / 4);
        attribute.buffer = 0;
      }
      interleavedBuffer.data = interleaveTypedArrays2(arrays, sizes);
      for (i = 0; i < this.buffers.length; i++) {
        if (this.buffers[i] !== this.indexBuffer) {
          this.buffers[i].destroy();
        }
      }
      this.buffers = [interleavedBuffer];
      if (this.indexBuffer) {
        this.buffers.push(this.indexBuffer);
      }
      return this;
    };
    Geometry2.prototype.getSize = function() {
      for (var i in this.attributes) {
        var attribute = this.attributes[i];
        var buffer = this.buffers[attribute.buffer];
        return buffer.data.length / (attribute.stride / 4 || attribute.size);
      }
      return 0;
    };
    Geometry2.prototype.dispose = function() {
      this.disposeRunner.emit(this, false);
    };
    Geometry2.prototype.destroy = function() {
      this.dispose();
      this.buffers = null;
      this.indexBuffer = null;
      this.attributes = null;
    };
    Geometry2.prototype.clone = function() {
      var geometry = new Geometry2();
      for (var i = 0; i < this.buffers.length; i++) {
        geometry.buffers[i] = new Buffer2(this.buffers[i].data.slice(0));
      }
      for (var i in this.attributes) {
        var attrib = this.attributes[i];
        geometry.attributes[i] = new Attribute(attrib.buffer, attrib.size, attrib.normalized, attrib.type, attrib.stride, attrib.start, attrib.instance);
      }
      if (this.indexBuffer) {
        geometry.indexBuffer = geometry.buffers[this.buffers.indexOf(this.indexBuffer)];
        geometry.indexBuffer.index = true;
      }
      return geometry;
    };
    Geometry2.merge = function(geometries) {
      var geometryOut = new Geometry2();
      var arrays = [];
      var sizes = [];
      var offsets = [];
      var geometry;
      for (var i = 0; i < geometries.length; i++) {
        geometry = geometries[i];
        for (var j = 0; j < geometry.buffers.length; j++) {
          sizes[j] = sizes[j] || 0;
          sizes[j] += geometry.buffers[j].data.length;
          offsets[j] = 0;
        }
      }
      for (var i = 0; i < geometry.buffers.length; i++) {
        arrays[i] = new map$1[getBufferType2(geometry.buffers[i].data)](sizes[i]);
        geometryOut.buffers[i] = new Buffer2(arrays[i]);
      }
      for (var i = 0; i < geometries.length; i++) {
        geometry = geometries[i];
        for (var j = 0; j < geometry.buffers.length; j++) {
          arrays[j].set(geometry.buffers[j].data, offsets[j]);
          offsets[j] += geometry.buffers[j].data.length;
        }
      }
      geometryOut.attributes = geometry.attributes;
      if (geometry.indexBuffer) {
        geometryOut.indexBuffer = geometryOut.buffers[geometry.buffers.indexOf(geometry.indexBuffer)];
        geometryOut.indexBuffer.index = true;
        var offset = 0;
        var stride = 0;
        var offset2 = 0;
        var bufferIndexToCount = 0;
        for (var i = 0; i < geometry.buffers.length; i++) {
          if (geometry.buffers[i] !== geometry.indexBuffer) {
            bufferIndexToCount = i;
            break;
          }
        }
        for (var i in geometry.attributes) {
          var attribute = geometry.attributes[i];
          if ((attribute.buffer | 0) === bufferIndexToCount) {
            stride += attribute.size * byteSizeMap[attribute.type] / 4;
          }
        }
        for (var i = 0; i < geometries.length; i++) {
          var indexBufferData = geometries[i].indexBuffer.data;
          for (var j = 0; j < indexBufferData.length; j++) {
            geometryOut.indexBuffer.data[j + offset2] += offset;
          }
          offset += geometry.buffers[bufferIndexToCount].data.length / stride;
          offset2 += indexBufferData.length;
        }
      }
      return geometryOut;
    };
    return Geometry2;
  }();
  var Quad = function(_super) {
    __extends3(Quad2, _super);
    function Quad2() {
      var _this = _super.call(this) || this;
      _this.addAttribute("aVertexPosition", new Float32Array([
        0,
        0,
        1,
        0,
        1,
        1,
        0,
        1
      ])).addIndex([0, 1, 3, 2]);
      return _this;
    }
    return Quad2;
  }(Geometry);
  var QuadUv = function(_super) {
    __extends3(QuadUv2, _super);
    function QuadUv2() {
      var _this = _super.call(this) || this;
      _this.vertices = new Float32Array([
        -1,
        -1,
        1,
        -1,
        1,
        1,
        -1,
        1
      ]);
      _this.uvs = new Float32Array([
        0,
        0,
        1,
        0,
        1,
        1,
        0,
        1
      ]);
      _this.vertexBuffer = new Buffer2(_this.vertices);
      _this.uvBuffer = new Buffer2(_this.uvs);
      _this.addAttribute("aVertexPosition", _this.vertexBuffer).addAttribute("aTextureCoord", _this.uvBuffer).addIndex([0, 1, 2, 0, 2, 3]);
      return _this;
    }
    QuadUv2.prototype.map = function(targetTextureFrame, destinationFrame) {
      var x = 0;
      var y = 0;
      this.uvs[0] = x;
      this.uvs[1] = y;
      this.uvs[2] = x + destinationFrame.width / targetTextureFrame.width;
      this.uvs[3] = y;
      this.uvs[4] = x + destinationFrame.width / targetTextureFrame.width;
      this.uvs[5] = y + destinationFrame.height / targetTextureFrame.height;
      this.uvs[6] = x;
      this.uvs[7] = y + destinationFrame.height / targetTextureFrame.height;
      x = destinationFrame.x;
      y = destinationFrame.y;
      this.vertices[0] = x;
      this.vertices[1] = y;
      this.vertices[2] = x + destinationFrame.width;
      this.vertices[3] = y;
      this.vertices[4] = x + destinationFrame.width;
      this.vertices[5] = y + destinationFrame.height;
      this.vertices[6] = x;
      this.vertices[7] = y + destinationFrame.height;
      this.invalidate();
      return this;
    };
    QuadUv2.prototype.invalidate = function() {
      this.vertexBuffer._updateID++;
      this.uvBuffer._updateID++;
      return this;
    };
    return QuadUv2;
  }(Geometry);
  var UID$2 = 0;
  var UniformGroup = function() {
    function UniformGroup2(uniforms, _static) {
      this.uniforms = uniforms;
      this.group = true;
      this.syncUniforms = {};
      this.dirtyId = 0;
      this.id = UID$2++;
      this.static = !!_static;
    }
    UniformGroup2.prototype.update = function() {
      this.dirtyId++;
    };
    UniformGroup2.prototype.add = function(name, uniforms, _static) {
      this.uniforms[name] = new UniformGroup2(uniforms, _static);
    };
    UniformGroup2.from = function(uniforms, _static) {
      return new UniformGroup2(uniforms, _static);
    };
    return UniformGroup2;
  }();
  var FilterState = function() {
    function FilterState2() {
      this.renderTexture = null;
      this.target = null;
      this.legacy = false;
      this.resolution = 1;
      this.sourceFrame = new Rectangle();
      this.destinationFrame = new Rectangle();
      this.filters = [];
    }
    FilterState2.prototype.clear = function() {
      this.target = null;
      this.filters = null;
      this.renderTexture = null;
    };
    return FilterState2;
  }();
  var FilterSystem = function(_super) {
    __extends3(FilterSystem2, _super);
    function FilterSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.defaultFilterStack = [{}];
      _this.texturePool = new RenderTexturePool();
      _this.texturePool.setScreenSize(renderer.view);
      _this.statePool = [];
      _this.quad = new Quad();
      _this.quadUv = new QuadUv();
      _this.tempRect = new Rectangle();
      _this.activeState = {};
      _this.globalUniforms = new UniformGroup({
        outputFrame: _this.tempRect,
        inputSize: new Float32Array(4),
        inputPixel: new Float32Array(4),
        inputClamp: new Float32Array(4),
        resolution: 1,
        filterArea: new Float32Array(4),
        filterClamp: new Float32Array(4)
      }, true);
      _this.forceClear = false;
      _this.useMaxPadding = false;
      return _this;
    }
    FilterSystem2.prototype.push = function(target, filters2) {
      var renderer = this.renderer;
      var filterStack = this.defaultFilterStack;
      var state = this.statePool.pop() || new FilterState();
      var resolution = filters2[0].resolution;
      var padding = filters2[0].padding;
      var autoFit = filters2[0].autoFit;
      var legacy = filters2[0].legacy;
      for (var i = 1; i < filters2.length; i++) {
        var filter = filters2[i];
        resolution = Math.min(resolution, filter.resolution);
        padding = this.useMaxPadding ? Math.max(padding, filter.padding) : padding + filter.padding;
        autoFit = autoFit && filter.autoFit;
        legacy = legacy || filter.legacy;
      }
      if (filterStack.length === 1) {
        this.defaultFilterStack[0].renderTexture = renderer.renderTexture.current;
      }
      filterStack.push(state);
      state.resolution = resolution;
      state.legacy = legacy;
      state.target = target;
      state.sourceFrame.copyFrom(target.filterArea || target.getBounds(true));
      state.sourceFrame.pad(padding);
      if (autoFit) {
        state.sourceFrame.fit(this.renderer.renderTexture.sourceFrame);
      }
      state.sourceFrame.ceil(resolution);
      state.renderTexture = this.getOptimalFilterTexture(state.sourceFrame.width, state.sourceFrame.height, resolution);
      state.filters = filters2;
      state.destinationFrame.width = state.renderTexture.width;
      state.destinationFrame.height = state.renderTexture.height;
      var destinationFrame = this.tempRect;
      destinationFrame.width = state.sourceFrame.width;
      destinationFrame.height = state.sourceFrame.height;
      state.renderTexture.filterFrame = state.sourceFrame;
      renderer.renderTexture.bind(state.renderTexture, state.sourceFrame, destinationFrame);
      renderer.renderTexture.clear();
    };
    FilterSystem2.prototype.pop = function() {
      var filterStack = this.defaultFilterStack;
      var state = filterStack.pop();
      var filters2 = state.filters;
      this.activeState = state;
      var globalUniforms = this.globalUniforms.uniforms;
      globalUniforms.outputFrame = state.sourceFrame;
      globalUniforms.resolution = state.resolution;
      var inputSize = globalUniforms.inputSize;
      var inputPixel = globalUniforms.inputPixel;
      var inputClamp = globalUniforms.inputClamp;
      inputSize[0] = state.destinationFrame.width;
      inputSize[1] = state.destinationFrame.height;
      inputSize[2] = 1 / inputSize[0];
      inputSize[3] = 1 / inputSize[1];
      inputPixel[0] = inputSize[0] * state.resolution;
      inputPixel[1] = inputSize[1] * state.resolution;
      inputPixel[2] = 1 / inputPixel[0];
      inputPixel[3] = 1 / inputPixel[1];
      inputClamp[0] = 0.5 * inputPixel[2];
      inputClamp[1] = 0.5 * inputPixel[3];
      inputClamp[2] = state.sourceFrame.width * inputSize[2] - 0.5 * inputPixel[2];
      inputClamp[3] = state.sourceFrame.height * inputSize[3] - 0.5 * inputPixel[3];
      if (state.legacy) {
        var filterArea = globalUniforms.filterArea;
        filterArea[0] = state.destinationFrame.width;
        filterArea[1] = state.destinationFrame.height;
        filterArea[2] = state.sourceFrame.x;
        filterArea[3] = state.sourceFrame.y;
        globalUniforms.filterClamp = globalUniforms.inputClamp;
      }
      this.globalUniforms.update();
      var lastState = filterStack[filterStack.length - 1];
      if (state.renderTexture.framebuffer.multisample > 1) {
        this.renderer.framebuffer.blit();
      }
      if (filters2.length === 1) {
        filters2[0].apply(this, state.renderTexture, lastState.renderTexture, CLEAR_MODES.BLEND, state);
        this.returnFilterTexture(state.renderTexture);
      } else {
        var flip = state.renderTexture;
        var flop = this.getOptimalFilterTexture(flip.width, flip.height, state.resolution);
        flop.filterFrame = flip.filterFrame;
        var i = 0;
        for (i = 0; i < filters2.length - 1; ++i) {
          filters2[i].apply(this, flip, flop, CLEAR_MODES.CLEAR, state);
          var t = flip;
          flip = flop;
          flop = t;
        }
        filters2[i].apply(this, flip, lastState.renderTexture, CLEAR_MODES.BLEND, state);
        this.returnFilterTexture(flip);
        this.returnFilterTexture(flop);
      }
      state.clear();
      this.statePool.push(state);
    };
    FilterSystem2.prototype.bindAndClear = function(filterTexture, clearMode) {
      if (clearMode === void 0) {
        clearMode = CLEAR_MODES.CLEAR;
      }
      if (filterTexture && filterTexture.filterFrame) {
        var destinationFrame = this.tempRect;
        destinationFrame.width = filterTexture.filterFrame.width;
        destinationFrame.height = filterTexture.filterFrame.height;
        this.renderer.renderTexture.bind(filterTexture, filterTexture.filterFrame, destinationFrame);
      } else {
        this.renderer.renderTexture.bind(filterTexture);
      }
      if (typeof clearMode === "boolean") {
        clearMode = clearMode ? CLEAR_MODES.CLEAR : CLEAR_MODES.BLEND;
        deprecation("5.2.1", "Use CLEAR_MODES when using clear applyFilter option");
      }
      if (clearMode === CLEAR_MODES.CLEAR || clearMode === CLEAR_MODES.BLIT && this.forceClear) {
        this.renderer.renderTexture.clear();
      }
    };
    FilterSystem2.prototype.applyFilter = function(filter, input, output, clearMode) {
      var renderer = this.renderer;
      this.bindAndClear(output, clearMode);
      filter.uniforms.uSampler = input;
      filter.uniforms.filterGlobals = this.globalUniforms;
      renderer.state.set(filter.state);
      renderer.shader.bind(filter);
      if (filter.legacy) {
        this.quadUv.map(input._frame, input.filterFrame);
        renderer.geometry.bind(this.quadUv);
        renderer.geometry.draw(DRAW_MODES.TRIANGLES);
      } else {
        renderer.geometry.bind(this.quad);
        renderer.geometry.draw(DRAW_MODES.TRIANGLE_STRIP);
      }
    };
    FilterSystem2.prototype.calculateSpriteMatrix = function(outputMatrix, sprite) {
      var _a2 = this.activeState, sourceFrame = _a2.sourceFrame, destinationFrame = _a2.destinationFrame;
      var orig = sprite._texture.orig;
      var mappedMatrix = outputMatrix.set(destinationFrame.width, 0, 0, destinationFrame.height, sourceFrame.x, sourceFrame.y);
      var worldTransform = sprite.worldTransform.copyTo(Matrix.TEMP_MATRIX);
      worldTransform.invert();
      mappedMatrix.prepend(worldTransform);
      mappedMatrix.scale(1 / orig.width, 1 / orig.height);
      mappedMatrix.translate(sprite.anchor.x, sprite.anchor.y);
      return mappedMatrix;
    };
    FilterSystem2.prototype.destroy = function() {
      this.texturePool.clear(false);
    };
    FilterSystem2.prototype.getOptimalFilterTexture = function(minWidth, minHeight, resolution) {
      if (resolution === void 0) {
        resolution = 1;
      }
      return this.texturePool.getOptimalTexture(minWidth, minHeight, resolution);
    };
    FilterSystem2.prototype.getFilterTexture = function(input, resolution) {
      if (typeof input === "number") {
        var swap = input;
        input = resolution;
        resolution = swap;
      }
      input = input || this.activeState.renderTexture;
      var filterTexture = this.texturePool.getOptimalTexture(input.width, input.height, resolution || input.resolution);
      filterTexture.filterFrame = input.filterFrame;
      return filterTexture;
    };
    FilterSystem2.prototype.returnFilterTexture = function(renderTexture) {
      this.texturePool.returnTexture(renderTexture);
    };
    FilterSystem2.prototype.emptyPool = function() {
      this.texturePool.clear(true);
    };
    FilterSystem2.prototype.resize = function() {
      this.texturePool.setScreenSize(this.renderer.view);
    };
    return FilterSystem2;
  }(System);
  var ObjectRenderer = function() {
    function ObjectRenderer2(renderer) {
      this.renderer = renderer;
    }
    ObjectRenderer2.prototype.flush = function() {
    };
    ObjectRenderer2.prototype.destroy = function() {
      this.renderer = null;
    };
    ObjectRenderer2.prototype.start = function() {
    };
    ObjectRenderer2.prototype.stop = function() {
      this.flush();
    };
    ObjectRenderer2.prototype.render = function(_object) {
    };
    return ObjectRenderer2;
  }();
  var BatchSystem = function(_super) {
    __extends3(BatchSystem2, _super);
    function BatchSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.emptyRenderer = new ObjectRenderer(renderer);
      _this.currentRenderer = _this.emptyRenderer;
      return _this;
    }
    BatchSystem2.prototype.setObjectRenderer = function(objectRenderer) {
      if (this.currentRenderer === objectRenderer) {
        return;
      }
      this.currentRenderer.stop();
      this.currentRenderer = objectRenderer;
      this.currentRenderer.start();
    };
    BatchSystem2.prototype.flush = function() {
      this.setObjectRenderer(this.emptyRenderer);
    };
    BatchSystem2.prototype.reset = function() {
      this.setObjectRenderer(this.emptyRenderer);
    };
    BatchSystem2.prototype.copyBoundTextures = function(arr, maxTextures) {
      var boundTextures = this.renderer.texture.boundTextures;
      for (var i = maxTextures - 1; i >= 0; --i) {
        arr[i] = boundTextures[i] || null;
        if (arr[i]) {
          arr[i]._batchLocation = i;
        }
      }
    };
    BatchSystem2.prototype.boundArray = function(texArray, boundTextures, batchId, maxTextures) {
      var elements = texArray.elements, ids = texArray.ids, count = texArray.count;
      var j = 0;
      for (var i = 0; i < count; i++) {
        var tex = elements[i];
        var loc = tex._batchLocation;
        if (loc >= 0 && loc < maxTextures && boundTextures[loc] === tex) {
          ids[i] = loc;
          continue;
        }
        while (j < maxTextures) {
          var bound = boundTextures[j];
          if (bound && bound._batchEnabled === batchId && bound._batchLocation === j) {
            j++;
            continue;
          }
          ids[i] = j;
          tex._batchLocation = j;
          boundTextures[j] = tex;
          break;
        }
      }
    };
    return BatchSystem2;
  }(System);
  var CONTEXT_UID_COUNTER = 0;
  var ContextSystem = function(_super) {
    __extends3(ContextSystem2, _super);
    function ContextSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.webGLVersion = 1;
      _this.extensions = {};
      _this.supports = {
        uint32Indices: false
      };
      _this.handleContextLost = _this.handleContextLost.bind(_this);
      _this.handleContextRestored = _this.handleContextRestored.bind(_this);
      renderer.view.addEventListener("webglcontextlost", _this.handleContextLost, false);
      renderer.view.addEventListener("webglcontextrestored", _this.handleContextRestored, false);
      return _this;
    }
    Object.defineProperty(ContextSystem2.prototype, "isLost", {
      get: function() {
        return !this.gl || this.gl.isContextLost();
      },
      enumerable: false,
      configurable: true
    });
    ContextSystem2.prototype.contextChange = function(gl) {
      this.gl = gl;
      this.renderer.gl = gl;
      this.renderer.CONTEXT_UID = CONTEXT_UID_COUNTER++;
      if (gl.isContextLost() && gl.getExtension("WEBGL_lose_context")) {
        gl.getExtension("WEBGL_lose_context").restoreContext();
      }
    };
    ContextSystem2.prototype.initFromContext = function(gl) {
      this.gl = gl;
      this.validateContext(gl);
      this.renderer.gl = gl;
      this.renderer.CONTEXT_UID = CONTEXT_UID_COUNTER++;
      this.renderer.runners.contextChange.emit(gl);
    };
    ContextSystem2.prototype.initFromOptions = function(options) {
      var gl = this.createContext(this.renderer.view, options);
      this.initFromContext(gl);
    };
    ContextSystem2.prototype.createContext = function(canvas2, options) {
      var gl;
      if (settings.PREFER_ENV >= ENV.WEBGL2) {
        gl = canvas2.getContext("webgl2", options);
      }
      if (gl) {
        this.webGLVersion = 2;
      } else {
        this.webGLVersion = 1;
        gl = canvas2.getContext("webgl", options) || canvas2.getContext("experimental-webgl", options);
        if (!gl) {
          throw new Error("This browser does not support WebGL. Try using the canvas renderer");
        }
      }
      this.gl = gl;
      this.getExtensions();
      return this.gl;
    };
    ContextSystem2.prototype.getExtensions = function() {
      var gl = this.gl;
      if (this.webGLVersion === 1) {
        Object.assign(this.extensions, {
          drawBuffers: gl.getExtension("WEBGL_draw_buffers"),
          depthTexture: gl.getExtension("WEBGL_depth_texture"),
          loseContext: gl.getExtension("WEBGL_lose_context"),
          vertexArrayObject: gl.getExtension("OES_vertex_array_object") || gl.getExtension("MOZ_OES_vertex_array_object") || gl.getExtension("WEBKIT_OES_vertex_array_object"),
          anisotropicFiltering: gl.getExtension("EXT_texture_filter_anisotropic"),
          uint32ElementIndex: gl.getExtension("OES_element_index_uint"),
          floatTexture: gl.getExtension("OES_texture_float"),
          floatTextureLinear: gl.getExtension("OES_texture_float_linear"),
          textureHalfFloat: gl.getExtension("OES_texture_half_float"),
          textureHalfFloatLinear: gl.getExtension("OES_texture_half_float_linear")
        });
      } else if (this.webGLVersion === 2) {
        Object.assign(this.extensions, {
          anisotropicFiltering: gl.getExtension("EXT_texture_filter_anisotropic"),
          colorBufferFloat: gl.getExtension("EXT_color_buffer_float"),
          floatTextureLinear: gl.getExtension("OES_texture_float_linear")
        });
      }
    };
    ContextSystem2.prototype.handleContextLost = function(event) {
      event.preventDefault();
    };
    ContextSystem2.prototype.handleContextRestored = function() {
      this.renderer.runners.contextChange.emit(this.gl);
    };
    ContextSystem2.prototype.destroy = function() {
      var view = this.renderer.view;
      view.removeEventListener("webglcontextlost", this.handleContextLost);
      view.removeEventListener("webglcontextrestored", this.handleContextRestored);
      this.gl.useProgram(null);
      if (this.extensions.loseContext) {
        this.extensions.loseContext.loseContext();
      }
    };
    ContextSystem2.prototype.postrender = function() {
      if (this.renderer.renderingToScreen) {
        this.gl.flush();
      }
    };
    ContextSystem2.prototype.validateContext = function(gl) {
      var attributes = gl.getContextAttributes();
      var isWebGl2 = "WebGL2RenderingContext" in window && gl instanceof window.WebGL2RenderingContext;
      if (isWebGl2) {
        this.webGLVersion = 2;
      }
      if (!attributes.stencil) {
        console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");
      }
      var hasuint32 = isWebGl2 || !!gl.getExtension("OES_element_index_uint");
      this.supports.uint32Indices = hasuint32;
      if (!hasuint32) {
        console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly");
      }
    };
    return ContextSystem2;
  }(System);
  var GLFramebuffer = function() {
    function GLFramebuffer2(framebuffer) {
      this.framebuffer = framebuffer;
      this.stencil = null;
      this.dirtyId = 0;
      this.dirtyFormat = 0;
      this.dirtySize = 0;
      this.multisample = MSAA_QUALITY.NONE;
      this.msaaBuffer = null;
      this.blitFramebuffer = null;
    }
    return GLFramebuffer2;
  }();
  var tempRectangle = new Rectangle();
  var FramebufferSystem = function(_super) {
    __extends3(FramebufferSystem2, _super);
    function FramebufferSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.managedFramebuffers = [];
      _this.unknownFramebuffer = new Framebuffer(10, 10);
      _this.msaaSamples = null;
      return _this;
    }
    FramebufferSystem2.prototype.contextChange = function() {
      var gl = this.gl = this.renderer.gl;
      this.CONTEXT_UID = this.renderer.CONTEXT_UID;
      this.current = this.unknownFramebuffer;
      this.viewport = new Rectangle();
      this.hasMRT = true;
      this.writeDepthTexture = true;
      this.disposeAll(true);
      if (this.renderer.context.webGLVersion === 1) {
        var nativeDrawBuffersExtension_1 = this.renderer.context.extensions.drawBuffers;
        var nativeDepthTextureExtension = this.renderer.context.extensions.depthTexture;
        if (settings.PREFER_ENV === ENV.WEBGL_LEGACY) {
          nativeDrawBuffersExtension_1 = null;
          nativeDepthTextureExtension = null;
        }
        if (nativeDrawBuffersExtension_1) {
          gl.drawBuffers = function(activeTextures) {
            return nativeDrawBuffersExtension_1.drawBuffersWEBGL(activeTextures);
          };
        } else {
          this.hasMRT = false;
          gl.drawBuffers = function() {
          };
        }
        if (!nativeDepthTextureExtension) {
          this.writeDepthTexture = false;
        }
      } else {
        this.msaaSamples = gl.getInternalformatParameter(gl.RENDERBUFFER, gl.RGBA8, gl.SAMPLES);
      }
    };
    FramebufferSystem2.prototype.bind = function(framebuffer, frame) {
      var gl = this.gl;
      if (framebuffer) {
        var fbo = framebuffer.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(framebuffer);
        if (this.current !== framebuffer) {
          this.current = framebuffer;
          gl.bindFramebuffer(gl.FRAMEBUFFER, fbo.framebuffer);
        }
        if (fbo.dirtyId !== framebuffer.dirtyId) {
          fbo.dirtyId = framebuffer.dirtyId;
          if (fbo.dirtyFormat !== framebuffer.dirtyFormat) {
            fbo.dirtyFormat = framebuffer.dirtyFormat;
            this.updateFramebuffer(framebuffer);
          } else if (fbo.dirtySize !== framebuffer.dirtySize) {
            fbo.dirtySize = framebuffer.dirtySize;
            this.resizeFramebuffer(framebuffer);
          }
        }
        for (var i = 0; i < framebuffer.colorTextures.length; i++) {
          var tex = framebuffer.colorTextures[i];
          this.renderer.texture.unbind(tex.parentTextureArray || tex);
        }
        if (framebuffer.depthTexture) {
          this.renderer.texture.unbind(framebuffer.depthTexture);
        }
        if (frame) {
          this.setViewport(frame.x, frame.y, frame.width, frame.height);
        } else {
          this.setViewport(0, 0, framebuffer.width, framebuffer.height);
        }
      } else {
        if (this.current) {
          this.current = null;
          gl.bindFramebuffer(gl.FRAMEBUFFER, null);
        }
        if (frame) {
          this.setViewport(frame.x, frame.y, frame.width, frame.height);
        } else {
          this.setViewport(0, 0, this.renderer.width, this.renderer.height);
        }
      }
    };
    FramebufferSystem2.prototype.setViewport = function(x, y, width, height) {
      var v = this.viewport;
      if (v.width !== width || v.height !== height || v.x !== x || v.y !== y) {
        v.x = x;
        v.y = y;
        v.width = width;
        v.height = height;
        this.gl.viewport(x, y, width, height);
      }
    };
    Object.defineProperty(FramebufferSystem2.prototype, "size", {
      get: function() {
        if (this.current) {
          return {x: 0, y: 0, width: this.current.width, height: this.current.height};
        }
        return {x: 0, y: 0, width: this.renderer.width, height: this.renderer.height};
      },
      enumerable: false,
      configurable: true
    });
    FramebufferSystem2.prototype.clear = function(r, g, b, a, mask) {
      if (mask === void 0) {
        mask = BUFFER_BITS.COLOR | BUFFER_BITS.DEPTH;
      }
      var gl = this.gl;
      gl.clearColor(r, g, b, a);
      gl.clear(mask);
    };
    FramebufferSystem2.prototype.initFramebuffer = function(framebuffer) {
      var gl = this.gl;
      var fbo = new GLFramebuffer(gl.createFramebuffer());
      fbo.multisample = this.detectSamples(framebuffer.multisample);
      framebuffer.glFramebuffers[this.CONTEXT_UID] = fbo;
      this.managedFramebuffers.push(framebuffer);
      framebuffer.disposeRunner.add(this);
      return fbo;
    };
    FramebufferSystem2.prototype.resizeFramebuffer = function(framebuffer) {
      var gl = this.gl;
      var fbo = framebuffer.glFramebuffers[this.CONTEXT_UID];
      if (fbo.stencil) {
        gl.bindRenderbuffer(gl.RENDERBUFFER, fbo.stencil);
        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, framebuffer.width, framebuffer.height);
      }
      var colorTextures = framebuffer.colorTextures;
      for (var i = 0; i < colorTextures.length; i++) {
        this.renderer.texture.bind(colorTextures[i], 0);
      }
      if (framebuffer.depthTexture) {
        this.renderer.texture.bind(framebuffer.depthTexture, 0);
      }
    };
    FramebufferSystem2.prototype.updateFramebuffer = function(framebuffer) {
      var gl = this.gl;
      var fbo = framebuffer.glFramebuffers[this.CONTEXT_UID];
      var colorTextures = framebuffer.colorTextures;
      var count = colorTextures.length;
      if (!gl.drawBuffers) {
        count = Math.min(count, 1);
      }
      if (fbo.multisample > 1) {
        fbo.msaaBuffer = gl.createRenderbuffer();
        gl.bindRenderbuffer(gl.RENDERBUFFER, fbo.msaaBuffer);
        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, fbo.multisample, gl.RGBA8, framebuffer.width, framebuffer.height);
        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.RENDERBUFFER, fbo.msaaBuffer);
      }
      var activeTextures = [];
      for (var i = 0; i < count; i++) {
        if (i === 0 && fbo.multisample > 1) {
          continue;
        }
        var texture = framebuffer.colorTextures[i];
        var parentTexture = texture.parentTextureArray || texture;
        this.renderer.texture.bind(parentTexture, 0);
        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i, texture.target, parentTexture._glTextures[this.CONTEXT_UID].texture, 0);
        activeTextures.push(gl.COLOR_ATTACHMENT0 + i);
      }
      if (activeTextures.length > 1) {
        gl.drawBuffers(activeTextures);
      }
      if (framebuffer.depthTexture) {
        var writeDepthTexture = this.writeDepthTexture;
        if (writeDepthTexture) {
          var depthTexture = framebuffer.depthTexture;
          this.renderer.texture.bind(depthTexture, 0);
          gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, depthTexture._glTextures[this.CONTEXT_UID].texture, 0);
        }
      }
      if (!fbo.stencil && (framebuffer.stencil || framebuffer.depth)) {
        fbo.stencil = gl.createRenderbuffer();
        gl.bindRenderbuffer(gl.RENDERBUFFER, fbo.stencil);
        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, framebuffer.width, framebuffer.height);
        if (!framebuffer.depthTexture) {
          gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, fbo.stencil);
        }
      }
    };
    FramebufferSystem2.prototype.detectSamples = function(samples) {
      var msaaSamples = this.msaaSamples;
      var res = MSAA_QUALITY.NONE;
      if (samples <= 1 || msaaSamples === null) {
        return res;
      }
      for (var i = 0; i < msaaSamples.length; i++) {
        if (msaaSamples[i] <= samples) {
          res = msaaSamples[i];
          break;
        }
      }
      if (res === 1) {
        res = MSAA_QUALITY.NONE;
      }
      return res;
    };
    FramebufferSystem2.prototype.blit = function(framebuffer, sourcePixels, destPixels) {
      var _a2 = this, current = _a2.current, renderer = _a2.renderer, gl = _a2.gl, CONTEXT_UID = _a2.CONTEXT_UID;
      if (renderer.context.webGLVersion !== 2) {
        return;
      }
      if (!current) {
        return;
      }
      var fbo = current.glFramebuffers[CONTEXT_UID];
      if (!fbo) {
        return;
      }
      if (!framebuffer) {
        if (fbo.multisample <= 1) {
          return;
        }
        if (!fbo.blitFramebuffer) {
          fbo.blitFramebuffer = new Framebuffer(current.width, current.height);
          fbo.blitFramebuffer.addColorTexture(0, current.colorTextures[0]);
        }
        framebuffer = fbo.blitFramebuffer;
        framebuffer.width = current.width;
        framebuffer.height = current.height;
      }
      if (!sourcePixels) {
        sourcePixels = tempRectangle;
        sourcePixels.width = current.width;
        sourcePixels.height = current.height;
      }
      if (!destPixels) {
        destPixels = sourcePixels;
      }
      var sameSize = sourcePixels.width === destPixels.width && sourcePixels.height === destPixels.height;
      this.bind(framebuffer);
      gl.bindFramebuffer(gl.READ_FRAMEBUFFER, fbo.framebuffer);
      gl.blitFramebuffer(sourcePixels.x, sourcePixels.y, sourcePixels.width, sourcePixels.height, destPixels.x, destPixels.y, destPixels.width, destPixels.height, gl.COLOR_BUFFER_BIT, sameSize ? gl.NEAREST : gl.LINEAR);
    };
    FramebufferSystem2.prototype.disposeFramebuffer = function(framebuffer, contextLost) {
      var fbo = framebuffer.glFramebuffers[this.CONTEXT_UID];
      var gl = this.gl;
      if (!fbo) {
        return;
      }
      delete framebuffer.glFramebuffers[this.CONTEXT_UID];
      var index4 = this.managedFramebuffers.indexOf(framebuffer);
      if (index4 >= 0) {
        this.managedFramebuffers.splice(index4, 1);
      }
      framebuffer.disposeRunner.remove(this);
      if (!contextLost) {
        gl.deleteFramebuffer(fbo.framebuffer);
        if (fbo.stencil) {
          gl.deleteRenderbuffer(fbo.stencil);
        }
      }
    };
    FramebufferSystem2.prototype.disposeAll = function(contextLost) {
      var list = this.managedFramebuffers;
      this.managedFramebuffers = [];
      for (var i = 0; i < list.length; i++) {
        this.disposeFramebuffer(list[i], contextLost);
      }
    };
    FramebufferSystem2.prototype.forceStencil = function() {
      var framebuffer = this.current;
      if (!framebuffer) {
        return;
      }
      var fbo = framebuffer.glFramebuffers[this.CONTEXT_UID];
      if (!fbo || fbo.stencil) {
        return;
      }
      framebuffer.enableStencil();
      var w = framebuffer.width;
      var h = framebuffer.height;
      var gl = this.gl;
      var stencil = gl.createRenderbuffer();
      gl.bindRenderbuffer(gl.RENDERBUFFER, stencil);
      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, w, h);
      fbo.stencil = stencil;
      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, stencil);
    };
    FramebufferSystem2.prototype.reset = function() {
      this.current = this.unknownFramebuffer;
      this.viewport = new Rectangle();
    };
    return FramebufferSystem2;
  }(System);
  var GLBuffer = function() {
    function GLBuffer2(buffer) {
      this.buffer = buffer || null;
      this.updateID = -1;
      this.byteLength = -1;
      this.refCount = 0;
    }
    return GLBuffer2;
  }();
  var byteSizeMap$1 = {5126: 4, 5123: 2, 5121: 1};
  var GeometrySystem = function(_super) {
    __extends3(GeometrySystem2, _super);
    function GeometrySystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this._activeGeometry = null;
      _this._activeVao = null;
      _this.hasVao = true;
      _this.hasInstance = true;
      _this.canUseUInt32ElementIndex = false;
      _this.managedGeometries = {};
      _this.managedBuffers = {};
      return _this;
    }
    GeometrySystem2.prototype.contextChange = function() {
      this.disposeAll(true);
      var gl = this.gl = this.renderer.gl;
      var context2 = this.renderer.context;
      this.CONTEXT_UID = this.renderer.CONTEXT_UID;
      if (context2.webGLVersion !== 2) {
        var nativeVaoExtension_1 = this.renderer.context.extensions.vertexArrayObject;
        if (settings.PREFER_ENV === ENV.WEBGL_LEGACY) {
          nativeVaoExtension_1 = null;
        }
        if (nativeVaoExtension_1) {
          gl.createVertexArray = function() {
            return nativeVaoExtension_1.createVertexArrayOES();
          };
          gl.bindVertexArray = function(vao) {
            return nativeVaoExtension_1.bindVertexArrayOES(vao);
          };
          gl.deleteVertexArray = function(vao) {
            return nativeVaoExtension_1.deleteVertexArrayOES(vao);
          };
        } else {
          this.hasVao = false;
          gl.createVertexArray = function() {
            return null;
          };
          gl.bindVertexArray = function() {
            return null;
          };
          gl.deleteVertexArray = function() {
            return null;
          };
        }
      }
      if (context2.webGLVersion !== 2) {
        var instanceExt_1 = gl.getExtension("ANGLE_instanced_arrays");
        if (instanceExt_1) {
          gl.vertexAttribDivisor = function(a, b) {
            return instanceExt_1.vertexAttribDivisorANGLE(a, b);
          };
          gl.drawElementsInstanced = function(a, b, c, d, e) {
            return instanceExt_1.drawElementsInstancedANGLE(a, b, c, d, e);
          };
          gl.drawArraysInstanced = function(a, b, c, d) {
            return instanceExt_1.drawArraysInstancedANGLE(a, b, c, d);
          };
        } else {
          this.hasInstance = false;
        }
      }
      this.canUseUInt32ElementIndex = context2.webGLVersion === 2 || !!context2.extensions.uint32ElementIndex;
    };
    GeometrySystem2.prototype.bind = function(geometry, shader) {
      shader = shader || this.renderer.shader.shader;
      var gl = this.gl;
      var vaos = geometry.glVertexArrayObjects[this.CONTEXT_UID];
      var incRefCount = false;
      if (!vaos) {
        this.managedGeometries[geometry.id] = geometry;
        geometry.disposeRunner.add(this);
        geometry.glVertexArrayObjects[this.CONTEXT_UID] = vaos = {};
        incRefCount = true;
      }
      var vao = vaos[shader.program.id] || this.initGeometryVao(geometry, shader.program, incRefCount);
      this._activeGeometry = geometry;
      if (this._activeVao !== vao) {
        this._activeVao = vao;
        if (this.hasVao) {
          gl.bindVertexArray(vao);
        } else {
          this.activateVao(geometry, shader.program);
        }
      }
      this.updateBuffers();
    };
    GeometrySystem2.prototype.reset = function() {
      this.unbind();
    };
    GeometrySystem2.prototype.updateBuffers = function() {
      var geometry = this._activeGeometry;
      var gl = this.gl;
      for (var i = 0; i < geometry.buffers.length; i++) {
        var buffer = geometry.buffers[i];
        var glBuffer = buffer._glBuffers[this.CONTEXT_UID];
        if (buffer._updateID !== glBuffer.updateID) {
          glBuffer.updateID = buffer._updateID;
          var type = buffer.index ? gl.ELEMENT_ARRAY_BUFFER : gl.ARRAY_BUFFER;
          gl.bindBuffer(type, glBuffer.buffer);
          this._boundBuffer = glBuffer;
          if (glBuffer.byteLength >= buffer.data.byteLength) {
            gl.bufferSubData(type, 0, buffer.data);
          } else {
            var drawType = buffer.static ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW;
            glBuffer.byteLength = buffer.data.byteLength;
            gl.bufferData(type, buffer.data, drawType);
          }
        }
      }
    };
    GeometrySystem2.prototype.checkCompatibility = function(geometry, program) {
      var geometryAttributes = geometry.attributes;
      var shaderAttributes = program.attributeData;
      for (var j in shaderAttributes) {
        if (!geometryAttributes[j]) {
          throw new Error('shader and geometry incompatible, geometry missing the "' + j + '" attribute');
        }
      }
    };
    GeometrySystem2.prototype.getSignature = function(geometry, program) {
      var attribs = geometry.attributes;
      var shaderAttributes = program.attributeData;
      var strings = ["g", geometry.id];
      for (var i in attribs) {
        if (shaderAttributes[i]) {
          strings.push(i);
        }
      }
      return strings.join("-");
    };
    GeometrySystem2.prototype.initGeometryVao = function(geometry, program, incRefCount) {
      if (incRefCount === void 0) {
        incRefCount = true;
      }
      this.checkCompatibility(geometry, program);
      var gl = this.gl;
      var CONTEXT_UID = this.CONTEXT_UID;
      var signature = this.getSignature(geometry, program);
      var vaoObjectHash = geometry.glVertexArrayObjects[this.CONTEXT_UID];
      var vao = vaoObjectHash[signature];
      if (vao) {
        vaoObjectHash[program.id] = vao;
        return vao;
      }
      var buffers = geometry.buffers;
      var attributes = geometry.attributes;
      var tempStride = {};
      var tempStart = {};
      for (var j in buffers) {
        tempStride[j] = 0;
        tempStart[j] = 0;
      }
      for (var j in attributes) {
        if (!attributes[j].size && program.attributeData[j]) {
          attributes[j].size = program.attributeData[j].size;
        } else if (!attributes[j].size) {
          console.warn("PIXI Geometry attribute '" + j + "' size cannot be determined (likely the bound shader does not have the attribute)");
        }
        tempStride[attributes[j].buffer] += attributes[j].size * byteSizeMap$1[attributes[j].type];
      }
      for (var j in attributes) {
        var attribute = attributes[j];
        var attribSize = attribute.size;
        if (attribute.stride === void 0) {
          if (tempStride[attribute.buffer] === attribSize * byteSizeMap$1[attribute.type]) {
            attribute.stride = 0;
          } else {
            attribute.stride = tempStride[attribute.buffer];
          }
        }
        if (attribute.start === void 0) {
          attribute.start = tempStart[attribute.buffer];
          tempStart[attribute.buffer] += attribSize * byteSizeMap$1[attribute.type];
        }
      }
      vao = gl.createVertexArray();
      gl.bindVertexArray(vao);
      for (var i = 0; i < buffers.length; i++) {
        var buffer = buffers[i];
        if (!buffer._glBuffers[CONTEXT_UID]) {
          buffer._glBuffers[CONTEXT_UID] = new GLBuffer(gl.createBuffer());
          this.managedBuffers[buffer.id] = buffer;
          buffer.disposeRunner.add(this);
        }
        if (incRefCount) {
          buffer._glBuffers[CONTEXT_UID].refCount++;
        }
      }
      this.activateVao(geometry, program);
      this._activeVao = vao;
      vaoObjectHash[program.id] = vao;
      vaoObjectHash[signature] = vao;
      return vao;
    };
    GeometrySystem2.prototype.disposeBuffer = function(buffer, contextLost) {
      if (!this.managedBuffers[buffer.id]) {
        return;
      }
      delete this.managedBuffers[buffer.id];
      var glBuffer = buffer._glBuffers[this.CONTEXT_UID];
      var gl = this.gl;
      buffer.disposeRunner.remove(this);
      if (!glBuffer) {
        return;
      }
      if (!contextLost) {
        gl.deleteBuffer(glBuffer.buffer);
      }
      delete buffer._glBuffers[this.CONTEXT_UID];
    };
    GeometrySystem2.prototype.disposeGeometry = function(geometry, contextLost) {
      if (!this.managedGeometries[geometry.id]) {
        return;
      }
      delete this.managedGeometries[geometry.id];
      var vaos = geometry.glVertexArrayObjects[this.CONTEXT_UID];
      var gl = this.gl;
      var buffers = geometry.buffers;
      geometry.disposeRunner.remove(this);
      if (!vaos) {
        return;
      }
      for (var i = 0; i < buffers.length; i++) {
        var buf = buffers[i]._glBuffers[this.CONTEXT_UID];
        buf.refCount--;
        if (buf.refCount === 0 && !contextLost) {
          this.disposeBuffer(buffers[i], contextLost);
        }
      }
      if (!contextLost) {
        for (var vaoId in vaos) {
          if (vaoId[0] === "g") {
            var vao = vaos[vaoId];
            if (this._activeVao === vao) {
              this.unbind();
            }
            gl.deleteVertexArray(vao);
          }
        }
      }
      delete geometry.glVertexArrayObjects[this.CONTEXT_UID];
    };
    GeometrySystem2.prototype.disposeAll = function(contextLost) {
      var all = Object.keys(this.managedGeometries);
      for (var i = 0; i < all.length; i++) {
        this.disposeGeometry(this.managedGeometries[all[i]], contextLost);
      }
      all = Object.keys(this.managedBuffers);
      for (var i = 0; i < all.length; i++) {
        this.disposeBuffer(this.managedBuffers[all[i]], contextLost);
      }
    };
    GeometrySystem2.prototype.activateVao = function(geometry, program) {
      var gl = this.gl;
      var CONTEXT_UID = this.CONTEXT_UID;
      var buffers = geometry.buffers;
      var attributes = geometry.attributes;
      if (geometry.indexBuffer) {
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, geometry.indexBuffer._glBuffers[CONTEXT_UID].buffer);
      }
      var lastBuffer = null;
      for (var j in attributes) {
        var attribute = attributes[j];
        var buffer = buffers[attribute.buffer];
        var glBuffer = buffer._glBuffers[CONTEXT_UID];
        if (program.attributeData[j]) {
          if (lastBuffer !== glBuffer) {
            gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer.buffer);
            lastBuffer = glBuffer;
          }
          var location = program.attributeData[j].location;
          gl.enableVertexAttribArray(location);
          gl.vertexAttribPointer(location, attribute.size, attribute.type || gl.FLOAT, attribute.normalized, attribute.stride, attribute.start);
          if (attribute.instance) {
            if (this.hasInstance) {
              gl.vertexAttribDivisor(location, 1);
            } else {
              throw new Error("geometry error, GPU Instancing is not supported on this device");
            }
          }
        }
      }
    };
    GeometrySystem2.prototype.draw = function(type, size, start, instanceCount) {
      var gl = this.gl;
      var geometry = this._activeGeometry;
      if (geometry.indexBuffer) {
        var byteSize = geometry.indexBuffer.data.BYTES_PER_ELEMENT;
        var glType = byteSize === 2 ? gl.UNSIGNED_SHORT : gl.UNSIGNED_INT;
        if (byteSize === 2 || byteSize === 4 && this.canUseUInt32ElementIndex) {
          if (geometry.instanced) {
            gl.drawElementsInstanced(type, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize, instanceCount || 1);
          } else {
            gl.drawElements(type, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize);
          }
        } else {
          console.warn("unsupported index buffer type: uint32");
        }
      } else if (geometry.instanced) {
        gl.drawArraysInstanced(type, start, size || geometry.getSize(), instanceCount || 1);
      } else {
        gl.drawArrays(type, start, size || geometry.getSize());
      }
      return this;
    };
    GeometrySystem2.prototype.unbind = function() {
      this.gl.bindVertexArray(null);
      this._activeVao = null;
      this._activeGeometry = null;
    };
    return GeometrySystem2;
  }(System);
  var MaskData = function() {
    function MaskData2(maskObject) {
      if (maskObject === void 0) {
        maskObject = null;
      }
      this.type = MASK_TYPES.NONE;
      this.autoDetect = true;
      this.maskObject = maskObject || null;
      this.pooled = false;
      this.isMaskData = true;
      this._stencilCounter = 0;
      this._scissorCounter = 0;
      this._scissorRect = null;
      this._target = null;
    }
    MaskData2.prototype.reset = function() {
      if (this.pooled) {
        this.maskObject = null;
        this.type = MASK_TYPES.NONE;
        this.autoDetect = true;
      }
      this._target = null;
    };
    MaskData2.prototype.copyCountersOrReset = function(maskAbove) {
      if (maskAbove) {
        this._stencilCounter = maskAbove._stencilCounter;
        this._scissorCounter = maskAbove._scissorCounter;
        this._scissorRect = maskAbove._scissorRect;
      } else {
        this._stencilCounter = 0;
        this._scissorCounter = 0;
        this._scissorRect = null;
      }
    };
    return MaskData2;
  }();
  function compileShader(gl, type, src) {
    var shader = gl.createShader(type);
    gl.shaderSource(shader, src);
    gl.compileShader(shader);
    return shader;
  }
  function compileProgram(gl, vertexSrc, fragmentSrc, attributeLocations) {
    var glVertShader = compileShader(gl, gl.VERTEX_SHADER, vertexSrc);
    var glFragShader = compileShader(gl, gl.FRAGMENT_SHADER, fragmentSrc);
    var program = gl.createProgram();
    gl.attachShader(program, glVertShader);
    gl.attachShader(program, glFragShader);
    if (attributeLocations) {
      for (var i in attributeLocations) {
        gl.bindAttribLocation(program, attributeLocations[i], i);
      }
    }
    gl.linkProgram(program);
    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
      if (!gl.getShaderParameter(glVertShader, gl.COMPILE_STATUS)) {
        console.warn(vertexSrc);
        console.error(gl.getShaderInfoLog(glVertShader));
      }
      if (!gl.getShaderParameter(glFragShader, gl.COMPILE_STATUS)) {
        console.warn(fragmentSrc);
        console.error(gl.getShaderInfoLog(glFragShader));
      }
      console.error("Pixi.js Error: Could not initialize shader.");
      console.error("gl.VALIDATE_STATUS", gl.getProgramParameter(program, gl.VALIDATE_STATUS));
      console.error("gl.getError()", gl.getError());
      if (gl.getProgramInfoLog(program) !== "") {
        console.warn("Pixi.js Warning: gl.getProgramInfoLog()", gl.getProgramInfoLog(program));
      }
      gl.deleteProgram(program);
      program = null;
    }
    gl.deleteShader(glVertShader);
    gl.deleteShader(glFragShader);
    return program;
  }
  function booleanArray(size) {
    var array = new Array(size);
    for (var i = 0; i < array.length; i++) {
      array[i] = false;
    }
    return array;
  }
  function defaultValue(type, size) {
    switch (type) {
      case "float":
        return 0;
      case "vec2":
        return new Float32Array(2 * size);
      case "vec3":
        return new Float32Array(3 * size);
      case "vec4":
        return new Float32Array(4 * size);
      case "int":
      case "sampler2D":
      case "sampler2DArray":
        return 0;
      case "ivec2":
        return new Int32Array(2 * size);
      case "ivec3":
        return new Int32Array(3 * size);
      case "ivec4":
        return new Int32Array(4 * size);
      case "bool":
        return false;
      case "bvec2":
        return booleanArray(2 * size);
      case "bvec3":
        return booleanArray(3 * size);
      case "bvec4":
        return booleanArray(4 * size);
      case "mat2":
        return new Float32Array([
          1,
          0,
          0,
          1
        ]);
      case "mat3":
        return new Float32Array([
          1,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          1
        ]);
      case "mat4":
        return new Float32Array([
          1,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          1
        ]);
    }
    return null;
  }
  var unknownContext = {};
  var context = unknownContext;
  function getTestContext() {
    if (context === unknownContext || context && context.isContextLost()) {
      var canvas2 = document.createElement("canvas");
      var gl = void 0;
      if (settings.PREFER_ENV >= ENV.WEBGL2) {
        gl = canvas2.getContext("webgl2", {});
      }
      if (!gl) {
        gl = canvas2.getContext("webgl", {}) || canvas2.getContext("experimental-webgl", {});
        if (!gl) {
          gl = null;
        } else {
          gl.getExtension("WEBGL_draw_buffers");
        }
      }
      context = gl;
    }
    return context;
  }
  var maxFragmentPrecision;
  function getMaxFragmentPrecision() {
    if (!maxFragmentPrecision) {
      maxFragmentPrecision = PRECISION.MEDIUM;
      var gl = getTestContext();
      if (gl) {
        if (gl.getShaderPrecisionFormat) {
          var shaderFragment = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);
          maxFragmentPrecision = shaderFragment.precision ? PRECISION.HIGH : PRECISION.MEDIUM;
        }
      }
    }
    return maxFragmentPrecision;
  }
  function setPrecision(src, requestedPrecision, maxSupportedPrecision) {
    if (src.substring(0, 9) !== "precision") {
      var precision = requestedPrecision;
      if (requestedPrecision === PRECISION.HIGH && maxSupportedPrecision !== PRECISION.HIGH) {
        precision = PRECISION.MEDIUM;
      }
      return "precision " + precision + " float;\n" + src;
    } else if (maxSupportedPrecision !== PRECISION.HIGH && src.substring(0, 15) === "precision highp") {
      return src.replace("precision highp", "precision mediump");
    }
    return src;
  }
  var GLSL_TO_SIZE = {
    float: 1,
    vec2: 2,
    vec3: 3,
    vec4: 4,
    int: 1,
    ivec2: 2,
    ivec3: 3,
    ivec4: 4,
    bool: 1,
    bvec2: 2,
    bvec3: 3,
    bvec4: 4,
    mat2: 4,
    mat3: 9,
    mat4: 16,
    sampler2D: 1
  };
  function mapSize(type) {
    return GLSL_TO_SIZE[type];
  }
  var GL_TABLE = null;
  var GL_TO_GLSL_TYPES = {
    FLOAT: "float",
    FLOAT_VEC2: "vec2",
    FLOAT_VEC3: "vec3",
    FLOAT_VEC4: "vec4",
    INT: "int",
    INT_VEC2: "ivec2",
    INT_VEC3: "ivec3",
    INT_VEC4: "ivec4",
    BOOL: "bool",
    BOOL_VEC2: "bvec2",
    BOOL_VEC3: "bvec3",
    BOOL_VEC4: "bvec4",
    FLOAT_MAT2: "mat2",
    FLOAT_MAT3: "mat3",
    FLOAT_MAT4: "mat4",
    SAMPLER_2D: "sampler2D",
    INT_SAMPLER_2D: "sampler2D",
    UNSIGNED_INT_SAMPLER_2D: "sampler2D",
    SAMPLER_CUBE: "samplerCube",
    INT_SAMPLER_CUBE: "samplerCube",
    UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
    SAMPLER_2D_ARRAY: "sampler2DArray",
    INT_SAMPLER_2D_ARRAY: "sampler2DArray",
    UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray"
  };
  function mapType(gl, type) {
    if (!GL_TABLE) {
      var typeNames = Object.keys(GL_TO_GLSL_TYPES);
      GL_TABLE = {};
      for (var i = 0; i < typeNames.length; ++i) {
        var tn = typeNames[i];
        GL_TABLE[gl[tn]] = GL_TO_GLSL_TYPES[tn];
      }
    }
    return GL_TABLE[type];
  }
  var uniformParsers = [
    {
      test: function(data) {
        return data.type === "float" && data.size === 1;
      },
      code: function(name) {
        return '\n            if(uv["' + name + '"] !== ud["' + name + '"].value)\n            {\n                ud["' + name + '"].value = uv["' + name + '"]\n                gl.uniform1f(ud["' + name + '"].location, uv["' + name + '"])\n            }\n            ';
      }
    },
    {
      test: function(data) {
        return (data.type === "sampler2D" || data.type === "samplerCube" || data.type === "sampler2DArray") && data.size === 1 && !data.isArray;
      },
      code: function(name) {
        return 't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["' + name + '"], t);\n\n            if(ud["' + name + '"].value !== t)\n            {\n                ud["' + name + '"].value = t;\n                gl.uniform1i(ud["' + name + '"].location, t);\n; // eslint-disable-line max-len\n            }';
      }
    },
    {
      test: function(data, uniform) {
        return data.type === "mat3" && data.size === 1 && uniform.a !== void 0;
      },
      code: function(name) {
        return '\n            gl.uniformMatrix3fv(ud["' + name + '"].location, false, uv["' + name + '"].toArray(true));\n            ';
      }
    },
    {
      test: function(data, uniform) {
        return data.type === "vec2" && data.size === 1 && uniform.x !== void 0;
      },
      code: function(name) {
        return '\n                cv = ud["' + name + '"].value;\n                v = uv["' + name + '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["' + name + '"].location, v.x, v.y);\n                }';
      }
    },
    {
      test: function(data) {
        return data.type === "vec2" && data.size === 1;
      },
      code: function(name) {
        return '\n                cv = ud["' + name + '"].value;\n                v = uv["' + name + '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["' + name + '"].location, v[0], v[1]);\n                }\n            ';
      }
    },
    {
      test: function(data, uniform) {
        return data.type === "vec4" && data.size === 1 && uniform.width !== void 0;
      },
      code: function(name) {
        return '\n                cv = ud["' + name + '"].value;\n                v = uv["' + name + '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["' + name + '"].location, v.x, v.y, v.width, v.height)\n                }';
      }
    },
    {
      test: function(data) {
        return data.type === "vec4" && data.size === 1;
      },
      code: function(name) {
        return '\n                cv = ud["' + name + '"].value;\n                v = uv["' + name + '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["' + name + '"].location, v[0], v[1], v[2], v[3])\n                }';
      }
    }
  ];
  var GLSL_TO_SINGLE_SETTERS_CACHED = {
    float: "\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",
    vec2: "\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",
    vec3: "\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",
    vec4: "gl.uniform4f(location, v[0], v[1], v[2], v[3])",
    int: "gl.uniform1i(location, v)",
    ivec2: "gl.uniform2i(location, v[0], v[1])",
    ivec3: "gl.uniform3i(location, v[0], v[1], v[2])",
    ivec4: "gl.uniform4i(location, v[0], v[1], v[2], v[3])",
    bool: "gl.uniform1i(location, v)",
    bvec2: "gl.uniform2i(location, v[0], v[1])",
    bvec3: "gl.uniform3i(location, v[0], v[1], v[2])",
    bvec4: "gl.uniform4i(location, v[0], v[1], v[2], v[3])",
    mat2: "gl.uniformMatrix2fv(location, false, v)",
    mat3: "gl.uniformMatrix3fv(location, false, v)",
    mat4: "gl.uniformMatrix4fv(location, false, v)",
    sampler2D: "gl.uniform1i(location, v)",
    samplerCube: "gl.uniform1i(location, v)",
    sampler2DArray: "gl.uniform1i(location, v)"
  };
  var GLSL_TO_ARRAY_SETTERS = {
    float: "gl.uniform1fv(location, v)",
    vec2: "gl.uniform2fv(location, v)",
    vec3: "gl.uniform3fv(location, v)",
    vec4: "gl.uniform4fv(location, v)",
    mat4: "gl.uniformMatrix4fv(location, false, v)",
    mat3: "gl.uniformMatrix3fv(location, false, v)",
    mat2: "gl.uniformMatrix2fv(location, false, v)",
    int: "gl.uniform1iv(location, v)",
    ivec2: "gl.uniform2iv(location, v)",
    ivec3: "gl.uniform3iv(location, v)",
    ivec4: "gl.uniform4iv(location, v)",
    bool: "gl.uniform1iv(location, v)",
    bvec2: "gl.uniform2iv(location, v)",
    bvec3: "gl.uniform3iv(location, v)",
    bvec4: "gl.uniform4iv(location, v)",
    sampler2D: "gl.uniform1iv(location, v)",
    samplerCube: "gl.uniform1iv(location, v)",
    sampler2DArray: "gl.uniform1iv(location, v)"
  };
  function generateUniformsSync(group, uniformData) {
    var funcFragments = ["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];
    for (var i in group.uniforms) {
      var data = uniformData[i];
      if (!data) {
        if (group.uniforms[i].group) {
          funcFragments.push('\n                    renderer.shader.syncUniformGroup(uv["' + i + '"], syncData);\n                ');
        }
        continue;
      }
      var uniform = group.uniforms[i];
      var parsed = false;
      for (var j = 0; j < uniformParsers.length; j++) {
        if (uniformParsers[j].test(data, uniform)) {
          funcFragments.push(uniformParsers[j].code(i, uniform));
          parsed = true;
          break;
        }
      }
      if (!parsed) {
        var templateType = data.size === 1 ? GLSL_TO_SINGLE_SETTERS_CACHED : GLSL_TO_ARRAY_SETTERS;
        var template = templateType[data.type].replace("location", 'ud["' + i + '"].location');
        funcFragments.push('\n            cv = ud["' + i + '"].value;\n            v = uv["' + i + '"];\n            ' + template + ";");
      }
    }
    return new Function("ud", "uv", "renderer", "syncData", funcFragments.join("\n"));
  }
  var fragTemplate = [
    "precision mediump float;",
    "void main(void){",
    "float test = 0.1;",
    "%forloop%",
    "gl_FragColor = vec4(0.0);",
    "}"
  ].join("\n");
  function generateIfTestSrc(maxIfs) {
    var src = "";
    for (var i = 0; i < maxIfs; ++i) {
      if (i > 0) {
        src += "\nelse ";
      }
      if (i < maxIfs - 1) {
        src += "if(test == " + i + ".0){}";
      }
    }
    return src;
  }
  function checkMaxIfStatementsInShader(maxIfs, gl) {
    if (maxIfs === 0) {
      throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");
    }
    var shader = gl.createShader(gl.FRAGMENT_SHADER);
    while (true) {
      var fragmentSrc = fragTemplate.replace(/%forloop%/gi, generateIfTestSrc(maxIfs));
      gl.shaderSource(shader, fragmentSrc);
      gl.compileShader(shader);
      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        maxIfs = maxIfs / 2 | 0;
      } else {
        break;
      }
    }
    return maxIfs;
  }
  var unsafeEval;
  function unsafeEvalSupported() {
    if (typeof unsafeEval === "boolean") {
      return unsafeEval;
    }
    try {
      var func = new Function("param1", "param2", "param3", "return param1[param2] === param3;");
      unsafeEval = func({a: "b"}, "a", "b") === true;
    } catch (e) {
      unsafeEval = false;
    }
    return unsafeEval;
  }
  var defaultFragment = "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}";
  var defaultVertex = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n";
  var UID$3 = 0;
  var nameCache = {};
  var Program = function() {
    function Program2(vertexSrc, fragmentSrc, name) {
      if (name === void 0) {
        name = "pixi-shader";
      }
      this.id = UID$3++;
      this.vertexSrc = vertexSrc || Program2.defaultVertexSrc;
      this.fragmentSrc = fragmentSrc || Program2.defaultFragmentSrc;
      this.vertexSrc = this.vertexSrc.trim();
      this.fragmentSrc = this.fragmentSrc.trim();
      if (this.vertexSrc.substring(0, 8) !== "#version") {
        name = name.replace(/\s+/g, "-");
        if (nameCache[name]) {
          nameCache[name]++;
          name += "-" + nameCache[name];
        } else {
          nameCache[name] = 1;
        }
        this.vertexSrc = "#define SHADER_NAME " + name + "\n" + this.vertexSrc;
        this.fragmentSrc = "#define SHADER_NAME " + name + "\n" + this.fragmentSrc;
        this.vertexSrc = setPrecision(this.vertexSrc, settings.PRECISION_VERTEX, PRECISION.HIGH);
        this.fragmentSrc = setPrecision(this.fragmentSrc, settings.PRECISION_FRAGMENT, getMaxFragmentPrecision());
      }
      this.extractData(this.vertexSrc, this.fragmentSrc);
      this.glPrograms = {};
      this.syncUniforms = null;
    }
    Program2.prototype.extractData = function(vertexSrc, fragmentSrc) {
      var gl = getTestContext();
      if (gl) {
        var program = compileProgram(gl, vertexSrc, fragmentSrc);
        this.attributeData = this.getAttributeData(program, gl);
        this.uniformData = this.getUniformData(program, gl);
        gl.deleteProgram(program);
      } else {
        this.uniformData = {};
        this.attributeData = {};
      }
    };
    Program2.prototype.getAttributeData = function(program, gl) {
      var attributes = {};
      var attributesArray = [];
      var totalAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);
      for (var i = 0; i < totalAttributes; i++) {
        var attribData = gl.getActiveAttrib(program, i);
        var type = mapType(gl, attribData.type);
        var data = {
          type,
          name: attribData.name,
          size: mapSize(type),
          location: 0
        };
        attributes[attribData.name] = data;
        attributesArray.push(data);
      }
      attributesArray.sort(function(a, b) {
        return a.name > b.name ? 1 : -1;
      });
      for (var i = 0; i < attributesArray.length; i++) {
        attributesArray[i].location = i;
      }
      return attributes;
    };
    Program2.prototype.getUniformData = function(program, gl) {
      var uniforms = {};
      var totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);
      for (var i = 0; i < totalUniforms; i++) {
        var uniformData = gl.getActiveUniform(program, i);
        var name = uniformData.name.replace(/\[.*?\]$/, "");
        var isArray = uniformData.name.match(/\[.*?\]$/);
        var type = mapType(gl, uniformData.type);
        uniforms[name] = {
          type,
          size: uniformData.size,
          isArray,
          value: defaultValue(type, uniformData.size)
        };
      }
      return uniforms;
    };
    Object.defineProperty(Program2, "defaultVertexSrc", {
      get: function() {
        return defaultVertex;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Program2, "defaultFragmentSrc", {
      get: function() {
        return defaultFragment;
      },
      enumerable: false,
      configurable: true
    });
    Program2.from = function(vertexSrc, fragmentSrc, name) {
      var key = vertexSrc + fragmentSrc;
      var program = ProgramCache[key];
      if (!program) {
        ProgramCache[key] = program = new Program2(vertexSrc, fragmentSrc, name);
      }
      return program;
    };
    return Program2;
  }();
  var Shader = function() {
    function Shader2(program, uniforms) {
      this.program = program;
      if (uniforms) {
        if (uniforms instanceof UniformGroup) {
          this.uniformGroup = uniforms;
        } else {
          this.uniformGroup = new UniformGroup(uniforms);
        }
      } else {
        this.uniformGroup = new UniformGroup({});
      }
      for (var i in program.uniformData) {
        if (this.uniformGroup.uniforms[i] instanceof Array) {
          this.uniformGroup.uniforms[i] = new Float32Array(this.uniformGroup.uniforms[i]);
        }
      }
    }
    Shader2.prototype.checkUniformExists = function(name, group) {
      if (group.uniforms[name]) {
        return true;
      }
      for (var i in group.uniforms) {
        var uniform = group.uniforms[i];
        if (uniform.group) {
          if (this.checkUniformExists(name, uniform)) {
            return true;
          }
        }
      }
      return false;
    };
    Shader2.prototype.destroy = function() {
      this.uniformGroup = null;
    };
    Object.defineProperty(Shader2.prototype, "uniforms", {
      get: function() {
        return this.uniformGroup.uniforms;
      },
      enumerable: false,
      configurable: true
    });
    Shader2.from = function(vertexSrc, fragmentSrc, uniforms) {
      var program = Program.from(vertexSrc, fragmentSrc);
      return new Shader2(program, uniforms);
    };
    return Shader2;
  }();
  var BLEND = 0;
  var OFFSET = 1;
  var CULLING = 2;
  var DEPTH_TEST = 3;
  var WINDING = 4;
  var State = function() {
    function State2() {
      this.data = 0;
      this.blendMode = BLEND_MODES.NORMAL;
      this.polygonOffset = 0;
      this.blend = true;
    }
    Object.defineProperty(State2.prototype, "blend", {
      get: function() {
        return !!(this.data & 1 << BLEND);
      },
      set: function(value) {
        if (!!(this.data & 1 << BLEND) !== value) {
          this.data ^= 1 << BLEND;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(State2.prototype, "offsets", {
      get: function() {
        return !!(this.data & 1 << OFFSET);
      },
      set: function(value) {
        if (!!(this.data & 1 << OFFSET) !== value) {
          this.data ^= 1 << OFFSET;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(State2.prototype, "culling", {
      get: function() {
        return !!(this.data & 1 << CULLING);
      },
      set: function(value) {
        if (!!(this.data & 1 << CULLING) !== value) {
          this.data ^= 1 << CULLING;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(State2.prototype, "depthTest", {
      get: function() {
        return !!(this.data & 1 << DEPTH_TEST);
      },
      set: function(value) {
        if (!!(this.data & 1 << DEPTH_TEST) !== value) {
          this.data ^= 1 << DEPTH_TEST;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(State2.prototype, "clockwiseFrontFace", {
      get: function() {
        return !!(this.data & 1 << WINDING);
      },
      set: function(value) {
        if (!!(this.data & 1 << WINDING) !== value) {
          this.data ^= 1 << WINDING;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(State2.prototype, "blendMode", {
      get: function() {
        return this._blendMode;
      },
      set: function(value) {
        this.blend = value !== BLEND_MODES.NONE;
        this._blendMode = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(State2.prototype, "polygonOffset", {
      get: function() {
        return this._polygonOffset;
      },
      set: function(value) {
        this.offsets = !!value;
        this._polygonOffset = value;
      },
      enumerable: false,
      configurable: true
    });
    State2.for2d = function() {
      var state = new State2();
      state.depthTest = false;
      state.blend = true;
      return state;
    };
    return State2;
  }();
  var defaultVertex$1 = "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";
  var defaultFragment$1 = "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n";
  var Filter = function(_super) {
    __extends3(Filter2, _super);
    function Filter2(vertexSrc, fragmentSrc, uniforms) {
      var _this = this;
      var program = Program.from(vertexSrc || Filter2.defaultVertexSrc, fragmentSrc || Filter2.defaultFragmentSrc);
      _this = _super.call(this, program, uniforms) || this;
      _this.padding = 0;
      _this.resolution = settings.FILTER_RESOLUTION;
      _this.enabled = true;
      _this.autoFit = true;
      _this.legacy = !!_this.program.attributeData.aTextureCoord;
      _this.state = new State();
      return _this;
    }
    Filter2.prototype.apply = function(filterManager, input, output, clearMode, _currentState) {
      filterManager.applyFilter(this, input, output, clearMode);
    };
    Object.defineProperty(Filter2.prototype, "blendMode", {
      get: function() {
        return this.state.blendMode;
      },
      set: function(value) {
        this.state.blendMode = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Filter2, "defaultVertexSrc", {
      get: function() {
        return defaultVertex$1;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Filter2, "defaultFragmentSrc", {
      get: function() {
        return defaultFragment$1;
      },
      enumerable: false,
      configurable: true
    });
    return Filter2;
  }(Shader);
  var vertex = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n";
  var fragment = "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n";
  var tempMat = new Matrix();
  var TextureMatrix = function() {
    function TextureMatrix2(texture, clampMargin) {
      this._texture = texture;
      this.mapCoord = new Matrix();
      this.uClampFrame = new Float32Array(4);
      this.uClampOffset = new Float32Array(2);
      this._textureID = -1;
      this._updateID = 0;
      this.clampOffset = 0;
      this.clampMargin = typeof clampMargin === "undefined" ? 0.5 : clampMargin;
      this.isSimple = false;
    }
    Object.defineProperty(TextureMatrix2.prototype, "texture", {
      get: function() {
        return this._texture;
      },
      set: function(value) {
        this._texture = value;
        this._textureID = -1;
      },
      enumerable: false,
      configurable: true
    });
    TextureMatrix2.prototype.multiplyUvs = function(uvs, out) {
      if (out === void 0) {
        out = uvs;
      }
      var mat = this.mapCoord;
      for (var i = 0; i < uvs.length; i += 2) {
        var x = uvs[i];
        var y = uvs[i + 1];
        out[i] = x * mat.a + y * mat.c + mat.tx;
        out[i + 1] = x * mat.b + y * mat.d + mat.ty;
      }
      return out;
    };
    TextureMatrix2.prototype.update = function(forceUpdate) {
      var tex = this._texture;
      if (!tex || !tex.valid) {
        return false;
      }
      if (!forceUpdate && this._textureID === tex._updateID) {
        return false;
      }
      this._textureID = tex._updateID;
      this._updateID++;
      var uvs = tex._uvs;
      this.mapCoord.set(uvs.x1 - uvs.x0, uvs.y1 - uvs.y0, uvs.x3 - uvs.x0, uvs.y3 - uvs.y0, uvs.x0, uvs.y0);
      var orig = tex.orig;
      var trim = tex.trim;
      if (trim) {
        tempMat.set(orig.width / trim.width, 0, 0, orig.height / trim.height, -trim.x / trim.width, -trim.y / trim.height);
        this.mapCoord.append(tempMat);
      }
      var texBase = tex.baseTexture;
      var frame = this.uClampFrame;
      var margin = this.clampMargin / texBase.resolution;
      var offset = this.clampOffset;
      frame[0] = (tex._frame.x + margin + offset) / texBase.width;
      frame[1] = (tex._frame.y + margin + offset) / texBase.height;
      frame[2] = (tex._frame.x + tex._frame.width - margin + offset) / texBase.width;
      frame[3] = (tex._frame.y + tex._frame.height - margin + offset) / texBase.height;
      this.uClampOffset[0] = offset / texBase.realWidth;
      this.uClampOffset[1] = offset / texBase.realHeight;
      this.isSimple = tex._frame.width === texBase.width && tex._frame.height === texBase.height && tex.rotate === 0;
      return true;
    };
    return TextureMatrix2;
  }();
  var SpriteMaskFilter = function(_super) {
    __extends3(SpriteMaskFilter2, _super);
    function SpriteMaskFilter2(sprite) {
      var _this = this;
      var maskMatrix = new Matrix();
      _this = _super.call(this, vertex, fragment) || this;
      sprite.renderable = false;
      _this.maskSprite = sprite;
      _this.maskMatrix = maskMatrix;
      return _this;
    }
    SpriteMaskFilter2.prototype.apply = function(filterManager, input, output, clearMode) {
      var maskSprite = this.maskSprite;
      var tex = maskSprite._texture;
      if (!tex.valid) {
        return;
      }
      if (!tex.uvMatrix) {
        tex.uvMatrix = new TextureMatrix(tex, 0);
      }
      tex.uvMatrix.update();
      this.uniforms.npmAlpha = tex.baseTexture.alphaMode ? 0 : 1;
      this.uniforms.mask = tex;
      this.uniforms.otherMatrix = filterManager.calculateSpriteMatrix(this.maskMatrix, maskSprite).prepend(tex.uvMatrix.mapCoord);
      this.uniforms.alpha = maskSprite.worldAlpha;
      this.uniforms.maskClamp = tex.uvMatrix.uClampFrame;
      filterManager.applyFilter(this, input, output, clearMode);
    };
    return SpriteMaskFilter2;
  }(Filter);
  var MaskSystem = function(_super) {
    __extends3(MaskSystem2, _super);
    function MaskSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.enableScissor = false;
      _this.alphaMaskPool = [];
      _this.maskDataPool = [];
      _this.maskStack = [];
      _this.alphaMaskIndex = 0;
      return _this;
    }
    MaskSystem2.prototype.setMaskStack = function(maskStack) {
      this.maskStack = maskStack;
      this.renderer.scissor.setMaskStack(maskStack);
      this.renderer.stencil.setMaskStack(maskStack);
    };
    MaskSystem2.prototype.push = function(target, maskDataOrTarget) {
      var maskData = maskDataOrTarget;
      if (!maskData.isMaskData) {
        var d = this.maskDataPool.pop() || new MaskData();
        d.pooled = true;
        d.maskObject = maskDataOrTarget;
        maskData = d;
      }
      if (maskData.autoDetect) {
        this.detect(maskData);
      }
      maskData.copyCountersOrReset(this.maskStack[this.maskStack.length - 1]);
      maskData._target = target;
      switch (maskData.type) {
        case MASK_TYPES.SCISSOR:
          this.maskStack.push(maskData);
          this.renderer.scissor.push(maskData);
          break;
        case MASK_TYPES.STENCIL:
          this.maskStack.push(maskData);
          this.renderer.stencil.push(maskData);
          break;
        case MASK_TYPES.SPRITE:
          maskData.copyCountersOrReset(null);
          this.pushSpriteMask(maskData);
          this.maskStack.push(maskData);
          break;
        default:
          break;
      }
    };
    MaskSystem2.prototype.pop = function(target) {
      var maskData = this.maskStack.pop();
      if (!maskData || maskData._target !== target) {
        return;
      }
      switch (maskData.type) {
        case MASK_TYPES.SCISSOR:
          this.renderer.scissor.pop();
          break;
        case MASK_TYPES.STENCIL:
          this.renderer.stencil.pop(maskData.maskObject);
          break;
        case MASK_TYPES.SPRITE:
          this.popSpriteMask();
          break;
        default:
          break;
      }
      maskData.reset();
      if (maskData.pooled) {
        this.maskDataPool.push(maskData);
      }
    };
    MaskSystem2.prototype.detect = function(maskData) {
      var maskObject = maskData.maskObject;
      if (maskObject.isSprite) {
        maskData.type = MASK_TYPES.SPRITE;
        return;
      }
      maskData.type = MASK_TYPES.STENCIL;
      if (this.enableScissor && maskObject.isFastRect && maskObject.isFastRect()) {
        var matrix = maskObject.worldTransform;
        var rotX = Math.atan2(matrix.b, matrix.a);
        var rotXY = Math.atan2(matrix.d, matrix.c);
        rotX = Math.round(rotX * (180 / Math.PI) * 100);
        rotXY = Math.round(rotXY * (180 / Math.PI) * 100) - rotX;
        rotX = (rotX % 9e3 + 9e3) % 9e3;
        rotXY = (rotXY % 18e3 + 18e3) % 18e3;
        if (rotX === 0 && rotXY === 9e3) {
          maskData.type = MASK_TYPES.SCISSOR;
        }
      }
    };
    MaskSystem2.prototype.pushSpriteMask = function(maskData) {
      var maskObject = maskData.maskObject;
      var target = maskData._target;
      var alphaMaskFilter = this.alphaMaskPool[this.alphaMaskIndex];
      if (!alphaMaskFilter) {
        alphaMaskFilter = this.alphaMaskPool[this.alphaMaskIndex] = [new SpriteMaskFilter(maskObject)];
      }
      alphaMaskFilter[0].resolution = this.renderer.resolution;
      alphaMaskFilter[0].maskSprite = maskObject;
      var stashFilterArea = target.filterArea;
      target.filterArea = maskObject.getBounds(true);
      this.renderer.filter.push(target, alphaMaskFilter);
      target.filterArea = stashFilterArea;
      this.alphaMaskIndex++;
    };
    MaskSystem2.prototype.popSpriteMask = function() {
      this.renderer.filter.pop();
      this.alphaMaskIndex--;
    };
    return MaskSystem2;
  }(System);
  var AbstractMaskSystem = function(_super) {
    __extends3(AbstractMaskSystem2, _super);
    function AbstractMaskSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.maskStack = [];
      _this.glConst = 0;
      return _this;
    }
    AbstractMaskSystem2.prototype.getStackLength = function() {
      return this.maskStack.length;
    };
    AbstractMaskSystem2.prototype.setMaskStack = function(maskStack) {
      var gl = this.renderer.gl;
      var curStackLen = this.getStackLength();
      this.maskStack = maskStack;
      var newStackLen = this.getStackLength();
      if (newStackLen !== curStackLen) {
        if (newStackLen === 0) {
          gl.disable(this.glConst);
        } else {
          gl.enable(this.glConst);
          this._useCurrent();
        }
      }
    };
    AbstractMaskSystem2.prototype._useCurrent = function() {
    };
    AbstractMaskSystem2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      this.maskStack = null;
    };
    return AbstractMaskSystem2;
  }(System);
  var ScissorSystem = function(_super) {
    __extends3(ScissorSystem2, _super);
    function ScissorSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.glConst = WebGLRenderingContext.SCISSOR_TEST;
      return _this;
    }
    ScissorSystem2.prototype.getStackLength = function() {
      var maskData = this.maskStack[this.maskStack.length - 1];
      if (maskData) {
        return maskData._scissorCounter;
      }
      return 0;
    };
    ScissorSystem2.prototype.push = function(maskData) {
      var maskObject = maskData.maskObject;
      maskObject.renderable = true;
      var prevData = maskData._scissorRect;
      var bounds = maskObject.getBounds(true);
      var gl = this.renderer.gl;
      maskObject.renderable = false;
      if (prevData) {
        bounds.fit(prevData);
      } else {
        gl.enable(gl.SCISSOR_TEST);
      }
      maskData._scissorCounter++;
      maskData._scissorRect = bounds;
      this._useCurrent();
    };
    ScissorSystem2.prototype.pop = function() {
      var gl = this.renderer.gl;
      if (this.getStackLength() > 0) {
        this._useCurrent();
      } else {
        gl.disable(gl.SCISSOR_TEST);
      }
    };
    ScissorSystem2.prototype._useCurrent = function() {
      var rect = this.maskStack[this.maskStack.length - 1]._scissorRect;
      var rt = this.renderer.renderTexture.current;
      var _a2 = this.renderer.projection, transform = _a2.transform, sourceFrame = _a2.sourceFrame, destinationFrame = _a2.destinationFrame;
      var resolution = rt ? rt.resolution : this.renderer.resolution;
      var x = (rect.x - sourceFrame.x) * resolution + destinationFrame.x;
      var y = (rect.y - sourceFrame.y) * resolution + destinationFrame.y;
      var width = rect.width * resolution;
      var height = rect.height * resolution;
      if (transform) {
        x += transform.tx * resolution;
        y += transform.ty * resolution;
      }
      if (!rt) {
        y = this.renderer.height - height - y;
      }
      this.renderer.gl.scissor(x, y, width, height);
    };
    return ScissorSystem2;
  }(AbstractMaskSystem);
  var StencilSystem = function(_super) {
    __extends3(StencilSystem2, _super);
    function StencilSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.glConst = WebGLRenderingContext.STENCIL_TEST;
      return _this;
    }
    StencilSystem2.prototype.getStackLength = function() {
      var maskData = this.maskStack[this.maskStack.length - 1];
      if (maskData) {
        return maskData._stencilCounter;
      }
      return 0;
    };
    StencilSystem2.prototype.push = function(maskData) {
      var maskObject = maskData.maskObject;
      var gl = this.renderer.gl;
      var prevMaskCount = maskData._stencilCounter;
      if (prevMaskCount === 0) {
        this.renderer.framebuffer.forceStencil();
        gl.enable(gl.STENCIL_TEST);
      }
      maskData._stencilCounter++;
      gl.colorMask(false, false, false, false);
      gl.stencilFunc(gl.EQUAL, prevMaskCount, this._getBitwiseMask());
      gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR);
      maskObject.renderable = true;
      maskObject.render(this.renderer);
      this.renderer.batch.flush();
      maskObject.renderable = false;
      this._useCurrent();
    };
    StencilSystem2.prototype.pop = function(maskObject) {
      var gl = this.renderer.gl;
      if (this.getStackLength() === 0) {
        gl.disable(gl.STENCIL_TEST);
        gl.clear(gl.STENCIL_BUFFER_BIT);
        gl.clearStencil(0);
      } else {
        gl.colorMask(false, false, false, false);
        gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR);
        maskObject.renderable = true;
        maskObject.render(this.renderer);
        this.renderer.batch.flush();
        maskObject.renderable = false;
        this._useCurrent();
      }
    };
    StencilSystem2.prototype._useCurrent = function() {
      var gl = this.renderer.gl;
      gl.colorMask(true, true, true, true);
      gl.stencilFunc(gl.EQUAL, this.getStackLength(), this._getBitwiseMask());
      gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);
    };
    StencilSystem2.prototype._getBitwiseMask = function() {
      return (1 << this.getStackLength()) - 1;
    };
    return StencilSystem2;
  }(AbstractMaskSystem);
  var ProjectionSystem = function(_super) {
    __extends3(ProjectionSystem2, _super);
    function ProjectionSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.destinationFrame = null;
      _this.sourceFrame = null;
      _this.defaultFrame = null;
      _this.projectionMatrix = new Matrix();
      _this.transform = null;
      return _this;
    }
    ProjectionSystem2.prototype.update = function(destinationFrame, sourceFrame, resolution, root) {
      this.destinationFrame = destinationFrame || this.destinationFrame || this.defaultFrame;
      this.sourceFrame = sourceFrame || this.sourceFrame || destinationFrame;
      this.calculateProjection(this.destinationFrame, this.sourceFrame, resolution, root);
      if (this.transform) {
        this.projectionMatrix.append(this.transform);
      }
      var renderer = this.renderer;
      renderer.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix;
      renderer.globalUniforms.update();
      if (renderer.shader.shader) {
        renderer.shader.syncUniformGroup(renderer.shader.shader.uniforms.globals);
      }
    };
    ProjectionSystem2.prototype.calculateProjection = function(_destinationFrame, sourceFrame, _resolution, root) {
      var pm = this.projectionMatrix;
      var sign2 = !root ? 1 : -1;
      pm.identity();
      pm.a = 1 / sourceFrame.width * 2;
      pm.d = sign2 * (1 / sourceFrame.height * 2);
      pm.tx = -1 - sourceFrame.x * pm.a;
      pm.ty = -sign2 - sourceFrame.y * pm.d;
    };
    ProjectionSystem2.prototype.setTransform = function(_matrix) {
    };
    return ProjectionSystem2;
  }(System);
  var tempRect = new Rectangle();
  var tempRect2 = new Rectangle();
  var viewportFrame = new Rectangle();
  var RenderTextureSystem = function(_super) {
    __extends3(RenderTextureSystem2, _super);
    function RenderTextureSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.clearColor = renderer._backgroundColorRgba;
      _this.defaultMaskStack = [];
      _this.current = null;
      _this.sourceFrame = new Rectangle();
      _this.destinationFrame = new Rectangle();
      return _this;
    }
    RenderTextureSystem2.prototype.bind = function(renderTexture, sourceFrame, destinationFrame) {
      if (renderTexture === void 0) {
        renderTexture = null;
      }
      var renderer = this.renderer;
      this.current = renderTexture;
      var baseTexture;
      var framebuffer;
      var resolution;
      if (renderTexture) {
        baseTexture = renderTexture.baseTexture;
        resolution = baseTexture.resolution;
        if (!sourceFrame) {
          tempRect.width = renderTexture.frame.width;
          tempRect.height = renderTexture.frame.height;
          sourceFrame = tempRect;
        }
        if (!destinationFrame) {
          tempRect2.x = renderTexture.frame.x;
          tempRect2.y = renderTexture.frame.y;
          tempRect2.width = sourceFrame.width;
          tempRect2.height = sourceFrame.height;
          destinationFrame = tempRect2;
        }
        framebuffer = baseTexture.framebuffer;
      } else {
        resolution = renderer.resolution;
        if (!sourceFrame) {
          tempRect.width = renderer.screen.width;
          tempRect.height = renderer.screen.height;
          sourceFrame = tempRect;
        }
        if (!destinationFrame) {
          destinationFrame = tempRect;
          destinationFrame.width = sourceFrame.width;
          destinationFrame.height = sourceFrame.height;
        }
      }
      viewportFrame.x = destinationFrame.x * resolution;
      viewportFrame.y = destinationFrame.y * resolution;
      viewportFrame.width = destinationFrame.width * resolution;
      viewportFrame.height = destinationFrame.height * resolution;
      this.renderer.framebuffer.bind(framebuffer, viewportFrame);
      this.renderer.projection.update(destinationFrame, sourceFrame, resolution, !framebuffer);
      if (renderTexture) {
        this.renderer.mask.setMaskStack(baseTexture.maskStack);
      } else {
        this.renderer.mask.setMaskStack(this.defaultMaskStack);
      }
      this.sourceFrame.copyFrom(sourceFrame);
      this.destinationFrame.copyFrom(destinationFrame);
    };
    RenderTextureSystem2.prototype.clear = function(clearColor, mask) {
      if (this.current) {
        clearColor = clearColor || this.current.baseTexture.clearColor;
      } else {
        clearColor = clearColor || this.clearColor;
      }
      this.renderer.framebuffer.clear(clearColor[0], clearColor[1], clearColor[2], clearColor[3], mask);
    };
    RenderTextureSystem2.prototype.resize = function() {
      this.bind(null);
    };
    RenderTextureSystem2.prototype.reset = function() {
      this.bind(null);
    };
    return RenderTextureSystem2;
  }(System);
  var IGLUniformData = function() {
    function IGLUniformData2() {
    }
    return IGLUniformData2;
  }();
  var GLProgram = function() {
    function GLProgram2(program, uniformData) {
      this.program = program;
      this.uniformData = uniformData;
      this.uniformGroups = {};
    }
    GLProgram2.prototype.destroy = function() {
      this.uniformData = null;
      this.uniformGroups = null;
      this.program = null;
    };
    return GLProgram2;
  }();
  var UID$4 = 0;
  var defaultSyncData = {textureCount: 0};
  var ShaderSystem = function(_super) {
    __extends3(ShaderSystem2, _super);
    function ShaderSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.destroyed = false;
      _this.systemCheck();
      _this.gl = null;
      _this.shader = null;
      _this.program = null;
      _this.cache = {};
      _this.id = UID$4++;
      return _this;
    }
    ShaderSystem2.prototype.systemCheck = function() {
      if (!unsafeEvalSupported()) {
        throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.");
      }
    };
    ShaderSystem2.prototype.contextChange = function(gl) {
      this.gl = gl;
      this.reset();
    };
    ShaderSystem2.prototype.bind = function(shader, dontSync) {
      shader.uniforms.globals = this.renderer.globalUniforms;
      var program = shader.program;
      var glProgram = program.glPrograms[this.renderer.CONTEXT_UID] || this.generateShader(shader);
      this.shader = shader;
      if (this.program !== program) {
        this.program = program;
        this.gl.useProgram(glProgram.program);
      }
      if (!dontSync) {
        defaultSyncData.textureCount = 0;
        this.syncUniformGroup(shader.uniformGroup, defaultSyncData);
      }
      return glProgram;
    };
    ShaderSystem2.prototype.setUniforms = function(uniforms) {
      var shader = this.shader.program;
      var glProgram = shader.glPrograms[this.renderer.CONTEXT_UID];
      shader.syncUniforms(glProgram.uniformData, uniforms, this.renderer);
    };
    ShaderSystem2.prototype.syncUniformGroup = function(group, syncData) {
      var glProgram = this.getglProgram();
      if (!group.static || group.dirtyId !== glProgram.uniformGroups[group.id]) {
        glProgram.uniformGroups[group.id] = group.dirtyId;
        this.syncUniforms(group, glProgram, syncData);
      }
    };
    ShaderSystem2.prototype.syncUniforms = function(group, glProgram, syncData) {
      var syncFunc = group.syncUniforms[this.shader.program.id] || this.createSyncGroups(group);
      syncFunc(glProgram.uniformData, group.uniforms, this.renderer, syncData);
    };
    ShaderSystem2.prototype.createSyncGroups = function(group) {
      var id = this.getSignature(group, this.shader.program.uniformData);
      if (!this.cache[id]) {
        this.cache[id] = generateUniformsSync(group, this.shader.program.uniformData);
      }
      group.syncUniforms[this.shader.program.id] = this.cache[id];
      return group.syncUniforms[this.shader.program.id];
    };
    ShaderSystem2.prototype.getSignature = function(group, uniformData) {
      var uniforms = group.uniforms;
      var strings = [];
      for (var i in uniforms) {
        strings.push(i);
        if (uniformData[i]) {
          strings.push(uniformData[i].type);
        }
      }
      return strings.join("-");
    };
    ShaderSystem2.prototype.getglProgram = function() {
      if (this.shader) {
        return this.shader.program.glPrograms[this.renderer.CONTEXT_UID];
      }
      return null;
    };
    ShaderSystem2.prototype.generateShader = function(shader) {
      var gl = this.gl;
      var program = shader.program;
      var attribMap = {};
      for (var i in program.attributeData) {
        attribMap[i] = program.attributeData[i].location;
      }
      var shaderProgram = compileProgram(gl, program.vertexSrc, program.fragmentSrc, attribMap);
      var uniformData = {};
      for (var i in program.uniformData) {
        var data = program.uniformData[i];
        uniformData[i] = {
          location: gl.getUniformLocation(shaderProgram, i),
          value: defaultValue(data.type, data.size)
        };
      }
      var glProgram = new GLProgram(shaderProgram, uniformData);
      program.glPrograms[this.renderer.CONTEXT_UID] = glProgram;
      return glProgram;
    };
    ShaderSystem2.prototype.reset = function() {
      this.program = null;
      this.shader = null;
    };
    ShaderSystem2.prototype.destroy = function() {
      this.destroyed = true;
    };
    return ShaderSystem2;
  }(System);
  function mapWebGLBlendModesToPixi(gl, array) {
    if (array === void 0) {
      array = [];
    }
    array[BLEND_MODES.NORMAL] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.ADD] = [gl.ONE, gl.ONE];
    array[BLEND_MODES.MULTIPLY] = [gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.SCREEN] = [gl.ONE, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.OVERLAY] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.DARKEN] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.LIGHTEN] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.COLOR_DODGE] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.COLOR_BURN] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.HARD_LIGHT] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.SOFT_LIGHT] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.DIFFERENCE] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.EXCLUSION] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.HUE] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.SATURATION] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.COLOR] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.LUMINOSITY] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.NONE] = [0, 0];
    array[BLEND_MODES.NORMAL_NPM] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.ADD_NPM] = [gl.SRC_ALPHA, gl.ONE, gl.ONE, gl.ONE];
    array[BLEND_MODES.SCREEN_NPM] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.SRC_IN] = [gl.DST_ALPHA, gl.ZERO];
    array[BLEND_MODES.SRC_OUT] = [gl.ONE_MINUS_DST_ALPHA, gl.ZERO];
    array[BLEND_MODES.SRC_ATOP] = [gl.DST_ALPHA, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.DST_OVER] = [gl.ONE_MINUS_DST_ALPHA, gl.ONE];
    array[BLEND_MODES.DST_IN] = [gl.ZERO, gl.SRC_ALPHA];
    array[BLEND_MODES.DST_OUT] = [gl.ZERO, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.DST_ATOP] = [gl.ONE_MINUS_DST_ALPHA, gl.SRC_ALPHA];
    array[BLEND_MODES.XOR] = [gl.ONE_MINUS_DST_ALPHA, gl.ONE_MINUS_SRC_ALPHA];
    array[BLEND_MODES.SUBTRACT] = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.FUNC_REVERSE_SUBTRACT, gl.FUNC_ADD];
    return array;
  }
  var BLEND$1 = 0;
  var OFFSET$1 = 1;
  var CULLING$1 = 2;
  var DEPTH_TEST$1 = 3;
  var WINDING$1 = 4;
  var StateSystem = function(_super) {
    __extends3(StateSystem2, _super);
    function StateSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.gl = null;
      _this.stateId = 0;
      _this.polygonOffset = 0;
      _this.blendMode = BLEND_MODES.NONE;
      _this._blendEq = false;
      _this.map = [];
      _this.map[BLEND$1] = _this.setBlend;
      _this.map[OFFSET$1] = _this.setOffset;
      _this.map[CULLING$1] = _this.setCullFace;
      _this.map[DEPTH_TEST$1] = _this.setDepthTest;
      _this.map[WINDING$1] = _this.setFrontFace;
      _this.checks = [];
      _this.defaultState = new State();
      _this.defaultState.blend = true;
      return _this;
    }
    StateSystem2.prototype.contextChange = function(gl) {
      this.gl = gl;
      this.blendModes = mapWebGLBlendModesToPixi(gl);
      this.set(this.defaultState);
      this.reset();
    };
    StateSystem2.prototype.set = function(state) {
      state = state || this.defaultState;
      if (this.stateId !== state.data) {
        var diff = this.stateId ^ state.data;
        var i = 0;
        while (diff) {
          if (diff & 1) {
            this.map[i].call(this, !!(state.data & 1 << i));
          }
          diff = diff >> 1;
          i++;
        }
        this.stateId = state.data;
      }
      for (var i = 0; i < this.checks.length; i++) {
        this.checks[i](this, state);
      }
    };
    StateSystem2.prototype.forceState = function(state) {
      state = state || this.defaultState;
      for (var i = 0; i < this.map.length; i++) {
        this.map[i].call(this, !!(state.data & 1 << i));
      }
      for (var i = 0; i < this.checks.length; i++) {
        this.checks[i](this, state);
      }
      this.stateId = state.data;
    };
    StateSystem2.prototype.setBlend = function(value) {
      this.updateCheck(StateSystem2.checkBlendMode, value);
      this.gl[value ? "enable" : "disable"](this.gl.BLEND);
    };
    StateSystem2.prototype.setOffset = function(value) {
      this.updateCheck(StateSystem2.checkPolygonOffset, value);
      this.gl[value ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL);
    };
    StateSystem2.prototype.setDepthTest = function(value) {
      this.gl[value ? "enable" : "disable"](this.gl.DEPTH_TEST);
    };
    StateSystem2.prototype.setCullFace = function(value) {
      this.gl[value ? "enable" : "disable"](this.gl.CULL_FACE);
    };
    StateSystem2.prototype.setFrontFace = function(value) {
      this.gl.frontFace(this.gl[value ? "CW" : "CCW"]);
    };
    StateSystem2.prototype.setBlendMode = function(value) {
      if (value === this.blendMode) {
        return;
      }
      this.blendMode = value;
      var mode = this.blendModes[value];
      var gl = this.gl;
      if (mode.length === 2) {
        gl.blendFunc(mode[0], mode[1]);
      } else {
        gl.blendFuncSeparate(mode[0], mode[1], mode[2], mode[3]);
      }
      if (mode.length === 6) {
        this._blendEq = true;
        gl.blendEquationSeparate(mode[4], mode[5]);
      } else if (this._blendEq) {
        this._blendEq = false;
        gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);
      }
    };
    StateSystem2.prototype.setPolygonOffset = function(value, scale) {
      this.gl.polygonOffset(value, scale);
    };
    StateSystem2.prototype.reset = function() {
      this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, false);
      this.forceState(this.defaultState);
      this._blendEq = true;
      this.blendMode = -1;
      this.setBlendMode(0);
    };
    StateSystem2.prototype.updateCheck = function(func, value) {
      var index4 = this.checks.indexOf(func);
      if (value && index4 === -1) {
        this.checks.push(func);
      } else if (!value && index4 !== -1) {
        this.checks.splice(index4, 1);
      }
    };
    StateSystem2.checkBlendMode = function(system, state) {
      system.setBlendMode(state.blendMode);
    };
    StateSystem2.checkPolygonOffset = function(system, state) {
      system.setPolygonOffset(1, state.polygonOffset);
    };
    return StateSystem2;
  }(System);
  var TextureGCSystem = function(_super) {
    __extends3(TextureGCSystem2, _super);
    function TextureGCSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.count = 0;
      _this.checkCount = 0;
      _this.maxIdle = settings.GC_MAX_IDLE;
      _this.checkCountMax = settings.GC_MAX_CHECK_COUNT;
      _this.mode = settings.GC_MODE;
      return _this;
    }
    TextureGCSystem2.prototype.postrender = function() {
      if (!this.renderer.renderingToScreen) {
        return;
      }
      this.count++;
      if (this.mode === GC_MODES.MANUAL) {
        return;
      }
      this.checkCount++;
      if (this.checkCount > this.checkCountMax) {
        this.checkCount = 0;
        this.run();
      }
    };
    TextureGCSystem2.prototype.run = function() {
      var tm = this.renderer.texture;
      var managedTextures = tm.managedTextures;
      var wasRemoved = false;
      for (var i = 0; i < managedTextures.length; i++) {
        var texture = managedTextures[i];
        if (!texture.framebuffer && this.count - texture.touched > this.maxIdle) {
          tm.destroyTexture(texture, true);
          managedTextures[i] = null;
          wasRemoved = true;
        }
      }
      if (wasRemoved) {
        var j = 0;
        for (var i = 0; i < managedTextures.length; i++) {
          if (managedTextures[i] !== null) {
            managedTextures[j++] = managedTextures[i];
          }
        }
        managedTextures.length = j;
      }
    };
    TextureGCSystem2.prototype.unload = function(displayObject) {
      var _a2;
      var tm = this.renderer.texture;
      if ((_a2 = displayObject._texture) === null || _a2 === void 0 ? void 0 : _a2.framebuffer) {
        tm.destroyTexture(displayObject._texture);
      }
      for (var i = displayObject.children.length - 1; i >= 0; i--) {
        this.unload(displayObject.children[i]);
      }
    };
    return TextureGCSystem2;
  }(System);
  var GLTexture = function() {
    function GLTexture2(texture) {
      this.texture = texture;
      this.width = -1;
      this.height = -1;
      this.dirtyId = -1;
      this.dirtyStyleId = -1;
      this.mipmap = false;
      this.wrapMode = 33071;
      this.type = 6408;
      this.internalFormat = 5121;
    }
    return GLTexture2;
  }();
  var TextureSystem = function(_super) {
    __extends3(TextureSystem2, _super);
    function TextureSystem2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.boundTextures = [];
      _this.currentLocation = -1;
      _this.managedTextures = [];
      _this._unknownBoundTextures = false;
      _this.unknownTexture = new BaseTexture();
      return _this;
    }
    TextureSystem2.prototype.contextChange = function() {
      var gl = this.gl = this.renderer.gl;
      this.CONTEXT_UID = this.renderer.CONTEXT_UID;
      this.webGLVersion = this.renderer.context.webGLVersion;
      var maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);
      this.boundTextures.length = maxTextures;
      for (var i = 0; i < maxTextures; i++) {
        this.boundTextures[i] = null;
      }
      this.emptyTextures = {};
      var emptyTexture2D = new GLTexture(gl.createTexture());
      gl.bindTexture(gl.TEXTURE_2D, emptyTexture2D.texture);
      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array(4));
      this.emptyTextures[gl.TEXTURE_2D] = emptyTexture2D;
      this.emptyTextures[gl.TEXTURE_CUBE_MAP] = new GLTexture(gl.createTexture());
      gl.bindTexture(gl.TEXTURE_CUBE_MAP, this.emptyTextures[gl.TEXTURE_CUBE_MAP].texture);
      for (var i = 0; i < 6; i++) {
        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
      }
      gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
      gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
      for (var i = 0; i < this.boundTextures.length; i++) {
        this.bind(null, i);
      }
    };
    TextureSystem2.prototype.bind = function(texture, location) {
      if (location === void 0) {
        location = 0;
      }
      var gl = this.gl;
      if (texture) {
        texture = texture.castToBaseTexture();
        if (texture.parentTextureArray) {
          return;
        }
        if (texture.valid) {
          texture.touched = this.renderer.textureGC.count;
          var glTexture = texture._glTextures[this.CONTEXT_UID] || this.initTexture(texture);
          if (this.boundTextures[location] !== texture) {
            if (this.currentLocation !== location) {
              this.currentLocation = location;
              gl.activeTexture(gl.TEXTURE0 + location);
            }
            gl.bindTexture(texture.target, glTexture.texture);
          }
          if (glTexture.dirtyId !== texture.dirtyId) {
            if (this.currentLocation !== location) {
              this.currentLocation = location;
              gl.activeTexture(gl.TEXTURE0 + location);
            }
            this.updateTexture(texture);
          }
          this.boundTextures[location] = texture;
        }
      } else {
        if (this.currentLocation !== location) {
          this.currentLocation = location;
          gl.activeTexture(gl.TEXTURE0 + location);
        }
        gl.bindTexture(gl.TEXTURE_2D, this.emptyTextures[gl.TEXTURE_2D].texture);
        this.boundTextures[location] = null;
      }
    };
    TextureSystem2.prototype.reset = function() {
      this._unknownBoundTextures = true;
      this.currentLocation = -1;
      for (var i = 0; i < this.boundTextures.length; i++) {
        this.boundTextures[i] = this.unknownTexture;
      }
    };
    TextureSystem2.prototype.unbind = function(texture) {
      var _a2 = this, gl = _a2.gl, boundTextures = _a2.boundTextures;
      if (this._unknownBoundTextures) {
        this._unknownBoundTextures = false;
        for (var i = 0; i < boundTextures.length; i++) {
          if (boundTextures[i] === this.unknownTexture) {
            this.bind(null, i);
          }
        }
      }
      for (var i = 0; i < boundTextures.length; i++) {
        if (boundTextures[i] === texture) {
          if (this.currentLocation !== i) {
            gl.activeTexture(gl.TEXTURE0 + i);
            this.currentLocation = i;
          }
          gl.bindTexture(texture.target, this.emptyTextures[texture.target].texture);
          boundTextures[i] = null;
        }
      }
    };
    TextureSystem2.prototype.initTexture = function(texture) {
      var glTexture = new GLTexture(this.gl.createTexture());
      glTexture.dirtyId = -1;
      texture._glTextures[this.CONTEXT_UID] = glTexture;
      this.managedTextures.push(texture);
      texture.on("dispose", this.destroyTexture, this);
      return glTexture;
    };
    TextureSystem2.prototype.initTextureType = function(texture, glTexture) {
      glTexture.internalFormat = texture.format;
      glTexture.type = texture.type;
      if (this.webGLVersion !== 2) {
        return;
      }
      var gl = this.renderer.gl;
      if (texture.type === gl.FLOAT && texture.format === gl.RGBA) {
        glTexture.internalFormat = gl.RGBA32F;
      }
      if (texture.type === TYPES.HALF_FLOAT) {
        glTexture.type = gl.HALF_FLOAT;
      }
      if (glTexture.type === gl.HALF_FLOAT && texture.format === gl.RGBA) {
        glTexture.internalFormat = gl.RGBA16F;
      }
    };
    TextureSystem2.prototype.updateTexture = function(texture) {
      var glTexture = texture._glTextures[this.CONTEXT_UID];
      if (!glTexture) {
        return;
      }
      var renderer = this.renderer;
      this.initTextureType(texture, glTexture);
      if (texture.resource && texture.resource.upload(renderer, texture, glTexture))
        ;
      else {
        var width = texture.realWidth;
        var height = texture.realHeight;
        var gl = renderer.gl;
        if (glTexture.width !== width || glTexture.height !== height || glTexture.dirtyId < 0) {
          glTexture.width = width;
          glTexture.height = height;
          gl.texImage2D(texture.target, 0, glTexture.internalFormat, width, height, 0, texture.format, glTexture.type, null);
        }
      }
      if (texture.dirtyStyleId !== glTexture.dirtyStyleId) {
        this.updateTextureStyle(texture);
      }
      glTexture.dirtyId = texture.dirtyId;
    };
    TextureSystem2.prototype.destroyTexture = function(texture, skipRemove) {
      var gl = this.gl;
      texture = texture.castToBaseTexture();
      if (texture._glTextures[this.CONTEXT_UID]) {
        this.unbind(texture);
        gl.deleteTexture(texture._glTextures[this.CONTEXT_UID].texture);
        texture.off("dispose", this.destroyTexture, this);
        delete texture._glTextures[this.CONTEXT_UID];
        if (!skipRemove) {
          var i = this.managedTextures.indexOf(texture);
          if (i !== -1) {
            removeItems(this.managedTextures, i, 1);
          }
        }
      }
    };
    TextureSystem2.prototype.updateTextureStyle = function(texture) {
      var glTexture = texture._glTextures[this.CONTEXT_UID];
      if (!glTexture) {
        return;
      }
      if ((texture.mipmap === MIPMAP_MODES.POW2 || this.webGLVersion !== 2) && !texture.isPowerOfTwo) {
        glTexture.mipmap = false;
      } else {
        glTexture.mipmap = texture.mipmap >= 1;
      }
      if (this.webGLVersion !== 2 && !texture.isPowerOfTwo) {
        glTexture.wrapMode = WRAP_MODES.CLAMP;
      } else {
        glTexture.wrapMode = texture.wrapMode;
      }
      if (texture.resource && texture.resource.style(this.renderer, texture, glTexture))
        ;
      else {
        this.setStyle(texture, glTexture);
      }
      glTexture.dirtyStyleId = texture.dirtyStyleId;
    };
    TextureSystem2.prototype.setStyle = function(texture, glTexture) {
      var gl = this.gl;
      if (glTexture.mipmap) {
        gl.generateMipmap(texture.target);
      }
      gl.texParameteri(texture.target, gl.TEXTURE_WRAP_S, glTexture.wrapMode);
      gl.texParameteri(texture.target, gl.TEXTURE_WRAP_T, glTexture.wrapMode);
      if (glTexture.mipmap) {
        gl.texParameteri(texture.target, gl.TEXTURE_MIN_FILTER, texture.scaleMode === SCALE_MODES.LINEAR ? gl.LINEAR_MIPMAP_LINEAR : gl.NEAREST_MIPMAP_NEAREST);
        var anisotropicExt = this.renderer.context.extensions.anisotropicFiltering;
        if (anisotropicExt && texture.anisotropicLevel > 0 && texture.scaleMode === SCALE_MODES.LINEAR) {
          var level = Math.min(texture.anisotropicLevel, gl.getParameter(anisotropicExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
          gl.texParameterf(texture.target, anisotropicExt.TEXTURE_MAX_ANISOTROPY_EXT, level);
        }
      } else {
        gl.texParameteri(texture.target, gl.TEXTURE_MIN_FILTER, texture.scaleMode === SCALE_MODES.LINEAR ? gl.LINEAR : gl.NEAREST);
      }
      gl.texParameteri(texture.target, gl.TEXTURE_MAG_FILTER, texture.scaleMode === SCALE_MODES.LINEAR ? gl.LINEAR : gl.NEAREST);
    };
    return TextureSystem2;
  }(System);
  var systems = {
    FilterSystem,
    BatchSystem,
    ContextSystem,
    FramebufferSystem,
    GeometrySystem,
    MaskSystem,
    ScissorSystem,
    StencilSystem,
    ProjectionSystem,
    RenderTextureSystem,
    ShaderSystem,
    StateSystem,
    TextureGCSystem,
    TextureSystem
  };
  var tempMatrix = new Matrix();
  var AbstractRenderer = function(_super) {
    __extends3(AbstractRenderer2, _super);
    function AbstractRenderer2(type, options) {
      if (type === void 0) {
        type = RENDERER_TYPE.UNKNOWN;
      }
      var _this = _super.call(this) || this;
      options = Object.assign({}, settings.RENDER_OPTIONS, options);
      if (options.roundPixels) {
        settings.ROUND_PIXELS = options.roundPixels;
        deprecation("5.0.0", "Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS", 2);
      }
      _this.options = options;
      _this.type = type;
      _this.screen = new Rectangle(0, 0, options.width, options.height);
      _this.view = options.view || document.createElement("canvas");
      _this.resolution = options.resolution || settings.RESOLUTION;
      _this.transparent = options.transparent;
      _this.autoDensity = options.autoDensity || options.autoResize || false;
      _this.preserveDrawingBuffer = options.preserveDrawingBuffer;
      _this.clearBeforeRender = options.clearBeforeRender;
      _this._backgroundColor = 0;
      _this._backgroundColorRgba = [0, 0, 0, 0];
      _this._backgroundColorString = "#000000";
      _this.backgroundColor = options.backgroundColor || _this._backgroundColor;
      _this._lastObjectRendered = null;
      _this.plugins = {};
      return _this;
    }
    AbstractRenderer2.prototype.initPlugins = function(staticMap) {
      for (var o in staticMap) {
        this.plugins[o] = new staticMap[o](this);
      }
    };
    Object.defineProperty(AbstractRenderer2.prototype, "width", {
      get: function() {
        return this.view.width;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(AbstractRenderer2.prototype, "height", {
      get: function() {
        return this.view.height;
      },
      enumerable: false,
      configurable: true
    });
    AbstractRenderer2.prototype.resize = function(screenWidth, screenHeight) {
      this.screen.width = screenWidth;
      this.screen.height = screenHeight;
      this.view.width = screenWidth * this.resolution;
      this.view.height = screenHeight * this.resolution;
      if (this.autoDensity) {
        this.view.style.width = screenWidth + "px";
        this.view.style.height = screenHeight + "px";
      }
      this.emit("resize", screenWidth, screenHeight);
    };
    AbstractRenderer2.prototype.generateTexture = function(displayObject, scaleMode, resolution, region) {
      region = region || displayObject.getLocalBounds(null, true);
      if (region.width === 0) {
        region.width = 1;
      }
      if (region.height === 0) {
        region.height = 1;
      }
      var renderTexture = RenderTexture.create({
        width: region.width | 0,
        height: region.height | 0,
        scaleMode,
        resolution
      });
      tempMatrix.tx = -region.x;
      tempMatrix.ty = -region.y;
      this.render(displayObject, renderTexture, false, tempMatrix, !!displayObject.parent);
      return renderTexture;
    };
    AbstractRenderer2.prototype.destroy = function(removeView) {
      for (var o in this.plugins) {
        this.plugins[o].destroy();
        this.plugins[o] = null;
      }
      if (removeView && this.view.parentNode) {
        this.view.parentNode.removeChild(this.view);
      }
      var thisAny = this;
      thisAny.plugins = null;
      thisAny.type = RENDERER_TYPE.UNKNOWN;
      thisAny.view = null;
      thisAny.screen = null;
      thisAny._tempDisplayObjectParent = null;
      thisAny.options = null;
      this._backgroundColorRgba = null;
      this._backgroundColorString = null;
      this._lastObjectRendered = null;
    };
    Object.defineProperty(AbstractRenderer2.prototype, "backgroundColor", {
      get: function() {
        return this._backgroundColor;
      },
      set: function(value) {
        this._backgroundColor = value;
        this._backgroundColorString = hex2string(value);
        hex2rgb(value, this._backgroundColorRgba);
      },
      enumerable: false,
      configurable: true
    });
    return AbstractRenderer2;
  }(import_eventemitter3.default);
  var Renderer = function(_super) {
    __extends3(Renderer2, _super);
    function Renderer2(options) {
      var _this = _super.call(this, RENDERER_TYPE.WEBGL, options) || this;
      options = _this.options;
      _this.gl = null;
      _this.CONTEXT_UID = 0;
      _this.runners = {
        destroy: new Runner("destroy"),
        contextChange: new Runner("contextChange"),
        reset: new Runner("reset"),
        update: new Runner("update"),
        postrender: new Runner("postrender"),
        prerender: new Runner("prerender"),
        resize: new Runner("resize")
      };
      _this.globalUniforms = new UniformGroup({
        projectionMatrix: new Matrix()
      }, true);
      _this.addSystem(MaskSystem, "mask").addSystem(ContextSystem, "context").addSystem(StateSystem, "state").addSystem(ShaderSystem, "shader").addSystem(TextureSystem, "texture").addSystem(GeometrySystem, "geometry").addSystem(FramebufferSystem, "framebuffer").addSystem(ScissorSystem, "scissor").addSystem(StencilSystem, "stencil").addSystem(ProjectionSystem, "projection").addSystem(TextureGCSystem, "textureGC").addSystem(FilterSystem, "filter").addSystem(RenderTextureSystem, "renderTexture").addSystem(BatchSystem, "batch");
      _this.initPlugins(Renderer2.__plugins);
      if (options.context) {
        _this.context.initFromContext(options.context);
      } else {
        _this.context.initFromOptions({
          alpha: !!_this.transparent,
          antialias: options.antialias,
          premultipliedAlpha: _this.transparent && _this.transparent !== "notMultiplied",
          stencil: true,
          preserveDrawingBuffer: options.preserveDrawingBuffer,
          powerPreference: _this.options.powerPreference
        });
      }
      _this.renderingToScreen = true;
      sayHello(_this.context.webGLVersion === 2 ? "WebGL 2" : "WebGL 1");
      _this.resize(_this.options.width, _this.options.height);
      return _this;
    }
    Renderer2.create = function(options) {
      if (isWebGLSupported()) {
        return new Renderer2(options);
      }
      throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.');
    };
    Renderer2.prototype.addSystem = function(ClassRef, name) {
      if (!name) {
        name = ClassRef.name;
      }
      var system = new ClassRef(this);
      if (this[name]) {
        throw new Error('Whoops! The name "' + name + '" is already in use');
      }
      this[name] = system;
      for (var i in this.runners) {
        this.runners[i].add(system);
      }
      return this;
    };
    Renderer2.prototype.render = function(displayObject, renderTexture, clear, transform, skipUpdateTransform) {
      this.renderingToScreen = !renderTexture;
      this.runners.prerender.emit();
      this.emit("prerender");
      this.projection.transform = transform;
      if (this.context.isLost) {
        return;
      }
      if (!renderTexture) {
        this._lastObjectRendered = displayObject;
      }
      if (!skipUpdateTransform) {
        var cacheParent = displayObject.enableTempParent();
        displayObject.updateTransform();
        displayObject.disableTempParent(cacheParent);
      }
      this.renderTexture.bind(renderTexture);
      this.batch.currentRenderer.start();
      if (clear !== void 0 ? clear : this.clearBeforeRender) {
        this.renderTexture.clear();
      }
      displayObject.render(this);
      this.batch.currentRenderer.flush();
      if (renderTexture) {
        renderTexture.baseTexture.update();
      }
      this.runners.postrender.emit();
      this.projection.transform = null;
      this.emit("postrender");
    };
    Renderer2.prototype.resize = function(screenWidth, screenHeight) {
      _super.prototype.resize.call(this, screenWidth, screenHeight);
      this.runners.resize.emit(screenWidth, screenHeight);
    };
    Renderer2.prototype.reset = function() {
      this.runners.reset.emit();
      return this;
    };
    Renderer2.prototype.clear = function() {
      this.renderTexture.bind();
      this.renderTexture.clear();
    };
    Renderer2.prototype.destroy = function(removeView) {
      this.runners.destroy.emit();
      for (var r in this.runners) {
        this.runners[r].destroy();
      }
      _super.prototype.destroy.call(this, removeView);
      this.gl = null;
    };
    Renderer2.registerPlugin = function(pluginName, ctor) {
      Renderer2.__plugins = Renderer2.__plugins || {};
      Renderer2.__plugins[pluginName] = ctor;
    };
    return Renderer2;
  }(AbstractRenderer);
  function autoDetectRenderer(options) {
    return Renderer.create(options);
  }
  var _default = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}";
  var defaultFilter = "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";
  var BatchDrawCall = function() {
    function BatchDrawCall2() {
      this.texArray = null;
      this.blend = 0;
      this.type = DRAW_MODES.TRIANGLES;
      this.start = 0;
      this.size = 0;
      this.data = null;
    }
    return BatchDrawCall2;
  }();
  var BatchTextureArray = function() {
    function BatchTextureArray2() {
      this.elements = [];
      this.ids = [];
      this.count = 0;
    }
    BatchTextureArray2.prototype.clear = function() {
      for (var i = 0; i < this.count; i++) {
        this.elements[i] = null;
      }
      this.count = 0;
    };
    return BatchTextureArray2;
  }();
  var ViewableBuffer = function() {
    function ViewableBuffer2(size) {
      this.rawBinaryData = new ArrayBuffer(size);
      this.uint32View = new Uint32Array(this.rawBinaryData);
      this.float32View = new Float32Array(this.rawBinaryData);
    }
    Object.defineProperty(ViewableBuffer2.prototype, "int8View", {
      get: function() {
        if (!this._int8View) {
          this._int8View = new Int8Array(this.rawBinaryData);
        }
        return this._int8View;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(ViewableBuffer2.prototype, "uint8View", {
      get: function() {
        if (!this._uint8View) {
          this._uint8View = new Uint8Array(this.rawBinaryData);
        }
        return this._uint8View;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(ViewableBuffer2.prototype, "int16View", {
      get: function() {
        if (!this._int16View) {
          this._int16View = new Int16Array(this.rawBinaryData);
        }
        return this._int16View;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(ViewableBuffer2.prototype, "uint16View", {
      get: function() {
        if (!this._uint16View) {
          this._uint16View = new Uint16Array(this.rawBinaryData);
        }
        return this._uint16View;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(ViewableBuffer2.prototype, "int32View", {
      get: function() {
        if (!this._int32View) {
          this._int32View = new Int32Array(this.rawBinaryData);
        }
        return this._int32View;
      },
      enumerable: false,
      configurable: true
    });
    ViewableBuffer2.prototype.view = function(type) {
      return this[type + "View"];
    };
    ViewableBuffer2.prototype.destroy = function() {
      this.rawBinaryData = null;
      this._int8View = null;
      this._uint8View = null;
      this._int16View = null;
      this._uint16View = null;
      this._int32View = null;
      this.uint32View = null;
      this.float32View = null;
    };
    ViewableBuffer2.sizeOf = function(type) {
      switch (type) {
        case "int8":
        case "uint8":
          return 1;
        case "int16":
        case "uint16":
          return 2;
        case "int32":
        case "uint32":
        case "float32":
          return 4;
        default:
          throw new Error(type + " isn't a valid view type");
      }
    };
    return ViewableBuffer2;
  }();
  var AbstractBatchRenderer = function(_super) {
    __extends3(AbstractBatchRenderer2, _super);
    function AbstractBatchRenderer2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.shaderGenerator = null;
      _this.geometryClass = null;
      _this.vertexSize = null;
      _this.state = State.for2d();
      _this.size = settings.SPRITE_BATCH_SIZE * 4;
      _this._vertexCount = 0;
      _this._indexCount = 0;
      _this._bufferedElements = [];
      _this._bufferedTextures = [];
      _this._bufferSize = 0;
      _this._shader = null;
      _this._packedGeometries = [];
      _this._packedGeometryPoolSize = 2;
      _this._flushId = 0;
      _this._aBuffers = {};
      _this._iBuffers = {};
      _this.MAX_TEXTURES = 1;
      _this.renderer.on("prerender", _this.onPrerender, _this);
      renderer.runners.contextChange.add(_this);
      _this._dcIndex = 0;
      _this._aIndex = 0;
      _this._iIndex = 0;
      _this._attributeBuffer = null;
      _this._indexBuffer = null;
      _this._tempBoundTextures = [];
      return _this;
    }
    AbstractBatchRenderer2.prototype.contextChange = function() {
      var gl = this.renderer.gl;
      if (settings.PREFER_ENV === ENV.WEBGL_LEGACY) {
        this.MAX_TEXTURES = 1;
      } else {
        this.MAX_TEXTURES = Math.min(gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS), settings.SPRITE_MAX_TEXTURES);
        this.MAX_TEXTURES = checkMaxIfStatementsInShader(this.MAX_TEXTURES, gl);
      }
      this._shader = this.shaderGenerator.generateShader(this.MAX_TEXTURES);
      for (var i = 0; i < this._packedGeometryPoolSize; i++) {
        this._packedGeometries[i] = new this.geometryClass();
      }
      this.initFlushBuffers();
    };
    AbstractBatchRenderer2.prototype.initFlushBuffers = function() {
      var _drawCallPool = AbstractBatchRenderer2._drawCallPool, _textureArrayPool = AbstractBatchRenderer2._textureArrayPool;
      var MAX_SPRITES = this.size / 4;
      var MAX_TA = Math.floor(MAX_SPRITES / this.MAX_TEXTURES) + 1;
      while (_drawCallPool.length < MAX_SPRITES) {
        _drawCallPool.push(new BatchDrawCall());
      }
      while (_textureArrayPool.length < MAX_TA) {
        _textureArrayPool.push(new BatchTextureArray());
      }
      for (var i = 0; i < this.MAX_TEXTURES; i++) {
        this._tempBoundTextures[i] = null;
      }
    };
    AbstractBatchRenderer2.prototype.onPrerender = function() {
      this._flushId = 0;
    };
    AbstractBatchRenderer2.prototype.render = function(element) {
      if (!element._texture.valid) {
        return;
      }
      if (this._vertexCount + element.vertexData.length / 2 > this.size) {
        this.flush();
      }
      this._vertexCount += element.vertexData.length / 2;
      this._indexCount += element.indices.length;
      this._bufferedTextures[this._bufferSize] = element._texture.baseTexture;
      this._bufferedElements[this._bufferSize++] = element;
    };
    AbstractBatchRenderer2.prototype.buildTexturesAndDrawCalls = function() {
      var _a2 = this, textures = _a2._bufferedTextures, MAX_TEXTURES = _a2.MAX_TEXTURES;
      var textureArrays = AbstractBatchRenderer2._textureArrayPool;
      var batch = this.renderer.batch;
      var boundTextures = this._tempBoundTextures;
      var touch = this.renderer.textureGC.count;
      var TICK = ++BaseTexture._globalBatch;
      var countTexArrays = 0;
      var texArray = textureArrays[0];
      var start = 0;
      batch.copyBoundTextures(boundTextures, MAX_TEXTURES);
      for (var i = 0; i < this._bufferSize; ++i) {
        var tex = textures[i];
        textures[i] = null;
        if (tex._batchEnabled === TICK) {
          continue;
        }
        if (texArray.count >= MAX_TEXTURES) {
          batch.boundArray(texArray, boundTextures, TICK, MAX_TEXTURES);
          this.buildDrawCalls(texArray, start, i);
          start = i;
          texArray = textureArrays[++countTexArrays];
          ++TICK;
        }
        tex._batchEnabled = TICK;
        tex.touched = touch;
        texArray.elements[texArray.count++] = tex;
      }
      if (texArray.count > 0) {
        batch.boundArray(texArray, boundTextures, TICK, MAX_TEXTURES);
        this.buildDrawCalls(texArray, start, this._bufferSize);
        ++countTexArrays;
        ++TICK;
      }
      for (var i = 0; i < boundTextures.length; i++) {
        boundTextures[i] = null;
      }
      BaseTexture._globalBatch = TICK;
    };
    AbstractBatchRenderer2.prototype.buildDrawCalls = function(texArray, start, finish) {
      var _a2 = this, elements = _a2._bufferedElements, _attributeBuffer = _a2._attributeBuffer, _indexBuffer = _a2._indexBuffer, vertexSize = _a2.vertexSize;
      var drawCalls = AbstractBatchRenderer2._drawCallPool;
      var dcIndex = this._dcIndex;
      var aIndex = this._aIndex;
      var iIndex = this._iIndex;
      var drawCall = drawCalls[dcIndex];
      drawCall.start = this._iIndex;
      drawCall.texArray = texArray;
      for (var i = start; i < finish; ++i) {
        var sprite = elements[i];
        var tex = sprite._texture.baseTexture;
        var spriteBlendMode = premultiplyBlendMode[tex.alphaMode ? 1 : 0][sprite.blendMode];
        elements[i] = null;
        if (start < i && drawCall.blend !== spriteBlendMode) {
          drawCall.size = iIndex - drawCall.start;
          start = i;
          drawCall = drawCalls[++dcIndex];
          drawCall.texArray = texArray;
          drawCall.start = iIndex;
        }
        this.packInterleavedGeometry(sprite, _attributeBuffer, _indexBuffer, aIndex, iIndex);
        aIndex += sprite.vertexData.length / 2 * vertexSize;
        iIndex += sprite.indices.length;
        drawCall.blend = spriteBlendMode;
      }
      if (start < finish) {
        drawCall.size = iIndex - drawCall.start;
        ++dcIndex;
      }
      this._dcIndex = dcIndex;
      this._aIndex = aIndex;
      this._iIndex = iIndex;
    };
    AbstractBatchRenderer2.prototype.bindAndClearTexArray = function(texArray) {
      var textureSystem = this.renderer.texture;
      for (var j = 0; j < texArray.count; j++) {
        textureSystem.bind(texArray.elements[j], texArray.ids[j]);
        texArray.elements[j] = null;
      }
      texArray.count = 0;
    };
    AbstractBatchRenderer2.prototype.updateGeometry = function() {
      var _a2 = this, packedGeometries = _a2._packedGeometries, attributeBuffer = _a2._attributeBuffer, indexBuffer = _a2._indexBuffer;
      if (!settings.CAN_UPLOAD_SAME_BUFFER) {
        if (this._packedGeometryPoolSize <= this._flushId) {
          this._packedGeometryPoolSize++;
          packedGeometries[this._flushId] = new this.geometryClass();
        }
        packedGeometries[this._flushId]._buffer.update(attributeBuffer.rawBinaryData);
        packedGeometries[this._flushId]._indexBuffer.update(indexBuffer);
        this.renderer.geometry.bind(packedGeometries[this._flushId]);
        this.renderer.geometry.updateBuffers();
        this._flushId++;
      } else {
        packedGeometries[this._flushId]._buffer.update(attributeBuffer.rawBinaryData);
        packedGeometries[this._flushId]._indexBuffer.update(indexBuffer);
        this.renderer.geometry.updateBuffers();
      }
    };
    AbstractBatchRenderer2.prototype.drawBatches = function() {
      var dcCount = this._dcIndex;
      var _a2 = this.renderer, gl = _a2.gl, stateSystem = _a2.state;
      var drawCalls = AbstractBatchRenderer2._drawCallPool;
      var curTexArray = null;
      for (var i = 0; i < dcCount; i++) {
        var _b = drawCalls[i], texArray = _b.texArray, type = _b.type, size = _b.size, start = _b.start, blend = _b.blend;
        if (curTexArray !== texArray) {
          curTexArray = texArray;
          this.bindAndClearTexArray(texArray);
        }
        this.state.blendMode = blend;
        stateSystem.set(this.state);
        gl.drawElements(type, size, gl.UNSIGNED_SHORT, start * 2);
      }
    };
    AbstractBatchRenderer2.prototype.flush = function() {
      if (this._vertexCount === 0) {
        return;
      }
      this._attributeBuffer = this.getAttributeBuffer(this._vertexCount);
      this._indexBuffer = this.getIndexBuffer(this._indexCount);
      this._aIndex = 0;
      this._iIndex = 0;
      this._dcIndex = 0;
      this.buildTexturesAndDrawCalls();
      this.updateGeometry();
      this.drawBatches();
      this._bufferSize = 0;
      this._vertexCount = 0;
      this._indexCount = 0;
    };
    AbstractBatchRenderer2.prototype.start = function() {
      this.renderer.state.set(this.state);
      this.renderer.shader.bind(this._shader);
      if (settings.CAN_UPLOAD_SAME_BUFFER) {
        this.renderer.geometry.bind(this._packedGeometries[this._flushId]);
      }
    };
    AbstractBatchRenderer2.prototype.stop = function() {
      this.flush();
    };
    AbstractBatchRenderer2.prototype.destroy = function() {
      for (var i = 0; i < this._packedGeometryPoolSize; i++) {
        if (this._packedGeometries[i]) {
          this._packedGeometries[i].destroy();
        }
      }
      this.renderer.off("prerender", this.onPrerender, this);
      this._aBuffers = null;
      this._iBuffers = null;
      this._packedGeometries = null;
      this._attributeBuffer = null;
      this._indexBuffer = null;
      if (this._shader) {
        this._shader.destroy();
        this._shader = null;
      }
      _super.prototype.destroy.call(this);
    };
    AbstractBatchRenderer2.prototype.getAttributeBuffer = function(size) {
      var roundedP2 = nextPow2(Math.ceil(size / 8));
      var roundedSizeIndex = log2(roundedP2);
      var roundedSize = roundedP2 * 8;
      if (this._aBuffers.length <= roundedSizeIndex) {
        this._iBuffers.length = roundedSizeIndex + 1;
      }
      var buffer = this._aBuffers[roundedSize];
      if (!buffer) {
        this._aBuffers[roundedSize] = buffer = new ViewableBuffer(roundedSize * this.vertexSize * 4);
      }
      return buffer;
    };
    AbstractBatchRenderer2.prototype.getIndexBuffer = function(size) {
      var roundedP2 = nextPow2(Math.ceil(size / 12));
      var roundedSizeIndex = log2(roundedP2);
      var roundedSize = roundedP2 * 12;
      if (this._iBuffers.length <= roundedSizeIndex) {
        this._iBuffers.length = roundedSizeIndex + 1;
      }
      var buffer = this._iBuffers[roundedSizeIndex];
      if (!buffer) {
        this._iBuffers[roundedSizeIndex] = buffer = new Uint16Array(roundedSize);
      }
      return buffer;
    };
    AbstractBatchRenderer2.prototype.packInterleavedGeometry = function(element, attributeBuffer, indexBuffer, aIndex, iIndex) {
      var uint32View = attributeBuffer.uint32View, float32View = attributeBuffer.float32View;
      var packedVertices = aIndex / this.vertexSize;
      var uvs = element.uvs;
      var indicies = element.indices;
      var vertexData = element.vertexData;
      var textureId = element._texture.baseTexture._batchLocation;
      var alpha = Math.min(element.worldAlpha, 1);
      var argb = alpha < 1 && element._texture.baseTexture.alphaMode ? premultiplyTint(element._tintRGB, alpha) : element._tintRGB + (alpha * 255 << 24);
      for (var i = 0; i < vertexData.length; i += 2) {
        float32View[aIndex++] = vertexData[i];
        float32View[aIndex++] = vertexData[i + 1];
        float32View[aIndex++] = uvs[i];
        float32View[aIndex++] = uvs[i + 1];
        uint32View[aIndex++] = argb;
        float32View[aIndex++] = textureId;
      }
      for (var i = 0; i < indicies.length; i++) {
        indexBuffer[iIndex++] = packedVertices + indicies[i];
      }
    };
    AbstractBatchRenderer2._drawCallPool = [];
    AbstractBatchRenderer2._textureArrayPool = [];
    return AbstractBatchRenderer2;
  }(ObjectRenderer);
  var BatchShaderGenerator = function() {
    function BatchShaderGenerator2(vertexSrc, fragTemplate3) {
      this.vertexSrc = vertexSrc;
      this.fragTemplate = fragTemplate3;
      this.programCache = {};
      this.defaultGroupCache = {};
      if (fragTemplate3.indexOf("%count%") < 0) {
        throw new Error('Fragment template must contain "%count%".');
      }
      if (fragTemplate3.indexOf("%forloop%") < 0) {
        throw new Error('Fragment template must contain "%forloop%".');
      }
    }
    BatchShaderGenerator2.prototype.generateShader = function(maxTextures) {
      if (!this.programCache[maxTextures]) {
        var sampleValues = new Int32Array(maxTextures);
        for (var i = 0; i < maxTextures; i++) {
          sampleValues[i] = i;
        }
        this.defaultGroupCache[maxTextures] = UniformGroup.from({uSamplers: sampleValues}, true);
        var fragmentSrc = this.fragTemplate;
        fragmentSrc = fragmentSrc.replace(/%count%/gi, "" + maxTextures);
        fragmentSrc = fragmentSrc.replace(/%forloop%/gi, this.generateSampleSrc(maxTextures));
        this.programCache[maxTextures] = new Program(this.vertexSrc, fragmentSrc);
      }
      var uniforms = {
        tint: new Float32Array([1, 1, 1, 1]),
        translationMatrix: new Matrix(),
        default: this.defaultGroupCache[maxTextures]
      };
      return new Shader(this.programCache[maxTextures], uniforms);
    };
    BatchShaderGenerator2.prototype.generateSampleSrc = function(maxTextures) {
      var src = "";
      src += "\n";
      src += "\n";
      for (var i = 0; i < maxTextures; i++) {
        if (i > 0) {
          src += "\nelse ";
        }
        if (i < maxTextures - 1) {
          src += "if(vTextureId < " + i + ".5)";
        }
        src += "\n{";
        src += "\n	color = texture2D(uSamplers[" + i + "], vTextureCoord);";
        src += "\n}";
      }
      src += "\n";
      src += "\n";
      return src;
    };
    return BatchShaderGenerator2;
  }();
  var BatchGeometry = function(_super) {
    __extends3(BatchGeometry2, _super);
    function BatchGeometry2(_static) {
      if (_static === void 0) {
        _static = false;
      }
      var _this = _super.call(this) || this;
      _this._buffer = new Buffer2(null, _static, false);
      _this._indexBuffer = new Buffer2(null, _static, true);
      _this.addAttribute("aVertexPosition", _this._buffer, 2, false, TYPES.FLOAT).addAttribute("aTextureCoord", _this._buffer, 2, false, TYPES.FLOAT).addAttribute("aColor", _this._buffer, 4, true, TYPES.UNSIGNED_BYTE).addAttribute("aTextureId", _this._buffer, 1, true, TYPES.FLOAT).addIndex(_this._indexBuffer);
      return _this;
    }
    return BatchGeometry2;
  }(Geometry);
  var defaultVertex$2 = "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n";
  var defaultFragment$2 = "varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";
  var BatchPluginFactory = function() {
    function BatchPluginFactory2() {
    }
    BatchPluginFactory2.create = function(options) {
      var _a2 = Object.assign({
        vertex: defaultVertex$2,
        fragment: defaultFragment$2,
        geometryClass: BatchGeometry,
        vertexSize: 6
      }, options), vertex7 = _a2.vertex, fragment10 = _a2.fragment, vertexSize = _a2.vertexSize, geometryClass = _a2.geometryClass;
      return function(_super) {
        __extends3(BatchPlugin, _super);
        function BatchPlugin(renderer) {
          var _this = _super.call(this, renderer) || this;
          _this.shaderGenerator = new BatchShaderGenerator(vertex7, fragment10);
          _this.geometryClass = geometryClass;
          _this.vertexSize = vertexSize;
          return _this;
        }
        return BatchPlugin;
      }(AbstractBatchRenderer);
    };
    Object.defineProperty(BatchPluginFactory2, "defaultVertexSrc", {
      get: function() {
        return defaultVertex$2;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BatchPluginFactory2, "defaultFragmentTemplate", {
      get: function() {
        return defaultFragment$2;
      },
      enumerable: false,
      configurable: true
    });
    return BatchPluginFactory2;
  }();
  var BatchRenderer = BatchPluginFactory.create();

  // node_modules/@pixi/app/lib/app.es.js
  /*!
   * @pixi/app - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/app is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var Application = function() {
    function Application2(options) {
      var _this = this;
      options = Object.assign({
        forceCanvas: false
      }, options);
      this.renderer = autoDetectRenderer(options);
      this.stage = new Container();
      Application2._plugins.forEach(function(plugin) {
        plugin.init.call(_this, options);
      });
    }
    Application2.registerPlugin = function(plugin) {
      Application2._plugins.push(plugin);
    };
    Application2.prototype.render = function() {
      this.renderer.render(this.stage);
    };
    Object.defineProperty(Application2.prototype, "view", {
      get: function() {
        return this.renderer.view;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Application2.prototype, "screen", {
      get: function() {
        return this.renderer.screen;
      },
      enumerable: false,
      configurable: true
    });
    Application2.prototype.destroy = function(removeView, stageOptions) {
      var _this = this;
      var plugins = Application2._plugins.slice(0);
      plugins.reverse();
      plugins.forEach(function(plugin) {
        plugin.destroy.call(_this);
      });
      this.stage.destroy(stageOptions);
      this.stage = null;
      this.renderer.destroy(removeView);
      this.renderer = null;
    };
    return Application2;
  }();
  Application._plugins = [];
  var ResizePlugin = function() {
    function ResizePlugin2() {
    }
    ResizePlugin2.init = function(options) {
      var _this = this;
      Object.defineProperty(this, "resizeTo", {
        set: function(dom) {
          window.removeEventListener("resize", this.queueResize);
          this._resizeTo = dom;
          if (dom) {
            window.addEventListener("resize", this.queueResize);
            this.resize();
          }
        },
        get: function() {
          return this._resizeTo;
        }
      });
      this.queueResize = function() {
        if (!_this._resizeTo) {
          return;
        }
        _this.cancelResize();
        _this._resizeId = requestAnimationFrame(function() {
          return _this.resize();
        });
      };
      this.cancelResize = function() {
        if (_this._resizeId) {
          cancelAnimationFrame(_this._resizeId);
          _this._resizeId = null;
        }
      };
      this.resize = function() {
        if (!_this._resizeTo) {
          return;
        }
        _this.cancelResize();
        var width;
        var height;
        if (_this._resizeTo === window) {
          width = window.innerWidth;
          height = window.innerHeight;
        } else {
          var _a2 = _this._resizeTo, clientWidth = _a2.clientWidth, clientHeight = _a2.clientHeight;
          width = clientWidth;
          height = clientHeight;
        }
        _this.renderer.resize(width, height);
      };
      this._resizeId = null;
      this._resizeTo = null;
      this.resizeTo = options.resizeTo || null;
    };
    ResizePlugin2.destroy = function() {
      this.cancelResize();
      this.cancelResize = null;
      this.queueResize = null;
      this.resizeTo = null;
      this.resize = null;
    };
    return ResizePlugin2;
  }();
  Application.registerPlugin(ResizePlugin);

  // node_modules/@pixi/extract/lib/extract.es.js
  /*!
   * @pixi/extract - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/extract is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var TEMP_RECT = new Rectangle();
  var BYTES_PER_PIXEL = 4;
  var Extract = function() {
    function Extract2(renderer) {
      this.renderer = renderer;
      renderer.extract = this;
    }
    Extract2.prototype.image = function(target, format, quality) {
      var image = new Image();
      image.src = this.base64(target, format, quality);
      return image;
    };
    Extract2.prototype.base64 = function(target, format, quality) {
      return this.canvas(target).toDataURL(format, quality);
    };
    Extract2.prototype.canvas = function(target) {
      var renderer = this.renderer;
      var resolution;
      var frame;
      var flipY = false;
      var renderTexture;
      var generated = false;
      if (target) {
        if (target instanceof RenderTexture) {
          renderTexture = target;
        } else {
          renderTexture = this.renderer.generateTexture(target);
          generated = true;
        }
      }
      if (renderTexture) {
        resolution = renderTexture.baseTexture.resolution;
        frame = renderTexture.frame;
        flipY = false;
        renderer.renderTexture.bind(renderTexture);
      } else {
        resolution = this.renderer.resolution;
        flipY = true;
        frame = TEMP_RECT;
        frame.width = this.renderer.width;
        frame.height = this.renderer.height;
        renderer.renderTexture.bind(null);
      }
      var width = Math.floor(frame.width * resolution + 1e-4);
      var height = Math.floor(frame.height * resolution + 1e-4);
      var canvasBuffer = new CanvasRenderTarget(width, height, 1);
      var webglPixels = new Uint8Array(BYTES_PER_PIXEL * width * height);
      var gl = renderer.gl;
      gl.readPixels(frame.x * resolution, frame.y * resolution, width, height, gl.RGBA, gl.UNSIGNED_BYTE, webglPixels);
      var canvasData = canvasBuffer.context.getImageData(0, 0, width, height);
      Extract2.arrayPostDivide(webglPixels, canvasData.data);
      canvasBuffer.context.putImageData(canvasData, 0, 0);
      if (flipY) {
        var target_1 = new CanvasRenderTarget(canvasBuffer.width, canvasBuffer.height, 1);
        target_1.context.scale(1, -1);
        target_1.context.drawImage(canvasBuffer.canvas, 0, -height);
        canvasBuffer.destroy();
        canvasBuffer = target_1;
      }
      if (generated) {
        renderTexture.destroy(true);
      }
      return canvasBuffer.canvas;
    };
    Extract2.prototype.pixels = function(target) {
      var renderer = this.renderer;
      var resolution;
      var frame;
      var renderTexture;
      var generated = false;
      if (target) {
        if (target instanceof RenderTexture) {
          renderTexture = target;
        } else {
          renderTexture = this.renderer.generateTexture(target);
          generated = true;
        }
      }
      if (renderTexture) {
        resolution = renderTexture.baseTexture.resolution;
        frame = renderTexture.frame;
        renderer.renderTexture.bind(renderTexture);
      } else {
        resolution = renderer.resolution;
        frame = TEMP_RECT;
        frame.width = renderer.width;
        frame.height = renderer.height;
        renderer.renderTexture.bind(null);
      }
      var width = frame.width * resolution;
      var height = frame.height * resolution;
      var webglPixels = new Uint8Array(BYTES_PER_PIXEL * width * height);
      var gl = renderer.gl;
      gl.readPixels(frame.x * resolution, frame.y * resolution, width, height, gl.RGBA, gl.UNSIGNED_BYTE, webglPixels);
      if (generated) {
        renderTexture.destroy(true);
      }
      Extract2.arrayPostDivide(webglPixels, webglPixels);
      return webglPixels;
    };
    Extract2.prototype.destroy = function() {
      this.renderer.extract = null;
      this.renderer = null;
    };
    Extract2.arrayPostDivide = function(pixels, out) {
      for (var i = 0; i < pixels.length; i += 4) {
        var alpha = out[i + 3] = pixels[i + 3];
        if (alpha !== 0) {
          out[i] = Math.round(Math.min(pixels[i] * 255 / alpha, 255));
          out[i + 1] = Math.round(Math.min(pixels[i + 1] * 255 / alpha, 255));
          out[i + 2] = Math.round(Math.min(pixels[i + 2] * 255 / alpha, 255));
        } else {
          out[i] = pixels[i];
          out[i + 1] = pixels[i + 1];
          out[i + 2] = pixels[i + 2];
        }
      }
    };
    return Extract2;
  }();

  // node_modules/resource-loader/dist/resource-loader.esm.js
  var import_parse_uri = __toModule(require_parse_uri());
  var import_mini_signals = __toModule(require_mini_signals());
  /*!
   * resource-loader - v3.0.1
   * https://github.com/pixijs/pixi-sound
   * Compiled Tue, 02 Jul 2019 14:06:18 UTC
   *
   * resource-loader is licensed under the MIT license.
   * http://www.opensource.org/licenses/mit-license
   */
  function _noop() {
  }
  function eachSeries(array, iterator, callback, deferNext) {
    var i = 0;
    var len = array.length;
    (function next(err) {
      if (err || i === len) {
        if (callback) {
          callback(err);
        }
        return;
      }
      if (deferNext) {
        setTimeout(function() {
          iterator(array[i++], next);
        }, 1);
      } else {
        iterator(array[i++], next);
      }
    })();
  }
  function onlyOnce(fn) {
    return function onceWrapper() {
      if (fn === null) {
        throw new Error("Callback was already called.");
      }
      var callFn = fn;
      fn = null;
      callFn.apply(this, arguments);
    };
  }
  function queue(worker, concurrency) {
    if (concurrency == null) {
      concurrency = 1;
    } else if (concurrency === 0) {
      throw new Error("Concurrency must not be zero");
    }
    var workers = 0;
    var q = {
      _tasks: [],
      concurrency,
      saturated: _noop,
      unsaturated: _noop,
      buffer: concurrency / 4,
      empty: _noop,
      drain: _noop,
      error: _noop,
      started: false,
      paused: false,
      push: function push(data, callback) {
        _insert(data, false, callback);
      },
      kill: function kill() {
        workers = 0;
        q.drain = _noop;
        q.started = false;
        q._tasks = [];
      },
      unshift: function unshift(data, callback) {
        _insert(data, true, callback);
      },
      process: function process() {
        while (!q.paused && workers < q.concurrency && q._tasks.length) {
          var task = q._tasks.shift();
          if (q._tasks.length === 0) {
            q.empty();
          }
          workers += 1;
          if (workers === q.concurrency) {
            q.saturated();
          }
          worker(task.data, onlyOnce(_next(task)));
        }
      },
      length: function length() {
        return q._tasks.length;
      },
      running: function running() {
        return workers;
      },
      idle: function idle() {
        return q._tasks.length + workers === 0;
      },
      pause: function pause() {
        if (q.paused === true) {
          return;
        }
        q.paused = true;
      },
      resume: function resume() {
        if (q.paused === false) {
          return;
        }
        q.paused = false;
        for (var w = 1; w <= q.concurrency; w++) {
          q.process();
        }
      }
    };
    function _insert(data, insertAtFront, callback) {
      if (callback != null && typeof callback !== "function") {
        throw new Error("task callback must be a function");
      }
      q.started = true;
      if (data == null && q.idle()) {
        setTimeout(function() {
          return q.drain();
        }, 1);
        return;
      }
      var item = {
        data,
        callback: typeof callback === "function" ? callback : _noop
      };
      if (insertAtFront) {
        q._tasks.unshift(item);
      } else {
        q._tasks.push(item);
      }
      setTimeout(function() {
        return q.process();
      }, 1);
    }
    function _next(task) {
      return function next() {
        workers -= 1;
        task.callback.apply(task, arguments);
        if (arguments[0] != null) {
          q.error(arguments[0], task.data);
        }
        if (workers <= q.concurrency - q.buffer) {
          q.unsaturated();
        }
        if (q.idle()) {
          q.drain();
        }
        q.process();
      };
    }
    return q;
  }
  var cache = {};
  function caching(resource, next) {
    var _this = this;
    if (cache[resource.url]) {
      resource.data = cache[resource.url];
      resource.complete();
    } else {
      resource.onComplete.once(function() {
        return cache[_this.url] = _this.data;
      });
    }
    next();
  }
  function _defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor)
        descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }
  function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps)
      _defineProperties(Constructor.prototype, protoProps);
    if (staticProps)
      _defineProperties(Constructor, staticProps);
    return Constructor;
  }
  var useXdr = !!(window.XDomainRequest && !("withCredentials" in new XMLHttpRequest()));
  var tempAnchor2 = null;
  var STATUS_NONE = 0;
  var STATUS_OK = 200;
  var STATUS_EMPTY = 204;
  var STATUS_IE_BUG_EMPTY = 1223;
  var STATUS_TYPE_OK = 2;
  function _noop$1() {
  }
  var Resource2 = /* @__PURE__ */ function() {
    Resource3.setExtensionLoadType = function setExtensionLoadType(extname, loadType) {
      setExtMap(Resource3._loadTypeMap, extname, loadType);
    };
    Resource3.setExtensionXhrType = function setExtensionXhrType(extname, xhrType) {
      setExtMap(Resource3._xhrTypeMap, extname, xhrType);
    };
    function Resource3(name, url, options) {
      if (typeof name !== "string" || typeof url !== "string") {
        throw new Error("Both name and url are required for constructing a resource.");
      }
      options = options || {};
      this._flags = 0;
      this._setFlag(Resource3.STATUS_FLAGS.DATA_URL, url.indexOf("data:") === 0);
      this.name = name;
      this.url = url;
      this.extension = this._getExtension();
      this.data = null;
      this.crossOrigin = options.crossOrigin === true ? "anonymous" : options.crossOrigin;
      this.timeout = options.timeout || 0;
      this.loadType = options.loadType || this._determineLoadType();
      this.xhrType = options.xhrType;
      this.metadata = options.metadata || {};
      this.error = null;
      this.xhr = null;
      this.children = [];
      this.type = Resource3.TYPE.UNKNOWN;
      this.progressChunk = 0;
      this._dequeue = _noop$1;
      this._onLoadBinding = null;
      this._elementTimer = 0;
      this._boundComplete = this.complete.bind(this);
      this._boundOnError = this._onError.bind(this);
      this._boundOnProgress = this._onProgress.bind(this);
      this._boundOnTimeout = this._onTimeout.bind(this);
      this._boundXhrOnError = this._xhrOnError.bind(this);
      this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this);
      this._boundXhrOnAbort = this._xhrOnAbort.bind(this);
      this._boundXhrOnLoad = this._xhrOnLoad.bind(this);
      this.onStart = new import_mini_signals.default();
      this.onProgress = new import_mini_signals.default();
      this.onComplete = new import_mini_signals.default();
      this.onAfterMiddleware = new import_mini_signals.default();
    }
    var _proto = Resource3.prototype;
    _proto.complete = function complete() {
      this._clearEvents();
      this._finish();
    };
    _proto.abort = function abort(message) {
      if (this.error) {
        return;
      }
      this.error = new Error(message);
      this._clearEvents();
      if (this.xhr) {
        this.xhr.abort();
      } else if (this.xdr) {
        this.xdr.abort();
      } else if (this.data) {
        if (this.data.src) {
          this.data.src = Resource3.EMPTY_GIF;
        } else {
          while (this.data.firstChild) {
            this.data.removeChild(this.data.firstChild);
          }
        }
      }
      this._finish();
    };
    _proto.load = function load(cb) {
      var _this = this;
      if (this.isLoading) {
        return;
      }
      if (this.isComplete) {
        if (cb) {
          setTimeout(function() {
            return cb(_this);
          }, 1);
        }
        return;
      } else if (cb) {
        this.onComplete.once(cb);
      }
      this._setFlag(Resource3.STATUS_FLAGS.LOADING, true);
      this.onStart.dispatch(this);
      if (this.crossOrigin === false || typeof this.crossOrigin !== "string") {
        this.crossOrigin = this._determineCrossOrigin(this.url);
      }
      switch (this.loadType) {
        case Resource3.LOAD_TYPE.IMAGE:
          this.type = Resource3.TYPE.IMAGE;
          this._loadElement("image");
          break;
        case Resource3.LOAD_TYPE.AUDIO:
          this.type = Resource3.TYPE.AUDIO;
          this._loadSourceElement("audio");
          break;
        case Resource3.LOAD_TYPE.VIDEO:
          this.type = Resource3.TYPE.VIDEO;
          this._loadSourceElement("video");
          break;
        case Resource3.LOAD_TYPE.XHR:
        default:
          if (useXdr && this.crossOrigin) {
            this._loadXdr();
          } else {
            this._loadXhr();
          }
          break;
      }
    };
    _proto._hasFlag = function _hasFlag(flag) {
      return (this._flags & flag) !== 0;
    };
    _proto._setFlag = function _setFlag(flag, value) {
      this._flags = value ? this._flags | flag : this._flags & ~flag;
    };
    _proto._clearEvents = function _clearEvents() {
      clearTimeout(this._elementTimer);
      if (this.data && this.data.removeEventListener) {
        this.data.removeEventListener("error", this._boundOnError, false);
        this.data.removeEventListener("load", this._boundComplete, false);
        this.data.removeEventListener("progress", this._boundOnProgress, false);
        this.data.removeEventListener("canplaythrough", this._boundComplete, false);
      }
      if (this.xhr) {
        if (this.xhr.removeEventListener) {
          this.xhr.removeEventListener("error", this._boundXhrOnError, false);
          this.xhr.removeEventListener("timeout", this._boundXhrOnTimeout, false);
          this.xhr.removeEventListener("abort", this._boundXhrOnAbort, false);
          this.xhr.removeEventListener("progress", this._boundOnProgress, false);
          this.xhr.removeEventListener("load", this._boundXhrOnLoad, false);
        } else {
          this.xhr.onerror = null;
          this.xhr.ontimeout = null;
          this.xhr.onprogress = null;
          this.xhr.onload = null;
        }
      }
    };
    _proto._finish = function _finish() {
      if (this.isComplete) {
        throw new Error("Complete called again for an already completed resource.");
      }
      this._setFlag(Resource3.STATUS_FLAGS.COMPLETE, true);
      this._setFlag(Resource3.STATUS_FLAGS.LOADING, false);
      this.onComplete.dispatch(this);
    };
    _proto._loadElement = function _loadElement(type) {
      if (this.metadata.loadElement) {
        this.data = this.metadata.loadElement;
      } else if (type === "image" && typeof window.Image !== "undefined") {
        this.data = new Image();
      } else {
        this.data = document.createElement(type);
      }
      if (this.crossOrigin) {
        this.data.crossOrigin = this.crossOrigin;
      }
      if (!this.metadata.skipSource) {
        this.data.src = this.url;
      }
      this.data.addEventListener("error", this._boundOnError, false);
      this.data.addEventListener("load", this._boundComplete, false);
      this.data.addEventListener("progress", this._boundOnProgress, false);
      if (this.timeout) {
        this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout);
      }
    };
    _proto._loadSourceElement = function _loadSourceElement(type) {
      if (this.metadata.loadElement) {
        this.data = this.metadata.loadElement;
      } else if (type === "audio" && typeof window.Audio !== "undefined") {
        this.data = new Audio();
      } else {
        this.data = document.createElement(type);
      }
      if (this.data === null) {
        this.abort("Unsupported element: " + type);
        return;
      }
      if (this.crossOrigin) {
        this.data.crossOrigin = this.crossOrigin;
      }
      if (!this.metadata.skipSource) {
        if (navigator.isCocoonJS) {
          this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;
        } else if (Array.isArray(this.url)) {
          var mimeTypes = this.metadata.mimeType;
          for (var i = 0; i < this.url.length; ++i) {
            this.data.appendChild(this._createSource(type, this.url[i], Array.isArray(mimeTypes) ? mimeTypes[i] : mimeTypes));
          }
        } else {
          var _mimeTypes = this.metadata.mimeType;
          this.data.appendChild(this._createSource(type, this.url, Array.isArray(_mimeTypes) ? _mimeTypes[0] : _mimeTypes));
        }
      }
      this.data.addEventListener("error", this._boundOnError, false);
      this.data.addEventListener("load", this._boundComplete, false);
      this.data.addEventListener("progress", this._boundOnProgress, false);
      this.data.addEventListener("canplaythrough", this._boundComplete, false);
      this.data.load();
      if (this.timeout) {
        this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout);
      }
    };
    _proto._loadXhr = function _loadXhr() {
      if (typeof this.xhrType !== "string") {
        this.xhrType = this._determineXhrType();
      }
      var xhr = this.xhr = new XMLHttpRequest();
      xhr.open("GET", this.url, true);
      xhr.timeout = this.timeout;
      if (this.xhrType === Resource3.XHR_RESPONSE_TYPE.JSON || this.xhrType === Resource3.XHR_RESPONSE_TYPE.DOCUMENT) {
        xhr.responseType = Resource3.XHR_RESPONSE_TYPE.TEXT;
      } else {
        xhr.responseType = this.xhrType;
      }
      xhr.addEventListener("error", this._boundXhrOnError, false);
      xhr.addEventListener("timeout", this._boundXhrOnTimeout, false);
      xhr.addEventListener("abort", this._boundXhrOnAbort, false);
      xhr.addEventListener("progress", this._boundOnProgress, false);
      xhr.addEventListener("load", this._boundXhrOnLoad, false);
      xhr.send();
    };
    _proto._loadXdr = function _loadXdr() {
      if (typeof this.xhrType !== "string") {
        this.xhrType = this._determineXhrType();
      }
      var xdr = this.xhr = new XDomainRequest();
      xdr.timeout = this.timeout || 5e3;
      xdr.onerror = this._boundXhrOnError;
      xdr.ontimeout = this._boundXhrOnTimeout;
      xdr.onprogress = this._boundOnProgress;
      xdr.onload = this._boundXhrOnLoad;
      xdr.open("GET", this.url, true);
      setTimeout(function() {
        return xdr.send();
      }, 1);
    };
    _proto._createSource = function _createSource(type, url, mime) {
      if (!mime) {
        mime = type + "/" + this._getExtension(url);
      }
      var source = document.createElement("source");
      source.src = url;
      source.type = mime;
      return source;
    };
    _proto._onError = function _onError(event) {
      this.abort("Failed to load element using: " + event.target.nodeName);
    };
    _proto._onProgress = function _onProgress(event) {
      if (event && event.lengthComputable) {
        this.onProgress.dispatch(this, event.loaded / event.total);
      }
    };
    _proto._onTimeout = function _onTimeout() {
      this.abort("Load timed out.");
    };
    _proto._xhrOnError = function _xhrOnError() {
      var xhr = this.xhr;
      this.abort(reqType(xhr) + " Request failed. Status: " + xhr.status + ', text: "' + xhr.statusText + '"');
    };
    _proto._xhrOnTimeout = function _xhrOnTimeout() {
      var xhr = this.xhr;
      this.abort(reqType(xhr) + " Request timed out.");
    };
    _proto._xhrOnAbort = function _xhrOnAbort() {
      var xhr = this.xhr;
      this.abort(reqType(xhr) + " Request was aborted by the user.");
    };
    _proto._xhrOnLoad = function _xhrOnLoad() {
      var xhr = this.xhr;
      var text = "";
      var status = typeof xhr.status === "undefined" ? STATUS_OK : xhr.status;
      if (xhr.responseType === "" || xhr.responseType === "text" || typeof xhr.responseType === "undefined") {
        text = xhr.responseText;
      }
      if (status === STATUS_NONE && (text.length > 0 || xhr.responseType === Resource3.XHR_RESPONSE_TYPE.BUFFER)) {
        status = STATUS_OK;
      } else if (status === STATUS_IE_BUG_EMPTY) {
        status = STATUS_EMPTY;
      }
      var statusType = status / 100 | 0;
      if (statusType === STATUS_TYPE_OK) {
        if (this.xhrType === Resource3.XHR_RESPONSE_TYPE.TEXT) {
          this.data = text;
          this.type = Resource3.TYPE.TEXT;
        } else if (this.xhrType === Resource3.XHR_RESPONSE_TYPE.JSON) {
          try {
            this.data = JSON.parse(text);
            this.type = Resource3.TYPE.JSON;
          } catch (e) {
            this.abort("Error trying to parse loaded json: " + e);
            return;
          }
        } else if (this.xhrType === Resource3.XHR_RESPONSE_TYPE.DOCUMENT) {
          try {
            if (window.DOMParser) {
              var domparser = new DOMParser();
              this.data = domparser.parseFromString(text, "text/xml");
            } else {
              var div = document.createElement("div");
              div.innerHTML = text;
              this.data = div;
            }
            this.type = Resource3.TYPE.XML;
          } catch (e) {
            this.abort("Error trying to parse loaded xml: " + e);
            return;
          }
        } else {
          this.data = xhr.response || text;
        }
      } else {
        this.abort("[" + xhr.status + "] " + xhr.statusText + ": " + xhr.responseURL);
        return;
      }
      this.complete();
    };
    _proto._determineCrossOrigin = function _determineCrossOrigin(url, loc) {
      if (url.indexOf("data:") === 0) {
        return "";
      }
      if (window.origin !== window.location.origin) {
        return "anonymous";
      }
      loc = loc || window.location;
      if (!tempAnchor2) {
        tempAnchor2 = document.createElement("a");
      }
      tempAnchor2.href = url;
      url = import_parse_uri.default(tempAnchor2.href, {
        strictMode: true
      });
      var samePort = !url.port && loc.port === "" || url.port === loc.port;
      var protocol = url.protocol ? url.protocol + ":" : "";
      if (url.host !== loc.hostname || !samePort || protocol !== loc.protocol) {
        return "anonymous";
      }
      return "";
    };
    _proto._determineXhrType = function _determineXhrType() {
      return Resource3._xhrTypeMap[this.extension] || Resource3.XHR_RESPONSE_TYPE.TEXT;
    };
    _proto._determineLoadType = function _determineLoadType() {
      return Resource3._loadTypeMap[this.extension] || Resource3.LOAD_TYPE.XHR;
    };
    _proto._getExtension = function _getExtension() {
      var url = this.url;
      var ext = "";
      if (this.isDataUrl) {
        var slashIndex = url.indexOf("/");
        ext = url.substring(slashIndex + 1, url.indexOf(";", slashIndex));
      } else {
        var queryStart = url.indexOf("?");
        var hashStart = url.indexOf("#");
        var index4 = Math.min(queryStart > -1 ? queryStart : url.length, hashStart > -1 ? hashStart : url.length);
        url = url.substring(0, index4);
        ext = url.substring(url.lastIndexOf(".") + 1);
      }
      return ext.toLowerCase();
    };
    _proto._getMimeFromXhrType = function _getMimeFromXhrType(type) {
      switch (type) {
        case Resource3.XHR_RESPONSE_TYPE.BUFFER:
          return "application/octet-binary";
        case Resource3.XHR_RESPONSE_TYPE.BLOB:
          return "application/blob";
        case Resource3.XHR_RESPONSE_TYPE.DOCUMENT:
          return "application/xml";
        case Resource3.XHR_RESPONSE_TYPE.JSON:
          return "application/json";
        case Resource3.XHR_RESPONSE_TYPE.DEFAULT:
        case Resource3.XHR_RESPONSE_TYPE.TEXT:
        default:
          return "text/plain";
      }
    };
    _createClass(Resource3, [{
      key: "isDataUrl",
      get: function get() {
        return this._hasFlag(Resource3.STATUS_FLAGS.DATA_URL);
      }
    }, {
      key: "isComplete",
      get: function get() {
        return this._hasFlag(Resource3.STATUS_FLAGS.COMPLETE);
      }
    }, {
      key: "isLoading",
      get: function get() {
        return this._hasFlag(Resource3.STATUS_FLAGS.LOADING);
      }
    }]);
    return Resource3;
  }();
  Resource2.STATUS_FLAGS = {
    NONE: 0,
    DATA_URL: 1 << 0,
    COMPLETE: 1 << 1,
    LOADING: 1 << 2
  };
  Resource2.TYPE = {
    UNKNOWN: 0,
    JSON: 1,
    XML: 2,
    IMAGE: 3,
    AUDIO: 4,
    VIDEO: 5,
    TEXT: 6
  };
  Resource2.LOAD_TYPE = {
    XHR: 1,
    IMAGE: 2,
    AUDIO: 3,
    VIDEO: 4
  };
  Resource2.XHR_RESPONSE_TYPE = {
    DEFAULT: "text",
    BUFFER: "arraybuffer",
    BLOB: "blob",
    DOCUMENT: "document",
    JSON: "json",
    TEXT: "text"
  };
  Resource2._loadTypeMap = {
    gif: Resource2.LOAD_TYPE.IMAGE,
    png: Resource2.LOAD_TYPE.IMAGE,
    bmp: Resource2.LOAD_TYPE.IMAGE,
    jpg: Resource2.LOAD_TYPE.IMAGE,
    jpeg: Resource2.LOAD_TYPE.IMAGE,
    tif: Resource2.LOAD_TYPE.IMAGE,
    tiff: Resource2.LOAD_TYPE.IMAGE,
    webp: Resource2.LOAD_TYPE.IMAGE,
    tga: Resource2.LOAD_TYPE.IMAGE,
    svg: Resource2.LOAD_TYPE.IMAGE,
    "svg+xml": Resource2.LOAD_TYPE.IMAGE,
    mp3: Resource2.LOAD_TYPE.AUDIO,
    ogg: Resource2.LOAD_TYPE.AUDIO,
    wav: Resource2.LOAD_TYPE.AUDIO,
    mp4: Resource2.LOAD_TYPE.VIDEO,
    webm: Resource2.LOAD_TYPE.VIDEO
  };
  Resource2._xhrTypeMap = {
    xhtml: Resource2.XHR_RESPONSE_TYPE.DOCUMENT,
    html: Resource2.XHR_RESPONSE_TYPE.DOCUMENT,
    htm: Resource2.XHR_RESPONSE_TYPE.DOCUMENT,
    xml: Resource2.XHR_RESPONSE_TYPE.DOCUMENT,
    tmx: Resource2.XHR_RESPONSE_TYPE.DOCUMENT,
    svg: Resource2.XHR_RESPONSE_TYPE.DOCUMENT,
    tsx: Resource2.XHR_RESPONSE_TYPE.DOCUMENT,
    gif: Resource2.XHR_RESPONSE_TYPE.BLOB,
    png: Resource2.XHR_RESPONSE_TYPE.BLOB,
    bmp: Resource2.XHR_RESPONSE_TYPE.BLOB,
    jpg: Resource2.XHR_RESPONSE_TYPE.BLOB,
    jpeg: Resource2.XHR_RESPONSE_TYPE.BLOB,
    tif: Resource2.XHR_RESPONSE_TYPE.BLOB,
    tiff: Resource2.XHR_RESPONSE_TYPE.BLOB,
    webp: Resource2.XHR_RESPONSE_TYPE.BLOB,
    tga: Resource2.XHR_RESPONSE_TYPE.BLOB,
    json: Resource2.XHR_RESPONSE_TYPE.JSON,
    text: Resource2.XHR_RESPONSE_TYPE.TEXT,
    txt: Resource2.XHR_RESPONSE_TYPE.TEXT,
    ttf: Resource2.XHR_RESPONSE_TYPE.BUFFER,
    otf: Resource2.XHR_RESPONSE_TYPE.BUFFER
  };
  Resource2.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
  function setExtMap(map4, extname, val) {
    if (extname && extname.indexOf(".") === 0) {
      extname = extname.substring(1);
    }
    if (!extname) {
      return;
    }
    map4[extname] = val;
  }
  function reqType(xhr) {
    return xhr.toString().replace("object ", "");
  }
  var _keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  function encodeBinary(input) {
    var output = "";
    var inx = 0;
    while (inx < input.length) {
      var bytebuffer = [0, 0, 0];
      var encodedCharIndexes = [0, 0, 0, 0];
      for (var jnx = 0; jnx < bytebuffer.length; ++jnx) {
        if (inx < input.length) {
          bytebuffer[jnx] = input.charCodeAt(inx++) & 255;
        } else {
          bytebuffer[jnx] = 0;
        }
      }
      encodedCharIndexes[0] = bytebuffer[0] >> 2;
      encodedCharIndexes[1] = (bytebuffer[0] & 3) << 4 | bytebuffer[1] >> 4;
      encodedCharIndexes[2] = (bytebuffer[1] & 15) << 2 | bytebuffer[2] >> 6;
      encodedCharIndexes[3] = bytebuffer[2] & 63;
      var paddingBytes = inx - (input.length - 1);
      switch (paddingBytes) {
        case 2:
          encodedCharIndexes[3] = 64;
          encodedCharIndexes[2] = 64;
          break;
        case 1:
          encodedCharIndexes[3] = 64;
          break;
        default:
          break;
      }
      for (var _jnx = 0; _jnx < encodedCharIndexes.length; ++_jnx) {
        output += _keyStr.charAt(encodedCharIndexes[_jnx]);
      }
    }
    return output;
  }
  var Url = window.URL || window.webkitURL;
  function parsing(resource, next) {
    if (!resource.data) {
      next();
      return;
    }
    if (resource.xhr && resource.xhrType === Resource2.XHR_RESPONSE_TYPE.BLOB) {
      if (!window.Blob || typeof resource.data === "string") {
        var type = resource.xhr.getResponseHeader("content-type");
        if (type && type.indexOf("image") === 0) {
          resource.data = new Image();
          resource.data.src = "data:" + type + ";base64," + encodeBinary(resource.xhr.responseText);
          resource.type = Resource2.TYPE.IMAGE;
          resource.data.onload = function() {
            resource.data.onload = null;
            next();
          };
          return;
        }
      } else if (resource.data.type.indexOf("image") === 0) {
        var src = Url.createObjectURL(resource.data);
        resource.blob = resource.data;
        resource.data = new Image();
        resource.data.src = src;
        resource.type = Resource2.TYPE.IMAGE;
        resource.data.onload = function() {
          Url.revokeObjectURL(src);
          resource.data.onload = null;
          next();
        };
        return;
      }
    }
    next();
  }
  var index2 = {
    caching,
    parsing
  };
  var MAX_PROGRESS = 100;
  var rgxExtractUrlHash = /(#[\w-]+)?$/;
  var Loader = /* @__PURE__ */ function() {
    function Loader3(baseUrl, concurrency) {
      var _this = this;
      if (baseUrl === void 0) {
        baseUrl = "";
      }
      if (concurrency === void 0) {
        concurrency = 10;
      }
      this.baseUrl = baseUrl;
      this.progress = 0;
      this.loading = false;
      this.defaultQueryString = "";
      this._beforeMiddleware = [];
      this._afterMiddleware = [];
      this._resourcesParsing = [];
      this._boundLoadResource = function(r, d) {
        return _this._loadResource(r, d);
      };
      this._queue = queue(this._boundLoadResource, concurrency);
      this._queue.pause();
      this.resources = {};
      this.onProgress = new import_mini_signals.default();
      this.onError = new import_mini_signals.default();
      this.onLoad = new import_mini_signals.default();
      this.onStart = new import_mini_signals.default();
      this.onComplete = new import_mini_signals.default();
      for (var i = 0; i < Loader3._defaultBeforeMiddleware.length; ++i) {
        this.pre(Loader3._defaultBeforeMiddleware[i]);
      }
      for (var _i = 0; _i < Loader3._defaultAfterMiddleware.length; ++_i) {
        this.use(Loader3._defaultAfterMiddleware[_i]);
      }
    }
    var _proto = Loader3.prototype;
    _proto.add = function add(name, url, options, cb) {
      if (Array.isArray(name)) {
        for (var i = 0; i < name.length; ++i) {
          this.add(name[i]);
        }
        return this;
      }
      if (typeof name === "object") {
        cb = url || name.callback || name.onComplete;
        options = name;
        url = name.url;
        name = name.name || name.key || name.url;
      }
      if (typeof url !== "string") {
        cb = options;
        options = url;
        url = name;
      }
      if (typeof url !== "string") {
        throw new Error("No url passed to add resource to loader.");
      }
      if (typeof options === "function") {
        cb = options;
        options = null;
      }
      if (this.loading && (!options || !options.parentResource)) {
        throw new Error("Cannot add resources while the loader is running.");
      }
      if (this.resources[name]) {
        throw new Error('Resource named "' + name + '" already exists.');
      }
      url = this._prepareUrl(url);
      this.resources[name] = new Resource2(name, url, options);
      if (typeof cb === "function") {
        this.resources[name].onAfterMiddleware.once(cb);
      }
      if (this.loading) {
        var parent = options.parentResource;
        var incompleteChildren = [];
        for (var _i2 = 0; _i2 < parent.children.length; ++_i2) {
          if (!parent.children[_i2].isComplete) {
            incompleteChildren.push(parent.children[_i2]);
          }
        }
        var fullChunk = parent.progressChunk * (incompleteChildren.length + 1);
        var eachChunk = fullChunk / (incompleteChildren.length + 2);
        parent.children.push(this.resources[name]);
        parent.progressChunk = eachChunk;
        for (var _i3 = 0; _i3 < incompleteChildren.length; ++_i3) {
          incompleteChildren[_i3].progressChunk = eachChunk;
        }
        this.resources[name].progressChunk = eachChunk;
      }
      this._queue.push(this.resources[name]);
      return this;
    };
    _proto.pre = function pre(fn) {
      this._beforeMiddleware.push(fn);
      return this;
    };
    _proto.use = function use(fn) {
      this._afterMiddleware.push(fn);
      return this;
    };
    _proto.reset = function reset() {
      this.progress = 0;
      this.loading = false;
      this._queue.kill();
      this._queue.pause();
      for (var k in this.resources) {
        var res = this.resources[k];
        if (res._onLoadBinding) {
          res._onLoadBinding.detach();
        }
        if (res.isLoading) {
          res.abort();
        }
      }
      this.resources = {};
      return this;
    };
    _proto.load = function load(cb) {
      if (typeof cb === "function") {
        this.onComplete.once(cb);
      }
      if (this.loading) {
        return this;
      }
      if (this._queue.idle()) {
        this._onStart();
        this._onComplete();
      } else {
        var numTasks = this._queue._tasks.length;
        var chunk = MAX_PROGRESS / numTasks;
        for (var i = 0; i < this._queue._tasks.length; ++i) {
          this._queue._tasks[i].data.progressChunk = chunk;
        }
        this._onStart();
        this._queue.resume();
      }
      return this;
    };
    _proto._prepareUrl = function _prepareUrl(url) {
      var parsedUrl = import_parse_uri.default(url, {
        strictMode: true
      });
      var result;
      if (parsedUrl.protocol || !parsedUrl.path || url.indexOf("//") === 0) {
        result = url;
      } else if (this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && url.charAt(0) !== "/") {
        result = this.baseUrl + "/" + url;
      } else {
        result = this.baseUrl + url;
      }
      if (this.defaultQueryString) {
        var hash = rgxExtractUrlHash.exec(result)[0];
        result = result.substr(0, result.length - hash.length);
        if (result.indexOf("?") !== -1) {
          result += "&" + this.defaultQueryString;
        } else {
          result += "?" + this.defaultQueryString;
        }
        result += hash;
      }
      return result;
    };
    _proto._loadResource = function _loadResource(resource, dequeue) {
      var _this2 = this;
      resource._dequeue = dequeue;
      eachSeries(this._beforeMiddleware, function(fn, next) {
        fn.call(_this2, resource, function() {
          next(resource.isComplete ? {} : null);
        });
      }, function() {
        if (resource.isComplete) {
          _this2._onLoad(resource);
        } else {
          resource._onLoadBinding = resource.onComplete.once(_this2._onLoad, _this2);
          resource.load();
        }
      }, true);
    };
    _proto._onStart = function _onStart() {
      this.progress = 0;
      this.loading = true;
      this.onStart.dispatch(this);
    };
    _proto._onComplete = function _onComplete() {
      this.progress = MAX_PROGRESS;
      this.loading = false;
      this.onComplete.dispatch(this, this.resources);
    };
    _proto._onLoad = function _onLoad(resource) {
      var _this3 = this;
      resource._onLoadBinding = null;
      this._resourcesParsing.push(resource);
      resource._dequeue();
      eachSeries(this._afterMiddleware, function(fn, next) {
        fn.call(_this3, resource, next);
      }, function() {
        resource.onAfterMiddleware.dispatch(resource);
        _this3.progress = Math.min(MAX_PROGRESS, _this3.progress + resource.progressChunk);
        _this3.onProgress.dispatch(_this3, resource);
        if (resource.error) {
          _this3.onError.dispatch(resource.error, _this3, resource);
        } else {
          _this3.onLoad.dispatch(_this3, resource);
        }
        _this3._resourcesParsing.splice(_this3._resourcesParsing.indexOf(resource), 1);
        if (_this3._queue.idle() && _this3._resourcesParsing.length === 0) {
          _this3._onComplete();
        }
      }, true);
    };
    _createClass(Loader3, [{
      key: "concurrency",
      get: function get() {
        return this._queue.concurrency;
      },
      set: function set(concurrency) {
        this._queue.concurrency = concurrency;
      }
    }]);
    return Loader3;
  }();
  Loader._defaultBeforeMiddleware = [];
  Loader._defaultAfterMiddleware = [];
  Loader.pre = function LoaderPreStatic(fn) {
    Loader._defaultBeforeMiddleware.push(fn);
    return Loader;
  };
  Loader.use = function LoaderUseStatic(fn) {
    Loader._defaultAfterMiddleware.push(fn);
    return Loader;
  };

  // node_modules/@pixi/loaders/lib/loaders.es.js
  /*!
   * @pixi/loaders - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/loaders is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var LoaderResource = Resource2;
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics4 = function(d, b) {
    extendStatics4 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics4(d, b);
  };
  function __extends4(d, b) {
    extendStatics4(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var TextureLoader = function() {
    function TextureLoader2() {
    }
    TextureLoader2.use = function(resource, next) {
      if (resource.data && resource.type === Resource2.TYPE.IMAGE) {
        resource.texture = Texture.fromLoader(resource.data, resource.url, resource.name);
      }
      next();
    };
    return TextureLoader2;
  }();
  var Loader2 = function(_super) {
    __extends4(Loader3, _super);
    function Loader3(baseUrl, concurrency) {
      var _this = _super.call(this, baseUrl, concurrency) || this;
      for (var i = 0; i < Loader3._plugins.length; ++i) {
        var plugin = Loader3._plugins[i];
        var pre = plugin.pre, use = plugin.use;
        if (pre) {
          _this.pre(pre);
        }
        if (use) {
          _this.use(use);
        }
      }
      _this._protected = false;
      return _this;
    }
    Loader3.prototype.destroy = function() {
      if (!this._protected) {
        this.reset();
      }
    };
    Object.defineProperty(Loader3, "shared", {
      get: function() {
        var shared = Loader3._shared;
        if (!shared) {
          shared = new Loader3();
          shared._protected = true;
          Loader3._shared = shared;
        }
        return shared;
      },
      enumerable: false,
      configurable: true
    });
    Loader3.registerPlugin = function(plugin) {
      Loader3._plugins.push(plugin);
      if (plugin.add) {
        plugin.add();
      }
      return Loader3;
    };
    Loader3._plugins = [];
    return Loader3;
  }(Loader);
  Loader2.registerPlugin({use: index2.parsing});
  Loader2.registerPlugin(TextureLoader);
  var AppLoaderPlugin = function() {
    function AppLoaderPlugin2() {
    }
    AppLoaderPlugin2.init = function(options) {
      options = Object.assign({
        sharedLoader: false
      }, options);
      this.loader = options.sharedLoader ? Loader2.shared : new Loader2();
    };
    AppLoaderPlugin2.destroy = function() {
      if (this.loader) {
        this.loader.destroy();
        this.loader = null;
      }
    };
    return AppLoaderPlugin2;
  }();

  // node_modules/@pixi/particles/lib/particles.es.js
  /*!
   * @pixi/particles - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/particles is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics5 = function(d, b) {
    extendStatics5 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics5(d, b);
  };
  function __extends5(d, b) {
    extendStatics5(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var ParticleContainer = function(_super) {
    __extends5(ParticleContainer2, _super);
    function ParticleContainer2(maxSize, properties, batchSize, autoResize) {
      if (maxSize === void 0) {
        maxSize = 1500;
      }
      if (batchSize === void 0) {
        batchSize = 16384;
      }
      if (autoResize === void 0) {
        autoResize = false;
      }
      var _this = _super.call(this) || this;
      var maxBatchSize = 16384;
      if (batchSize > maxBatchSize) {
        batchSize = maxBatchSize;
      }
      _this._properties = [false, true, false, false, false];
      _this._maxSize = maxSize;
      _this._batchSize = batchSize;
      _this._buffers = null;
      _this._bufferUpdateIDs = [];
      _this._updateID = 0;
      _this.interactiveChildren = false;
      _this.blendMode = BLEND_MODES.NORMAL;
      _this.autoResize = autoResize;
      _this.roundPixels = true;
      _this.baseTexture = null;
      _this.setProperties(properties);
      _this._tint = 0;
      _this.tintRgb = new Float32Array(4);
      _this.tint = 16777215;
      return _this;
    }
    ParticleContainer2.prototype.setProperties = function(properties) {
      if (properties) {
        this._properties[0] = "vertices" in properties || "scale" in properties ? !!properties.vertices || !!properties.scale : this._properties[0];
        this._properties[1] = "position" in properties ? !!properties.position : this._properties[1];
        this._properties[2] = "rotation" in properties ? !!properties.rotation : this._properties[2];
        this._properties[3] = "uvs" in properties ? !!properties.uvs : this._properties[3];
        this._properties[4] = "tint" in properties || "alpha" in properties ? !!properties.tint || !!properties.alpha : this._properties[4];
      }
    };
    ParticleContainer2.prototype.updateTransform = function() {
      this.displayObjectUpdateTransform();
    };
    Object.defineProperty(ParticleContainer2.prototype, "tint", {
      get: function() {
        return this._tint;
      },
      set: function(value) {
        this._tint = value;
        hex2rgb(value, this.tintRgb);
      },
      enumerable: false,
      configurable: true
    });
    ParticleContainer2.prototype.render = function(renderer) {
      var _this = this;
      if (!this.visible || this.worldAlpha <= 0 || !this.children.length || !this.renderable) {
        return;
      }
      if (!this.baseTexture) {
        this.baseTexture = this.children[0]._texture.baseTexture;
        if (!this.baseTexture.valid) {
          this.baseTexture.once("update", function() {
            return _this.onChildrenChange(0);
          });
        }
      }
      renderer.batch.setObjectRenderer(renderer.plugins.particle);
      renderer.plugins.particle.render(this);
    };
    ParticleContainer2.prototype.onChildrenChange = function(smallestChildIndex) {
      var bufferIndex = Math.floor(smallestChildIndex / this._batchSize);
      while (this._bufferUpdateIDs.length < bufferIndex) {
        this._bufferUpdateIDs.push(0);
      }
      this._bufferUpdateIDs[bufferIndex] = ++this._updateID;
    };
    ParticleContainer2.prototype.dispose = function() {
      if (this._buffers) {
        for (var i = 0; i < this._buffers.length; ++i) {
          this._buffers[i].destroy();
        }
        this._buffers = null;
      }
    };
    ParticleContainer2.prototype.destroy = function(options) {
      _super.prototype.destroy.call(this, options);
      this.dispose();
      this._properties = null;
      this._buffers = null;
      this._bufferUpdateIDs = null;
    };
    return ParticleContainer2;
  }(Container);
  var ParticleBuffer = function() {
    function ParticleBuffer2(properties, dynamicPropertyFlags, size) {
      this.geometry = new Geometry();
      this.indexBuffer = null;
      this.size = size;
      this.dynamicProperties = [];
      this.staticProperties = [];
      for (var i = 0; i < properties.length; ++i) {
        var property = properties[i];
        property = {
          attributeName: property.attributeName,
          size: property.size,
          uploadFunction: property.uploadFunction,
          type: property.type || TYPES.FLOAT,
          offset: property.offset
        };
        if (dynamicPropertyFlags[i]) {
          this.dynamicProperties.push(property);
        } else {
          this.staticProperties.push(property);
        }
      }
      this.staticStride = 0;
      this.staticBuffer = null;
      this.staticData = null;
      this.staticDataUint32 = null;
      this.dynamicStride = 0;
      this.dynamicBuffer = null;
      this.dynamicData = null;
      this.dynamicDataUint32 = null;
      this._updateID = 0;
      this.initBuffers();
    }
    ParticleBuffer2.prototype.initBuffers = function() {
      var geometry = this.geometry;
      var dynamicOffset = 0;
      this.indexBuffer = new Buffer2(createIndicesForQuads(this.size), true, true);
      geometry.addIndex(this.indexBuffer);
      this.dynamicStride = 0;
      for (var i = 0; i < this.dynamicProperties.length; ++i) {
        var property = this.dynamicProperties[i];
        property.offset = dynamicOffset;
        dynamicOffset += property.size;
        this.dynamicStride += property.size;
      }
      var dynBuffer = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
      this.dynamicData = new Float32Array(dynBuffer);
      this.dynamicDataUint32 = new Uint32Array(dynBuffer);
      this.dynamicBuffer = new Buffer2(this.dynamicData, false, false);
      var staticOffset = 0;
      this.staticStride = 0;
      for (var i = 0; i < this.staticProperties.length; ++i) {
        var property = this.staticProperties[i];
        property.offset = staticOffset;
        staticOffset += property.size;
        this.staticStride += property.size;
      }
      var statBuffer = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
      this.staticData = new Float32Array(statBuffer);
      this.staticDataUint32 = new Uint32Array(statBuffer);
      this.staticBuffer = new Buffer2(this.staticData, true, false);
      for (var i = 0; i < this.dynamicProperties.length; ++i) {
        var property = this.dynamicProperties[i];
        geometry.addAttribute(property.attributeName, this.dynamicBuffer, 0, property.type === TYPES.UNSIGNED_BYTE, property.type, this.dynamicStride * 4, property.offset * 4);
      }
      for (var i = 0; i < this.staticProperties.length; ++i) {
        var property = this.staticProperties[i];
        geometry.addAttribute(property.attributeName, this.staticBuffer, 0, property.type === TYPES.UNSIGNED_BYTE, property.type, this.staticStride * 4, property.offset * 4);
      }
    };
    ParticleBuffer2.prototype.uploadDynamic = function(children, startIndex, amount) {
      for (var i = 0; i < this.dynamicProperties.length; i++) {
        var property = this.dynamicProperties[i];
        property.uploadFunction(children, startIndex, amount, property.type === TYPES.UNSIGNED_BYTE ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, property.offset);
      }
      this.dynamicBuffer._updateID++;
    };
    ParticleBuffer2.prototype.uploadStatic = function(children, startIndex, amount) {
      for (var i = 0; i < this.staticProperties.length; i++) {
        var property = this.staticProperties[i];
        property.uploadFunction(children, startIndex, amount, property.type === TYPES.UNSIGNED_BYTE ? this.staticDataUint32 : this.staticData, this.staticStride, property.offset);
      }
      this.staticBuffer._updateID++;
    };
    ParticleBuffer2.prototype.destroy = function() {
      this.indexBuffer = null;
      this.dynamicProperties = null;
      this.dynamicBuffer = null;
      this.dynamicData = null;
      this.dynamicDataUint32 = null;
      this.staticProperties = null;
      this.staticBuffer = null;
      this.staticData = null;
      this.staticDataUint32 = null;
      this.geometry.destroy();
    };
    return ParticleBuffer2;
  }();
  var fragment2 = "varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}";
  var vertex2 = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n";
  var ParticleRenderer = function(_super) {
    __extends5(ParticleRenderer2, _super);
    function ParticleRenderer2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.shader = null;
      _this.properties = null;
      _this.tempMatrix = new Matrix();
      _this.properties = [
        {
          attributeName: "aVertexPosition",
          size: 2,
          uploadFunction: _this.uploadVertices,
          offset: 0
        },
        {
          attributeName: "aPositionCoord",
          size: 2,
          uploadFunction: _this.uploadPosition,
          offset: 0
        },
        {
          attributeName: "aRotation",
          size: 1,
          uploadFunction: _this.uploadRotation,
          offset: 0
        },
        {
          attributeName: "aTextureCoord",
          size: 2,
          uploadFunction: _this.uploadUvs,
          offset: 0
        },
        {
          attributeName: "aColor",
          size: 1,
          type: TYPES.UNSIGNED_BYTE,
          uploadFunction: _this.uploadTint,
          offset: 0
        }
      ];
      _this.shader = Shader.from(vertex2, fragment2, {});
      _this.state = State.for2d();
      return _this;
    }
    ParticleRenderer2.prototype.render = function(container) {
      var children = container.children;
      var maxSize = container._maxSize;
      var batchSize = container._batchSize;
      var renderer = this.renderer;
      var totalChildren = children.length;
      if (totalChildren === 0) {
        return;
      } else if (totalChildren > maxSize && !container.autoResize) {
        totalChildren = maxSize;
      }
      var buffers = container._buffers;
      if (!buffers) {
        buffers = container._buffers = this.generateBuffers(container);
      }
      var baseTexture = children[0]._texture.baseTexture;
      this.state.blendMode = correctBlendMode(container.blendMode, baseTexture.alphaMode);
      renderer.state.set(this.state);
      var gl = renderer.gl;
      var m = container.worldTransform.copyTo(this.tempMatrix);
      m.prepend(renderer.globalUniforms.uniforms.projectionMatrix);
      this.shader.uniforms.translationMatrix = m.toArray(true);
      this.shader.uniforms.uColor = premultiplyRgba(container.tintRgb, container.worldAlpha, this.shader.uniforms.uColor, baseTexture.alphaMode);
      this.shader.uniforms.uSampler = baseTexture;
      this.renderer.shader.bind(this.shader);
      var updateStatic = false;
      for (var i = 0, j = 0; i < totalChildren; i += batchSize, j += 1) {
        var amount = totalChildren - i;
        if (amount > batchSize) {
          amount = batchSize;
        }
        if (j >= buffers.length) {
          buffers.push(this._generateOneMoreBuffer(container));
        }
        var buffer = buffers[j];
        buffer.uploadDynamic(children, i, amount);
        var bid = container._bufferUpdateIDs[j] || 0;
        updateStatic = updateStatic || buffer._updateID < bid;
        if (updateStatic) {
          buffer._updateID = container._updateID;
          buffer.uploadStatic(children, i, amount);
        }
        renderer.geometry.bind(buffer.geometry);
        gl.drawElements(gl.TRIANGLES, amount * 6, gl.UNSIGNED_SHORT, 0);
      }
    };
    ParticleRenderer2.prototype.generateBuffers = function(container) {
      var buffers = [];
      var size = container._maxSize;
      var batchSize = container._batchSize;
      var dynamicPropertyFlags = container._properties;
      for (var i = 0; i < size; i += batchSize) {
        buffers.push(new ParticleBuffer(this.properties, dynamicPropertyFlags, batchSize));
      }
      return buffers;
    };
    ParticleRenderer2.prototype._generateOneMoreBuffer = function(container) {
      var batchSize = container._batchSize;
      var dynamicPropertyFlags = container._properties;
      return new ParticleBuffer(this.properties, dynamicPropertyFlags, batchSize);
    };
    ParticleRenderer2.prototype.uploadVertices = function(children, startIndex, amount, array, stride, offset) {
      var w0 = 0;
      var w1 = 0;
      var h0 = 0;
      var h1 = 0;
      for (var i = 0; i < amount; ++i) {
        var sprite = children[startIndex + i];
        var texture = sprite._texture;
        var sx = sprite.scale.x;
        var sy = sprite.scale.y;
        var trim = texture.trim;
        var orig = texture.orig;
        if (trim) {
          w1 = trim.x - sprite.anchor.x * orig.width;
          w0 = w1 + trim.width;
          h1 = trim.y - sprite.anchor.y * orig.height;
          h0 = h1 + trim.height;
        } else {
          w0 = orig.width * (1 - sprite.anchor.x);
          w1 = orig.width * -sprite.anchor.x;
          h0 = orig.height * (1 - sprite.anchor.y);
          h1 = orig.height * -sprite.anchor.y;
        }
        array[offset] = w1 * sx;
        array[offset + 1] = h1 * sy;
        array[offset + stride] = w0 * sx;
        array[offset + stride + 1] = h1 * sy;
        array[offset + stride * 2] = w0 * sx;
        array[offset + stride * 2 + 1] = h0 * sy;
        array[offset + stride * 3] = w1 * sx;
        array[offset + stride * 3 + 1] = h0 * sy;
        offset += stride * 4;
      }
    };
    ParticleRenderer2.prototype.uploadPosition = function(children, startIndex, amount, array, stride, offset) {
      for (var i = 0; i < amount; i++) {
        var spritePosition = children[startIndex + i].position;
        array[offset] = spritePosition.x;
        array[offset + 1] = spritePosition.y;
        array[offset + stride] = spritePosition.x;
        array[offset + stride + 1] = spritePosition.y;
        array[offset + stride * 2] = spritePosition.x;
        array[offset + stride * 2 + 1] = spritePosition.y;
        array[offset + stride * 3] = spritePosition.x;
        array[offset + stride * 3 + 1] = spritePosition.y;
        offset += stride * 4;
      }
    };
    ParticleRenderer2.prototype.uploadRotation = function(children, startIndex, amount, array, stride, offset) {
      for (var i = 0; i < amount; i++) {
        var spriteRotation = children[startIndex + i].rotation;
        array[offset] = spriteRotation;
        array[offset + stride] = spriteRotation;
        array[offset + stride * 2] = spriteRotation;
        array[offset + stride * 3] = spriteRotation;
        offset += stride * 4;
      }
    };
    ParticleRenderer2.prototype.uploadUvs = function(children, startIndex, amount, array, stride, offset) {
      for (var i = 0; i < amount; ++i) {
        var textureUvs = children[startIndex + i]._texture._uvs;
        if (textureUvs) {
          array[offset] = textureUvs.x0;
          array[offset + 1] = textureUvs.y0;
          array[offset + stride] = textureUvs.x1;
          array[offset + stride + 1] = textureUvs.y1;
          array[offset + stride * 2] = textureUvs.x2;
          array[offset + stride * 2 + 1] = textureUvs.y2;
          array[offset + stride * 3] = textureUvs.x3;
          array[offset + stride * 3 + 1] = textureUvs.y3;
          offset += stride * 4;
        } else {
          array[offset] = 0;
          array[offset + 1] = 0;
          array[offset + stride] = 0;
          array[offset + stride + 1] = 0;
          array[offset + stride * 2] = 0;
          array[offset + stride * 2 + 1] = 0;
          array[offset + stride * 3] = 0;
          array[offset + stride * 3 + 1] = 0;
          offset += stride * 4;
        }
      }
    };
    ParticleRenderer2.prototype.uploadTint = function(children, startIndex, amount, array, stride, offset) {
      for (var i = 0; i < amount; ++i) {
        var sprite = children[startIndex + i];
        var premultiplied = sprite._texture.baseTexture.alphaMode > 0;
        var alpha = sprite.alpha;
        var argb = alpha < 1 && premultiplied ? premultiplyTint(sprite._tintRGB, alpha) : sprite._tintRGB + (alpha * 255 << 24);
        array[offset] = argb;
        array[offset + stride] = argb;
        array[offset + stride * 2] = argb;
        array[offset + stride * 3] = argb;
        offset += stride * 4;
      }
    };
    ParticleRenderer2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      if (this.shader) {
        this.shader.destroy();
        this.shader = null;
      }
      this.tempMatrix = null;
    };
    return ParticleRenderer2;
  }(ObjectRenderer);

  // node_modules/@pixi/graphics/lib/graphics.es.js
  /*!
   * @pixi/graphics - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/graphics is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var LINE_JOIN;
  (function(LINE_JOIN2) {
    LINE_JOIN2["MITER"] = "miter";
    LINE_JOIN2["BEVEL"] = "bevel";
    LINE_JOIN2["ROUND"] = "round";
  })(LINE_JOIN || (LINE_JOIN = {}));
  var LINE_CAP;
  (function(LINE_CAP2) {
    LINE_CAP2["BUTT"] = "butt";
    LINE_CAP2["ROUND"] = "round";
    LINE_CAP2["SQUARE"] = "square";
  })(LINE_CAP || (LINE_CAP = {}));
  var GRAPHICS_CURVES = {
    adaptive: true,
    maxLength: 10,
    minSegments: 8,
    maxSegments: 2048,
    epsilon: 1e-4,
    _segmentsCount: function(length, defaultSegments) {
      if (defaultSegments === void 0) {
        defaultSegments = 20;
      }
      if (!this.adaptive || !length || isNaN(length)) {
        return defaultSegments;
      }
      var result = Math.ceil(length / this.maxLength);
      if (result < this.minSegments) {
        result = this.minSegments;
      } else if (result > this.maxSegments) {
        result = this.maxSegments;
      }
      return result;
    }
  };
  var FillStyle = function() {
    function FillStyle2() {
      this.color = 16777215;
      this.alpha = 1;
      this.texture = Texture.WHITE;
      this.matrix = null;
      this.visible = false;
      this.reset();
    }
    FillStyle2.prototype.clone = function() {
      var obj = new FillStyle2();
      obj.color = this.color;
      obj.alpha = this.alpha;
      obj.texture = this.texture;
      obj.matrix = this.matrix;
      obj.visible = this.visible;
      return obj;
    };
    FillStyle2.prototype.reset = function() {
      this.color = 16777215;
      this.alpha = 1;
      this.texture = Texture.WHITE;
      this.matrix = null;
      this.visible = false;
    };
    FillStyle2.prototype.destroy = function() {
      this.texture = null;
      this.matrix = null;
    };
    return FillStyle2;
  }();
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics6 = function(d, b) {
    extendStatics6 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics6(d, b);
  };
  function __extends6(d, b) {
    extendStatics6(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var buildPoly = {
    build: function(graphicsData) {
      graphicsData.points = graphicsData.shape.points.slice();
    },
    triangulate: function(graphicsData, graphicsGeometry) {
      var points = graphicsData.points;
      var holes = graphicsData.holes;
      var verts = graphicsGeometry.points;
      var indices2 = graphicsGeometry.indices;
      if (points.length >= 6) {
        var holeArray = [];
        for (var i = 0; i < holes.length; i++) {
          var hole = holes[i];
          holeArray.push(points.length / 2);
          points = points.concat(hole.points);
        }
        var triangles = import_earcut.default(points, holeArray, 2);
        if (!triangles) {
          return;
        }
        var vertPos = verts.length / 2;
        for (var i = 0; i < triangles.length; i += 3) {
          indices2.push(triangles[i] + vertPos);
          indices2.push(triangles[i + 1] + vertPos);
          indices2.push(triangles[i + 2] + vertPos);
        }
        for (var i = 0; i < points.length; i++) {
          verts.push(points[i]);
        }
      }
    }
  };
  var buildCircle = {
    build: function(graphicsData) {
      var circleData = graphicsData.shape;
      var points = graphicsData.points;
      var x = circleData.x;
      var y = circleData.y;
      var width;
      var height;
      points.length = 0;
      if (graphicsData.type === SHAPES.CIRC) {
        width = circleData.radius;
        height = circleData.radius;
      } else {
        var ellipseData = graphicsData.shape;
        width = ellipseData.width;
        height = ellipseData.height;
      }
      if (width === 0 || height === 0) {
        return;
      }
      var totalSegs = Math.floor(30 * Math.sqrt(circleData.radius)) || Math.floor(15 * Math.sqrt(width + height));
      totalSegs /= 2.3;
      var seg = Math.PI * 2 / totalSegs;
      for (var i = 0; i < totalSegs - 0.5; i++) {
        points.push(x + Math.sin(-seg * i) * width, y + Math.cos(-seg * i) * height);
      }
      points.push(points[0], points[1]);
    },
    triangulate: function(graphicsData, graphicsGeometry) {
      var points = graphicsData.points;
      var verts = graphicsGeometry.points;
      var indices2 = graphicsGeometry.indices;
      var vertPos = verts.length / 2;
      var center = vertPos;
      var circle = graphicsData.shape;
      var matrix = graphicsData.matrix;
      var x = circle.x;
      var y = circle.y;
      verts.push(graphicsData.matrix ? matrix.a * x + matrix.c * y + matrix.tx : x, graphicsData.matrix ? matrix.b * x + matrix.d * y + matrix.ty : y);
      for (var i = 0; i < points.length; i += 2) {
        verts.push(points[i], points[i + 1]);
        indices2.push(vertPos++, center, vertPos);
      }
    }
  };
  var buildRectangle = {
    build: function(graphicsData) {
      var rectData = graphicsData.shape;
      var x = rectData.x;
      var y = rectData.y;
      var width = rectData.width;
      var height = rectData.height;
      var points = graphicsData.points;
      points.length = 0;
      points.push(x, y, x + width, y, x + width, y + height, x, y + height);
    },
    triangulate: function(graphicsData, graphicsGeometry) {
      var points = graphicsData.points;
      var verts = graphicsGeometry.points;
      var vertPos = verts.length / 2;
      verts.push(points[0], points[1], points[2], points[3], points[6], points[7], points[4], points[5]);
      graphicsGeometry.indices.push(vertPos, vertPos + 1, vertPos + 2, vertPos + 1, vertPos + 2, vertPos + 3);
    }
  };
  function getPt(n1, n2, perc) {
    var diff = n2 - n1;
    return n1 + diff * perc;
  }
  function quadraticBezierCurve(fromX, fromY, cpX, cpY, toX, toY, out) {
    if (out === void 0) {
      out = [];
    }
    var n = 20;
    var points = out;
    var xa = 0;
    var ya = 0;
    var xb = 0;
    var yb = 0;
    var x = 0;
    var y = 0;
    for (var i = 0, j = 0; i <= n; ++i) {
      j = i / n;
      xa = getPt(fromX, cpX, j);
      ya = getPt(fromY, cpY, j);
      xb = getPt(cpX, toX, j);
      yb = getPt(cpY, toY, j);
      x = getPt(xa, xb, j);
      y = getPt(ya, yb, j);
      points.push(x, y);
    }
    return points;
  }
  var buildRoundedRectangle = {
    build: function(graphicsData) {
      var rrectData = graphicsData.shape;
      var points = graphicsData.points;
      var x = rrectData.x;
      var y = rrectData.y;
      var width = rrectData.width;
      var height = rrectData.height;
      var radius = Math.max(0, Math.min(rrectData.radius, Math.min(width, height) / 2));
      points.length = 0;
      if (!radius) {
        points.push(x, y, x + width, y, x + width, y + height, x, y + height);
      } else {
        quadraticBezierCurve(x, y + radius, x, y, x + radius, y, points);
        quadraticBezierCurve(x + width - radius, y, x + width, y, x + width, y + radius, points);
        quadraticBezierCurve(x + width, y + height - radius, x + width, y + height, x + width - radius, y + height, points);
        quadraticBezierCurve(x + radius, y + height, x, y + height, x, y + height - radius, points);
      }
    },
    triangulate: function(graphicsData, graphicsGeometry) {
      var points = graphicsData.points;
      var verts = graphicsGeometry.points;
      var indices2 = graphicsGeometry.indices;
      var vecPos = verts.length / 2;
      var triangles = import_earcut.default(points, null, 2);
      for (var i = 0, j = triangles.length; i < j; i += 3) {
        indices2.push(triangles[i] + vecPos);
        indices2.push(triangles[i + 1] + vecPos);
        indices2.push(triangles[i + 2] + vecPos);
      }
      for (var i = 0, j = points.length; i < j; i++) {
        verts.push(points[i], points[++i]);
      }
    }
  };
  function square(x, y, nx, ny, innerWeight, outerWeight, clockwise, verts) {
    var ix = x - nx * innerWeight;
    var iy = y - ny * innerWeight;
    var ox = x + nx * outerWeight;
    var oy = y + ny * outerWeight;
    var exx;
    var eyy;
    if (clockwise) {
      exx = ny;
      eyy = -nx;
    } else {
      exx = -ny;
      eyy = nx;
    }
    var eix = ix + exx;
    var eiy = iy + eyy;
    var eox = ox + exx;
    var eoy = oy + eyy;
    verts.push(eix, eiy);
    verts.push(eox, eoy);
    return 2;
  }
  function round(cx, cy, sx, sy, ex, ey, verts, clockwise) {
    var cx2p0x = sx - cx;
    var cy2p0y = sy - cy;
    var angle0 = Math.atan2(cx2p0x, cy2p0y);
    var angle1 = Math.atan2(ex - cx, ey - cy);
    if (clockwise && angle0 < angle1) {
      angle0 += Math.PI * 2;
    } else if (!clockwise && angle0 > angle1) {
      angle1 += Math.PI * 2;
    }
    var startAngle = angle0;
    var angleDiff = angle1 - angle0;
    var absAngleDiff = Math.abs(angleDiff);
    var radius = Math.sqrt(cx2p0x * cx2p0x + cy2p0y * cy2p0y);
    var segCount = (15 * absAngleDiff * Math.sqrt(radius) / Math.PI >> 0) + 1;
    var angleInc = angleDiff / segCount;
    startAngle += angleInc;
    if (clockwise) {
      verts.push(cx, cy);
      verts.push(sx, sy);
      for (var i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {
        verts.push(cx, cy);
        verts.push(cx + Math.sin(angle) * radius, cy + Math.cos(angle) * radius);
      }
      verts.push(cx, cy);
      verts.push(ex, ey);
    } else {
      verts.push(sx, sy);
      verts.push(cx, cy);
      for (var i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {
        verts.push(cx + Math.sin(angle) * radius, cy + Math.cos(angle) * radius);
        verts.push(cx, cy);
      }
      verts.push(ex, ey);
      verts.push(cx, cy);
    }
    return segCount * 2;
  }
  function buildNonNativeLine(graphicsData, graphicsGeometry) {
    var shape = graphicsData.shape;
    var points = graphicsData.points || shape.points.slice();
    var eps = graphicsGeometry.closePointEps;
    if (points.length === 0) {
      return;
    }
    var style = graphicsData.lineStyle;
    var firstPoint = new Point(points[0], points[1]);
    var lastPoint = new Point(points[points.length - 2], points[points.length - 1]);
    var closedShape = shape.type !== SHAPES.POLY || shape.closeStroke;
    var closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps && Math.abs(firstPoint.y - lastPoint.y) < eps;
    if (closedShape) {
      points = points.slice();
      if (closedPath) {
        points.pop();
        points.pop();
        lastPoint.set(points[points.length - 2], points[points.length - 1]);
      }
      var midPointX = (firstPoint.x + lastPoint.x) * 0.5;
      var midPointY = (lastPoint.y + firstPoint.y) * 0.5;
      points.unshift(midPointX, midPointY);
      points.push(midPointX, midPointY);
    }
    var verts = graphicsGeometry.points;
    var length = points.length / 2;
    var indexCount = points.length;
    var indexStart = verts.length / 2;
    var width = style.width / 2;
    var widthSquared = width * width;
    var miterLimitSquared = style.miterLimit * style.miterLimit;
    var x0 = points[0];
    var y0 = points[1];
    var x1 = points[2];
    var y1 = points[3];
    var x2 = 0;
    var y2 = 0;
    var perpx = -(y0 - y1);
    var perpy = x0 - x1;
    var perp1x = 0;
    var perp1y = 0;
    var dist = Math.sqrt(perpx * perpx + perpy * perpy);
    perpx /= dist;
    perpy /= dist;
    perpx *= width;
    perpy *= width;
    var ratio = style.alignment;
    var innerWeight = (1 - ratio) * 2;
    var outerWeight = ratio * 2;
    if (!closedShape) {
      if (style.cap === LINE_CAP.ROUND) {
        indexCount += round(x0 - perpx * (innerWeight - outerWeight) * 0.5, y0 - perpy * (innerWeight - outerWeight) * 0.5, x0 - perpx * innerWeight, y0 - perpy * innerWeight, x0 + perpx * outerWeight, y0 + perpy * outerWeight, verts, true) + 2;
      } else if (style.cap === LINE_CAP.SQUARE) {
        indexCount += square(x0, y0, perpx, perpy, innerWeight, outerWeight, true, verts);
      }
    }
    verts.push(x0 - perpx * innerWeight, y0 - perpy * innerWeight);
    verts.push(x0 + perpx * outerWeight, y0 + perpy * outerWeight);
    for (var i = 1; i < length - 1; ++i) {
      x0 = points[(i - 1) * 2];
      y0 = points[(i - 1) * 2 + 1];
      x1 = points[i * 2];
      y1 = points[i * 2 + 1];
      x2 = points[(i + 1) * 2];
      y2 = points[(i + 1) * 2 + 1];
      perpx = -(y0 - y1);
      perpy = x0 - x1;
      dist = Math.sqrt(perpx * perpx + perpy * perpy);
      perpx /= dist;
      perpy /= dist;
      perpx *= width;
      perpy *= width;
      perp1x = -(y1 - y2);
      perp1y = x1 - x2;
      dist = Math.sqrt(perp1x * perp1x + perp1y * perp1y);
      perp1x /= dist;
      perp1y /= dist;
      perp1x *= width;
      perp1y *= width;
      var dx0 = x1 - x0;
      var dy0 = y0 - y1;
      var dx1 = x1 - x2;
      var dy1 = y2 - y1;
      var cross = dy0 * dx1 - dy1 * dx0;
      var clockwise = cross < 0;
      if (Math.abs(cross) < 0.1) {
        verts.push(x1 - perpx * innerWeight, y1 - perpy * innerWeight);
        verts.push(x1 + perpx * outerWeight, y1 + perpy * outerWeight);
        continue;
      }
      var c1 = (-perpx + x0) * (-perpy + y1) - (-perpx + x1) * (-perpy + y0);
      var c2 = (-perp1x + x2) * (-perp1y + y1) - (-perp1x + x1) * (-perp1y + y2);
      var px = (dx0 * c2 - dx1 * c1) / cross;
      var py = (dy1 * c1 - dy0 * c2) / cross;
      var pdist = (px - x1) * (px - x1) + (py - y1) * (py - y1);
      var imx = x1 + (px - x1) * innerWeight;
      var imy = y1 + (py - y1) * innerWeight;
      var omx = x1 - (px - x1) * outerWeight;
      var omy = y1 - (py - y1) * outerWeight;
      var smallerInsideSegmentSq = Math.min(dx0 * dx0 + dy0 * dy0, dx1 * dx1 + dy1 * dy1);
      var insideWeight = clockwise ? innerWeight : outerWeight;
      var smallerInsideDiagonalSq = smallerInsideSegmentSq + insideWeight * insideWeight * widthSquared;
      var insideMiterOk = pdist <= smallerInsideDiagonalSq;
      if (insideMiterOk) {
        if (style.join === LINE_JOIN.BEVEL || pdist / widthSquared > miterLimitSquared) {
          if (clockwise) {
            verts.push(imx, imy);
            verts.push(x1 + perpx * outerWeight, y1 + perpy * outerWeight);
            verts.push(imx, imy);
            verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);
          } else {
            verts.push(x1 - perpx * innerWeight, y1 - perpy * innerWeight);
            verts.push(omx, omy);
            verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);
            verts.push(omx, omy);
          }
          indexCount += 2;
        } else if (style.join === LINE_JOIN.ROUND) {
          if (clockwise) {
            verts.push(imx, imy);
            verts.push(x1 + perpx * outerWeight, y1 + perpy * outerWeight);
            indexCount += round(x1, y1, x1 + perpx * outerWeight, y1 + perpy * outerWeight, x1 + perp1x * outerWeight, y1 + perp1y * outerWeight, verts, true) + 4;
            verts.push(imx, imy);
            verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);
          } else {
            verts.push(x1 - perpx * innerWeight, y1 - perpy * innerWeight);
            verts.push(omx, omy);
            indexCount += round(x1, y1, x1 - perpx * innerWeight, y1 - perpy * innerWeight, x1 - perp1x * innerWeight, y1 - perp1y * innerWeight, verts, false) + 4;
            verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);
            verts.push(omx, omy);
          }
        } else {
          verts.push(imx, imy);
          verts.push(omx, omy);
        }
      } else {
        verts.push(x1 - perpx * innerWeight, y1 - perpy * innerWeight);
        verts.push(x1 + perpx * outerWeight, y1 + perpy * outerWeight);
        if (style.join === LINE_JOIN.BEVEL || pdist / widthSquared > miterLimitSquared)
          ;
        else if (style.join === LINE_JOIN.ROUND) {
          if (clockwise) {
            indexCount += round(x1, y1, x1 + perpx * outerWeight, y1 + perpy * outerWeight, x1 + perp1x * outerWeight, y1 + perp1y * outerWeight, verts, true) + 2;
          } else {
            indexCount += round(x1, y1, x1 - perpx * innerWeight, y1 - perpy * innerWeight, x1 - perp1x * innerWeight, y1 - perp1y * innerWeight, verts, false) + 2;
          }
        } else {
          if (clockwise) {
            verts.push(omx, omy);
            verts.push(omx, omy);
          } else {
            verts.push(imx, imy);
            verts.push(imx, imy);
          }
          indexCount += 2;
        }
        verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);
        verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);
        indexCount += 2;
      }
    }
    x0 = points[(length - 2) * 2];
    y0 = points[(length - 2) * 2 + 1];
    x1 = points[(length - 1) * 2];
    y1 = points[(length - 1) * 2 + 1];
    perpx = -(y0 - y1);
    perpy = x0 - x1;
    dist = Math.sqrt(perpx * perpx + perpy * perpy);
    perpx /= dist;
    perpy /= dist;
    perpx *= width;
    perpy *= width;
    verts.push(x1 - perpx * innerWeight, y1 - perpy * innerWeight);
    verts.push(x1 + perpx * outerWeight, y1 + perpy * outerWeight);
    if (!closedShape) {
      if (style.cap === LINE_CAP.ROUND) {
        indexCount += round(x1 - perpx * (innerWeight - outerWeight) * 0.5, y1 - perpy * (innerWeight - outerWeight) * 0.5, x1 - perpx * innerWeight, y1 - perpy * innerWeight, x1 + perpx * outerWeight, y1 + perpy * outerWeight, verts, false) + 2;
      } else if (style.cap === LINE_CAP.SQUARE) {
        indexCount += square(x1, y1, perpx, perpy, innerWeight, outerWeight, false, verts);
      }
    }
    var indices2 = graphicsGeometry.indices;
    var eps2 = GRAPHICS_CURVES.epsilon * GRAPHICS_CURVES.epsilon;
    for (var i = indexStart; i < indexCount + indexStart - 2; ++i) {
      x0 = verts[i * 2];
      y0 = verts[i * 2 + 1];
      x1 = verts[(i + 1) * 2];
      y1 = verts[(i + 1) * 2 + 1];
      x2 = verts[(i + 2) * 2];
      y2 = verts[(i + 2) * 2 + 1];
      if (Math.abs(x0 * (y1 - y2) + x1 * (y2 - y0) + x2 * (y0 - y1)) < eps2) {
        continue;
      }
      indices2.push(i, i + 1, i + 2);
    }
  }
  function buildNativeLine(graphicsData, graphicsGeometry) {
    var i = 0;
    var shape = graphicsData.shape;
    var points = graphicsData.points || shape.points;
    var closedShape = shape.type !== SHAPES.POLY || shape.closeStroke;
    if (points.length === 0) {
      return;
    }
    var verts = graphicsGeometry.points;
    var indices2 = graphicsGeometry.indices;
    var length = points.length / 2;
    var startIndex = verts.length / 2;
    var currentIndex = startIndex;
    verts.push(points[0], points[1]);
    for (i = 1; i < length; i++) {
      verts.push(points[i * 2], points[i * 2 + 1]);
      indices2.push(currentIndex, currentIndex + 1);
      currentIndex++;
    }
    if (closedShape) {
      indices2.push(currentIndex, startIndex);
    }
  }
  function buildLine(graphicsData, graphicsGeometry) {
    if (graphicsData.lineStyle.native) {
      buildNativeLine(graphicsData, graphicsGeometry);
    } else {
      buildNonNativeLine(graphicsData, graphicsGeometry);
    }
  }
  var Star = function(_super) {
    __extends6(Star2, _super);
    function Star2(x, y, points, radius, innerRadius, rotation) {
      if (rotation === void 0) {
        rotation = 0;
      }
      var _this = this;
      innerRadius = innerRadius || radius / 2;
      var startAngle = -1 * Math.PI / 2 + rotation;
      var len = points * 2;
      var delta = PI_2 / len;
      var polygon = [];
      for (var i = 0; i < len; i++) {
        var r = i % 2 ? innerRadius : radius;
        var angle = i * delta + startAngle;
        polygon.push(x + r * Math.cos(angle), y + r * Math.sin(angle));
      }
      _this = _super.call(this, polygon) || this;
      return _this;
    }
    return Star2;
  }(Polygon);
  var ArcUtils = function() {
    function ArcUtils2() {
    }
    ArcUtils2.curveTo = function(x1, y1, x2, y2, radius, points) {
      var fromX = points[points.length - 2];
      var fromY = points[points.length - 1];
      var a1 = fromY - y1;
      var b1 = fromX - x1;
      var a2 = y2 - y1;
      var b2 = x2 - x1;
      var mm = Math.abs(a1 * b2 - b1 * a2);
      if (mm < 1e-8 || radius === 0) {
        if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1) {
          points.push(x1, y1);
        }
        return null;
      }
      var dd = a1 * a1 + b1 * b1;
      var cc = a2 * a2 + b2 * b2;
      var tt = a1 * a2 + b1 * b2;
      var k1 = radius * Math.sqrt(dd) / mm;
      var k2 = radius * Math.sqrt(cc) / mm;
      var j1 = k1 * tt / dd;
      var j2 = k2 * tt / cc;
      var cx = k1 * b2 + k2 * b1;
      var cy = k1 * a2 + k2 * a1;
      var px = b1 * (k2 + j1);
      var py = a1 * (k2 + j1);
      var qx = b2 * (k1 + j2);
      var qy = a2 * (k1 + j2);
      var startAngle = Math.atan2(py - cy, px - cx);
      var endAngle = Math.atan2(qy - cy, qx - cx);
      return {
        cx: cx + x1,
        cy: cy + y1,
        radius,
        startAngle,
        endAngle,
        anticlockwise: b1 * a2 > b2 * a1
      };
    };
    ArcUtils2.arc = function(_startX, _startY, cx, cy, radius, startAngle, endAngle, _anticlockwise, points) {
      var sweep = endAngle - startAngle;
      var n = GRAPHICS_CURVES._segmentsCount(Math.abs(sweep) * radius, Math.ceil(Math.abs(sweep) / PI_2) * 40);
      var theta = sweep / (n * 2);
      var theta2 = theta * 2;
      var cTheta = Math.cos(theta);
      var sTheta = Math.sin(theta);
      var segMinus = n - 1;
      var remainder = segMinus % 1 / segMinus;
      for (var i = 0; i <= segMinus; ++i) {
        var real = i + remainder * i;
        var angle = theta + startAngle + theta2 * real;
        var c = Math.cos(angle);
        var s = -Math.sin(angle);
        points.push((cTheta * c + sTheta * s) * radius + cx, (cTheta * -s + sTheta * c) * radius + cy);
      }
    };
    return ArcUtils2;
  }();
  var BezierUtils = function() {
    function BezierUtils2() {
    }
    BezierUtils2.curveLength = function(fromX, fromY, cpX, cpY, cpX2, cpY2, toX, toY) {
      var n = 10;
      var result = 0;
      var t = 0;
      var t2 = 0;
      var t3 = 0;
      var nt = 0;
      var nt2 = 0;
      var nt3 = 0;
      var x = 0;
      var y = 0;
      var dx = 0;
      var dy = 0;
      var prevX = fromX;
      var prevY = fromY;
      for (var i = 1; i <= n; ++i) {
        t = i / n;
        t2 = t * t;
        t3 = t2 * t;
        nt = 1 - t;
        nt2 = nt * nt;
        nt3 = nt2 * nt;
        x = nt3 * fromX + 3 * nt2 * t * cpX + 3 * nt * t2 * cpX2 + t3 * toX;
        y = nt3 * fromY + 3 * nt2 * t * cpY + 3 * nt * t2 * cpY2 + t3 * toY;
        dx = prevX - x;
        dy = prevY - y;
        prevX = x;
        prevY = y;
        result += Math.sqrt(dx * dx + dy * dy);
      }
      return result;
    };
    BezierUtils2.curveTo = function(cpX, cpY, cpX2, cpY2, toX, toY, points) {
      var fromX = points[points.length - 2];
      var fromY = points[points.length - 1];
      points.length -= 2;
      var n = GRAPHICS_CURVES._segmentsCount(BezierUtils2.curveLength(fromX, fromY, cpX, cpY, cpX2, cpY2, toX, toY));
      var dt = 0;
      var dt2 = 0;
      var dt3 = 0;
      var t2 = 0;
      var t3 = 0;
      points.push(fromX, fromY);
      for (var i = 1, j = 0; i <= n; ++i) {
        j = i / n;
        dt = 1 - j;
        dt2 = dt * dt;
        dt3 = dt2 * dt;
        t2 = j * j;
        t3 = t2 * j;
        points.push(dt3 * fromX + 3 * dt2 * j * cpX + 3 * dt * t2 * cpX2 + t3 * toX, dt3 * fromY + 3 * dt2 * j * cpY + 3 * dt * t2 * cpY2 + t3 * toY);
      }
    };
    return BezierUtils2;
  }();
  var QuadraticUtils = function() {
    function QuadraticUtils2() {
    }
    QuadraticUtils2.curveLength = function(fromX, fromY, cpX, cpY, toX, toY) {
      var ax = fromX - 2 * cpX + toX;
      var ay = fromY - 2 * cpY + toY;
      var bx = 2 * cpX - 2 * fromX;
      var by = 2 * cpY - 2 * fromY;
      var a = 4 * (ax * ax + ay * ay);
      var b = 4 * (ax * bx + ay * by);
      var c = bx * bx + by * by;
      var s = 2 * Math.sqrt(a + b + c);
      var a2 = Math.sqrt(a);
      var a32 = 2 * a * a2;
      var c2 = 2 * Math.sqrt(c);
      var ba = b / a2;
      return (a32 * s + a2 * b * (s - c2) + (4 * c * a - b * b) * Math.log((2 * a2 + ba + s) / (ba + c2))) / (4 * a32);
    };
    QuadraticUtils2.curveTo = function(cpX, cpY, toX, toY, points) {
      var fromX = points[points.length - 2];
      var fromY = points[points.length - 1];
      var n = GRAPHICS_CURVES._segmentsCount(QuadraticUtils2.curveLength(fromX, fromY, cpX, cpY, toX, toY));
      var xa = 0;
      var ya = 0;
      for (var i = 1; i <= n; ++i) {
        var j = i / n;
        xa = fromX + (cpX - fromX) * j;
        ya = fromY + (cpY - fromY) * j;
        points.push(xa + (cpX + (toX - cpX) * j - xa) * j, ya + (cpY + (toY - cpY) * j - ya) * j);
      }
    };
    return QuadraticUtils2;
  }();
  var BatchPart = function() {
    function BatchPart2() {
      this.reset();
    }
    BatchPart2.prototype.begin = function(style, startIndex, attribStart) {
      this.reset();
      this.style = style;
      this.start = startIndex;
      this.attribStart = attribStart;
    };
    BatchPart2.prototype.end = function(endIndex, endAttrib) {
      this.attribSize = endAttrib - this.attribStart;
      this.size = endIndex - this.start;
    };
    BatchPart2.prototype.reset = function() {
      this.style = null;
      this.size = 0;
      this.start = 0;
      this.attribStart = 0;
      this.attribSize = 0;
    };
    return BatchPart2;
  }();
  var _a;
  var FILL_COMMANDS = (_a = {}, _a[SHAPES.POLY] = buildPoly, _a[SHAPES.CIRC] = buildCircle, _a[SHAPES.ELIP] = buildCircle, _a[SHAPES.RECT] = buildRectangle, _a[SHAPES.RREC] = buildRoundedRectangle, _a);
  var BATCH_POOL = [];
  var DRAW_CALL_POOL = [];
  var index3 = {
    buildPoly,
    buildCircle,
    buildRectangle,
    buildRoundedRectangle,
    FILL_COMMANDS,
    BATCH_POOL,
    DRAW_CALL_POOL,
    buildLine,
    Star,
    ArcUtils,
    BezierUtils,
    QuadraticUtils,
    BatchPart
  };
  var GraphicsData = function() {
    function GraphicsData2(shape, fillStyle, lineStyle, matrix) {
      if (fillStyle === void 0) {
        fillStyle = null;
      }
      if (lineStyle === void 0) {
        lineStyle = null;
      }
      if (matrix === void 0) {
        matrix = null;
      }
      this.shape = shape;
      this.lineStyle = lineStyle;
      this.fillStyle = fillStyle;
      this.matrix = matrix;
      this.type = shape.type;
      this.points = [];
      this.holes = [];
    }
    GraphicsData2.prototype.clone = function() {
      return new GraphicsData2(this.shape, this.fillStyle, this.lineStyle, this.matrix);
    };
    GraphicsData2.prototype.destroy = function() {
      this.shape = null;
      this.holes.length = 0;
      this.holes = null;
      this.points.length = 0;
      this.points = null;
      this.lineStyle = null;
      this.fillStyle = null;
    };
    return GraphicsData2;
  }();
  var tmpPoint = new Point();
  var tmpBounds = new Bounds();
  var GraphicsGeometry = function(_super) {
    __extends6(GraphicsGeometry2, _super);
    function GraphicsGeometry2() {
      var _this = _super.call(this) || this;
      _this.uvsFloat32 = null;
      _this.indicesUint16 = null;
      _this.points = [];
      _this.colors = [];
      _this.uvs = [];
      _this.indices = [];
      _this.textureIds = [];
      _this.graphicsData = [];
      _this.dirty = 0;
      _this.batchDirty = -1;
      _this.cacheDirty = -1;
      _this.clearDirty = 0;
      _this.drawCalls = [];
      _this.batches = [];
      _this.shapeIndex = 0;
      _this._bounds = new Bounds();
      _this.boundsDirty = -1;
      _this.boundsPadding = 0;
      _this.batchable = false;
      _this.indicesUint16 = null;
      _this.uvsFloat32 = null;
      _this.closePointEps = 1e-4;
      return _this;
    }
    Object.defineProperty(GraphicsGeometry2.prototype, "bounds", {
      get: function() {
        if (this.boundsDirty !== this.dirty) {
          this.boundsDirty = this.dirty;
          this.calculateBounds();
        }
        return this._bounds;
      },
      enumerable: false,
      configurable: true
    });
    GraphicsGeometry2.prototype.invalidate = function() {
      this.boundsDirty = -1;
      this.dirty++;
      this.batchDirty++;
      this.shapeIndex = 0;
      this.points.length = 0;
      this.colors.length = 0;
      this.uvs.length = 0;
      this.indices.length = 0;
      this.textureIds.length = 0;
      for (var i = 0; i < this.drawCalls.length; i++) {
        this.drawCalls[i].texArray.clear();
        DRAW_CALL_POOL.push(this.drawCalls[i]);
      }
      this.drawCalls.length = 0;
      for (var i = 0; i < this.batches.length; i++) {
        var batchPart = this.batches[i];
        batchPart.reset();
        BATCH_POOL.push(batchPart);
      }
      this.batches.length = 0;
    };
    GraphicsGeometry2.prototype.clear = function() {
      if (this.graphicsData.length > 0) {
        this.invalidate();
        this.clearDirty++;
        this.graphicsData.length = 0;
      }
      return this;
    };
    GraphicsGeometry2.prototype.drawShape = function(shape, fillStyle, lineStyle, matrix) {
      if (fillStyle === void 0) {
        fillStyle = null;
      }
      if (lineStyle === void 0) {
        lineStyle = null;
      }
      if (matrix === void 0) {
        matrix = null;
      }
      var data = new GraphicsData(shape, fillStyle, lineStyle, matrix);
      this.graphicsData.push(data);
      this.dirty++;
      return this;
    };
    GraphicsGeometry2.prototype.drawHole = function(shape, matrix) {
      if (matrix === void 0) {
        matrix = null;
      }
      if (!this.graphicsData.length) {
        return null;
      }
      var data = new GraphicsData(shape, null, null, matrix);
      var lastShape = this.graphicsData[this.graphicsData.length - 1];
      data.lineStyle = lastShape.lineStyle;
      lastShape.holes.push(data);
      this.dirty++;
      return this;
    };
    GraphicsGeometry2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      for (var i = 0; i < this.graphicsData.length; ++i) {
        this.graphicsData[i].destroy();
      }
      this.points.length = 0;
      this.points = null;
      this.colors.length = 0;
      this.colors = null;
      this.uvs.length = 0;
      this.uvs = null;
      this.indices.length = 0;
      this.indices = null;
      this.indexBuffer.destroy();
      this.indexBuffer = null;
      this.graphicsData.length = 0;
      this.graphicsData = null;
      this.drawCalls.length = 0;
      this.drawCalls = null;
      this.batches.length = 0;
      this.batches = null;
      this._bounds = null;
    };
    GraphicsGeometry2.prototype.containsPoint = function(point) {
      var graphicsData = this.graphicsData;
      for (var i = 0; i < graphicsData.length; ++i) {
        var data = graphicsData[i];
        if (!data.fillStyle.visible) {
          continue;
        }
        if (data.shape) {
          if (data.matrix) {
            data.matrix.applyInverse(point, tmpPoint);
          } else {
            tmpPoint.copyFrom(point);
          }
          if (data.shape.contains(tmpPoint.x, tmpPoint.y)) {
            var hitHole = false;
            if (data.holes) {
              for (var i_1 = 0; i_1 < data.holes.length; i_1++) {
                var hole = data.holes[i_1];
                if (hole.shape.contains(tmpPoint.x, tmpPoint.y)) {
                  hitHole = true;
                  break;
                }
              }
            }
            if (!hitHole) {
              return true;
            }
          }
        }
      }
      return false;
    };
    GraphicsGeometry2.prototype.updateBatches = function(allow32Indices) {
      if (!this.graphicsData.length) {
        this.batchable = true;
        return;
      }
      if (!this.validateBatching()) {
        return;
      }
      this.cacheDirty = this.dirty;
      var uvs = this.uvs;
      var graphicsData = this.graphicsData;
      var batchPart = null;
      var currentStyle = null;
      if (this.batches.length > 0) {
        batchPart = this.batches[this.batches.length - 1];
        currentStyle = batchPart.style;
      }
      for (var i = this.shapeIndex; i < graphicsData.length; i++) {
        this.shapeIndex++;
        var data = graphicsData[i];
        var fillStyle = data.fillStyle;
        var lineStyle = data.lineStyle;
        var command = FILL_COMMANDS[data.type];
        command.build(data);
        if (data.matrix) {
          this.transformPoints(data.points, data.matrix);
        }
        for (var j = 0; j < 2; j++) {
          var style = j === 0 ? fillStyle : lineStyle;
          if (!style.visible) {
            continue;
          }
          var nextTexture = style.texture.baseTexture;
          var index_1 = this.indices.length;
          var attribIndex = this.points.length / 2;
          nextTexture.wrapMode = WRAP_MODES.REPEAT;
          if (j === 0) {
            this.processFill(data);
          } else {
            this.processLine(data);
          }
          var size = this.points.length / 2 - attribIndex;
          if (size === 0) {
            continue;
          }
          if (batchPart && !this._compareStyles(currentStyle, style)) {
            batchPart.end(index_1, attribIndex);
            batchPart = null;
          }
          if (!batchPart) {
            batchPart = BATCH_POOL.pop() || new BatchPart();
            batchPart.begin(style, index_1, attribIndex);
            this.batches.push(batchPart);
            currentStyle = style;
          }
          this.addUvs(this.points, uvs, style.texture, attribIndex, size, style.matrix);
        }
      }
      var index4 = this.indices.length;
      var attrib = this.points.length / 2;
      if (batchPart) {
        batchPart.end(index4, attrib);
      }
      if (this.batches.length === 0) {
        this.batchable = true;
        return;
      }
      if (this.indicesUint16 && this.indices.length === this.indicesUint16.length) {
        this.indicesUint16.set(this.indices);
      } else {
        var need32 = attrib > 65535 && allow32Indices;
        this.indicesUint16 = need32 ? new Uint32Array(this.indices) : new Uint16Array(this.indices);
      }
      this.batchable = this.isBatchable();
      if (this.batchable) {
        this.packBatches();
      } else {
        this.buildDrawCalls();
      }
    };
    GraphicsGeometry2.prototype._compareStyles = function(styleA, styleB) {
      if (!styleA || !styleB) {
        return false;
      }
      if (styleA.texture.baseTexture !== styleB.texture.baseTexture) {
        return false;
      }
      if (styleA.color + styleA.alpha !== styleB.color + styleB.alpha) {
        return false;
      }
      if (!!styleA.native !== !!styleB.native) {
        return false;
      }
      return true;
    };
    GraphicsGeometry2.prototype.validateBatching = function() {
      if (this.dirty === this.cacheDirty || !this.graphicsData.length) {
        return false;
      }
      for (var i = 0, l = this.graphicsData.length; i < l; i++) {
        var data = this.graphicsData[i];
        var fill = data.fillStyle;
        var line = data.lineStyle;
        if (fill && !fill.texture.baseTexture.valid) {
          return false;
        }
        if (line && !line.texture.baseTexture.valid) {
          return false;
        }
      }
      return true;
    };
    GraphicsGeometry2.prototype.packBatches = function() {
      this.batchDirty++;
      this.uvsFloat32 = new Float32Array(this.uvs);
      var batches = this.batches;
      for (var i = 0, l = batches.length; i < l; i++) {
        var batch = batches[i];
        for (var j = 0; j < batch.size; j++) {
          var index4 = batch.start + j;
          this.indicesUint16[index4] = this.indicesUint16[index4] - batch.attribStart;
        }
      }
    };
    GraphicsGeometry2.prototype.isBatchable = function() {
      if (this.points.length > 65535 * 2) {
        return false;
      }
      var batches = this.batches;
      for (var i = 0; i < batches.length; i++) {
        if (batches[i].style.native) {
          return false;
        }
      }
      return this.points.length < GraphicsGeometry2.BATCHABLE_SIZE * 2;
    };
    GraphicsGeometry2.prototype.buildDrawCalls = function() {
      var TICK = ++BaseTexture._globalBatch;
      for (var i = 0; i < this.drawCalls.length; i++) {
        this.drawCalls[i].texArray.clear();
        DRAW_CALL_POOL.push(this.drawCalls[i]);
      }
      this.drawCalls.length = 0;
      var colors = this.colors;
      var textureIds = this.textureIds;
      var currentGroup = DRAW_CALL_POOL.pop();
      if (!currentGroup) {
        currentGroup = new BatchDrawCall();
        currentGroup.texArray = new BatchTextureArray();
      }
      currentGroup.texArray.count = 0;
      currentGroup.start = 0;
      currentGroup.size = 0;
      currentGroup.type = DRAW_MODES.TRIANGLES;
      var textureCount = 0;
      var currentTexture = null;
      var textureId = 0;
      var native = false;
      var drawMode = DRAW_MODES.TRIANGLES;
      var index4 = 0;
      this.drawCalls.push(currentGroup);
      for (var i = 0; i < this.batches.length; i++) {
        var data = this.batches[i];
        var MAX_TEXTURES = 8;
        var style = data.style;
        var nextTexture = style.texture.baseTexture;
        if (native !== !!style.native) {
          native = !!style.native;
          drawMode = native ? DRAW_MODES.LINES : DRAW_MODES.TRIANGLES;
          currentTexture = null;
          textureCount = MAX_TEXTURES;
          TICK++;
        }
        if (currentTexture !== nextTexture) {
          currentTexture = nextTexture;
          if (nextTexture._batchEnabled !== TICK) {
            if (textureCount === MAX_TEXTURES) {
              TICK++;
              textureCount = 0;
              if (currentGroup.size > 0) {
                currentGroup = DRAW_CALL_POOL.pop();
                if (!currentGroup) {
                  currentGroup = new BatchDrawCall();
                  currentGroup.texArray = new BatchTextureArray();
                }
                this.drawCalls.push(currentGroup);
              }
              currentGroup.start = index4;
              currentGroup.size = 0;
              currentGroup.texArray.count = 0;
              currentGroup.type = drawMode;
            }
            nextTexture.touched = 1;
            nextTexture._batchEnabled = TICK;
            nextTexture._batchLocation = textureCount;
            nextTexture.wrapMode = 10497;
            currentGroup.texArray.elements[currentGroup.texArray.count++] = nextTexture;
            textureCount++;
          }
        }
        currentGroup.size += data.size;
        index4 += data.size;
        textureId = nextTexture._batchLocation;
        this.addColors(colors, style.color, style.alpha, data.attribSize);
        this.addTextureIds(textureIds, textureId, data.attribSize);
      }
      BaseTexture._globalBatch = TICK;
      this.packAttributes();
    };
    GraphicsGeometry2.prototype.packAttributes = function() {
      var verts = this.points;
      var uvs = this.uvs;
      var colors = this.colors;
      var textureIds = this.textureIds;
      var glPoints = new ArrayBuffer(verts.length * 3 * 4);
      var f32 = new Float32Array(glPoints);
      var u32 = new Uint32Array(glPoints);
      var p = 0;
      for (var i = 0; i < verts.length / 2; i++) {
        f32[p++] = verts[i * 2];
        f32[p++] = verts[i * 2 + 1];
        f32[p++] = uvs[i * 2];
        f32[p++] = uvs[i * 2 + 1];
        u32[p++] = colors[i];
        f32[p++] = textureIds[i];
      }
      this._buffer.update(glPoints);
      this._indexBuffer.update(this.indicesUint16);
    };
    GraphicsGeometry2.prototype.processFill = function(data) {
      if (data.holes.length) {
        this.processHoles(data.holes);
        buildPoly.triangulate(data, this);
      } else {
        var command = FILL_COMMANDS[data.type];
        command.triangulate(data, this);
      }
    };
    GraphicsGeometry2.prototype.processLine = function(data) {
      buildLine(data, this);
      for (var i = 0; i < data.holes.length; i++) {
        buildLine(data.holes[i], this);
      }
    };
    GraphicsGeometry2.prototype.processHoles = function(holes) {
      for (var i = 0; i < holes.length; i++) {
        var hole = holes[i];
        var command = FILL_COMMANDS[hole.type];
        command.build(hole);
        if (hole.matrix) {
          this.transformPoints(hole.points, hole.matrix);
        }
      }
    };
    GraphicsGeometry2.prototype.calculateBounds = function() {
      var bounds = this._bounds;
      var sequenceBounds = tmpBounds;
      var curMatrix = Matrix.IDENTITY;
      this._bounds.clear();
      sequenceBounds.clear();
      for (var i = 0; i < this.graphicsData.length; i++) {
        var data = this.graphicsData[i];
        var shape = data.shape;
        var type = data.type;
        var lineStyle = data.lineStyle;
        var nextMatrix = data.matrix || Matrix.IDENTITY;
        var lineWidth = 0;
        if (lineStyle && lineStyle.visible) {
          var alignment = lineStyle.alignment;
          lineWidth = lineStyle.width;
          if (type === SHAPES.POLY) {
            lineWidth = lineWidth * (0.5 + Math.abs(0.5 - alignment));
          } else {
            lineWidth = lineWidth * Math.max(0, alignment);
          }
        }
        if (curMatrix !== nextMatrix) {
          if (!sequenceBounds.isEmpty()) {
            bounds.addBoundsMatrix(sequenceBounds, curMatrix);
            sequenceBounds.clear();
          }
          curMatrix = nextMatrix;
        }
        if (type === SHAPES.RECT || type === SHAPES.RREC) {
          var rect = shape;
          sequenceBounds.addFramePad(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, lineWidth, lineWidth);
        } else if (type === SHAPES.CIRC) {
          var circle = shape;
          sequenceBounds.addFramePad(circle.x, circle.y, circle.x, circle.y, circle.radius + lineWidth, circle.radius + lineWidth);
        } else if (type === SHAPES.ELIP) {
          var ellipse = shape;
          sequenceBounds.addFramePad(ellipse.x, ellipse.y, ellipse.x, ellipse.y, ellipse.width + lineWidth, ellipse.height + lineWidth);
        } else {
          var poly = shape;
          bounds.addVerticesMatrix(curMatrix, poly.points, 0, poly.points.length, lineWidth, lineWidth);
        }
      }
      if (!sequenceBounds.isEmpty()) {
        bounds.addBoundsMatrix(sequenceBounds, curMatrix);
      }
      bounds.pad(this.boundsPadding, this.boundsPadding);
    };
    GraphicsGeometry2.prototype.transformPoints = function(points, matrix) {
      for (var i = 0; i < points.length / 2; i++) {
        var x = points[i * 2];
        var y = points[i * 2 + 1];
        points[i * 2] = matrix.a * x + matrix.c * y + matrix.tx;
        points[i * 2 + 1] = matrix.b * x + matrix.d * y + matrix.ty;
      }
    };
    GraphicsGeometry2.prototype.addColors = function(colors, color, alpha, size) {
      var rgb = (color >> 16) + (color & 65280) + ((color & 255) << 16);
      var rgba = premultiplyTint(rgb, alpha);
      while (size-- > 0) {
        colors.push(rgba);
      }
    };
    GraphicsGeometry2.prototype.addTextureIds = function(textureIds, id, size) {
      while (size-- > 0) {
        textureIds.push(id);
      }
    };
    GraphicsGeometry2.prototype.addUvs = function(verts, uvs, texture, start, size, matrix) {
      if (matrix === void 0) {
        matrix = null;
      }
      var index4 = 0;
      var uvsStart = uvs.length;
      var frame = texture.frame;
      while (index4 < size) {
        var x = verts[(start + index4) * 2];
        var y = verts[(start + index4) * 2 + 1];
        if (matrix) {
          var nx = matrix.a * x + matrix.c * y + matrix.tx;
          y = matrix.b * x + matrix.d * y + matrix.ty;
          x = nx;
        }
        index4++;
        uvs.push(x / frame.width, y / frame.height);
      }
      var baseTexture = texture.baseTexture;
      if (frame.width < baseTexture.width || frame.height < baseTexture.height) {
        this.adjustUvs(uvs, texture, uvsStart, size);
      }
    };
    GraphicsGeometry2.prototype.adjustUvs = function(uvs, texture, start, size) {
      var baseTexture = texture.baseTexture;
      var eps = 1e-6;
      var finish = start + size * 2;
      var frame = texture.frame;
      var scaleX = frame.width / baseTexture.width;
      var scaleY = frame.height / baseTexture.height;
      var offsetX = frame.x / frame.width;
      var offsetY = frame.y / frame.height;
      var minX = Math.floor(uvs[start] + eps);
      var minY = Math.floor(uvs[start + 1] + eps);
      for (var i = start + 2; i < finish; i += 2) {
        minX = Math.min(minX, Math.floor(uvs[i] + eps));
        minY = Math.min(minY, Math.floor(uvs[i + 1] + eps));
      }
      offsetX -= minX;
      offsetY -= minY;
      for (var i = start; i < finish; i += 2) {
        uvs[i] = (uvs[i] + offsetX) * scaleX;
        uvs[i + 1] = (uvs[i + 1] + offsetY) * scaleY;
      }
    };
    GraphicsGeometry2.BATCHABLE_SIZE = 100;
    return GraphicsGeometry2;
  }(BatchGeometry);
  var LineStyle = function(_super) {
    __extends6(LineStyle2, _super);
    function LineStyle2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.width = 0;
      _this.alignment = 0.5;
      _this.native = false;
      _this.cap = LINE_CAP.BUTT;
      _this.join = LINE_JOIN.MITER;
      _this.miterLimit = 10;
      return _this;
    }
    LineStyle2.prototype.clone = function() {
      var obj = new LineStyle2();
      obj.color = this.color;
      obj.alpha = this.alpha;
      obj.texture = this.texture;
      obj.matrix = this.matrix;
      obj.visible = this.visible;
      obj.width = this.width;
      obj.alignment = this.alignment;
      obj.native = this.native;
      obj.cap = this.cap;
      obj.join = this.join;
      obj.miterLimit = this.miterLimit;
      return obj;
    };
    LineStyle2.prototype.reset = function() {
      _super.prototype.reset.call(this);
      this.color = 0;
      this.alignment = 0.5;
      this.width = 0;
      this.native = false;
    };
    return LineStyle2;
  }(FillStyle);
  var temp = new Float32Array(3);
  var DEFAULT_SHADERS = {};
  var Graphics = function(_super) {
    __extends6(Graphics2, _super);
    function Graphics2(geometry) {
      if (geometry === void 0) {
        geometry = null;
      }
      var _this = _super.call(this) || this;
      _this._geometry = geometry || new GraphicsGeometry();
      _this._geometry.refCount++;
      _this.shader = null;
      _this.state = State.for2d();
      _this._fillStyle = new FillStyle();
      _this._lineStyle = new LineStyle();
      _this._matrix = null;
      _this._holeMode = false;
      _this.currentPath = null;
      _this.batches = [];
      _this.batchTint = -1;
      _this.batchDirty = -1;
      _this.vertexData = null;
      _this.pluginName = "batch";
      _this._transformID = -1;
      _this.tint = 16777215;
      _this.blendMode = BLEND_MODES.NORMAL;
      return _this;
    }
    Object.defineProperty(Graphics2.prototype, "geometry", {
      get: function() {
        return this._geometry;
      },
      enumerable: false,
      configurable: true
    });
    Graphics2.prototype.clone = function() {
      this.finishPoly();
      return new Graphics2(this._geometry);
    };
    Object.defineProperty(Graphics2.prototype, "blendMode", {
      get: function() {
        return this.state.blendMode;
      },
      set: function(value) {
        this.state.blendMode = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Graphics2.prototype, "tint", {
      get: function() {
        return this._tint;
      },
      set: function(value) {
        this._tint = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Graphics2.prototype, "fill", {
      get: function() {
        return this._fillStyle;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Graphics2.prototype, "line", {
      get: function() {
        return this._lineStyle;
      },
      enumerable: false,
      configurable: true
    });
    Graphics2.prototype.lineStyle = function(options) {
      if (options === void 0) {
        options = null;
      }
      if (typeof options === "number") {
        var args = arguments;
        options = {
          width: args[0] || 0,
          color: args[1] || 0,
          alpha: args[2] !== void 0 ? args[2] : 1,
          alignment: args[3] !== void 0 ? args[3] : 0.5,
          native: !!args[4]
        };
      }
      return this.lineTextureStyle(options);
    };
    Graphics2.prototype.lineTextureStyle = function(options) {
      if (typeof options === "number") {
        deprecation("v5.2.0", "Please use object-based options for Graphics#lineTextureStyle");
        var _a2 = arguments, width = _a2[0], texture = _a2[1], color = _a2[2], alpha = _a2[3], matrix = _a2[4], alignment = _a2[5], native = _a2[6];
        options = {width, texture, color, alpha, matrix, alignment, native};
        Object.keys(options).forEach(function(key) {
          return options[key] === void 0 && delete options[key];
        });
      }
      options = Object.assign({
        width: 0,
        texture: Texture.WHITE,
        color: options && options.texture ? 16777215 : 0,
        alpha: 1,
        matrix: null,
        alignment: 0.5,
        native: false,
        cap: LINE_CAP.BUTT,
        join: LINE_JOIN.MITER,
        miterLimit: 10
      }, options);
      if (this.currentPath) {
        this.startPoly();
      }
      var visible = options.width > 0 && options.alpha > 0;
      if (!visible) {
        this._lineStyle.reset();
      } else {
        if (options.matrix) {
          options.matrix = options.matrix.clone();
          options.matrix.invert();
        }
        Object.assign(this._lineStyle, {visible}, options);
      }
      return this;
    };
    Graphics2.prototype.startPoly = function() {
      if (this.currentPath) {
        var points = this.currentPath.points;
        var len = this.currentPath.points.length;
        if (len > 2) {
          this.drawShape(this.currentPath);
          this.currentPath = new Polygon();
          this.currentPath.closeStroke = false;
          this.currentPath.points.push(points[len - 2], points[len - 1]);
        }
      } else {
        this.currentPath = new Polygon();
        this.currentPath.closeStroke = false;
      }
    };
    Graphics2.prototype.finishPoly = function() {
      if (this.currentPath) {
        if (this.currentPath.points.length > 2) {
          this.drawShape(this.currentPath);
          this.currentPath = null;
        } else {
          this.currentPath.points.length = 0;
        }
      }
    };
    Graphics2.prototype.moveTo = function(x, y) {
      this.startPoly();
      this.currentPath.points[0] = x;
      this.currentPath.points[1] = y;
      return this;
    };
    Graphics2.prototype.lineTo = function(x, y) {
      if (!this.currentPath) {
        this.moveTo(0, 0);
      }
      var points = this.currentPath.points;
      var fromX = points[points.length - 2];
      var fromY = points[points.length - 1];
      if (fromX !== x || fromY !== y) {
        points.push(x, y);
      }
      return this;
    };
    Graphics2.prototype._initCurve = function(x, y) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = 0;
      }
      if (this.currentPath) {
        if (this.currentPath.points.length === 0) {
          this.currentPath.points = [x, y];
        }
      } else {
        this.moveTo(x, y);
      }
    };
    Graphics2.prototype.quadraticCurveTo = function(cpX, cpY, toX, toY) {
      this._initCurve();
      var points = this.currentPath.points;
      if (points.length === 0) {
        this.moveTo(0, 0);
      }
      QuadraticUtils.curveTo(cpX, cpY, toX, toY, points);
      return this;
    };
    Graphics2.prototype.bezierCurveTo = function(cpX, cpY, cpX2, cpY2, toX, toY) {
      this._initCurve();
      BezierUtils.curveTo(cpX, cpY, cpX2, cpY2, toX, toY, this.currentPath.points);
      return this;
    };
    Graphics2.prototype.arcTo = function(x1, y1, x2, y2, radius) {
      this._initCurve(x1, y1);
      var points = this.currentPath.points;
      var result = ArcUtils.curveTo(x1, y1, x2, y2, radius, points);
      if (result) {
        var cx = result.cx, cy = result.cy, radius_1 = result.radius, startAngle = result.startAngle, endAngle = result.endAngle, anticlockwise = result.anticlockwise;
        this.arc(cx, cy, radius_1, startAngle, endAngle, anticlockwise);
      }
      return this;
    };
    Graphics2.prototype.arc = function(cx, cy, radius, startAngle, endAngle, anticlockwise) {
      if (anticlockwise === void 0) {
        anticlockwise = false;
      }
      if (startAngle === endAngle) {
        return this;
      }
      if (!anticlockwise && endAngle <= startAngle) {
        endAngle += PI_2;
      } else if (anticlockwise && startAngle <= endAngle) {
        startAngle += PI_2;
      }
      var sweep = endAngle - startAngle;
      if (sweep === 0) {
        return this;
      }
      var startX = cx + Math.cos(startAngle) * radius;
      var startY = cy + Math.sin(startAngle) * radius;
      var eps = this._geometry.closePointEps;
      var points = this.currentPath ? this.currentPath.points : null;
      if (points) {
        var xDiff = Math.abs(points[points.length - 2] - startX);
        var yDiff = Math.abs(points[points.length - 1] - startY);
        if (xDiff < eps && yDiff < eps)
          ;
        else {
          points.push(startX, startY);
        }
      } else {
        this.moveTo(startX, startY);
        points = this.currentPath.points;
      }
      ArcUtils.arc(startX, startY, cx, cy, radius, startAngle, endAngle, anticlockwise, points);
      return this;
    };
    Graphics2.prototype.beginFill = function(color, alpha) {
      if (color === void 0) {
        color = 0;
      }
      if (alpha === void 0) {
        alpha = 1;
      }
      return this.beginTextureFill({texture: Texture.WHITE, color, alpha});
    };
    Graphics2.prototype.beginTextureFill = function(options) {
      if (options instanceof Texture) {
        deprecation("v5.2.0", "Please use object-based options for Graphics#beginTextureFill");
        var _a2 = arguments, texture = _a2[0], color = _a2[1], alpha = _a2[2], matrix = _a2[3];
        options = {texture, color, alpha, matrix};
        Object.keys(options).forEach(function(key) {
          return options[key] === void 0 && delete options[key];
        });
      }
      options = Object.assign({
        texture: Texture.WHITE,
        color: 16777215,
        alpha: 1,
        matrix: null
      }, options);
      if (this.currentPath) {
        this.startPoly();
      }
      var visible = options.alpha > 0;
      if (!visible) {
        this._fillStyle.reset();
      } else {
        if (options.matrix) {
          options.matrix = options.matrix.clone();
          options.matrix.invert();
        }
        Object.assign(this._fillStyle, {visible}, options);
      }
      return this;
    };
    Graphics2.prototype.endFill = function() {
      this.finishPoly();
      this._fillStyle.reset();
      return this;
    };
    Graphics2.prototype.drawRect = function(x, y, width, height) {
      return this.drawShape(new Rectangle(x, y, width, height));
    };
    Graphics2.prototype.drawRoundedRect = function(x, y, width, height, radius) {
      return this.drawShape(new RoundedRectangle(x, y, width, height, radius));
    };
    Graphics2.prototype.drawCircle = function(x, y, radius) {
      return this.drawShape(new Circle(x, y, radius));
    };
    Graphics2.prototype.drawEllipse = function(x, y, width, height) {
      return this.drawShape(new Ellipse(x, y, width, height));
    };
    Graphics2.prototype.drawPolygon = function() {
      var arguments$1 = arguments;
      var path = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        path[_i] = arguments$1[_i];
      }
      var points;
      var closeStroke = true;
      var poly = path[0];
      if (poly.points) {
        closeStroke = poly.closeStroke;
        points = poly.points;
      } else if (Array.isArray(path[0])) {
        points = path[0];
      } else {
        points = path;
      }
      var shape = new Polygon(points);
      shape.closeStroke = closeStroke;
      this.drawShape(shape);
      return this;
    };
    Graphics2.prototype.drawShape = function(shape) {
      if (!this._holeMode) {
        this._geometry.drawShape(shape, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix);
      } else {
        this._geometry.drawHole(shape, this._matrix);
      }
      return this;
    };
    Graphics2.prototype.drawStar = function(x, y, points, radius, innerRadius, rotation) {
      if (rotation === void 0) {
        rotation = 0;
      }
      return this.drawPolygon(new Star(x, y, points, radius, innerRadius, rotation));
    };
    Graphics2.prototype.clear = function() {
      this._geometry.clear();
      this._lineStyle.reset();
      this._fillStyle.reset();
      this._boundsID++;
      this._matrix = null;
      this._holeMode = false;
      this.currentPath = null;
      return this;
    };
    Graphics2.prototype.isFastRect = function() {
      var data = this._geometry.graphicsData;
      return data.length === 1 && data[0].shape.type === SHAPES.RECT && !(data[0].lineStyle.visible && data[0].lineStyle.width);
    };
    Graphics2.prototype._render = function(renderer) {
      this.finishPoly();
      var geometry = this._geometry;
      var hasuint32 = renderer.context.supports.uint32Indices;
      geometry.updateBatches(hasuint32);
      if (geometry.batchable) {
        if (this.batchDirty !== geometry.batchDirty) {
          this._populateBatches();
        }
        this._renderBatched(renderer);
      } else {
        renderer.batch.flush();
        this._renderDirect(renderer);
      }
    };
    Graphics2.prototype._populateBatches = function() {
      var geometry = this._geometry;
      var blendMode = this.blendMode;
      var len = geometry.batches.length;
      this.batchTint = -1;
      this._transformID = -1;
      this.batchDirty = geometry.batchDirty;
      this.batches.length = len;
      this.vertexData = new Float32Array(geometry.points);
      for (var i = 0; i < len; i++) {
        var gI = geometry.batches[i];
        var color = gI.style.color;
        var vertexData = new Float32Array(this.vertexData.buffer, gI.attribStart * 4 * 2, gI.attribSize * 2);
        var uvs = new Float32Array(geometry.uvsFloat32.buffer, gI.attribStart * 4 * 2, gI.attribSize * 2);
        var indices2 = new Uint16Array(geometry.indicesUint16.buffer, gI.start * 2, gI.size);
        var batch = {
          vertexData,
          blendMode,
          indices: indices2,
          uvs,
          _batchRGB: hex2rgb(color),
          _tintRGB: color,
          _texture: gI.style.texture,
          alpha: gI.style.alpha,
          worldAlpha: 1
        };
        this.batches[i] = batch;
      }
    };
    Graphics2.prototype._renderBatched = function(renderer) {
      if (!this.batches.length) {
        return;
      }
      renderer.batch.setObjectRenderer(renderer.plugins[this.pluginName]);
      this.calculateVertices();
      this.calculateTints();
      for (var i = 0, l = this.batches.length; i < l; i++) {
        var batch = this.batches[i];
        batch.worldAlpha = this.worldAlpha * batch.alpha;
        renderer.plugins[this.pluginName].render(batch);
      }
    };
    Graphics2.prototype._renderDirect = function(renderer) {
      var shader = this._resolveDirectShader(renderer);
      var geometry = this._geometry;
      var tint = this.tint;
      var worldAlpha = this.worldAlpha;
      var uniforms = shader.uniforms;
      var drawCalls = geometry.drawCalls;
      uniforms.translationMatrix = this.transform.worldTransform;
      uniforms.tint[0] = (tint >> 16 & 255) / 255 * worldAlpha;
      uniforms.tint[1] = (tint >> 8 & 255) / 255 * worldAlpha;
      uniforms.tint[2] = (tint & 255) / 255 * worldAlpha;
      uniforms.tint[3] = worldAlpha;
      renderer.shader.bind(shader);
      renderer.geometry.bind(geometry, shader);
      renderer.state.set(this.state);
      for (var i = 0, l = drawCalls.length; i < l; i++) {
        this._renderDrawCallDirect(renderer, geometry.drawCalls[i]);
      }
    };
    Graphics2.prototype._renderDrawCallDirect = function(renderer, drawCall) {
      var texArray = drawCall.texArray, type = drawCall.type, size = drawCall.size, start = drawCall.start;
      var groupTextureCount = texArray.count;
      for (var j = 0; j < groupTextureCount; j++) {
        renderer.texture.bind(texArray.elements[j], j);
      }
      renderer.geometry.draw(type, size, start);
    };
    Graphics2.prototype._resolveDirectShader = function(renderer) {
      var shader = this.shader;
      var pluginName = this.pluginName;
      if (!shader) {
        if (!DEFAULT_SHADERS[pluginName]) {
          var MAX_TEXTURES = renderer.plugins.batch.MAX_TEXTURES;
          var sampleValues = new Int32Array(MAX_TEXTURES);
          for (var i = 0; i < MAX_TEXTURES; i++) {
            sampleValues[i] = i;
          }
          var uniforms = {
            tint: new Float32Array([1, 1, 1, 1]),
            translationMatrix: new Matrix(),
            default: UniformGroup.from({uSamplers: sampleValues}, true)
          };
          var program = renderer.plugins[pluginName]._shader.program;
          DEFAULT_SHADERS[pluginName] = new Shader(program, uniforms);
        }
        shader = DEFAULT_SHADERS[pluginName];
      }
      return shader;
    };
    Graphics2.prototype._calculateBounds = function() {
      this.finishPoly();
      var geometry = this._geometry;
      if (!geometry.graphicsData.length) {
        return;
      }
      var _a2 = geometry.bounds, minX = _a2.minX, minY = _a2.minY, maxX = _a2.maxX, maxY = _a2.maxY;
      this._bounds.addFrame(this.transform, minX, minY, maxX, maxY);
    };
    Graphics2.prototype.containsPoint = function(point) {
      this.worldTransform.applyInverse(point, Graphics2._TEMP_POINT);
      return this._geometry.containsPoint(Graphics2._TEMP_POINT);
    };
    Graphics2.prototype.calculateTints = function() {
      if (this.batchTint !== this.tint) {
        this.batchTint = this.tint;
        var tintRGB = hex2rgb(this.tint, temp);
        for (var i = 0; i < this.batches.length; i++) {
          var batch = this.batches[i];
          var batchTint = batch._batchRGB;
          var r = tintRGB[0] * batchTint[0] * 255;
          var g = tintRGB[1] * batchTint[1] * 255;
          var b = tintRGB[2] * batchTint[2] * 255;
          var color = (r << 16) + (g << 8) + (b | 0);
          batch._tintRGB = (color >> 16) + (color & 65280) + ((color & 255) << 16);
        }
      }
    };
    Graphics2.prototype.calculateVertices = function() {
      var wtID = this.transform._worldID;
      if (this._transformID === wtID) {
        return;
      }
      this._transformID = wtID;
      var wt = this.transform.worldTransform;
      var a = wt.a;
      var b = wt.b;
      var c = wt.c;
      var d = wt.d;
      var tx = wt.tx;
      var ty = wt.ty;
      var data = this._geometry.points;
      var vertexData = this.vertexData;
      var count = 0;
      for (var i = 0; i < data.length; i += 2) {
        var x = data[i];
        var y = data[i + 1];
        vertexData[count++] = a * x + c * y + tx;
        vertexData[count++] = d * y + b * x + ty;
      }
    };
    Graphics2.prototype.closePath = function() {
      var currentPath = this.currentPath;
      if (currentPath) {
        currentPath.closeStroke = true;
      }
      return this;
    };
    Graphics2.prototype.setMatrix = function(matrix) {
      this._matrix = matrix;
      return this;
    };
    Graphics2.prototype.beginHole = function() {
      this.finishPoly();
      this._holeMode = true;
      return this;
    };
    Graphics2.prototype.endHole = function() {
      this.finishPoly();
      this._holeMode = false;
      return this;
    };
    Graphics2.prototype.destroy = function(options) {
      this._geometry.refCount--;
      if (this._geometry.refCount === 0) {
        this._geometry.dispose();
      }
      this._matrix = null;
      this.currentPath = null;
      this._lineStyle.destroy();
      this._lineStyle = null;
      this._fillStyle.destroy();
      this._fillStyle = null;
      this._geometry = null;
      this.shader = null;
      this.vertexData = null;
      this.batches.length = 0;
      this.batches = null;
      _super.prototype.destroy.call(this, options);
    };
    Graphics2._TEMP_POINT = new Point();
    return Graphics2;
  }(Container);

  // node_modules/@pixi/sprite/lib/sprite.es.js
  /*!
   * @pixi/sprite - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/sprite is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics7 = function(d, b) {
    extendStatics7 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics7(d, b);
  };
  function __extends7(d, b) {
    extendStatics7(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var tempPoint = new Point();
  var indices = new Uint16Array([0, 1, 2, 0, 2, 3]);
  var Sprite = function(_super) {
    __extends7(Sprite2, _super);
    function Sprite2(texture) {
      var _this = _super.call(this) || this;
      _this._anchor = new ObservablePoint(_this._onAnchorUpdate, _this, texture ? texture.defaultAnchor.x : 0, texture ? texture.defaultAnchor.y : 0);
      _this._texture = null;
      _this._width = 0;
      _this._height = 0;
      _this._tint = null;
      _this._tintRGB = null;
      _this.tint = 16777215;
      _this.blendMode = BLEND_MODES.NORMAL;
      _this._cachedTint = 16777215;
      _this.uvs = null;
      _this.texture = texture || Texture.EMPTY;
      _this.vertexData = new Float32Array(8);
      _this.vertexTrimmedData = null;
      _this._transformID = -1;
      _this._textureID = -1;
      _this._transformTrimmedID = -1;
      _this._textureTrimmedID = -1;
      _this.indices = indices;
      _this.pluginName = "batch";
      _this.isSprite = true;
      _this._roundPixels = settings.ROUND_PIXELS;
      return _this;
    }
    Sprite2.prototype._onTextureUpdate = function() {
      this._textureID = -1;
      this._textureTrimmedID = -1;
      this._cachedTint = 16777215;
      if (this._width) {
        this.scale.x = sign(this.scale.x) * this._width / this._texture.orig.width;
      }
      if (this._height) {
        this.scale.y = sign(this.scale.y) * this._height / this._texture.orig.height;
      }
    };
    Sprite2.prototype._onAnchorUpdate = function() {
      this._transformID = -1;
      this._transformTrimmedID = -1;
    };
    Sprite2.prototype.calculateVertices = function() {
      var texture = this._texture;
      if (this._transformID === this.transform._worldID && this._textureID === texture._updateID) {
        return;
      }
      if (this._textureID !== texture._updateID) {
        this.uvs = this._texture._uvs.uvsFloat32;
      }
      this._transformID = this.transform._worldID;
      this._textureID = texture._updateID;
      var wt = this.transform.worldTransform;
      var a = wt.a;
      var b = wt.b;
      var c = wt.c;
      var d = wt.d;
      var tx = wt.tx;
      var ty = wt.ty;
      var vertexData = this.vertexData;
      var trim = texture.trim;
      var orig = texture.orig;
      var anchor = this._anchor;
      var w0 = 0;
      var w1 = 0;
      var h0 = 0;
      var h1 = 0;
      if (trim) {
        w1 = trim.x - anchor._x * orig.width;
        w0 = w1 + trim.width;
        h1 = trim.y - anchor._y * orig.height;
        h0 = h1 + trim.height;
      } else {
        w1 = -anchor._x * orig.width;
        w0 = w1 + orig.width;
        h1 = -anchor._y * orig.height;
        h0 = h1 + orig.height;
      }
      vertexData[0] = a * w1 + c * h1 + tx;
      vertexData[1] = d * h1 + b * w1 + ty;
      vertexData[2] = a * w0 + c * h1 + tx;
      vertexData[3] = d * h1 + b * w0 + ty;
      vertexData[4] = a * w0 + c * h0 + tx;
      vertexData[5] = d * h0 + b * w0 + ty;
      vertexData[6] = a * w1 + c * h0 + tx;
      vertexData[7] = d * h0 + b * w1 + ty;
      if (this._roundPixels) {
        var resolution = settings.RESOLUTION;
        for (var i = 0; i < vertexData.length; ++i) {
          vertexData[i] = Math.round((vertexData[i] * resolution | 0) / resolution);
        }
      }
    };
    Sprite2.prototype.calculateTrimmedVertices = function() {
      if (!this.vertexTrimmedData) {
        this.vertexTrimmedData = new Float32Array(8);
      } else if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID) {
        return;
      }
      this._transformTrimmedID = this.transform._worldID;
      this._textureTrimmedID = this._texture._updateID;
      var texture = this._texture;
      var vertexData = this.vertexTrimmedData;
      var orig = texture.orig;
      var anchor = this._anchor;
      var wt = this.transform.worldTransform;
      var a = wt.a;
      var b = wt.b;
      var c = wt.c;
      var d = wt.d;
      var tx = wt.tx;
      var ty = wt.ty;
      var w1 = -anchor._x * orig.width;
      var w0 = w1 + orig.width;
      var h1 = -anchor._y * orig.height;
      var h0 = h1 + orig.height;
      vertexData[0] = a * w1 + c * h1 + tx;
      vertexData[1] = d * h1 + b * w1 + ty;
      vertexData[2] = a * w0 + c * h1 + tx;
      vertexData[3] = d * h1 + b * w0 + ty;
      vertexData[4] = a * w0 + c * h0 + tx;
      vertexData[5] = d * h0 + b * w0 + ty;
      vertexData[6] = a * w1 + c * h0 + tx;
      vertexData[7] = d * h0 + b * w1 + ty;
    };
    Sprite2.prototype._render = function(renderer) {
      this.calculateVertices();
      renderer.batch.setObjectRenderer(renderer.plugins[this.pluginName]);
      renderer.plugins[this.pluginName].render(this);
    };
    Sprite2.prototype._calculateBounds = function() {
      var trim = this._texture.trim;
      var orig = this._texture.orig;
      if (!trim || trim.width === orig.width && trim.height === orig.height) {
        this.calculateVertices();
        this._bounds.addQuad(this.vertexData);
      } else {
        this.calculateTrimmedVertices();
        this._bounds.addQuad(this.vertexTrimmedData);
      }
    };
    Sprite2.prototype.getLocalBounds = function(rect) {
      if (this.children.length === 0) {
        this._bounds.minX = this._texture.orig.width * -this._anchor._x;
        this._bounds.minY = this._texture.orig.height * -this._anchor._y;
        this._bounds.maxX = this._texture.orig.width * (1 - this._anchor._x);
        this._bounds.maxY = this._texture.orig.height * (1 - this._anchor._y);
        if (!rect) {
          if (!this._localBoundsRect) {
            this._localBoundsRect = new Rectangle();
          }
          rect = this._localBoundsRect;
        }
        return this._bounds.getRectangle(rect);
      }
      return _super.prototype.getLocalBounds.call(this, rect);
    };
    Sprite2.prototype.containsPoint = function(point) {
      this.worldTransform.applyInverse(point, tempPoint);
      var width = this._texture.orig.width;
      var height = this._texture.orig.height;
      var x1 = -width * this.anchor.x;
      var y1 = 0;
      if (tempPoint.x >= x1 && tempPoint.x < x1 + width) {
        y1 = -height * this.anchor.y;
        if (tempPoint.y >= y1 && tempPoint.y < y1 + height) {
          return true;
        }
      }
      return false;
    };
    Sprite2.prototype.destroy = function(options) {
      _super.prototype.destroy.call(this, options);
      this._texture.off("update", this._onTextureUpdate, this);
      this._anchor = null;
      var destroyTexture = typeof options === "boolean" ? options : options && options.texture;
      if (destroyTexture) {
        var destroyBaseTexture = typeof options === "boolean" ? options : options && options.baseTexture;
        this._texture.destroy(!!destroyBaseTexture);
      }
      this._texture = null;
    };
    Sprite2.from = function(source, options) {
      var texture = source instanceof Texture ? source : Texture.from(source, options);
      return new Sprite2(texture);
    };
    Object.defineProperty(Sprite2.prototype, "roundPixels", {
      get: function() {
        return this._roundPixels;
      },
      set: function(value) {
        if (this._roundPixels !== value) {
          this._transformID = -1;
        }
        this._roundPixels = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Sprite2.prototype, "width", {
      get: function() {
        return Math.abs(this.scale.x) * this._texture.orig.width;
      },
      set: function(value) {
        var s = sign(this.scale.x) || 1;
        this.scale.x = s * value / this._texture.orig.width;
        this._width = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Sprite2.prototype, "height", {
      get: function() {
        return Math.abs(this.scale.y) * this._texture.orig.height;
      },
      set: function(value) {
        var s = sign(this.scale.y) || 1;
        this.scale.y = s * value / this._texture.orig.height;
        this._height = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Sprite2.prototype, "anchor", {
      get: function() {
        return this._anchor;
      },
      set: function(value) {
        this._anchor.copyFrom(value);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Sprite2.prototype, "tint", {
      get: function() {
        return this._tint;
      },
      set: function(value) {
        this._tint = value;
        this._tintRGB = (value >> 16) + (value & 65280) + ((value & 255) << 16);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Sprite2.prototype, "texture", {
      get: function() {
        return this._texture;
      },
      set: function(value) {
        if (this._texture === value) {
          return;
        }
        if (this._texture) {
          this._texture.off("update", this._onTextureUpdate, this);
        }
        this._texture = value || Texture.EMPTY;
        this._cachedTint = 16777215;
        this._textureID = -1;
        this._textureTrimmedID = -1;
        if (value) {
          if (value.baseTexture.valid) {
            this._onTextureUpdate();
          } else {
            value.once("update", this._onTextureUpdate, this);
          }
        }
      },
      enumerable: false,
      configurable: true
    });
    return Sprite2;
  }(Container);

  // node_modules/@pixi/text/lib/text.es.js
  /*!
   * @pixi/text - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/text is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics8 = function(d, b) {
    extendStatics8 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics8(d, b);
  };
  function __extends8(d, b) {
    extendStatics8(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var TEXT_GRADIENT;
  (function(TEXT_GRADIENT2) {
    TEXT_GRADIENT2[TEXT_GRADIENT2["LINEAR_VERTICAL"] = 0] = "LINEAR_VERTICAL";
    TEXT_GRADIENT2[TEXT_GRADIENT2["LINEAR_HORIZONTAL"] = 1] = "LINEAR_HORIZONTAL";
  })(TEXT_GRADIENT || (TEXT_GRADIENT = {}));
  var defaultStyle = {
    align: "left",
    breakWords: false,
    dropShadow: false,
    dropShadowAlpha: 1,
    dropShadowAngle: Math.PI / 6,
    dropShadowBlur: 0,
    dropShadowColor: "black",
    dropShadowDistance: 5,
    fill: "black",
    fillGradientType: TEXT_GRADIENT.LINEAR_VERTICAL,
    fillGradientStops: [],
    fontFamily: "Arial",
    fontSize: 26,
    fontStyle: "normal",
    fontVariant: "normal",
    fontWeight: "normal",
    letterSpacing: 0,
    lineHeight: 0,
    lineJoin: "miter",
    miterLimit: 10,
    padding: 0,
    stroke: "black",
    strokeThickness: 0,
    textBaseline: "alphabetic",
    trim: false,
    whiteSpace: "pre",
    wordWrap: false,
    wordWrapWidth: 100,
    leading: 0
  };
  var genericFontFamilies = [
    "serif",
    "sans-serif",
    "monospace",
    "cursive",
    "fantasy",
    "system-ui"
  ];
  var TextStyle = function() {
    function TextStyle2(style) {
      this.styleID = 0;
      this.reset();
      deepCopyProperties(this, style, style);
    }
    TextStyle2.prototype.clone = function() {
      var clonedProperties = {};
      deepCopyProperties(clonedProperties, this, defaultStyle);
      return new TextStyle2(clonedProperties);
    };
    TextStyle2.prototype.reset = function() {
      deepCopyProperties(this, defaultStyle, defaultStyle);
    };
    Object.defineProperty(TextStyle2.prototype, "align", {
      get: function() {
        return this._align;
      },
      set: function(align) {
        if (this._align !== align) {
          this._align = align;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "breakWords", {
      get: function() {
        return this._breakWords;
      },
      set: function(breakWords) {
        if (this._breakWords !== breakWords) {
          this._breakWords = breakWords;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "dropShadow", {
      get: function() {
        return this._dropShadow;
      },
      set: function(dropShadow) {
        if (this._dropShadow !== dropShadow) {
          this._dropShadow = dropShadow;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "dropShadowAlpha", {
      get: function() {
        return this._dropShadowAlpha;
      },
      set: function(dropShadowAlpha) {
        if (this._dropShadowAlpha !== dropShadowAlpha) {
          this._dropShadowAlpha = dropShadowAlpha;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "dropShadowAngle", {
      get: function() {
        return this._dropShadowAngle;
      },
      set: function(dropShadowAngle) {
        if (this._dropShadowAngle !== dropShadowAngle) {
          this._dropShadowAngle = dropShadowAngle;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "dropShadowBlur", {
      get: function() {
        return this._dropShadowBlur;
      },
      set: function(dropShadowBlur) {
        if (this._dropShadowBlur !== dropShadowBlur) {
          this._dropShadowBlur = dropShadowBlur;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "dropShadowColor", {
      get: function() {
        return this._dropShadowColor;
      },
      set: function(dropShadowColor) {
        var outputColor = getColor(dropShadowColor);
        if (this._dropShadowColor !== outputColor) {
          this._dropShadowColor = outputColor;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "dropShadowDistance", {
      get: function() {
        return this._dropShadowDistance;
      },
      set: function(dropShadowDistance) {
        if (this._dropShadowDistance !== dropShadowDistance) {
          this._dropShadowDistance = dropShadowDistance;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "fill", {
      get: function() {
        return this._fill;
      },
      set: function(fill) {
        var outputColor = getColor(fill);
        if (this._fill !== outputColor) {
          this._fill = outputColor;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "fillGradientType", {
      get: function() {
        return this._fillGradientType;
      },
      set: function(fillGradientType) {
        if (this._fillGradientType !== fillGradientType) {
          this._fillGradientType = fillGradientType;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "fillGradientStops", {
      get: function() {
        return this._fillGradientStops;
      },
      set: function(fillGradientStops) {
        if (!areArraysEqual(this._fillGradientStops, fillGradientStops)) {
          this._fillGradientStops = fillGradientStops;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "fontFamily", {
      get: function() {
        return this._fontFamily;
      },
      set: function(fontFamily) {
        if (this.fontFamily !== fontFamily) {
          this._fontFamily = fontFamily;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "fontSize", {
      get: function() {
        return this._fontSize;
      },
      set: function(fontSize) {
        if (this._fontSize !== fontSize) {
          this._fontSize = fontSize;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "fontStyle", {
      get: function() {
        return this._fontStyle;
      },
      set: function(fontStyle) {
        if (this._fontStyle !== fontStyle) {
          this._fontStyle = fontStyle;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "fontVariant", {
      get: function() {
        return this._fontVariant;
      },
      set: function(fontVariant) {
        if (this._fontVariant !== fontVariant) {
          this._fontVariant = fontVariant;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "fontWeight", {
      get: function() {
        return this._fontWeight;
      },
      set: function(fontWeight) {
        if (this._fontWeight !== fontWeight) {
          this._fontWeight = fontWeight;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "letterSpacing", {
      get: function() {
        return this._letterSpacing;
      },
      set: function(letterSpacing) {
        if (this._letterSpacing !== letterSpacing) {
          this._letterSpacing = letterSpacing;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "lineHeight", {
      get: function() {
        return this._lineHeight;
      },
      set: function(lineHeight) {
        if (this._lineHeight !== lineHeight) {
          this._lineHeight = lineHeight;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "leading", {
      get: function() {
        return this._leading;
      },
      set: function(leading) {
        if (this._leading !== leading) {
          this._leading = leading;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "lineJoin", {
      get: function() {
        return this._lineJoin;
      },
      set: function(lineJoin) {
        if (this._lineJoin !== lineJoin) {
          this._lineJoin = lineJoin;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "miterLimit", {
      get: function() {
        return this._miterLimit;
      },
      set: function(miterLimit) {
        if (this._miterLimit !== miterLimit) {
          this._miterLimit = miterLimit;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "padding", {
      get: function() {
        return this._padding;
      },
      set: function(padding) {
        if (this._padding !== padding) {
          this._padding = padding;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "stroke", {
      get: function() {
        return this._stroke;
      },
      set: function(stroke) {
        var outputColor = getColor(stroke);
        if (this._stroke !== outputColor) {
          this._stroke = outputColor;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "strokeThickness", {
      get: function() {
        return this._strokeThickness;
      },
      set: function(strokeThickness) {
        if (this._strokeThickness !== strokeThickness) {
          this._strokeThickness = strokeThickness;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "textBaseline", {
      get: function() {
        return this._textBaseline;
      },
      set: function(textBaseline) {
        if (this._textBaseline !== textBaseline) {
          this._textBaseline = textBaseline;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "trim", {
      get: function() {
        return this._trim;
      },
      set: function(trim) {
        if (this._trim !== trim) {
          this._trim = trim;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "whiteSpace", {
      get: function() {
        return this._whiteSpace;
      },
      set: function(whiteSpace) {
        if (this._whiteSpace !== whiteSpace) {
          this._whiteSpace = whiteSpace;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "wordWrap", {
      get: function() {
        return this._wordWrap;
      },
      set: function(wordWrap) {
        if (this._wordWrap !== wordWrap) {
          this._wordWrap = wordWrap;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TextStyle2.prototype, "wordWrapWidth", {
      get: function() {
        return this._wordWrapWidth;
      },
      set: function(wordWrapWidth) {
        if (this._wordWrapWidth !== wordWrapWidth) {
          this._wordWrapWidth = wordWrapWidth;
          this.styleID++;
        }
      },
      enumerable: false,
      configurable: true
    });
    TextStyle2.prototype.toFontString = function() {
      var fontSizeString = typeof this.fontSize === "number" ? this.fontSize + "px" : this.fontSize;
      var fontFamilies = this.fontFamily;
      if (!Array.isArray(this.fontFamily)) {
        fontFamilies = this.fontFamily.split(",");
      }
      for (var i = fontFamilies.length - 1; i >= 0; i--) {
        var fontFamily = fontFamilies[i].trim();
        if (!/([\"\'])[^\'\"]+\1/.test(fontFamily) && genericFontFamilies.indexOf(fontFamily) < 0) {
          fontFamily = '"' + fontFamily + '"';
        }
        fontFamilies[i] = fontFamily;
      }
      return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + fontSizeString + " " + fontFamilies.join(",");
    };
    return TextStyle2;
  }();
  function getSingleColor(color) {
    if (typeof color === "number") {
      return hex2string(color);
    } else if (typeof color === "string") {
      if (color.indexOf("0x") === 0) {
        color = color.replace("0x", "#");
      }
    }
    return color;
  }
  function getColor(color) {
    if (!Array.isArray(color)) {
      return getSingleColor(color);
    } else {
      for (var i = 0; i < color.length; ++i) {
        color[i] = getSingleColor(color[i]);
      }
      return color;
    }
  }
  function areArraysEqual(array1, array2) {
    if (!Array.isArray(array1) || !Array.isArray(array2)) {
      return false;
    }
    if (array1.length !== array2.length) {
      return false;
    }
    for (var i = 0; i < array1.length; ++i) {
      if (array1[i] !== array2[i]) {
        return false;
      }
    }
    return true;
  }
  function deepCopyProperties(target, source, propertyObj) {
    for (var prop in propertyObj) {
      if (Array.isArray(source[prop])) {
        target[prop] = source[prop].slice();
      } else {
        target[prop] = source[prop];
      }
    }
  }
  var TextMetrics = function() {
    function TextMetrics2(text, style, width, height, lines, lineWidths, lineHeight, maxLineWidth, fontProperties) {
      this.text = text;
      this.style = style;
      this.width = width;
      this.height = height;
      this.lines = lines;
      this.lineWidths = lineWidths;
      this.lineHeight = lineHeight;
      this.maxLineWidth = maxLineWidth;
      this.fontProperties = fontProperties;
    }
    TextMetrics2.measureText = function(text, style, wordWrap, canvas2) {
      if (canvas2 === void 0) {
        canvas2 = TextMetrics2._canvas;
      }
      wordWrap = wordWrap === void 0 || wordWrap === null ? style.wordWrap : wordWrap;
      var font = style.toFontString();
      var fontProperties = TextMetrics2.measureFont(font);
      if (fontProperties.fontSize === 0) {
        fontProperties.fontSize = style.fontSize;
        fontProperties.ascent = style.fontSize;
      }
      var context2 = canvas2.getContext("2d");
      context2.font = font;
      var outputText = wordWrap ? TextMetrics2.wordWrap(text, style, canvas2) : text;
      var lines = outputText.split(/(?:\r\n|\r|\n)/);
      var lineWidths = new Array(lines.length);
      var maxLineWidth = 0;
      for (var i = 0; i < lines.length; i++) {
        var lineWidth = context2.measureText(lines[i]).width + (lines[i].length - 1) * style.letterSpacing;
        lineWidths[i] = lineWidth;
        maxLineWidth = Math.max(maxLineWidth, lineWidth);
      }
      var width = maxLineWidth + style.strokeThickness;
      if (style.dropShadow) {
        width += style.dropShadowDistance;
      }
      var lineHeight = style.lineHeight || fontProperties.fontSize + style.strokeThickness;
      var height = Math.max(lineHeight, fontProperties.fontSize + style.strokeThickness) + (lines.length - 1) * (lineHeight + style.leading);
      if (style.dropShadow) {
        height += style.dropShadowDistance;
      }
      return new TextMetrics2(text, style, width, height, lines, lineWidths, lineHeight + style.leading, maxLineWidth, fontProperties);
    };
    TextMetrics2.wordWrap = function(text, style, canvas2) {
      if (canvas2 === void 0) {
        canvas2 = TextMetrics2._canvas;
      }
      var context2 = canvas2.getContext("2d");
      var width = 0;
      var line = "";
      var lines = "";
      var cache2 = Object.create(null);
      var letterSpacing = style.letterSpacing, whiteSpace = style.whiteSpace;
      var collapseSpaces = TextMetrics2.collapseSpaces(whiteSpace);
      var collapseNewlines = TextMetrics2.collapseNewlines(whiteSpace);
      var canPrependSpaces = !collapseSpaces;
      var wordWrapWidth = style.wordWrapWidth + letterSpacing;
      var tokens = TextMetrics2.tokenize(text);
      for (var i = 0; i < tokens.length; i++) {
        var token = tokens[i];
        if (TextMetrics2.isNewline(token)) {
          if (!collapseNewlines) {
            lines += TextMetrics2.addLine(line);
            canPrependSpaces = !collapseSpaces;
            line = "";
            width = 0;
            continue;
          }
          token = " ";
        }
        if (collapseSpaces) {
          var currIsBreakingSpace = TextMetrics2.isBreakingSpace(token);
          var lastIsBreakingSpace = TextMetrics2.isBreakingSpace(line[line.length - 1]);
          if (currIsBreakingSpace && lastIsBreakingSpace) {
            continue;
          }
        }
        var tokenWidth = TextMetrics2.getFromCache(token, letterSpacing, cache2, context2);
        if (tokenWidth > wordWrapWidth) {
          if (line !== "") {
            lines += TextMetrics2.addLine(line);
            line = "";
            width = 0;
          }
          if (TextMetrics2.canBreakWords(token, style.breakWords)) {
            var characters = TextMetrics2.wordWrapSplit(token);
            for (var j = 0; j < characters.length; j++) {
              var char = characters[j];
              var k = 1;
              while (characters[j + k]) {
                var nextChar = characters[j + k];
                var lastChar = char[char.length - 1];
                if (!TextMetrics2.canBreakChars(lastChar, nextChar, token, j, style.breakWords)) {
                  char += nextChar;
                } else {
                  break;
                }
                k++;
              }
              j += char.length - 1;
              var characterWidth = TextMetrics2.getFromCache(char, letterSpacing, cache2, context2);
              if (characterWidth + width > wordWrapWidth) {
                lines += TextMetrics2.addLine(line);
                canPrependSpaces = false;
                line = "";
                width = 0;
              }
              line += char;
              width += characterWidth;
            }
          } else {
            if (line.length > 0) {
              lines += TextMetrics2.addLine(line);
              line = "";
              width = 0;
            }
            var isLastToken = i === tokens.length - 1;
            lines += TextMetrics2.addLine(token, !isLastToken);
            canPrependSpaces = false;
            line = "";
            width = 0;
          }
        } else {
          if (tokenWidth + width > wordWrapWidth) {
            canPrependSpaces = false;
            lines += TextMetrics2.addLine(line);
            line = "";
            width = 0;
          }
          if (line.length > 0 || !TextMetrics2.isBreakingSpace(token) || canPrependSpaces) {
            line += token;
            width += tokenWidth;
          }
        }
      }
      lines += TextMetrics2.addLine(line, false);
      return lines;
    };
    TextMetrics2.addLine = function(line, newLine) {
      if (newLine === void 0) {
        newLine = true;
      }
      line = TextMetrics2.trimRight(line);
      line = newLine ? line + "\n" : line;
      return line;
    };
    TextMetrics2.getFromCache = function(key, letterSpacing, cache2, context2) {
      var width = cache2[key];
      if (typeof width !== "number") {
        var spacing = key.length * letterSpacing;
        width = context2.measureText(key).width + spacing;
        cache2[key] = width;
      }
      return width;
    };
    TextMetrics2.collapseSpaces = function(whiteSpace) {
      return whiteSpace === "normal" || whiteSpace === "pre-line";
    };
    TextMetrics2.collapseNewlines = function(whiteSpace) {
      return whiteSpace === "normal";
    };
    TextMetrics2.trimRight = function(text) {
      if (typeof text !== "string") {
        return "";
      }
      for (var i = text.length - 1; i >= 0; i--) {
        var char = text[i];
        if (!TextMetrics2.isBreakingSpace(char)) {
          break;
        }
        text = text.slice(0, -1);
      }
      return text;
    };
    TextMetrics2.isNewline = function(char) {
      if (typeof char !== "string") {
        return false;
      }
      return TextMetrics2._newlines.indexOf(char.charCodeAt(0)) >= 0;
    };
    TextMetrics2.isBreakingSpace = function(char) {
      if (typeof char !== "string") {
        return false;
      }
      return TextMetrics2._breakingSpaces.indexOf(char.charCodeAt(0)) >= 0;
    };
    TextMetrics2.tokenize = function(text) {
      var tokens = [];
      var token = "";
      if (typeof text !== "string") {
        return tokens;
      }
      for (var i = 0; i < text.length; i++) {
        var char = text[i];
        if (TextMetrics2.isBreakingSpace(char) || TextMetrics2.isNewline(char)) {
          if (token !== "") {
            tokens.push(token);
            token = "";
          }
          tokens.push(char);
          continue;
        }
        token += char;
      }
      if (token !== "") {
        tokens.push(token);
      }
      return tokens;
    };
    TextMetrics2.canBreakWords = function(_token, breakWords) {
      return breakWords;
    };
    TextMetrics2.canBreakChars = function(_char, _nextChar, _token, _index, _breakWords) {
      return true;
    };
    TextMetrics2.wordWrapSplit = function(token) {
      return token.split("");
    };
    TextMetrics2.measureFont = function(font) {
      if (TextMetrics2._fonts[font]) {
        return TextMetrics2._fonts[font];
      }
      var properties = {
        ascent: 0,
        descent: 0,
        fontSize: 0
      };
      var canvas2 = TextMetrics2._canvas;
      var context2 = TextMetrics2._context;
      context2.font = font;
      var metricsString = TextMetrics2.METRICS_STRING + TextMetrics2.BASELINE_SYMBOL;
      var width = Math.ceil(context2.measureText(metricsString).width);
      var baseline = Math.ceil(context2.measureText(TextMetrics2.BASELINE_SYMBOL).width);
      var height = 2 * baseline;
      baseline = baseline * TextMetrics2.BASELINE_MULTIPLIER | 0;
      canvas2.width = width;
      canvas2.height = height;
      context2.fillStyle = "#f00";
      context2.fillRect(0, 0, width, height);
      context2.font = font;
      context2.textBaseline = "alphabetic";
      context2.fillStyle = "#000";
      context2.fillText(metricsString, 0, baseline);
      var imagedata = context2.getImageData(0, 0, width, height).data;
      var pixels = imagedata.length;
      var line = width * 4;
      var i = 0;
      var idx = 0;
      var stop = false;
      for (i = 0; i < baseline; ++i) {
        for (var j = 0; j < line; j += 4) {
          if (imagedata[idx + j] !== 255) {
            stop = true;
            break;
          }
        }
        if (!stop) {
          idx += line;
        } else {
          break;
        }
      }
      properties.ascent = baseline - i;
      idx = pixels - line;
      stop = false;
      for (i = height; i > baseline; --i) {
        for (var j = 0; j < line; j += 4) {
          if (imagedata[idx + j] !== 255) {
            stop = true;
            break;
          }
        }
        if (!stop) {
          idx -= line;
        } else {
          break;
        }
      }
      properties.descent = i - baseline;
      properties.fontSize = properties.ascent + properties.descent;
      TextMetrics2._fonts[font] = properties;
      return properties;
    };
    TextMetrics2.clearMetrics = function(font) {
      if (font === void 0) {
        font = "";
      }
      if (font) {
        delete TextMetrics2._fonts[font];
      } else {
        TextMetrics2._fonts = {};
      }
    };
    return TextMetrics2;
  }();
  var canvas = function() {
    try {
      var c = new OffscreenCanvas(0, 0);
      var context2 = c.getContext("2d");
      if (context2 && context2.measureText) {
        return c;
      }
      return document.createElement("canvas");
    } catch (ex) {
      return document.createElement("canvas");
    }
  }();
  canvas.width = canvas.height = 10;
  TextMetrics._canvas = canvas;
  TextMetrics._context = canvas.getContext("2d");
  TextMetrics._fonts = {};
  TextMetrics.METRICS_STRING = "|\xC9q\xC5";
  TextMetrics.BASELINE_SYMBOL = "M";
  TextMetrics.BASELINE_MULTIPLIER = 1.4;
  TextMetrics._newlines = [
    10,
    13
  ];
  TextMetrics._breakingSpaces = [
    9,
    32,
    8192,
    8193,
    8194,
    8195,
    8196,
    8197,
    8198,
    8200,
    8201,
    8202,
    8287,
    12288
  ];
  var defaultDestroyOptions = {
    texture: true,
    children: false,
    baseTexture: true
  };
  var Text = function(_super) {
    __extends8(Text2, _super);
    function Text2(text, style, canvas2) {
      var _this = this;
      var ownCanvas = false;
      if (!canvas2) {
        canvas2 = document.createElement("canvas");
        ownCanvas = true;
      }
      canvas2.width = 3;
      canvas2.height = 3;
      var texture = Texture.from(canvas2);
      texture.orig = new Rectangle();
      texture.trim = new Rectangle();
      _this = _super.call(this, texture) || this;
      _this._ownCanvas = ownCanvas;
      _this.canvas = canvas2;
      _this.context = _this.canvas.getContext("2d");
      _this._resolution = settings.RESOLUTION;
      _this._autoResolution = true;
      _this._text = null;
      _this._style = null;
      _this._styleListener = null;
      _this._font = "";
      _this.text = text;
      _this.style = style;
      _this.localStyleID = -1;
      return _this;
    }
    Text2.prototype.updateText = function(respectDirty) {
      var style = this._style;
      if (this.localStyleID !== style.styleID) {
        this.dirty = true;
        this.localStyleID = style.styleID;
      }
      if (!this.dirty && respectDirty) {
        return;
      }
      this._font = this._style.toFontString();
      var context2 = this.context;
      var measured = TextMetrics.measureText(this._text || " ", this._style, this._style.wordWrap, this.canvas);
      var width = measured.width;
      var height = measured.height;
      var lines = measured.lines;
      var lineHeight = measured.lineHeight;
      var lineWidths = measured.lineWidths;
      var maxLineWidth = measured.maxLineWidth;
      var fontProperties = measured.fontProperties;
      this.canvas.width = Math.ceil((Math.max(1, width) + style.padding * 2) * this._resolution);
      this.canvas.height = Math.ceil((Math.max(1, height) + style.padding * 2) * this._resolution);
      context2.scale(this._resolution, this._resolution);
      context2.clearRect(0, 0, this.canvas.width, this.canvas.height);
      context2.font = this._font;
      context2.lineWidth = style.strokeThickness;
      context2.textBaseline = style.textBaseline;
      context2.lineJoin = style.lineJoin;
      context2.miterLimit = style.miterLimit;
      var linePositionX;
      var linePositionY;
      var passesCount = style.dropShadow ? 2 : 1;
      for (var i = 0; i < passesCount; ++i) {
        var isShadowPass = style.dropShadow && i === 0;
        var dsOffsetText = isShadowPass ? Math.ceil(Math.max(1, height) + style.padding * 2) : 0;
        var dsOffsetShadow = dsOffsetText * this._resolution;
        if (isShadowPass) {
          context2.fillStyle = "black";
          context2.strokeStyle = "black";
          var dropShadowColor = style.dropShadowColor;
          var rgb = hex2rgb(typeof dropShadowColor === "number" ? dropShadowColor : string2hex(dropShadowColor));
          context2.shadowColor = "rgba(" + rgb[0] * 255 + "," + rgb[1] * 255 + "," + rgb[2] * 255 + "," + style.dropShadowAlpha + ")";
          context2.shadowBlur = style.dropShadowBlur;
          context2.shadowOffsetX = Math.cos(style.dropShadowAngle) * style.dropShadowDistance;
          context2.shadowOffsetY = Math.sin(style.dropShadowAngle) * style.dropShadowDistance + dsOffsetShadow;
        } else {
          context2.fillStyle = this._generateFillStyle(style, lines, measured);
          context2.strokeStyle = style.stroke;
          context2.shadowColor = "black";
          context2.shadowBlur = 0;
          context2.shadowOffsetX = 0;
          context2.shadowOffsetY = 0;
        }
        for (var i_1 = 0; i_1 < lines.length; i_1++) {
          linePositionX = style.strokeThickness / 2;
          linePositionY = style.strokeThickness / 2 + i_1 * lineHeight + fontProperties.ascent;
          if (style.align === "right") {
            linePositionX += maxLineWidth - lineWidths[i_1];
          } else if (style.align === "center") {
            linePositionX += (maxLineWidth - lineWidths[i_1]) / 2;
          }
          if (style.stroke && style.strokeThickness) {
            this.drawLetterSpacing(lines[i_1], linePositionX + style.padding, linePositionY + style.padding - dsOffsetText, true);
          }
          if (style.fill) {
            this.drawLetterSpacing(lines[i_1], linePositionX + style.padding, linePositionY + style.padding - dsOffsetText);
          }
        }
      }
      this.updateTexture();
    };
    Text2.prototype.drawLetterSpacing = function(text, x, y, isStroke) {
      if (isStroke === void 0) {
        isStroke = false;
      }
      var style = this._style;
      var letterSpacing = style.letterSpacing;
      if (letterSpacing === 0) {
        if (isStroke) {
          this.context.strokeText(text, x, y);
        } else {
          this.context.fillText(text, x, y);
        }
        return;
      }
      var currentPosition = x;
      var stringArray = Array.from ? Array.from(text) : text.split("");
      var previousWidth = this.context.measureText(text).width;
      var currentWidth = 0;
      for (var i = 0; i < stringArray.length; ++i) {
        var currentChar = stringArray[i];
        if (isStroke) {
          this.context.strokeText(currentChar, currentPosition, y);
        } else {
          this.context.fillText(currentChar, currentPosition, y);
        }
        currentWidth = this.context.measureText(text.substring(i + 1)).width;
        currentPosition += previousWidth - currentWidth + letterSpacing;
        previousWidth = currentWidth;
      }
    };
    Text2.prototype.updateTexture = function() {
      var canvas2 = this.canvas;
      if (this._style.trim) {
        var trimmed = trimCanvas(canvas2);
        if (trimmed.data) {
          canvas2.width = trimmed.width;
          canvas2.height = trimmed.height;
          this.context.putImageData(trimmed.data, 0, 0);
        }
      }
      var texture = this._texture;
      var style = this._style;
      var padding = style.trim ? 0 : style.padding;
      var baseTexture = texture.baseTexture;
      texture.trim.width = texture._frame.width = Math.ceil(canvas2.width / this._resolution);
      texture.trim.height = texture._frame.height = Math.ceil(canvas2.height / this._resolution);
      texture.trim.x = -padding;
      texture.trim.y = -padding;
      texture.orig.width = texture._frame.width - padding * 2;
      texture.orig.height = texture._frame.height - padding * 2;
      this._onTextureUpdate();
      baseTexture.setRealSize(canvas2.width, canvas2.height, this._resolution);
      this._recursivePostUpdateTransform();
      this.dirty = false;
    };
    Text2.prototype._render = function(renderer) {
      if (this._autoResolution && this._resolution !== renderer.resolution) {
        this._resolution = renderer.resolution;
        this.dirty = true;
      }
      this.updateText(true);
      _super.prototype._render.call(this, renderer);
    };
    Text2.prototype.getLocalBounds = function(rect) {
      this.updateText(true);
      return _super.prototype.getLocalBounds.call(this, rect);
    };
    Text2.prototype._calculateBounds = function() {
      this.updateText(true);
      this.calculateVertices();
      this._bounds.addQuad(this.vertexData);
    };
    Text2.prototype._generateFillStyle = function(style, lines, metrics) {
      var fillStyle = style.fill;
      if (!Array.isArray(fillStyle)) {
        return fillStyle;
      } else if (fillStyle.length === 1) {
        return fillStyle[0];
      }
      var gradient;
      var dropShadowCorrection = style.dropShadow ? style.dropShadowDistance : 0;
      var padding = style.padding || 0;
      var width = Math.ceil(this.canvas.width / this._resolution) - dropShadowCorrection - padding * 2;
      var height = Math.ceil(this.canvas.height / this._resolution) - dropShadowCorrection - padding * 2;
      var fill = fillStyle.slice();
      var fillGradientStops = style.fillGradientStops.slice();
      if (!fillGradientStops.length) {
        var lengthPlus1 = fill.length + 1;
        for (var i = 1; i < lengthPlus1; ++i) {
          fillGradientStops.push(i / lengthPlus1);
        }
      }
      fill.unshift(fillStyle[0]);
      fillGradientStops.unshift(0);
      fill.push(fillStyle[fillStyle.length - 1]);
      fillGradientStops.push(1);
      if (style.fillGradientType === TEXT_GRADIENT.LINEAR_VERTICAL) {
        gradient = this.context.createLinearGradient(width / 2, padding, width / 2, height + padding);
        var lastIterationStop = 0;
        var textHeight = metrics.fontProperties.fontSize + style.strokeThickness;
        var gradStopLineHeight = textHeight / height;
        for (var i = 0; i < lines.length; i++) {
          var thisLineTop = metrics.lineHeight * i;
          for (var j = 0; j < fill.length; j++) {
            var lineStop = 0;
            if (typeof fillGradientStops[j] === "number") {
              lineStop = fillGradientStops[j];
            } else {
              lineStop = j / fill.length;
            }
            var globalStop = thisLineTop / height + lineStop * gradStopLineHeight;
            var clampedStop = Math.max(lastIterationStop, globalStop);
            clampedStop = Math.min(clampedStop, 1);
            gradient.addColorStop(clampedStop, fill[j]);
            lastIterationStop = clampedStop;
          }
        }
      } else {
        gradient = this.context.createLinearGradient(padding, height / 2, width + padding, height / 2);
        var totalIterations = fill.length + 1;
        var currentIteration = 1;
        for (var i = 0; i < fill.length; i++) {
          var stop = void 0;
          if (typeof fillGradientStops[i] === "number") {
            stop = fillGradientStops[i];
          } else {
            stop = currentIteration / totalIterations;
          }
          gradient.addColorStop(stop, fill[i]);
          currentIteration++;
        }
      }
      return gradient;
    };
    Text2.prototype.destroy = function(options) {
      if (typeof options === "boolean") {
        options = {children: options};
      }
      options = Object.assign({}, defaultDestroyOptions, options);
      _super.prototype.destroy.call(this, options);
      if (this._ownCanvas) {
        this.canvas.height = this.canvas.width = 0;
      }
      this.context = null;
      this.canvas = null;
      this._style = null;
    };
    Object.defineProperty(Text2.prototype, "width", {
      get: function() {
        this.updateText(true);
        return Math.abs(this.scale.x) * this._texture.orig.width;
      },
      set: function(value) {
        this.updateText(true);
        var s = sign(this.scale.x) || 1;
        this.scale.x = s * value / this._texture.orig.width;
        this._width = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Text2.prototype, "height", {
      get: function() {
        this.updateText(true);
        return Math.abs(this.scale.y) * this._texture.orig.height;
      },
      set: function(value) {
        this.updateText(true);
        var s = sign(this.scale.y) || 1;
        this.scale.y = s * value / this._texture.orig.height;
        this._height = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Text2.prototype, "style", {
      get: function() {
        return this._style;
      },
      set: function(style) {
        style = style || {};
        if (style instanceof TextStyle) {
          this._style = style;
        } else {
          this._style = new TextStyle(style);
        }
        this.localStyleID = -1;
        this.dirty = true;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Text2.prototype, "text", {
      get: function() {
        return this._text;
      },
      set: function(text) {
        text = String(text === null || text === void 0 ? "" : text);
        if (this._text === text) {
          return;
        }
        this._text = text;
        this.dirty = true;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Text2.prototype, "resolution", {
      get: function() {
        return this._resolution;
      },
      set: function(value) {
        this._autoResolution = false;
        if (this._resolution === value) {
          return;
        }
        this._resolution = value;
        this.dirty = true;
      },
      enumerable: false,
      configurable: true
    });
    return Text2;
  }(Sprite);

  // node_modules/@pixi/prepare/lib/prepare.es.js
  /*!
   * @pixi/prepare - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/prepare is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  settings.UPLOADS_PER_FRAME = 4;
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics9 = function(d, b) {
    extendStatics9 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics9(d, b);
  };
  function __extends9(d, b) {
    extendStatics9(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var CountLimiter = function() {
    function CountLimiter2(maxItemsPerFrame) {
      this.maxItemsPerFrame = maxItemsPerFrame;
      this.itemsLeft = 0;
    }
    CountLimiter2.prototype.beginFrame = function() {
      this.itemsLeft = this.maxItemsPerFrame;
    };
    CountLimiter2.prototype.allowedToUpload = function() {
      return this.itemsLeft-- > 0;
    };
    return CountLimiter2;
  }();
  function findMultipleBaseTextures(item, queue2) {
    var result = false;
    if (item && item._textures && item._textures.length) {
      for (var i = 0; i < item._textures.length; i++) {
        if (item._textures[i] instanceof Texture) {
          var baseTexture = item._textures[i].baseTexture;
          if (queue2.indexOf(baseTexture) === -1) {
            queue2.push(baseTexture);
            result = true;
          }
        }
      }
    }
    return result;
  }
  function findBaseTexture(item, queue2) {
    if (item.baseTexture instanceof BaseTexture) {
      var texture = item.baseTexture;
      if (queue2.indexOf(texture) === -1) {
        queue2.push(texture);
      }
      return true;
    }
    return false;
  }
  function findTexture(item, queue2) {
    if (item._texture && item._texture instanceof Texture) {
      var texture = item._texture.baseTexture;
      if (queue2.indexOf(texture) === -1) {
        queue2.push(texture);
      }
      return true;
    }
    return false;
  }
  function drawText(_helper, item) {
    if (item instanceof Text) {
      item.updateText(true);
      return true;
    }
    return false;
  }
  function calculateTextStyle(_helper, item) {
    if (item instanceof TextStyle) {
      var font = item.toFontString();
      TextMetrics.measureFont(font);
      return true;
    }
    return false;
  }
  function findText(item, queue2) {
    if (item instanceof Text) {
      if (queue2.indexOf(item.style) === -1) {
        queue2.push(item.style);
      }
      if (queue2.indexOf(item) === -1) {
        queue2.push(item);
      }
      var texture = item._texture.baseTexture;
      if (queue2.indexOf(texture) === -1) {
        queue2.push(texture);
      }
      return true;
    }
    return false;
  }
  function findTextStyle(item, queue2) {
    if (item instanceof TextStyle) {
      if (queue2.indexOf(item) === -1) {
        queue2.push(item);
      }
      return true;
    }
    return false;
  }
  var BasePrepare = function() {
    function BasePrepare2(renderer) {
      var _this = this;
      this.limiter = new CountLimiter(settings.UPLOADS_PER_FRAME);
      this.renderer = renderer;
      this.uploadHookHelper = null;
      this.queue = [];
      this.addHooks = [];
      this.uploadHooks = [];
      this.completes = [];
      this.ticking = false;
      this.delayedTick = function() {
        if (!_this.queue) {
          return;
        }
        _this.prepareItems();
      };
      this.registerFindHook(findText);
      this.registerFindHook(findTextStyle);
      this.registerFindHook(findMultipleBaseTextures);
      this.registerFindHook(findBaseTexture);
      this.registerFindHook(findTexture);
      this.registerUploadHook(drawText);
      this.registerUploadHook(calculateTextStyle);
    }
    BasePrepare2.prototype.upload = function(item, done) {
      if (typeof item === "function") {
        done = item;
        item = null;
      }
      if (item) {
        this.add(item);
      }
      if (this.queue.length) {
        if (done) {
          this.completes.push(done);
        }
        if (!this.ticking) {
          this.ticking = true;
          Ticker.system.addOnce(this.tick, this, UPDATE_PRIORITY.UTILITY);
        }
      } else if (done) {
        done();
      }
    };
    BasePrepare2.prototype.tick = function() {
      setTimeout(this.delayedTick, 0);
    };
    BasePrepare2.prototype.prepareItems = function() {
      this.limiter.beginFrame();
      while (this.queue.length && this.limiter.allowedToUpload()) {
        var item = this.queue[0];
        var uploaded = false;
        if (item && !item._destroyed) {
          for (var i = 0, len = this.uploadHooks.length; i < len; i++) {
            if (this.uploadHooks[i](this.uploadHookHelper, item)) {
              this.queue.shift();
              uploaded = true;
              break;
            }
          }
        }
        if (!uploaded) {
          this.queue.shift();
        }
      }
      if (!this.queue.length) {
        this.ticking = false;
        var completes = this.completes.slice(0);
        this.completes.length = 0;
        for (var i = 0, len = completes.length; i < len; i++) {
          completes[i]();
        }
      } else {
        Ticker.system.addOnce(this.tick, this, UPDATE_PRIORITY.UTILITY);
      }
    };
    BasePrepare2.prototype.registerFindHook = function(addHook) {
      if (addHook) {
        this.addHooks.push(addHook);
      }
      return this;
    };
    BasePrepare2.prototype.registerUploadHook = function(uploadHook) {
      if (uploadHook) {
        this.uploadHooks.push(uploadHook);
      }
      return this;
    };
    BasePrepare2.prototype.add = function(item) {
      for (var i = 0, len = this.addHooks.length; i < len; i++) {
        if (this.addHooks[i](item, this.queue)) {
          break;
        }
      }
      if (item instanceof Container) {
        for (var i = item.children.length - 1; i >= 0; i--) {
          this.add(item.children[i]);
        }
      }
      return this;
    };
    BasePrepare2.prototype.destroy = function() {
      if (this.ticking) {
        Ticker.system.remove(this.tick, this);
      }
      this.ticking = false;
      this.addHooks = null;
      this.uploadHooks = null;
      this.renderer = null;
      this.completes = null;
      this.queue = null;
      this.limiter = null;
      this.uploadHookHelper = null;
    };
    return BasePrepare2;
  }();
  function uploadBaseTextures(renderer, item) {
    if (item instanceof BaseTexture) {
      if (!item._glTextures[renderer.CONTEXT_UID]) {
        renderer.texture.bind(item);
      }
      return true;
    }
    return false;
  }
  function uploadGraphics(renderer, item) {
    if (!(item instanceof Graphics)) {
      return false;
    }
    var geometry = item.geometry;
    item.finishPoly();
    geometry.updateBatches();
    var batches = geometry.batches;
    for (var i = 0; i < batches.length; i++) {
      var texture = batches[i].style.texture;
      if (texture) {
        uploadBaseTextures(renderer, texture.baseTexture);
      }
    }
    if (!geometry.batchable) {
      renderer.geometry.bind(geometry, item._resolveDirectShader(renderer));
    }
    return true;
  }
  function findGraphics(item, queue2) {
    if (item instanceof Graphics) {
      queue2.push(item);
      return true;
    }
    return false;
  }
  var Prepare = function(_super) {
    __extends9(Prepare2, _super);
    function Prepare2(renderer) {
      var _this = _super.call(this, renderer) || this;
      _this.uploadHookHelper = _this.renderer;
      _this.registerFindHook(findGraphics);
      _this.registerUploadHook(uploadBaseTextures);
      _this.registerUploadHook(uploadGraphics);
      return _this;
    }
    return Prepare2;
  }(BasePrepare);
  var TimeLimiter = function() {
    function TimeLimiter2(maxMilliseconds) {
      this.maxMilliseconds = maxMilliseconds;
      this.frameStart = 0;
    }
    TimeLimiter2.prototype.beginFrame = function() {
      this.frameStart = Date.now();
    };
    TimeLimiter2.prototype.allowedToUpload = function() {
      return Date.now() - this.frameStart < this.maxMilliseconds;
    };
    return TimeLimiter2;
  }();

  // node_modules/@pixi/spritesheet/lib/spritesheet.es.js
  /*!
   * @pixi/spritesheet - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/spritesheet is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var Spritesheet = function() {
    function Spritesheet2(texture, data, resolutionFilename) {
      if (resolutionFilename === void 0) {
        resolutionFilename = null;
      }
      this._texture = texture instanceof Texture ? texture : null;
      this.baseTexture = texture instanceof BaseTexture ? texture : this._texture.baseTexture;
      this.textures = {};
      this.animations = {};
      this.data = data;
      var resource = this.baseTexture.resource;
      this.resolution = this._updateResolution(resolutionFilename || (resource ? resource.url : null));
      this._frames = this.data.frames;
      this._frameKeys = Object.keys(this._frames);
      this._batchIndex = 0;
      this._callback = null;
    }
    Spritesheet2.prototype._updateResolution = function(resolutionFilename) {
      if (resolutionFilename === void 0) {
        resolutionFilename = null;
      }
      var scale = this.data.meta.scale;
      var resolution = getResolutionOfUrl(resolutionFilename, null);
      if (resolution === null) {
        resolution = scale !== void 0 ? parseFloat(scale) : 1;
      }
      if (resolution !== 1) {
        this.baseTexture.setResolution(resolution);
      }
      return resolution;
    };
    Spritesheet2.prototype.parse = function(callback) {
      this._batchIndex = 0;
      this._callback = callback;
      if (this._frameKeys.length <= Spritesheet2.BATCH_SIZE) {
        this._processFrames(0);
        this._processAnimations();
        this._parseComplete();
      } else {
        this._nextBatch();
      }
    };
    Spritesheet2.prototype._processFrames = function(initialFrameIndex) {
      var frameIndex = initialFrameIndex;
      var maxFrames = Spritesheet2.BATCH_SIZE;
      while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length) {
        var i = this._frameKeys[frameIndex];
        var data = this._frames[i];
        var rect = data.frame;
        if (rect) {
          var frame = null;
          var trim = null;
          var sourceSize = data.trimmed !== false && data.sourceSize ? data.sourceSize : data.frame;
          var orig = new Rectangle(0, 0, Math.floor(sourceSize.w) / this.resolution, Math.floor(sourceSize.h) / this.resolution);
          if (data.rotated) {
            frame = new Rectangle(Math.floor(rect.x) / this.resolution, Math.floor(rect.y) / this.resolution, Math.floor(rect.h) / this.resolution, Math.floor(rect.w) / this.resolution);
          } else {
            frame = new Rectangle(Math.floor(rect.x) / this.resolution, Math.floor(rect.y) / this.resolution, Math.floor(rect.w) / this.resolution, Math.floor(rect.h) / this.resolution);
          }
          if (data.trimmed !== false && data.spriteSourceSize) {
            trim = new Rectangle(Math.floor(data.spriteSourceSize.x) / this.resolution, Math.floor(data.spriteSourceSize.y) / this.resolution, Math.floor(rect.w) / this.resolution, Math.floor(rect.h) / this.resolution);
          }
          this.textures[i] = new Texture(this.baseTexture, frame, orig, trim, data.rotated ? 2 : 0, data.anchor);
          Texture.addToCache(this.textures[i], i);
        }
        frameIndex++;
      }
    };
    Spritesheet2.prototype._processAnimations = function() {
      var animations = this.data.animations || {};
      for (var animName in animations) {
        this.animations[animName] = [];
        for (var i = 0; i < animations[animName].length; i++) {
          var frameName = animations[animName][i];
          this.animations[animName].push(this.textures[frameName]);
        }
      }
    };
    Spritesheet2.prototype._parseComplete = function() {
      var callback = this._callback;
      this._callback = null;
      this._batchIndex = 0;
      callback.call(this, this.textures);
    };
    Spritesheet2.prototype._nextBatch = function() {
      var _this = this;
      this._processFrames(this._batchIndex * Spritesheet2.BATCH_SIZE);
      this._batchIndex++;
      setTimeout(function() {
        if (_this._batchIndex * Spritesheet2.BATCH_SIZE < _this._frameKeys.length) {
          _this._nextBatch();
        } else {
          _this._processAnimations();
          _this._parseComplete();
        }
      }, 0);
    };
    Spritesheet2.prototype.destroy = function(destroyBase) {
      var _a2;
      if (destroyBase === void 0) {
        destroyBase = false;
      }
      for (var i in this.textures) {
        this.textures[i].destroy();
      }
      this._frames = null;
      this._frameKeys = null;
      this.data = null;
      this.textures = null;
      if (destroyBase) {
        (_a2 = this._texture) === null || _a2 === void 0 ? void 0 : _a2.destroy();
        this.baseTexture.destroy();
      }
      this._texture = null;
      this.baseTexture = null;
    };
    Spritesheet2.BATCH_SIZE = 1e3;
    return Spritesheet2;
  }();
  var SpritesheetLoader = function() {
    function SpritesheetLoader2() {
    }
    SpritesheetLoader2.use = function(resource, next) {
      var loader = this;
      var imageResourceName = resource.name + "_image";
      if (!resource.data || resource.type !== LoaderResource.TYPE.JSON || !resource.data.frames || loader.resources[imageResourceName]) {
        next();
        return;
      }
      var loadOptions = {
        crossOrigin: resource.crossOrigin,
        metadata: resource.metadata.imageMetadata,
        parentResource: resource
      };
      var resourcePath = SpritesheetLoader2.getResourcePath(resource, loader.baseUrl);
      loader.add(imageResourceName, resourcePath, loadOptions, function onImageLoad(res) {
        if (res.error) {
          next(res.error);
          return;
        }
        var spritesheet = new Spritesheet(res.texture, resource.data, resource.url);
        spritesheet.parse(function() {
          resource.spritesheet = spritesheet;
          resource.textures = spritesheet.textures;
          next();
        });
      });
    };
    SpritesheetLoader2.getResourcePath = function(resource, baseUrl) {
      if (resource.isDataUrl) {
        return resource.data.meta.image;
      }
      return import_url2.default.resolve(resource.url.replace(baseUrl, ""), resource.data.meta.image);
    };
    return SpritesheetLoader2;
  }();

  // node_modules/@pixi/sprite-tiling/lib/sprite-tiling.es.js
  /*!
   * @pixi/sprite-tiling - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/sprite-tiling is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics10 = function(d, b) {
    extendStatics10 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics10(d, b);
  };
  function __extends10(d, b) {
    extendStatics10(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var tempPoint2 = new Point();
  var TilingSprite = function(_super) {
    __extends10(TilingSprite2, _super);
    function TilingSprite2(texture, width, height) {
      if (width === void 0) {
        width = 100;
      }
      if (height === void 0) {
        height = 100;
      }
      var _this = _super.call(this, texture) || this;
      _this.tileTransform = new Transform();
      _this._width = width;
      _this._height = height;
      _this.uvMatrix = _this.texture.uvMatrix || new TextureMatrix(texture);
      _this.pluginName = "tilingSprite";
      _this.uvRespectAnchor = false;
      return _this;
    }
    Object.defineProperty(TilingSprite2.prototype, "clampMargin", {
      get: function() {
        return this.uvMatrix.clampMargin;
      },
      set: function(value) {
        this.uvMatrix.clampMargin = value;
        this.uvMatrix.update(true);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TilingSprite2.prototype, "tileScale", {
      get: function() {
        return this.tileTransform.scale;
      },
      set: function(value) {
        this.tileTransform.scale.copyFrom(value);
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TilingSprite2.prototype, "tilePosition", {
      get: function() {
        return this.tileTransform.position;
      },
      set: function(value) {
        this.tileTransform.position.copyFrom(value);
      },
      enumerable: false,
      configurable: true
    });
    TilingSprite2.prototype._onTextureUpdate = function() {
      if (this.uvMatrix) {
        this.uvMatrix.texture = this._texture;
      }
      this._cachedTint = 16777215;
    };
    TilingSprite2.prototype._render = function(renderer) {
      var texture = this._texture;
      if (!texture || !texture.valid) {
        return;
      }
      this.tileTransform.updateLocalTransform();
      this.uvMatrix.update();
      renderer.batch.setObjectRenderer(renderer.plugins[this.pluginName]);
      renderer.plugins[this.pluginName].render(this);
    };
    TilingSprite2.prototype._calculateBounds = function() {
      var minX = this._width * -this._anchor._x;
      var minY = this._height * -this._anchor._y;
      var maxX = this._width * (1 - this._anchor._x);
      var maxY = this._height * (1 - this._anchor._y);
      this._bounds.addFrame(this.transform, minX, minY, maxX, maxY);
    };
    TilingSprite2.prototype.getLocalBounds = function(rect) {
      if (this.children.length === 0) {
        this._bounds.minX = this._width * -this._anchor._x;
        this._bounds.minY = this._height * -this._anchor._y;
        this._bounds.maxX = this._width * (1 - this._anchor._x);
        this._bounds.maxY = this._height * (1 - this._anchor._y);
        if (!rect) {
          if (!this._localBoundsRect) {
            this._localBoundsRect = new Rectangle();
          }
          rect = this._localBoundsRect;
        }
        return this._bounds.getRectangle(rect);
      }
      return _super.prototype.getLocalBounds.call(this, rect);
    };
    TilingSprite2.prototype.containsPoint = function(point) {
      this.worldTransform.applyInverse(point, tempPoint2);
      var width = this._width;
      var height = this._height;
      var x1 = -width * this.anchor._x;
      if (tempPoint2.x >= x1 && tempPoint2.x < x1 + width) {
        var y1 = -height * this.anchor._y;
        if (tempPoint2.y >= y1 && tempPoint2.y < y1 + height) {
          return true;
        }
      }
      return false;
    };
    TilingSprite2.prototype.destroy = function(options) {
      _super.prototype.destroy.call(this, options);
      this.tileTransform = null;
      this.uvMatrix = null;
    };
    TilingSprite2.from = function(source, options) {
      if (typeof options === "number") {
        deprecation("5.3.0", "TilingSprite.from use options instead of width and height args");
        options = {width: options, height: arguments[2]};
      }
      return new TilingSprite2(Texture.from(source, options), options.width, options.height);
    };
    Object.defineProperty(TilingSprite2.prototype, "width", {
      get: function() {
        return this._width;
      },
      set: function(value) {
        this._width = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(TilingSprite2.prototype, "height", {
      get: function() {
        return this._height;
      },
      set: function(value) {
        this._height = value;
      },
      enumerable: false,
      configurable: true
    });
    return TilingSprite2;
  }(Sprite);
  var vertex3 = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";
  var fragment3 = "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n";
  var fragmentSimple = "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n";
  var tempMat2 = new Matrix();
  var TilingSpriteRenderer = function(_super) {
    __extends10(TilingSpriteRenderer2, _super);
    function TilingSpriteRenderer2(renderer) {
      var _this = _super.call(this, renderer) || this;
      var uniforms = {globals: _this.renderer.globalUniforms};
      _this.shader = Shader.from(vertex3, fragment3, uniforms);
      _this.simpleShader = Shader.from(vertex3, fragmentSimple, uniforms);
      _this.quad = new QuadUv();
      _this.state = State.for2d();
      return _this;
    }
    TilingSpriteRenderer2.prototype.render = function(ts) {
      var renderer = this.renderer;
      var quad = this.quad;
      var vertices = quad.vertices;
      vertices[0] = vertices[6] = ts._width * -ts.anchor.x;
      vertices[1] = vertices[3] = ts._height * -ts.anchor.y;
      vertices[2] = vertices[4] = ts._width * (1 - ts.anchor.x);
      vertices[5] = vertices[7] = ts._height * (1 - ts.anchor.y);
      if (ts.uvRespectAnchor) {
        vertices = quad.uvs;
        vertices[0] = vertices[6] = -ts.anchor.x;
        vertices[1] = vertices[3] = -ts.anchor.y;
        vertices[2] = vertices[4] = 1 - ts.anchor.x;
        vertices[5] = vertices[7] = 1 - ts.anchor.y;
      }
      quad.invalidate();
      var tex = ts._texture;
      var baseTex = tex.baseTexture;
      var lt = ts.tileTransform.localTransform;
      var uv = ts.uvMatrix;
      var isSimple = baseTex.isPowerOfTwo && tex.frame.width === baseTex.width && tex.frame.height === baseTex.height;
      if (isSimple) {
        if (!baseTex._glTextures[renderer.CONTEXT_UID]) {
          if (baseTex.wrapMode === WRAP_MODES.CLAMP) {
            baseTex.wrapMode = WRAP_MODES.REPEAT;
          }
        } else {
          isSimple = baseTex.wrapMode !== WRAP_MODES.CLAMP;
        }
      }
      var shader = isSimple ? this.simpleShader : this.shader;
      var w = tex.width;
      var h = tex.height;
      var W = ts._width;
      var H = ts._height;
      tempMat2.set(lt.a * w / W, lt.b * w / H, lt.c * h / W, lt.d * h / H, lt.tx / W, lt.ty / H);
      tempMat2.invert();
      if (isSimple) {
        tempMat2.prepend(uv.mapCoord);
      } else {
        shader.uniforms.uMapCoord = uv.mapCoord.toArray(true);
        shader.uniforms.uClampFrame = uv.uClampFrame;
        shader.uniforms.uClampOffset = uv.uClampOffset;
      }
      shader.uniforms.uTransform = tempMat2.toArray(true);
      shader.uniforms.uColor = premultiplyTintToRgba(ts.tint, ts.worldAlpha, shader.uniforms.uColor, baseTex.alphaMode);
      shader.uniforms.translationMatrix = ts.transform.worldTransform.toArray(true);
      shader.uniforms.uSampler = tex;
      renderer.shader.bind(shader);
      renderer.geometry.bind(quad);
      this.state.blendMode = correctBlendMode(ts.blendMode, baseTex.alphaMode);
      renderer.state.set(this.state);
      renderer.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0);
    };
    return TilingSpriteRenderer2;
  }(ObjectRenderer);

  // node_modules/@pixi/mesh/lib/mesh.es.js
  /*!
   * @pixi/mesh - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/mesh is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics11 = function(d, b) {
    extendStatics11 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics11(d, b);
  };
  function __extends11(d, b) {
    extendStatics11(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var MeshBatchUvs = function() {
    function MeshBatchUvs2(uvBuffer, uvMatrix) {
      this.uvBuffer = uvBuffer;
      this.uvMatrix = uvMatrix;
      this.data = null;
      this._bufferUpdateId = -1;
      this._textureUpdateId = -1;
      this._updateID = 0;
    }
    MeshBatchUvs2.prototype.update = function(forceUpdate) {
      if (!forceUpdate && this._bufferUpdateId === this.uvBuffer._updateID && this._textureUpdateId === this.uvMatrix._updateID) {
        return;
      }
      this._bufferUpdateId = this.uvBuffer._updateID;
      this._textureUpdateId = this.uvMatrix._updateID;
      var data = this.uvBuffer.data;
      if (!this.data || this.data.length !== data.length) {
        this.data = new Float32Array(data.length);
      }
      this.uvMatrix.multiplyUvs(data, this.data);
      this._updateID++;
    };
    return MeshBatchUvs2;
  }();
  var tempPoint3 = new Point();
  var tempPolygon = new Polygon();
  var Mesh = function(_super) {
    __extends11(Mesh2, _super);
    function Mesh2(geometry, shader, state, drawMode) {
      if (drawMode === void 0) {
        drawMode = DRAW_MODES.TRIANGLES;
      }
      var _this = _super.call(this) || this;
      _this.geometry = geometry;
      geometry.refCount++;
      _this.shader = shader;
      _this.state = state || State.for2d();
      _this.drawMode = drawMode;
      _this.start = 0;
      _this.size = 0;
      _this.uvs = null;
      _this.indices = null;
      _this.vertexData = new Float32Array(1);
      _this.vertexDirty = 0;
      _this._transformID = -1;
      _this._roundPixels = settings.ROUND_PIXELS;
      _this.batchUvs = null;
      return _this;
    }
    Object.defineProperty(Mesh2.prototype, "uvBuffer", {
      get: function() {
        return this.geometry.buffers[1];
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Mesh2.prototype, "verticesBuffer", {
      get: function() {
        return this.geometry.buffers[0];
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Mesh2.prototype, "material", {
      get: function() {
        return this.shader;
      },
      set: function(value) {
        this.shader = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Mesh2.prototype, "blendMode", {
      get: function() {
        return this.state.blendMode;
      },
      set: function(value) {
        this.state.blendMode = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Mesh2.prototype, "roundPixels", {
      get: function() {
        return this._roundPixels;
      },
      set: function(value) {
        if (this._roundPixels !== value) {
          this._transformID = -1;
        }
        this._roundPixels = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Mesh2.prototype, "tint", {
      get: function() {
        return this.shader.tint;
      },
      set: function(value) {
        this.shader.tint = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(Mesh2.prototype, "texture", {
      get: function() {
        return this.shader.texture;
      },
      set: function(value) {
        this.shader.texture = value;
      },
      enumerable: false,
      configurable: true
    });
    Mesh2.prototype._render = function(renderer) {
      var vertices = this.geometry.buffers[0].data;
      if (this.shader.batchable && this.drawMode === DRAW_MODES.TRIANGLES && vertices.length < Mesh2.BATCHABLE_SIZE * 2) {
        this._renderToBatch(renderer);
      } else {
        this._renderDefault(renderer);
      }
    };
    Mesh2.prototype._renderDefault = function(renderer) {
      var shader = this.shader;
      shader.alpha = this.worldAlpha;
      if (shader.update) {
        shader.update();
      }
      renderer.batch.flush();
      if (shader.program.uniformData.translationMatrix) {
        shader.uniforms.translationMatrix = this.transform.worldTransform.toArray(true);
      }
      renderer.shader.bind(shader);
      renderer.state.set(this.state);
      renderer.geometry.bind(this.geometry, shader);
      renderer.geometry.draw(this.drawMode, this.size, this.start, this.geometry.instanceCount);
    };
    Mesh2.prototype._renderToBatch = function(renderer) {
      var geometry = this.geometry;
      if (this.shader.uvMatrix) {
        this.shader.uvMatrix.update();
        this.calculateUvs();
      }
      this.calculateVertices();
      this.indices = geometry.indexBuffer.data;
      this._tintRGB = this.shader._tintRGB;
      this._texture = this.shader.texture;
      var pluginName = this.material.pluginName;
      renderer.batch.setObjectRenderer(renderer.plugins[pluginName]);
      renderer.plugins[pluginName].render(this);
    };
    Mesh2.prototype.calculateVertices = function() {
      var geometry = this.geometry;
      var vertices = geometry.buffers[0].data;
      if (geometry.vertexDirtyId === this.vertexDirty && this._transformID === this.transform._worldID) {
        return;
      }
      this._transformID = this.transform._worldID;
      if (this.vertexData.length !== vertices.length) {
        this.vertexData = new Float32Array(vertices.length);
      }
      var wt = this.transform.worldTransform;
      var a = wt.a;
      var b = wt.b;
      var c = wt.c;
      var d = wt.d;
      var tx = wt.tx;
      var ty = wt.ty;
      var vertexData = this.vertexData;
      for (var i = 0; i < vertexData.length / 2; i++) {
        var x = vertices[i * 2];
        var y = vertices[i * 2 + 1];
        vertexData[i * 2] = a * x + c * y + tx;
        vertexData[i * 2 + 1] = b * x + d * y + ty;
      }
      if (this._roundPixels) {
        var resolution = settings.RESOLUTION;
        for (var i = 0; i < vertexData.length; ++i) {
          vertexData[i] = Math.round((vertexData[i] * resolution | 0) / resolution);
        }
      }
      this.vertexDirty = geometry.vertexDirtyId;
    };
    Mesh2.prototype.calculateUvs = function() {
      var geomUvs = this.geometry.buffers[1];
      if (!this.shader.uvMatrix.isSimple) {
        if (!this.batchUvs) {
          this.batchUvs = new MeshBatchUvs(geomUvs, this.shader.uvMatrix);
        }
        this.batchUvs.update();
        this.uvs = this.batchUvs.data;
      } else {
        this.uvs = geomUvs.data;
      }
    };
    Mesh2.prototype._calculateBounds = function() {
      this.calculateVertices();
      this._bounds.addVertexData(this.vertexData, 0, this.vertexData.length);
    };
    Mesh2.prototype.containsPoint = function(point) {
      if (!this.getBounds().contains(point.x, point.y)) {
        return false;
      }
      this.worldTransform.applyInverse(point, tempPoint3);
      var vertices = this.geometry.getBuffer("aVertexPosition").data;
      var points = tempPolygon.points;
      var indices2 = this.geometry.getIndex().data;
      var len = indices2.length;
      var step = this.drawMode === 4 ? 3 : 1;
      for (var i = 0; i + 2 < len; i += step) {
        var ind0 = indices2[i] * 2;
        var ind1 = indices2[i + 1] * 2;
        var ind2 = indices2[i + 2] * 2;
        points[0] = vertices[ind0];
        points[1] = vertices[ind0 + 1];
        points[2] = vertices[ind1];
        points[3] = vertices[ind1 + 1];
        points[4] = vertices[ind2];
        points[5] = vertices[ind2 + 1];
        if (tempPolygon.contains(tempPoint3.x, tempPoint3.y)) {
          return true;
        }
      }
      return false;
    };
    Mesh2.prototype.destroy = function(options) {
      _super.prototype.destroy.call(this, options);
      this.geometry.refCount--;
      if (this.geometry.refCount === 0) {
        this.geometry.dispose();
      }
      this.geometry = null;
      this.shader = null;
      this.state = null;
      this.uvs = null;
      this.indices = null;
      this.vertexData = null;
    };
    Mesh2.BATCHABLE_SIZE = 100;
    return Mesh2;
  }(Container);
  var fragment4 = "varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n";
  var vertex4 = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n";
  var MeshMaterial = function(_super) {
    __extends11(MeshMaterial2, _super);
    function MeshMaterial2(uSampler, options) {
      var _this = this;
      var uniforms = {
        uSampler,
        alpha: 1,
        uTextureMatrix: Matrix.IDENTITY,
        uColor: new Float32Array([1, 1, 1, 1])
      };
      options = Object.assign({
        tint: 16777215,
        alpha: 1,
        pluginName: "batch"
      }, options);
      if (options.uniforms) {
        Object.assign(uniforms, options.uniforms);
      }
      _this = _super.call(this, options.program || Program.from(vertex4, fragment4), uniforms) || this;
      _this._colorDirty = false;
      _this.uvMatrix = new TextureMatrix(uSampler);
      _this.batchable = options.program === void 0;
      _this.pluginName = options.pluginName;
      _this.tint = options.tint;
      _this.alpha = options.alpha;
      return _this;
    }
    Object.defineProperty(MeshMaterial2.prototype, "texture", {
      get: function() {
        return this.uniforms.uSampler;
      },
      set: function(value) {
        if (this.uniforms.uSampler !== value) {
          this.uniforms.uSampler = value;
          this.uvMatrix.texture = value;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(MeshMaterial2.prototype, "alpha", {
      get: function() {
        return this._alpha;
      },
      set: function(value) {
        if (value === this._alpha) {
          return;
        }
        this._alpha = value;
        this._colorDirty = true;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(MeshMaterial2.prototype, "tint", {
      get: function() {
        return this._tint;
      },
      set: function(value) {
        if (value === this._tint) {
          return;
        }
        this._tint = value;
        this._tintRGB = (value >> 16) + (value & 65280) + ((value & 255) << 16);
        this._colorDirty = true;
      },
      enumerable: false,
      configurable: true
    });
    MeshMaterial2.prototype.update = function() {
      if (this._colorDirty) {
        this._colorDirty = false;
        var baseTexture = this.texture.baseTexture;
        premultiplyTintToRgba(this._tint, this._alpha, this.uniforms.uColor, baseTexture.alphaMode);
      }
      if (this.uvMatrix.update()) {
        this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord;
      }
    };
    return MeshMaterial2;
  }(Shader);
  var MeshGeometry = function(_super) {
    __extends11(MeshGeometry2, _super);
    function MeshGeometry2(vertices, uvs, index4) {
      var _this = _super.call(this) || this;
      var verticesBuffer = new Buffer2(vertices);
      var uvsBuffer = new Buffer2(uvs, true);
      var indexBuffer = new Buffer2(index4, true, true);
      _this.addAttribute("aVertexPosition", verticesBuffer, 2, false, TYPES.FLOAT).addAttribute("aTextureCoord", uvsBuffer, 2, false, TYPES.FLOAT).addIndex(indexBuffer);
      _this._updateId = -1;
      return _this;
    }
    Object.defineProperty(MeshGeometry2.prototype, "vertexDirtyId", {
      get: function() {
        return this.buffers[0]._updateID;
      },
      enumerable: false,
      configurable: true
    });
    return MeshGeometry2;
  }(Geometry);

  // node_modules/@pixi/text-bitmap/lib/text-bitmap.es.js
  /*!
   * @pixi/text-bitmap - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/text-bitmap is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics12 = function(d, b) {
    extendStatics12 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics12(d, b);
  };
  function __extends12(d, b) {
    extendStatics12(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var BitmapFontData = function() {
    function BitmapFontData2() {
      this.info = [];
      this.common = [];
      this.page = [];
      this.char = [];
      this.kerning = [];
    }
    return BitmapFontData2;
  }();
  var TextFormat = function() {
    function TextFormat2() {
    }
    TextFormat2.test = function(data) {
      return typeof data === "string" && data.indexOf("info face=") === 0;
    };
    TextFormat2.parse = function(txt) {
      var items = txt.match(/^[a-z]+\s+.+$/gm);
      var rawData = {
        info: [],
        common: [],
        page: [],
        char: [],
        chars: [],
        kerning: [],
        kernings: []
      };
      for (var i in items) {
        var name = items[i].match(/^[a-z]+/gm)[0];
        var attributeList = items[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm);
        var itemData = {};
        for (var i_1 in attributeList) {
          var split = attributeList[i_1].split("=");
          var key = split[0];
          var strValue = split[1].replace(/"/gm, "");
          var floatValue = parseFloat(strValue);
          var value = isNaN(floatValue) ? strValue : floatValue;
          itemData[key] = value;
        }
        rawData[name].push(itemData);
      }
      var font = new BitmapFontData();
      rawData.info.forEach(function(info) {
        return font.info.push({
          face: info.face,
          size: parseInt(info.size, 10)
        });
      });
      rawData.common.forEach(function(common) {
        return font.common.push({
          lineHeight: parseInt(common.lineHeight, 10)
        });
      });
      rawData.page.forEach(function(page) {
        return font.page.push({
          id: parseInt(page.id, 10),
          file: page.file
        });
      });
      rawData.char.forEach(function(char) {
        return font.char.push({
          id: parseInt(char.id, 10),
          page: parseInt(char.page, 10),
          x: parseInt(char.x, 10),
          y: parseInt(char.y, 10),
          width: parseInt(char.width, 10),
          height: parseInt(char.height, 10),
          xoffset: parseInt(char.xoffset, 10),
          yoffset: parseInt(char.yoffset, 10),
          xadvance: parseInt(char.xadvance, 10)
        });
      });
      rawData.kerning.forEach(function(kerning) {
        return font.kerning.push({
          first: parseInt(kerning.first, 10),
          second: parseInt(kerning.second, 10),
          amount: parseInt(kerning.amount, 10)
        });
      });
      return font;
    };
    return TextFormat2;
  }();
  var XMLFormat = function() {
    function XMLFormat2() {
    }
    XMLFormat2.test = function(data) {
      return data instanceof XMLDocument && data.getElementsByTagName("page").length && data.getElementsByTagName("info")[0].getAttribute("face") !== null;
    };
    XMLFormat2.parse = function(xml) {
      var data = new BitmapFontData();
      var info = xml.getElementsByTagName("info");
      var common = xml.getElementsByTagName("common");
      var page = xml.getElementsByTagName("page");
      var char = xml.getElementsByTagName("char");
      var kerning = xml.getElementsByTagName("kerning");
      for (var i = 0; i < info.length; i++) {
        data.info.push({
          face: info[i].getAttribute("face"),
          size: parseInt(info[i].getAttribute("size"), 10)
        });
      }
      for (var i = 0; i < common.length; i++) {
        data.common.push({
          lineHeight: parseInt(common[i].getAttribute("lineHeight"), 10)
        });
      }
      for (var i = 0; i < page.length; i++) {
        data.page.push({
          id: parseInt(page[i].getAttribute("id"), 10) || 0,
          file: page[i].getAttribute("file")
        });
      }
      for (var i = 0; i < char.length; i++) {
        var letter = char[i];
        data.char.push({
          id: parseInt(letter.getAttribute("id"), 10),
          page: parseInt(letter.getAttribute("page"), 10) || 0,
          x: parseInt(letter.getAttribute("x"), 10),
          y: parseInt(letter.getAttribute("y"), 10),
          width: parseInt(letter.getAttribute("width"), 10),
          height: parseInt(letter.getAttribute("height"), 10),
          xoffset: parseInt(letter.getAttribute("xoffset"), 10),
          yoffset: parseInt(letter.getAttribute("yoffset"), 10),
          xadvance: parseInt(letter.getAttribute("xadvance"), 10)
        });
      }
      for (var i = 0; i < kerning.length; i++) {
        data.kerning.push({
          first: parseInt(kerning[i].getAttribute("first"), 10),
          second: parseInt(kerning[i].getAttribute("second"), 10),
          amount: parseInt(kerning[i].getAttribute("amount"), 10)
        });
      }
      return data;
    };
    return XMLFormat2;
  }();
  var XMLStringFormat = function() {
    function XMLStringFormat2() {
    }
    XMLStringFormat2.test = function(data) {
      if (typeof data === "string" && data.indexOf("<font>") > -1) {
        var xml = new self.DOMParser().parseFromString(data, "text/xml");
        return XMLFormat.test(xml);
      }
      return false;
    };
    XMLStringFormat2.parse = function(xmlTxt) {
      var xml = new window.DOMParser().parseFromString(xmlTxt, "text/xml");
      return XMLFormat.parse(xml);
    };
    return XMLStringFormat2;
  }();
  var formats = [
    TextFormat,
    XMLFormat,
    XMLStringFormat
  ];
  function autoDetectFormat(data) {
    for (var i = 0; i < formats.length; i++) {
      if (formats[i].test(data)) {
        return formats[i];
      }
    }
    return null;
  }
  function generateFillStyle(canvas2, context2, style, resolution, lines, metrics) {
    var fillStyle = style.fill;
    if (!Array.isArray(fillStyle)) {
      return fillStyle;
    } else if (fillStyle.length === 1) {
      return fillStyle[0];
    }
    var gradient;
    var dropShadowCorrection = style.dropShadow ? style.dropShadowDistance : 0;
    var padding = style.padding || 0;
    var width = Math.ceil(canvas2.width / resolution) - dropShadowCorrection - padding * 2;
    var height = Math.ceil(canvas2.height / resolution) - dropShadowCorrection - padding * 2;
    var fill = fillStyle.slice();
    var fillGradientStops = style.fillGradientStops.slice();
    if (!fillGradientStops.length) {
      var lengthPlus1 = fill.length + 1;
      for (var i = 1; i < lengthPlus1; ++i) {
        fillGradientStops.push(i / lengthPlus1);
      }
    }
    fill.unshift(fillStyle[0]);
    fillGradientStops.unshift(0);
    fill.push(fillStyle[fillStyle.length - 1]);
    fillGradientStops.push(1);
    if (style.fillGradientType === TEXT_GRADIENT.LINEAR_VERTICAL) {
      gradient = context2.createLinearGradient(width / 2, padding, width / 2, height + padding);
      var lastIterationStop = 0;
      var textHeight = metrics.fontProperties.fontSize + style.strokeThickness;
      var gradStopLineHeight = textHeight / height;
      for (var i = 0; i < lines.length; i++) {
        var thisLineTop = metrics.lineHeight * i;
        for (var j = 0; j < fill.length; j++) {
          var lineStop = 0;
          if (typeof fillGradientStops[j] === "number") {
            lineStop = fillGradientStops[j];
          } else {
            lineStop = j / fill.length;
          }
          var globalStop = thisLineTop / height + lineStop * gradStopLineHeight;
          var clampedStop = Math.max(lastIterationStop, globalStop);
          clampedStop = Math.min(clampedStop, 1);
          gradient.addColorStop(clampedStop, fill[j]);
          lastIterationStop = clampedStop;
        }
      }
    } else {
      gradient = context2.createLinearGradient(padding, height / 2, width + padding, height / 2);
      var totalIterations = fill.length + 1;
      var currentIteration = 1;
      for (var i = 0; i < fill.length; i++) {
        var stop = void 0;
        if (typeof fillGradientStops[i] === "number") {
          stop = fillGradientStops[i];
        } else {
          stop = currentIteration / totalIterations;
        }
        gradient.addColorStop(stop, fill[i]);
        currentIteration++;
      }
    }
    return gradient;
  }
  function drawGlyph(canvas2, context2, metrics, x, y, resolution, style) {
    var char = metrics.text;
    var fontProperties = metrics.fontProperties;
    context2.translate(x, y);
    context2.scale(resolution, resolution);
    var tx = style.strokeThickness / 2;
    var ty = -(style.strokeThickness / 2);
    context2.font = style.toFontString();
    context2.lineWidth = style.strokeThickness;
    context2.textBaseline = style.textBaseline;
    context2.lineJoin = style.lineJoin;
    context2.miterLimit = style.miterLimit;
    context2.fillStyle = generateFillStyle(canvas2, context2, style, resolution, [char], metrics);
    context2.strokeStyle = style.stroke;
    context2.font = style.toFontString();
    context2.lineWidth = style.strokeThickness;
    context2.textBaseline = style.textBaseline;
    context2.lineJoin = style.lineJoin;
    context2.miterLimit = style.miterLimit;
    context2.fillStyle = generateFillStyle(canvas2, context2, style, resolution, [char], metrics);
    context2.strokeStyle = style.stroke;
    var dropShadowColor = style.dropShadowColor;
    var rgb = hex2rgb(typeof dropShadowColor === "number" ? dropShadowColor : string2hex(dropShadowColor));
    if (style.dropShadow) {
      context2.shadowColor = "rgba(" + rgb[0] * 255 + "," + rgb[1] * 255 + "," + rgb[2] * 255 + "," + style.dropShadowAlpha + ")";
      context2.shadowBlur = style.dropShadowBlur;
      context2.shadowOffsetX = Math.cos(style.dropShadowAngle) * style.dropShadowDistance;
      context2.shadowOffsetY = Math.sin(style.dropShadowAngle) * style.dropShadowDistance;
    } else {
      context2.shadowColor = "black";
      context2.shadowBlur = 0;
      context2.shadowOffsetX = 0;
      context2.shadowOffsetY = 0;
    }
    if (style.stroke && style.strokeThickness) {
      context2.strokeText(char, tx, ty + metrics.lineHeight - fontProperties.descent);
    }
    if (style.fill) {
      context2.fillText(char, tx, ty + metrics.lineHeight - fontProperties.descent);
    }
    context2.setTransform(1, 0, 0, 1, 0, 0);
    context2.fillStyle = "rgba(0, 0, 0, 0)";
  }
  function resolveCharacters(chars) {
    if (typeof chars === "string") {
      chars = [chars];
    }
    var result = [];
    for (var i = 0, j = chars.length; i < j; i++) {
      var item = chars[i];
      if (Array.isArray(item)) {
        if (item.length !== 2) {
          throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got " + item.length + ".");
        }
        var startCode = item[0].charCodeAt(0);
        var endCode = item[1].charCodeAt(0);
        if (endCode < startCode) {
          throw new Error("[BitmapFont]: Invalid character range.");
        }
        for (var i_1 = startCode, j_1 = endCode; i_1 <= j_1; i_1++) {
          result.push(String.fromCharCode(i_1));
        }
      } else {
        result.push.apply(result, item.split(""));
      }
    }
    if (result.length === 0) {
      throw new Error("[BitmapFont]: Empty set when resolving characters.");
    }
    return result;
  }
  var BitmapFont = function() {
    function BitmapFont2(data, textures) {
      var info = data.info[0];
      var common = data.common[0];
      var page = data.page[0];
      var res = getResolutionOfUrl(page.file);
      var pageTextures = {};
      this.font = info.face;
      this.size = info.size;
      this.lineHeight = common.lineHeight / res;
      this.chars = {};
      this.pageTextures = pageTextures;
      for (var i = 0; i < data.page.length; i++) {
        var _a2 = data.page[i], id = _a2.id, file = _a2.file;
        pageTextures[id] = textures instanceof Array ? textures[i] : textures[file];
      }
      for (var i = 0; i < data.char.length; i++) {
        var _b = data.char[i], id = _b.id, page_1 = _b.page;
        var _c = data.char[i], x = _c.x, y = _c.y, width = _c.width, height = _c.height, xoffset = _c.xoffset, yoffset = _c.yoffset, xadvance = _c.xadvance;
        x /= res;
        y /= res;
        width /= res;
        height /= res;
        xoffset /= res;
        yoffset /= res;
        xadvance /= res;
        var rect = new Rectangle(x + pageTextures[page_1].frame.x / res, y + pageTextures[page_1].frame.y / res, width, height);
        this.chars[id] = {
          xOffset: xoffset,
          yOffset: yoffset,
          xAdvance: xadvance,
          kerning: {},
          texture: new Texture(pageTextures[page_1].baseTexture, rect),
          page: page_1
        };
      }
      for (var i = 0; i < data.kerning.length; i++) {
        var _d = data.kerning[i], first = _d.first, second = _d.second, amount = _d.amount;
        first /= res;
        second /= res;
        amount /= res;
        if (this.chars[second]) {
          this.chars[second].kerning[first] = amount;
        }
      }
    }
    BitmapFont2.prototype.destroy = function() {
      for (var id in this.chars) {
        this.chars[id].texture.destroy();
        this.chars[id].texture = null;
      }
      for (var id in this.pageTextures) {
        this.pageTextures[id].destroy(true);
        this.pageTextures[id] = null;
      }
      this.chars = null;
      this.pageTextures = null;
    };
    BitmapFont2.install = function(data, textures) {
      var fontData;
      if (data instanceof BitmapFontData) {
        fontData = data;
      } else {
        var format = autoDetectFormat(data);
        if (!format) {
          throw new Error("Unrecognized data format for font.");
        }
        fontData = format.parse(data);
      }
      if (textures instanceof Texture) {
        textures = [textures];
      }
      var font = new BitmapFont2(fontData, textures);
      BitmapFont2.available[font.font] = font;
      return font;
    };
    BitmapFont2.uninstall = function(name) {
      var font = BitmapFont2.available[name];
      if (!font) {
        throw new Error("No font found named '" + name + "'");
      }
      font.destroy();
      delete BitmapFont2.available[name];
    };
    BitmapFont2.from = function(name, textStyle, options) {
      if (!name) {
        throw new Error("[BitmapFont] Property `name` is required.");
      }
      var _a2 = Object.assign({}, BitmapFont2.defaultOptions, options), chars = _a2.chars, padding = _a2.padding, resolution = _a2.resolution, textureWidth = _a2.textureWidth, textureHeight = _a2.textureHeight;
      var charsList = resolveCharacters(chars);
      var style = textStyle instanceof TextStyle ? textStyle : new TextStyle(textStyle);
      var lineWidth = textureWidth;
      var fontData = new BitmapFontData();
      fontData.info[0] = {
        face: style.fontFamily,
        size: style.fontSize
      };
      fontData.common[0] = {
        lineHeight: style.fontSize
      };
      var positionX = 0;
      var positionY = 0;
      var canvas2;
      var context2;
      var baseTexture;
      var maxCharHeight = 0;
      var textures = [];
      for (var i = 0; i < charsList.length; i++) {
        if (!canvas2) {
          canvas2 = document.createElement("canvas");
          canvas2.width = textureWidth;
          canvas2.height = textureHeight;
          context2 = canvas2.getContext("2d");
          baseTexture = new BaseTexture(canvas2, {resolution});
          textures.push(new Texture(baseTexture));
          fontData.page.push({
            id: textures.length - 1,
            file: ""
          });
        }
        var metrics = TextMetrics.measureText(charsList[i], style, false, canvas2);
        var width = metrics.width;
        var height = Math.ceil(metrics.height);
        var textureGlyphWidth = Math.ceil((style.fontStyle === "italic" ? 2 : 1) * width);
        if (positionY >= textureHeight - height * resolution) {
          if (positionY === 0) {
            throw new Error("[BitmapFont] textureHeight " + textureHeight + "px is " + ("too small for " + style.fontSize + "px fonts"));
          }
          --i;
          canvas2 = null;
          context2 = null;
          baseTexture = null;
          positionY = 0;
          positionX = 0;
          maxCharHeight = 0;
          continue;
        }
        maxCharHeight = Math.max(height + metrics.fontProperties.descent, maxCharHeight);
        if (textureGlyphWidth * resolution + positionX >= lineWidth) {
          --i;
          positionY += maxCharHeight * resolution;
          positionY = Math.ceil(positionY);
          positionX = 0;
          maxCharHeight = 0;
          continue;
        }
        drawGlyph(canvas2, context2, metrics, positionX, positionY, resolution, style);
        var id = metrics.text.charCodeAt(0);
        fontData.char.push({
          id,
          page: textures.length - 1,
          x: positionX / resolution,
          y: positionY / resolution,
          width: textureGlyphWidth,
          height,
          xoffset: 0,
          yoffset: 0,
          xadvance: Math.ceil(width - (style.dropShadow ? style.dropShadowDistance : 0) - (style.stroke ? style.strokeThickness : 0))
        });
        positionX += (textureGlyphWidth + 2 * padding) * resolution;
        positionX = Math.ceil(positionX);
      }
      var font = new BitmapFont2(fontData, textures);
      if (BitmapFont2.available[name] !== void 0) {
        BitmapFont2.uninstall(name);
      }
      BitmapFont2.available[name] = font;
      return font;
    };
    BitmapFont2.ALPHA = [["a", "z"], ["A", "Z"], " "];
    BitmapFont2.NUMERIC = [["0", "9"]];
    BitmapFont2.ALPHANUMERIC = [["a", "z"], ["A", "Z"], ["0", "9"], " "];
    BitmapFont2.ASCII = [[" ", "~"]];
    BitmapFont2.defaultOptions = {
      resolution: 1,
      textureWidth: 512,
      textureHeight: 512,
      padding: 4,
      chars: BitmapFont2.ALPHANUMERIC
    };
    BitmapFont2.available = {};
    return BitmapFont2;
  }();
  var pageMeshDataPool = [];
  var charRenderDataPool = [];
  var BitmapText = function(_super) {
    __extends12(BitmapText2, _super);
    function BitmapText2(text, style) {
      if (style === void 0) {
        style = {};
      }
      var _this = _super.call(this) || this;
      _this._tint = 16777215;
      if (style.font) {
        deprecation("5.3.0", "PIXI.BitmapText constructor style.font property is deprecated.");
        _this._upgradeStyle(style);
      }
      var _a2 = Object.assign({}, BitmapText2.styleDefaults, style), align = _a2.align, tint = _a2.tint, maxWidth = _a2.maxWidth, letterSpacing = _a2.letterSpacing, fontName = _a2.fontName, fontSize = _a2.fontSize;
      if (!BitmapFont.available[fontName]) {
        throw new Error('Missing BitmapFont "' + fontName + '"');
      }
      _this._activePagesMeshData = [];
      _this._textWidth = 0;
      _this._textHeight = 0;
      _this._align = align;
      _this._tint = tint;
      _this._fontName = fontName;
      _this._fontSize = fontSize || BitmapFont.available[fontName].size;
      _this._text = text;
      _this._maxWidth = maxWidth;
      _this._maxLineHeight = 0;
      _this._letterSpacing = letterSpacing;
      _this._anchor = new ObservablePoint(function() {
        _this.dirty = true;
      }, _this, 0, 0);
      _this._roundPixels = settings.ROUND_PIXELS;
      _this.dirty = true;
      _this._textureCache = {};
      return _this;
    }
    BitmapText2.prototype.updateText = function() {
      var _a2;
      var data = BitmapFont.available[this._fontName];
      var scale = this._fontSize / data.size;
      var pos = new Point();
      var chars = [];
      var lineWidths = [];
      var text = this._text.replace(/(?:\r\n|\r)/g, "\n") || " ";
      var textLength = text.length;
      var maxWidth = this._maxWidth * data.size / this._fontSize;
      var prevCharCode = null;
      var lastLineWidth = 0;
      var maxLineWidth = 0;
      var line = 0;
      var lastBreakPos = -1;
      var lastBreakWidth = 0;
      var spacesRemoved = 0;
      var maxLineHeight = 0;
      for (var i = 0; i < textLength; i++) {
        var charCode = text.charCodeAt(i);
        var char = text.charAt(i);
        if (/(?:\s)/.test(char)) {
          lastBreakPos = i;
          lastBreakWidth = lastLineWidth;
        }
        if (char === "\r" || char === "\n") {
          lineWidths.push(lastLineWidth);
          maxLineWidth = Math.max(maxLineWidth, lastLineWidth);
          ++line;
          ++spacesRemoved;
          pos.x = 0;
          pos.y += data.lineHeight;
          prevCharCode = null;
          continue;
        }
        var charData = data.chars[charCode];
        if (!charData) {
          continue;
        }
        if (prevCharCode && charData.kerning[prevCharCode]) {
          pos.x += charData.kerning[prevCharCode];
        }
        var charRenderData = charRenderDataPool.pop() || {
          texture: Texture.EMPTY,
          line: 0,
          charCode: 0,
          position: new Point()
        };
        charRenderData.texture = charData.texture;
        charRenderData.line = line;
        charRenderData.charCode = charCode;
        charRenderData.position.x = pos.x + charData.xOffset + this._letterSpacing / 2;
        charRenderData.position.y = pos.y + charData.yOffset;
        chars.push(charRenderData);
        pos.x += charData.xAdvance + this._letterSpacing;
        lastLineWidth = pos.x;
        maxLineHeight = Math.max(maxLineHeight, charData.yOffset + charData.texture.height);
        prevCharCode = charCode;
        if (lastBreakPos !== -1 && maxWidth > 0 && pos.x > maxWidth) {
          ++spacesRemoved;
          removeItems(chars, 1 + lastBreakPos - spacesRemoved, 1 + i - lastBreakPos);
          i = lastBreakPos;
          lastBreakPos = -1;
          lineWidths.push(lastBreakWidth);
          maxLineWidth = Math.max(maxLineWidth, lastBreakWidth);
          line++;
          pos.x = 0;
          pos.y += data.lineHeight;
          prevCharCode = null;
        }
      }
      var lastChar = text.charAt(text.length - 1);
      if (lastChar !== "\r" && lastChar !== "\n") {
        if (/(?:\s)/.test(lastChar)) {
          lastLineWidth = lastBreakWidth;
        }
        lineWidths.push(lastLineWidth);
        maxLineWidth = Math.max(maxLineWidth, lastLineWidth);
      }
      var lineAlignOffsets = [];
      for (var i = 0; i <= line; i++) {
        var alignOffset = 0;
        if (this._align === "right") {
          alignOffset = maxLineWidth - lineWidths[i];
        } else if (this._align === "center") {
          alignOffset = (maxLineWidth - lineWidths[i]) / 2;
        }
        lineAlignOffsets.push(alignOffset);
      }
      var lenChars = chars.length;
      var pagesMeshData = {};
      var newPagesMeshData = [];
      var activePagesMeshData = this._activePagesMeshData;
      for (var i = 0; i < activePagesMeshData.length; i++) {
        pageMeshDataPool.push(activePagesMeshData[i]);
      }
      for (var i = 0; i < lenChars; i++) {
        var texture = chars[i].texture;
        var baseTextureUid = texture.baseTexture.uid;
        if (!pagesMeshData[baseTextureUid]) {
          var pageMeshData = pageMeshDataPool.pop();
          if (!pageMeshData) {
            var geometry = new MeshGeometry();
            var material = new MeshMaterial(Texture.EMPTY);
            var mesh = new Mesh(geometry, material);
            pageMeshData = {
              index: 0,
              indexCount: 0,
              vertexCount: 0,
              uvsCount: 0,
              total: 0,
              mesh,
              vertices: null,
              uvs: null,
              indices: null
            };
          }
          pageMeshData.index = 0;
          pageMeshData.indexCount = 0;
          pageMeshData.vertexCount = 0;
          pageMeshData.uvsCount = 0;
          pageMeshData.total = 0;
          var _textureCache = this._textureCache;
          _textureCache[baseTextureUid] = _textureCache[baseTextureUid] || new Texture(texture.baseTexture);
          pageMeshData.mesh.texture = _textureCache[baseTextureUid];
          pageMeshData.mesh.tint = this._tint;
          newPagesMeshData.push(pageMeshData);
          pagesMeshData[baseTextureUid] = pageMeshData;
        }
        pagesMeshData[baseTextureUid].total++;
      }
      for (var i = 0; i < activePagesMeshData.length; i++) {
        if (newPagesMeshData.indexOf(activePagesMeshData[i]) === -1) {
          this.removeChild(activePagesMeshData[i].mesh);
        }
      }
      for (var i = 0; i < newPagesMeshData.length; i++) {
        if (newPagesMeshData[i].mesh.parent !== this) {
          this.addChild(newPagesMeshData[i].mesh);
        }
      }
      this._activePagesMeshData = newPagesMeshData;
      for (var i in pagesMeshData) {
        var pageMeshData = pagesMeshData[i];
        var total = pageMeshData.total;
        if (!(((_a2 = pageMeshData.indices) === null || _a2 === void 0 ? void 0 : _a2.length) > 6 * total) || pageMeshData.vertices.length < Mesh.BATCHABLE_SIZE * 2) {
          pageMeshData.vertices = new Float32Array(4 * 2 * total);
          pageMeshData.uvs = new Float32Array(4 * 2 * total);
          pageMeshData.indices = new Uint16Array(6 * total);
        } else {
          var total_1 = pageMeshData.total;
          var vertices = pageMeshData.vertices;
          for (var i_1 = total_1 * 4 * 2; i_1 < vertices.length; i_1++) {
            vertices[i_1] = 0;
          }
        }
        pageMeshData.mesh.size = 6 * total;
      }
      for (var i = 0; i < lenChars; i++) {
        var char = chars[i];
        var offset = char.position.x + lineAlignOffsets[char.line];
        if (this._roundPixels) {
          offset = Math.round(offset);
        }
        var xPos = offset * scale;
        var yPos = char.position.y * scale;
        var texture = char.texture;
        var pageMesh = pagesMeshData[texture.baseTexture.uid];
        var textureFrame = texture.frame;
        var textureUvs = texture._uvs;
        var index4 = pageMesh.index++;
        pageMesh.indices[index4 * 6 + 0] = 0 + index4 * 4;
        pageMesh.indices[index4 * 6 + 1] = 1 + index4 * 4;
        pageMesh.indices[index4 * 6 + 2] = 2 + index4 * 4;
        pageMesh.indices[index4 * 6 + 3] = 0 + index4 * 4;
        pageMesh.indices[index4 * 6 + 4] = 2 + index4 * 4;
        pageMesh.indices[index4 * 6 + 5] = 3 + index4 * 4;
        pageMesh.vertices[index4 * 8 + 0] = xPos;
        pageMesh.vertices[index4 * 8 + 1] = yPos;
        pageMesh.vertices[index4 * 8 + 2] = xPos + textureFrame.width * scale;
        pageMesh.vertices[index4 * 8 + 3] = yPos;
        pageMesh.vertices[index4 * 8 + 4] = xPos + textureFrame.width * scale;
        pageMesh.vertices[index4 * 8 + 5] = yPos + textureFrame.height * scale;
        pageMesh.vertices[index4 * 8 + 6] = xPos;
        pageMesh.vertices[index4 * 8 + 7] = yPos + textureFrame.height * scale;
        pageMesh.uvs[index4 * 8 + 0] = textureUvs.x0;
        pageMesh.uvs[index4 * 8 + 1] = textureUvs.y0;
        pageMesh.uvs[index4 * 8 + 2] = textureUvs.x1;
        pageMesh.uvs[index4 * 8 + 3] = textureUvs.y1;
        pageMesh.uvs[index4 * 8 + 4] = textureUvs.x2;
        pageMesh.uvs[index4 * 8 + 5] = textureUvs.y2;
        pageMesh.uvs[index4 * 8 + 6] = textureUvs.x3;
        pageMesh.uvs[index4 * 8 + 7] = textureUvs.y3;
      }
      this._textWidth = maxLineWidth * scale;
      this._textHeight = (pos.y + data.lineHeight) * scale;
      for (var i in pagesMeshData) {
        var pageMeshData = pagesMeshData[i];
        if (this.anchor.x !== 0 || this.anchor.y !== 0) {
          var vertexCount = 0;
          var anchorOffsetX = this._textWidth * this.anchor.x;
          var anchorOffsetY = this._textHeight * this.anchor.y;
          for (var i_2 = 0; i_2 < pageMeshData.total; i_2++) {
            pageMeshData.vertices[vertexCount++] -= anchorOffsetX;
            pageMeshData.vertices[vertexCount++] -= anchorOffsetY;
            pageMeshData.vertices[vertexCount++] -= anchorOffsetX;
            pageMeshData.vertices[vertexCount++] -= anchorOffsetY;
            pageMeshData.vertices[vertexCount++] -= anchorOffsetX;
            pageMeshData.vertices[vertexCount++] -= anchorOffsetY;
            pageMeshData.vertices[vertexCount++] -= anchorOffsetX;
            pageMeshData.vertices[vertexCount++] -= anchorOffsetY;
          }
        }
        this._maxLineHeight = maxLineHeight * scale;
        var vertexBuffer = pageMeshData.mesh.geometry.getBuffer("aVertexPosition");
        var textureBuffer = pageMeshData.mesh.geometry.getBuffer("aTextureCoord");
        var indexBuffer = pageMeshData.mesh.geometry.getIndex();
        vertexBuffer.data = pageMeshData.vertices;
        textureBuffer.data = pageMeshData.uvs;
        indexBuffer.data = pageMeshData.indices;
        vertexBuffer.update();
        textureBuffer.update();
        indexBuffer.update();
      }
      for (var i = 0; i < chars.length; i++) {
        charRenderDataPool.push(chars[i]);
      }
    };
    BitmapText2.prototype.updateTransform = function() {
      this.validate();
      this.containerUpdateTransform();
    };
    BitmapText2.prototype.getLocalBounds = function() {
      this.validate();
      return _super.prototype.getLocalBounds.call(this);
    };
    BitmapText2.prototype.validate = function() {
      if (this.dirty) {
        this.updateText();
        this.dirty = false;
      }
    };
    Object.defineProperty(BitmapText2.prototype, "tint", {
      get: function() {
        return this._tint;
      },
      set: function(value) {
        if (this._tint === value) {
          return;
        }
        this._tint = value;
        for (var i = 0; i < this._activePagesMeshData.length; i++) {
          this._activePagesMeshData[i].mesh.tint = value;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "align", {
      get: function() {
        return this._align;
      },
      set: function(value) {
        if (this._align !== value) {
          this._align = value;
          this.dirty = true;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "fontName", {
      get: function() {
        return this._fontName;
      },
      set: function(value) {
        if (!BitmapFont.available[value]) {
          throw new Error('Missing BitmapFont "' + value + '"');
        }
        if (this._fontName !== value) {
          this._fontName = value;
          this.dirty = true;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "fontSize", {
      get: function() {
        return this._fontSize;
      },
      set: function(value) {
        if (this._fontSize !== value) {
          this._fontSize = value;
          this.dirty = true;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "anchor", {
      get: function() {
        return this._anchor;
      },
      set: function(value) {
        if (typeof value === "number") {
          this._anchor.set(value);
        } else {
          this._anchor.copyFrom(value);
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "text", {
      get: function() {
        return this._text;
      },
      set: function(text) {
        text = String(text === null || text === void 0 ? "" : text);
        if (this._text === text) {
          return;
        }
        this._text = text;
        this.dirty = true;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "maxWidth", {
      get: function() {
        return this._maxWidth;
      },
      set: function(value) {
        if (this._maxWidth === value) {
          return;
        }
        this._maxWidth = value;
        this.dirty = true;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "maxLineHeight", {
      get: function() {
        this.validate();
        return this._maxLineHeight;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "textWidth", {
      get: function() {
        this.validate();
        return this._textWidth;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "letterSpacing", {
      get: function() {
        return this._letterSpacing;
      },
      set: function(value) {
        if (this._letterSpacing !== value) {
          this._letterSpacing = value;
          this.dirty = true;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "roundPixels", {
      get: function() {
        return this._roundPixels;
      },
      set: function(value) {
        if (value !== this._roundPixels) {
          this._roundPixels = value;
          this.dirty = true;
        }
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BitmapText2.prototype, "textHeight", {
      get: function() {
        this.validate();
        return this._textHeight;
      },
      enumerable: false,
      configurable: true
    });
    BitmapText2.prototype._upgradeStyle = function(style) {
      if (typeof style.font === "string") {
        var valueSplit = style.font.split(" ");
        style.fontName = valueSplit.length === 1 ? valueSplit[0] : valueSplit.slice(1).join(" ");
        if (valueSplit.length >= 2) {
          style.fontSize = parseInt(valueSplit[0], 10);
        }
      } else {
        style.fontName = style.font.name;
        style.fontSize = typeof style.font.size === "number" ? style.font.size : parseInt(style.font.size, 10);
      }
    };
    BitmapText2.prototype.destroy = function(options) {
      var _textureCache = this._textureCache;
      for (var id in _textureCache) {
        var texture = _textureCache[id];
        texture.destroy();
        delete _textureCache[id];
      }
      this._textureCache = null;
      _super.prototype.destroy.call(this, options);
    };
    BitmapText2.registerFont = function(data, textures) {
      deprecation("5.3.0", "PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install");
      return BitmapFont.install(data, textures);
    };
    Object.defineProperty(BitmapText2, "fonts", {
      get: function() {
        deprecation("5.3.0", "PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available");
        return BitmapFont.available;
      },
      enumerable: false,
      configurable: true
    });
    BitmapText2.styleDefaults = {
      align: "left",
      tint: 16777215,
      maxWidth: 0,
      letterSpacing: 0
    };
    return BitmapText2;
  }(Container);
  var BitmapFontLoader = function() {
    function BitmapFontLoader2() {
    }
    BitmapFontLoader2.add = function() {
      LoaderResource.setExtensionXhrType("fnt", LoaderResource.XHR_RESPONSE_TYPE.TEXT);
    };
    BitmapFontLoader2.use = function(resource, next) {
      var format = autoDetectFormat(resource.data);
      if (!format) {
        next();
        return;
      }
      var baseUrl = BitmapFontLoader2.getBaseUrl(this, resource);
      var data = format.parse(resource.data);
      var textures = {};
      var completed = function(page) {
        textures[page.metadata.pageFile] = page.texture;
        if (Object.keys(textures).length === data.page.length) {
          resource.bitmapFont = BitmapFont.install(data, textures);
          next();
        }
      };
      for (var i = 0; i < data.page.length; ++i) {
        var pageFile = data.page[i].file;
        var url = baseUrl + pageFile;
        var exists = false;
        for (var name in this.resources) {
          var bitmapResource = this.resources[name];
          if (bitmapResource.url === url) {
            bitmapResource.metadata.pageFile = pageFile;
            if (bitmapResource.texture) {
              completed(bitmapResource);
            } else {
              bitmapResource.onAfterMiddleware.add(completed);
            }
            exists = true;
            break;
          }
        }
        if (!exists) {
          var options = {
            crossOrigin: resource.crossOrigin,
            loadType: LoaderResource.LOAD_TYPE.IMAGE,
            metadata: Object.assign({pageFile}, resource.metadata.imageMetadata),
            parentResource: resource
          };
          this.add(url, options, completed);
        }
      }
    };
    BitmapFontLoader2.getBaseUrl = function(loader, resource) {
      var resUrl = !resource.isDataUrl ? BitmapFontLoader2.dirname(resource.url) : "";
      if (resource.isDataUrl) {
        if (resUrl === ".") {
          resUrl = "";
        }
        if (loader.baseUrl && resUrl) {
          if (loader.baseUrl.charAt(loader.baseUrl.length - 1) === "/") {
            resUrl += "/";
          }
        }
      }
      resUrl = resUrl.replace(loader.baseUrl, "");
      if (resUrl && resUrl.charAt(resUrl.length - 1) !== "/") {
        resUrl += "/";
      }
      return resUrl;
    };
    BitmapFontLoader2.dirname = function(url) {
      var dir = url.replace(/\\/g, "/").replace(/\/$/, "").replace(/\/[^\/]*$/, "");
      if (dir === url) {
        return ".";
      } else if (dir === "") {
        return "/";
      }
      return dir;
    };
    return BitmapFontLoader2;
  }();

  // node_modules/@pixi/filter-alpha/lib/filter-alpha.es.js
  /*!
   * @pixi/filter-alpha - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/filter-alpha is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics13 = function(d, b) {
    extendStatics13 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics13(d, b);
  };
  function __extends13(d, b) {
    extendStatics13(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var fragment5 = "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n";
  var AlphaFilter = function(_super) {
    __extends13(AlphaFilter2, _super);
    function AlphaFilter2(alpha) {
      if (alpha === void 0) {
        alpha = 1;
      }
      var _this = _super.call(this, _default, fragment5, {uAlpha: 1}) || this;
      _this.alpha = alpha;
      return _this;
    }
    Object.defineProperty(AlphaFilter2.prototype, "alpha", {
      get: function() {
        return this.uniforms.uAlpha;
      },
      set: function(value) {
        this.uniforms.uAlpha = value;
      },
      enumerable: false,
      configurable: true
    });
    return AlphaFilter2;
  }(Filter);

  // node_modules/@pixi/filter-blur/lib/filter-blur.es.js
  /*!
   * @pixi/filter-blur - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/filter-blur is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics14 = function(d, b) {
    extendStatics14 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics14(d, b);
  };
  function __extends14(d, b) {
    extendStatics14(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var vertTemplate = "\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";
  function generateBlurVertSource(kernelSize, x) {
    var halfLength = Math.ceil(kernelSize / 2);
    var vertSource = vertTemplate;
    var blurLoop = "";
    var template;
    if (x) {
      template = "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);";
    } else {
      template = "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";
    }
    for (var i = 0; i < kernelSize; i++) {
      var blur = template.replace("%index%", i.toString());
      blur = blur.replace("%sampleIndex%", i - (halfLength - 1) + ".0");
      blurLoop += blur;
      blurLoop += "\n";
    }
    vertSource = vertSource.replace("%blur%", blurLoop);
    vertSource = vertSource.replace("%size%", kernelSize.toString());
    return vertSource;
  }
  var GAUSSIAN_VALUES = {
    5: [0.153388, 0.221461, 0.250301],
    7: [0.071303, 0.131514, 0.189879, 0.214607],
    9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],
    11: [93e-4, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],
    13: [2406e-6, 9255e-6, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],
    15: [489e-6, 2403e-6, 9246e-6, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448]
  };
  var fragTemplate2 = [
    "varying vec2 vBlurTexCoords[%size%];",
    "uniform sampler2D uSampler;",
    "void main(void)",
    "{",
    "    gl_FragColor = vec4(0.0);",
    "    %blur%",
    "}"
  ].join("\n");
  function generateBlurFragSource(kernelSize) {
    var kernel = GAUSSIAN_VALUES[kernelSize];
    var halfLength = kernel.length;
    var fragSource = fragTemplate2;
    var blurLoop = "";
    var template = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";
    var value;
    for (var i = 0; i < kernelSize; i++) {
      var blur = template.replace("%index%", i.toString());
      value = i;
      if (i >= halfLength) {
        value = kernelSize - i - 1;
      }
      blur = blur.replace("%value%", kernel[value].toString());
      blurLoop += blur;
      blurLoop += "\n";
    }
    fragSource = fragSource.replace("%blur%", blurLoop);
    fragSource = fragSource.replace("%size%", kernelSize.toString());
    return fragSource;
  }
  var ENV2;
  (function(ENV3) {
    ENV3[ENV3["WEBGL_LEGACY"] = 0] = "WEBGL_LEGACY";
    ENV3[ENV3["WEBGL"] = 1] = "WEBGL";
    ENV3[ENV3["WEBGL2"] = 2] = "WEBGL2";
  })(ENV2 || (ENV2 = {}));
  var RENDERER_TYPE2;
  (function(RENDERER_TYPE3) {
    RENDERER_TYPE3[RENDERER_TYPE3["UNKNOWN"] = 0] = "UNKNOWN";
    RENDERER_TYPE3[RENDERER_TYPE3["WEBGL"] = 1] = "WEBGL";
    RENDERER_TYPE3[RENDERER_TYPE3["CANVAS"] = 2] = "CANVAS";
  })(RENDERER_TYPE2 || (RENDERER_TYPE2 = {}));
  var BUFFER_BITS2;
  (function(BUFFER_BITS3) {
    BUFFER_BITS3[BUFFER_BITS3["COLOR"] = 16384] = "COLOR";
    BUFFER_BITS3[BUFFER_BITS3["DEPTH"] = 256] = "DEPTH";
    BUFFER_BITS3[BUFFER_BITS3["STENCIL"] = 1024] = "STENCIL";
  })(BUFFER_BITS2 || (BUFFER_BITS2 = {}));
  var BLEND_MODES2;
  (function(BLEND_MODES3) {
    BLEND_MODES3[BLEND_MODES3["NORMAL"] = 0] = "NORMAL";
    BLEND_MODES3[BLEND_MODES3["ADD"] = 1] = "ADD";
    BLEND_MODES3[BLEND_MODES3["MULTIPLY"] = 2] = "MULTIPLY";
    BLEND_MODES3[BLEND_MODES3["SCREEN"] = 3] = "SCREEN";
    BLEND_MODES3[BLEND_MODES3["OVERLAY"] = 4] = "OVERLAY";
    BLEND_MODES3[BLEND_MODES3["DARKEN"] = 5] = "DARKEN";
    BLEND_MODES3[BLEND_MODES3["LIGHTEN"] = 6] = "LIGHTEN";
    BLEND_MODES3[BLEND_MODES3["COLOR_DODGE"] = 7] = "COLOR_DODGE";
    BLEND_MODES3[BLEND_MODES3["COLOR_BURN"] = 8] = "COLOR_BURN";
    BLEND_MODES3[BLEND_MODES3["HARD_LIGHT"] = 9] = "HARD_LIGHT";
    BLEND_MODES3[BLEND_MODES3["SOFT_LIGHT"] = 10] = "SOFT_LIGHT";
    BLEND_MODES3[BLEND_MODES3["DIFFERENCE"] = 11] = "DIFFERENCE";
    BLEND_MODES3[BLEND_MODES3["EXCLUSION"] = 12] = "EXCLUSION";
    BLEND_MODES3[BLEND_MODES3["HUE"] = 13] = "HUE";
    BLEND_MODES3[BLEND_MODES3["SATURATION"] = 14] = "SATURATION";
    BLEND_MODES3[BLEND_MODES3["COLOR"] = 15] = "COLOR";
    BLEND_MODES3[BLEND_MODES3["LUMINOSITY"] = 16] = "LUMINOSITY";
    BLEND_MODES3[BLEND_MODES3["NORMAL_NPM"] = 17] = "NORMAL_NPM";
    BLEND_MODES3[BLEND_MODES3["ADD_NPM"] = 18] = "ADD_NPM";
    BLEND_MODES3[BLEND_MODES3["SCREEN_NPM"] = 19] = "SCREEN_NPM";
    BLEND_MODES3[BLEND_MODES3["NONE"] = 20] = "NONE";
    BLEND_MODES3[BLEND_MODES3["SRC_OVER"] = 0] = "SRC_OVER";
    BLEND_MODES3[BLEND_MODES3["SRC_IN"] = 21] = "SRC_IN";
    BLEND_MODES3[BLEND_MODES3["SRC_OUT"] = 22] = "SRC_OUT";
    BLEND_MODES3[BLEND_MODES3["SRC_ATOP"] = 23] = "SRC_ATOP";
    BLEND_MODES3[BLEND_MODES3["DST_OVER"] = 24] = "DST_OVER";
    BLEND_MODES3[BLEND_MODES3["DST_IN"] = 25] = "DST_IN";
    BLEND_MODES3[BLEND_MODES3["DST_OUT"] = 26] = "DST_OUT";
    BLEND_MODES3[BLEND_MODES3["DST_ATOP"] = 27] = "DST_ATOP";
    BLEND_MODES3[BLEND_MODES3["ERASE"] = 26] = "ERASE";
    BLEND_MODES3[BLEND_MODES3["SUBTRACT"] = 28] = "SUBTRACT";
    BLEND_MODES3[BLEND_MODES3["XOR"] = 29] = "XOR";
  })(BLEND_MODES2 || (BLEND_MODES2 = {}));
  var DRAW_MODES2;
  (function(DRAW_MODES3) {
    DRAW_MODES3[DRAW_MODES3["POINTS"] = 0] = "POINTS";
    DRAW_MODES3[DRAW_MODES3["LINES"] = 1] = "LINES";
    DRAW_MODES3[DRAW_MODES3["LINE_LOOP"] = 2] = "LINE_LOOP";
    DRAW_MODES3[DRAW_MODES3["LINE_STRIP"] = 3] = "LINE_STRIP";
    DRAW_MODES3[DRAW_MODES3["TRIANGLES"] = 4] = "TRIANGLES";
    DRAW_MODES3[DRAW_MODES3["TRIANGLE_STRIP"] = 5] = "TRIANGLE_STRIP";
    DRAW_MODES3[DRAW_MODES3["TRIANGLE_FAN"] = 6] = "TRIANGLE_FAN";
  })(DRAW_MODES2 || (DRAW_MODES2 = {}));
  var FORMATS2;
  (function(FORMATS3) {
    FORMATS3[FORMATS3["RGBA"] = 6408] = "RGBA";
    FORMATS3[FORMATS3["RGB"] = 6407] = "RGB";
    FORMATS3[FORMATS3["ALPHA"] = 6406] = "ALPHA";
    FORMATS3[FORMATS3["LUMINANCE"] = 6409] = "LUMINANCE";
    FORMATS3[FORMATS3["LUMINANCE_ALPHA"] = 6410] = "LUMINANCE_ALPHA";
    FORMATS3[FORMATS3["DEPTH_COMPONENT"] = 6402] = "DEPTH_COMPONENT";
    FORMATS3[FORMATS3["DEPTH_STENCIL"] = 34041] = "DEPTH_STENCIL";
  })(FORMATS2 || (FORMATS2 = {}));
  var TARGETS2;
  (function(TARGETS3) {
    TARGETS3[TARGETS3["TEXTURE_2D"] = 3553] = "TEXTURE_2D";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP"] = 34067] = "TEXTURE_CUBE_MAP";
    TARGETS3[TARGETS3["TEXTURE_2D_ARRAY"] = 35866] = "TEXTURE_2D_ARRAY";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_POSITIVE_X"] = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_NEGATIVE_X"] = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_POSITIVE_Y"] = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_NEGATIVE_Y"] = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_POSITIVE_Z"] = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z";
    TARGETS3[TARGETS3["TEXTURE_CUBE_MAP_NEGATIVE_Z"] = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
  })(TARGETS2 || (TARGETS2 = {}));
  var TYPES2;
  (function(TYPES3) {
    TYPES3[TYPES3["UNSIGNED_BYTE"] = 5121] = "UNSIGNED_BYTE";
    TYPES3[TYPES3["UNSIGNED_SHORT"] = 5123] = "UNSIGNED_SHORT";
    TYPES3[TYPES3["UNSIGNED_SHORT_5_6_5"] = 33635] = "UNSIGNED_SHORT_5_6_5";
    TYPES3[TYPES3["UNSIGNED_SHORT_4_4_4_4"] = 32819] = "UNSIGNED_SHORT_4_4_4_4";
    TYPES3[TYPES3["UNSIGNED_SHORT_5_5_5_1"] = 32820] = "UNSIGNED_SHORT_5_5_5_1";
    TYPES3[TYPES3["FLOAT"] = 5126] = "FLOAT";
    TYPES3[TYPES3["HALF_FLOAT"] = 36193] = "HALF_FLOAT";
  })(TYPES2 || (TYPES2 = {}));
  var SCALE_MODES2;
  (function(SCALE_MODES3) {
    SCALE_MODES3[SCALE_MODES3["NEAREST"] = 0] = "NEAREST";
    SCALE_MODES3[SCALE_MODES3["LINEAR"] = 1] = "LINEAR";
  })(SCALE_MODES2 || (SCALE_MODES2 = {}));
  var WRAP_MODES2;
  (function(WRAP_MODES3) {
    WRAP_MODES3[WRAP_MODES3["CLAMP"] = 33071] = "CLAMP";
    WRAP_MODES3[WRAP_MODES3["REPEAT"] = 10497] = "REPEAT";
    WRAP_MODES3[WRAP_MODES3["MIRRORED_REPEAT"] = 33648] = "MIRRORED_REPEAT";
  })(WRAP_MODES2 || (WRAP_MODES2 = {}));
  var MIPMAP_MODES2;
  (function(MIPMAP_MODES3) {
    MIPMAP_MODES3[MIPMAP_MODES3["OFF"] = 0] = "OFF";
    MIPMAP_MODES3[MIPMAP_MODES3["POW2"] = 1] = "POW2";
    MIPMAP_MODES3[MIPMAP_MODES3["ON"] = 2] = "ON";
  })(MIPMAP_MODES2 || (MIPMAP_MODES2 = {}));
  var ALPHA_MODES2;
  (function(ALPHA_MODES3) {
    ALPHA_MODES3[ALPHA_MODES3["NPM"] = 0] = "NPM";
    ALPHA_MODES3[ALPHA_MODES3["UNPACK"] = 1] = "UNPACK";
    ALPHA_MODES3[ALPHA_MODES3["PMA"] = 2] = "PMA";
    ALPHA_MODES3[ALPHA_MODES3["NO_PREMULTIPLIED_ALPHA"] = 0] = "NO_PREMULTIPLIED_ALPHA";
    ALPHA_MODES3[ALPHA_MODES3["PREMULTIPLY_ON_UPLOAD"] = 1] = "PREMULTIPLY_ON_UPLOAD";
    ALPHA_MODES3[ALPHA_MODES3["PREMULTIPLY_ALPHA"] = 2] = "PREMULTIPLY_ALPHA";
  })(ALPHA_MODES2 || (ALPHA_MODES2 = {}));
  var CLEAR_MODES2;
  (function(CLEAR_MODES3) {
    CLEAR_MODES3[CLEAR_MODES3["NO"] = 0] = "NO";
    CLEAR_MODES3[CLEAR_MODES3["YES"] = 1] = "YES";
    CLEAR_MODES3[CLEAR_MODES3["AUTO"] = 2] = "AUTO";
    CLEAR_MODES3[CLEAR_MODES3["BLEND"] = 0] = "BLEND";
    CLEAR_MODES3[CLEAR_MODES3["CLEAR"] = 1] = "CLEAR";
    CLEAR_MODES3[CLEAR_MODES3["BLIT"] = 2] = "BLIT";
  })(CLEAR_MODES2 || (CLEAR_MODES2 = {}));
  var GC_MODES2;
  (function(GC_MODES3) {
    GC_MODES3[GC_MODES3["AUTO"] = 0] = "AUTO";
    GC_MODES3[GC_MODES3["MANUAL"] = 1] = "MANUAL";
  })(GC_MODES2 || (GC_MODES2 = {}));
  var PRECISION2;
  (function(PRECISION3) {
    PRECISION3["LOW"] = "lowp";
    PRECISION3["MEDIUM"] = "mediump";
    PRECISION3["HIGH"] = "highp";
  })(PRECISION2 || (PRECISION2 = {}));
  var MASK_TYPES2;
  (function(MASK_TYPES3) {
    MASK_TYPES3[MASK_TYPES3["NONE"] = 0] = "NONE";
    MASK_TYPES3[MASK_TYPES3["SCISSOR"] = 1] = "SCISSOR";
    MASK_TYPES3[MASK_TYPES3["STENCIL"] = 2] = "STENCIL";
    MASK_TYPES3[MASK_TYPES3["SPRITE"] = 3] = "SPRITE";
  })(MASK_TYPES2 || (MASK_TYPES2 = {}));
  var MSAA_QUALITY2;
  (function(MSAA_QUALITY3) {
    MSAA_QUALITY3[MSAA_QUALITY3["NONE"] = 0] = "NONE";
    MSAA_QUALITY3[MSAA_QUALITY3["LOW"] = 2] = "LOW";
    MSAA_QUALITY3[MSAA_QUALITY3["MEDIUM"] = 4] = "MEDIUM";
    MSAA_QUALITY3[MSAA_QUALITY3["HIGH"] = 8] = "HIGH";
  })(MSAA_QUALITY2 || (MSAA_QUALITY2 = {}));
  var BlurFilterPass = function(_super) {
    __extends14(BlurFilterPass2, _super);
    function BlurFilterPass2(horizontal, strength, quality, resolution, kernelSize) {
      if (strength === void 0) {
        strength = 8;
      }
      if (quality === void 0) {
        quality = 4;
      }
      if (resolution === void 0) {
        resolution = settings.FILTER_RESOLUTION;
      }
      if (kernelSize === void 0) {
        kernelSize = 5;
      }
      var _this = this;
      var vertSrc = generateBlurVertSource(kernelSize, horizontal);
      var fragSrc = generateBlurFragSource(kernelSize);
      _this = _super.call(this, vertSrc, fragSrc) || this;
      _this.horizontal = horizontal;
      _this.resolution = resolution;
      _this._quality = 0;
      _this.quality = quality;
      _this.blur = strength;
      return _this;
    }
    BlurFilterPass2.prototype.apply = function(filterManager, input, output, clearMode) {
      if (output) {
        if (this.horizontal) {
          this.uniforms.strength = 1 / output.width * (output.width / input.width);
        } else {
          this.uniforms.strength = 1 / output.height * (output.height / input.height);
        }
      } else {
        if (this.horizontal) {
          this.uniforms.strength = 1 / filterManager.renderer.width * (filterManager.renderer.width / input.width);
        } else {
          this.uniforms.strength = 1 / filterManager.renderer.height * (filterManager.renderer.height / input.height);
        }
      }
      this.uniforms.strength *= this.strength;
      this.uniforms.strength /= this.passes;
      if (this.passes === 1) {
        filterManager.applyFilter(this, input, output, clearMode);
      } else {
        var renderTarget = filterManager.getFilterTexture();
        var renderer = filterManager.renderer;
        var flip = input;
        var flop = renderTarget;
        this.state.blend = false;
        filterManager.applyFilter(this, flip, flop, CLEAR_MODES2.CLEAR);
        for (var i = 1; i < this.passes - 1; i++) {
          filterManager.bindAndClear(flip, CLEAR_MODES2.BLIT);
          this.uniforms.uSampler = flop;
          var temp2 = flop;
          flop = flip;
          flip = temp2;
          renderer.shader.bind(this);
          renderer.geometry.draw(5);
        }
        this.state.blend = true;
        filterManager.applyFilter(this, flop, output, clearMode);
        filterManager.returnFilterTexture(renderTarget);
      }
    };
    Object.defineProperty(BlurFilterPass2.prototype, "blur", {
      get: function() {
        return this.strength;
      },
      set: function(value) {
        this.padding = 1 + Math.abs(value) * 2;
        this.strength = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BlurFilterPass2.prototype, "quality", {
      get: function() {
        return this._quality;
      },
      set: function(value) {
        this._quality = value;
        this.passes = value;
      },
      enumerable: false,
      configurable: true
    });
    return BlurFilterPass2;
  }(Filter);
  var BlurFilter = function(_super) {
    __extends14(BlurFilter2, _super);
    function BlurFilter2(strength, quality, resolution, kernelSize) {
      if (strength === void 0) {
        strength = 8;
      }
      if (quality === void 0) {
        quality = 4;
      }
      if (resolution === void 0) {
        resolution = settings.FILTER_RESOLUTION;
      }
      if (kernelSize === void 0) {
        kernelSize = 5;
      }
      var _this = _super.call(this) || this;
      _this.blurXFilter = new BlurFilterPass(true, strength, quality, resolution, kernelSize);
      _this.blurYFilter = new BlurFilterPass(false, strength, quality, resolution, kernelSize);
      _this.resolution = resolution;
      _this.quality = quality;
      _this.blur = strength;
      _this.repeatEdgePixels = false;
      return _this;
    }
    BlurFilter2.prototype.apply = function(filterManager, input, output, clearMode) {
      var xStrength = Math.abs(this.blurXFilter.strength);
      var yStrength = Math.abs(this.blurYFilter.strength);
      if (xStrength && yStrength) {
        var renderTarget = filterManager.getFilterTexture();
        this.blurXFilter.apply(filterManager, input, renderTarget, CLEAR_MODES2.CLEAR);
        this.blurYFilter.apply(filterManager, renderTarget, output, clearMode);
        filterManager.returnFilterTexture(renderTarget);
      } else if (yStrength) {
        this.blurYFilter.apply(filterManager, input, output, clearMode);
      } else {
        this.blurXFilter.apply(filterManager, input, output, clearMode);
      }
    };
    BlurFilter2.prototype.updatePadding = function() {
      if (this._repeatEdgePixels) {
        this.padding = 0;
      } else {
        this.padding = Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) * 2;
      }
    };
    Object.defineProperty(BlurFilter2.prototype, "blur", {
      get: function() {
        return this.blurXFilter.blur;
      },
      set: function(value) {
        this.blurXFilter.blur = this.blurYFilter.blur = value;
        this.updatePadding();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BlurFilter2.prototype, "quality", {
      get: function() {
        return this.blurXFilter.quality;
      },
      set: function(value) {
        this.blurXFilter.quality = this.blurYFilter.quality = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BlurFilter2.prototype, "blurX", {
      get: function() {
        return this.blurXFilter.blur;
      },
      set: function(value) {
        this.blurXFilter.blur = value;
        this.updatePadding();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BlurFilter2.prototype, "blurY", {
      get: function() {
        return this.blurYFilter.blur;
      },
      set: function(value) {
        this.blurYFilter.blur = value;
        this.updatePadding();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BlurFilter2.prototype, "blendMode", {
      get: function() {
        return this.blurYFilter.blendMode;
      },
      set: function(value) {
        this.blurYFilter.blendMode = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(BlurFilter2.prototype, "repeatEdgePixels", {
      get: function() {
        return this._repeatEdgePixels;
      },
      set: function(value) {
        this._repeatEdgePixels = value;
        this.updatePadding();
      },
      enumerable: false,
      configurable: true
    });
    return BlurFilter2;
  }(Filter);

  // node_modules/@pixi/filter-color-matrix/lib/filter-color-matrix.es.js
  /*!
   * @pixi/filter-color-matrix - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/filter-color-matrix is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics15 = function(d, b) {
    extendStatics15 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics15(d, b);
  };
  function __extends15(d, b) {
    extendStatics15(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var fragment6 = "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n";
  var ColorMatrixFilter = function(_super) {
    __extends15(ColorMatrixFilter2, _super);
    function ColorMatrixFilter2() {
      var _this = this;
      var uniforms = {
        m: new Float32Array([
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0
        ]),
        uAlpha: 1
      };
      _this = _super.call(this, defaultFilter, fragment6, uniforms) || this;
      _this.alpha = 1;
      return _this;
    }
    ColorMatrixFilter2.prototype._loadMatrix = function(matrix, multiply) {
      if (multiply === void 0) {
        multiply = false;
      }
      var newMatrix = matrix;
      if (multiply) {
        this._multiply(newMatrix, this.uniforms.m, matrix);
        newMatrix = this._colorMatrix(newMatrix);
      }
      this.uniforms.m = newMatrix;
    };
    ColorMatrixFilter2.prototype._multiply = function(out, a, b) {
      out[0] = a[0] * b[0] + a[1] * b[5] + a[2] * b[10] + a[3] * b[15];
      out[1] = a[0] * b[1] + a[1] * b[6] + a[2] * b[11] + a[3] * b[16];
      out[2] = a[0] * b[2] + a[1] * b[7] + a[2] * b[12] + a[3] * b[17];
      out[3] = a[0] * b[3] + a[1] * b[8] + a[2] * b[13] + a[3] * b[18];
      out[4] = a[0] * b[4] + a[1] * b[9] + a[2] * b[14] + a[3] * b[19] + a[4];
      out[5] = a[5] * b[0] + a[6] * b[5] + a[7] * b[10] + a[8] * b[15];
      out[6] = a[5] * b[1] + a[6] * b[6] + a[7] * b[11] + a[8] * b[16];
      out[7] = a[5] * b[2] + a[6] * b[7] + a[7] * b[12] + a[8] * b[17];
      out[8] = a[5] * b[3] + a[6] * b[8] + a[7] * b[13] + a[8] * b[18];
      out[9] = a[5] * b[4] + a[6] * b[9] + a[7] * b[14] + a[8] * b[19] + a[9];
      out[10] = a[10] * b[0] + a[11] * b[5] + a[12] * b[10] + a[13] * b[15];
      out[11] = a[10] * b[1] + a[11] * b[6] + a[12] * b[11] + a[13] * b[16];
      out[12] = a[10] * b[2] + a[11] * b[7] + a[12] * b[12] + a[13] * b[17];
      out[13] = a[10] * b[3] + a[11] * b[8] + a[12] * b[13] + a[13] * b[18];
      out[14] = a[10] * b[4] + a[11] * b[9] + a[12] * b[14] + a[13] * b[19] + a[14];
      out[15] = a[15] * b[0] + a[16] * b[5] + a[17] * b[10] + a[18] * b[15];
      out[16] = a[15] * b[1] + a[16] * b[6] + a[17] * b[11] + a[18] * b[16];
      out[17] = a[15] * b[2] + a[16] * b[7] + a[17] * b[12] + a[18] * b[17];
      out[18] = a[15] * b[3] + a[16] * b[8] + a[17] * b[13] + a[18] * b[18];
      out[19] = a[15] * b[4] + a[16] * b[9] + a[17] * b[14] + a[18] * b[19] + a[19];
      return out;
    };
    ColorMatrixFilter2.prototype._colorMatrix = function(matrix) {
      var m = new Float32Array(matrix);
      m[4] /= 255;
      m[9] /= 255;
      m[14] /= 255;
      m[19] /= 255;
      return m;
    };
    ColorMatrixFilter2.prototype.brightness = function(b, multiply) {
      var matrix = [
        b,
        0,
        0,
        0,
        0,
        0,
        b,
        0,
        0,
        0,
        0,
        0,
        b,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.greyscale = function(scale, multiply) {
      var matrix = [
        scale,
        scale,
        scale,
        0,
        0,
        scale,
        scale,
        scale,
        0,
        0,
        scale,
        scale,
        scale,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.blackAndWhite = function(multiply) {
      var matrix = [
        0.3,
        0.6,
        0.1,
        0,
        0,
        0.3,
        0.6,
        0.1,
        0,
        0,
        0.3,
        0.6,
        0.1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.hue = function(rotation, multiply) {
      rotation = (rotation || 0) / 180 * Math.PI;
      var cosR = Math.cos(rotation);
      var sinR = Math.sin(rotation);
      var sqrt = Math.sqrt;
      var w = 1 / 3;
      var sqrW = sqrt(w);
      var a00 = cosR + (1 - cosR) * w;
      var a01 = w * (1 - cosR) - sqrW * sinR;
      var a02 = w * (1 - cosR) + sqrW * sinR;
      var a10 = w * (1 - cosR) + sqrW * sinR;
      var a11 = cosR + w * (1 - cosR);
      var a12 = w * (1 - cosR) - sqrW * sinR;
      var a20 = w * (1 - cosR) - sqrW * sinR;
      var a21 = w * (1 - cosR) + sqrW * sinR;
      var a22 = cosR + w * (1 - cosR);
      var matrix = [
        a00,
        a01,
        a02,
        0,
        0,
        a10,
        a11,
        a12,
        0,
        0,
        a20,
        a21,
        a22,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.contrast = function(amount, multiply) {
      var v = (amount || 0) + 1;
      var o = -0.5 * (v - 1);
      var matrix = [
        v,
        0,
        0,
        0,
        o,
        0,
        v,
        0,
        0,
        o,
        0,
        0,
        v,
        0,
        o,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.saturate = function(amount, multiply) {
      if (amount === void 0) {
        amount = 0;
      }
      var x = amount * 2 / 3 + 1;
      var y = (x - 1) * -0.5;
      var matrix = [
        x,
        y,
        y,
        0,
        0,
        y,
        x,
        y,
        0,
        0,
        y,
        y,
        x,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.desaturate = function() {
      this.saturate(-1);
    };
    ColorMatrixFilter2.prototype.negative = function(multiply) {
      var matrix = [
        -1,
        0,
        0,
        1,
        0,
        0,
        -1,
        0,
        1,
        0,
        0,
        0,
        -1,
        1,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.sepia = function(multiply) {
      var matrix = [
        0.393,
        0.7689999,
        0.18899999,
        0,
        0,
        0.349,
        0.6859999,
        0.16799999,
        0,
        0,
        0.272,
        0.5339999,
        0.13099999,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.technicolor = function(multiply) {
      var matrix = [
        1.9125277891456083,
        -0.8545344976951645,
        -0.09155508482755585,
        0,
        11.793603434377337,
        -0.3087833385928097,
        1.7658908555458428,
        -0.10601743074722245,
        0,
        -70.35205161461398,
        -0.231103377548616,
        -0.7501899197440212,
        1.847597816108189,
        0,
        30.950940869491138,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.polaroid = function(multiply) {
      var matrix = [
        1.438,
        -0.062,
        -0.062,
        0,
        0,
        -0.122,
        1.378,
        -0.122,
        0,
        0,
        -0.016,
        -0.016,
        1.483,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.toBGR = function(multiply) {
      var matrix = [
        0,
        0,
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.kodachrome = function(multiply) {
      var matrix = [
        1.1285582396593525,
        -0.3967382283601348,
        -0.03992559172921793,
        0,
        63.72958762196502,
        -0.16404339962244616,
        1.0835251566291304,
        -0.05498805115633132,
        0,
        24.732407896706203,
        -0.16786010706155763,
        -0.5603416277695248,
        1.6014850761964943,
        0,
        35.62982807460946,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.browni = function(multiply) {
      var matrix = [
        0.5997023498159715,
        0.34553243048391263,
        -0.2708298674538042,
        0,
        47.43192855600873,
        -0.037703249837783157,
        0.8609577587992641,
        0.15059552388459913,
        0,
        -36.96841498319127,
        0.24113635128153335,
        -0.07441037908422492,
        0.44972182064877153,
        0,
        -7.562075277591283,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.vintage = function(multiply) {
      var matrix = [
        0.6279345635605994,
        0.3202183420819367,
        -0.03965408211312453,
        0,
        9.651285835294123,
        0.02578397704808868,
        0.6441188644374771,
        0.03259127616149294,
        0,
        7.462829176470591,
        0.0466055556782719,
        -0.0851232987247891,
        0.5241648018700465,
        0,
        5.159190588235296,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.colorTone = function(desaturation, toned, lightColor, darkColor, multiply) {
      desaturation = desaturation || 0.2;
      toned = toned || 0.15;
      lightColor = lightColor || 16770432;
      darkColor = darkColor || 3375104;
      var lR = (lightColor >> 16 & 255) / 255;
      var lG = (lightColor >> 8 & 255) / 255;
      var lB = (lightColor & 255) / 255;
      var dR = (darkColor >> 16 & 255) / 255;
      var dG = (darkColor >> 8 & 255) / 255;
      var dB = (darkColor & 255) / 255;
      var matrix = [
        0.3,
        0.59,
        0.11,
        0,
        0,
        lR,
        lG,
        lB,
        desaturation,
        0,
        dR,
        dG,
        dB,
        toned,
        0,
        lR - dR,
        lG - dG,
        lB - dB,
        0,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.night = function(intensity, multiply) {
      intensity = intensity || 0.1;
      var matrix = [
        intensity * -2,
        -intensity,
        0,
        0,
        0,
        -intensity,
        0,
        intensity,
        0,
        0,
        0,
        intensity,
        intensity * 2,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.predator = function(amount, multiply) {
      var matrix = [
        11.224130630493164 * amount,
        -4.794486999511719 * amount,
        -2.8746118545532227 * amount,
        0 * amount,
        0.40342438220977783 * amount,
        -3.6330697536468506 * amount,
        9.193157196044922 * amount,
        -2.951810836791992 * amount,
        0 * amount,
        -1.316135048866272 * amount,
        -3.2184197902679443 * amount,
        -4.2375030517578125 * amount,
        7.476448059082031 * amount,
        0 * amount,
        0.8044459223747253 * amount,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.lsd = function(multiply) {
      var matrix = [
        2,
        -0.4,
        0.5,
        0,
        0,
        -0.5,
        2,
        -0.4,
        0,
        0,
        -0.4,
        -0.5,
        3,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, multiply);
    };
    ColorMatrixFilter2.prototype.reset = function() {
      var matrix = [
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(matrix, false);
    };
    Object.defineProperty(ColorMatrixFilter2.prototype, "matrix", {
      get: function() {
        return this.uniforms.m;
      },
      set: function(value) {
        this.uniforms.m = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(ColorMatrixFilter2.prototype, "alpha", {
      get: function() {
        return this.uniforms.uAlpha;
      },
      set: function(value) {
        this.uniforms.uAlpha = value;
      },
      enumerable: false,
      configurable: true
    });
    return ColorMatrixFilter2;
  }(Filter);
  ColorMatrixFilter.prototype.grayscale = ColorMatrixFilter.prototype.greyscale;

  // node_modules/@pixi/filter-displacement/lib/filter-displacement.es.js
  /*!
   * @pixi/filter-displacement - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/filter-displacement is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics16 = function(d, b) {
    extendStatics16 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics16(d, b);
  };
  function __extends16(d, b) {
    extendStatics16(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var fragment7 = "varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n";
  var vertex5 = "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n	gl_Position = filterVertexPosition();\n	vTextureCoord = filterTextureCoord();\n	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n";
  var DisplacementFilter = function(_super) {
    __extends16(DisplacementFilter2, _super);
    function DisplacementFilter2(sprite, scale) {
      var _this = this;
      var maskMatrix = new Matrix();
      sprite.renderable = false;
      _this = _super.call(this, vertex5, fragment7, {
        mapSampler: sprite._texture,
        filterMatrix: maskMatrix,
        scale: {x: 1, y: 1},
        rotation: new Float32Array([1, 0, 0, 1])
      }) || this;
      _this.maskSprite = sprite;
      _this.maskMatrix = maskMatrix;
      if (scale === null || scale === void 0) {
        scale = 20;
      }
      _this.scale = new Point(scale, scale);
      return _this;
    }
    DisplacementFilter2.prototype.apply = function(filterManager, input, output, clearMode) {
      this.uniforms.filterMatrix = filterManager.calculateSpriteMatrix(this.maskMatrix, this.maskSprite);
      this.uniforms.scale.x = this.scale.x;
      this.uniforms.scale.y = this.scale.y;
      var wt = this.maskSprite.worldTransform;
      var lenX = Math.sqrt(wt.a * wt.a + wt.b * wt.b);
      var lenY = Math.sqrt(wt.c * wt.c + wt.d * wt.d);
      if (lenX !== 0 && lenY !== 0) {
        this.uniforms.rotation[0] = wt.a / lenX;
        this.uniforms.rotation[1] = wt.b / lenX;
        this.uniforms.rotation[2] = wt.c / lenY;
        this.uniforms.rotation[3] = wt.d / lenY;
      }
      filterManager.applyFilter(this, input, output, clearMode);
    };
    Object.defineProperty(DisplacementFilter2.prototype, "map", {
      get: function() {
        return this.uniforms.mapSampler;
      },
      set: function(value) {
        this.uniforms.mapSampler = value;
      },
      enumerable: false,
      configurable: true
    });
    return DisplacementFilter2;
  }(Filter);

  // node_modules/@pixi/filter-fxaa/lib/filter-fxaa.es.js
  /*!
   * @pixi/filter-fxaa - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/filter-fxaa is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics17 = function(d, b) {
    extendStatics17 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics17(d, b);
  };
  function __extends17(d, b) {
    extendStatics17(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var vertex6 = "\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n";
  var fragment8 = `varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;
  var FXAAFilter = function(_super) {
    __extends17(FXAAFilter2, _super);
    function FXAAFilter2() {
      return _super.call(this, vertex6, fragment8) || this;
    }
    return FXAAFilter2;
  }(Filter);

  // node_modules/@pixi/filter-noise/lib/filter-noise.es.js
  /*!
   * @pixi/filter-noise - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/filter-noise is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics18 = function(d, b) {
    extendStatics18 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics18(d, b);
  };
  function __extends18(d, b) {
    extendStatics18(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var fragment9 = "precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n";
  var NoiseFilter = function(_super) {
    __extends18(NoiseFilter2, _super);
    function NoiseFilter2(noise, seed) {
      if (noise === void 0) {
        noise = 0.5;
      }
      if (seed === void 0) {
        seed = Math.random();
      }
      var _this = _super.call(this, defaultFilter, fragment9, {
        uNoise: 0,
        uSeed: 0
      }) || this;
      _this.noise = noise;
      _this.seed = seed;
      return _this;
    }
    Object.defineProperty(NoiseFilter2.prototype, "noise", {
      get: function() {
        return this.uniforms.uNoise;
      },
      set: function(value) {
        this.uniforms.uNoise = value;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(NoiseFilter2.prototype, "seed", {
      get: function() {
        return this.uniforms.uSeed;
      },
      set: function(value) {
        this.uniforms.uSeed = value;
      },
      enumerable: false,
      configurable: true
    });
    return NoiseFilter2;
  }(Filter);

  // node_modules/@pixi/mixin-cache-as-bitmap/lib/mixin-cache-as-bitmap.es.js
  /*!
   * @pixi/mixin-cache-as-bitmap - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  var _tempMatrix = new Matrix();
  DisplayObject.prototype._cacheAsBitmap = false;
  DisplayObject.prototype._cacheData = null;
  var CacheData = function() {
    function CacheData2() {
      this.textureCacheId = null;
      this.originalRender = null;
      this.originalRenderCanvas = null;
      this.originalCalculateBounds = null;
      this.originalGetLocalBounds = null;
      this.originalUpdateTransform = null;
      this.originalDestroy = null;
      this.originalMask = null;
      this.originalFilterArea = null;
      this.originalContainsPoint = null;
      this.sprite = null;
    }
    return CacheData2;
  }();
  Object.defineProperties(DisplayObject.prototype, {
    cacheAsBitmap: {
      get: function() {
        return this._cacheAsBitmap;
      },
      set: function(value) {
        if (this._cacheAsBitmap === value) {
          return;
        }
        this._cacheAsBitmap = value;
        var data;
        if (value) {
          if (!this._cacheData) {
            this._cacheData = new CacheData();
          }
          data = this._cacheData;
          data.originalRender = this.render;
          data.originalRenderCanvas = this.renderCanvas;
          data.originalUpdateTransform = this.updateTransform;
          data.originalCalculateBounds = this.calculateBounds;
          data.originalGetLocalBounds = this.getLocalBounds;
          data.originalDestroy = this.destroy;
          data.originalContainsPoint = this.containsPoint;
          data.originalMask = this._mask;
          data.originalFilterArea = this.filterArea;
          this.render = this._renderCached;
          this.renderCanvas = this._renderCachedCanvas;
          this.destroy = this._cacheAsBitmapDestroy;
        } else {
          data = this._cacheData;
          if (data.sprite) {
            this._destroyCachedDisplayObject();
          }
          this.render = data.originalRender;
          this.renderCanvas = data.originalRenderCanvas;
          this.calculateBounds = data.originalCalculateBounds;
          this.getLocalBounds = data.originalGetLocalBounds;
          this.destroy = data.originalDestroy;
          this.updateTransform = data.originalUpdateTransform;
          this.containsPoint = data.originalContainsPoint;
          this._mask = data.originalMask;
          this.filterArea = data.originalFilterArea;
        }
      }
    }
  });
  DisplayObject.prototype._renderCached = function _renderCached(renderer) {
    if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {
      return;
    }
    this._initCachedDisplayObject(renderer);
    this._cacheData.sprite.transform._worldID = this.transform._worldID;
    this._cacheData.sprite.worldAlpha = this.worldAlpha;
    this._cacheData.sprite._render(renderer);
  };
  DisplayObject.prototype._initCachedDisplayObject = function _initCachedDisplayObject(renderer) {
    if (this._cacheData && this._cacheData.sprite) {
      return;
    }
    var cacheAlpha = this.alpha;
    this.alpha = 1;
    renderer.batch.flush();
    var bounds = this.getLocalBounds(null, true).clone();
    if (this.filters) {
      var padding = this.filters[0].padding;
      bounds.pad(padding);
    }
    bounds.ceil(settings.RESOLUTION);
    var cachedRenderTexture = renderer.renderTexture.current;
    var cachedSourceFrame = renderer.renderTexture.sourceFrame.clone();
    var cachedProjectionTransform = renderer.projection.transform;
    var renderTexture = RenderTexture.create({width: bounds.width, height: bounds.height});
    var textureCacheId = "cacheAsBitmap_" + uid();
    this._cacheData.textureCacheId = textureCacheId;
    BaseTexture.addToCache(renderTexture.baseTexture, textureCacheId);
    Texture.addToCache(renderTexture, textureCacheId);
    var m = this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-bounds.x, -bounds.y);
    this.render = this._cacheData.originalRender;
    renderer.render(this, renderTexture, true, m, false);
    renderer.projection.transform = cachedProjectionTransform;
    renderer.renderTexture.bind(cachedRenderTexture, cachedSourceFrame);
    this.render = this._renderCached;
    this.updateTransform = this.displayObjectUpdateTransform;
    this.calculateBounds = this._calculateCachedBounds;
    this.getLocalBounds = this._getCachedLocalBounds;
    this._mask = null;
    this.filterArea = null;
    var cachedSprite = new Sprite(renderTexture);
    cachedSprite.transform.worldTransform = this.transform.worldTransform;
    cachedSprite.anchor.x = -(bounds.x / bounds.width);
    cachedSprite.anchor.y = -(bounds.y / bounds.height);
    cachedSprite.alpha = cacheAlpha;
    cachedSprite._bounds = this._bounds;
    this._cacheData.sprite = cachedSprite;
    this.transform._parentID = -1;
    if (!this.parent) {
      this.enableTempParent();
      this.updateTransform();
      this.disableTempParent(null);
    } else {
      this.updateTransform();
    }
    this.containsPoint = cachedSprite.containsPoint.bind(cachedSprite);
  };
  DisplayObject.prototype._renderCachedCanvas = function _renderCachedCanvas(renderer) {
    if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {
      return;
    }
    this._initCachedDisplayObjectCanvas(renderer);
    this._cacheData.sprite.worldAlpha = this.worldAlpha;
    this._cacheData.sprite._renderCanvas(renderer);
  };
  DisplayObject.prototype._initCachedDisplayObjectCanvas = function _initCachedDisplayObjectCanvas(renderer) {
    if (this._cacheData && this._cacheData.sprite) {
      return;
    }
    var bounds = this.getLocalBounds(null, true);
    var cacheAlpha = this.alpha;
    this.alpha = 1;
    var cachedRenderTarget = renderer.context;
    var cachedProjectionTransform = renderer._projTransform;
    bounds.ceil(settings.RESOLUTION);
    var renderTexture = RenderTexture.create({width: bounds.width, height: bounds.height});
    var textureCacheId = "cacheAsBitmap_" + uid();
    this._cacheData.textureCacheId = textureCacheId;
    BaseTexture.addToCache(renderTexture.baseTexture, textureCacheId);
    Texture.addToCache(renderTexture, textureCacheId);
    var m = _tempMatrix;
    this.transform.localTransform.copyTo(m);
    m.invert();
    m.tx -= bounds.x;
    m.ty -= bounds.y;
    this.renderCanvas = this._cacheData.originalRenderCanvas;
    renderer.render(this, renderTexture, true, m, false);
    renderer.context = cachedRenderTarget;
    renderer._projTransform = cachedProjectionTransform;
    this.renderCanvas = this._renderCachedCanvas;
    this.updateTransform = this.displayObjectUpdateTransform;
    this.calculateBounds = this._calculateCachedBounds;
    this.getLocalBounds = this._getCachedLocalBounds;
    this._mask = null;
    this.filterArea = null;
    var cachedSprite = new Sprite(renderTexture);
    cachedSprite.transform.worldTransform = this.transform.worldTransform;
    cachedSprite.anchor.x = -(bounds.x / bounds.width);
    cachedSprite.anchor.y = -(bounds.y / bounds.height);
    cachedSprite.alpha = cacheAlpha;
    cachedSprite._bounds = this._bounds;
    this._cacheData.sprite = cachedSprite;
    this.transform._parentID = -1;
    if (!this.parent) {
      this.parent = renderer._tempDisplayObjectParent;
      this.updateTransform();
      this.parent = null;
    } else {
      this.updateTransform();
    }
    this.containsPoint = cachedSprite.containsPoint.bind(cachedSprite);
  };
  DisplayObject.prototype._calculateCachedBounds = function _calculateCachedBounds() {
    this._bounds.clear();
    this._cacheData.sprite.transform._worldID = this.transform._worldID;
    this._cacheData.sprite._calculateBounds();
    this._bounds.updateID = this._boundsID;
  };
  DisplayObject.prototype._getCachedLocalBounds = function _getCachedLocalBounds() {
    return this._cacheData.sprite.getLocalBounds(null);
  };
  DisplayObject.prototype._destroyCachedDisplayObject = function _destroyCachedDisplayObject() {
    this._cacheData.sprite._texture.destroy(true);
    this._cacheData.sprite = null;
    BaseTexture.removeFromCache(this._cacheData.textureCacheId);
    Texture.removeFromCache(this._cacheData.textureCacheId);
    this._cacheData.textureCacheId = null;
  };
  DisplayObject.prototype._cacheAsBitmapDestroy = function _cacheAsBitmapDestroy(options) {
    this.cacheAsBitmap = false;
    this.destroy(options);
  };

  // node_modules/@pixi/mixin-get-child-by-name/lib/mixin-get-child-by-name.es.js
  /*!
   * @pixi/mixin-get-child-by-name - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/mixin-get-child-by-name is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  DisplayObject.prototype.name = null;
  Container.prototype.getChildByName = function getChildByName(name, deep) {
    for (var i = 0, j = this.children.length; i < j; i++) {
      if (this.children[i].name === name) {
        return this.children[i];
      }
    }
    if (deep) {
      for (var i = 0, j = this.children.length; i < j; i++) {
        var child = this.children[i];
        if (!child.getChildByName) {
          continue;
        }
        var target = this.children[i].getChildByName(name, true);
        if (target) {
          return target;
        }
      }
    }
    return null;
  };

  // node_modules/@pixi/mixin-get-global-position/lib/mixin-get-global-position.es.js
  /*!
   * @pixi/mixin-get-global-position - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/mixin-get-global-position is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  DisplayObject.prototype.getGlobalPosition = function getGlobalPosition(point, skipUpdate) {
    if (point === void 0) {
      point = new Point();
    }
    if (skipUpdate === void 0) {
      skipUpdate = false;
    }
    if (this.parent) {
      this.parent.toGlobal(this.position, point, skipUpdate);
    } else {
      point.x = this.position.x;
      point.y = this.position.y;
    }
    return point;
  };

  // node_modules/@pixi/mesh-extras/lib/mesh-extras.es.js
  /*!
   * @pixi/mesh-extras - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/mesh-extras is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics19 = function(d, b) {
    extendStatics19 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics19(d, b);
  };
  function __extends19(d, b) {
    extendStatics19(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var PlaneGeometry = function(_super) {
    __extends19(PlaneGeometry2, _super);
    function PlaneGeometry2(width, height, segWidth, segHeight) {
      if (width === void 0) {
        width = 100;
      }
      if (height === void 0) {
        height = 100;
      }
      if (segWidth === void 0) {
        segWidth = 10;
      }
      if (segHeight === void 0) {
        segHeight = 10;
      }
      var _this = _super.call(this) || this;
      _this.segWidth = segWidth;
      _this.segHeight = segHeight;
      _this.width = width;
      _this.height = height;
      _this.build();
      return _this;
    }
    PlaneGeometry2.prototype.build = function() {
      var total = this.segWidth * this.segHeight;
      var verts = [];
      var uvs = [];
      var indices2 = [];
      var segmentsX = this.segWidth - 1;
      var segmentsY = this.segHeight - 1;
      var sizeX = this.width / segmentsX;
      var sizeY = this.height / segmentsY;
      for (var i = 0; i < total; i++) {
        var x = i % this.segWidth;
        var y = i / this.segWidth | 0;
        verts.push(x * sizeX, y * sizeY);
        uvs.push(x / segmentsX, y / segmentsY);
      }
      var totalSub = segmentsX * segmentsY;
      for (var i = 0; i < totalSub; i++) {
        var xpos = i % segmentsX;
        var ypos = i / segmentsX | 0;
        var value = ypos * this.segWidth + xpos;
        var value2 = ypos * this.segWidth + xpos + 1;
        var value3 = (ypos + 1) * this.segWidth + xpos;
        var value4 = (ypos + 1) * this.segWidth + xpos + 1;
        indices2.push(value, value2, value3, value2, value4, value3);
      }
      this.buffers[0].data = new Float32Array(verts);
      this.buffers[1].data = new Float32Array(uvs);
      this.indexBuffer.data = new Uint16Array(indices2);
      this.buffers[0].update();
      this.buffers[1].update();
      this.indexBuffer.update();
    };
    return PlaneGeometry2;
  }(MeshGeometry);
  var RopeGeometry = function(_super) {
    __extends19(RopeGeometry2, _super);
    function RopeGeometry2(width, points, textureScale) {
      if (width === void 0) {
        width = 200;
      }
      if (textureScale === void 0) {
        textureScale = 0;
      }
      var _this = _super.call(this, new Float32Array(points.length * 4), new Float32Array(points.length * 4), new Uint16Array((points.length - 1) * 6)) || this;
      _this.points = points;
      _this._width = width;
      _this.textureScale = textureScale;
      _this.build();
      return _this;
    }
    Object.defineProperty(RopeGeometry2.prototype, "width", {
      get: function() {
        return this._width;
      },
      enumerable: false,
      configurable: true
    });
    RopeGeometry2.prototype.build = function() {
      var points = this.points;
      if (!points) {
        return;
      }
      var vertexBuffer = this.getBuffer("aVertexPosition");
      var uvBuffer = this.getBuffer("aTextureCoord");
      var indexBuffer = this.getIndex();
      if (points.length < 1) {
        return;
      }
      if (vertexBuffer.data.length / 4 !== points.length) {
        vertexBuffer.data = new Float32Array(points.length * 4);
        uvBuffer.data = new Float32Array(points.length * 4);
        indexBuffer.data = new Uint16Array((points.length - 1) * 6);
      }
      var uvs = uvBuffer.data;
      var indices2 = indexBuffer.data;
      uvs[0] = 0;
      uvs[1] = 0;
      uvs[2] = 0;
      uvs[3] = 1;
      var amount = 0;
      var prev = points[0];
      var textureWidth = this._width * this.textureScale;
      var total = points.length;
      for (var i = 0; i < total; i++) {
        var index4 = i * 4;
        if (this.textureScale > 0) {
          var dx = prev.x - points[i].x;
          var dy = prev.y - points[i].y;
          var distance = Math.sqrt(dx * dx + dy * dy);
          prev = points[i];
          amount += distance / textureWidth;
        } else {
          amount = i / (total - 1);
        }
        uvs[index4] = amount;
        uvs[index4 + 1] = 0;
        uvs[index4 + 2] = amount;
        uvs[index4 + 3] = 1;
      }
      var indexCount = 0;
      for (var i = 0; i < total - 1; i++) {
        var index4 = i * 2;
        indices2[indexCount++] = index4;
        indices2[indexCount++] = index4 + 1;
        indices2[indexCount++] = index4 + 2;
        indices2[indexCount++] = index4 + 2;
        indices2[indexCount++] = index4 + 1;
        indices2[indexCount++] = index4 + 3;
      }
      uvBuffer.update();
      indexBuffer.update();
      this.updateVertices();
    };
    RopeGeometry2.prototype.updateVertices = function() {
      var points = this.points;
      if (points.length < 1) {
        return;
      }
      var lastPoint = points[0];
      var nextPoint;
      var perpX = 0;
      var perpY = 0;
      var vertices = this.buffers[0].data;
      var total = points.length;
      for (var i = 0; i < total; i++) {
        var point = points[i];
        var index4 = i * 4;
        if (i < points.length - 1) {
          nextPoint = points[i + 1];
        } else {
          nextPoint = point;
        }
        perpY = -(nextPoint.x - lastPoint.x);
        perpX = nextPoint.y - lastPoint.y;
        var perpLength = Math.sqrt(perpX * perpX + perpY * perpY);
        var num = this.textureScale > 0 ? this.textureScale * this._width / 2 : this._width / 2;
        perpX /= perpLength;
        perpY /= perpLength;
        perpX *= num;
        perpY *= num;
        vertices[index4] = point.x + perpX;
        vertices[index4 + 1] = point.y + perpY;
        vertices[index4 + 2] = point.x - perpX;
        vertices[index4 + 3] = point.y - perpY;
        lastPoint = point;
      }
      this.buffers[0].update();
    };
    RopeGeometry2.prototype.update = function() {
      if (this.textureScale > 0) {
        this.build();
      } else {
        this.updateVertices();
      }
    };
    return RopeGeometry2;
  }(MeshGeometry);
  var SimpleRope = function(_super) {
    __extends19(SimpleRope2, _super);
    function SimpleRope2(texture, points, textureScale) {
      if (textureScale === void 0) {
        textureScale = 0;
      }
      var _this = this;
      var ropeGeometry = new RopeGeometry(texture.height, points, textureScale);
      var meshMaterial = new MeshMaterial(texture);
      if (textureScale > 0) {
        texture.baseTexture.wrapMode = WRAP_MODES.REPEAT;
      }
      _this = _super.call(this, ropeGeometry, meshMaterial) || this;
      _this.autoUpdate = true;
      return _this;
    }
    SimpleRope2.prototype._render = function(renderer) {
      var geometry = this.geometry;
      if (this.autoUpdate || geometry._width !== this.shader.texture.height) {
        geometry._width = this.shader.texture.height;
        geometry.update();
      }
      _super.prototype._render.call(this, renderer);
    };
    return SimpleRope2;
  }(Mesh);
  var SimplePlane = function(_super) {
    __extends19(SimplePlane2, _super);
    function SimplePlane2(texture, verticesX, verticesY) {
      var _this = this;
      var planeGeometry = new PlaneGeometry(texture.width, texture.height, verticesX, verticesY);
      var meshMaterial = new MeshMaterial(Texture.WHITE);
      _this = _super.call(this, planeGeometry, meshMaterial) || this;
      _this.texture = texture;
      return _this;
    }
    SimplePlane2.prototype.textureUpdated = function() {
      this._textureID = this.shader.texture._updateID;
      var geometry = this.geometry;
      geometry.width = this.shader.texture.width;
      geometry.height = this.shader.texture.height;
      geometry.build();
    };
    Object.defineProperty(SimplePlane2.prototype, "texture", {
      get: function() {
        return this.shader.texture;
      },
      set: function(value) {
        if (this.shader.texture === value) {
          return;
        }
        this.shader.texture = value;
        this._textureID = -1;
        if (value.baseTexture.valid) {
          this.textureUpdated();
        } else {
          value.once("update", this.textureUpdated, this);
        }
      },
      enumerable: false,
      configurable: true
    });
    SimplePlane2.prototype._render = function(renderer) {
      if (this._textureID !== this.shader.texture._updateID) {
        this.textureUpdated();
      }
      _super.prototype._render.call(this, renderer);
    };
    SimplePlane2.prototype.destroy = function(options) {
      this.shader.texture.off("update", this.textureUpdated, this);
      _super.prototype.destroy.call(this, options);
    };
    return SimplePlane2;
  }(Mesh);
  var SimpleMesh = function(_super) {
    __extends19(SimpleMesh2, _super);
    function SimpleMesh2(texture, vertices, uvs, indices2, drawMode) {
      if (texture === void 0) {
        texture = Texture.EMPTY;
      }
      var _this = this;
      var geometry = new MeshGeometry(vertices, uvs, indices2);
      geometry.getBuffer("aVertexPosition").static = false;
      var meshMaterial = new MeshMaterial(texture);
      _this = _super.call(this, geometry, meshMaterial, null, drawMode) || this;
      _this.autoUpdate = true;
      return _this;
    }
    Object.defineProperty(SimpleMesh2.prototype, "vertices", {
      get: function() {
        return this.geometry.getBuffer("aVertexPosition").data;
      },
      set: function(value) {
        this.geometry.getBuffer("aVertexPosition").data = value;
      },
      enumerable: false,
      configurable: true
    });
    SimpleMesh2.prototype._render = function(renderer) {
      if (this.autoUpdate) {
        this.geometry.getBuffer("aVertexPosition").update();
      }
      _super.prototype._render.call(this, renderer);
    };
    return SimpleMesh2;
  }(Mesh);
  var DEFAULT_BORDER_SIZE = 10;
  var NineSlicePlane = function(_super) {
    __extends19(NineSlicePlane2, _super);
    function NineSlicePlane2(texture, leftWidth, topHeight, rightWidth, bottomHeight) {
      if (leftWidth === void 0) {
        leftWidth = DEFAULT_BORDER_SIZE;
      }
      if (topHeight === void 0) {
        topHeight = DEFAULT_BORDER_SIZE;
      }
      if (rightWidth === void 0) {
        rightWidth = DEFAULT_BORDER_SIZE;
      }
      if (bottomHeight === void 0) {
        bottomHeight = DEFAULT_BORDER_SIZE;
      }
      var _this = _super.call(this, Texture.WHITE, 4, 4) || this;
      _this._origWidth = texture.orig.width;
      _this._origHeight = texture.orig.height;
      _this._width = _this._origWidth;
      _this._height = _this._origHeight;
      _this._leftWidth = leftWidth;
      _this._rightWidth = rightWidth;
      _this._topHeight = topHeight;
      _this._bottomHeight = bottomHeight;
      _this.texture = texture;
      return _this;
    }
    NineSlicePlane2.prototype.textureUpdated = function() {
      this._textureID = this.shader.texture._updateID;
      this._refresh();
    };
    Object.defineProperty(NineSlicePlane2.prototype, "vertices", {
      get: function() {
        return this.geometry.getBuffer("aVertexPosition").data;
      },
      set: function(value) {
        this.geometry.getBuffer("aVertexPosition").data = value;
      },
      enumerable: false,
      configurable: true
    });
    NineSlicePlane2.prototype.updateHorizontalVertices = function() {
      var vertices = this.vertices;
      var scale = this._getMinScale();
      vertices[9] = vertices[11] = vertices[13] = vertices[15] = this._topHeight * scale;
      vertices[17] = vertices[19] = vertices[21] = vertices[23] = this._height - this._bottomHeight * scale;
      vertices[25] = vertices[27] = vertices[29] = vertices[31] = this._height;
    };
    NineSlicePlane2.prototype.updateVerticalVertices = function() {
      var vertices = this.vertices;
      var scale = this._getMinScale();
      vertices[2] = vertices[10] = vertices[18] = vertices[26] = this._leftWidth * scale;
      vertices[4] = vertices[12] = vertices[20] = vertices[28] = this._width - this._rightWidth * scale;
      vertices[6] = vertices[14] = vertices[22] = vertices[30] = this._width;
    };
    NineSlicePlane2.prototype._getMinScale = function() {
      var w = this._leftWidth + this._rightWidth;
      var scaleW = this._width > w ? 1 : this._width / w;
      var h = this._topHeight + this._bottomHeight;
      var scaleH = this._height > h ? 1 : this._height / h;
      var scale = Math.min(scaleW, scaleH);
      return scale;
    };
    Object.defineProperty(NineSlicePlane2.prototype, "width", {
      get: function() {
        return this._width;
      },
      set: function(value) {
        this._width = value;
        this._refresh();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(NineSlicePlane2.prototype, "height", {
      get: function() {
        return this._height;
      },
      set: function(value) {
        this._height = value;
        this._refresh();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(NineSlicePlane2.prototype, "leftWidth", {
      get: function() {
        return this._leftWidth;
      },
      set: function(value) {
        this._leftWidth = value;
        this._refresh();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(NineSlicePlane2.prototype, "rightWidth", {
      get: function() {
        return this._rightWidth;
      },
      set: function(value) {
        this._rightWidth = value;
        this._refresh();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(NineSlicePlane2.prototype, "topHeight", {
      get: function() {
        return this._topHeight;
      },
      set: function(value) {
        this._topHeight = value;
        this._refresh();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(NineSlicePlane2.prototype, "bottomHeight", {
      get: function() {
        return this._bottomHeight;
      },
      set: function(value) {
        this._bottomHeight = value;
        this._refresh();
      },
      enumerable: false,
      configurable: true
    });
    NineSlicePlane2.prototype._refresh = function() {
      var texture = this.texture;
      var uvs = this.geometry.buffers[1].data;
      this._origWidth = texture.orig.width;
      this._origHeight = texture.orig.height;
      var _uvw = 1 / this._origWidth;
      var _uvh = 1 / this._origHeight;
      uvs[0] = uvs[8] = uvs[16] = uvs[24] = 0;
      uvs[1] = uvs[3] = uvs[5] = uvs[7] = 0;
      uvs[6] = uvs[14] = uvs[22] = uvs[30] = 1;
      uvs[25] = uvs[27] = uvs[29] = uvs[31] = 1;
      uvs[2] = uvs[10] = uvs[18] = uvs[26] = _uvw * this._leftWidth;
      uvs[4] = uvs[12] = uvs[20] = uvs[28] = 1 - _uvw * this._rightWidth;
      uvs[9] = uvs[11] = uvs[13] = uvs[15] = _uvh * this._topHeight;
      uvs[17] = uvs[19] = uvs[21] = uvs[23] = 1 - _uvh * this._bottomHeight;
      this.updateHorizontalVertices();
      this.updateVerticalVertices();
      this.geometry.buffers[0].update();
      this.geometry.buffers[1].update();
    };
    return NineSlicePlane2;
  }(SimplePlane);

  // node_modules/@pixi/sprite-animated/lib/sprite-animated.es.js
  /*!
   * @pixi/sprite-animated - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * @pixi/sprite-animated is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics20 = function(d, b) {
    extendStatics20 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics20(d, b);
  };
  function __extends20(d, b) {
    extendStatics20(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var AnimatedSprite = function(_super) {
    __extends20(AnimatedSprite2, _super);
    function AnimatedSprite2(textures, autoUpdate) {
      if (autoUpdate === void 0) {
        autoUpdate = true;
      }
      var _this = _super.call(this, textures[0] instanceof Texture ? textures[0] : textures[0].texture) || this;
      _this._textures = null;
      _this._durations = null;
      _this._autoUpdate = autoUpdate;
      _this._isConnectedToTicker = false;
      _this.animationSpeed = 1;
      _this.loop = true;
      _this.updateAnchor = false;
      _this.onComplete = null;
      _this.onFrameChange = null;
      _this.onLoop = null;
      _this._currentTime = 0;
      _this._playing = false;
      _this._previousFrame = null;
      _this.textures = textures;
      return _this;
    }
    AnimatedSprite2.prototype.stop = function() {
      if (!this._playing) {
        return;
      }
      this._playing = false;
      if (this._autoUpdate && this._isConnectedToTicker) {
        Ticker.shared.remove(this.update, this);
        this._isConnectedToTicker = false;
      }
    };
    AnimatedSprite2.prototype.play = function() {
      if (this._playing) {
        return;
      }
      this._playing = true;
      if (this._autoUpdate && !this._isConnectedToTicker) {
        Ticker.shared.add(this.update, this, UPDATE_PRIORITY.HIGH);
        this._isConnectedToTicker = true;
      }
    };
    AnimatedSprite2.prototype.gotoAndStop = function(frameNumber) {
      this.stop();
      var previousFrame = this.currentFrame;
      this._currentTime = frameNumber;
      if (previousFrame !== this.currentFrame) {
        this.updateTexture();
      }
    };
    AnimatedSprite2.prototype.gotoAndPlay = function(frameNumber) {
      var previousFrame = this.currentFrame;
      this._currentTime = frameNumber;
      if (previousFrame !== this.currentFrame) {
        this.updateTexture();
      }
      this.play();
    };
    AnimatedSprite2.prototype.update = function(deltaTime) {
      var elapsed = this.animationSpeed * deltaTime;
      var previousFrame = this.currentFrame;
      if (this._durations !== null) {
        var lag = this._currentTime % 1 * this._durations[this.currentFrame];
        lag += elapsed / 60 * 1e3;
        while (lag < 0) {
          this._currentTime--;
          lag += this._durations[this.currentFrame];
        }
        var sign2 = Math.sign(this.animationSpeed * deltaTime);
        this._currentTime = Math.floor(this._currentTime);
        while (lag >= this._durations[this.currentFrame]) {
          lag -= this._durations[this.currentFrame] * sign2;
          this._currentTime += sign2;
        }
        this._currentTime += lag / this._durations[this.currentFrame];
      } else {
        this._currentTime += elapsed;
      }
      if (this._currentTime < 0 && !this.loop) {
        this.gotoAndStop(0);
        if (this.onComplete) {
          this.onComplete();
        }
      } else if (this._currentTime >= this._textures.length && !this.loop) {
        this.gotoAndStop(this._textures.length - 1);
        if (this.onComplete) {
          this.onComplete();
        }
      } else if (previousFrame !== this.currentFrame) {
        if (this.loop && this.onLoop) {
          if (this.animationSpeed > 0 && this.currentFrame < previousFrame) {
            this.onLoop();
          } else if (this.animationSpeed < 0 && this.currentFrame > previousFrame) {
            this.onLoop();
          }
        }
        this.updateTexture();
      }
    };
    AnimatedSprite2.prototype.updateTexture = function() {
      var currentFrame = this.currentFrame;
      if (this._previousFrame === currentFrame) {
        return;
      }
      this._previousFrame = currentFrame;
      this._texture = this._textures[currentFrame];
      this._textureID = -1;
      this._textureTrimmedID = -1;
      this._cachedTint = 16777215;
      this.uvs = this._texture._uvs.uvsFloat32;
      if (this.updateAnchor) {
        this._anchor.copyFrom(this._texture.defaultAnchor);
      }
      if (this.onFrameChange) {
        this.onFrameChange(this.currentFrame);
      }
    };
    AnimatedSprite2.prototype.destroy = function(options) {
      this.stop();
      _super.prototype.destroy.call(this, options);
      this.onComplete = null;
      this.onFrameChange = null;
      this.onLoop = null;
    };
    AnimatedSprite2.fromFrames = function(frames) {
      var textures = [];
      for (var i = 0; i < frames.length; ++i) {
        textures.push(Texture.from(frames[i]));
      }
      return new AnimatedSprite2(textures);
    };
    AnimatedSprite2.fromImages = function(images) {
      var textures = [];
      for (var i = 0; i < images.length; ++i) {
        textures.push(Texture.from(images[i]));
      }
      return new AnimatedSprite2(textures);
    };
    Object.defineProperty(AnimatedSprite2.prototype, "totalFrames", {
      get: function() {
        return this._textures.length;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(AnimatedSprite2.prototype, "textures", {
      get: function() {
        return this._textures;
      },
      set: function(value) {
        if (value[0] instanceof Texture) {
          this._textures = value;
          this._durations = null;
        } else {
          this._textures = [];
          this._durations = [];
          for (var i = 0; i < value.length; i++) {
            this._textures.push(value[i].texture);
            this._durations.push(value[i].time);
          }
        }
        this._previousFrame = null;
        this.gotoAndStop(0);
        this.updateTexture();
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(AnimatedSprite2.prototype, "currentFrame", {
      get: function() {
        var currentFrame = Math.floor(this._currentTime) % this._textures.length;
        if (currentFrame < 0) {
          currentFrame += this._textures.length;
        }
        return currentFrame;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(AnimatedSprite2.prototype, "playing", {
      get: function() {
        return this._playing;
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(AnimatedSprite2.prototype, "autoUpdate", {
      get: function() {
        return this._autoUpdate;
      },
      set: function(value) {
        if (value !== this._autoUpdate) {
          this._autoUpdate = value;
          if (!this._autoUpdate && this._isConnectedToTicker) {
            Ticker.shared.remove(this.update, this);
            this._isConnectedToTicker = false;
          } else if (this._autoUpdate && !this._isConnectedToTicker && this._playing) {
            Ticker.shared.add(this.update, this);
            this._isConnectedToTicker = true;
          }
        }
      },
      enumerable: false,
      configurable: true
    });
    return AnimatedSprite2;
  }(Sprite);

  // node_modules/pixi.js/lib/pixi.es.js
  /*!
   * pixi.js - v5.3.7
   * Compiled Tue, 29 Dec 2020 19:30:11 UTC
   *
   * pixi.js is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
  var extendStatics21 = function(d, b) {
    extendStatics21 = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) {
        if (b2.hasOwnProperty(p)) {
          d2[p] = b2[p];
        }
      }
    };
    return extendStatics21(d, b);
  };
  function __extends21(d, b) {
    extendStatics21(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  var v5 = "5.0.0";
  function useDeprecated() {
    var PIXI8 = this;
    Object.defineProperties(PIXI8, {
      SVG_SIZE: {
        get: function() {
          deprecation(v5, "PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE");
          return PIXI8.SVGResource.SVG_SIZE;
        }
      },
      TransformStatic: {
        get: function() {
          deprecation(v5, "PIXI.TransformStatic class has been removed, use PIXI.Transform");
          return PIXI8.Transform;
        }
      },
      TransformBase: {
        get: function() {
          deprecation(v5, "PIXI.TransformBase class has been removed, use PIXI.Transform");
          return PIXI8.Transform;
        }
      },
      TRANSFORM_MODE: {
        get: function() {
          deprecation(v5, "PIXI.TRANSFORM_MODE property has been removed");
          return {STATIC: 0, DYNAMIC: 1};
        }
      },
      WebGLRenderer: {
        get: function() {
          deprecation(v5, "PIXI.WebGLRenderer class has moved to PIXI.Renderer");
          return PIXI8.Renderer;
        }
      },
      CanvasRenderTarget: {
        get: function() {
          deprecation(v5, "PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget");
          return PIXI8.utils.CanvasRenderTarget;
        }
      },
      loader: {
        get: function() {
          deprecation(v5, "PIXI.loader instance has moved to PIXI.Loader.shared");
          return PIXI8.Loader.shared;
        }
      },
      FilterManager: {
        get: function() {
          deprecation(v5, "PIXI.FilterManager class has moved to PIXI.systems.FilterSystem");
          return PIXI8.systems.FilterSystem;
        }
      },
      CanvasTinter: {
        get: function() {
          deprecation("5.2.0", "PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils");
          return PIXI8.canvasUtils;
        }
      },
      GroupD8: {
        get: function() {
          deprecation("5.2.0", "PIXI.GroupD8 namespace has moved to PIXI.groupD8");
          return PIXI8.groupD8;
        }
      }
    });
    PIXI8.accessibility = {};
    Object.defineProperties(PIXI8.accessibility, {
      AccessibilityManager: {
        get: function() {
          deprecation("5.3.0", "PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager");
          return PIXI8.AccessibilityManager;
        }
      }
    });
    PIXI8.interaction = {};
    Object.defineProperties(PIXI8.interaction, {
      InteractionManager: {
        get: function() {
          deprecation("5.3.0", "PIXI.interaction.InteractionManager moved to PIXI.InteractionManager");
          return PIXI8.InteractionManager;
        }
      },
      InteractionData: {
        get: function() {
          deprecation("5.3.0", "PIXI.interaction.InteractionData moved to PIXI.InteractionData");
          return PIXI8.InteractionData;
        }
      },
      InteractionEvent: {
        get: function() {
          deprecation("5.3.0", "PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent");
          return PIXI8.InteractionEvent;
        }
      }
    });
    PIXI8.prepare = {};
    Object.defineProperties(PIXI8.prepare, {
      BasePrepare: {
        get: function() {
          deprecation("5.2.1", "PIXI.prepare.BasePrepare moved to PIXI.BasePrepare");
          return PIXI8.BasePrepare;
        }
      },
      Prepare: {
        get: function() {
          deprecation("5.2.1", "PIXI.prepare.Prepare moved to PIXI.Prepare");
          return PIXI8.Prepare;
        }
      },
      CanvasPrepare: {
        get: function() {
          deprecation("5.2.1", "PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare");
          return PIXI8.CanvasPrepare;
        }
      }
    });
    PIXI8.extract = {};
    Object.defineProperties(PIXI8.extract, {
      Extract: {
        get: function() {
          deprecation("5.2.1", "PIXI.extract.Extract moved to PIXI.Extract");
          return PIXI8.Extract;
        }
      },
      CanvasExtract: {
        get: function() {
          deprecation("5.2.1", "PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract");
          return PIXI8.CanvasExtract;
        }
      }
    });
    PIXI8.extras = {};
    Object.defineProperties(PIXI8.extras, {
      TilingSprite: {
        get: function() {
          deprecation(v5, "PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite");
          return PIXI8.TilingSprite;
        }
      },
      TilingSpriteRenderer: {
        get: function() {
          deprecation(v5, "PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer");
          return PIXI8.TilingSpriteRenderer;
        }
      },
      AnimatedSprite: {
        get: function() {
          deprecation(v5, "PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite");
          return PIXI8.AnimatedSprite;
        }
      },
      BitmapText: {
        get: function() {
          deprecation(v5, "PIXI.extras.BitmapText class has moved to PIXI.BitmapText");
          return PIXI8.BitmapText;
        }
      }
    });
    PIXI8.TilingSprite.fromFrame = function fromFrame(frameId, width, height) {
      deprecation("5.3.0", "TilingSprite.fromFrame is deprecated, use TilingSprite.from");
      return PIXI8.TilingSprite.from(frameId, {width, height});
    };
    PIXI8.TilingSprite.fromImage = function fromImage(imageId, width, height, options) {
      if (options === void 0) {
        options = {};
      }
      deprecation("5.3.0", "TilingSprite.fromImage is deprecated, use TilingSprite.from");
      if (options && typeof options !== "object") {
        options = {
          scaleMode: arguments[4],
          resourceOptions: {
            crossorigin: arguments[3]
          }
        };
      }
      options.width = width;
      options.height = height;
      return PIXI8.TilingSprite.from(imageId, options);
    };
    Object.defineProperties(PIXI8.utils, {
      getSvgSize: {
        get: function() {
          deprecation(v5, "PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize");
          return PIXI8.resources.SVGResource.getSize;
        }
      }
    });
    PIXI8.mesh = {};
    Object.defineProperties(PIXI8.mesh, {
      Mesh: {
        get: function() {
          deprecation(v5, "PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh");
          return PIXI8.SimpleMesh;
        }
      },
      NineSlicePlane: {
        get: function() {
          deprecation(v5, "PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane");
          return PIXI8.NineSlicePlane;
        }
      },
      Plane: {
        get: function() {
          deprecation(v5, "PIXI.mesh.Plane class has moved to PIXI.SimplePlane");
          return PIXI8.SimplePlane;
        }
      },
      Rope: {
        get: function() {
          deprecation(v5, "PIXI.mesh.Rope class has moved to PIXI.SimpleRope");
          return PIXI8.SimpleRope;
        }
      },
      RawMesh: {
        get: function() {
          deprecation(v5, "PIXI.mesh.RawMesh class has moved to PIXI.Mesh");
          return PIXI8.Mesh;
        }
      },
      CanvasMeshRenderer: {
        get: function() {
          deprecation(v5, "PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer");
          return PIXI8.CanvasMeshRenderer;
        }
      },
      MeshRenderer: {
        get: function() {
          deprecation(v5, "PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer");
          return PIXI8.MeshRenderer;
        }
      }
    });
    PIXI8.particles = {};
    Object.defineProperties(PIXI8.particles, {
      ParticleContainer: {
        get: function() {
          deprecation(v5, "PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer");
          return PIXI8.ParticleContainer;
        }
      },
      ParticleRenderer: {
        get: function() {
          deprecation(v5, "PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer");
          return PIXI8.ParticleRenderer;
        }
      }
    });
    PIXI8.ticker = {};
    Object.defineProperties(PIXI8.ticker, {
      Ticker: {
        get: function() {
          deprecation(v5, "PIXI.ticker.Ticker class has moved to PIXI.Ticker");
          return PIXI8.Ticker;
        }
      },
      shared: {
        get: function() {
          deprecation(v5, "PIXI.ticker.shared instance has moved to PIXI.Ticker.shared");
          return PIXI8.Ticker.shared;
        }
      }
    });
    PIXI8.loaders = {};
    Object.defineProperties(PIXI8.loaders, {
      Loader: {
        get: function() {
          deprecation(v5, "PIXI.loaders.Loader class has moved to PIXI.Loader");
          return PIXI8.Loader;
        }
      },
      Resource: {
        get: function() {
          deprecation(v5, "PIXI.loaders.Resource class has moved to PIXI.LoaderResource");
          return PIXI8.LoaderResource;
        }
      },
      bitmapFontParser: {
        get: function() {
          deprecation(v5, "PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use");
          return PIXI8.BitmapFontLoader.use;
        }
      },
      parseBitmapFontData: {
        get: function() {
          deprecation(v5, "PIXI.loaders.parseBitmapFontData function has removed");
        }
      },
      spritesheetParser: {
        get: function() {
          deprecation(v5, "PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use");
          return PIXI8.SpritesheetLoader.use;
        }
      },
      getResourcePath: {
        get: function() {
          deprecation(v5, "PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath");
          return PIXI8.SpritesheetLoader.getResourcePath;
        }
      }
    });
    PIXI8.Loader.addPixiMiddleware = function addPixiMiddleware(middleware) {
      deprecation(v5, "PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin");
      return PIXI8.loaders.Loader.registerPlugin({use: middleware()});
    };
    var eventToSignal = function(event) {
      return "on" + event.charAt(0).toUpperCase() + event.slice(1);
    };
    Object.assign(PIXI8.Loader.prototype, {
      on: function(event) {
        var signal = eventToSignal(event);
        deprecation(v5, "PIXI.Loader#on is completely deprecated, use PIXI.Loader#" + signal + ".add");
      },
      once: function(event) {
        var signal = eventToSignal(event);
        deprecation(v5, "PIXI.Loader#once is completely deprecated, use PIXI.Loader#" + signal + ".once");
      },
      off: function(event) {
        var signal = eventToSignal(event);
        deprecation(v5, "PIXI.Loader#off is completely deprecated, use PIXI.Loader#" + signal + ".detach");
      }
    });
    Object.defineProperty(PIXI8.extract, "WebGLExtract", {
      get: function() {
        deprecation(v5, "PIXI.extract.WebGLExtract method has moved to PIXI.Extract");
        return PIXI8.Extract;
      }
    });
    Object.defineProperty(PIXI8.prepare, "WebGLPrepare", {
      get: function() {
        deprecation(v5, "PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare");
        return PIXI8.Prepare;
      }
    });
    PIXI8.Container.prototype._renderWebGL = function _renderWebGL(renderer) {
      deprecation(v5, "PIXI.Container._renderWebGL method has moved to PIXI.Container._render");
      this._render(renderer);
    };
    PIXI8.Container.prototype.renderWebGL = function renderWebGL(renderer) {
      deprecation(v5, "PIXI.Container.renderWebGL method has moved to PIXI.Container.render");
      this.render(renderer);
    };
    PIXI8.DisplayObject.prototype.renderWebGL = function renderWebGL(renderer) {
      deprecation(v5, "PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render");
      this.render(renderer);
    };
    PIXI8.Container.prototype.renderAdvancedWebGL = function renderAdvancedWebGL(renderer) {
      deprecation(v5, "PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced");
      this.renderAdvanced(renderer);
    };
    Object.defineProperties(PIXI8.settings, {
      TRANSFORM_MODE: {
        get: function() {
          deprecation(v5, "PIXI.settings.TRANSFORM_MODE property has been removed");
          return 0;
        },
        set: function() {
          deprecation(v5, "PIXI.settings.TRANSFORM_MODE property has been removed");
        }
      }
    });
    var BaseTextureAny = PIXI8.BaseTexture;
    BaseTextureAny.prototype.loadSource = function loadSource(image) {
      deprecation(v5, "PIXI.BaseTexture.loadSource method has been deprecated");
      var resource = PIXI8.resources.autoDetectResource(image);
      resource.internal = true;
      this.setResource(resource);
      this.update();
    };
    var baseTextureIdDeprecation = false;
    Object.defineProperties(BaseTextureAny.prototype, {
      hasLoaded: {
        get: function() {
          deprecation(v5, "PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid");
          return this.valid;
        }
      },
      imageUrl: {
        get: function() {
          var _a2;
          deprecation(v5, "PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url");
          return (_a2 = this.resource) === null || _a2 === void 0 ? void 0 : _a2.url;
        },
        set: function(imageUrl) {
          deprecation(v5, "PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url");
          if (this.resource) {
            this.resource.url = imageUrl;
          }
        }
      },
      source: {
        get: function() {
          deprecation(v5, "PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`");
          return this.resource.source;
        },
        set: function(source) {
          deprecation(v5, "PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture.");
          if (this.resource) {
            this.resource.source = source;
          }
        }
      },
      premultiplyAlpha: {
        get: function() {
          deprecation("5.2.0", "PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`");
          return this.alphaMode !== 0;
        },
        set: function(value) {
          deprecation("5.2.0", "PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`");
          this.alphaMode = Number(value);
        }
      },
      _id: {
        get: function() {
          if (!baseTextureIdDeprecation) {
            deprecation("5.2.0", "PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`");
            baseTextureIdDeprecation = true;
          }
          return this._batchLocation;
        },
        set: function(value) {
          this._batchLocation = value;
        }
      }
    });
    BaseTextureAny.fromImage = function fromImage(canvas2, crossorigin, scaleMode, scale) {
      deprecation(v5, "PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");
      var resourceOptions = {scale, crossorigin};
      return BaseTextureAny.from(canvas2, {scaleMode, resourceOptions});
    };
    BaseTextureAny.fromCanvas = function fromCanvas(canvas2, scaleMode) {
      deprecation(v5, "PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from");
      return BaseTextureAny.from(canvas2, {scaleMode});
    };
    BaseTextureAny.fromSVG = function fromSVG(canvas2, crossorigin, scaleMode, scale) {
      deprecation(v5, "PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");
      var resourceOptions = {scale, crossorigin};
      return BaseTextureAny.from(canvas2, {scaleMode, resourceOptions});
    };
    Object.defineProperties(PIXI8.resources.ImageResource.prototype, {
      premultiplyAlpha: {
        get: function() {
          deprecation("5.2.0", "PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`");
          return this.alphaMode !== 0;
        },
        set: function(value) {
          deprecation("5.2.0", "PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`");
          this.alphaMode = Number(value);
        }
      }
    });
    PIXI8.Point.prototype.copy = function copy(p) {
      deprecation(v5, "PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom");
      return this.copyFrom(p);
    };
    PIXI8.ObservablePoint.prototype.copy = function copy(p) {
      deprecation(v5, "PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom");
      return this.copyFrom(p);
    };
    PIXI8.Rectangle.prototype.copy = function copy(p) {
      deprecation(v5, "PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom");
      return this.copyFrom(p);
    };
    PIXI8.Matrix.prototype.copy = function copy(p) {
      deprecation(v5, "PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo");
      return this.copyTo(p);
    };
    PIXI8.systems.StateSystem.prototype.setState = function setState(s) {
      deprecation("v5.1.0", "StateSystem.setState has been renamed to StateSystem.set");
      return this.set(s);
    };
    Object.assign(PIXI8.systems.FilterSystem.prototype, {
      getRenderTarget: function(_clear, resolution) {
        deprecation(v5, "PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture");
        return this.getFilterTexture(null, resolution);
      },
      returnRenderTarget: function(renderTexture) {
        deprecation(v5, "PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture");
        this.returnFilterTexture(renderTexture);
      },
      calculateScreenSpaceMatrix: function(outputMatrix) {
        deprecation(v5, "PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");
        var mappedMatrix = outputMatrix.identity();
        var _a2 = this.activeState, sourceFrame = _a2.sourceFrame, destinationFrame = _a2.destinationFrame;
        mappedMatrix.translate(sourceFrame.x / destinationFrame.width, sourceFrame.y / destinationFrame.height);
        mappedMatrix.scale(destinationFrame.width, destinationFrame.height);
        return mappedMatrix;
      },
      calculateNormalizedScreenSpaceMatrix: function(outputMatrix) {
        deprecation(v5, "PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");
        var _a2 = this.activeState, sourceFrame = _a2.sourceFrame, destinationFrame = _a2.destinationFrame;
        var mappedMatrix = outputMatrix.identity();
        mappedMatrix.translate(sourceFrame.x / destinationFrame.width, sourceFrame.y / destinationFrame.height);
        var translateScaleX = destinationFrame.width / sourceFrame.width;
        var translateScaleY = destinationFrame.height / sourceFrame.height;
        mappedMatrix.scale(translateScaleX, translateScaleY);
        return mappedMatrix;
      }
    });
    Object.defineProperties(PIXI8.RenderTexture.prototype, {
      sourceFrame: {
        get: function() {
          deprecation(v5, "PIXI.RenderTexture.sourceFrame property has been removed");
          return this.filterFrame;
        }
      },
      size: {
        get: function() {
          deprecation(v5, "PIXI.RenderTexture.size property has been removed");
          return this._frame;
        }
      }
    });
    var BlurXFilter = function(_super) {
      __extends21(BlurXFilter2, _super);
      function BlurXFilter2(strength, quality, resolution, kernelSize) {
        var _this = this;
        deprecation(v5, "PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass");
        _this = _super.call(this, true, strength, quality, resolution, kernelSize) || this;
        return _this;
      }
      return BlurXFilter2;
    }(PIXI8.filters.BlurFilterPass);
    var BlurYFilter = function(_super) {
      __extends21(BlurYFilter2, _super);
      function BlurYFilter2(strength, quality, resolution, kernelSize) {
        var _this = this;
        deprecation(v5, "PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass");
        _this = _super.call(this, false, strength, quality, resolution, kernelSize) || this;
        return _this;
      }
      return BlurYFilter2;
    }(PIXI8.filters.BlurFilterPass);
    Object.assign(PIXI8.filters, {
      BlurXFilter,
      BlurYFilter
    });
    var SpriteAny = PIXI8.Sprite, TextureAny = PIXI8.Texture, GraphicsAny = PIXI8.Graphics;
    if (!GraphicsAny.prototype.generateCanvasTexture) {
      GraphicsAny.prototype.generateCanvasTexture = function generateCanvasTexture() {
        deprecation(v5, 'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"');
      };
    }
    Object.defineProperty(GraphicsAny.prototype, "graphicsData", {
      get: function() {
        deprecation(v5, "PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData");
        return this.geometry.graphicsData;
      }
    });
    function spriteFrom(name, source, crossorigin, scaleMode) {
      deprecation(v5, "PIXI.Sprite." + name + " method is deprecated, use PIXI.Sprite.from");
      return SpriteAny.from(source, {
        resourceOptions: {
          scale: scaleMode,
          crossorigin
        }
      });
    }
    SpriteAny.fromImage = spriteFrom.bind(null, "fromImage");
    SpriteAny.fromSVG = spriteFrom.bind(null, "fromSVG");
    SpriteAny.fromCanvas = spriteFrom.bind(null, "fromCanvas");
    SpriteAny.fromVideo = spriteFrom.bind(null, "fromVideo");
    SpriteAny.fromFrame = spriteFrom.bind(null, "fromFrame");
    function textureFrom(name, source, crossorigin, scaleMode) {
      deprecation(v5, "PIXI.Texture." + name + " method is deprecated, use PIXI.Texture.from");
      return TextureAny.from(source, {
        resourceOptions: {
          scale: scaleMode,
          crossorigin
        }
      });
    }
    TextureAny.fromImage = textureFrom.bind(null, "fromImage");
    TextureAny.fromSVG = textureFrom.bind(null, "fromSVG");
    TextureAny.fromCanvas = textureFrom.bind(null, "fromCanvas");
    TextureAny.fromVideo = textureFrom.bind(null, "fromVideo");
    TextureAny.fromFrame = textureFrom.bind(null, "fromFrame");
    Object.defineProperty(PIXI8.AbstractRenderer.prototype, "autoResize", {
      get: function() {
        deprecation(v5, "PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity");
        return this.autoDensity;
      },
      set: function(value) {
        deprecation(v5, "PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity");
        this.autoDensity = value;
      }
    });
    Object.defineProperty(PIXI8.Renderer.prototype, "textureManager", {
      get: function() {
        deprecation(v5, "PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture");
        return this.texture;
      }
    });
    PIXI8.utils.mixins = {
      mixin: function() {
        deprecation(v5, "PIXI.utils.mixins.mixin function is no longer available");
      },
      delayMixin: function() {
        deprecation(v5, "PIXI.utils.mixins.delayMixin function is no longer available");
      },
      performMixins: function() {
        deprecation(v5, "PIXI.utils.mixins.performMixins function is no longer available");
      }
    };
    Object.defineProperty(PIXI8.BitmapText.prototype, "font", {
      get: function() {
        deprecation("5.3.0", "PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties");
        return {
          name: this._fontName,
          size: this._fontSize,
          tint: this._tint,
          align: this._align
        };
      },
      set: function(value) {
        deprecation("5.3.0", "PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties");
        if (!value) {
          return;
        }
        var style = {font: value};
        this._upgradeStyle(style);
        style.fontSize = style.fontSize || PIXI8.BitmapFont.available[style.fontName].size;
        this._fontName = style.fontName;
        this._fontSize = style.fontSize;
        this.dirty = true;
      }
    });
  }
  Renderer.registerPlugin("accessibility", AccessibilityManager);
  Renderer.registerPlugin("extract", Extract);
  Renderer.registerPlugin("interaction", InteractionManager);
  Renderer.registerPlugin("particle", ParticleRenderer);
  Renderer.registerPlugin("prepare", Prepare);
  Renderer.registerPlugin("batch", BatchRenderer);
  Renderer.registerPlugin("tilingSprite", TilingSpriteRenderer);
  Loader2.registerPlugin(BitmapFontLoader);
  Loader2.registerPlugin(SpritesheetLoader);
  Application.registerPlugin(TickerPlugin);
  Application.registerPlugin(AppLoaderPlugin);
  var VERSION2 = "5.3.7";
  var filters = {
    AlphaFilter,
    BlurFilter,
    BlurFilterPass,
    ColorMatrixFilter,
    DisplacementFilter,
    FXAAFilter,
    NoiseFilter
  };

  // src/client/InputManager.ts
  var keys = new Set();
  var Key = class extends utils_es_exports.EventEmitter {
    constructor(id) {
      super();
      this.id = id;
      this._pressedAt = 0;
      this._isPressed = false;
      keys.add(this);
    }
    get isPressed() {
      return this._isPressed;
    }
    get duration() {
      if (!this._isPressed)
        return 0;
      return Date.now() - this._pressedAt;
    }
    handle(event, action) {
      this.emit(action, event, this.duration);
      if (action === "down" || action === "keypressed") {
        this._isPressed = true;
        this._pressedAt = Date.now();
      } else {
        this._isPressed = false;
      }
    }
    on(event, fn, context2) {
      super.on(event, fn, context2);
      return this;
    }
    once(event, fn, context2) {
      super.once(event, fn, context2);
      return this;
    }
    isMineEvent(event) {
      if (typeof this.id === "string")
        return event.key === this.id;
      return event.keyCode === this.id;
    }
  };
  var Q = new Key("q");
  var D = new Key("d");
  var up = new Key("ArrowUp");
  var left = new Key("ArrowLeft");
  var right = new Key("ArrowRight");
  var down = new Key("ArrowDown");
  var space = new Key(" ");
  document.addEventListener("keydown", (event) => {
    keys.forEach((key) => {
      if (key.isMineEvent(event))
        key.handle(event, "down");
    });
  });
  document.addEventListener("keyup", (event) => {
    keys.forEach((key) => {
      if (key.isMineEvent(event))
        key.handle(event, "up");
    });
  });
  document.addEventListener("keypress", (event) => {
    keys.forEach((key) => {
      if (key.isMineEvent(event))
        key.handle(event, "keypressed");
    });
  });

  // src/utils/collisionsUtils.ts
  var Rectangle2 = class extends Rectangle {
    constructor(x, y, width, height, anchor) {
      super(x, y, width, height);
      this.anchor = anchor != null ? anchor : new Point();
      this.halfWidth = width / 2;
      this.halfHeight = height / 2;
      this.xAnchorOffset = this.width * this.anchor.x;
      this.yAnchorOffset = this.height * this.anchor.y;
    }
    static fromSprite(sprite) {
      return new Rectangle2(sprite.x, sprite.y, sprite.getBounds().width, sprite.getBounds().height);
    }
  };
  function isRectangleCollapse(rectangle1, rectangle2) {
    const rect1 = rectangle1 instanceof Rectangle ? rectangle1 : Rectangle2.fromSprite(rectangle1);
    const rect2 = rectangle2 instanceof Rectangle ? rectangle2 : Rectangle2.fromSprite(rectangle2);
    return rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.height + rect1.y > rect2.y;
  }
  function manageRectangleCollisions(rectangle1, rectangle2) {
    const rect1 = Rectangle2.fromSprite(rectangle1);
    const rect2 = Rectangle2.fromSprite(rectangle2);
    const vx2 = rect1.x + Math.abs(rect1.halfWidth) - rect1.xAnchorOffset - (rect2.x + Math.abs(rect2.halfWidth) - rect2.xAnchorOffset);
    const vy2 = rect1.y + Math.abs(rect1.halfHeight) - rect1.yAnchorOffset - (rect2.y + Math.abs(rect2.halfHeight) - rect2.yAnchorOffset);
    const combinedHalfWidths = Math.abs(rect1.halfWidth) + Math.abs(rect2.halfWidth);
    const combinedHalfHeights = Math.abs(rect1.halfHeight) + Math.abs(rect2.halfHeight);
    let collision, overlapX, overlapY;
    if (Math.abs(vx2) < combinedHalfWidths) {
      if (Math.abs(vy2) < combinedHalfHeights) {
        overlapX = combinedHalfWidths - Math.abs(vx2);
        overlapY = combinedHalfHeights - Math.abs(vy2);
        if (overlapX >= overlapY) {
          if (vy2 > 0) {
            collision = "top";
            rect1.y = rect1.y + overlapY;
          } else {
            collision = "bottom";
            rect1.y = rect1.y - overlapY;
          }
        } else {
          if (vx2 > 0) {
            collision = "left";
            rect1.x = rect1.x + overlapX;
          } else {
            collision = "right";
            rect1.x = rect1.x - overlapX;
          }
        }
      }
    }
    return collision;
  }

  // src/entity/Entity.ts
  var Entity = class extends Sprite {
    constructor(texture, options) {
      var _a2, _b;
      let textureName;
      if (typeof texture === "string") {
        textureName = texture;
        texture = Loader2.shared.resources[texture].texture;
      }
      if (!texture)
        throw new Error(`Texture '${textureName}' not found.`);
      super(texture);
      this.setup();
      this.velocity = new Point(0, 0);
      this.hasGravity = (_a2 = options == null ? void 0 : options.hasGravity) != null ? _a2 : false;
      this.mass = (_b = options == null ? void 0 : options.mass) != null ? _b : 1;
      this.touchingWall = new Map();
      this.on("update", () => this.update());
    }
    get isOnGround() {
      return this.touchingWall.has("top");
    }
    update() {
      if (this.isOnGround) {
        this.emit("onGround");
        this.position.y += this.touchingWall.get("top").getBounds().top - this.getBounds().bottom + 0.1;
        this.velocity.y = 0;
      } else if (this.hasGravity)
        this.velocity.y += 0.1;
      this.position.x += this.velocity.x;
      this.position.y += this.velocity.y;
    }
    move(direction, speed) {
      this.velocity.x += direction.x * speed;
      this.velocity.y += direction.y * speed;
    }
    manageWallCollisions() {
      const walls = actualScene.children.filter((entity) => entity.constructor.name === "WallEntity");
      walls.forEach((wall) => {
        if (isRectangleCollapse(this, wall)) {
          const touchingWallSide = manageRectangleCollisions(wall, this);
          this.touchingWall.set(touchingWallSide, wall);
          this.emit("touchWall", touchingWallSide, wall);
        }
      });
      this.touchingWall.forEach((wall, side) => {
        switch (side) {
          case "bottom":
            this.move(new Point(this.velocity.x / 10, 1), 2);
            break;
          case "top":
            this.move(new Point(-this.velocity.x / 5, -1), 2);
            break;
          case "left":
            this.move(new Point(-this.velocity.x || -2, 0), 1);
            break;
          case "right":
            this.move(new Point(-this.velocity.x || 2, 0), 1);
            break;
        }
        if (!isRectangleCollapse(wall, this))
          this.touchingWall.delete(side);
      });
    }
    destroy(options) {
      super.destroy(options);
    }
  };
  var Entity_default = Entity;

  // src/entity/Player.ts
  var Player = class extends Entity_default {
    constructor() {
      super("player", {
        hasGravity: true
      });
    }
    setup() {
    }
    update() {
      this.manageWallCollisions();
      super.update();
      if (this.isOnGround) {
        if (Q.isPressed && this.velocity.x > -4)
          this.move(new Point(-1, 0), 2);
        if (D.isPressed && this.velocity.x < 4)
          this.move(new Point(1, 0), 2);
      } else {
        if (Q.isPressed && this.velocity.x > -4)
          this.move(new Point(-1, 0), 0.7);
        if (D.isPressed && this.velocity.x < 4)
          this.move(new Point(1, 0), 0.7);
        this.velocity.x *= 0.9;
      }
      if (space.isPressed && this.isOnGround) {
        this.move(new Point(0, -1), 0.8);
        this.position.y += this.velocity.y;
      }
    }
  };
  var Player_default = Player;

  // src/utils/utils.ts
  function map3(value, minValue, maxValue, minTarget, maxTarget) {
    if (value === 0)
      return 0;
    return (value - minValue) * (maxTarget - minTarget) / (maxValue - minValue) + minTarget;
  }

  // src/entity/WallEntity.ts
  var WallEntity = class extends Entity_default {
    constructor(options, y, width, height) {
      super(Texture.WHITE, {
        mass: 1e3
      });
      if (typeof options === "number") {
        this.position.set(options, y);
        this.width = width;
        this.height = height;
      } else {
        this.position.set(options.x, options.y);
        this.width = options.width;
        this.height = options.height;
      }
      this.initial = new Rectangle(this.position.x, this.position.y, this.width, this.height);
    }
    resizeToScene(scene) {
      this.position.x = map3(this.initial.x, 0, 1920, 0, scene.width);
      this.position.y = map3(this.initial.y, 0, 1080, 0, scene.height);
      this.width = map3(this.initial.width, 0, 1920, 0, scene.width);
      this.height = map3(this.initial.height, 0, 1080, 0, scene.height);
      return this;
    }
    setup() {
    }
  };
  var WallEntity_default = WallEntity;

  // src/scenes/Scene.ts
  var Scene = class extends Container {
    constructor() {
      super();
      this.setup();
    }
    update() {
      this.height = window.innerHeight;
      this.width = window.innerWidth;
      this.children.forEach((child) => {
        if (child instanceof Entity_default)
          child.emit("update");
        if (!(child instanceof WallEntity_default))
          return;
        child.resizeToScene(actualScene);
      });
      this.sortChildren();
      this.background.width = this.width;
      this.background.height = this.height;
    }
    destroy() {
      super.destroy();
      this.background.destroy();
    }
    addWall(options, y, width, height) {
      if (typeof options === "number")
        this.addChild(new WallEntity_default({
          x: options,
          y,
          width,
          height
        }).resizeToScene(this));
      else
        this.addChild(new WallEntity_default(options).resizeToScene(this));
    }
  };
  var Scene_default = Scene;

  // src/scenes/ChamberScene.ts
  var ChamberScene = class extends Scene_default {
    constructor(spawnPoint) {
      super();
      this.spawnPoint = spawnPoint;
    }
    spawnPlayer(position) {
      if (!position)
        position = this.spawnPoint;
      if (!this.player)
        this.player = new Player_default();
      this.player.position.set(map3(position.x, 0, 1920, 0, window.innerWidth), map3(position.y, 0, 1080, 0, window.innerHeight));
      this.addChild(this.player);
    }
  };
  var ChamberScene_default = ChamberScene;

  // src/scenes/TestChamber.ts
  var TestChamber = class extends ChamberScene_default {
    constructor() {
      super(new Point(1600, 500));
    }
    setup() {
      this.background = Sprite.from(Loader2.shared.resources["testChamberBackground"].texture);
      this.background.width = window.innerWidth;
      this.background.height = window.innerHeight;
      this.addChild(this.background);
      this.spawnPlayer({
        x: 1600,
        y: 500
      });
      this.addWall(0, 1080 - 184, 1920, 184);
      this.addWall(0, 0, 194, 1080);
      this.debugText = new Text("");
      this.addChild(this.debugText);
    }
    update() {
      super.update();
      if (!isRectangleCollapse(new Rectangle2(0, 0, window.innerWidth, window.innerHeight), this.player)) {
        this.spawnPlayer();
      }
      this.debugText.text = JSON.stringify({
        position: {
          x: this.player.position.x,
          y: this.player.position.y
        },
        velocity: this.player.velocity,
        states: {
          hasGravity: this.player.hasGravity,
          onGround: this.player.isOnGround
        },
        touchingWalls: [...this.player.touchingWall.entries()].map((w) => `${w[0]}`)
      }, null, 4);
    }
  };
  var TestChamber_default = TestChamber;

  // src/app.ts
  var actualScene;
  var app = new Application({
    antialias: true,
    resizeTo: window,
    backgroundColor: 14540253
  });
  loadTextures().then(() => {
    tests();
  });
  async function loadTextures() {
    await new Promise((resolve) => {
      Loader2.shared.add("test", "assets/test.png");
      Loader2.shared.add("player", "assets/player.png");
      Loader2.shared.add("testChamberBackground", "assets/test level.png");
      Loader2.shared.load(resolve);
    });
  }
  function tests() {
    Loader2.shared.onComplete.add(() => {
      const sprite = Sprite.from(Loader2.shared.resources["test"].texture);
      sprite.position.set(window.innerWidth / 2, window.innerHeight / 2);
      app.stage.addChild(sprite);
    });
    Ticker.shared.add(() => {
      actualScene == null ? void 0 : actualScene.update();
      window["player"] = actualScene.children.find((c) => c instanceof Player_default);
      window["walls"] = actualScene.children.filter((c) => c instanceof WallEntity_default);
      window["isRectangleCollapse"] = isRectangleCollapse;
    }, void 0, UPDATE_PRIORITY.HIGH);
    setScene(new TestChamber_default());
    window["actualScene"] = actualScene;
  }
  function setScene(scene) {
    actualScene = scene;
    app.stage.addChild(actualScene);
  }
  document.body.appendChild(app.view);
  window["app"] = app;
  window["PIXI"] = pixi_es_exports;
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlLXBvbHlmaWxsL3Byb21pc2UuanMiLCAibm9kZV9tb2R1bGVzL29iamVjdC1hc3NpZ24vaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2V2ZW50ZW1pdHRlcjMvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2VhcmN1dC9zcmMvZWFyY3V0LmpzIiwgIm5vZGVfbW9kdWxlcy9wdW55Y29kZS9wdW55Y29kZS5qcyIsICJub2RlX21vZHVsZXMvdXJsL3V0aWwuanMiLCAibm9kZV9tb2R1bGVzL3F1ZXJ5c3RyaW5nL2RlY29kZS5qcyIsICJub2RlX21vZHVsZXMvcXVlcnlzdHJpbmcvZW5jb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvdXJsL3VybC5qcyIsICJub2RlX21vZHVsZXMvcGFyc2UtdXJpL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9taW5pLXNpZ25hbHMvbGliL21pbmktc2lnbmFscy5qcyIsICJub2RlX21vZHVsZXMvQHBpeGkvcG9seWZpbGwvc3JjL1Byb21pc2UudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3BvbHlmaWxsL3NyYy9PYmplY3QuYXNzaWduLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9wb2x5ZmlsbC9zcmMvcmVxdWVzdEFuaW1hdGlvbkZyYW1lLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9wb2x5ZmlsbC9zcmMvTWF0aC5zaWduLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9wb2x5ZmlsbC9zcmMvTnVtYmVyLmlzSW50ZWdlci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvcG9seWZpbGwvc3JjL2luZGV4LnRzIiwgIm5vZGVfbW9kdWxlcy9pc21vYmlsZWpzL3NyYy9pc01vYmlsZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvc2V0dGluZ3Mvc3JjL3V0aWxzL2lzTW9iaWxlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9zZXR0aW5ncy9zcmMvdXRpbHMvbWF4UmVjb21tZW5kZWRUZXh0dXJlcy50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvc2V0dGluZ3Mvc3JjL3V0aWxzL2NhblVwbG9hZFNhbWVCdWZmZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3NldHRpbmdzL3NyYy9zZXR0aW5ncy50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29uc3RhbnRzL3NyYy9pbmRleC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdXRpbHMvc3JjL3NldHRpbmdzLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS91dGlscy9zcmMvYnJvd3Nlci9oZWxsby50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdXRpbHMvc3JjL2Jyb3dzZXIvaXNXZWJHTFN1cHBvcnRlZC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdXRpbHMvc3JjL2NvbG9yL2hleC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdXRpbHMvc3JjL2NvbG9yL3ByZW11bHRpcGx5LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS91dGlscy9zcmMvZGF0YS9jcmVhdGVJbmRpY2VzRm9yUXVhZHMudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9kYXRhL2dldEJ1ZmZlclR5cGUudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9kYXRhL2ludGVybGVhdmVUeXBlZEFycmF5cy50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdXRpbHMvc3JjL2RhdGEvcG93Mi50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdXRpbHMvc3JjL2RhdGEvcmVtb3ZlSXRlbXMudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9kYXRhL3NpZ24udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9kYXRhL3VpZC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdXRpbHMvc3JjL2xvZ2dpbmcvZGVwcmVjYXRpb24udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9tZWRpYS9jYWNoZXMudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9tZWRpYS9DYW52YXNSZW5kZXJUYXJnZXQudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9tZWRpYS90cmltQ2FudmFzLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS91dGlscy9zcmMvY29uc3QudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9uZXR3b3JrL2RlY29tcG9zZURhdGFVcmkudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9uZXR3b3JrL2RldGVybWluZUNyb3NzT3JpZ2luLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS91dGlscy9zcmMvbmV0d29yay9nZXRSZXNvbHV0aW9uT2ZVcmwudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3V0aWxzL3NyYy9pbmRleC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvbWF0aC9zcmMvY29uc3QudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21hdGgvc3JjL3NoYXBlcy9SZWN0YW5nbGUudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21hdGgvc3JjL3NoYXBlcy9DaXJjbGUudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21hdGgvc3JjL3NoYXBlcy9FbGxpcHNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9tYXRoL3NyYy9zaGFwZXMvUG9seWdvbi50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvbWF0aC9zcmMvc2hhcGVzL1JvdW5kZWRSZWN0YW5nbGUudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21hdGgvc3JjL0lQb2ludERhdGEudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21hdGgvc3JjL0lQb2ludC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvbWF0aC9zcmMvUG9pbnQudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21hdGgvc3JjL09ic2VydmFibGVQb2ludC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvbWF0aC9zcmMvTWF0cml4LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9tYXRoL3NyYy9ncm91cEQ4LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9tYXRoL3NyYy9UcmFuc2Zvcm0udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21hdGgvc3JjL2luZGV4LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9kaXNwbGF5L3NyYy9zZXR0aW5ncy50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZGlzcGxheS9zcmMvQm91bmRzLnRzIiwgIm5vZGVfbW9kdWxlcy9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9kaXNwbGF5L3NyYy9EaXNwbGF5T2JqZWN0LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9kaXNwbGF5L3NyYy9Db250YWluZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2FjY2Vzc2liaWxpdHkvc3JjL2FjY2Vzc2libGVUYXJnZXQudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2FjY2Vzc2liaWxpdHkvc3JjL0FjY2Vzc2liaWxpdHlNYW5hZ2VyLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90aWNrZXIvc3JjL3NldHRpbmdzLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90aWNrZXIvc3JjL2NvbnN0LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90aWNrZXIvc3JjL1RpY2tlckxpc3RlbmVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90aWNrZXIvc3JjL1RpY2tlci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdGlja2VyL3NyYy9UaWNrZXJQbHVnaW4udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2ludGVyYWN0aW9uL3NyYy9JbnRlcmFjdGlvbkRhdGEudHMiLCAibm9kZV9tb2R1bGVzL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2ludGVyYWN0aW9uL3NyYy9JbnRlcmFjdGlvbkV2ZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9pbnRlcmFjdGlvbi9zcmMvSW50ZXJhY3Rpb25UcmFja2luZ0RhdGEudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2ludGVyYWN0aW9uL3NyYy9UcmVlU2VhcmNoLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9pbnRlcmFjdGlvbi9zcmMvaW50ZXJhY3RpdmVUYXJnZXQudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2ludGVyYWN0aW9uL3NyYy9JbnRlcmFjdGlvbk1hbmFnZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3J1bm5lci9zcmMvUnVubmVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9zZXR0aW5ncy50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdGV4dHVyZXMvcmVzb3VyY2VzL2F1dG9EZXRlY3RSZXNvdXJjZS50cyIsICJub2RlX21vZHVsZXMvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdGV4dHVyZXMvcmVzb3VyY2VzL1Jlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy90ZXh0dXJlcy9yZXNvdXJjZXMvQnVmZmVyUmVzb3VyY2UudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3RleHR1cmVzL0Jhc2VUZXh0dXJlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy90ZXh0dXJlcy9yZXNvdXJjZXMvQWJzdHJhY3RNdWx0aVJlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy90ZXh0dXJlcy9yZXNvdXJjZXMvQXJyYXlSZXNvdXJjZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdGV4dHVyZXMvcmVzb3VyY2VzL0Jhc2VJbWFnZVJlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy90ZXh0dXJlcy9yZXNvdXJjZXMvQ2FudmFzUmVzb3VyY2UudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3RleHR1cmVzL3Jlc291cmNlcy9DdWJlUmVzb3VyY2UudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3RleHR1cmVzL3Jlc291cmNlcy9JbWFnZVJlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy90ZXh0dXJlcy9yZXNvdXJjZXMvU1ZHUmVzb3VyY2UudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3RleHR1cmVzL3Jlc291cmNlcy9WaWRlb1Jlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy90ZXh0dXJlcy9yZXNvdXJjZXMvSW1hZ2VCaXRtYXBSZXNvdXJjZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdGV4dHVyZXMvcmVzb3VyY2VzL2luZGV4LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9TeXN0ZW0udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3RleHR1cmVzL3Jlc291cmNlcy9EZXB0aFJlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9mcmFtZWJ1ZmZlci9GcmFtZWJ1ZmZlci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvcmVuZGVyVGV4dHVyZS9CYXNlUmVuZGVyVGV4dHVyZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdGV4dHVyZXMvVGV4dHVyZVV2cy50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdGV4dHVyZXMvVGV4dHVyZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvcmVuZGVyVGV4dHVyZS9SZW5kZXJUZXh0dXJlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9yZW5kZXJUZXh0dXJlL1JlbmRlclRleHR1cmVQb29sLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9nZW9tZXRyeS9BdHRyaWJ1dGUudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL2dlb21ldHJ5L0J1ZmZlci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvZ2VvbWV0cnkvdXRpbHMvZ2V0QnVmZmVyVHlwZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvZ2VvbWV0cnkvdXRpbHMvaW50ZXJsZWF2ZVR5cGVkQXJyYXlzLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9nZW9tZXRyeS9HZW9tZXRyeS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdXRpbHMvUXVhZC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdXRpbHMvUXVhZFV2LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9zaGFkZXIvVW5pZm9ybUdyb3VwLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9maWx0ZXJzL0ZpbHRlclN0YXRlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9maWx0ZXJzL0ZpbHRlclN5c3RlbS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvYmF0Y2gvT2JqZWN0UmVuZGVyZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL2JhdGNoL0JhdGNoU3lzdGVtLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9jb250ZXh0L0NvbnRleHRTeXN0ZW0udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL2ZyYW1lYnVmZmVyL0dMRnJhbWVidWZmZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL2ZyYW1lYnVmZmVyL0ZyYW1lYnVmZmVyU3lzdGVtLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9nZW9tZXRyeS9HTEJ1ZmZlci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvZ2VvbWV0cnkvR2VvbWV0cnlTeXN0ZW0udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL21hc2svTWFza0RhdGEudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3NoYWRlci91dGlscy9jb21waWxlUHJvZ3JhbS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvc2hhZGVyL3V0aWxzL2RlZmF1bHRWYWx1ZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvc2hhZGVyL3V0aWxzL2dldFRlc3RDb250ZXh0LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9zaGFkZXIvdXRpbHMvZ2V0TWF4RnJhZ21lbnRQcmVjaXNpb24udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3NoYWRlci91dGlscy9zZXRQcmVjaXNpb24udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3NoYWRlci91dGlscy9tYXBTaXplLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9zaGFkZXIvdXRpbHMvbWFwVHlwZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvc2hhZGVyL3V0aWxzL3VuaWZvcm1QYXJzZXJzLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9zaGFkZXIvdXRpbHMvZ2VuZXJhdGVVbmlmb3Jtc1N5bmMudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3NoYWRlci91dGlscy9jaGVja01heElmU3RhdGVtZW50c0luU2hhZGVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9zaGFkZXIvdXRpbHMvdW5zYWZlRXZhbFN1cHBvcnRlZC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvc2hhZGVyL1Byb2dyYW0udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3NoYWRlci9TaGFkZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3N0YXRlL1N0YXRlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9maWx0ZXJzL0ZpbHRlci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdGV4dHVyZXMvVGV4dHVyZU1hdHJpeC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvZmlsdGVycy9zcHJpdGVNYXNrL1Nwcml0ZU1hc2tGaWx0ZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL21hc2svTWFza1N5c3RlbS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvbWFzay9BYnN0cmFjdE1hc2tTeXN0ZW0udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL21hc2svU2Npc3NvclN5c3RlbS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvbWFzay9TdGVuY2lsU3lzdGVtLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9wcm9qZWN0aW9uL1Byb2plY3Rpb25TeXN0ZW0udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3JlbmRlclRleHR1cmUvUmVuZGVyVGV4dHVyZVN5c3RlbS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvc2hhZGVyL0dMUHJvZ3JhbS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvc2hhZGVyL1NoYWRlclN5c3RlbS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvc3RhdGUvdXRpbHMvbWFwV2ViR0xCbGVuZE1vZGVzVG9QaXhpLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9zdGF0ZS9TdGF0ZVN5c3RlbS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvdGV4dHVyZXMvVGV4dHVyZUdDU3lzdGVtLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy90ZXh0dXJlcy9HTFRleHR1cmUudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3RleHR1cmVzL1RleHR1cmVTeXN0ZW0udHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL3N5c3RlbXMudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL0Fic3RyYWN0UmVuZGVyZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL1JlbmRlcmVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9hdXRvRGV0ZWN0UmVuZGVyZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL2JhdGNoL0JhdGNoRHJhd0NhbGwudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2NvcmUvc3JjL2JhdGNoL0JhdGNoVGV4dHVyZUFycmF5LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9nZW9tZXRyeS9WaWV3YWJsZUJ1ZmZlci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvYmF0Y2gvQWJzdHJhY3RCYXRjaFJlbmRlcmVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL3NyYy9iYXRjaC9CYXRjaFNoYWRlckdlbmVyYXRvci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvYmF0Y2gvQmF0Y2hHZW9tZXRyeS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvY29yZS9zcmMvYmF0Y2gvQmF0Y2hQbHVnaW5GYWN0b3J5LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9hcHAvc3JjL0FwcGxpY2F0aW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9hcHAvc3JjL1Jlc2l6ZVBsdWdpbi50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvYXBwL3NyYy9pbmRleC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZXh0cmFjdC9zcmMvRXh0cmFjdC50cyIsICJub2RlX21vZHVsZXMvcmVzb3VyY2UtbG9hZGVyL3NyYy9hc3luYy5qcyIsICJub2RlX21vZHVsZXMvcmVzb3VyY2UtbG9hZGVyL3NyYy9taWRkbGV3YXJlL2NhY2hpbmcuanMiLCAibm9kZV9tb2R1bGVzL3Jlc291cmNlLWxvYWRlci9zcmMvUmVzb3VyY2UuanMiLCAibm9kZV9tb2R1bGVzL3Jlc291cmNlLWxvYWRlci9zcmMvZW5jb2RlQmluYXJ5LmpzIiwgIm5vZGVfbW9kdWxlcy9yZXNvdXJjZS1sb2FkZXIvc3JjL21pZGRsZXdhcmUvcGFyc2luZy5qcyIsICJub2RlX21vZHVsZXMvcmVzb3VyY2UtbG9hZGVyL3NyYy9taWRkbGV3YXJlL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9yZXNvdXJjZS1sb2FkZXIvc3JjL0xvYWRlci5qcyIsICJub2RlX21vZHVsZXMvQHBpeGkvbG9hZGVycy9zcmMvTG9hZGVyUmVzb3VyY2UudHMiLCAibm9kZV9tb2R1bGVzL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2xvYWRlcnMvc3JjL1RleHR1cmVMb2FkZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2xvYWRlcnMvc3JjL0xvYWRlci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvbG9hZGVycy9zcmMvQXBwTG9hZGVyUGx1Z2luLnRzIiwgIm5vZGVfbW9kdWxlcy9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9wYXJ0aWNsZXMvc3JjL1BhcnRpY2xlQ29udGFpbmVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9wYXJ0aWNsZXMvc3JjL1BhcnRpY2xlQnVmZmVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9wYXJ0aWNsZXMvc3JjL1BhcnRpY2xlUmVuZGVyZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2dyYXBoaWNzL3NyYy9jb25zdC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZ3JhcGhpY3Mvc3JjL3N0eWxlcy9GaWxsU3R5bGUudHMiLCAibm9kZV9tb2R1bGVzL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2dyYXBoaWNzL3NyYy91dGlscy9idWlsZFBvbHkudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2dyYXBoaWNzL3NyYy91dGlscy9idWlsZENpcmNsZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZ3JhcGhpY3Mvc3JjL3V0aWxzL2J1aWxkUmVjdGFuZ2xlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9ncmFwaGljcy9zcmMvdXRpbHMvYnVpbGRSb3VuZGVkUmVjdGFuZ2xlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9ncmFwaGljcy9zcmMvdXRpbHMvYnVpbGRMaW5lLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9ncmFwaGljcy9zcmMvdXRpbHMvU3Rhci50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZ3JhcGhpY3Mvc3JjL3V0aWxzL0FyY1V0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9ncmFwaGljcy9zcmMvdXRpbHMvQmV6aWVyVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2dyYXBoaWNzL3NyYy91dGlscy9RdWFkcmF0aWNVdGlscy50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZ3JhcGhpY3Mvc3JjL3V0aWxzL0JhdGNoUGFydC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZ3JhcGhpY3Mvc3JjL3V0aWxzL2luZGV4LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9ncmFwaGljcy9zcmMvR3JhcGhpY3NEYXRhLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9ncmFwaGljcy9zcmMvR3JhcGhpY3NHZW9tZXRyeS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZ3JhcGhpY3Mvc3JjL3N0eWxlcy9MaW5lU3R5bGUudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2dyYXBoaWNzL3NyYy9HcmFwaGljcy50cyIsICJub2RlX21vZHVsZXMvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsICJub2RlX21vZHVsZXMvQHBpeGkvc3ByaXRlL3NyYy9TcHJpdGUudHMiLCAibm9kZV9tb2R1bGVzL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3RleHQvc3JjL2NvbnN0LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90ZXh0L3NyYy9UZXh0U3R5bGUudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3RleHQvc3JjL1RleHRNZXRyaWNzLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90ZXh0L3NyYy9UZXh0LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9wcmVwYXJlL3NyYy9zZXR0aW5ncy50cyIsICJub2RlX21vZHVsZXMvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsICJub2RlX21vZHVsZXMvQHBpeGkvcHJlcGFyZS9zcmMvQ291bnRMaW1pdGVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9wcmVwYXJlL3NyYy9CYXNlUHJlcGFyZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvcHJlcGFyZS9zcmMvUHJlcGFyZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvcHJlcGFyZS9zcmMvVGltZUxpbWl0ZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3Nwcml0ZXNoZWV0L3NyYy9TcHJpdGVzaGVldC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvc3ByaXRlc2hlZXQvc3JjL1Nwcml0ZXNoZWV0TG9hZGVyLnRzIiwgIm5vZGVfbW9kdWxlcy9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9zcHJpdGUtdGlsaW5nL3NyYy9UaWxpbmdTcHJpdGUudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3Nwcml0ZS10aWxpbmcvc3JjL1RpbGluZ1Nwcml0ZVJlbmRlcmVyLnRzIiwgIm5vZGVfbW9kdWxlcy9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9tZXNoL3NyYy9NZXNoQmF0Y2hVdnMudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21lc2gvc3JjL01lc2gudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21lc2gvc3JjL01lc2hNYXRlcmlhbC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvbWVzaC9zcmMvTWVzaEdlb21ldHJ5LnRzIiwgIm5vZGVfbW9kdWxlcy9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90ZXh0LWJpdG1hcC9zcmMvQml0bWFwRm9udERhdGEudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3RleHQtYml0bWFwL3NyYy9mb3JtYXRzL1RleHRGb3JtYXQudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3RleHQtYml0bWFwL3NyYy9mb3JtYXRzL1hNTEZvcm1hdC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdGV4dC1iaXRtYXAvc3JjL2Zvcm1hdHMvWE1MU3RyaW5nRm9ybWF0LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90ZXh0LWJpdG1hcC9zcmMvZm9ybWF0cy9pbmRleC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdGV4dC1iaXRtYXAvc3JjL3V0aWxzL2dlbmVyYXRlRmlsbFN0eWxlLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90ZXh0LWJpdG1hcC9zcmMvdXRpbHMvZHJhd0dseXBoLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90ZXh0LWJpdG1hcC9zcmMvdXRpbHMvcmVzb2x2ZUNoYXJhY3RlcnMudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL3RleHQtYml0bWFwL3NyYy9CaXRtYXBGb250LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS90ZXh0LWJpdG1hcC9zcmMvQml0bWFwVGV4dC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvdGV4dC1iaXRtYXAvc3JjL0JpdG1hcEZvbnRMb2FkZXIudHMiLCAibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsICJub2RlX21vZHVsZXMvQHBpeGkvZmlsdGVyLWFscGhhL3NyYy9BbHBoYUZpbHRlci50cyIsICJub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9maWx0ZXItYmx1ci9zcmMvZ2VuZXJhdGVCbHVyVmVydFNvdXJjZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZmlsdGVyLWJsdXIvc3JjL2dlbmVyYXRlQmx1ckZyYWdTb3VyY2UudHMiLCAibm9kZV9tb2R1bGVzL2NvbnN0YW50cy9zcmMvaW5kZXgudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2ZpbHRlci1ibHVyL3NyYy9CbHVyRmlsdGVyUGFzcy50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvZmlsdGVyLWJsdXIvc3JjL0JsdXJGaWx0ZXIudHMiLCAibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsICJub2RlX21vZHVsZXMvQHBpeGkvZmlsdGVyLWNvbG9yLW1hdHJpeC9zcmMvQ29sb3JNYXRyaXhGaWx0ZXIudHMiLCAibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsICJub2RlX21vZHVsZXMvQHBpeGkvZmlsdGVyLWRpc3BsYWNlbWVudC9zcmMvRGlzcGxhY2VtZW50RmlsdGVyLnRzIiwgIm5vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2ZpbHRlci1meGFhL3NyYy9GWEFBRmlsdGVyLnRzIiwgIm5vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL2ZpbHRlci1ub2lzZS9zcmMvTm9pc2VGaWx0ZXIudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21peGluLWNhY2hlLWFzLWJpdG1hcC9zcmMvaW5kZXgudHMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21peGluLWdldC1jaGlsZC1ieS1uYW1lL3NyYy9pbmRleC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvbWl4aW4tZ2V0LWdsb2JhbC1wb3NpdGlvbi9zcmMvaW5kZXgudHMiLCAibm9kZV9tb2R1bGVzL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCAibm9kZV9tb2R1bGVzL0BwaXhpL21lc2gtZXh0cmFzL3NyYy9nZW9tZXRyeS9QbGFuZUdlb21ldHJ5LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9tZXNoLWV4dHJhcy9zcmMvZ2VvbWV0cnkvUm9wZUdlb21ldHJ5LnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9tZXNoLWV4dHJhcy9zcmMvU2ltcGxlUm9wZS50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvbWVzaC1leHRyYXMvc3JjL1NpbXBsZVBsYW5lLnRzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9tZXNoLWV4dHJhcy9zcmMvU2ltcGxlTWVzaC50cyIsICJub2RlX21vZHVsZXMvQHBpeGkvbWVzaC1leHRyYXMvc3JjL05pbmVTbGljZVBsYW5lLnRzIiwgIm5vZGVfbW9kdWxlcy9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwgIm5vZGVfbW9kdWxlcy9AcGl4aS9zcHJpdGUtYW5pbWF0ZWQvc3JjL0FuaW1hdGVkU3ByaXRlLnRzIiwgIm5vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCAibm9kZV9tb2R1bGVzL3BpeGkuanMvc3JjL3VzZURlcHJlY2F0ZWQudHMiLCAibm9kZV9tb2R1bGVzL3BpeGkuanMvc3JjL2luZGV4LnRzIiwgInNyYy9jbGllbnQvSW5wdXRNYW5hZ2VyLnRzIiwgInNyYy91dGlscy9jb2xsaXNpb25zVXRpbHMudHMiLCAic3JjL2VudGl0eS9FbnRpdHkudHMiLCAic3JjL2VudGl0eS9QbGF5ZXIudHMiLCAic3JjL3V0aWxzL3V0aWxzLnRzIiwgInNyYy9lbnRpdHkvV2FsbEVudGl0eS50cyIsICJzcmMvc2NlbmVzL1NjZW5lLnRzIiwgInNyYy9zY2VuZXMvQ2hhbWJlclNjZW5lLnRzIiwgInNyYy9zY2VuZXMvVGVzdENoYW1iZXIudHMiLCAic3JjL2FwcC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiKGZ1bmN0aW9uKGdsb2JhbCl7XG5cbi8vXG4vLyBDaGVjayBmb3IgbmF0aXZlIFByb21pc2UgYW5kIGl0IGhhcyBjb3JyZWN0IGludGVyZmFjZVxuLy9cblxudmFyIE5hdGl2ZVByb21pc2UgPSBnbG9iYWxbJ1Byb21pc2UnXTtcbnZhciBuYXRpdmVQcm9taXNlU3VwcG9ydGVkID1cbiAgTmF0aXZlUHJvbWlzZSAmJlxuICAvLyBTb21lIG9mIHRoZXNlIG1ldGhvZHMgYXJlIG1pc3NpbmcgZnJvbVxuICAvLyBGaXJlZm94L0Nocm9tZSBleHBlcmltZW50YWwgaW1wbGVtZW50YXRpb25zXG4gICdyZXNvbHZlJyBpbiBOYXRpdmVQcm9taXNlICYmXG4gICdyZWplY3QnIGluIE5hdGl2ZVByb21pc2UgJiZcbiAgJ2FsbCcgaW4gTmF0aXZlUHJvbWlzZSAmJlxuICAncmFjZScgaW4gTmF0aXZlUHJvbWlzZSAmJlxuICAvLyBPbGRlciB2ZXJzaW9uIG9mIHRoZSBzcGVjIGhhZCBhIHJlc29sdmVyIG9iamVjdFxuICAvLyBhcyB0aGUgYXJnIHJhdGhlciB0aGFuIGEgZnVuY3Rpb25cbiAgKGZ1bmN0aW9uKCl7XG4gICAgdmFyIHJlc29sdmU7XG4gICAgbmV3IE5hdGl2ZVByb21pc2UoZnVuY3Rpb24ocil7IHJlc29sdmUgPSByOyB9KTtcbiAgICByZXR1cm4gdHlwZW9mIHJlc29sdmUgPT09ICdmdW5jdGlvbic7XG4gIH0pKCk7XG5cblxuLy9cbi8vIGV4cG9ydCBpZiBuZWNlc3Nhcnlcbi8vXG5cbmlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgZXhwb3J0cylcbntcbiAgLy8gbm9kZS5qc1xuICBleHBvcnRzLlByb21pc2UgPSBuYXRpdmVQcm9taXNlU3VwcG9ydGVkID8gTmF0aXZlUHJvbWlzZSA6IFByb21pc2U7XG4gIGV4cG9ydHMuUG9seWZpbGwgPSBQcm9taXNlO1xufVxuZWxzZVxue1xuICAvLyBBTURcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuICB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gbmF0aXZlUHJvbWlzZVN1cHBvcnRlZCA/IE5hdGl2ZVByb21pc2UgOiBQcm9taXNlO1xuICAgIH0pO1xuICB9XG4gIGVsc2VcbiAge1xuICAgIC8vIGluIGJyb3dzZXIgYWRkIHRvIGdsb2JhbFxuICAgIGlmICghbmF0aXZlUHJvbWlzZVN1cHBvcnRlZClcbiAgICAgIGdsb2JhbFsnUHJvbWlzZSddID0gUHJvbWlzZTtcbiAgfVxufVxuXG5cbi8vXG4vLyBQb2x5ZmlsbFxuLy9cblxudmFyIFBFTkRJTkcgPSAncGVuZGluZyc7XG52YXIgU0VBTEVEID0gJ3NlYWxlZCc7XG52YXIgRlVMRklMTEVEID0gJ2Z1bGZpbGxlZCc7XG52YXIgUkVKRUNURUQgPSAncmVqZWN0ZWQnO1xudmFyIE5PT1AgPSBmdW5jdGlvbigpe307XG5cbmZ1bmN0aW9uIGlzQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8vIGFzeW5jIGNhbGxzXG52YXIgYXN5bmNTZXRUaW1lciA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgIT09ICd1bmRlZmluZWQnID8gc2V0SW1tZWRpYXRlIDogc2V0VGltZW91dDtcbnZhciBhc3luY1F1ZXVlID0gW107XG52YXIgYXN5bmNUaW1lcjtcblxuZnVuY3Rpb24gYXN5bmNGbHVzaCgpe1xuICAvLyBydW4gcHJvbWlzZSBjYWxsYmFja3NcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhc3luY1F1ZXVlLmxlbmd0aDsgaSsrKVxuICAgIGFzeW5jUXVldWVbaV1bMF0oYXN5bmNRdWV1ZVtpXVsxXSk7XG5cbiAgLy8gcmVzZXQgYXN5bmMgYXN5bmNRdWV1ZVxuICBhc3luY1F1ZXVlID0gW107XG4gIGFzeW5jVGltZXIgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gYXN5bmNDYWxsKGNhbGxiYWNrLCBhcmcpe1xuICBhc3luY1F1ZXVlLnB1c2goW2NhbGxiYWNrLCBhcmddKTtcblxuICBpZiAoIWFzeW5jVGltZXIpXG4gIHtcbiAgICBhc3luY1RpbWVyID0gdHJ1ZTtcbiAgICBhc3luY1NldFRpbWVyKGFzeW5jRmx1c2gsIDApO1xuICB9XG59XG5cblxuZnVuY3Rpb24gaW52b2tlUmVzb2x2ZXIocmVzb2x2ZXIsIHByb21pc2UpIHtcbiAgZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHtcbiAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIH1cblxuICB0cnkge1xuICAgIHJlc29sdmVyKHJlc29sdmVQcm9taXNlLCByZWplY3RQcm9taXNlKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgcmVqZWN0UHJvbWlzZShlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzdWJzY3JpYmVyKXtcbiAgdmFyIG93bmVyID0gc3Vic2NyaWJlci5vd25lcjtcbiAgdmFyIHNldHRsZWQgPSBvd25lci5zdGF0ZV87XG4gIHZhciB2YWx1ZSA9IG93bmVyLmRhdGFfOyAgXG4gIHZhciBjYWxsYmFjayA9IHN1YnNjcmliZXJbc2V0dGxlZF07XG4gIHZhciBwcm9taXNlID0gc3Vic2NyaWJlci50aGVuO1xuXG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXG4gIHtcbiAgICBzZXR0bGVkID0gRlVMRklMTEVEO1xuICAgIHRyeSB7XG4gICAgICB2YWx1ZSA9IGNhbGxiYWNrKHZhbHVlKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBlKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWhhbmRsZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlKSlcbiAge1xuICAgIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpXG4gICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblxuICAgIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRClcbiAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUpIHtcbiAgdmFyIHJlc29sdmVkO1xuXG4gIHRyeSB7XG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xuXG4gICAgaWYgKHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JykpXG4gICAge1xuICAgICAgdmFyIHRoZW4gPSB2YWx1ZS50aGVuOyAgLy8gdGhlbiBzaG91bGQgYmUgcmV0cml2ZWQgb25seSBvbmNlXG5cbiAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgIHtcbiAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdW5jdGlvbih2YWwpe1xuICAgICAgICAgIGlmICghcmVzb2x2ZWQpXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHZhbClcbiAgICAgICAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWwpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAgIGlmICghcmVzb2x2ZWQpXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghcmVzb2x2ZWQpXG4gICAgICByZWplY3QocHJvbWlzZSwgZSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSl7XG4gIGlmIChwcm9taXNlID09PSB2YWx1ZSB8fCAhaGFuZGxlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUpKVxuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKXtcbiAgaWYgKHByb21pc2Uuc3RhdGVfID09PSBQRU5ESU5HKVxuICB7XG4gICAgcHJvbWlzZS5zdGF0ZV8gPSBTRUFMRUQ7XG4gICAgcHJvbWlzZS5kYXRhXyA9IHZhbHVlO1xuXG4gICAgYXN5bmNDYWxsKHB1Ymxpc2hGdWxmaWxsbWVudCwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVqZWN0KHByb21pc2UsIHJlYXNvbil7XG4gIGlmIChwcm9taXNlLnN0YXRlXyA9PT0gUEVORElORylcbiAge1xuICAgIHByb21pc2Uuc3RhdGVfID0gU0VBTEVEO1xuICAgIHByb21pc2UuZGF0YV8gPSByZWFzb247XG5cbiAgICBhc3luY0NhbGwocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBjYWxsYmFja3MgPSBwcm9taXNlLnRoZW5fO1xuICBwcm9taXNlLnRoZW5fID0gdW5kZWZpbmVkO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgaW52b2tlQ2FsbGJhY2soY2FsbGJhY2tzW2ldKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoRnVsZmlsbG1lbnQocHJvbWlzZSl7XG4gIHByb21pc2Uuc3RhdGVfID0gRlVMRklMTEVEO1xuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2Upe1xuICBwcm9taXNlLnN0YXRlXyA9IFJFSkVDVEVEO1xuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG4vKipcbiogQGNsYXNzXG4qL1xuZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcil7XG4gIGlmICh0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZSBjb25zdHJ1Y3RvciB0YWtlcyBhIGZ1bmN0aW9uIGFyZ3VtZW50Jyk7XG5cbiAgaWYgKHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID09PSBmYWxzZSlcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGYWlsZWQgdG8gY29uc3RydWN0IFxcJ1Byb21pc2VcXCc6IFBsZWFzZSB1c2UgdGhlIFxcJ25ld1xcJyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLicpO1xuXG4gIHRoaXMudGhlbl8gPSBbXTtcblxuICBpbnZva2VSZXNvbHZlcihyZXNvbHZlciwgdGhpcyk7XG59XG5cblByb21pc2UucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUHJvbWlzZSxcblxuICBzdGF0ZV86IFBFTkRJTkcsXG4gIHRoZW5fOiBudWxsLFxuICBkYXRhXzogdW5kZWZpbmVkLFxuXG4gIHRoZW46IGZ1bmN0aW9uKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKXtcbiAgICB2YXIgc3Vic2NyaWJlciA9IHtcbiAgICAgIG93bmVyOiB0aGlzLFxuICAgICAgdGhlbjogbmV3IHRoaXMuY29uc3RydWN0b3IoTk9PUCksXG4gICAgICBmdWxmaWxsZWQ6IG9uRnVsZmlsbG1lbnQsXG4gICAgICByZWplY3RlZDogb25SZWplY3Rpb25cbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuc3RhdGVfID09PSBGVUxGSUxMRUQgfHwgdGhpcy5zdGF0ZV8gPT09IFJFSkVDVEVEKVxuICAgIHtcbiAgICAgIC8vIGFscmVhZHkgcmVzb2x2ZWQsIGNhbGwgY2FsbGJhY2sgYXN5bmNcbiAgICAgIGFzeW5jQ2FsbChpbnZva2VDYWxsYmFjaywgc3Vic2NyaWJlcik7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAvLyBzdWJzY3JpYmVcbiAgICAgIHRoaXMudGhlbl8ucHVzaChzdWJzY3JpYmVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3Vic2NyaWJlci50aGVuO1xuICB9LFxuXG4gICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gIH1cbn07XG5cblByb21pc2UuYWxsID0gZnVuY3Rpb24ocHJvbWlzZXMpe1xuICB2YXIgQ2xhc3MgPSB0aGlzO1xuXG4gIGlmICghaXNBcnJheShwcm9taXNlcykpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byBQcm9taXNlLmFsbCgpLicpO1xuXG4gIHJldHVybiBuZXcgQ2xhc3MoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHZhciByZW1haW5pbmcgPSAwO1xuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZXIoaW5kZXgpe1xuICAgICAgcmVtYWluaW5nKys7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICByZXN1bHRzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICBpZiAoIS0tcmVtYWluaW5nKVxuICAgICAgICAgIHJlc29sdmUocmVzdWx0cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwLCBwcm9taXNlOyBpIDwgcHJvbWlzZXMubGVuZ3RoOyBpKyspXG4gICAge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2VzW2ldO1xuXG4gICAgICBpZiAocHJvbWlzZSAmJiB0eXBlb2YgcHJvbWlzZS50aGVuID09PSAnZnVuY3Rpb24nKVxuICAgICAgICBwcm9taXNlLnRoZW4ocmVzb2x2ZXIoaSksIHJlamVjdCk7XG4gICAgICBlbHNlXG4gICAgICAgIHJlc3VsdHNbaV0gPSBwcm9taXNlO1xuICAgIH1cblxuICAgIGlmICghcmVtYWluaW5nKVxuICAgICAgcmVzb2x2ZShyZXN1bHRzKTtcbiAgfSk7XG59O1xuXG5Qcm9taXNlLnJhY2UgPSBmdW5jdGlvbihwcm9taXNlcyl7XG4gIHZhciBDbGFzcyA9IHRoaXM7XG5cbiAgaWYgKCFpc0FycmF5KHByb21pc2VzKSlcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIFByb21pc2UucmFjZSgpLicpO1xuXG4gIHJldHVybiBuZXcgQ2xhc3MoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIHByb21pc2U7IGkgPCBwcm9taXNlcy5sZW5ndGg7IGkrKylcbiAgICB7XG4gICAgICBwcm9taXNlID0gcHJvbWlzZXNbaV07XG5cbiAgICAgIGlmIChwcm9taXNlICYmIHR5cGVvZiBwcm9taXNlLnRoZW4gPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgZWxzZVxuICAgICAgICByZXNvbHZlKHByb21pc2UpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5Qcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSl7XG4gIHZhciBDbGFzcyA9IHRoaXM7XG5cbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IENsYXNzKVxuICAgIHJldHVybiB2YWx1ZTtcblxuICByZXR1cm4gbmV3IENsYXNzKGZ1bmN0aW9uKHJlc29sdmUpe1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9KTtcbn07XG5cblByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKXtcbiAgdmFyIENsYXNzID0gdGhpcztcblxuICByZXR1cm4gbmV3IENsYXNzKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xufTtcblxufSkodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzKTtcbiIsICIvKlxub2JqZWN0LWFzc2lnblxuKGMpIFNpbmRyZSBTb3JodXNcbkBsaWNlbnNlIE1JVFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbnZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBwcm9wSXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuZnVuY3Rpb24gdG9PYmplY3QodmFsKSB7XG5cdGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHR9XG5cblx0cmV0dXJuIE9iamVjdCh2YWwpO1xufVxuXG5mdW5jdGlvbiBzaG91bGRVc2VOYXRpdmUoKSB7XG5cdHRyeSB7XG5cdFx0aWYgKCFPYmplY3QuYXNzaWduKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZWN0IGJ1Z2d5IHByb3BlcnR5IGVudW1lcmF0aW9uIG9yZGVyIGluIG9sZGVyIFY4IHZlcnNpb25zLlxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDExOFxuXHRcdHZhciB0ZXN0MSA9IG5ldyBTdHJpbmcoJ2FiYycpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXctd3JhcHBlcnNcblx0XHR0ZXN0MVs1XSA9ICdkZSc7XG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QxKVswXSA9PT0gJzUnKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NlxuXHRcdHZhciB0ZXN0MiA9IHt9O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xuXHRcdFx0dGVzdDJbJ18nICsgU3RyaW5nLmZyb21DaGFyQ29kZShpKV0gPSBpO1xuXHRcdH1cblx0XHR2YXIgb3JkZXIyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDIpLm1hcChmdW5jdGlvbiAobikge1xuXHRcdFx0cmV0dXJuIHRlc3QyW25dO1xuXHRcdH0pO1xuXHRcdGlmIChvcmRlcjIuam9pbignJykgIT09ICcwMTIzNDU2Nzg5Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHR2YXIgdGVzdDMgPSB7fTtcblx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChsZXR0ZXIpIHtcblx0XHRcdHRlc3QzW2xldHRlcl0gPSBsZXR0ZXI7XG5cdFx0fSk7XG5cdFx0aWYgKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIHRlc3QzKSkuam9pbignJykgIT09XG5cdFx0XHRcdCdhYmNkZWZnaGlqa2xtbm9wcXJzdCcpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0Ly8gV2UgZG9uJ3QgZXhwZWN0IGFueSBvZiB0aGUgYWJvdmUgdG8gdGhyb3csIGJ1dCBiZXR0ZXIgdG8gYmUgc2FmZS5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVc2VOYXRpdmUoKSA/IE9iamVjdC5hc3NpZ24gOiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcblx0dmFyIGZyb207XG5cdHZhciB0byA9IHRvT2JqZWN0KHRhcmdldCk7XG5cdHZhciBzeW1ib2xzO1xuXG5cdGZvciAodmFyIHMgPSAxOyBzIDwgYXJndW1lbnRzLmxlbmd0aDsgcysrKSB7XG5cdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXG5cdFx0Zm9yICh2YXIga2V5IGluIGZyb20pIHtcblx0XHRcdGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcblx0XHRcdFx0dG9ba2V5XSA9IGZyb21ba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG5cdFx0XHRzeW1ib2xzID0gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHR0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdG87XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcbiAgLCBwcmVmaXggPSAnfic7XG5cbi8qKlxuICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIGEgc3RvcmFnZSBmb3Igb3VyIGBFRWAgb2JqZWN0cy5cbiAqIEFuIGBFdmVudHNgIGluc3RhbmNlIGlzIGEgcGxhaW4gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgYXJlIGV2ZW50IG5hbWVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRXZlbnRzKCkge31cblxuLy9cbi8vIFdlIHRyeSB0byBub3QgaW5oZXJpdCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC4gSW4gc29tZSBlbmdpbmVzIGNyZWF0aW5nIGFuXG4vLyBpbnN0YW5jZSBpbiB0aGlzIHdheSBpcyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGBPYmplY3QuY3JlYXRlKG51bGwpYCBkaXJlY3RseS5cbi8vIElmIGBPYmplY3QuY3JlYXRlKG51bGwpYCBpcyBub3Qgc3VwcG9ydGVkIHdlIHByZWZpeCB0aGUgZXZlbnQgbmFtZXMgd2l0aCBhXG4vLyBjaGFyYWN0ZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJ1aWx0LWluIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBub3Rcbi8vIG92ZXJyaWRkZW4gb3IgdXNlZCBhcyBhbiBhdHRhY2sgdmVjdG9yLlxuLy9cbmlmIChPYmplY3QuY3JlYXRlKSB7XG4gIEV2ZW50cy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIC8vXG4gIC8vIFRoaXMgaGFjayBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgYF9fcHJvdG9fX2AgcHJvcGVydHkgaXMgc3RpbGwgaW5oZXJpdGVkIGluXG4gIC8vIHNvbWUgb2xkIGJyb3dzZXJzIGxpa2UgQW5kcm9pZCA0LCBpUGhvbmUgNS4xLCBPcGVyYSAxMSBhbmQgU2FmYXJpIDUuXG4gIC8vXG4gIGlmICghbmV3IEV2ZW50cygpLl9fcHJvdG9fXykgcHJlZml4ID0gZmFsc2U7XG59XG5cbi8qKlxuICogUmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgZXZlbnQgbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29uY2U9ZmFsc2VdIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEVFKGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHRoaXMuZm4gPSBmbjtcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5vbmNlID0gb25jZSB8fCBmYWxzZTtcbn1cblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZExpc3RlbmVyKGVtaXR0ZXIsIGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IGVtaXR0ZXIsIG9uY2UpXG4gICAgLCBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0pIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gbGlzdGVuZXIsIGVtaXR0ZXIuX2V2ZW50c0NvdW50Kys7XG4gIGVsc2UgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XS5mbikgZW1pdHRlci5fZXZlbnRzW2V2dF0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2UgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBbZW1pdHRlci5fZXZlbnRzW2V2dF0sIGxpc3RlbmVyXTtcblxuICByZXR1cm4gZW1pdHRlcjtcbn1cblxuLyoqXG4gKiBDbGVhciBldmVudCBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZ0IFRoZSBFdmVudCBuYW1lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJFdmVudChlbWl0dGVyLCBldnQpIHtcbiAgaWYgKC0tZW1pdHRlci5fZXZlbnRzQ291bnQgPT09IDApIGVtaXR0ZXIuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgZWxzZSBkZWxldGUgZW1pdHRlci5fZXZlbnRzW2V2dF07XG59XG5cbi8qKlxuICogTWluaW1hbCBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UgdGhhdCBpcyBtb2xkZWQgYWdhaW5zdCB0aGUgTm9kZS5qc1xuICogYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xufVxuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBsaXN0aW5nIHRoZSBldmVudHMgZm9yIHdoaWNoIHRoZSBlbWl0dGVyIGhhcyByZWdpc3RlcmVkXG4gKiBsaXN0ZW5lcnMuXG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICB2YXIgbmFtZXMgPSBbXVxuICAgICwgZXZlbnRzXG4gICAgLCBuYW1lO1xuXG4gIGlmICh0aGlzLl9ldmVudHNDb3VudCA9PT0gMCkgcmV0dXJuIG5hbWVzO1xuXG4gIGZvciAobmFtZSBpbiAoZXZlbnRzID0gdGhpcy5fZXZlbnRzKSkge1xuICAgIGlmIChoYXMuY2FsbChldmVudHMsIG5hbWUpKSBuYW1lcy5wdXNoKHByZWZpeCA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lKTtcbiAgfVxuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgcmV0dXJuIG5hbWVzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGV2ZW50cykpO1xuICB9XG5cbiAgcmV0dXJuIG5hbWVzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtBcnJheX0gVGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgaGFuZGxlcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWhhbmRsZXJzKSByZXR1cm4gW107XG4gIGlmIChoYW5kbGVycy5mbikgcmV0dXJuIFtoYW5kbGVycy5mbl07XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGgsIGVlID0gbmV3IEFycmF5KGwpOyBpIDwgbDsgaSsrKSB7XG4gICAgZWVbaV0gPSBoYW5kbGVyc1tpXS5mbjtcbiAgfVxuXG4gIHJldHVybiBlZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBudW1iZXIgb2YgbGlzdGVuZXJzIGxpc3RlbmluZyB0byBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1iZXIgb2YgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWxpc3RlbmVycykgcmV0dXJuIDA7XG4gIGlmIChsaXN0ZW5lcnMuZm4pIHJldHVybiAxO1xuICByZXR1cm4gbGlzdGVuZXJzLmxlbmd0aDtcbn07XG5cbi8qKlxuICogQ2FsbHMgZWFjaCBvZiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFkIGxpc3RlbmVycywgZWxzZSBgZmFsc2VgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50LCBhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XVxuICAgICwgbGVuID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICwgYXJnc1xuICAgICwgaTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKGxpc3RlbmVycy5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnMuZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgY2FzZSAxOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQpLCB0cnVlO1xuICAgICAgY2FzZSAyOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExKSwgdHJ1ZTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIpLCB0cnVlO1xuICAgICAgY2FzZSA0OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMpLCB0cnVlO1xuICAgICAgY2FzZSA1OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgNjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCwgYTUpLCB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMuZm4uYXBwbHkobGlzdGVuZXJzLmNvbnRleHQsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoXG4gICAgICAsIGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsaXN0ZW5lcnNbaV0ub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzW2ldLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgICBjYXNlIDE6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0KTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMjogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMzogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMik7IGJyZWFrO1xuICAgICAgICBjYXNlIDQ6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIsIGEzKTsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKCFhcmdzKSBmb3IgKGogPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmFwcGx5KGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgZmFsc2UpO1xufTtcblxuLyoqXG4gKiBBZGQgYSBvbmUtdGltZSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZShldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgdHJ1ZSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgbGlzdGVuZXJzIG9mIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IG1hdGNoIHRoaXMgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IGhhdmUgdGhpcyBjb250ZXh0LlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIE9ubHkgcmVtb3ZlIG9uZS10aW1lIGxpc3RlbmVycy5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gdGhpcztcbiAgaWYgKCFmbikge1xuICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKFxuICAgICAgbGlzdGVuZXJzLmZuID09PSBmbiAmJlxuICAgICAgKCFvbmNlIHx8IGxpc3RlbmVycy5vbmNlKSAmJlxuICAgICAgKCFjb250ZXh0IHx8IGxpc3RlbmVycy5jb250ZXh0ID09PSBjb250ZXh0KVxuICAgICkge1xuICAgICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMCwgZXZlbnRzID0gW10sIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBsaXN0ZW5lcnNbaV0uZm4gIT09IGZuIHx8XG4gICAgICAgIChvbmNlICYmICFsaXN0ZW5lcnNbaV0ub25jZSkgfHxcbiAgICAgICAgKGNvbnRleHQgJiYgbGlzdGVuZXJzW2ldLmNvbnRleHQgIT09IGNvbnRleHQpXG4gICAgICApIHtcbiAgICAgICAgZXZlbnRzLnB1c2gobGlzdGVuZXJzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIFJlc2V0IHRoZSBhcnJheSwgb3IgcmVtb3ZlIGl0IGNvbXBsZXRlbHkgaWYgd2UgaGF2ZSBubyBtb3JlIGxpc3RlbmVycy5cbiAgICAvL1xuICAgIGlmIChldmVudHMubGVuZ3RoKSB0aGlzLl9ldmVudHNbZXZ0XSA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBldmVudHNbMF0gOiBldmVudHM7XG4gICAgZWxzZSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBsaXN0ZW5lcnMsIG9yIHRob3NlIG9mIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IFtldmVudF0gVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQ7XG5cbiAgaWYgKGV2ZW50KSB7XG4gICAgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcbiAgICBpZiAodGhpcy5fZXZlbnRzW2V2dF0pIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vL1xuLy8gQWxpYXMgbWV0aG9kcyBuYW1lcyBiZWNhdXNlIHBlb3BsZSByb2xsIGxpa2UgdGhhdC5cbi8vXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgcHJlZml4LlxuLy9cbkV2ZW50RW1pdHRlci5wcmVmaXhlZCA9IHByZWZpeDtcblxuLy9cbi8vIEFsbG93IGBFdmVudEVtaXR0ZXJgIHRvIGJlIGltcG9ydGVkIGFzIG1vZHVsZSBuYW1lc3BhY2UuXG4vL1xuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuLy9cbmlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG1vZHVsZSkge1xuICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZWFyY3V0O1xubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGVhcmN1dDtcblxuZnVuY3Rpb24gZWFyY3V0KGRhdGEsIGhvbGVJbmRpY2VzLCBkaW0pIHtcblxuICAgIGRpbSA9IGRpbSB8fCAyO1xuXG4gICAgdmFyIGhhc0hvbGVzID0gaG9sZUluZGljZXMgJiYgaG9sZUluZGljZXMubGVuZ3RoLFxuICAgICAgICBvdXRlckxlbiA9IGhhc0hvbGVzID8gaG9sZUluZGljZXNbMF0gKiBkaW0gOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgb3V0ZXJOb2RlID0gbGlua2VkTGlzdChkYXRhLCAwLCBvdXRlckxlbiwgZGltLCB0cnVlKSxcbiAgICAgICAgdHJpYW5nbGVzID0gW107XG5cbiAgICBpZiAoIW91dGVyTm9kZSB8fCBvdXRlck5vZGUubmV4dCA9PT0gb3V0ZXJOb2RlLnByZXYpIHJldHVybiB0cmlhbmdsZXM7XG5cbiAgICB2YXIgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgeCwgeSwgaW52U2l6ZTtcblxuICAgIGlmIChoYXNIb2xlcykgb3V0ZXJOb2RlID0gZWxpbWluYXRlSG9sZXMoZGF0YSwgaG9sZUluZGljZXMsIG91dGVyTm9kZSwgZGltKTtcblxuICAgIC8vIGlmIHRoZSBzaGFwZSBpcyBub3QgdG9vIHNpbXBsZSwgd2UnbGwgdXNlIHotb3JkZXIgY3VydmUgaGFzaCBsYXRlcjsgY2FsY3VsYXRlIHBvbHlnb24gYmJveFxuICAgIGlmIChkYXRhLmxlbmd0aCA+IDgwICogZGltKSB7XG4gICAgICAgIG1pblggPSBtYXhYID0gZGF0YVswXTtcbiAgICAgICAgbWluWSA9IG1heFkgPSBkYXRhWzFdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBkaW07IGkgPCBvdXRlckxlbjsgaSArPSBkaW0pIHtcbiAgICAgICAgICAgIHggPSBkYXRhW2ldO1xuICAgICAgICAgICAgeSA9IGRhdGFbaSArIDFdO1xuICAgICAgICAgICAgaWYgKHggPCBtaW5YKSBtaW5YID0geDtcbiAgICAgICAgICAgIGlmICh5IDwgbWluWSkgbWluWSA9IHk7XG4gICAgICAgICAgICBpZiAoeCA+IG1heFgpIG1heFggPSB4O1xuICAgICAgICAgICAgaWYgKHkgPiBtYXhZKSBtYXhZID0geTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1pblgsIG1pblkgYW5kIGludlNpemUgYXJlIGxhdGVyIHVzZWQgdG8gdHJhbnNmb3JtIGNvb3JkcyBpbnRvIGludGVnZXJzIGZvciB6LW9yZGVyIGNhbGN1bGF0aW9uXG4gICAgICAgIGludlNpemUgPSBNYXRoLm1heChtYXhYIC0gbWluWCwgbWF4WSAtIG1pblkpO1xuICAgICAgICBpbnZTaXplID0gaW52U2l6ZSAhPT0gMCA/IDEgLyBpbnZTaXplIDogMDtcbiAgICB9XG5cbiAgICBlYXJjdXRMaW5rZWQob3V0ZXJOb2RlLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG5cbiAgICByZXR1cm4gdHJpYW5nbGVzO1xufVxuXG4vLyBjcmVhdGUgYSBjaXJjdWxhciBkb3VibHkgbGlua2VkIGxpc3QgZnJvbSBwb2x5Z29uIHBvaW50cyBpbiB0aGUgc3BlY2lmaWVkIHdpbmRpbmcgb3JkZXJcbmZ1bmN0aW9uIGxpbmtlZExpc3QoZGF0YSwgc3RhcnQsIGVuZCwgZGltLCBjbG9ja3dpc2UpIHtcbiAgICB2YXIgaSwgbGFzdDtcblxuICAgIGlmIChjbG9ja3dpc2UgPT09IChzaWduZWRBcmVhKGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSkgPiAwKSkge1xuICAgICAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSBkaW0pIGxhc3QgPSBpbnNlcnROb2RlKGksIGRhdGFbaV0sIGRhdGFbaSArIDFdLCBsYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGkgPSBlbmQgLSBkaW07IGkgPj0gc3RhcnQ7IGkgLT0gZGltKSBsYXN0ID0gaW5zZXJ0Tm9kZShpLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgbGFzdCk7XG4gICAgfVxuXG4gICAgaWYgKGxhc3QgJiYgZXF1YWxzKGxhc3QsIGxhc3QubmV4dCkpIHtcbiAgICAgICAgcmVtb3ZlTm9kZShsYXN0KTtcbiAgICAgICAgbGFzdCA9IGxhc3QubmV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gbGFzdDtcbn1cblxuLy8gZWxpbWluYXRlIGNvbGluZWFyIG9yIGR1cGxpY2F0ZSBwb2ludHNcbmZ1bmN0aW9uIGZpbHRlclBvaW50cyhzdGFydCwgZW5kKSB7XG4gICAgaWYgKCFzdGFydCkgcmV0dXJuIHN0YXJ0O1xuICAgIGlmICghZW5kKSBlbmQgPSBzdGFydDtcblxuICAgIHZhciBwID0gc3RhcnQsXG4gICAgICAgIGFnYWluO1xuICAgIGRvIHtcbiAgICAgICAgYWdhaW4gPSBmYWxzZTtcblxuICAgICAgICBpZiAoIXAuc3RlaW5lciAmJiAoZXF1YWxzKHAsIHAubmV4dCkgfHwgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPT09IDApKSB7XG4gICAgICAgICAgICByZW1vdmVOb2RlKHApO1xuICAgICAgICAgICAgcCA9IGVuZCA9IHAucHJldjtcbiAgICAgICAgICAgIGlmIChwID09PSBwLm5leHQpIGJyZWFrO1xuICAgICAgICAgICAgYWdhaW4gPSB0cnVlO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwID0gcC5uZXh0O1xuICAgICAgICB9XG4gICAgfSB3aGlsZSAoYWdhaW4gfHwgcCAhPT0gZW5kKTtcblxuICAgIHJldHVybiBlbmQ7XG59XG5cbi8vIG1haW4gZWFyIHNsaWNpbmcgbG9vcCB3aGljaCB0cmlhbmd1bGF0ZXMgYSBwb2x5Z29uIChnaXZlbiBhcyBhIGxpbmtlZCBsaXN0KVxuZnVuY3Rpb24gZWFyY3V0TGlua2VkKGVhciwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIHBhc3MpIHtcbiAgICBpZiAoIWVhcikgcmV0dXJuO1xuXG4gICAgLy8gaW50ZXJsaW5rIHBvbHlnb24gbm9kZXMgaW4gei1vcmRlclxuICAgIGlmICghcGFzcyAmJiBpbnZTaXplKSBpbmRleEN1cnZlKGVhciwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG5cbiAgICB2YXIgc3RvcCA9IGVhcixcbiAgICAgICAgcHJldiwgbmV4dDtcblxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBlYXJzLCBzbGljaW5nIHRoZW0gb25lIGJ5IG9uZVxuICAgIHdoaWxlIChlYXIucHJldiAhPT0gZWFyLm5leHQpIHtcbiAgICAgICAgcHJldiA9IGVhci5wcmV2O1xuICAgICAgICBuZXh0ID0gZWFyLm5leHQ7XG5cbiAgICAgICAgaWYgKGludlNpemUgPyBpc0Vhckhhc2hlZChlYXIsIG1pblgsIG1pblksIGludlNpemUpIDogaXNFYXIoZWFyKSkge1xuICAgICAgICAgICAgLy8gY3V0IG9mZiB0aGUgdHJpYW5nbGVcbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKHByZXYuaSAvIGRpbSk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChlYXIuaSAvIGRpbSk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChuZXh0LmkgLyBkaW0pO1xuXG4gICAgICAgICAgICByZW1vdmVOb2RlKGVhcik7XG5cbiAgICAgICAgICAgIC8vIHNraXBwaW5nIHRoZSBuZXh0IHZlcnRleCBsZWFkcyB0byBsZXNzIHNsaXZlciB0cmlhbmdsZXNcbiAgICAgICAgICAgIGVhciA9IG5leHQubmV4dDtcbiAgICAgICAgICAgIHN0b3AgPSBuZXh0Lm5leHQ7XG5cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZWFyID0gbmV4dDtcblxuICAgICAgICAvLyBpZiB3ZSBsb29wZWQgdGhyb3VnaCB0aGUgd2hvbGUgcmVtYWluaW5nIHBvbHlnb24gYW5kIGNhbid0IGZpbmQgYW55IG1vcmUgZWFyc1xuICAgICAgICBpZiAoZWFyID09PSBzdG9wKSB7XG4gICAgICAgICAgICAvLyB0cnkgZmlsdGVyaW5nIHBvaW50cyBhbmQgc2xpY2luZyBhZ2FpblxuICAgICAgICAgICAgaWYgKCFwYXNzKSB7XG4gICAgICAgICAgICAgICAgZWFyY3V0TGlua2VkKGZpbHRlclBvaW50cyhlYXIpLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgMSk7XG5cbiAgICAgICAgICAgIC8vIGlmIHRoaXMgZGlkbid0IHdvcmssIHRyeSBjdXJpbmcgYWxsIHNtYWxsIHNlbGYtaW50ZXJzZWN0aW9ucyBsb2NhbGx5XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhc3MgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBlYXIgPSBjdXJlTG9jYWxJbnRlcnNlY3Rpb25zKGZpbHRlclBvaW50cyhlYXIpLCB0cmlhbmdsZXMsIGRpbSk7XG4gICAgICAgICAgICAgICAgZWFyY3V0TGlua2VkKGVhciwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDIpO1xuXG4gICAgICAgICAgICAvLyBhcyBhIGxhc3QgcmVzb3J0LCB0cnkgc3BsaXR0aW5nIHRoZSByZW1haW5pbmcgcG9seWdvbiBpbnRvIHR3b1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXNzID09PSAyKSB7XG4gICAgICAgICAgICAgICAgc3BsaXRFYXJjdXQoZWFyLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBjaGVjayB3aGV0aGVyIGEgcG9seWdvbiBub2RlIGZvcm1zIGEgdmFsaWQgZWFyIHdpdGggYWRqYWNlbnQgbm9kZXNcbmZ1bmN0aW9uIGlzRWFyKGVhcikge1xuICAgIHZhciBhID0gZWFyLnByZXYsXG4gICAgICAgIGIgPSBlYXIsXG4gICAgICAgIGMgPSBlYXIubmV4dDtcblxuICAgIGlmIChhcmVhKGEsIGIsIGMpID49IDApIHJldHVybiBmYWxzZTsgLy8gcmVmbGV4LCBjYW4ndCBiZSBhbiBlYXJcblxuICAgIC8vIG5vdyBtYWtlIHN1cmUgd2UgZG9uJ3QgaGF2ZSBvdGhlciBwb2ludHMgaW5zaWRlIHRoZSBwb3RlbnRpYWwgZWFyXG4gICAgdmFyIHAgPSBlYXIubmV4dC5uZXh0O1xuXG4gICAgd2hpbGUgKHAgIT09IGVhci5wcmV2KSB7XG4gICAgICAgIGlmIChwb2ludEluVHJpYW5nbGUoYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgcC54LCBwLnkpICYmXG4gICAgICAgICAgICBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGlzRWFySGFzaGVkKGVhciwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIHZhciBhID0gZWFyLnByZXYsXG4gICAgICAgIGIgPSBlYXIsXG4gICAgICAgIGMgPSBlYXIubmV4dDtcblxuICAgIGlmIChhcmVhKGEsIGIsIGMpID49IDApIHJldHVybiBmYWxzZTsgLy8gcmVmbGV4LCBjYW4ndCBiZSBhbiBlYXJcblxuICAgIC8vIHRyaWFuZ2xlIGJib3g7IG1pbiAmIG1heCBhcmUgY2FsY3VsYXRlZCBsaWtlIHRoaXMgZm9yIHNwZWVkXG4gICAgdmFyIG1pblRYID0gYS54IDwgYi54ID8gKGEueCA8IGMueCA/IGEueCA6IGMueCkgOiAoYi54IDwgYy54ID8gYi54IDogYy54KSxcbiAgICAgICAgbWluVFkgPSBhLnkgPCBiLnkgPyAoYS55IDwgYy55ID8gYS55IDogYy55KSA6IChiLnkgPCBjLnkgPyBiLnkgOiBjLnkpLFxuICAgICAgICBtYXhUWCA9IGEueCA+IGIueCA/IChhLnggPiBjLnggPyBhLnggOiBjLngpIDogKGIueCA+IGMueCA/IGIueCA6IGMueCksXG4gICAgICAgIG1heFRZID0gYS55ID4gYi55ID8gKGEueSA+IGMueSA/IGEueSA6IGMueSkgOiAoYi55ID4gYy55ID8gYi55IDogYy55KTtcblxuICAgIC8vIHotb3JkZXIgcmFuZ2UgZm9yIHRoZSBjdXJyZW50IHRyaWFuZ2xlIGJib3g7XG4gICAgdmFyIG1pblogPSB6T3JkZXIobWluVFgsIG1pblRZLCBtaW5YLCBtaW5ZLCBpbnZTaXplKSxcbiAgICAgICAgbWF4WiA9IHpPcmRlcihtYXhUWCwgbWF4VFksIG1pblgsIG1pblksIGludlNpemUpO1xuXG4gICAgdmFyIHAgPSBlYXIucHJldlosXG4gICAgICAgIG4gPSBlYXIubmV4dFo7XG5cbiAgICAvLyBsb29rIGZvciBwb2ludHMgaW5zaWRlIHRoZSB0cmlhbmdsZSBpbiBib3RoIGRpcmVjdGlvbnNcbiAgICB3aGlsZSAocCAmJiBwLnogPj0gbWluWiAmJiBuICYmIG4ueiA8PSBtYXhaKSB7XG4gICAgICAgIGlmIChwICE9PSBlYXIucHJldiAmJiBwICE9PSBlYXIubmV4dCAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIHAueCwgcC55KSAmJlxuICAgICAgICAgICAgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwID0gcC5wcmV2WjtcblxuICAgICAgICBpZiAobiAhPT0gZWFyLnByZXYgJiYgbiAhPT0gZWFyLm5leHQgJiZcbiAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBuLngsIG4ueSkgJiZcbiAgICAgICAgICAgIGFyZWEobi5wcmV2LCBuLCBuLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgbiA9IG4ubmV4dFo7XG4gICAgfVxuXG4gICAgLy8gbG9vayBmb3IgcmVtYWluaW5nIHBvaW50cyBpbiBkZWNyZWFzaW5nIHotb3JkZXJcbiAgICB3aGlsZSAocCAmJiBwLnogPj0gbWluWikge1xuICAgICAgICBpZiAocCAhPT0gZWFyLnByZXYgJiYgcCAhPT0gZWFyLm5leHQgJiZcbiAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBwLngsIHAueSkgJiZcbiAgICAgICAgICAgIGFyZWEocC5wcmV2LCBwLCBwLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgcCA9IHAucHJldlo7XG4gICAgfVxuXG4gICAgLy8gbG9vayBmb3IgcmVtYWluaW5nIHBvaW50cyBpbiBpbmNyZWFzaW5nIHotb3JkZXJcbiAgICB3aGlsZSAobiAmJiBuLnogPD0gbWF4Wikge1xuICAgICAgICBpZiAobiAhPT0gZWFyLnByZXYgJiYgbiAhPT0gZWFyLm5leHQgJiZcbiAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBuLngsIG4ueSkgJiZcbiAgICAgICAgICAgIGFyZWEobi5wcmV2LCBuLCBuLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgbiA9IG4ubmV4dFo7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8vIGdvIHRocm91Z2ggYWxsIHBvbHlnb24gbm9kZXMgYW5kIGN1cmUgc21hbGwgbG9jYWwgc2VsZi1pbnRlcnNlY3Rpb25zXG5mdW5jdGlvbiBjdXJlTG9jYWxJbnRlcnNlY3Rpb25zKHN0YXJ0LCB0cmlhbmdsZXMsIGRpbSkge1xuICAgIHZhciBwID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICB2YXIgYSA9IHAucHJldixcbiAgICAgICAgICAgIGIgPSBwLm5leHQubmV4dDtcblxuICAgICAgICBpZiAoIWVxdWFscyhhLCBiKSAmJiBpbnRlcnNlY3RzKGEsIHAsIHAubmV4dCwgYikgJiYgbG9jYWxseUluc2lkZShhLCBiKSAmJiBsb2NhbGx5SW5zaWRlKGIsIGEpKSB7XG5cbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKGEuaSAvIGRpbSk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChwLmkgLyBkaW0pO1xuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2goYi5pIC8gZGltKTtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHR3byBub2RlcyBpbnZvbHZlZFxuICAgICAgICAgICAgcmVtb3ZlTm9kZShwKTtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUocC5uZXh0KTtcblxuICAgICAgICAgICAgcCA9IHN0YXJ0ID0gYjtcbiAgICAgICAgfVxuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHJldHVybiBmaWx0ZXJQb2ludHMocCk7XG59XG5cbi8vIHRyeSBzcGxpdHRpbmcgcG9seWdvbiBpbnRvIHR3byBhbmQgdHJpYW5ndWxhdGUgdGhlbSBpbmRlcGVuZGVudGx5XG5mdW5jdGlvbiBzcGxpdEVhcmN1dChzdGFydCwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICAvLyBsb29rIGZvciBhIHZhbGlkIGRpYWdvbmFsIHRoYXQgZGl2aWRlcyB0aGUgcG9seWdvbiBpbnRvIHR3b1xuICAgIHZhciBhID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICB2YXIgYiA9IGEubmV4dC5uZXh0O1xuICAgICAgICB3aGlsZSAoYiAhPT0gYS5wcmV2KSB7XG4gICAgICAgICAgICBpZiAoYS5pICE9PSBiLmkgJiYgaXNWYWxpZERpYWdvbmFsKGEsIGIpKSB7XG4gICAgICAgICAgICAgICAgLy8gc3BsaXQgdGhlIHBvbHlnb24gaW4gdHdvIGJ5IHRoZSBkaWFnb25hbFxuICAgICAgICAgICAgICAgIHZhciBjID0gc3BsaXRQb2x5Z29uKGEsIGIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlsdGVyIGNvbGluZWFyIHBvaW50cyBhcm91bmQgdGhlIGN1dHNcbiAgICAgICAgICAgICAgICBhID0gZmlsdGVyUG9pbnRzKGEsIGEubmV4dCk7XG4gICAgICAgICAgICAgICAgYyA9IGZpbHRlclBvaW50cyhjLCBjLm5leHQpO1xuXG4gICAgICAgICAgICAgICAgLy8gcnVuIGVhcmN1dCBvbiBlYWNoIGhhbGZcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoYSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpO1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChjLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYiA9IGIubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBhID0gYS5uZXh0O1xuICAgIH0gd2hpbGUgKGEgIT09IHN0YXJ0KTtcbn1cblxuLy8gbGluayBldmVyeSBob2xlIGludG8gdGhlIG91dGVyIGxvb3AsIHByb2R1Y2luZyBhIHNpbmdsZS1yaW5nIHBvbHlnb24gd2l0aG91dCBob2xlc1xuZnVuY3Rpb24gZWxpbWluYXRlSG9sZXMoZGF0YSwgaG9sZUluZGljZXMsIG91dGVyTm9kZSwgZGltKSB7XG4gICAgdmFyIHF1ZXVlID0gW10sXG4gICAgICAgIGksIGxlbiwgc3RhcnQsIGVuZCwgbGlzdDtcblxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHN0YXJ0ID0gaG9sZUluZGljZXNbaV0gKiBkaW07XG4gICAgICAgIGVuZCA9IGkgPCBsZW4gLSAxID8gaG9sZUluZGljZXNbaSArIDFdICogZGltIDogZGF0YS5sZW5ndGg7XG4gICAgICAgIGxpc3QgPSBsaW5rZWRMaXN0KGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSwgZmFsc2UpO1xuICAgICAgICBpZiAobGlzdCA9PT0gbGlzdC5uZXh0KSBsaXN0LnN0ZWluZXIgPSB0cnVlO1xuICAgICAgICBxdWV1ZS5wdXNoKGdldExlZnRtb3N0KGxpc3QpKTtcbiAgICB9XG5cbiAgICBxdWV1ZS5zb3J0KGNvbXBhcmVYKTtcblxuICAgIC8vIHByb2Nlc3MgaG9sZXMgZnJvbSBsZWZ0IHRvIHJpZ2h0XG4gICAgZm9yIChpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsaW1pbmF0ZUhvbGUocXVldWVbaV0sIG91dGVyTm9kZSk7XG4gICAgICAgIG91dGVyTm9kZSA9IGZpbHRlclBvaW50cyhvdXRlck5vZGUsIG91dGVyTm9kZS5uZXh0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0ZXJOb2RlO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlWChhLCBiKSB7XG4gICAgcmV0dXJuIGEueCAtIGIueDtcbn1cblxuLy8gZmluZCBhIGJyaWRnZSBiZXR3ZWVuIHZlcnRpY2VzIHRoYXQgY29ubmVjdHMgaG9sZSB3aXRoIGFuIG91dGVyIHJpbmcgYW5kIGFuZCBsaW5rIGl0XG5mdW5jdGlvbiBlbGltaW5hdGVIb2xlKGhvbGUsIG91dGVyTm9kZSkge1xuICAgIG91dGVyTm9kZSA9IGZpbmRIb2xlQnJpZGdlKGhvbGUsIG91dGVyTm9kZSk7XG4gICAgaWYgKG91dGVyTm9kZSkge1xuICAgICAgICB2YXIgYiA9IHNwbGl0UG9seWdvbihvdXRlck5vZGUsIGhvbGUpO1xuXG4gICAgICAgIC8vIGZpbHRlciBjb2xsaW5lYXIgcG9pbnRzIGFyb3VuZCB0aGUgY3V0c1xuICAgICAgICBmaWx0ZXJQb2ludHMob3V0ZXJOb2RlLCBvdXRlck5vZGUubmV4dCk7XG4gICAgICAgIGZpbHRlclBvaW50cyhiLCBiLm5leHQpO1xuICAgIH1cbn1cblxuLy8gRGF2aWQgRWJlcmx5J3MgYWxnb3JpdGhtIGZvciBmaW5kaW5nIGEgYnJpZGdlIGJldHdlZW4gaG9sZSBhbmQgb3V0ZXIgcG9seWdvblxuZnVuY3Rpb24gZmluZEhvbGVCcmlkZ2UoaG9sZSwgb3V0ZXJOb2RlKSB7XG4gICAgdmFyIHAgPSBvdXRlck5vZGUsXG4gICAgICAgIGh4ID0gaG9sZS54LFxuICAgICAgICBoeSA9IGhvbGUueSxcbiAgICAgICAgcXggPSAtSW5maW5pdHksXG4gICAgICAgIG07XG5cbiAgICAvLyBmaW5kIGEgc2VnbWVudCBpbnRlcnNlY3RlZCBieSBhIHJheSBmcm9tIHRoZSBob2xlJ3MgbGVmdG1vc3QgcG9pbnQgdG8gdGhlIGxlZnQ7XG4gICAgLy8gc2VnbWVudCdzIGVuZHBvaW50IHdpdGggbGVzc2VyIHggd2lsbCBiZSBwb3RlbnRpYWwgY29ubmVjdGlvbiBwb2ludFxuICAgIGRvIHtcbiAgICAgICAgaWYgKGh5IDw9IHAueSAmJiBoeSA+PSBwLm5leHQueSAmJiBwLm5leHQueSAhPT0gcC55KSB7XG4gICAgICAgICAgICB2YXIgeCA9IHAueCArIChoeSAtIHAueSkgKiAocC5uZXh0LnggLSBwLngpIC8gKHAubmV4dC55IC0gcC55KTtcbiAgICAgICAgICAgIGlmICh4IDw9IGh4ICYmIHggPiBxeCkge1xuICAgICAgICAgICAgICAgIHF4ID0geDtcbiAgICAgICAgICAgICAgICBpZiAoeCA9PT0gaHgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGh5ID09PSBwLnkpIHJldHVybiBwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaHkgPT09IHAubmV4dC55KSByZXR1cm4gcC5uZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtID0gcC54IDwgcC5uZXh0LnggPyBwIDogcC5uZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gb3V0ZXJOb2RlKTtcblxuICAgIGlmICghbSkgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAoaHggPT09IHF4KSByZXR1cm4gbTsgLy8gaG9sZSB0b3VjaGVzIG91dGVyIHNlZ21lbnQ7IHBpY2sgbGVmdG1vc3QgZW5kcG9pbnRcblxuICAgIC8vIGxvb2sgZm9yIHBvaW50cyBpbnNpZGUgdGhlIHRyaWFuZ2xlIG9mIGhvbGUgcG9pbnQsIHNlZ21lbnQgaW50ZXJzZWN0aW9uIGFuZCBlbmRwb2ludDtcbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gcG9pbnRzIGZvdW5kLCB3ZSBoYXZlIGEgdmFsaWQgY29ubmVjdGlvbjtcbiAgICAvLyBvdGhlcndpc2UgY2hvb3NlIHRoZSBwb2ludCBvZiB0aGUgbWluaW11bSBhbmdsZSB3aXRoIHRoZSByYXkgYXMgY29ubmVjdGlvbiBwb2ludFxuXG4gICAgdmFyIHN0b3AgPSBtLFxuICAgICAgICBteCA9IG0ueCxcbiAgICAgICAgbXkgPSBtLnksXG4gICAgICAgIHRhbk1pbiA9IEluZmluaXR5LFxuICAgICAgICB0YW47XG5cbiAgICBwID0gbTtcblxuICAgIGRvIHtcbiAgICAgICAgaWYgKGh4ID49IHAueCAmJiBwLnggPj0gbXggJiYgaHggIT09IHAueCAmJlxuICAgICAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShoeSA8IG15ID8gaHggOiBxeCwgaHksIG14LCBteSwgaHkgPCBteSA/IHF4IDogaHgsIGh5LCBwLngsIHAueSkpIHtcblxuICAgICAgICAgICAgdGFuID0gTWF0aC5hYnMoaHkgLSBwLnkpIC8gKGh4IC0gcC54KTsgLy8gdGFuZ2VudGlhbFxuXG4gICAgICAgICAgICBpZiAobG9jYWxseUluc2lkZShwLCBob2xlKSAmJlxuICAgICAgICAgICAgICAgICh0YW4gPCB0YW5NaW4gfHwgKHRhbiA9PT0gdGFuTWluICYmIChwLnggPiBtLnggfHwgKHAueCA9PT0gbS54ICYmIHNlY3RvckNvbnRhaW5zU2VjdG9yKG0sIHApKSkpKSkge1xuICAgICAgICAgICAgICAgIG0gPSBwO1xuICAgICAgICAgICAgICAgIHRhbk1pbiA9IHRhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gc3RvcCk7XG5cbiAgICByZXR1cm4gbTtcbn1cblxuLy8gd2hldGhlciBzZWN0b3IgaW4gdmVydGV4IG0gY29udGFpbnMgc2VjdG9yIGluIHZlcnRleCBwIGluIHRoZSBzYW1lIGNvb3JkaW5hdGVzXG5mdW5jdGlvbiBzZWN0b3JDb250YWluc1NlY3RvcihtLCBwKSB7XG4gICAgcmV0dXJuIGFyZWEobS5wcmV2LCBtLCBwLnByZXYpIDwgMCAmJiBhcmVhKHAubmV4dCwgbSwgbS5uZXh0KSA8IDA7XG59XG5cbi8vIGludGVybGluayBwb2x5Z29uIG5vZGVzIGluIHotb3JkZXJcbmZ1bmN0aW9uIGluZGV4Q3VydmUoc3RhcnQsIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICB2YXIgcCA9IHN0YXJ0O1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAueiA9PT0gbnVsbCkgcC56ID0gek9yZGVyKHAueCwgcC55LCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcbiAgICAgICAgcC5wcmV2WiA9IHAucHJldjtcbiAgICAgICAgcC5uZXh0WiA9IHAubmV4dDtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBzdGFydCk7XG5cbiAgICBwLnByZXZaLm5leHRaID0gbnVsbDtcbiAgICBwLnByZXZaID0gbnVsbDtcblxuICAgIHNvcnRMaW5rZWQocCk7XG59XG5cbi8vIFNpbW9uIFRhdGhhbSdzIGxpbmtlZCBsaXN0IG1lcmdlIHNvcnQgYWxnb3JpdGhtXG4vLyBodHRwOi8vd3d3LmNoaWFyay5ncmVlbmVuZC5vcmcudWsvfnNndGF0aGFtL2FsZ29yaXRobXMvbGlzdHNvcnQuaHRtbFxuZnVuY3Rpb24gc29ydExpbmtlZChsaXN0KSB7XG4gICAgdmFyIGksIHAsIHEsIGUsIHRhaWwsIG51bU1lcmdlcywgcFNpemUsIHFTaXplLFxuICAgICAgICBpblNpemUgPSAxO1xuXG4gICAgZG8ge1xuICAgICAgICBwID0gbGlzdDtcbiAgICAgICAgbGlzdCA9IG51bGw7XG4gICAgICAgIHRhaWwgPSBudWxsO1xuICAgICAgICBudW1NZXJnZXMgPSAwO1xuXG4gICAgICAgIHdoaWxlIChwKSB7XG4gICAgICAgICAgICBudW1NZXJnZXMrKztcbiAgICAgICAgICAgIHEgPSBwO1xuICAgICAgICAgICAgcFNpemUgPSAwO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGluU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcFNpemUrKztcbiAgICAgICAgICAgICAgICBxID0gcS5uZXh0WjtcbiAgICAgICAgICAgICAgICBpZiAoIXEpIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcVNpemUgPSBpblNpemU7XG5cbiAgICAgICAgICAgIHdoaWxlIChwU2l6ZSA+IDAgfHwgKHFTaXplID4gMCAmJiBxKSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHBTaXplICE9PSAwICYmIChxU2l6ZSA9PT0gMCB8fCAhcSB8fCBwLnogPD0gcS56KSkge1xuICAgICAgICAgICAgICAgICAgICBlID0gcDtcbiAgICAgICAgICAgICAgICAgICAgcCA9IHAubmV4dFo7XG4gICAgICAgICAgICAgICAgICAgIHBTaXplLS07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZSA9IHE7XG4gICAgICAgICAgICAgICAgICAgIHEgPSBxLm5leHRaO1xuICAgICAgICAgICAgICAgICAgICBxU2l6ZS0tO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0YWlsKSB0YWlsLm5leHRaID0gZTtcbiAgICAgICAgICAgICAgICBlbHNlIGxpc3QgPSBlO1xuXG4gICAgICAgICAgICAgICAgZS5wcmV2WiA9IHRhaWw7XG4gICAgICAgICAgICAgICAgdGFpbCA9IGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHAgPSBxO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFpbC5uZXh0WiA9IG51bGw7XG4gICAgICAgIGluU2l6ZSAqPSAyO1xuXG4gICAgfSB3aGlsZSAobnVtTWVyZ2VzID4gMSk7XG5cbiAgICByZXR1cm4gbGlzdDtcbn1cblxuLy8gei1vcmRlciBvZiBhIHBvaW50IGdpdmVuIGNvb3JkcyBhbmQgaW52ZXJzZSBvZiB0aGUgbG9uZ2VyIHNpZGUgb2YgZGF0YSBiYm94XG5mdW5jdGlvbiB6T3JkZXIoeCwgeSwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIC8vIGNvb3JkcyBhcmUgdHJhbnNmb3JtZWQgaW50byBub24tbmVnYXRpdmUgMTUtYml0IGludGVnZXIgcmFuZ2VcbiAgICB4ID0gMzI3NjcgKiAoeCAtIG1pblgpICogaW52U2l6ZTtcbiAgICB5ID0gMzI3NjcgKiAoeSAtIG1pblkpICogaW52U2l6ZTtcblxuICAgIHggPSAoeCB8ICh4IDw8IDgpKSAmIDB4MDBGRjAwRkY7XG4gICAgeCA9ICh4IHwgKHggPDwgNCkpICYgMHgwRjBGMEYwRjtcbiAgICB4ID0gKHggfCAoeCA8PCAyKSkgJiAweDMzMzMzMzMzO1xuICAgIHggPSAoeCB8ICh4IDw8IDEpKSAmIDB4NTU1NTU1NTU7XG5cbiAgICB5ID0gKHkgfCAoeSA8PCA4KSkgJiAweDAwRkYwMEZGO1xuICAgIHkgPSAoeSB8ICh5IDw8IDQpKSAmIDB4MEYwRjBGMEY7XG4gICAgeSA9ICh5IHwgKHkgPDwgMikpICYgMHgzMzMzMzMzMztcbiAgICB5ID0gKHkgfCAoeSA8PCAxKSkgJiAweDU1NTU1NTU1O1xuXG4gICAgcmV0dXJuIHggfCAoeSA8PCAxKTtcbn1cblxuLy8gZmluZCB0aGUgbGVmdG1vc3Qgbm9kZSBvZiBhIHBvbHlnb24gcmluZ1xuZnVuY3Rpb24gZ2V0TGVmdG1vc3Qoc3RhcnQpIHtcbiAgICB2YXIgcCA9IHN0YXJ0LFxuICAgICAgICBsZWZ0bW9zdCA9IHN0YXJ0O1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAueCA8IGxlZnRtb3N0LnggfHwgKHAueCA9PT0gbGVmdG1vc3QueCAmJiBwLnkgPCBsZWZ0bW9zdC55KSkgbGVmdG1vc3QgPSBwO1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHJldHVybiBsZWZ0bW9zdDtcbn1cblxuLy8gY2hlY2sgaWYgYSBwb2ludCBsaWVzIHdpdGhpbiBhIGNvbnZleCB0cmlhbmdsZVxuZnVuY3Rpb24gcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHB4LCBweSkge1xuICAgIHJldHVybiAoY3ggLSBweCkgKiAoYXkgLSBweSkgLSAoYXggLSBweCkgKiAoY3kgLSBweSkgPj0gMCAmJlxuICAgICAgICAgICAoYXggLSBweCkgKiAoYnkgLSBweSkgLSAoYnggLSBweCkgKiAoYXkgLSBweSkgPj0gMCAmJlxuICAgICAgICAgICAoYnggLSBweCkgKiAoY3kgLSBweSkgLSAoY3ggLSBweCkgKiAoYnkgLSBweSkgPj0gMDtcbn1cblxuLy8gY2hlY2sgaWYgYSBkaWFnb25hbCBiZXR3ZWVuIHR3byBwb2x5Z29uIG5vZGVzIGlzIHZhbGlkIChsaWVzIGluIHBvbHlnb24gaW50ZXJpb3IpXG5mdW5jdGlvbiBpc1ZhbGlkRGlhZ29uYWwoYSwgYikge1xuICAgIHJldHVybiBhLm5leHQuaSAhPT0gYi5pICYmIGEucHJldi5pICE9PSBiLmkgJiYgIWludGVyc2VjdHNQb2x5Z29uKGEsIGIpICYmIC8vIGRvbmVzJ3QgaW50ZXJzZWN0IG90aGVyIGVkZ2VzXG4gICAgICAgICAgIChsb2NhbGx5SW5zaWRlKGEsIGIpICYmIGxvY2FsbHlJbnNpZGUoYiwgYSkgJiYgbWlkZGxlSW5zaWRlKGEsIGIpICYmIC8vIGxvY2FsbHkgdmlzaWJsZVxuICAgICAgICAgICAgKGFyZWEoYS5wcmV2LCBhLCBiLnByZXYpIHx8IGFyZWEoYSwgYi5wcmV2LCBiKSkgfHwgLy8gZG9lcyBub3QgY3JlYXRlIG9wcG9zaXRlLWZhY2luZyBzZWN0b3JzXG4gICAgICAgICAgICBlcXVhbHMoYSwgYikgJiYgYXJlYShhLnByZXYsIGEsIGEubmV4dCkgPiAwICYmIGFyZWEoYi5wcmV2LCBiLCBiLm5leHQpID4gMCk7IC8vIHNwZWNpYWwgemVyby1sZW5ndGggY2FzZVxufVxuXG4vLyBzaWduZWQgYXJlYSBvZiBhIHRyaWFuZ2xlXG5mdW5jdGlvbiBhcmVhKHAsIHEsIHIpIHtcbiAgICByZXR1cm4gKHEueSAtIHAueSkgKiAoci54IC0gcS54KSAtIChxLnggLSBwLngpICogKHIueSAtIHEueSk7XG59XG5cbi8vIGNoZWNrIGlmIHR3byBwb2ludHMgYXJlIGVxdWFsXG5mdW5jdGlvbiBlcXVhbHMocDEsIHAyKSB7XG4gICAgcmV0dXJuIHAxLnggPT09IHAyLnggJiYgcDEueSA9PT0gcDIueTtcbn1cblxuLy8gY2hlY2sgaWYgdHdvIHNlZ21lbnRzIGludGVyc2VjdFxuZnVuY3Rpb24gaW50ZXJzZWN0cyhwMSwgcTEsIHAyLCBxMikge1xuICAgIHZhciBvMSA9IHNpZ24oYXJlYShwMSwgcTEsIHAyKSk7XG4gICAgdmFyIG8yID0gc2lnbihhcmVhKHAxLCBxMSwgcTIpKTtcbiAgICB2YXIgbzMgPSBzaWduKGFyZWEocDIsIHEyLCBwMSkpO1xuICAgIHZhciBvNCA9IHNpZ24oYXJlYShwMiwgcTIsIHExKSk7XG5cbiAgICBpZiAobzEgIT09IG8yICYmIG8zICE9PSBvNCkgcmV0dXJuIHRydWU7IC8vIGdlbmVyYWwgY2FzZVxuXG4gICAgaWYgKG8xID09PSAwICYmIG9uU2VnbWVudChwMSwgcDIsIHExKSkgcmV0dXJuIHRydWU7IC8vIHAxLCBxMSBhbmQgcDIgYXJlIGNvbGxpbmVhciBhbmQgcDIgbGllcyBvbiBwMXExXG4gICAgaWYgKG8yID09PSAwICYmIG9uU2VnbWVudChwMSwgcTIsIHExKSkgcmV0dXJuIHRydWU7IC8vIHAxLCBxMSBhbmQgcTIgYXJlIGNvbGxpbmVhciBhbmQgcTIgbGllcyBvbiBwMXExXG4gICAgaWYgKG8zID09PSAwICYmIG9uU2VnbWVudChwMiwgcDEsIHEyKSkgcmV0dXJuIHRydWU7IC8vIHAyLCBxMiBhbmQgcDEgYXJlIGNvbGxpbmVhciBhbmQgcDEgbGllcyBvbiBwMnEyXG4gICAgaWYgKG80ID09PSAwICYmIG9uU2VnbWVudChwMiwgcTEsIHEyKSkgcmV0dXJuIHRydWU7IC8vIHAyLCBxMiBhbmQgcTEgYXJlIGNvbGxpbmVhciBhbmQgcTEgbGllcyBvbiBwMnEyXG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGZvciBjb2xsaW5lYXIgcG9pbnRzIHAsIHEsIHIsIGNoZWNrIGlmIHBvaW50IHEgbGllcyBvbiBzZWdtZW50IHByXG5mdW5jdGlvbiBvblNlZ21lbnQocCwgcSwgcikge1xuICAgIHJldHVybiBxLnggPD0gTWF0aC5tYXgocC54LCByLngpICYmIHEueCA+PSBNYXRoLm1pbihwLngsIHIueCkgJiYgcS55IDw9IE1hdGgubWF4KHAueSwgci55KSAmJiBxLnkgPj0gTWF0aC5taW4ocC55LCByLnkpO1xufVxuXG5mdW5jdGlvbiBzaWduKG51bSkge1xuICAgIHJldHVybiBudW0gPiAwID8gMSA6IG51bSA8IDAgPyAtMSA6IDA7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpbnRlcnNlY3RzIGFueSBwb2x5Z29uIHNlZ21lbnRzXG5mdW5jdGlvbiBpbnRlcnNlY3RzUG9seWdvbihhLCBiKSB7XG4gICAgdmFyIHAgPSBhO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAuaSAhPT0gYS5pICYmIHAubmV4dC5pICE9PSBhLmkgJiYgcC5pICE9PSBiLmkgJiYgcC5uZXh0LmkgIT09IGIuaSAmJlxuICAgICAgICAgICAgICAgIGludGVyc2VjdHMocCwgcC5uZXh0LCBhLCBiKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gYSk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpcyBsb2NhbGx5IGluc2lkZSB0aGUgcG9seWdvblxuZnVuY3Rpb24gbG9jYWxseUluc2lkZShhLCBiKSB7XG4gICAgcmV0dXJuIGFyZWEoYS5wcmV2LCBhLCBhLm5leHQpIDwgMCA/XG4gICAgICAgIGFyZWEoYSwgYiwgYS5uZXh0KSA+PSAwICYmIGFyZWEoYSwgYS5wcmV2LCBiKSA+PSAwIDpcbiAgICAgICAgYXJlYShhLCBiLCBhLnByZXYpIDwgMCB8fCBhcmVhKGEsIGEubmV4dCwgYikgPCAwO1xufVxuXG4vLyBjaGVjayBpZiB0aGUgbWlkZGxlIHBvaW50IG9mIGEgcG9seWdvbiBkaWFnb25hbCBpcyBpbnNpZGUgdGhlIHBvbHlnb25cbmZ1bmN0aW9uIG1pZGRsZUluc2lkZShhLCBiKSB7XG4gICAgdmFyIHAgPSBhLFxuICAgICAgICBpbnNpZGUgPSBmYWxzZSxcbiAgICAgICAgcHggPSAoYS54ICsgYi54KSAvIDIsXG4gICAgICAgIHB5ID0gKGEueSArIGIueSkgLyAyO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKCgocC55ID4gcHkpICE9PSAocC5uZXh0LnkgPiBweSkpICYmIHAubmV4dC55ICE9PSBwLnkgJiZcbiAgICAgICAgICAgICAgICAocHggPCAocC5uZXh0LnggLSBwLngpICogKHB5IC0gcC55KSAvIChwLm5leHQueSAtIHAueSkgKyBwLngpKVxuICAgICAgICAgICAgaW5zaWRlID0gIWluc2lkZTtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBhKTtcblxuICAgIHJldHVybiBpbnNpZGU7XG59XG5cbi8vIGxpbmsgdHdvIHBvbHlnb24gdmVydGljZXMgd2l0aCBhIGJyaWRnZTsgaWYgdGhlIHZlcnRpY2VzIGJlbG9uZyB0byB0aGUgc2FtZSByaW5nLCBpdCBzcGxpdHMgcG9seWdvbiBpbnRvIHR3bztcbi8vIGlmIG9uZSBiZWxvbmdzIHRvIHRoZSBvdXRlciByaW5nIGFuZCBhbm90aGVyIHRvIGEgaG9sZSwgaXQgbWVyZ2VzIGl0IGludG8gYSBzaW5nbGUgcmluZ1xuZnVuY3Rpb24gc3BsaXRQb2x5Z29uKGEsIGIpIHtcbiAgICB2YXIgYTIgPSBuZXcgTm9kZShhLmksIGEueCwgYS55KSxcbiAgICAgICAgYjIgPSBuZXcgTm9kZShiLmksIGIueCwgYi55KSxcbiAgICAgICAgYW4gPSBhLm5leHQsXG4gICAgICAgIGJwID0gYi5wcmV2O1xuXG4gICAgYS5uZXh0ID0gYjtcbiAgICBiLnByZXYgPSBhO1xuXG4gICAgYTIubmV4dCA9IGFuO1xuICAgIGFuLnByZXYgPSBhMjtcblxuICAgIGIyLm5leHQgPSBhMjtcbiAgICBhMi5wcmV2ID0gYjI7XG5cbiAgICBicC5uZXh0ID0gYjI7XG4gICAgYjIucHJldiA9IGJwO1xuXG4gICAgcmV0dXJuIGIyO1xufVxuXG4vLyBjcmVhdGUgYSBub2RlIGFuZCBvcHRpb25hbGx5IGxpbmsgaXQgd2l0aCBwcmV2aW91cyBvbmUgKGluIGEgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0KVxuZnVuY3Rpb24gaW5zZXJ0Tm9kZShpLCB4LCB5LCBsYXN0KSB7XG4gICAgdmFyIHAgPSBuZXcgTm9kZShpLCB4LCB5KTtcblxuICAgIGlmICghbGFzdCkge1xuICAgICAgICBwLnByZXYgPSBwO1xuICAgICAgICBwLm5leHQgPSBwO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcC5uZXh0ID0gbGFzdC5uZXh0O1xuICAgICAgICBwLnByZXYgPSBsYXN0O1xuICAgICAgICBsYXN0Lm5leHQucHJldiA9IHA7XG4gICAgICAgIGxhc3QubmV4dCA9IHA7XG4gICAgfVxuICAgIHJldHVybiBwO1xufVxuXG5mdW5jdGlvbiByZW1vdmVOb2RlKHApIHtcbiAgICBwLm5leHQucHJldiA9IHAucHJldjtcbiAgICBwLnByZXYubmV4dCA9IHAubmV4dDtcblxuICAgIGlmIChwLnByZXZaKSBwLnByZXZaLm5leHRaID0gcC5uZXh0WjtcbiAgICBpZiAocC5uZXh0WikgcC5uZXh0Wi5wcmV2WiA9IHAucHJldlo7XG59XG5cbmZ1bmN0aW9uIE5vZGUoaSwgeCwgeSkge1xuICAgIC8vIHZlcnRleCBpbmRleCBpbiBjb29yZGluYXRlcyBhcnJheVxuICAgIHRoaXMuaSA9IGk7XG5cbiAgICAvLyB2ZXJ0ZXggY29vcmRpbmF0ZXNcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG5cbiAgICAvLyBwcmV2aW91cyBhbmQgbmV4dCB2ZXJ0ZXggbm9kZXMgaW4gYSBwb2x5Z29uIHJpbmdcbiAgICB0aGlzLnByZXYgPSBudWxsO1xuICAgIHRoaXMubmV4dCA9IG51bGw7XG5cbiAgICAvLyB6LW9yZGVyIGN1cnZlIHZhbHVlXG4gICAgdGhpcy56ID0gbnVsbDtcblxuICAgIC8vIHByZXZpb3VzIGFuZCBuZXh0IG5vZGVzIGluIHotb3JkZXJcbiAgICB0aGlzLnByZXZaID0gbnVsbDtcbiAgICB0aGlzLm5leHRaID0gbnVsbDtcblxuICAgIC8vIGluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYSBzdGVpbmVyIHBvaW50XG4gICAgdGhpcy5zdGVpbmVyID0gZmFsc2U7XG59XG5cbi8vIHJldHVybiBhIHBlcmNlbnRhZ2UgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBwb2x5Z29uIGFyZWEgYW5kIGl0cyB0cmlhbmd1bGF0aW9uIGFyZWE7XG4vLyB1c2VkIHRvIHZlcmlmeSBjb3JyZWN0bmVzcyBvZiB0cmlhbmd1bGF0aW9uXG5lYXJjdXQuZGV2aWF0aW9uID0gZnVuY3Rpb24gKGRhdGEsIGhvbGVJbmRpY2VzLCBkaW0sIHRyaWFuZ2xlcykge1xuICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aDtcbiAgICB2YXIgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGg7XG5cbiAgICB2YXIgcG9seWdvbkFyZWEgPSBNYXRoLmFicyhzaWduZWRBcmVhKGRhdGEsIDAsIG91dGVyTGVuLCBkaW0pKTtcbiAgICBpZiAoaGFzSG9sZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBob2xlSW5kaWNlc1tpXSAqIGRpbTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBpIDwgbGVuIC0gMSA/IGhvbGVJbmRpY2VzW2kgKyAxXSAqIGRpbSA6IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcG9seWdvbkFyZWEgLT0gTWF0aC5hYnMoc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0cmlhbmdsZXNBcmVhID0gMDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIHZhciBhID0gdHJpYW5nbGVzW2ldICogZGltO1xuICAgICAgICB2YXIgYiA9IHRyaWFuZ2xlc1tpICsgMV0gKiBkaW07XG4gICAgICAgIHZhciBjID0gdHJpYW5nbGVzW2kgKyAyXSAqIGRpbTtcbiAgICAgICAgdHJpYW5nbGVzQXJlYSArPSBNYXRoLmFicyhcbiAgICAgICAgICAgIChkYXRhW2FdIC0gZGF0YVtjXSkgKiAoZGF0YVtiICsgMV0gLSBkYXRhW2EgKyAxXSkgLVxuICAgICAgICAgICAgKGRhdGFbYV0gLSBkYXRhW2JdKSAqIChkYXRhW2MgKyAxXSAtIGRhdGFbYSArIDFdKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvbHlnb25BcmVhID09PSAwICYmIHRyaWFuZ2xlc0FyZWEgPT09IDAgPyAwIDpcbiAgICAgICAgTWF0aC5hYnMoKHRyaWFuZ2xlc0FyZWEgLSBwb2x5Z29uQXJlYSkgLyBwb2x5Z29uQXJlYSk7XG59O1xuXG5mdW5jdGlvbiBzaWduZWRBcmVhKGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSkge1xuICAgIHZhciBzdW0gPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydCwgaiA9IGVuZCAtIGRpbTsgaSA8IGVuZDsgaSArPSBkaW0pIHtcbiAgICAgICAgc3VtICs9IChkYXRhW2pdIC0gZGF0YVtpXSkgKiAoZGF0YVtpICsgMV0gKyBkYXRhW2ogKyAxXSk7XG4gICAgICAgIGogPSBpO1xuICAgIH1cbiAgICByZXR1cm4gc3VtO1xufVxuXG4vLyB0dXJuIGEgcG9seWdvbiBpbiBhIG11bHRpLWRpbWVuc2lvbmFsIGFycmF5IGZvcm0gKGUuZy4gYXMgaW4gR2VvSlNPTikgaW50byBhIGZvcm0gRWFyY3V0IGFjY2VwdHNcbmVhcmN1dC5mbGF0dGVuID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgZGltID0gZGF0YVswXVswXS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdCA9IHt2ZXJ0aWNlczogW10sIGhvbGVzOiBbXSwgZGltZW5zaW9uczogZGltfSxcbiAgICAgICAgaG9sZUluZGV4ID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGltOyBkKyspIHJlc3VsdC52ZXJ0aWNlcy5wdXNoKGRhdGFbaV1bal1bZF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgaG9sZUluZGV4ICs9IGRhdGFbaSAtIDFdLmxlbmd0aDtcbiAgICAgICAgICAgIHJlc3VsdC5ob2xlcy5wdXNoKGhvbGVJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCAiLyohIGh0dHBzOi8vbXRocy5iZS9wdW55Y29kZSB2MS4zLjIgYnkgQG1hdGhpYXMgKi9cbjsoZnVuY3Rpb24ocm9vdCkge1xuXG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZXMgKi9cblx0dmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cyAmJlxuXHRcdCFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cdHZhciBmcmVlTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiZcblx0XHQhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblx0dmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDtcblx0aWYgKFxuXHRcdGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8XG5cdFx0ZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRmcmVlR2xvYmFsLnNlbGYgPT09IGZyZWVHbG9iYWxcblx0KSB7XG5cdFx0cm9vdCA9IGZyZWVHbG9iYWw7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGBwdW55Y29kZWAgb2JqZWN0LlxuXHQgKiBAbmFtZSBwdW55Y29kZVxuXHQgKiBAdHlwZSBPYmplY3Rcblx0ICovXG5cdHZhciBwdW55Y29kZSxcblxuXHQvKiogSGlnaGVzdCBwb3NpdGl2ZSBzaWduZWQgMzItYml0IGZsb2F0IHZhbHVlICovXG5cdG1heEludCA9IDIxNDc0ODM2NDcsIC8vIGFrYS4gMHg3RkZGRkZGRiBvciAyXjMxLTFcblxuXHQvKiogQm9vdHN0cmluZyBwYXJhbWV0ZXJzICovXG5cdGJhc2UgPSAzNixcblx0dE1pbiA9IDEsXG5cdHRNYXggPSAyNixcblx0c2tldyA9IDM4LFxuXHRkYW1wID0gNzAwLFxuXHRpbml0aWFsQmlhcyA9IDcyLFxuXHRpbml0aWFsTiA9IDEyOCwgLy8gMHg4MFxuXHRkZWxpbWl0ZXIgPSAnLScsIC8vICdcXHgyRCdcblxuXHQvKiogUmVndWxhciBleHByZXNzaW9ucyAqL1xuXHRyZWdleFB1bnljb2RlID0gL154bi0tLyxcblx0cmVnZXhOb25BU0NJSSA9IC9bXlxceDIwLVxceDdFXS8sIC8vIHVucHJpbnRhYmxlIEFTQ0lJIGNoYXJzICsgbm9uLUFTQ0lJIGNoYXJzXG5cdHJlZ2V4U2VwYXJhdG9ycyA9IC9bXFx4MkVcXHUzMDAyXFx1RkYwRVxcdUZGNjFdL2csIC8vIFJGQyAzNDkwIHNlcGFyYXRvcnNcblxuXHQvKiogRXJyb3IgbWVzc2FnZXMgKi9cblx0ZXJyb3JzID0ge1xuXHRcdCdvdmVyZmxvdyc6ICdPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcycsXG5cdFx0J25vdC1iYXNpYyc6ICdJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpJyxcblx0XHQnaW52YWxpZC1pbnB1dCc6ICdJbnZhbGlkIGlucHV0J1xuXHR9LFxuXG5cdC8qKiBDb252ZW5pZW5jZSBzaG9ydGN1dHMgKi9cblx0YmFzZU1pbnVzVE1pbiA9IGJhc2UgLSB0TWluLFxuXHRmbG9vciA9IE1hdGguZmxvb3IsXG5cdHN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUsXG5cblx0LyoqIFRlbXBvcmFyeSB2YXJpYWJsZSAqL1xuXHRrZXk7XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0LyoqXG5cdCAqIEEgZ2VuZXJpYyBlcnJvciB1dGlsaXR5IGZ1bmN0aW9uLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgZXJyb3IgdHlwZS5cblx0ICogQHJldHVybnMge0Vycm9yfSBUaHJvd3MgYSBgUmFuZ2VFcnJvcmAgd2l0aCB0aGUgYXBwbGljYWJsZSBlcnJvciBtZXNzYWdlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXJyb3IodHlwZSkge1xuXHRcdHRocm93IFJhbmdlRXJyb3IoZXJyb3JzW3R5cGVdKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIGdlbmVyaWMgYEFycmF5I21hcGAgdXRpbGl0eSBmdW5jdGlvbi5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IGFycmF5XG5cdCAqIGl0ZW0uXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcChhcnJheSwgZm4pIHtcblx0XHR2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR3aGlsZSAobGVuZ3RoLS0pIHtcblx0XHRcdHJlc3VsdFtsZW5ndGhdID0gZm4oYXJyYXlbbGVuZ3RoXSk7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsXG5cdCAqIGFkZHJlc3Nlcy5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5XG5cdCAqIGNoYXJhY3Rlci5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2tcblx0ICogZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikge1xuXHRcdHZhciBwYXJ0cyA9IHN0cmluZy5zcGxpdCgnQCcpO1xuXHRcdHZhciByZXN1bHQgPSAnJztcblx0XHRpZiAocGFydHMubGVuZ3RoID4gMSkge1xuXHRcdFx0Ly8gSW4gZW1haWwgYWRkcmVzc2VzLCBvbmx5IHRoZSBkb21haW4gbmFtZSBzaG91bGQgYmUgcHVueWNvZGVkLiBMZWF2ZVxuXHRcdFx0Ly8gdGhlIGxvY2FsIHBhcnQgKGkuZS4gZXZlcnl0aGluZyB1cCB0byBgQGApIGludGFjdC5cblx0XHRcdHJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnO1xuXHRcdFx0c3RyaW5nID0gcGFydHNbMV07XG5cdFx0fVxuXHRcdC8vIEF2b2lkIGBzcGxpdChyZWdleClgIGZvciBJRTggY29tcGF0aWJpbGl0eS4gU2VlICMxNy5cblx0XHRzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShyZWdleFNlcGFyYXRvcnMsICdcXHgyRScpO1xuXHRcdHZhciBsYWJlbHMgPSBzdHJpbmcuc3BsaXQoJy4nKTtcblx0XHR2YXIgZW5jb2RlZCA9IG1hcChsYWJlbHMsIGZuKS5qb2luKCcuJyk7XG5cdFx0cmV0dXJuIHJlc3VsdCArIGVuY29kZWQ7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZVxuXHQgKiBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZy4gV2hpbGUgSmF2YVNjcmlwdCB1c2VzIFVDUy0yIGludGVybmFsbHksXG5cdCAqIHRoaXMgZnVuY3Rpb24gd2lsbCBjb252ZXJ0IGEgcGFpciBvZiBzdXJyb2dhdGUgaGFsdmVzIChlYWNoIG9mIHdoaWNoXG5cdCAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LFxuXHQgKiBtYXRjaGluZyBVVEYtMTYuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZW5jb2RlYFxuXHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlLnVjczJcblx0ICogQG5hbWUgZGVjb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gVGhlIG5ldyBhcnJheSBvZiBjb2RlIHBvaW50cy5cblx0ICovXG5cdGZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7XG5cdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdCAgICBjb3VudGVyID0gMCxcblx0XHQgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcblx0XHQgICAgdmFsdWUsXG5cdFx0ICAgIGV4dHJhO1xuXHRcdHdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHR2YWx1ZSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRpZiAodmFsdWUgPj0gMHhEODAwICYmIHZhbHVlIDw9IDB4REJGRiAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHRcdC8vIGhpZ2ggc3Vycm9nYXRlLCBhbmQgdGhlcmUgaXMgYSBuZXh0IGNoYXJhY3RlclxuXHRcdFx0XHRleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRcdGlmICgoZXh0cmEgJiAweEZDMDApID09IDB4REMwMCkgeyAvLyBsb3cgc3Vycm9nYXRlXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goKCh2YWx1ZSAmIDB4M0ZGKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNGRikgKyAweDEwMDAwKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGUgbmV4dFxuXHRcdFx0XHRcdC8vIGNvZGUgdW5pdCBpcyB0aGUgaGlnaCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpclxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRjb3VudGVyLS07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgc3RyaW5nIGJhc2VkIG9uIGFuIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZGVjb2RlYFxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBlbmNvZGVcblx0ICogQHBhcmFtIHtBcnJheX0gY29kZVBvaW50cyBUaGUgYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSkge1xuXHRcdHJldHVybiBtYXAoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR2YXIgb3V0cHV0ID0gJyc7XG5cdFx0XHRpZiAodmFsdWUgPiAweEZGRkYpIHtcblx0XHRcdFx0dmFsdWUgLT0gMHgxMDAwMDtcblx0XHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7XG5cdFx0XHRcdHZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjtcblx0XHRcdH1cblx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO1xuXHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHR9KS5qb2luKCcnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGJhc2ljIGNvZGUgcG9pbnQgaW50byBhIGRpZ2l0L2ludGVnZXIuXG5cdCAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29kZVBvaW50IFRoZSBiYXNpYyBudW1lcmljIGNvZGUgcG9pbnQgdmFsdWUuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpblxuXHQgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGluIHRoZSByYW5nZSBgMGAgdG8gYGJhc2UgLSAxYCwgb3IgYGJhc2VgIGlmXG5cdCAqIHRoZSBjb2RlIHBvaW50IGRvZXMgbm90IHJlcHJlc2VudCBhIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzaWNUb0RpZ2l0KGNvZGVQb2ludCkge1xuXHRcdGlmIChjb2RlUG9pbnQgLSA0OCA8IDEwKSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gMjI7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gNjU7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA5NyA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gOTc7XG5cdFx0fVxuXHRcdHJldHVybiBiYXNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHNlZSBgYmFzaWNUb0RpZ2l0KClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBiYXNpYyBjb2RlIHBvaW50IHdob3NlIHZhbHVlICh3aGVuIHVzZWQgZm9yXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaXMgYGRpZ2l0YCwgd2hpY2ggbmVlZHMgdG8gYmUgaW4gdGhlIHJhbmdlXG5cdCAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpc1xuXHQgKiB1c2VkOyBlbHNlLCB0aGUgbG93ZXJjYXNlIGZvcm0gaXMgdXNlZC4gVGhlIGJlaGF2aW9yIGlzIHVuZGVmaW5lZFxuXHQgKiBpZiBgZmxhZ2AgaXMgbm9uLXplcm8gYW5kIGBkaWdpdGAgaGFzIG5vIHVwcGVyY2FzZSBmb3JtLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGlnaXRUb0Jhc2ljKGRpZ2l0LCBmbGFnKSB7XG5cdFx0Ly8gIDAuLjI1IG1hcCB0byBBU0NJSSBhLi56IG9yIEEuLlpcblx0XHQvLyAyNi4uMzUgbWFwIHRvIEFTQ0lJIDAuLjlcblx0XHRyZXR1cm4gZGlnaXQgKyAyMiArIDc1ICogKGRpZ2l0IDwgMjYpIC0gKChmbGFnICE9IDApIDw8IDUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuXG5cdCAqIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGFkYXB0KGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkge1xuXHRcdHZhciBrID0gMDtcblx0XHRkZWx0YSA9IGZpcnN0VGltZSA/IGZsb29yKGRlbHRhIC8gZGFtcCkgOiBkZWx0YSA+PiAxO1xuXHRcdGRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTtcblx0XHRmb3IgKC8qIG5vIGluaXRpYWxpemF0aW9uICovOyBkZWx0YSA+IGJhc2VNaW51c1RNaW4gKiB0TWF4ID4+IDE7IGsgKz0gYmFzZSkge1xuXHRcdFx0ZGVsdGEgPSBmbG9vcihkZWx0YSAvIGJhc2VNaW51c1RNaW4pO1xuXHRcdH1cblx0XHRyZXR1cm4gZmxvb3IoayArIChiYXNlTWludXNUTWluICsgMSkgKiBkZWx0YSAvIChkZWx0YSArIHNrZXcpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZVxuXHQgKiBzeW1ib2xzLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHtcblx0XHQvLyBEb24ndCB1c2UgVUNTLTJcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxuXHRcdCAgICBvdXQsXG5cdFx0ICAgIGkgPSAwLFxuXHRcdCAgICBuID0gaW5pdGlhbE4sXG5cdFx0ICAgIGJpYXMgPSBpbml0aWFsQmlhcyxcblx0XHQgICAgYmFzaWMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIGluZGV4LFxuXHRcdCAgICBvbGRpLFxuXHRcdCAgICB3LFxuXHRcdCAgICBrLFxuXHRcdCAgICBkaWdpdCxcblx0XHQgICAgdCxcblx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0ICAgIGJhc2VNaW51c1Q7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzOiBsZXQgYGJhc2ljYCBiZSB0aGUgbnVtYmVyIG9mIGlucHV0IGNvZGVcblx0XHQvLyBwb2ludHMgYmVmb3JlIHRoZSBsYXN0IGRlbGltaXRlciwgb3IgYDBgIGlmIHRoZXJlIGlzIG5vbmUsIHRoZW4gY29weVxuXHRcdC8vIHRoZSBmaXJzdCBiYXNpYyBjb2RlIHBvaW50cyB0byB0aGUgb3V0cHV0LlxuXG5cdFx0YmFzaWMgPSBpbnB1dC5sYXN0SW5kZXhPZihkZWxpbWl0ZXIpO1xuXHRcdGlmIChiYXNpYyA8IDApIHtcblx0XHRcdGJhc2ljID0gMDtcblx0XHR9XG5cblx0XHRmb3IgKGogPSAwOyBqIDwgYmFzaWM7ICsraikge1xuXHRcdFx0Ly8gaWYgaXQncyBub3QgYSBiYXNpYyBjb2RlIHBvaW50XG5cdFx0XHRpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7XG5cdFx0XHRcdGVycm9yKCdub3QtYmFzaWMnKTtcblx0XHRcdH1cblx0XHRcdG91dHB1dC5wdXNoKGlucHV0LmNoYXJDb2RlQXQoaikpO1xuXHRcdH1cblxuXHRcdC8vIE1haW4gZGVjb2RpbmcgbG9vcDogc3RhcnQganVzdCBhZnRlciB0aGUgbGFzdCBkZWxpbWl0ZXIgaWYgYW55IGJhc2ljIGNvZGVcblx0XHQvLyBwb2ludHMgd2VyZSBjb3BpZWQ7IHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb3RoZXJ3aXNlLlxuXG5cdFx0Zm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHtcblxuXHRcdFx0Ly8gYGluZGV4YCBpcyB0aGUgaW5kZXggb2YgdGhlIG5leHQgY2hhcmFjdGVyIHRvIGJlIGNvbnN1bWVkLlxuXHRcdFx0Ly8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLFxuXHRcdFx0Ly8gd2hpY2ggZ2V0cyBhZGRlZCB0byBgaWAuIFRoZSBvdmVyZmxvdyBjaGVja2luZyBpcyBlYXNpZXJcblx0XHRcdC8vIGlmIHdlIGluY3JlYXNlIGBpYCBhcyB3ZSBnbywgdGhlbiBzdWJ0cmFjdCBvZmYgaXRzIHN0YXJ0aW5nXG5cdFx0XHQvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLlxuXHRcdFx0Zm9yIChvbGRpID0gaSwgdyA9IDEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXG5cdFx0XHRcdGlmIChpbmRleCA+PSBpbnB1dExlbmd0aCkge1xuXHRcdFx0XHRcdGVycm9yKCdpbnZhbGlkLWlucHV0Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTtcblxuXHRcdFx0XHRpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpICs9IGRpZ2l0ICogdztcblx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cblx0XHRcdFx0aWYgKGRpZ2l0IDwgdCkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YmFzZU1pbnVzVCA9IGJhc2UgLSB0O1xuXHRcdFx0XHRpZiAodyA+IGZsb29yKG1heEludCAvIGJhc2VNaW51c1QpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR3ICo9IGJhc2VNaW51c1Q7XG5cblx0XHRcdH1cblxuXHRcdFx0b3V0ID0gb3V0cHV0Lmxlbmd0aCArIDE7XG5cdFx0XHRiaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTtcblxuXHRcdFx0Ly8gYGlgIHdhcyBzdXBwb3NlZCB0byB3cmFwIGFyb3VuZCBmcm9tIGBvdXRgIHRvIGAwYCxcblx0XHRcdC8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6XG5cdFx0XHRpZiAoZmxvb3IoaSAvIG91dCkgPiBtYXhJbnQgLSBuKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRuICs9IGZsb29yKGkgLyBvdXQpO1xuXHRcdFx0aSAlPSBvdXQ7XG5cblx0XHRcdC8vIEluc2VydCBgbmAgYXQgcG9zaXRpb24gYGlgIG9mIHRoZSBvdXRwdXRcblx0XHRcdG91dHB1dC5zcGxpY2UoaSsrLCAwLCBuKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzIChlLmcuIGEgZG9tYWluIG5hbWUgbGFiZWwpIHRvIGFcblx0ICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZW5jb2RlKGlucHV0KSB7XG5cdFx0dmFyIG4sXG5cdFx0ICAgIGRlbHRhLFxuXHRcdCAgICBoYW5kbGVkQ1BDb3VudCxcblx0XHQgICAgYmFzaWNMZW5ndGgsXG5cdFx0ICAgIGJpYXMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIG0sXG5cdFx0ICAgIHEsXG5cdFx0ICAgIGssXG5cdFx0ICAgIHQsXG5cdFx0ICAgIGN1cnJlbnRWYWx1ZSxcblx0XHQgICAgb3V0cHV0ID0gW10sXG5cdFx0ICAgIC8qKiBgaW5wdXRMZW5ndGhgIHdpbGwgaG9sZCB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIGluIGBpbnB1dGAuICovXG5cdFx0ICAgIGlucHV0TGVuZ3RoLFxuXHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHQgICAgaGFuZGxlZENQQ291bnRQbHVzT25lLFxuXHRcdCAgICBiYXNlTWludXNULFxuXHRcdCAgICBxTWludXNUO1xuXG5cdFx0Ly8gQ29udmVydCB0aGUgaW5wdXQgaW4gVUNTLTIgdG8gVW5pY29kZVxuXHRcdGlucHV0ID0gdWNzMmRlY29kZShpbnB1dCk7XG5cblx0XHQvLyBDYWNoZSB0aGUgbGVuZ3RoXG5cdFx0aW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBzdGF0ZVxuXHRcdG4gPSBpbml0aWFsTjtcblx0XHRkZWx0YSA9IDA7XG5cdFx0YmlhcyA9IGluaXRpYWxCaWFzO1xuXG5cdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50c1xuXHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCAweDgwKSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRoYW5kbGVkQ1BDb3VudCA9IGJhc2ljTGVuZ3RoID0gb3V0cHV0Lmxlbmd0aDtcblxuXHRcdC8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkO1xuXHRcdC8vIGBiYXNpY0xlbmd0aGAgaXMgdGhlIG51bWJlciBvZiBiYXNpYyBjb2RlIHBvaW50cy5cblxuXHRcdC8vIEZpbmlzaCB0aGUgYmFzaWMgc3RyaW5nIC0gaWYgaXQgaXMgbm90IGVtcHR5IC0gd2l0aCBhIGRlbGltaXRlclxuXHRcdGlmIChiYXNpY0xlbmd0aCkge1xuXHRcdFx0b3V0cHV0LnB1c2goZGVsaW1pdGVyKTtcblx0XHR9XG5cblx0XHQvLyBNYWluIGVuY29kaW5nIGxvb3A6XG5cdFx0d2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHtcblxuXHRcdFx0Ly8gQWxsIG5vbi1iYXNpYyBjb2RlIHBvaW50cyA8IG4gaGF2ZSBiZWVuIGhhbmRsZWQgYWxyZWFkeS4gRmluZCB0aGUgbmV4dFxuXHRcdFx0Ly8gbGFyZ2VyIG9uZTpcblx0XHRcdGZvciAobSA9IG1heEludCwgaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID49IG4gJiYgY3VycmVudFZhbHVlIDwgbSkge1xuXHRcdFx0XHRcdG0gPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LFxuXHRcdFx0Ly8gYnV0IGd1YXJkIGFnYWluc3Qgb3ZlcmZsb3dcblx0XHRcdGhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTtcblx0XHRcdGlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lO1xuXHRcdFx0biA9IG07XG5cblx0XHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCBuICYmICsrZGVsdGEgPiBtYXhJbnQpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPT0gbikge1xuXHRcdFx0XHRcdC8vIFJlcHJlc2VudCBkZWx0YSBhcyBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyXG5cdFx0XHRcdFx0Zm9yIChxID0gZGVsdGEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXHRcdFx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cdFx0XHRcdFx0XHRpZiAocSA8IHQpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRxTWludXNUID0gcSAtIHQ7XG5cdFx0XHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdFx0XHRvdXRwdXQucHVzaChcblx0XHRcdFx0XHRcdFx0c3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyh0ICsgcU1pbnVzVCAlIGJhc2VNaW51c1QsIDApKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHEgPSBmbG9vcihxTWludXNUIC8gYmFzZU1pbnVzVCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyhxLCAwKSkpO1xuXHRcdFx0XHRcdGJpYXMgPSBhZGFwdChkZWx0YSwgaGFuZGxlZENQQ291bnRQbHVzT25lLCBoYW5kbGVkQ1BDb3VudCA9PSBiYXNpY0xlbmd0aCk7XG5cdFx0XHRcdFx0ZGVsdGEgPSAwO1xuXHRcdFx0XHRcdCsraGFuZGxlZENQQ291bnQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0KytkZWx0YTtcblx0XHRcdCsrbjtcblxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3Ncblx0ICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLlxuXHQgKiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCBvbiBhIHN0cmluZyB0aGF0IGhhcyBhbHJlYWR5IGJlZW5cblx0ICogY29udmVydGVkIHRvIFVuaWNvZGUuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlZCBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvXG5cdCAqIGNvbnZlcnQgdG8gVW5pY29kZS5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlXG5cdCAqIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkge1xuXHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0cmV0dXJuIHJlZ2V4UHVueWNvZGUudGVzdChzdHJpbmcpXG5cdFx0XHRcdD8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG9cblx0ICogUHVueWNvZGUuIE9ubHkgdGhlIG5vbi1BU0NJSSBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgd2lsbCBiZSBjb252ZXJ0ZWQsXG5cdCAqIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0J3MgYWxyZWFkeSBpblxuXHQgKiBBU0NJSS5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0byBjb252ZXJ0LCBhcyBhXG5cdCAqIFVuaWNvZGUgc3RyaW5nLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgUHVueWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGRvbWFpbiBuYW1lIG9yXG5cdCAqIGVtYWlsIGFkZHJlc3MuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0FTQ0lJKGlucHV0KSB7XG5cdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZylcblx0XHRcdFx0PyAneG4tLScgKyBlbmNvZGUoc3RyaW5nKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdC8qKiBEZWZpbmUgdGhlIHB1YmxpYyBBUEkgKi9cblx0cHVueWNvZGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IFB1bnljb2RlLmpzIHZlcnNpb24gbnVtYmVyLlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEB0eXBlIFN0cmluZ1xuXHRcdCAqL1xuXHRcdCd2ZXJzaW9uJzogJzEuMy4yJyxcblx0XHQvKipcblx0XHQgKiBBbiBvYmplY3Qgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGZyb20gSmF2YVNjcmlwdCdzIGludGVybmFsIGNoYXJhY3RlclxuXHRcdCAqIHJlcHJlc2VudGF0aW9uIChVQ1MtMikgdG8gVW5pY29kZSBjb2RlIHBvaW50cywgYW5kIGJhY2suXG5cdFx0ICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+XG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgT2JqZWN0XG5cdFx0ICovXG5cdFx0J3VjczInOiB7XG5cdFx0XHQnZGVjb2RlJzogdWNzMmRlY29kZSxcblx0XHRcdCdlbmNvZGUnOiB1Y3MyZW5jb2RlXG5cdFx0fSxcblx0XHQnZGVjb2RlJzogZGVjb2RlLFxuXHRcdCdlbmNvZGUnOiBlbmNvZGUsXG5cdFx0J3RvQVNDSUknOiB0b0FTQ0lJLFxuXHRcdCd0b1VuaWNvZGUnOiB0b1VuaWNvZGVcblx0fTtcblxuXHQvKiogRXhwb3NlIGBwdW55Y29kZWAgKi9cblx0Ly8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zXG5cdC8vIGxpa2UgdGhlIGZvbGxvd2luZzpcblx0aWYgKFxuXHRcdHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmXG5cdFx0ZGVmaW5lLmFtZFxuXHQpIHtcblx0XHRkZWZpbmUoJ3B1bnljb2RlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gcHVueWNvZGU7XG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuXHRcdGlmIChtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cykgeyAvLyBpbiBOb2RlLmpzIG9yIFJpbmdvSlMgdjAuOC4wK1xuXHRcdFx0ZnJlZU1vZHVsZS5leHBvcnRzID0gcHVueWNvZGU7XG5cdFx0fSBlbHNlIHsgLy8gaW4gTmFyd2hhbCBvciBSaW5nb0pTIHYwLjcuMC1cblx0XHRcdGZvciAoa2V5IGluIHB1bnljb2RlKSB7XG5cdFx0XHRcdHB1bnljb2RlLmhhc093blByb3BlcnR5KGtleSkgJiYgKGZyZWVFeHBvcnRzW2tleV0gPSBwdW55Y29kZVtrZXldKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSB7IC8vIGluIFJoaW5vIG9yIGEgd2ViIGJyb3dzZXJcblx0XHRyb290LnB1bnljb2RlID0gcHVueWNvZGU7XG5cdH1cblxufSh0aGlzKSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNTdHJpbmc6IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB0eXBlb2YoYXJnKSA9PT0gJ3N0cmluZyc7XG4gIH0sXG4gIGlzT2JqZWN0OiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gdHlwZW9mKGFyZykgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbiAgfSxcbiAgaXNOdWxsOiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gYXJnID09PSBudWxsO1xuICB9LFxuICBpc051bGxPclVuZGVmaW5lZDogZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGFyZyA9PSBudWxsO1xuICB9XG59O1xuIiwgIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8vIElmIG9iai5oYXNPd25Qcm9wZXJ0eSBoYXMgYmVlbiBvdmVycmlkZGVuLCB0aGVuIGNhbGxpbmdcbi8vIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSB3aWxsIGJyZWFrLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvaXNzdWVzLzE3MDdcbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocXMsIHNlcCwgZXEsIG9wdGlvbnMpIHtcbiAgc2VwID0gc2VwIHx8ICcmJztcbiAgZXEgPSBlcSB8fCAnPSc7XG4gIHZhciBvYmogPSB7fTtcblxuICBpZiAodHlwZW9mIHFzICE9PSAnc3RyaW5nJyB8fCBxcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgdmFyIHJlZ2V4cCA9IC9cXCsvZztcbiAgcXMgPSBxcy5zcGxpdChzZXApO1xuXG4gIHZhciBtYXhLZXlzID0gMTAwMDtcbiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMubWF4S2V5cyA9PT0gJ251bWJlcicpIHtcbiAgICBtYXhLZXlzID0gb3B0aW9ucy5tYXhLZXlzO1xuICB9XG5cbiAgdmFyIGxlbiA9IHFzLmxlbmd0aDtcbiAgLy8gbWF4S2V5cyA8PSAwIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsaW1pdCBrZXlzIGNvdW50XG4gIGlmIChtYXhLZXlzID4gMCAmJiBsZW4gPiBtYXhLZXlzKSB7XG4gICAgbGVuID0gbWF4S2V5cztcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICB2YXIgeCA9IHFzW2ldLnJlcGxhY2UocmVnZXhwLCAnJTIwJyksXG4gICAgICAgIGlkeCA9IHguaW5kZXhPZihlcSksXG4gICAgICAgIGtzdHIsIHZzdHIsIGssIHY7XG5cbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgIGtzdHIgPSB4LnN1YnN0cigwLCBpZHgpO1xuICAgICAgdnN0ciA9IHguc3Vic3RyKGlkeCArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrc3RyID0geDtcbiAgICAgIHZzdHIgPSAnJztcbiAgICB9XG5cbiAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpO1xuICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodnN0cik7XG5cbiAgICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwgaykpIHtcbiAgICAgIG9ialtrXSA9IHY7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9ialtrXSkpIHtcbiAgICAgIG9ialtrXS5wdXNoKHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpba10gPSBbb2JqW2tdLCB2XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcbiIsICIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgc3RyaW5naWZ5UHJpbWl0aXZlID0gZnVuY3Rpb24odikge1xuICBzd2l0Y2ggKHR5cGVvZiB2KSB7XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIHJldHVybiB2O1xuXG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gdiA/ICd0cnVlJyA6ICdmYWxzZSc7XG5cbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgcmV0dXJuIGlzRmluaXRlKHYpID8gdiA6ICcnO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAnJztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmosIHNlcCwgZXEsIG5hbWUpIHtcbiAgc2VwID0gc2VwIHx8ICcmJztcbiAgZXEgPSBlcSB8fCAnPSc7XG4gIGlmIChvYmogPT09IG51bGwpIHtcbiAgICBvYmogPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24oaykge1xuICAgICAgdmFyIGtzID0gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShrKSkgKyBlcTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtrXSkpIHtcbiAgICAgICAgcmV0dXJuIG9ialtrXS5tYXAoZnVuY3Rpb24odikge1xuICAgICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUodikpO1xuICAgICAgICB9KS5qb2luKHNlcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9ialtrXSkpO1xuICAgICAgfVxuICAgIH0pLmpvaW4oc2VwKTtcblxuICB9XG5cbiAgaWYgKCFuYW1lKSByZXR1cm4gJyc7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG5hbWUpKSArIGVxICtcbiAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqKSk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5kZWNvZGUgPSBleHBvcnRzLnBhcnNlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcbmV4cG9ydHMuZW5jb2RlID0gZXhwb3J0cy5zdHJpbmdpZnkgPSByZXF1aXJlKCcuL2VuY29kZScpO1xuIiwgIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBwdW55Y29kZSA9IHJlcXVpcmUoJ3B1bnljb2RlJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5leHBvcnRzLnBhcnNlID0gdXJsUGFyc2U7XG5leHBvcnRzLnJlc29sdmUgPSB1cmxSZXNvbHZlO1xuZXhwb3J0cy5yZXNvbHZlT2JqZWN0ID0gdXJsUmVzb2x2ZU9iamVjdDtcbmV4cG9ydHMuZm9ybWF0ID0gdXJsRm9ybWF0O1xuXG5leHBvcnRzLlVybCA9IFVybDtcblxuZnVuY3Rpb24gVXJsKCkge1xuICB0aGlzLnByb3RvY29sID0gbnVsbDtcbiAgdGhpcy5zbGFzaGVzID0gbnVsbDtcbiAgdGhpcy5hdXRoID0gbnVsbDtcbiAgdGhpcy5ob3N0ID0gbnVsbDtcbiAgdGhpcy5wb3J0ID0gbnVsbDtcbiAgdGhpcy5ob3N0bmFtZSA9IG51bGw7XG4gIHRoaXMuaGFzaCA9IG51bGw7XG4gIHRoaXMuc2VhcmNoID0gbnVsbDtcbiAgdGhpcy5xdWVyeSA9IG51bGw7XG4gIHRoaXMucGF0aG5hbWUgPSBudWxsO1xuICB0aGlzLnBhdGggPSBudWxsO1xuICB0aGlzLmhyZWYgPSBudWxsO1xufVxuXG4vLyBSZWZlcmVuY2U6IFJGQyAzOTg2LCBSRkMgMTgwOCwgUkZDIDIzOTZcblxuLy8gZGVmaW5lIHRoZXNlIGhlcmUgc28gYXQgbGVhc3QgdGhleSBvbmx5IGhhdmUgdG8gYmVcbi8vIGNvbXBpbGVkIG9uY2Ugb24gdGhlIGZpcnN0IG1vZHVsZSBsb2FkLlxudmFyIHByb3RvY29sUGF0dGVybiA9IC9eKFthLXowLTkuKy1dKzopL2ksXG4gICAgcG9ydFBhdHRlcm4gPSAvOlswLTldKiQvLFxuXG4gICAgLy8gU3BlY2lhbCBjYXNlIGZvciBhIHNpbXBsZSBwYXRoIFVSTFxuICAgIHNpbXBsZVBhdGhQYXR0ZXJuID0gL14oXFwvXFwvPyg/IVxcLylbXlxcP1xcc10qKShcXD9bXlxcc10qKT8kLyxcblxuICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIHJlc2VydmVkIGZvciBkZWxpbWl0aW5nIFVSTHMuXG4gICAgLy8gV2UgYWN0dWFsbHkganVzdCBhdXRvLWVzY2FwZSB0aGVzZS5cbiAgICBkZWxpbXMgPSBbJzwnLCAnPicsICdcIicsICdgJywgJyAnLCAnXFxyJywgJ1xcbicsICdcXHQnXSxcblxuICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIG5vdCBhbGxvd2VkIGZvciB2YXJpb3VzIHJlYXNvbnMuXG4gICAgdW53aXNlID0gWyd7JywgJ30nLCAnfCcsICdcXFxcJywgJ14nLCAnYCddLmNvbmNhdChkZWxpbXMpLFxuXG4gICAgLy8gQWxsb3dlZCBieSBSRkNzLCBidXQgY2F1c2Ugb2YgWFNTIGF0dGFja3MuICBBbHdheXMgZXNjYXBlIHRoZXNlLlxuICAgIGF1dG9Fc2NhcGUgPSBbJ1xcJyddLmNvbmNhdCh1bndpc2UpLFxuICAgIC8vIENoYXJhY3RlcnMgdGhhdCBhcmUgbmV2ZXIgZXZlciBhbGxvd2VkIGluIGEgaG9zdG5hbWUuXG4gICAgLy8gTm90ZSB0aGF0IGFueSBpbnZhbGlkIGNoYXJzIGFyZSBhbHNvIGhhbmRsZWQsIGJ1dCB0aGVzZVxuICAgIC8vIGFyZSB0aGUgb25lcyB0aGF0IGFyZSAqZXhwZWN0ZWQqIHRvIGJlIHNlZW4sIHNvIHdlIGZhc3QtcGF0aFxuICAgIC8vIHRoZW0uXG4gICAgbm9uSG9zdENoYXJzID0gWyclJywgJy8nLCAnPycsICc7JywgJyMnXS5jb25jYXQoYXV0b0VzY2FwZSksXG4gICAgaG9zdEVuZGluZ0NoYXJzID0gWycvJywgJz8nLCAnIyddLFxuICAgIGhvc3RuYW1lTWF4TGVuID0gMjU1LFxuICAgIGhvc3RuYW1lUGFydFBhdHRlcm4gPSAvXlsrYS16MC05QS1aXy1dezAsNjN9JC8sXG4gICAgaG9zdG5hbWVQYXJ0U3RhcnQgPSAvXihbK2EtejAtOUEtWl8tXXswLDYzfSkoLiopJC8sXG4gICAgLy8gcHJvdG9jb2xzIHRoYXQgY2FuIGFsbG93IFwidW5zYWZlXCIgYW5kIFwidW53aXNlXCIgY2hhcnMuXG4gICAgdW5zYWZlUHJvdG9jb2wgPSB7XG4gICAgICAnamF2YXNjcmlwdCc6IHRydWUsXG4gICAgICAnamF2YXNjcmlwdDonOiB0cnVlXG4gICAgfSxcbiAgICAvLyBwcm90b2NvbHMgdGhhdCBuZXZlciBoYXZlIGEgaG9zdG5hbWUuXG4gICAgaG9zdGxlc3NQcm90b2NvbCA9IHtcbiAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcbiAgICAgICdqYXZhc2NyaXB0Oic6IHRydWVcbiAgICB9LFxuICAgIC8vIHByb3RvY29scyB0aGF0IGFsd2F5cyBjb250YWluIGEgLy8gYml0LlxuICAgIHNsYXNoZWRQcm90b2NvbCA9IHtcbiAgICAgICdodHRwJzogdHJ1ZSxcbiAgICAgICdodHRwcyc6IHRydWUsXG4gICAgICAnZnRwJzogdHJ1ZSxcbiAgICAgICdnb3BoZXInOiB0cnVlLFxuICAgICAgJ2ZpbGUnOiB0cnVlLFxuICAgICAgJ2h0dHA6JzogdHJ1ZSxcbiAgICAgICdodHRwczonOiB0cnVlLFxuICAgICAgJ2Z0cDonOiB0cnVlLFxuICAgICAgJ2dvcGhlcjonOiB0cnVlLFxuICAgICAgJ2ZpbGU6JzogdHJ1ZVxuICAgIH0sXG4gICAgcXVlcnlzdHJpbmcgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpO1xuXG5mdW5jdGlvbiB1cmxQYXJzZSh1cmwsIHBhcnNlUXVlcnlTdHJpbmcsIHNsYXNoZXNEZW5vdGVIb3N0KSB7XG4gIGlmICh1cmwgJiYgdXRpbC5pc09iamVjdCh1cmwpICYmIHVybCBpbnN0YW5jZW9mIFVybCkgcmV0dXJuIHVybDtcblxuICB2YXIgdSA9IG5ldyBVcmw7XG4gIHUucGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCk7XG4gIHJldHVybiB1O1xufVxuXG5VcmwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24odXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuICBpZiAoIXV0aWwuaXNTdHJpbmcodXJsKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQYXJhbWV0ZXIgJ3VybCcgbXVzdCBiZSBhIHN0cmluZywgbm90IFwiICsgdHlwZW9mIHVybCk7XG4gIH1cblxuICAvLyBDb3B5IGNocm9tZSwgSUUsIG9wZXJhIGJhY2tzbGFzaC1oYW5kbGluZyBiZWhhdmlvci5cbiAgLy8gQmFjayBzbGFzaGVzIGJlZm9yZSB0aGUgcXVlcnkgc3RyaW5nIGdldCBjb252ZXJ0ZWQgdG8gZm9yd2FyZCBzbGFzaGVzXG4gIC8vIFNlZTogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTI1OTE2XG4gIHZhciBxdWVyeUluZGV4ID0gdXJsLmluZGV4T2YoJz8nKSxcbiAgICAgIHNwbGl0dGVyID1cbiAgICAgICAgICAocXVlcnlJbmRleCAhPT0gLTEgJiYgcXVlcnlJbmRleCA8IHVybC5pbmRleE9mKCcjJykpID8gJz8nIDogJyMnLFxuICAgICAgdVNwbGl0ID0gdXJsLnNwbGl0KHNwbGl0dGVyKSxcbiAgICAgIHNsYXNoUmVnZXggPSAvXFxcXC9nO1xuICB1U3BsaXRbMF0gPSB1U3BsaXRbMF0ucmVwbGFjZShzbGFzaFJlZ2V4LCAnLycpO1xuICB1cmwgPSB1U3BsaXQuam9pbihzcGxpdHRlcik7XG5cbiAgdmFyIHJlc3QgPSB1cmw7XG5cbiAgLy8gdHJpbSBiZWZvcmUgcHJvY2VlZGluZy5cbiAgLy8gVGhpcyBpcyB0byBzdXBwb3J0IHBhcnNlIHN0dWZmIGxpa2UgXCIgIGh0dHA6Ly9mb28uY29tICBcXG5cIlxuICByZXN0ID0gcmVzdC50cmltKCk7XG5cbiAgaWYgKCFzbGFzaGVzRGVub3RlSG9zdCAmJiB1cmwuc3BsaXQoJyMnKS5sZW5ndGggPT09IDEpIHtcbiAgICAvLyBUcnkgZmFzdCBwYXRoIHJlZ2V4cFxuICAgIHZhciBzaW1wbGVQYXRoID0gc2ltcGxlUGF0aFBhdHRlcm4uZXhlYyhyZXN0KTtcbiAgICBpZiAoc2ltcGxlUGF0aCkge1xuICAgICAgdGhpcy5wYXRoID0gcmVzdDtcbiAgICAgIHRoaXMuaHJlZiA9IHJlc3Q7XG4gICAgICB0aGlzLnBhdGhuYW1lID0gc2ltcGxlUGF0aFsxXTtcbiAgICAgIGlmIChzaW1wbGVQYXRoWzJdKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gc2ltcGxlUGF0aFsyXTtcbiAgICAgICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2UodGhpcy5zZWFyY2guc3Vic3RyKDEpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5zZWFyY2guc3Vic3RyKDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2ggPSAnJztcbiAgICAgICAgdGhpcy5xdWVyeSA9IHt9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG5cbiAgdmFyIHByb3RvID0gcHJvdG9jb2xQYXR0ZXJuLmV4ZWMocmVzdCk7XG4gIGlmIChwcm90bykge1xuICAgIHByb3RvID0gcHJvdG9bMF07XG4gICAgdmFyIGxvd2VyUHJvdG8gPSBwcm90by50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMucHJvdG9jb2wgPSBsb3dlclByb3RvO1xuICAgIHJlc3QgPSByZXN0LnN1YnN0cihwcm90by5sZW5ndGgpO1xuICB9XG5cbiAgLy8gZmlndXJlIG91dCBpZiBpdCdzIGdvdCBhIGhvc3RcbiAgLy8gdXNlckBzZXJ2ZXIgaXMgKmFsd2F5cyogaW50ZXJwcmV0ZWQgYXMgYSBob3N0bmFtZSwgYW5kIHVybFxuICAvLyByZXNvbHV0aW9uIHdpbGwgdHJlYXQgLy9mb28vYmFyIGFzIGhvc3Q9Zm9vLHBhdGg9YmFyIGJlY2F1c2UgdGhhdCdzXG4gIC8vIGhvdyB0aGUgYnJvd3NlciByZXNvbHZlcyByZWxhdGl2ZSBVUkxzLlxuICBpZiAoc2xhc2hlc0Rlbm90ZUhvc3QgfHwgcHJvdG8gfHwgcmVzdC5tYXRjaCgvXlxcL1xcL1teQFxcL10rQFteQFxcL10rLykpIHtcbiAgICB2YXIgc2xhc2hlcyA9IHJlc3Quc3Vic3RyKDAsIDIpID09PSAnLy8nO1xuICAgIGlmIChzbGFzaGVzICYmICEocHJvdG8gJiYgaG9zdGxlc3NQcm90b2NvbFtwcm90b10pKSB7XG4gICAgICByZXN0ID0gcmVzdC5zdWJzdHIoMik7XG4gICAgICB0aGlzLnNsYXNoZXMgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICghaG9zdGxlc3NQcm90b2NvbFtwcm90b10gJiZcbiAgICAgIChzbGFzaGVzIHx8IChwcm90byAmJiAhc2xhc2hlZFByb3RvY29sW3Byb3RvXSkpKSB7XG5cbiAgICAvLyB0aGVyZSdzIGEgaG9zdG5hbWUuXG4gICAgLy8gdGhlIGZpcnN0IGluc3RhbmNlIG9mIC8sID8sIDssIG9yICMgZW5kcyB0aGUgaG9zdC5cbiAgICAvL1xuICAgIC8vIElmIHRoZXJlIGlzIGFuIEAgaW4gdGhlIGhvc3RuYW1lLCB0aGVuIG5vbi1ob3N0IGNoYXJzICphcmUqIGFsbG93ZWRcbiAgICAvLyB0byB0aGUgbGVmdCBvZiB0aGUgbGFzdCBAIHNpZ24sIHVubGVzcyBzb21lIGhvc3QtZW5kaW5nIGNoYXJhY3RlclxuICAgIC8vIGNvbWVzICpiZWZvcmUqIHRoZSBALXNpZ24uXG4gICAgLy8gVVJMcyBhcmUgb2Jub3hpb3VzLlxuICAgIC8vXG4gICAgLy8gZXg6XG4gICAgLy8gaHR0cDovL2FAYkBjLyA9PiB1c2VyOmFAYiBob3N0OmNcbiAgICAvLyBodHRwOi8vYUBiP0BjID0+IHVzZXI6YSBob3N0OmMgcGF0aDovP0BjXG5cbiAgICAvLyB2MC4xMiBUT0RPKGlzYWFjcyk6IFRoaXMgaXMgbm90IHF1aXRlIGhvdyBDaHJvbWUgZG9lcyB0aGluZ3MuXG4gICAgLy8gUmV2aWV3IG91ciB0ZXN0IGNhc2UgYWdhaW5zdCBicm93c2VycyBtb3JlIGNvbXByZWhlbnNpdmVseS5cblxuICAgIC8vIGZpbmQgdGhlIGZpcnN0IGluc3RhbmNlIG9mIGFueSBob3N0RW5kaW5nQ2hhcnNcbiAgICB2YXIgaG9zdEVuZCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9zdEVuZGluZ0NoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKGhvc3RFbmRpbmdDaGFyc1tpXSk7XG4gICAgICBpZiAoaGVjICE9PSAtMSAmJiAoaG9zdEVuZCA9PT0gLTEgfHwgaGVjIDwgaG9zdEVuZCkpXG4gICAgICAgIGhvc3RFbmQgPSBoZWM7XG4gICAgfVxuXG4gICAgLy8gYXQgdGhpcyBwb2ludCwgZWl0aGVyIHdlIGhhdmUgYW4gZXhwbGljaXQgcG9pbnQgd2hlcmUgdGhlXG4gICAgLy8gYXV0aCBwb3J0aW9uIGNhbm5vdCBnbyBwYXN0LCBvciB0aGUgbGFzdCBAIGNoYXIgaXMgdGhlIGRlY2lkZXIuXG4gICAgdmFyIGF1dGgsIGF0U2lnbjtcbiAgICBpZiAoaG9zdEVuZCA9PT0gLTEpIHtcbiAgICAgIC8vIGF0U2lnbiBjYW4gYmUgYW55d2hlcmUuXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGF0U2lnbiBtdXN0IGJlIGluIGF1dGggcG9ydGlvbi5cbiAgICAgIC8vIGh0dHA6Ly9hQGIvY0BkID0+IGhvc3Q6YiBhdXRoOmEgcGF0aDovY0BkXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJywgaG9zdEVuZCk7XG4gICAgfVxuXG4gICAgLy8gTm93IHdlIGhhdmUgYSBwb3J0aW9uIHdoaWNoIGlzIGRlZmluaXRlbHkgdGhlIGF1dGguXG4gICAgLy8gUHVsbCB0aGF0IG9mZi5cbiAgICBpZiAoYXRTaWduICE9PSAtMSkge1xuICAgICAgYXV0aCA9IHJlc3Quc2xpY2UoMCwgYXRTaWduKTtcbiAgICAgIHJlc3QgPSByZXN0LnNsaWNlKGF0U2lnbiArIDEpO1xuICAgICAgdGhpcy5hdXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KGF1dGgpO1xuICAgIH1cblxuICAgIC8vIHRoZSBob3N0IGlzIHRoZSByZW1haW5pbmcgdG8gdGhlIGxlZnQgb2YgdGhlIGZpcnN0IG5vbi1ob3N0IGNoYXJcbiAgICBob3N0RW5kID0gLTE7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub25Ib3N0Q2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBoZWMgPSByZXN0LmluZGV4T2Yobm9uSG9zdENoYXJzW2ldKTtcbiAgICAgIGlmIChoZWMgIT09IC0xICYmIChob3N0RW5kID09PSAtMSB8fCBoZWMgPCBob3N0RW5kKSlcbiAgICAgICAgaG9zdEVuZCA9IGhlYztcbiAgICB9XG4gICAgLy8gaWYgd2Ugc3RpbGwgaGF2ZSBub3QgaGl0IGl0LCB0aGVuIHRoZSBlbnRpcmUgdGhpbmcgaXMgYSBob3N0LlxuICAgIGlmIChob3N0RW5kID09PSAtMSlcbiAgICAgIGhvc3RFbmQgPSByZXN0Lmxlbmd0aDtcblxuICAgIHRoaXMuaG9zdCA9IHJlc3Quc2xpY2UoMCwgaG9zdEVuZCk7XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoaG9zdEVuZCk7XG5cbiAgICAvLyBwdWxsIG91dCBwb3J0LlxuICAgIHRoaXMucGFyc2VIb3N0KCk7XG5cbiAgICAvLyB3ZSd2ZSBpbmRpY2F0ZWQgdGhhdCB0aGVyZSBpcyBhIGhvc3RuYW1lLFxuICAgIC8vIHNvIGV2ZW4gaWYgaXQncyBlbXB0eSwgaXQgaGFzIHRvIGJlIHByZXNlbnQuXG4gICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7XG5cbiAgICAvLyBpZiBob3N0bmFtZSBiZWdpbnMgd2l0aCBbIGFuZCBlbmRzIHdpdGggXVxuICAgIC8vIGFzc3VtZSB0aGF0IGl0J3MgYW4gSVB2NiBhZGRyZXNzLlxuICAgIHZhciBpcHY2SG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lWzBdID09PSAnWycgJiZcbiAgICAgICAgdGhpcy5ob3N0bmFtZVt0aGlzLmhvc3RuYW1lLmxlbmd0aCAtIDFdID09PSAnXSc7XG5cbiAgICAvLyB2YWxpZGF0ZSBhIGxpdHRsZS5cbiAgICBpZiAoIWlwdjZIb3N0bmFtZSkge1xuICAgICAgdmFyIGhvc3RwYXJ0cyA9IHRoaXMuaG9zdG5hbWUuc3BsaXQoL1xcLi8pO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBob3N0cGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBwYXJ0ID0gaG9zdHBhcnRzW2ldO1xuICAgICAgICBpZiAoIXBhcnQpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIXBhcnQubWF0Y2goaG9zdG5hbWVQYXJ0UGF0dGVybikpIHtcbiAgICAgICAgICB2YXIgbmV3cGFydCA9ICcnO1xuICAgICAgICAgIGZvciAodmFyIGogPSAwLCBrID0gcGFydC5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LmNoYXJDb2RlQXQoaikgPiAxMjcpIHtcbiAgICAgICAgICAgICAgLy8gd2UgcmVwbGFjZSBub24tQVNDSUkgY2hhciB3aXRoIGEgdGVtcG9yYXJ5IHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhpcyB0byBtYWtlIHN1cmUgc2l6ZSBvZiBob3N0bmFtZSBpcyBub3RcbiAgICAgICAgICAgICAgLy8gYnJva2VuIGJ5IHJlcGxhY2luZyBub24tQVNDSUkgYnkgbm90aGluZ1xuICAgICAgICAgICAgICBuZXdwYXJ0ICs9ICd4JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5ld3BhcnQgKz0gcGFydFtqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gd2UgdGVzdCBhZ2FpbiB3aXRoIEFTQ0lJIGNoYXIgb25seVxuICAgICAgICAgIGlmICghbmV3cGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkge1xuICAgICAgICAgICAgdmFyIHZhbGlkUGFydHMgPSBob3N0cGFydHMuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICB2YXIgbm90SG9zdCA9IGhvc3RwYXJ0cy5zbGljZShpICsgMSk7XG4gICAgICAgICAgICB2YXIgYml0ID0gcGFydC5tYXRjaChob3N0bmFtZVBhcnRTdGFydCk7XG4gICAgICAgICAgICBpZiAoYml0KSB7XG4gICAgICAgICAgICAgIHZhbGlkUGFydHMucHVzaChiaXRbMV0pO1xuICAgICAgICAgICAgICBub3RIb3N0LnVuc2hpZnQoYml0WzJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub3RIb3N0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXN0ID0gJy8nICsgbm90SG9zdC5qb2luKCcuJykgKyByZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ob3N0bmFtZSA9IHZhbGlkUGFydHMuam9pbignLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9zdG5hbWUubGVuZ3RoID4gaG9zdG5hbWVNYXhMZW4pIHtcbiAgICAgIHRoaXMuaG9zdG5hbWUgPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaG9zdG5hbWVzIGFyZSBhbHdheXMgbG93ZXIgY2FzZS5cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcbiAgICAgIC8vIElETkEgU3VwcG9ydDogUmV0dXJucyBhIHB1bnljb2RlZCByZXByZXNlbnRhdGlvbiBvZiBcImRvbWFpblwiLlxuICAgICAgLy8gSXQgb25seSBjb252ZXJ0cyBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgdGhhdFxuICAgICAgLy8gaGF2ZSBub24tQVNDSUkgY2hhcmFjdGVycywgaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZlxuICAgICAgLy8geW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0IGFscmVhZHkgaXMgQVNDSUktb25seS5cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSBwdW55Y29kZS50b0FTQ0lJKHRoaXMuaG9zdG5hbWUpO1xuICAgIH1cblxuICAgIHZhciBwID0gdGhpcy5wb3J0ID8gJzonICsgdGhpcy5wb3J0IDogJyc7XG4gICAgdmFyIGggPSB0aGlzLmhvc3RuYW1lIHx8ICcnO1xuICAgIHRoaXMuaG9zdCA9IGggKyBwO1xuICAgIHRoaXMuaHJlZiArPSB0aGlzLmhvc3Q7XG5cbiAgICAvLyBzdHJpcCBbIGFuZCBdIGZyb20gdGhlIGhvc3RuYW1lXG4gICAgLy8gdGhlIGhvc3QgZmllbGQgc3RpbGwgcmV0YWlucyB0aGVtLCB0aG91Z2hcbiAgICBpZiAoaXB2Nkhvc3RuYW1lKSB7XG4gICAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZS5zdWJzdHIoMSwgdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAyKTtcbiAgICAgIGlmIChyZXN0WzBdICE9PSAnLycpIHtcbiAgICAgICAgcmVzdCA9ICcvJyArIHJlc3Q7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gbm93IHJlc3QgaXMgc2V0IHRvIHRoZSBwb3N0LWhvc3Qgc3R1ZmYuXG4gIC8vIGNob3Agb2ZmIGFueSBkZWxpbSBjaGFycy5cbiAgaWYgKCF1bnNhZmVQcm90b2NvbFtsb3dlclByb3RvXSkge1xuXG4gICAgLy8gRmlyc3QsIG1ha2UgMTAwJSBzdXJlIHRoYXQgYW55IFwiYXV0b0VzY2FwZVwiIGNoYXJzIGdldFxuICAgIC8vIGVzY2FwZWQsIGV2ZW4gaWYgZW5jb2RlVVJJQ29tcG9uZW50IGRvZXNuJ3QgdGhpbmsgdGhleVxuICAgIC8vIG5lZWQgdG8gYmUuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdXRvRXNjYXBlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGFlID0gYXV0b0VzY2FwZVtpXTtcbiAgICAgIGlmIChyZXN0LmluZGV4T2YoYWUpID09PSAtMSlcbiAgICAgICAgY29udGludWU7XG4gICAgICB2YXIgZXNjID0gZW5jb2RlVVJJQ29tcG9uZW50KGFlKTtcbiAgICAgIGlmIChlc2MgPT09IGFlKSB7XG4gICAgICAgIGVzYyA9IGVzY2FwZShhZSk7XG4gICAgICB9XG4gICAgICByZXN0ID0gcmVzdC5zcGxpdChhZSkuam9pbihlc2MpO1xuICAgIH1cbiAgfVxuXG5cbiAgLy8gY2hvcCBvZmYgZnJvbSB0aGUgdGFpbCBmaXJzdC5cbiAgdmFyIGhhc2ggPSByZXN0LmluZGV4T2YoJyMnKTtcbiAgaWYgKGhhc2ggIT09IC0xKSB7XG4gICAgLy8gZ290IGEgZnJhZ21lbnQgc3RyaW5nLlxuICAgIHRoaXMuaGFzaCA9IHJlc3Quc3Vic3RyKGhhc2gpO1xuICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIGhhc2gpO1xuICB9XG4gIHZhciBxbSA9IHJlc3QuaW5kZXhPZignPycpO1xuICBpZiAocW0gIT09IC0xKSB7XG4gICAgdGhpcy5zZWFyY2ggPSByZXN0LnN1YnN0cihxbSk7XG4gICAgdGhpcy5xdWVyeSA9IHJlc3Quc3Vic3RyKHFtICsgMSk7XG4gICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgIHRoaXMucXVlcnkgPSBxdWVyeXN0cmluZy5wYXJzZSh0aGlzLnF1ZXJ5KTtcbiAgICB9XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoMCwgcW0pO1xuICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAvLyBubyBxdWVyeSBzdHJpbmcsIGJ1dCBwYXJzZVF1ZXJ5U3RyaW5nIHN0aWxsIHJlcXVlc3RlZFxuICAgIHRoaXMuc2VhcmNoID0gJyc7XG4gICAgdGhpcy5xdWVyeSA9IHt9O1xuICB9XG4gIGlmIChyZXN0KSB0aGlzLnBhdGhuYW1lID0gcmVzdDtcbiAgaWYgKHNsYXNoZWRQcm90b2NvbFtsb3dlclByb3RvXSAmJlxuICAgICAgdGhpcy5ob3N0bmFtZSAmJiAhdGhpcy5wYXRobmFtZSkge1xuICAgIHRoaXMucGF0aG5hbWUgPSAnLyc7XG4gIH1cblxuICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gIGlmICh0aGlzLnBhdGhuYW1lIHx8IHRoaXMuc2VhcmNoKSB7XG4gICAgdmFyIHAgPSB0aGlzLnBhdGhuYW1lIHx8ICcnO1xuICAgIHZhciBzID0gdGhpcy5zZWFyY2ggfHwgJyc7XG4gICAgdGhpcy5wYXRoID0gcCArIHM7XG4gIH1cblxuICAvLyBmaW5hbGx5LCByZWNvbnN0cnVjdCB0aGUgaHJlZiBiYXNlZCBvbiB3aGF0IGhhcyBiZWVuIHZhbGlkYXRlZC5cbiAgdGhpcy5ocmVmID0gdGhpcy5mb3JtYXQoKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBmb3JtYXQgYSBwYXJzZWQgb2JqZWN0IGludG8gYSB1cmwgc3RyaW5nXG5mdW5jdGlvbiB1cmxGb3JtYXQob2JqKSB7XG4gIC8vIGVuc3VyZSBpdCdzIGFuIG9iamVjdCwgYW5kIG5vdCBhIHN0cmluZyB1cmwuXG4gIC8vIElmIGl0J3MgYW4gb2JqLCB0aGlzIGlzIGEgbm8tb3AuXG4gIC8vIHRoaXMgd2F5LCB5b3UgY2FuIGNhbGwgdXJsX2Zvcm1hdCgpIG9uIHN0cmluZ3NcbiAgLy8gdG8gY2xlYW4gdXAgcG90ZW50aWFsbHkgd29ua3kgdXJscy5cbiAgaWYgKHV0aWwuaXNTdHJpbmcob2JqKSkgb2JqID0gdXJsUGFyc2Uob2JqKTtcbiAgaWYgKCEob2JqIGluc3RhbmNlb2YgVXJsKSkgcmV0dXJuIFVybC5wcm90b3R5cGUuZm9ybWF0LmNhbGwob2JqKTtcbiAgcmV0dXJuIG9iai5mb3JtYXQoKTtcbn1cblxuVXJsLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGF1dGggPSB0aGlzLmF1dGggfHwgJyc7XG4gIGlmIChhdXRoKSB7XG4gICAgYXV0aCA9IGVuY29kZVVSSUNvbXBvbmVudChhdXRoKTtcbiAgICBhdXRoID0gYXV0aC5yZXBsYWNlKC8lM0EvaSwgJzonKTtcbiAgICBhdXRoICs9ICdAJztcbiAgfVxuXG4gIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2wgfHwgJycsXG4gICAgICBwYXRobmFtZSA9IHRoaXMucGF0aG5hbWUgfHwgJycsXG4gICAgICBoYXNoID0gdGhpcy5oYXNoIHx8ICcnLFxuICAgICAgaG9zdCA9IGZhbHNlLFxuICAgICAgcXVlcnkgPSAnJztcblxuICBpZiAodGhpcy5ob3N0KSB7XG4gICAgaG9zdCA9IGF1dGggKyB0aGlzLmhvc3Q7XG4gIH0gZWxzZSBpZiAodGhpcy5ob3N0bmFtZSkge1xuICAgIGhvc3QgPSBhdXRoICsgKHRoaXMuaG9zdG5hbWUuaW5kZXhPZignOicpID09PSAtMSA/XG4gICAgICAgIHRoaXMuaG9zdG5hbWUgOlxuICAgICAgICAnWycgKyB0aGlzLmhvc3RuYW1lICsgJ10nKTtcbiAgICBpZiAodGhpcy5wb3J0KSB7XG4gICAgICBob3N0ICs9ICc6JyArIHRoaXMucG9ydDtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5xdWVyeSAmJlxuICAgICAgdXRpbC5pc09iamVjdCh0aGlzLnF1ZXJ5KSAmJlxuICAgICAgT2JqZWN0LmtleXModGhpcy5xdWVyeSkubGVuZ3RoKSB7XG4gICAgcXVlcnkgPSBxdWVyeXN0cmluZy5zdHJpbmdpZnkodGhpcy5xdWVyeSk7XG4gIH1cblxuICB2YXIgc2VhcmNoID0gdGhpcy5zZWFyY2ggfHwgKHF1ZXJ5ICYmICgnPycgKyBxdWVyeSkpIHx8ICcnO1xuXG4gIGlmIChwcm90b2NvbCAmJiBwcm90b2NvbC5zdWJzdHIoLTEpICE9PSAnOicpIHByb3RvY29sICs9ICc6JztcblxuICAvLyBvbmx5IHRoZSBzbGFzaGVkUHJvdG9jb2xzIGdldCB0aGUgLy8uICBOb3QgbWFpbHRvOiwgeG1wcDosIGV0Yy5cbiAgLy8gdW5sZXNzIHRoZXkgaGFkIHRoZW0gdG8gYmVnaW4gd2l0aC5cbiAgaWYgKHRoaXMuc2xhc2hlcyB8fFxuICAgICAgKCFwcm90b2NvbCB8fCBzbGFzaGVkUHJvdG9jb2xbcHJvdG9jb2xdKSAmJiBob3N0ICE9PSBmYWxzZSkge1xuICAgIGhvc3QgPSAnLy8nICsgKGhvc3QgfHwgJycpO1xuICAgIGlmIChwYXRobmFtZSAmJiBwYXRobmFtZS5jaGFyQXQoMCkgIT09ICcvJykgcGF0aG5hbWUgPSAnLycgKyBwYXRobmFtZTtcbiAgfSBlbHNlIGlmICghaG9zdCkge1xuICAgIGhvc3QgPSAnJztcbiAgfVxuXG4gIGlmIChoYXNoICYmIGhhc2guY2hhckF0KDApICE9PSAnIycpIGhhc2ggPSAnIycgKyBoYXNoO1xuICBpZiAoc2VhcmNoICYmIHNlYXJjaC5jaGFyQXQoMCkgIT09ICc/Jykgc2VhcmNoID0gJz8nICsgc2VhcmNoO1xuXG4gIHBhdGhuYW1lID0gcGF0aG5hbWUucmVwbGFjZSgvWz8jXS9nLCBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQobWF0Y2gpO1xuICB9KTtcbiAgc2VhcmNoID0gc2VhcmNoLnJlcGxhY2UoJyMnLCAnJTIzJyk7XG5cbiAgcmV0dXJuIHByb3RvY29sICsgaG9zdCArIHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcbn07XG5cbmZ1bmN0aW9uIHVybFJlc29sdmUoc291cmNlLCByZWxhdGl2ZSkge1xuICByZXR1cm4gdXJsUGFyc2Uoc291cmNlLCBmYWxzZSwgdHJ1ZSkucmVzb2x2ZShyZWxhdGl2ZSk7XG59XG5cblVybC5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7XG4gIHJldHVybiB0aGlzLnJlc29sdmVPYmplY3QodXJsUGFyc2UocmVsYXRpdmUsIGZhbHNlLCB0cnVlKSkuZm9ybWF0KCk7XG59O1xuXG5mdW5jdGlvbiB1cmxSZXNvbHZlT2JqZWN0KHNvdXJjZSwgcmVsYXRpdmUpIHtcbiAgaWYgKCFzb3VyY2UpIHJldHVybiByZWxhdGl2ZTtcbiAgcmV0dXJuIHVybFBhcnNlKHNvdXJjZSwgZmFsc2UsIHRydWUpLnJlc29sdmVPYmplY3QocmVsYXRpdmUpO1xufVxuXG5VcmwucHJvdG90eXBlLnJlc29sdmVPYmplY3QgPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xuICBpZiAodXRpbC5pc1N0cmluZyhyZWxhdGl2ZSkpIHtcbiAgICB2YXIgcmVsID0gbmV3IFVybCgpO1xuICAgIHJlbC5wYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpO1xuICAgIHJlbGF0aXZlID0gcmVsO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IG5ldyBVcmwoKTtcbiAgdmFyIHRrZXlzID0gT2JqZWN0LmtleXModGhpcyk7XG4gIGZvciAodmFyIHRrID0gMDsgdGsgPCB0a2V5cy5sZW5ndGg7IHRrKyspIHtcbiAgICB2YXIgdGtleSA9IHRrZXlzW3RrXTtcbiAgICByZXN1bHRbdGtleV0gPSB0aGlzW3RrZXldO1xuICB9XG5cbiAgLy8gaGFzaCBpcyBhbHdheXMgb3ZlcnJpZGRlbiwgbm8gbWF0dGVyIHdoYXQuXG4gIC8vIGV2ZW4gaHJlZj1cIlwiIHdpbGwgcmVtb3ZlIGl0LlxuICByZXN1bHQuaGFzaCA9IHJlbGF0aXZlLmhhc2g7XG5cbiAgLy8gaWYgdGhlIHJlbGF0aXZlIHVybCBpcyBlbXB0eSwgdGhlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBkbyBoZXJlLlxuICBpZiAocmVsYXRpdmUuaHJlZiA9PT0gJycpIHtcbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gaHJlZnMgbGlrZSAvL2Zvby9iYXIgYWx3YXlzIGN1dCB0byB0aGUgcHJvdG9jb2wuXG4gIGlmIChyZWxhdGl2ZS5zbGFzaGVzICYmICFyZWxhdGl2ZS5wcm90b2NvbCkge1xuICAgIC8vIHRha2UgZXZlcnl0aGluZyBleGNlcHQgdGhlIHByb3RvY29sIGZyb20gcmVsYXRpdmVcbiAgICB2YXIgcmtleXMgPSBPYmplY3Qua2V5cyhyZWxhdGl2ZSk7XG4gICAgZm9yICh2YXIgcmsgPSAwOyByayA8IHJrZXlzLmxlbmd0aDsgcmsrKykge1xuICAgICAgdmFyIHJrZXkgPSBya2V5c1tya107XG4gICAgICBpZiAocmtleSAhPT0gJ3Byb3RvY29sJylcbiAgICAgICAgcmVzdWx0W3JrZXldID0gcmVsYXRpdmVbcmtleV07XG4gICAgfVxuXG4gICAgLy91cmxQYXJzZSBhcHBlbmRzIHRyYWlsaW5nIC8gdG8gdXJscyBsaWtlIGh0dHA6Ly93d3cuZXhhbXBsZS5jb21cbiAgICBpZiAoc2xhc2hlZFByb3RvY29sW3Jlc3VsdC5wcm90b2NvbF0gJiZcbiAgICAgICAgcmVzdWx0Lmhvc3RuYW1lICYmICFyZXN1bHQucGF0aG5hbWUpIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gcmVzdWx0LnBhdGhuYW1lID0gJy8nO1xuICAgIH1cblxuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBpZiAocmVsYXRpdmUucHJvdG9jb2wgJiYgcmVsYXRpdmUucHJvdG9jb2wgIT09IHJlc3VsdC5wcm90b2NvbCkge1xuICAgIC8vIGlmIGl0J3MgYSBrbm93biB1cmwgcHJvdG9jb2wsIHRoZW4gY2hhbmdpbmdcbiAgICAvLyB0aGUgcHJvdG9jb2wgZG9lcyB3ZWlyZCB0aGluZ3NcbiAgICAvLyBmaXJzdCwgaWYgaXQncyBub3QgZmlsZTosIHRoZW4gd2UgTVVTVCBoYXZlIGEgaG9zdCxcbiAgICAvLyBhbmQgaWYgdGhlcmUgd2FzIGEgcGF0aFxuICAgIC8vIHRvIGJlZ2luIHdpdGgsIHRoZW4gd2UgTVVTVCBoYXZlIGEgcGF0aC5cbiAgICAvLyBpZiBpdCBpcyBmaWxlOiwgdGhlbiB0aGUgaG9zdCBpcyBkcm9wcGVkLFxuICAgIC8vIGJlY2F1c2UgdGhhdCdzIGtub3duIHRvIGJlIGhvc3RsZXNzLlxuICAgIC8vIGFueXRoaW5nIGVsc2UgaXMgYXNzdW1lZCB0byBiZSBhYnNvbHV0ZS5cbiAgICBpZiAoIXNsYXNoZWRQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmVsYXRpdmUpO1xuICAgICAgZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7XG4gICAgICAgIHZhciBrID0ga2V5c1t2XTtcbiAgICAgICAgcmVzdWx0W2tdID0gcmVsYXRpdmVba107XG4gICAgICB9XG4gICAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmVzdWx0LnByb3RvY29sID0gcmVsYXRpdmUucHJvdG9jb2w7XG4gICAgaWYgKCFyZWxhdGl2ZS5ob3N0ICYmICFob3N0bGVzc1Byb3RvY29sW3JlbGF0aXZlLnByb3RvY29sXSkge1xuICAgICAgdmFyIHJlbFBhdGggPSAocmVsYXRpdmUucGF0aG5hbWUgfHwgJycpLnNwbGl0KCcvJyk7XG4gICAgICB3aGlsZSAocmVsUGF0aC5sZW5ndGggJiYgIShyZWxhdGl2ZS5ob3N0ID0gcmVsUGF0aC5zaGlmdCgpKSk7XG4gICAgICBpZiAoIXJlbGF0aXZlLmhvc3QpIHJlbGF0aXZlLmhvc3QgPSAnJztcbiAgICAgIGlmICghcmVsYXRpdmUuaG9zdG5hbWUpIHJlbGF0aXZlLmhvc3RuYW1lID0gJyc7XG4gICAgICBpZiAocmVsUGF0aFswXSAhPT0gJycpIHJlbFBhdGgudW5zaGlmdCgnJyk7XG4gICAgICBpZiAocmVsUGF0aC5sZW5ndGggPCAyKSByZWxQYXRoLnVuc2hpZnQoJycpO1xuICAgICAgcmVzdWx0LnBhdGhuYW1lID0gcmVsUGF0aC5qb2luKCcvJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IHJlbGF0aXZlLnBhdGhuYW1lO1xuICAgIH1cbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICAgIHJlc3VsdC5ob3N0ID0gcmVsYXRpdmUuaG9zdCB8fCAnJztcbiAgICByZXN1bHQuYXV0aCA9IHJlbGF0aXZlLmF1dGg7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVsYXRpdmUuaG9zdG5hbWUgfHwgcmVsYXRpdmUuaG9zdDtcbiAgICByZXN1bHQucG9ydCA9IHJlbGF0aXZlLnBvcnQ7XG4gICAgLy8gdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgICBpZiAocmVzdWx0LnBhdGhuYW1lIHx8IHJlc3VsdC5zZWFyY2gpIHtcbiAgICAgIHZhciBwID0gcmVzdWx0LnBhdGhuYW1lIHx8ICcnO1xuICAgICAgdmFyIHMgPSByZXN1bHQuc2VhcmNoIHx8ICcnO1xuICAgICAgcmVzdWx0LnBhdGggPSBwICsgcztcbiAgICB9XG4gICAgcmVzdWx0LnNsYXNoZXMgPSByZXN1bHQuc2xhc2hlcyB8fCByZWxhdGl2ZS5zbGFzaGVzO1xuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB2YXIgaXNTb3VyY2VBYnMgPSAocmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyksXG4gICAgICBpc1JlbEFicyA9IChcbiAgICAgICAgICByZWxhdGl2ZS5ob3N0IHx8XG4gICAgICAgICAgcmVsYXRpdmUucGF0aG5hbWUgJiYgcmVsYXRpdmUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLydcbiAgICAgICksXG4gICAgICBtdXN0RW5kQWJzID0gKGlzUmVsQWJzIHx8IGlzU291cmNlQWJzIHx8XG4gICAgICAgICAgICAgICAgICAgIChyZXN1bHQuaG9zdCAmJiByZWxhdGl2ZS5wYXRobmFtZSkpLFxuICAgICAgcmVtb3ZlQWxsRG90cyA9IG11c3RFbmRBYnMsXG4gICAgICBzcmNQYXRoID0gcmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5zcGxpdCgnLycpIHx8IFtdLFxuICAgICAgcmVsUGF0aCA9IHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLnNwbGl0KCcvJykgfHwgW10sXG4gICAgICBwc3ljaG90aWMgPSByZXN1bHQucHJvdG9jb2wgJiYgIXNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdO1xuXG4gIC8vIGlmIHRoZSB1cmwgaXMgYSBub24tc2xhc2hlZCB1cmwsIHRoZW4gcmVsYXRpdmVcbiAgLy8gbGlua3MgbGlrZSAuLi8uLiBzaG91bGQgYmUgYWJsZVxuICAvLyB0byBjcmF3bCB1cCB0byB0aGUgaG9zdG5hbWUsIGFzIHdlbGwuICBUaGlzIGlzIHN0cmFuZ2UuXG4gIC8vIHJlc3VsdC5wcm90b2NvbCBoYXMgYWxyZWFkeSBiZWVuIHNldCBieSBub3cuXG4gIC8vIExhdGVyIG9uLCBwdXQgdGhlIGZpcnN0IHBhdGggcGFydCBpbnRvIHRoZSBob3N0IGZpZWxkLlxuICBpZiAocHN5Y2hvdGljKSB7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gJyc7XG4gICAgcmVzdWx0LnBvcnQgPSBudWxsO1xuICAgIGlmIChyZXN1bHQuaG9zdCkge1xuICAgICAgaWYgKHNyY1BhdGhbMF0gPT09ICcnKSBzcmNQYXRoWzBdID0gcmVzdWx0Lmhvc3Q7XG4gICAgICBlbHNlIHNyY1BhdGgudW5zaGlmdChyZXN1bHQuaG9zdCk7XG4gICAgfVxuICAgIHJlc3VsdC5ob3N0ID0gJyc7XG4gICAgaWYgKHJlbGF0aXZlLnByb3RvY29sKSB7XG4gICAgICByZWxhdGl2ZS5ob3N0bmFtZSA9IG51bGw7XG4gICAgICByZWxhdGl2ZS5wb3J0ID0gbnVsbDtcbiAgICAgIGlmIChyZWxhdGl2ZS5ob3N0KSB7XG4gICAgICAgIGlmIChyZWxQYXRoWzBdID09PSAnJykgcmVsUGF0aFswXSA9IHJlbGF0aXZlLmhvc3Q7XG4gICAgICAgIGVsc2UgcmVsUGF0aC51bnNoaWZ0KHJlbGF0aXZlLmhvc3QpO1xuICAgICAgfVxuICAgICAgcmVsYXRpdmUuaG9zdCA9IG51bGw7XG4gICAgfVxuICAgIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzICYmIChyZWxQYXRoWzBdID09PSAnJyB8fCBzcmNQYXRoWzBdID09PSAnJyk7XG4gIH1cblxuICBpZiAoaXNSZWxBYnMpIHtcbiAgICAvLyBpdCdzIGFic29sdXRlLlxuICAgIHJlc3VsdC5ob3N0ID0gKHJlbGF0aXZlLmhvc3QgfHwgcmVsYXRpdmUuaG9zdCA9PT0gJycpID9cbiAgICAgICAgICAgICAgICAgIHJlbGF0aXZlLmhvc3QgOiByZXN1bHQuaG9zdDtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSAocmVsYXRpdmUuaG9zdG5hbWUgfHwgcmVsYXRpdmUuaG9zdG5hbWUgPT09ICcnKSA/XG4gICAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgOiByZXN1bHQuaG9zdG5hbWU7XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICBzcmNQYXRoID0gcmVsUGF0aDtcbiAgICAvLyBmYWxsIHRocm91Z2ggdG8gdGhlIGRvdC1oYW5kbGluZyBiZWxvdy5cbiAgfSBlbHNlIGlmIChyZWxQYXRoLmxlbmd0aCkge1xuICAgIC8vIGl0J3MgcmVsYXRpdmVcbiAgICAvLyB0aHJvdyBhd2F5IHRoZSBleGlzdGluZyBmaWxlLCBhbmQgdGFrZSB0aGUgbmV3IHBhdGggaW5zdGVhZC5cbiAgICBpZiAoIXNyY1BhdGgpIHNyY1BhdGggPSBbXTtcbiAgICBzcmNQYXRoLnBvcCgpO1xuICAgIHNyY1BhdGggPSBzcmNQYXRoLmNvbmNhdChyZWxQYXRoKTtcbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICB9IGVsc2UgaWYgKCF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKHJlbGF0aXZlLnNlYXJjaCkpIHtcbiAgICAvLyBqdXN0IHB1bGwgb3V0IHRoZSBzZWFyY2guXG4gICAgLy8gbGlrZSBocmVmPSc/Zm9vJy5cbiAgICAvLyBQdXQgdGhpcyBhZnRlciB0aGUgb3RoZXIgdHdvIGNhc2VzIGJlY2F1c2UgaXQgc2ltcGxpZmllcyB0aGUgYm9vbGVhbnNcbiAgICBpZiAocHN5Y2hvdGljKSB7XG4gICAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IHNyY1BhdGguc2hpZnQoKTtcbiAgICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3RcbiAgICAgIC8vdGhpcyBlc3BlY2lhbGx5IGhhcHBlbnMgaW4gY2FzZXMgbGlrZVxuICAgICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcbiAgICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ob3N0LnNwbGl0KCdAJykgOiBmYWxzZTtcbiAgICAgIGlmIChhdXRoSW5Ib3N0KSB7XG4gICAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgICByZXN1bHQuaG9zdCA9IHJlc3VsdC5ob3N0bmFtZSA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKCF1dGlsLmlzTnVsbChyZXN1bHQucGF0aG5hbWUpIHx8ICF1dGlsLmlzTnVsbChyZXN1bHQuc2VhcmNoKSkge1xuICAgICAgcmVzdWx0LnBhdGggPSAocmVzdWx0LnBhdGhuYW1lID8gcmVzdWx0LnBhdGhuYW1lIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAgKHJlc3VsdC5zZWFyY2ggPyByZXN1bHQuc2VhcmNoIDogJycpO1xuICAgIH1cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKCFzcmNQYXRoLmxlbmd0aCkge1xuICAgIC8vIG5vIHBhdGggYXQgYWxsLiAgZWFzeS5cbiAgICAvLyB3ZSd2ZSBhbHJlYWR5IGhhbmRsZWQgdGhlIG90aGVyIHN0dWZmIGFib3ZlLlxuICAgIHJlc3VsdC5wYXRobmFtZSA9IG51bGw7XG4gICAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICAgIGlmIChyZXN1bHQuc2VhcmNoKSB7XG4gICAgICByZXN1bHQucGF0aCA9ICcvJyArIHJlc3VsdC5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gbnVsbDtcbiAgICB9XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIGlmIGEgdXJsIEVORHMgaW4gLiBvciAuLiwgdGhlbiBpdCBtdXN0IGdldCBhIHRyYWlsaW5nIHNsYXNoLlxuICAvLyBob3dldmVyLCBpZiBpdCBlbmRzIGluIGFueXRoaW5nIGVsc2Ugbm9uLXNsYXNoeSxcbiAgLy8gdGhlbiBpdCBtdXN0IE5PVCBnZXQgYSB0cmFpbGluZyBzbGFzaC5cbiAgdmFyIGxhc3QgPSBzcmNQYXRoLnNsaWNlKC0xKVswXTtcbiAgdmFyIGhhc1RyYWlsaW5nU2xhc2ggPSAoXG4gICAgICAocmVzdWx0Lmhvc3QgfHwgcmVsYXRpdmUuaG9zdCB8fCBzcmNQYXRoLmxlbmd0aCA+IDEpICYmXG4gICAgICAobGFzdCA9PT0gJy4nIHx8IGxhc3QgPT09ICcuLicpIHx8IGxhc3QgPT09ICcnKTtcblxuICAvLyBzdHJpcCBzaW5nbGUgZG90cywgcmVzb2x2ZSBkb3VibGUgZG90cyB0byBwYXJlbnQgZGlyXG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBzcmNQYXRoLmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICBsYXN0ID0gc3JjUGF0aFtpXTtcbiAgICBpZiAobGFzdCA9PT0gJy4nKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICB9IGVsc2UgaWYgKGxhc3QgPT09ICcuLicpIHtcbiAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuICBpZiAoIW11c3RFbmRBYnMgJiYgIXJlbW92ZUFsbERvdHMpIHtcbiAgICBmb3IgKDsgdXAtLTsgdXApIHtcbiAgICAgIHNyY1BhdGgudW5zaGlmdCgnLi4nKTtcbiAgICB9XG4gIH1cblxuICBpZiAobXVzdEVuZEFicyAmJiBzcmNQYXRoWzBdICE9PSAnJyAmJlxuICAgICAgKCFzcmNQYXRoWzBdIHx8IHNyY1BhdGhbMF0uY2hhckF0KDApICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC51bnNoaWZ0KCcnKTtcbiAgfVxuXG4gIGlmIChoYXNUcmFpbGluZ1NsYXNoICYmIChzcmNQYXRoLmpvaW4oJy8nKS5zdWJzdHIoLTEpICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC5wdXNoKCcnKTtcbiAgfVxuXG4gIHZhciBpc0Fic29sdXRlID0gc3JjUGF0aFswXSA9PT0gJycgfHxcbiAgICAgIChzcmNQYXRoWzBdICYmIHNyY1BhdGhbMF0uY2hhckF0KDApID09PSAnLycpO1xuXG4gIC8vIHB1dCB0aGUgaG9zdCBiYWNrXG4gIGlmIChwc3ljaG90aWMpIHtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IGlzQWJzb2x1dGUgPyAnJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNQYXRoLmxlbmd0aCA/IHNyY1BhdGguc2hpZnQoKSA6ICcnO1xuICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3RcbiAgICAvL3RoaXMgZXNwZWNpYWxseSBoYXBwZW5zIGluIGNhc2VzIGxpa2VcbiAgICAvL3VybC5yZXNvbHZlT2JqZWN0KCdtYWlsdG86bG9jYWwxQGRvbWFpbjEnLCAnbG9jYWwyQGRvbWFpbjInKVxuICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG4gICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG4gICAgaWYgKGF1dGhJbkhvc3QpIHtcbiAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgfVxuICB9XG5cbiAgbXVzdEVuZEFicyA9IG11c3RFbmRBYnMgfHwgKHJlc3VsdC5ob3N0ICYmIHNyY1BhdGgubGVuZ3RoKTtcblxuICBpZiAobXVzdEVuZEFicyAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7XG4gIH1cblxuICBpZiAoIXNyY1BhdGgubGVuZ3RoKSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDtcbiAgICByZXN1bHQucGF0aCA9IG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gc3JjUGF0aC5qb2luKCcvJyk7XG4gIH1cblxuICAvL3RvIHN1cHBvcnQgcmVxdWVzdC5odHRwXG4gIGlmICghdXRpbC5pc051bGwocmVzdWx0LnBhdGhuYW1lKSB8fCAhdXRpbC5pc051bGwocmVzdWx0LnNlYXJjaCkpIHtcbiAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgKHJlc3VsdC5zZWFyY2ggPyByZXN1bHQuc2VhcmNoIDogJycpO1xuICB9XG4gIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aCB8fCByZXN1bHQuYXV0aDtcbiAgcmVzdWx0LnNsYXNoZXMgPSByZXN1bHQuc2xhc2hlcyB8fCByZWxhdGl2ZS5zbGFzaGVzO1xuICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblVybC5wcm90b3R5cGUucGFyc2VIb3N0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBob3N0ID0gdGhpcy5ob3N0O1xuICB2YXIgcG9ydCA9IHBvcnRQYXR0ZXJuLmV4ZWMoaG9zdCk7XG4gIGlmIChwb3J0KSB7XG4gICAgcG9ydCA9IHBvcnRbMF07XG4gICAgaWYgKHBvcnQgIT09ICc6Jykge1xuICAgICAgdGhpcy5wb3J0ID0gcG9ydC5zdWJzdHIoMSk7XG4gICAgfVxuICAgIGhvc3QgPSBob3N0LnN1YnN0cigwLCBob3N0Lmxlbmd0aCAtIHBvcnQubGVuZ3RoKTtcbiAgfVxuICBpZiAoaG9zdCkgdGhpcy5ob3N0bmFtZSA9IGhvc3Q7XG59O1xuIiwgIid1c2Ugc3RyaWN0J1xuXG5mdW5jdGlvbiBwYXJzZVVSSSAoc3RyLCBvcHRzKSB7XG4gIGlmICghc3RyKSByZXR1cm4gdW5kZWZpbmVkXG5cbiAgb3B0cyA9IG9wdHMgfHwge31cblxuICB2YXIgbyA9IHtcbiAgICBrZXk6IFtcbiAgICAgICdzb3VyY2UnLFxuICAgICAgJ3Byb3RvY29sJyxcbiAgICAgICdhdXRob3JpdHknLFxuICAgICAgJ3VzZXJJbmZvJyxcbiAgICAgICd1c2VyJyxcbiAgICAgICdwYXNzd29yZCcsXG4gICAgICAnaG9zdCcsXG4gICAgICAncG9ydCcsXG4gICAgICAncmVsYXRpdmUnLFxuICAgICAgJ3BhdGgnLFxuICAgICAgJ2RpcmVjdG9yeScsXG4gICAgICAnZmlsZScsXG4gICAgICAncXVlcnknLFxuICAgICAgJ2FuY2hvcidcbiAgICBdLFxuICAgIHE6IHtcbiAgICAgIG5hbWU6ICdxdWVyeUtleScsXG4gICAgICBwYXJzZXI6IC8oPzpefCYpKFteJj1dKik9PyhbXiZdKikvZ1xuICAgIH0sXG4gICAgcGFyc2VyOiB7XG4gICAgICBzdHJpY3Q6IC9eKD86KFteOlxcLz8jXSspOik/KD86XFwvXFwvKCg/OigoW146QF0qKSg/OjooW146QF0qKSk/KT9AKT8oW146XFwvPyNdKikoPzo6KFxcZCopKT8pKT8oKCgoPzpbXj8jXFwvXSpcXC8pKikoW14/I10qKSkoPzpcXD8oW14jXSopKT8oPzojKC4qKSk/KS8sXG4gICAgICBsb29zZTogL14oPzooPyFbXjpAXSs6W146QFxcL10qQCkoW146XFwvPyMuXSspOik/KD86XFwvXFwvKT8oKD86KChbXjpAXSopKD86OihbXjpAXSopKT8pP0ApPyhbXjpcXC8/I10qKSg/OjooXFxkKikpPykoKChcXC8oPzpbXj8jXSg/IVtePyNcXC9dKlxcLltePyNcXC8uXSsoPzpbPyNdfCQpKSkqXFwvPyk/KFtePyNcXC9dKikpKD86XFw/KFteI10qKSk/KD86IyguKikpPykvXG4gICAgfVxuICB9XG5cbiAgdmFyIG0gPSBvLnBhcnNlcltvcHRzLnN0cmljdE1vZGUgPyAnc3RyaWN0JyA6ICdsb29zZSddLmV4ZWMoc3RyKVxuICB2YXIgdXJpID0ge31cbiAgdmFyIGkgPSAxNFxuXG4gIHdoaWxlIChpLS0pIHVyaVtvLmtleVtpXV0gPSBtW2ldIHx8ICcnXG5cbiAgdXJpW28ucS5uYW1lXSA9IHt9XG4gIHVyaVtvLmtleVsxMl1dLnJlcGxhY2Uoby5xLnBhcnNlciwgZnVuY3Rpb24gKCQwLCAkMSwgJDIpIHtcbiAgICBpZiAoJDEpIHVyaVtvLnEubmFtZV1bJDFdID0gJDJcbiAgfSlcblxuICByZXR1cm4gdXJpXG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2VVUklcbiIsICIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIE1pbmlTaWduYWxCaW5kaW5nID0gKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTWluaVNpZ25hbEJpbmRpbmcoZm4sIG9uY2UsIHRoaXNBcmcpIHtcbiAgICBpZiAob25jZSA9PT0gdW5kZWZpbmVkKSBvbmNlID0gZmFsc2U7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWluaVNpZ25hbEJpbmRpbmcpO1xuXG4gICAgdGhpcy5fZm4gPSBmbjtcbiAgICB0aGlzLl9vbmNlID0gb25jZTtcbiAgICB0aGlzLl90aGlzQXJnID0gdGhpc0FyZztcbiAgICB0aGlzLl9uZXh0ID0gdGhpcy5fcHJldiA9IHRoaXMuX293bmVyID0gbnVsbDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhNaW5pU2lnbmFsQmluZGluZywgW3tcbiAgICBrZXk6ICdkZXRhY2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRhY2goKSB7XG4gICAgICBpZiAodGhpcy5fb3duZXIgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICAgIHRoaXMuX293bmVyLmRldGFjaCh0aGlzKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBNaW5pU2lnbmFsQmluZGluZztcbn0pKCk7XG5cbmZ1bmN0aW9uIF9hZGRNaW5pU2lnbmFsQmluZGluZyhzZWxmLCBub2RlKSB7XG4gIGlmICghc2VsZi5faGVhZCkge1xuICAgIHNlbGYuX2hlYWQgPSBub2RlO1xuICAgIHNlbGYuX3RhaWwgPSBub2RlO1xuICB9IGVsc2Uge1xuICAgIHNlbGYuX3RhaWwuX25leHQgPSBub2RlO1xuICAgIG5vZGUuX3ByZXYgPSBzZWxmLl90YWlsO1xuICAgIHNlbGYuX3RhaWwgPSBub2RlO1xuICB9XG5cbiAgbm9kZS5fb3duZXIgPSBzZWxmO1xuXG4gIHJldHVybiBub2RlO1xufVxuXG52YXIgTWluaVNpZ25hbCA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE1pbmlTaWduYWwoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1pbmlTaWduYWwpO1xuXG4gICAgdGhpcy5faGVhZCA9IHRoaXMuX3RhaWwgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTWluaVNpZ25hbCwgW3tcbiAgICBrZXk6ICdoYW5kbGVycycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZXJzKCkge1xuICAgICAgdmFyIGV4aXN0cyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzBdO1xuXG4gICAgICB2YXIgbm9kZSA9IHRoaXMuX2hlYWQ7XG5cbiAgICAgIGlmIChleGlzdHMpIHJldHVybiAhIW5vZGU7XG5cbiAgICAgIHZhciBlZSA9IFtdO1xuXG4gICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBlZS5wdXNoKG5vZGUpO1xuICAgICAgICBub2RlID0gbm9kZS5fbmV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2hhcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhcyhub2RlKSB7XG4gICAgICBpZiAoIShub2RlIGluc3RhbmNlb2YgTWluaVNpZ25hbEJpbmRpbmcpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWluaVNpZ25hbCNoYXMoKTogRmlyc3QgYXJnIG11c3QgYmUgYSBNaW5pU2lnbmFsQmluZGluZyBvYmplY3QuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBub2RlLl9vd25lciA9PT0gdGhpcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkaXNwYXRjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3BhdGNoKCkge1xuICAgICAgdmFyIG5vZGUgPSB0aGlzLl9oZWFkO1xuXG4gICAgICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcblxuICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUuX29uY2UpIHRoaXMuZGV0YWNoKG5vZGUpO1xuICAgICAgICBub2RlLl9mbi5hcHBseShub2RlLl90aGlzQXJnLCBhcmd1bWVudHMpO1xuICAgICAgICBub2RlID0gbm9kZS5fbmV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnYWRkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkKGZuKSB7XG4gICAgICB2YXIgdGhpc0FyZyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMV07XG5cbiAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaW5pU2lnbmFsI2FkZCgpOiBGaXJzdCBhcmcgbXVzdCBiZSBhIEZ1bmN0aW9uLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9hZGRNaW5pU2lnbmFsQmluZGluZyh0aGlzLCBuZXcgTWluaVNpZ25hbEJpbmRpbmcoZm4sIGZhbHNlLCB0aGlzQXJnKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25jZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZm4pIHtcbiAgICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pbmlTaWduYWwjb25jZSgpOiBGaXJzdCBhcmcgbXVzdCBiZSBhIEZ1bmN0aW9uLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9hZGRNaW5pU2lnbmFsQmluZGluZyh0aGlzLCBuZXcgTWluaVNpZ25hbEJpbmRpbmcoZm4sIHRydWUsIHRoaXNBcmcpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkZXRhY2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRhY2gobm9kZSkge1xuICAgICAgaWYgKCEobm9kZSBpbnN0YW5jZW9mIE1pbmlTaWduYWxCaW5kaW5nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pbmlTaWduYWwjZGV0YWNoKCk6IEZpcnN0IGFyZyBtdXN0IGJlIGEgTWluaVNpZ25hbEJpbmRpbmcgb2JqZWN0LicpO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuX293bmVyICE9PSB0aGlzKSByZXR1cm4gdGhpcztcblxuICAgICAgaWYgKG5vZGUuX3ByZXYpIG5vZGUuX3ByZXYuX25leHQgPSBub2RlLl9uZXh0O1xuICAgICAgaWYgKG5vZGUuX25leHQpIG5vZGUuX25leHQuX3ByZXYgPSBub2RlLl9wcmV2O1xuXG4gICAgICBpZiAobm9kZSA9PT0gdGhpcy5faGVhZCkge1xuICAgICAgICB0aGlzLl9oZWFkID0gbm9kZS5fbmV4dDtcbiAgICAgICAgaWYgKG5vZGUuX25leHQgPT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLl90YWlsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChub2RlID09PSB0aGlzLl90YWlsKSB7XG4gICAgICAgIHRoaXMuX3RhaWwgPSBub2RlLl9wcmV2O1xuICAgICAgICB0aGlzLl90YWlsLl9uZXh0ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgbm9kZS5fb3duZXIgPSBudWxsO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGV0YWNoQWxsJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGV0YWNoQWxsKCkge1xuICAgICAgdmFyIG5vZGUgPSB0aGlzLl9oZWFkO1xuICAgICAgaWYgKCFub2RlKSByZXR1cm4gdGhpcztcblxuICAgICAgdGhpcy5faGVhZCA9IHRoaXMuX3RhaWwgPSBudWxsO1xuXG4gICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBub2RlLl9vd25lciA9IG51bGw7XG4gICAgICAgIG5vZGUgPSBub2RlLl9uZXh0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE1pbmlTaWduYWw7XG59KSgpO1xuXG5NaW5pU2lnbmFsLk1pbmlTaWduYWxCaW5kaW5nID0gTWluaVNpZ25hbEJpbmRpbmc7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IE1pbmlTaWduYWw7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbiIsICJpbXBvcnQgeyBQb2x5ZmlsbCB9IGZyb20gJ2VzNi1wcm9taXNlLXBvbHlmaWxsJztcblxuLy8gU3VwcG9ydCBmb3IgSUUgOSAtIDExIHdoaWNoIGRvZXMgbm90IGluY2x1ZGUgUHJvbWlzZXNcbmlmICghd2luZG93LlByb21pc2UpXG57XG4gICAgd2luZG93LlByb21pc2UgPSBQb2x5ZmlsbDtcbn1cbiIsICIvLyBSZWZlcmVuY2VzOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9vYmplY3QtYXNzaWduXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXG5cbmltcG9ydCBvYmplY3RBc3NpZ24gZnJvbSAnb2JqZWN0LWFzc2lnbic7XG5cbmlmICghT2JqZWN0LmFzc2lnbilcbntcbiAgICBPYmplY3QuYXNzaWduID0gb2JqZWN0QXNzaWduO1xufVxuIiwgIi8vIFJlZmVyZW5jZXM6XG4vLyBodHRwOi8vcGF1bGlyaXNoLmNvbS8yMDExL3JlcXVlc3RhbmltYXRpb25mcmFtZS1mb3Itc21hcnQtYW5pbWF0aW5nL1xuLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTU3OTY3MVxuLy8gaHR0cDovL3VwZGF0ZXMuaHRtbDVyb2Nrcy5jb20vMjAxMi8wNS9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUtQVBJLW5vdy13aXRoLXN1Yi1taWxsaXNlY29uZC1wcmVjaXNpb25cbi8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3RpbWhhbGwvNDA3ODYxNFxuLy8gaHR0cHM6Ly9naXRodWIuY29tL0ZpbmFuY2lhbC1UaW1lcy9wb2x5ZmlsbC1zZXJ2aWNlL3RyZWUvbWFzdGVyL3BvbHlmaWxscy9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcblxuLy8gRXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoIEJyb3dzZXJmaXlcbi8vIEJyb3dzZXJpZnkgYXV0b21hdGljYWxseSBkZXRlY3RzIHRoZSB1c2Ugb2YgYGdsb2JhbGAgYW5kIHBhc3NlcyB0aGVcbi8vIGNvcnJlY3QgcmVmZXJlbmNlIG9mIGBnbG9iYWxgLCBgc2VsZmAsIGFuZCBmaW5hbGx5IGB3aW5kb3dgXG5cbmNvbnN0IE9ORV9GUkFNRV9USU1FID0gMTY7XG5cbi8vIERhdGUubm93XG5pZiAoIShEYXRlLm5vdyAmJiBEYXRlLnByb3RvdHlwZS5nZXRUaW1lKSlcbntcbiAgICBEYXRlLm5vdyA9IGZ1bmN0aW9uIG5vdygpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9O1xufVxuXG4vLyBwZXJmb3JtYW5jZS5ub3dcbmlmICghKHdpbmRvdy5wZXJmb3JtYW5jZSAmJiB3aW5kb3cucGVyZm9ybWFuY2Uubm93KSlcbntcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgaWYgKCF3aW5kb3cucGVyZm9ybWFuY2UpXG4gICAge1xuICAgICAgICAod2luZG93IGFzIGFueSkucGVyZm9ybWFuY2UgPSB7fTtcbiAgICB9XG5cbiAgICB3aW5kb3cucGVyZm9ybWFuY2Uubm93ID0gKCk6IG51bWJlciA9PiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xufVxuXG4vLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbmxldCBsYXN0VGltZSA9IERhdGUubm93KCk7XG5jb25zdCB2ZW5kb3JzID0gWydtcycsICdtb3onLCAnd2Via2l0JywgJ28nXTtcblxuZm9yIChsZXQgeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsgKyt4KVxue1xuICAgIGNvbnN0IHAgPSB2ZW5kb3JzW3hdO1xuXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9ICh3aW5kb3cgYXMgYW55KVtgJHtwfVJlcXVlc3RBbmltYXRpb25GcmFtZWBdO1xuICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9ICh3aW5kb3cgYXMgYW55KVtgJHtwfUNhbmNlbEFuaW1hdGlvbkZyYW1lYF1cbiAgICAgICAgfHwgKHdpbmRvdyBhcyBhbnkpW2Ake3B9Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lYF07XG59XG5cbmlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSlcbntcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gKGNhbGxiYWNrOiAoLi4ucGFybXM6IGFueVtdKSA9PiB2b2lkKTogbnVtYmVyID0+XG4gICAge1xuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke2NhbGxiYWNrfWlzIG5vdCBhIGZ1bmN0aW9uYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCBkZWxheSA9IE9ORV9GUkFNRV9USU1FICsgbGFzdFRpbWUgLSBjdXJyZW50VGltZTtcblxuICAgICAgICBpZiAoZGVsYXkgPCAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0VGltZSA9IGN1cnJlbnRUaW1lO1xuXG4gICAgICAgIHJldHVybiB3aW5kb3cuc2V0VGltZW91dCgoKSA9PlxuICAgICAgICB7XG4gICAgICAgICAgICBsYXN0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjYWxsYmFjayhwZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgICAgIH0sIGRlbGF5KTtcbiAgICB9O1xufVxuXG5pZiAoIXdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSlcbntcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSAoaWQ6IG51bWJlcik6IHZvaWQgPT4gY2xlYXJUaW1lb3V0KGlkKTtcbn1cbiIsICIvLyBSZWZlcmVuY2VzOlxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTWF0aC9zaWduXG5cbmlmICghTWF0aC5zaWduKVxue1xuICAgIE1hdGguc2lnbiA9IGZ1bmN0aW9uIG1hdGhTaWduKHgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHggPSBOdW1iZXIoeCk7XG5cbiAgICAgICAgaWYgKHggPT09IDAgfHwgaXNOYU4oeCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHggPiAwID8gMSA6IC0xO1xuICAgIH07XG59XG4iLCAiLy8gUmVmZXJlbmNlczpcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL051bWJlci9pc0ludGVnZXJcblxuaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKVxue1xuICAgIE51bWJlci5pc0ludGVnZXIgPSBmdW5jdGlvbiBudW1iZXJJc0ludGVnZXIodmFsdWUpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWx1ZSkgJiYgTWF0aC5mbG9vcih2YWx1ZSkgPT09IHZhbHVlO1xuICAgIH07XG59XG4iLCAiaW1wb3J0ICcuL1Byb21pc2UnO1xuaW1wb3J0ICcuL09iamVjdC5hc3NpZ24nO1xuaW1wb3J0ICcuL3JlcXVlc3RBbmltYXRpb25GcmFtZSc7XG5pbXBvcnQgJy4vTWF0aC5zaWduJztcbmltcG9ydCAnLi9OdW1iZXIuaXNJbnRlZ2VyJztcblxuaWYgKCF3aW5kb3cuQXJyYXlCdWZmZXIpXG57XG4gICAgKHdpbmRvdyBhcyBhbnkpLkFycmF5QnVmZmVyID0gQXJyYXk7XG59XG5cbmlmICghd2luZG93LkZsb2F0MzJBcnJheSlcbntcbiAgICAod2luZG93IGFzIGFueSkuRmxvYXQzMkFycmF5ID0gQXJyYXk7XG59XG5cbmlmICghd2luZG93LlVpbnQzMkFycmF5KVxue1xuICAgICh3aW5kb3cgYXMgYW55KS5VaW50MzJBcnJheSA9IEFycmF5O1xufVxuXG5pZiAoIXdpbmRvdy5VaW50MTZBcnJheSlcbntcbiAgICAod2luZG93IGFzIGFueSkuVWludDE2QXJyYXkgPSBBcnJheTtcbn1cblxuaWYgKCF3aW5kb3cuVWludDhBcnJheSlcbntcbiAgICAod2luZG93IGFzIGFueSkuVWludDhBcnJheSA9IEFycmF5O1xufVxuXG5pZiAoIXdpbmRvdy5JbnQzMkFycmF5KVxue1xuICAgICh3aW5kb3cgYXMgYW55KS5JbnQzMkFycmF5ID0gQXJyYXk7XG59XG4iLCBudWxsLCAiLy8gVGhlIEVTTS9DSlMgdmVyc2lvbnMgb2YgaXNtb2JpbGVqcyBvbmx5XG4vLyBleHBvcnRzIHRoZSBmdW5jdGlvbiBmb3IgZXhlY3V0aW5nXG4vLyBkZXNpZ25lZCBmb3IgTm9kZS1vbmx5IGVudmlyb25tZW50c1xuaW1wb3J0IGlzTW9iaWxlQ2FsbCBmcm9tICdpc21vYmlsZWpzJztcblxuY29uc3QgaXNNb2JpbGUgPSBpc01vYmlsZUNhbGwod2luZG93Lm5hdmlnYXRvcik7XG5cbmV4cG9ydCB7IGlzTW9iaWxlIH07XG4iLCAiaW1wb3J0IHsgaXNNb2JpbGUgfSBmcm9tICcuL2lzTW9iaWxlJztcblxuLyoqXG4gKiBUaGUgbWF4aW11bSByZWNvbW1lbmRlZCB0ZXh0dXJlIHVuaXRzIHRvIHVzZS5cbiAqIEluIHRoZW9yeSB0aGUgYmlnZ2VyIHRoZSBiZXR0ZXIsIGFuZCBmb3IgZGVza3RvcCB3ZSdsbCB1c2UgYXMgbWFueSBhcyB3ZSBjYW4uXG4gKiBCdXQgc29tZSBtb2JpbGUgZGV2aWNlcyBzbG93IGRvd24gaWYgdGhlcmUgaXMgdG8gbWFueSBicmFuY2hlcyBpbiB0aGUgc2hhZGVyLlxuICogU28gaW4gcHJhY3RpY2UgdGhlcmUgc2VlbXMgdG8gYmUgYSBzd2VldCBzcG90IHNpemUgdGhhdCB2YXJpZXMgZGVwZW5kaW5nIG9uIHRoZSBkZXZpY2UuXG4gKlxuICogSW4gdjQsIGFsbCBtb2JpbGUgZGV2aWNlcyB3ZXJlIGxpbWl0ZWQgdG8gNCB0ZXh0dXJlIHVuaXRzIGJlY2F1c2UgZm9yIHRoaXMuXG4gKiBJbiB2NSwgd2UgYWxsb3cgYWxsIHRleHR1cmUgdW5pdHMgdG8gYmUgdXNlZCBvbiBtb2Rlcm4gQXBwbGUgb3IgQW5kcm9pZCBkZXZpY2VzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4XG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF4UmVjb21tZW5kZWRUZXh0dXJlcyhtYXg6IG51bWJlcik6IG51bWJlclxue1xuICAgIGxldCBhbGxvd01heCA9IHRydWU7XG5cbiAgICBpZiAoaXNNb2JpbGUudGFibGV0IHx8IGlzTW9iaWxlLnBob25lKVxuICAgIHtcbiAgICAgICAgaWYgKGlzTW9iaWxlLmFwcGxlLmRldmljZSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSAobmF2aWdhdG9yLnVzZXJBZ2VudCkubWF0Y2goL09TIChcXGQrKV8oXFxkKyk/Lyk7XG5cbiAgICAgICAgICAgIGlmIChtYXRjaClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYWpvclZlcnNpb24gPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuXG4gICAgICAgICAgICAgICAgLy8gTGltaXQgdGV4dHVyZSB1bml0cyBvbiBkZXZpY2VzIGJlbG93IGlPUyAxMSwgd2hpY2ggd2lsbCBiZSBvbGRlciBoYXJkd2FyZVxuICAgICAgICAgICAgICAgIGlmIChtYWpvclZlcnNpb24gPCAxMSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFsbG93TWF4ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc01vYmlsZS5hbmRyb2lkLmRldmljZSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSAobmF2aWdhdG9yLnVzZXJBZ2VudCkubWF0Y2goL0FuZHJvaWRcXHMoWzAtOS5dKikvKTtcblxuICAgICAgICAgICAgaWYgKG1hdGNoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ham9yVmVyc2lvbiA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG5cbiAgICAgICAgICAgICAgICAvLyBMaW1pdCB0ZXh0dXJlIHVuaXRzIG9uIGRldmljZXMgYmVsb3cgQW5kcm9pZCA3IChOb3VnYXQpLCB3aGljaCB3aWxsIGJlIG9sZGVyIGhhcmR3YXJlXG4gICAgICAgICAgICAgICAgaWYgKG1ham9yVmVyc2lvbiA8IDcpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd01heCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhbGxvd01heCA/IG1heCA6IDQ7XG59XG4iLCAiaW1wb3J0IHsgaXNNb2JpbGUgfSBmcm9tICcuL2lzTW9iaWxlJztcblxuLyoqXG4gKiBVcGxvYWRpbmcgdGhlIHNhbWUgYnVmZmVyIG11bHRpcGxlIHRpbWVzIGluIGEgc2luZ2xlIGZyYW1lIGNhbiBjYXVzZSBwZXJmb3JtYW5jZSBpc3N1ZXMuXG4gKiBBcHBhcmVudCBvbiBpT1Mgc28gb25seSBjaGVjayBmb3IgdGhhdCBhdCB0aGUgbW9tZW50XG4gKiBUaGlzIGNoZWNrIG1heSBiZWNvbWUgbW9yZSBjb21wbGV4IGlmIHRoaXMgaXNzdWUgcG9wcyB1cCBlbHNld2hlcmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FuVXBsb2FkU2FtZUJ1ZmZlcigpOiBib29sZWFuXG57XG4gICAgcmV0dXJuICFpc01vYmlsZS5hcHBsZS5kZXZpY2U7XG59XG4iLCAiaW1wb3J0IHsgaXNNb2JpbGUgfSBmcm9tICcuL3V0aWxzL2lzTW9iaWxlJztcbmltcG9ydCB7IG1heFJlY29tbWVuZGVkVGV4dHVyZXMgfSBmcm9tICcuL3V0aWxzL21heFJlY29tbWVuZGVkVGV4dHVyZXMnO1xuaW1wb3J0IHsgY2FuVXBsb2FkU2FtZUJ1ZmZlciB9IGZyb20gJy4vdXRpbHMvY2FuVXBsb2FkU2FtZUJ1ZmZlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlbmRlck9wdGlvbnMge1xuICAgIHZpZXc6IEhUTUxDYW52YXNFbGVtZW50O1xuICAgIGFudGlhbGlhczogYm9vbGVhbjtcbiAgICBhdXRvRGVuc2l0eTogYm9vbGVhbjtcbiAgICB0cmFuc3BhcmVudDogYm9vbGVhbjtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IG51bWJlcjtcbiAgICBjbGVhckJlZm9yZVJlbmRlcjogYm9vbGVhbjtcbiAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IGJvb2xlYW47XG4gICAgd2lkdGg6IG51bWJlcjtcbiAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICBsZWdhY3k6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNldHRpbmdzIHtcbiAgICBNSVBNQVBfVEVYVFVSRVM6IG51bWJlcjtcbiAgICBBTklTT1RST1BJQ19MRVZFTDogbnVtYmVyO1xuICAgIFJFU09MVVRJT046IG51bWJlcjtcbiAgICBGSUxURVJfUkVTT0xVVElPTjogbnVtYmVyO1xuICAgIFNQUklURV9NQVhfVEVYVFVSRVM6IG51bWJlcjtcbiAgICBTUFJJVEVfQkFUQ0hfU0laRTogbnVtYmVyO1xuICAgIFJFTkRFUl9PUFRJT05TOiBJUmVuZGVyT3B0aW9ucztcbiAgICBHQ19NT0RFOiBudW1iZXI7XG4gICAgR0NfTUFYX0lETEU6IG51bWJlcjtcbiAgICBHQ19NQVhfQ0hFQ0tfQ09VTlQ6IG51bWJlcjtcbiAgICBXUkFQX01PREU6IG51bWJlcjtcbiAgICBTQ0FMRV9NT0RFOiBudW1iZXI7XG4gICAgUFJFQ0lTSU9OX1ZFUlRFWDogc3RyaW5nO1xuICAgIFBSRUNJU0lPTl9GUkFHTUVOVDogc3RyaW5nO1xuICAgIENBTl9VUExPQURfU0FNRV9CVUZGRVI6IGJvb2xlYW47XG4gICAgQ1JFQVRFX0lNQUdFX0JJVE1BUDogYm9vbGVhbjtcbiAgICBST1VORF9QSVhFTFM6IGJvb2xlYW47XG4gICAgUkVUSU5BX1BSRUZJWD86IFJlZ0V4cDtcbiAgICBGQUlMX0lGX01BSk9SX1BFUkZPUk1BTkNFX0NBVkVBVD86IGJvb2xlYW47XG4gICAgVVBMT0FEU19QRVJfRlJBTUU/OiBudW1iZXI7XG4gICAgU09SVEFCTEVfQ0hJTERSRU4/OiBib29sZWFuO1xuICAgIFBSRUZFUl9FTlY/OiBudW1iZXI7XG4gICAgU1RSSUNUX1RFWFRVUkVfQ0FDSEU/OiBib29sZWFuO1xuICAgIE1FU0hfQ0FOVkFTX1BBRERJTkc/OiBudW1iZXI7XG4gICAgVEFSR0VUX0ZQTVM/OiBudW1iZXI7XG59XG5cbi8qKlxuICogVXNlcidzIGN1c3RvbWl6YWJsZSBnbG9iYWxzIGZvciBvdmVycmlkaW5nIHRoZSBkZWZhdWx0IFBJWEkgc2V0dGluZ3MsIHN1Y2hcbiAqIGFzIGEgcmVuZGVyZXIncyBkZWZhdWx0IHJlc29sdXRpb24sIGZyYW1lcmF0ZSwgZmxvYXQgcHJlY2lzaW9uLCBldGMuXG4gKiBAZXhhbXBsZVxuICogLy8gVXNlIHRoZSBuYXRpdmUgd2luZG93IHJlc29sdXRpb24gYXMgdGhlIGRlZmF1bHQgcmVzb2x1dGlvblxuICogLy8gd2lsbCBzdXBwb3J0IGhpZ2gtZGVuc2l0eSBkaXNwbGF5cyB3aGVuIHJlbmRlcmluZ1xuICogUElYSS5zZXR0aW5ncy5SRVNPTFVUSU9OID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gKlxuICogLy8gRGlzYWJsZSBpbnRlcnBvbGF0aW9uIHdoZW4gc2NhbGluZywgd2lsbCBtYWtlIHRleHR1cmUgYmUgcGl4ZWxhdGVkXG4gKiBQSVhJLnNldHRpbmdzLlNDQUxFX01PREUgPSBQSVhJLlNDQUxFX01PREVTLk5FQVJFU1Q7XG4gKiBAbmFtZXNwYWNlIFBJWEkuc2V0dGluZ3NcbiAqL1xuZXhwb3J0IGNvbnN0IHNldHRpbmdzOiBJU2V0dGluZ3MgPSB7XG5cbiAgICAvKipcbiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSBXZWJHTCB3aWxsIGF0dGVtcHQgbWFrZSB0ZXh0dXJlcyBtaW1wYXBlZCBieSBkZWZhdWx0LlxuICAgICAqIE1pcG1hcHBpbmcgd2lsbCBvbmx5IHN1Y2NlZWQgaWYgdGhlIGJhc2UgdGV4dHVyZSB1cGxvYWRlZCBoYXMgcG93ZXIgb2YgdHdvIGRpbWVuc2lvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG5hbWUgTUlQTUFQX1RFWFRVUkVTXG4gICAgICogQG1lbWJlcm9mIFBJWEkuc2V0dGluZ3NcbiAgICAgKiBAdHlwZSB7UElYSS5NSVBNQVBfTU9ERVN9XG4gICAgICogQGRlZmF1bHQgUElYSS5NSVBNQVBfTU9ERVMuUE9XMlxuICAgICAqL1xuICAgIE1JUE1BUF9URVhUVVJFUzogMSxcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgYW5pc290cm9waWMgZmlsdGVyaW5nIGxldmVsIG9mIHRleHR1cmVzLlxuICAgICAqIFVzdWFsbHkgZnJvbSAwIHRvIDE2XG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG5hbWUgQU5JU09UUk9QSUNfTEVWRUxcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIEFOSVNPVFJPUElDX0xFVkVMOiAwLFxuXG4gICAgLyoqXG4gICAgICogRGVmYXVsdCByZXNvbHV0aW9uIC8gZGV2aWNlIHBpeGVsIHJhdGlvIG9mIHRoZSByZW5kZXJlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbmFtZSBSRVNPTFVUSU9OXG4gICAgICogQG1lbWJlcm9mIFBJWEkuc2V0dGluZ3NcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDFcbiAgICAgKi9cbiAgICBSRVNPTFVUSU9OOiAxLFxuXG4gICAgLyoqXG4gICAgICogRGVmYXVsdCBmaWx0ZXIgcmVzb2x1dGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbmFtZSBGSUxURVJfUkVTT0xVVElPTlxuICAgICAqIEBtZW1iZXJvZiBQSVhJLnNldHRpbmdzXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCAxXG4gICAgICovXG4gICAgRklMVEVSX1JFU09MVVRJT046IDEsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSB0ZXh0dXJlcyB0aGF0IHRoaXMgZGV2aWNlIHN1cHBvcnRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBuYW1lIFNQUklURV9NQVhfVEVYVFVSRVNcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMzJcbiAgICAgKi9cbiAgICBTUFJJVEVfTUFYX1RFWFRVUkVTOiBtYXhSZWNvbW1lbmRlZFRleHR1cmVzKDMyKSxcblxuICAgIC8vIFRPRE86IG1heWJlIGNoYW5nZSB0byBTUFJJVEUuQkFUQ0hfU0laRTogMjAwMFxuICAgIC8vIFRPRE86IG1heWJlIGFkZCBQQVJUSUNMRS5CQVRDSF9TSVpFOiAxNTAwMFxuXG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgc3ByaXRlIGJhdGNoIHNpemUuXG4gICAgICpcbiAgICAgKiBUaGUgZGVmYXVsdCBhaW1zIHRvIGJhbGFuY2UgZGVza3RvcCBhbmQgbW9iaWxlIGRldmljZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG5hbWUgU1BSSVRFX0JBVENIX1NJWkVcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgNDA5NlxuICAgICAqL1xuICAgIFNQUklURV9CQVRDSF9TSVpFOiA0MDk2LFxuXG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgcmVuZGVyIG9wdGlvbnMgaWYgbm9uZSBhcmUgc3VwcGxpZWQgdG8ge0BsaW5rIFBJWEkuUmVuZGVyZXJ9XG4gICAgICogb3Ige0BsaW5rIFBJWEkuQ2FudmFzUmVuZGVyZXJ9LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBuYW1lIFJFTkRFUl9PUFRJT05TXG4gICAgICogQG1lbWJlcm9mIFBJWEkuc2V0dGluZ3NcbiAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAqIEBwcm9wZXJ0eSB7SFRNTENhbnZhc0VsZW1lbnR9IHZpZXc9bnVsbFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByZXNvbHV0aW9uPTFcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IGFudGlhbGlhcz1mYWxzZVxuICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYXV0b0RlbnNpdHk9ZmFsc2VcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IHRyYW5zcGFyZW50PWZhbHNlXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IGJhY2tncm91bmRDb2xvcj0weDAwMDAwMFxuICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gY2xlYXJCZWZvcmVSZW5kZXI9dHJ1ZVxuICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcHJlc2VydmVEcmF3aW5nQnVmZmVyPWZhbHNlXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHdpZHRoPTgwMFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoZWlnaHQ9NjAwXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufSBsZWdhY3k9ZmFsc2VcbiAgICAgKi9cbiAgICBSRU5ERVJfT1BUSU9OUzoge1xuICAgICAgICB2aWV3OiBudWxsLFxuICAgICAgICBhbnRpYWxpYXM6IGZhbHNlLFxuICAgICAgICBhdXRvRGVuc2l0eTogZmFsc2UsXG4gICAgICAgIHRyYW5zcGFyZW50OiBmYWxzZSxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAweDAwMDAwMCxcbiAgICAgICAgY2xlYXJCZWZvcmVSZW5kZXI6IHRydWUsXG4gICAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogZmFsc2UsXG4gICAgICAgIHdpZHRoOiA4MDAsXG4gICAgICAgIGhlaWdodDogNjAwLFxuICAgICAgICBsZWdhY3k6IGZhbHNlLFxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IEdhcmJhZ2UgQ29sbGVjdGlvbiBtb2RlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBuYW1lIEdDX01PREVcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICAgICAqIEB0eXBlIHtQSVhJLkdDX01PREVTfVxuICAgICAqIEBkZWZhdWx0IFBJWEkuR0NfTU9ERVMuQVVUT1xuICAgICAqL1xuICAgIEdDX01PREU6IDAsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IEdhcmJhZ2UgQ29sbGVjdGlvbiBtYXggaWRsZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbmFtZSBHQ19NQVhfSURMRVxuICAgICAqIEBtZW1iZXJvZiBQSVhJLnNldHRpbmdzXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCAzNjAwXG4gICAgICovXG4gICAgR0NfTUFYX0lETEU6IDYwICogNjAsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IEdhcmJhZ2UgQ29sbGVjdGlvbiBtYXhpbXVtIGNoZWNrIGNvdW50LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBuYW1lIEdDX01BWF9DSEVDS19DT1VOVFxuICAgICAqIEBtZW1iZXJvZiBQSVhJLnNldHRpbmdzXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCA2MDBcbiAgICAgKi9cbiAgICBHQ19NQVhfQ0hFQ0tfQ09VTlQ6IDYwICogMTAsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHdyYXAgbW9kZXMgdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHBpeGkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG5hbWUgV1JBUF9NT0RFXG4gICAgICogQG1lbWJlcm9mIFBJWEkuc2V0dGluZ3NcbiAgICAgKiBAdHlwZSB7UElYSS5XUkFQX01PREVTfVxuICAgICAqIEBkZWZhdWx0IFBJWEkuV1JBUF9NT0RFUy5DTEFNUFxuICAgICAqL1xuICAgIFdSQVBfTU9ERTogMzMwNzEsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHNjYWxlIG1vZGUgZm9yIHRleHR1cmVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBuYW1lIFNDQUxFX01PREVcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICAgICAqIEB0eXBlIHtQSVhJLlNDQUxFX01PREVTfVxuICAgICAqIEBkZWZhdWx0IFBJWEkuU0NBTEVfTU9ERVMuTElORUFSXG4gICAgICovXG4gICAgU0NBTEVfTU9ERTogMSxcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgc3BlY2lmeSBmbG9hdCBwcmVjaXNpb24gaW4gdmVydGV4IHNoYWRlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbmFtZSBQUkVDSVNJT05fVkVSVEVYXG4gICAgICogQG1lbWJlcm9mIFBJWEkuc2V0dGluZ3NcbiAgICAgKiBAdHlwZSB7UElYSS5QUkVDSVNJT059XG4gICAgICogQGRlZmF1bHQgUElYSS5QUkVDSVNJT04uSElHSFxuICAgICAqL1xuICAgIFBSRUNJU0lPTl9WRVJURVg6ICdoaWdocCcsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHNwZWNpZnkgZmxvYXQgcHJlY2lzaW9uIGluIGZyYWdtZW50IHNoYWRlci5cbiAgICAgKiBpT1MgaXMgYmVzdCBzZXQgYXQgaGlnaHAgZHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9waXhpanMvcGl4aS5qcy9pc3N1ZXMvMzc0MlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBuYW1lIFBSRUNJU0lPTl9GUkFHTUVOVFxuICAgICAqIEBtZW1iZXJvZiBQSVhJLnNldHRpbmdzXG4gICAgICogQHR5cGUge1BJWEkuUFJFQ0lTSU9OfVxuICAgICAqIEBkZWZhdWx0IFBJWEkuUFJFQ0lTSU9OLk1FRElVTVxuICAgICAqL1xuICAgIFBSRUNJU0lPTl9GUkFHTUVOVDogaXNNb2JpbGUuYXBwbGUuZGV2aWNlID8gJ2hpZ2hwJyA6ICdtZWRpdW1wJyxcblxuICAgIC8qKlxuICAgICAqIENhbiB3ZSB1cGxvYWQgdGhlIHNhbWUgYnVmZmVyIGluIGEgc2luZ2xlIGZyYW1lP1xuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBuYW1lIENBTl9VUExPQURfU0FNRV9CVUZGRVJcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIENBTl9VUExPQURfU0FNRV9CVUZGRVI6IGNhblVwbG9hZFNhbWVCdWZmZXIoKSxcblxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgYml0bWFwIGNyZWF0aW9uIGJlZm9yZSBpbWFnZSBsb2FkLiBUaGlzIGZlYXR1cmUgaXMgZXhwZXJpbWVudGFsLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBuYW1lIENSRUFURV9JTUFHRV9CSVRNQVBcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgQ1JFQVRFX0lNQUdFX0JJVE1BUDogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlIFBpeGlKUyB3aWxsIE1hdGguZmxvb3IoKSB4L3kgdmFsdWVzIHdoZW4gcmVuZGVyaW5nLCBzdG9wcGluZyBwaXhlbCBpbnRlcnBvbGF0aW9uLlxuICAgICAqIEFkdmFudGFnZXMgY2FuIGluY2x1ZGUgc2hhcnBlciBpbWFnZSBxdWFsaXR5IChsaWtlIHRleHQpIGFuZCBmYXN0ZXIgcmVuZGVyaW5nIG9uIGNhbnZhcy5cbiAgICAgKiBUaGUgbWFpbiBkaXNhZHZhbnRhZ2UgaXMgbW92ZW1lbnQgb2Ygb2JqZWN0cyBtYXkgYXBwZWFyIGxlc3Mgc21vb3RoLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBjb25zdGFudFxuICAgICAqIEBtZW1iZXJvZiBQSVhJLnNldHRpbmdzXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBST1VORF9QSVhFTFM6IGZhbHNlLFxufTtcbiIsICIvKipcbiAqIERpZmZlcmVudCB0eXBlcyBvZiBlbnZpcm9ubWVudHMgZm9yIFdlYkdMLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAbmFtZSBFTlZcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gV0VCR0xfTEVHQUNZIC0gVXNlZCBmb3Igb2xkZXIgdjEgV2ViR0wgZGV2aWNlcy4gUGl4aUpTIHdpbGwgYWltIHRvIGVuc3VyZSBjb21wYXRpYmlsaXR5XG4gKiAgd2l0aCBvbGRlciAvIGxlc3MgYWR2YW5jZWQgZGV2aWNlcy4gSWYgeW91IGV4cGVyaWVuY2UgdW5leHBsYWluZWQgZmxpY2tlcmluZyBwcmVmZXIgdGhpcyBlbnZpcm9ubWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBXRUJHTCAtIFZlcnNpb24gMSBvZiBXZWJHTFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFdFQkdMMiAtIFZlcnNpb24gMiBvZiBXZWJHTFxuICovXG5leHBvcnQgZW51bSBFTlYge1xuICAgIFdFQkdMX0xFR0FDWSxcbiAgICBXRUJHTCxcbiAgICBXRUJHTDIsXG59XG5cbi8qKlxuICogQ29uc3RhbnQgdG8gaWRlbnRpZnkgdGhlIFJlbmRlcmVyIFR5cGUuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlcm9mIFBJWElcbiAqIEBuYW1lIFJFTkRFUkVSX1RZUEVcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gVU5LTk9XTiAtIFVua25vd24gcmVuZGVyIHR5cGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gV0VCR0wgLSBXZWJHTCByZW5kZXIgdHlwZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDQU5WQVMgLSBDYW52YXMgcmVuZGVyIHR5cGUuXG4gKi9cbmV4cG9ydCBlbnVtIFJFTkRFUkVSX1RZUEUge1xuICAgIFVOS05PV04sXG4gICAgV0VCR0wsXG4gICAgQ0FOVkFTLFxufVxuXG4vKipcbiAqIEJpdHdpc2UgT1Igb2YgbWFza3MgdGhhdCBpbmRpY2F0ZSB0aGUgYnVmZmVycyB0byBiZSBjbGVhcmVkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAbmFtZSBCVUZGRVJfQklUU1xuICogQGVudW0ge251bWJlcn1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDT0xPUiAtIEluZGljYXRlcyB0aGUgYnVmZmVycyBjdXJyZW50bHkgZW5hYmxlZCBmb3IgY29sb3Igd3JpdGluZy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBERVBUSCAtIEluZGljYXRlcyB0aGUgZGVwdGggYnVmZmVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNURU5DSUwgLSBJbmRpY2F0ZXMgdGhlIHN0ZW5jaWwgYnVmZmVyLlxuICovXG5leHBvcnQgZW51bSBCVUZGRVJfQklUUyB7XG4gICAgQ09MT1IgPSAweDAwMDA0MDAwLFxuICAgIERFUFRIID0gMHgwMDAwMDEwMCxcbiAgICBTVEVOQ0lMID0gMHgwMDAwMDQwMFxufVxuXG4vKipcbiAqIFZhcmlvdXMgYmxlbmQgbW9kZXMgc3VwcG9ydGVkIGJ5IFBJWEkuXG4gKlxuICogSU1QT1JUQU5UIC0gVGhlIFdlYkdMIHJlbmRlcmVyIG9ubHkgc3VwcG9ydHMgdGhlIE5PUk1BTCwgQURELCBNVUxUSVBMWSBhbmQgU0NSRUVOIGJsZW5kIG1vZGVzLlxuICogQW55dGhpbmcgZWxzZSB3aWxsIHNpbGVudGx5IGFjdCBsaWtlIE5PUk1BTC5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQG5hbWUgQkxFTkRfTU9ERVNcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gTk9STUFMXG4gKiBAcHJvcGVydHkge251bWJlcn0gQUREXG4gKiBAcHJvcGVydHkge251bWJlcn0gTVVMVElQTFlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTQ1JFRU5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBPVkVSTEFZXG4gKiBAcHJvcGVydHkge251bWJlcn0gREFSS0VOXG4gKiBAcHJvcGVydHkge251bWJlcn0gTElHSFRFTlxuICogQHByb3BlcnR5IHtudW1iZXJ9IENPTE9SX0RPREdFXG4gKiBAcHJvcGVydHkge251bWJlcn0gQ09MT1JfQlVSTlxuICogQHByb3BlcnR5IHtudW1iZXJ9IEhBUkRfTElHSFRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTT0ZUX0xJR0hUXG4gKiBAcHJvcGVydHkge251bWJlcn0gRElGRkVSRU5DRVxuICogQHByb3BlcnR5IHtudW1iZXJ9IEVYQ0xVU0lPTlxuICogQHByb3BlcnR5IHtudW1iZXJ9IEhVRVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNBVFVSQVRJT05cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDT0xPUlxuICogQHByb3BlcnR5IHtudW1iZXJ9IExVTUlOT1NJVFlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBOT1JNQUxfTlBNXG4gKiBAcHJvcGVydHkge251bWJlcn0gQUREX05QTVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNDUkVFTl9OUE1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBOT05FXG4gKiBAcHJvcGVydHkge251bWJlcn0gU1JDX0lOXG4gKiBAcHJvcGVydHkge251bWJlcn0gU1JDX09VVFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNSQ19BVE9QXG4gKiBAcHJvcGVydHkge251bWJlcn0gRFNUX09WRVJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBEU1RfSU5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBEU1RfT1VUXG4gKiBAcHJvcGVydHkge251bWJlcn0gRFNUX0FUT1BcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTVUJUUkFDVFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNSQ19PVkVSXG4gKiBAcHJvcGVydHkge251bWJlcn0gRVJBU0VcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBYT1JcbiAqL1xuZXhwb3J0IGVudW0gQkxFTkRfTU9ERVMge1xuICAgIE5PUk1BTCA9IDAsXG4gICAgQUREID0gMSxcbiAgICBNVUxUSVBMWSA9IDIsXG4gICAgU0NSRUVOID0gMyxcbiAgICBPVkVSTEFZID0gNCxcbiAgICBEQVJLRU4gPSA1LFxuICAgIExJR0hURU4gPSA2LFxuICAgIENPTE9SX0RPREdFID0gNyxcbiAgICBDT0xPUl9CVVJOID0gOCxcbiAgICBIQVJEX0xJR0hUID0gOSxcbiAgICBTT0ZUX0xJR0hUID0gMTAsXG4gICAgRElGRkVSRU5DRSA9IDExLFxuICAgIEVYQ0xVU0lPTiA9IDEyLFxuICAgIEhVRSA9IDEzLFxuICAgIFNBVFVSQVRJT04gPSAxNCxcbiAgICBDT0xPUiA9IDE1LFxuICAgIExVTUlOT1NJVFkgPSAxNixcbiAgICBOT1JNQUxfTlBNID0gMTcsXG4gICAgQUREX05QTSA9IDE4LFxuICAgIFNDUkVFTl9OUE0gPSAxOSxcbiAgICBOT05FID0gMjAsXG5cbiAgICBTUkNfT1ZFUiA9IDAsXG4gICAgU1JDX0lOID0gMjEsXG4gICAgU1JDX09VVCA9IDIyLFxuICAgIFNSQ19BVE9QID0gMjMsXG4gICAgRFNUX09WRVIgPSAyNCxcbiAgICBEU1RfSU4gPSAyNSxcbiAgICBEU1RfT1VUID0gMjYsXG4gICAgRFNUX0FUT1AgPSAyNyxcbiAgICBFUkFTRSA9IDI2LFxuICAgIFNVQlRSQUNUID0gMjgsXG4gICAgWE9SID0gMjksXG59XG5cbi8qKlxuICogVmFyaW91cyB3ZWJnbCBkcmF3IG1vZGVzLiBUaGVzZSBjYW4gYmUgdXNlZCB0byBzcGVjaWZ5IHdoaWNoIEdMIGRyYXdNb2RlIHRvIHVzZVxuICogdW5kZXIgY2VydGFpbiBzaXR1YXRpb25zIGFuZCByZW5kZXJlcnMuXG4gKlxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBzdGF0aWNcbiAqIEBuYW1lIERSQVdfTU9ERVNcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gUE9JTlRTXG4gKiBAcHJvcGVydHkge251bWJlcn0gTElORVNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBMSU5FX0xPT1BcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBMSU5FX1NUUklQXG4gKiBAcHJvcGVydHkge251bWJlcn0gVFJJQU5HTEVTXG4gKiBAcHJvcGVydHkge251bWJlcn0gVFJJQU5HTEVfU1RSSVBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBUUklBTkdMRV9GQU5cbiAqL1xuZXhwb3J0IGVudW0gRFJBV19NT0RFUyB7XG4gICAgUE9JTlRTLFxuICAgIExJTkVTLFxuICAgIExJTkVfTE9PUCxcbiAgICBMSU5FX1NUUklQLFxuICAgIFRSSUFOR0xFUyxcbiAgICBUUklBTkdMRV9TVFJJUCxcbiAgICBUUklBTkdMRV9GQU4sXG59XG5cbi8qKlxuICogVmFyaW91cyBHTCB0ZXh0dXJlL3Jlc291cmNlcyBmb3JtYXRzLlxuICpcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAbmFtZSBGT1JNQVRTXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFJHQkE9NjQwOFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFJHQj02NDA3XG4gKiBAcHJvcGVydHkge251bWJlcn0gQUxQSEE9NjQwNlxuICogQHByb3BlcnR5IHtudW1iZXJ9IExVTUlOQU5DRT02NDA5XG4gKiBAcHJvcGVydHkge251bWJlcn0gTFVNSU5BTkNFX0FMUEhBPTY0MTBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBERVBUSF9DT01QT05FTlQ9NjQwMlxuICogQHByb3BlcnR5IHtudW1iZXJ9IERFUFRIX1NURU5DSUw9MzQwNDFcbiAqL1xuZXhwb3J0IGVudW0gRk9STUFUUyB7XG4gICAgUkdCQSA9IDY0MDgsXG4gICAgUkdCID0gNjQwNyxcbiAgICBBTFBIQSA9IDY0MDYsXG4gICAgTFVNSU5BTkNFID0gNjQwOSxcbiAgICBMVU1JTkFOQ0VfQUxQSEEgPSA2NDEwLFxuICAgIERFUFRIX0NPTVBPTkVOVCA9IDY0MDIsXG4gICAgREVQVEhfU1RFTkNJTCA9IDM0MDQxLFxufVxuXG4vKipcbiAqIFZhcmlvdXMgR0wgdGFyZ2V0IHR5cGVzLlxuICpcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAbmFtZSBUQVJHRVRTXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFRFWFRVUkVfMkQ9MzU1M1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFRFWFRVUkVfQ1VCRV9NQVA9MzQwNjdcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBURVhUVVJFXzJEX0FSUkFZPTM1ODY2XG4gKiBAcHJvcGVydHkge251bWJlcn0gVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YPTM0MDY5XG4gKiBAcHJvcGVydHkge251bWJlcn0gVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9YPTM0MDcwXG4gKiBAcHJvcGVydHkge251bWJlcn0gVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9ZPTM0MDcxXG4gKiBAcHJvcGVydHkge251bWJlcn0gVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9ZPTM0MDcyXG4gKiBAcHJvcGVydHkge251bWJlcn0gVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9aPTM0MDczXG4gKiBAcHJvcGVydHkge251bWJlcn0gVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9aPTM0MDc0XG4gKi9cbmV4cG9ydCBlbnVtIFRBUkdFVFMge1xuICAgIFRFWFRVUkVfMkQgPSAzNTUzLFxuICAgIFRFWFRVUkVfQ1VCRV9NQVAgPSAzNDA2NyxcbiAgICBURVhUVVJFXzJEX0FSUkFZID0gMzU4NjYsXG4gICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YID0gMzQwNjksXG4gICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9YID0gMzQwNzAsXG4gICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9ZID0gMzQwNzEsXG4gICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9ZID0gMzQwNzIsXG4gICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9aID0gMzQwNzMsXG4gICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9aID0gMzQwNzQsXG59XG5cbi8qKlxuICogVmFyaW91cyBHTCBkYXRhIGZvcm1hdCB0eXBlcy5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHN0YXRpY1xuICogQG5hbWUgVFlQRVNcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gVU5TSUdORURfQllURT01MTIxXG4gKiBAcHJvcGVydHkge251bWJlcn0gVU5TSUdORURfU0hPUlQ9NTEyM1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFVOU0lHTkVEX1NIT1JUXzVfNl81PTMzNjM1XG4gKiBAcHJvcGVydHkge251bWJlcn0gVU5TSUdORURfU0hPUlRfNF80XzRfND0zMjgxOVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFVOU0lHTkVEX1NIT1JUXzVfNV81XzE9MzI4MjBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBGTE9BVD01MTI2XG4gKiBAcHJvcGVydHkge251bWJlcn0gSEFMRl9GTE9BVD0zNjE5M1xuICovXG5leHBvcnQgZW51bSBUWVBFUyB7XG4gICAgVU5TSUdORURfQllURSA9IDUxMjEsXG4gICAgVU5TSUdORURfU0hPUlQgPSA1MTIzLFxuICAgIFVOU0lHTkVEX1NIT1JUXzVfNl81ID0gMzM2MzUsXG4gICAgVU5TSUdORURfU0hPUlRfNF80XzRfNCA9IDMyODE5LFxuICAgIFVOU0lHTkVEX1NIT1JUXzVfNV81XzEgPSAzMjgyMCxcbiAgICBGTE9BVCA9IDUxMjYsXG4gICAgSEFMRl9GTE9BVCA9IDM2MTkzLFxufVxuXG4vKipcbiAqIFRoZSBzY2FsZSBtb2RlcyB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcGl4aS5cbiAqXG4gKiBUaGUge0BsaW5rIFBJWEkuc2V0dGluZ3MuU0NBTEVfTU9ERX0gc2NhbGUgbW9kZSBhZmZlY3RzIHRoZSBkZWZhdWx0IHNjYWxpbmcgbW9kZSBvZiBmdXR1cmUgb3BlcmF0aW9ucy5cbiAqIEl0IGNhbiBiZSByZS1hc3NpZ25lZCB0byBlaXRoZXIgTElORUFSIG9yIE5FQVJFU1QsIGRlcGVuZGluZyB1cG9uIHN1aXRhYmlsaXR5LlxuICpcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAbmFtZSBTQ0FMRV9NT0RFU1xuICogQGVudW0ge251bWJlcn1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBMSU5FQVIgU21vb3RoIHNjYWxpbmdcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBORUFSRVNUIFBpeGVsYXRpbmcgc2NhbGluZ1xuICovXG5leHBvcnQgZW51bSBTQ0FMRV9NT0RFUyB7XG4gICAgTkVBUkVTVCxcbiAgICBMSU5FQVIsXG59XG5cbi8qKlxuICogVGhlIHdyYXAgbW9kZXMgdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHBpeGkuXG4gKlxuICogVGhlIHtAbGluayBQSVhJLnNldHRpbmdzLldSQVBfTU9ERX0gd3JhcCBtb2RlIGFmZmVjdHMgdGhlIGRlZmF1bHQgd3JhcHBpbmcgbW9kZSBvZiBmdXR1cmUgb3BlcmF0aW9ucy5cbiAqIEl0IGNhbiBiZSByZS1hc3NpZ25lZCB0byBlaXRoZXIgQ0xBTVAgb3IgUkVQRUFULCBkZXBlbmRpbmcgdXBvbiBzdWl0YWJpbGl0eS5cbiAqIElmIHRoZSB0ZXh0dXJlIGlzIG5vbiBwb3dlciBvZiB0d28gdGhlbiBjbGFtcCB3aWxsIGJlIHVzZWQgcmVnYXJkbGVzcyBhcyBXZWJHTCBjYW5cbiAqIG9ubHkgdXNlIFJFUEVBVCBpZiB0aGUgdGV4dHVyZSBpcyBwbzIuXG4gKlxuICogVGhpcyBwcm9wZXJ0eSBvbmx5IGFmZmVjdHMgV2ViR0wuXG4gKlxuICogQG5hbWUgV1JBUF9NT0RFU1xuICogQG1lbWJlcm9mIFBJWElcbiAqIEBzdGF0aWNcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gQ0xBTVAgLSBUaGUgdGV4dHVyZXMgdXZzIGFyZSBjbGFtcGVkXG4gKiBAcHJvcGVydHkge251bWJlcn0gUkVQRUFUIC0gVGhlIHRleHR1cmUgdXZzIHRpbGUgYW5kIHJlcGVhdFxuICogQHByb3BlcnR5IHtudW1iZXJ9IE1JUlJPUkVEX1JFUEVBVCAtIFRoZSB0ZXh0dXJlIHV2cyB0aWxlIGFuZCByZXBlYXQgd2l0aCBtaXJyb3JpbmdcbiAqL1xuZXhwb3J0IGVudW0gV1JBUF9NT0RFUyB7XG4gICAgQ0xBTVAgPSAzMzA3MSxcbiAgICBSRVBFQVQgPSAxMDQ5NyxcbiAgICBNSVJST1JFRF9SRVBFQVQgPSAzMzY0OCxcbn1cblxuLyoqXG4gKiBNaXBtYXAgZmlsdGVyaW5nIG1vZGVzIHRoYXQgYXJlIHN1cHBvcnRlZCBieSBwaXhpLlxuICpcbiAqIFRoZSB7QGxpbmsgUElYSS5zZXR0aW5ncy5NSVBNQVBfVEVYVFVSRVN9IGFmZmVjdHMgZGVmYXVsdCB0ZXh0dXJlIGZpbHRlcmluZy5cbiAqIE1pcG1hcHMgYXJlIGdlbmVyYXRlZCBmb3IgYSBiYXNlVGV4dHVyZSBpZiBpdHMgYG1pcG1hcGAgZmllbGQgaXMgYE9OYCxcbiAqIG9yIGl0cyBgUE9XMmAgYW5kIHRleHR1cmUgZGltZW5zaW9ucyBhcmUgcG93ZXJzIG9mIDIuXG4gKiBEdWUgdG8gcGxhdGZvcm0gcmVzdHJpY3Rpb24sIGBPTmAgb3B0aW9uIHdpbGwgd29yayBsaWtlIGBQT1cyYCBmb3Igd2ViZ2wtMS5cbiAqXG4gKiBUaGlzIHByb3BlcnR5IG9ubHkgYWZmZWN0cyBXZWJHTC5cbiAqXG4gKiBAbmFtZSBNSVBNQVBfTU9ERVNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IE9GRiAtIE5vIG1pcG1hcHNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBQT1cyIC0gR2VuZXJhdGUgbWlwbWFwcyBpZiB0ZXh0dXJlIGRpbWVuc2lvbnMgYXJlIHBvdzJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBPTiAtIEFsd2F5cyBnZW5lcmF0ZSBtaXBtYXBzXG4gKi9cbmV4cG9ydCBlbnVtIE1JUE1BUF9NT0RFUyB7XG4gICAgT0ZGLFxuICAgIFBPVzIsXG4gICAgT04sXG59XG5cbi8qKlxuICogSG93IHRvIHRyZWF0IHRleHR1cmVzIHdpdGggcHJlbXVsdGlwbGllZCBhbHBoYVxuICpcbiAqIEBuYW1lIEFMUEhBX01PREVTXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHN0YXRpY1xuICogQGVudW0ge251bWJlcn1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBOT19QUkVNVUxUSVBMSUVEX0FMUEhBIC0gU291cmNlIGlzIG5vdCBwcmVtdWx0aXBsaWVkLCBsZWF2ZSBpdCBsaWtlIHRoYXQuXG4gKiAgT3B0aW9uIGZvciBjb21wcmVzc2VkIGFuZCBkYXRhIHRleHR1cmVzIHRoYXQgYXJlIGNyZWF0ZWQgZnJvbSB0eXBlZCBhcnJheXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gUFJFTVVMVElQTFlfT05fVVBMT0FEIC0gU291cmNlIGlzIG5vdCBwcmVtdWx0aXBsaWVkLCBwcmVtdWx0aXBseSBvbiB1cGxvYWQuXG4gKiAgRGVmYXVsdCBvcHRpb24sIHVzZWQgZm9yIGFsbCBsb2FkZWQgaW1hZ2VzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFBSRU1VTFRJUExJRURfQUxQSEEgLSBTb3VyY2UgaXMgYWxyZWFkeSBwcmVtdWx0aXBsaWVkXG4gKiAgRXhhbXBsZTogc3BpbmUgYXRsYXNlcyB3aXRoIGBfcG1hYCBzdWZmaXguXG4gKiBAcHJvcGVydHkge251bWJlcn0gTlBNIC0gQWxpYXMgZm9yIE5PX1BSRU1VTFRJUExJRURfQUxQSEEuXG4gKiBAcHJvcGVydHkge251bWJlcn0gVU5QQUNLIC0gRGVmYXVsdCBvcHRpb24sIGFsaWFzIGZvciBQUkVNVUxUSVBMWV9PTl9VUExPQUQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gUE1BIC0gQWxpYXMgZm9yIFBSRU1VTFRJUExJRURfQUxQSEEuXG4gKi9cbmV4cG9ydCBlbnVtIEFMUEhBX01PREVTIHtcbiAgICBOUE0gPSAwLFxuICAgIFVOUEFDSyA9IDEsXG4gICAgUE1BID0gMixcbiAgICBOT19QUkVNVUxUSVBMSUVEX0FMUEhBID0gMCxcbiAgICBQUkVNVUxUSVBMWV9PTl9VUExPQUQgPSAxLFxuICAgIFBSRU1VTFRJUExZX0FMUEhBID0gMixcbn1cblxuLyoqXG4gKiBIb3cgdG8gY2xlYXIgcmVuZGVyVGV4dHVyZXMgaW4gZmlsdGVyXG4gKlxuICogQG5hbWUgQ0xFQVJfTU9ERVNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IEJMRU5EIC0gUHJlc2VydmUgdGhlIGluZm9ybWF0aW9uIGluIHRoZSB0ZXh0dXJlLCBibGVuZCBhYm92ZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IENMRUFSIC0gTXVzdCB1c2UgYGdsLmNsZWFyYCBvcGVyYXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBCTElUIC0gQ2xlYXIgb3IgYmxpdCBpdCwgZGVwZW5kcyBvbiBkZXZpY2UgYW5kIGxldmVsIG9mIHBhcmFub2lhXG4gKiBAcHJvcGVydHkge251bWJlcn0gTk8gLSBBbGlhcyBmb3IgQkxFTkQsIHNhbWUgYXMgYGZhbHNlYCBpbiBlYXJsaWVyIHZlcnNpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gWUVTIC0gQWxpYXMgZm9yIENMRUFSLCBzYW1lIGFzIGB0cnVlYCBpbiBlYXJsaWVyIHZlcnNpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gQVVUTyAtIEFsaWFzIGZvciBCTElUXG4gKi9cbmV4cG9ydCBlbnVtIENMRUFSX01PREVTIHtcbiAgICBOTyA9IDAsXG4gICAgWUVTID0gMSxcbiAgICBBVVRPID0gMixcbiAgICBCTEVORCA9IDAsXG4gICAgQ0xFQVIgPSAxLFxuICAgIEJMSVQgPSAyLFxufVxuXG4vKipcbiAqIFRoZSBnYyBtb2RlcyB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcGl4aS5cbiAqXG4gKiBUaGUge0BsaW5rIFBJWEkuc2V0dGluZ3MuR0NfTU9ERX0gR2FyYmFnZSBDb2xsZWN0aW9uIG1vZGUgZm9yIFBpeGlKUyB0ZXh0dXJlcyBpcyBBVVRPXG4gKiBJZiBzZXQgdG8gR0NfTU9ERSwgdGhlIHJlbmRlcmVyIHdpbGwgb2NjYXNpb25hbGx5IGNoZWNrIHRleHR1cmVzIHVzYWdlLiBJZiB0aGV5IGFyZSBub3RcbiAqIHVzZWQgZm9yIGEgc3BlY2lmaWVkIHBlcmlvZCBvZiB0aW1lIHRoZXkgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIEdQVS4gVGhleSB3aWxsIG9mIGNvdXJzZVxuICogYmUgdXBsb2FkZWQgYWdhaW4gd2hlbiB0aGV5IGFyZSByZXF1aXJlZC4gVGhpcyBpcyBhIHNpbGVudCBiZWhpbmQgdGhlIHNjZW5lcyBwcm9jZXNzIHRoYXRcbiAqIHNob3VsZCBlbnN1cmUgdGhhdCB0aGUgR1BVIGRvZXMgbm90ICBnZXQgZmlsbGVkIHVwLlxuICpcbiAqIEhhbmR5IGZvciBtb2JpbGUgZGV2aWNlcyFcbiAqIFRoaXMgcHJvcGVydHkgb25seSBhZmZlY3RzIFdlYkdMLlxuICpcbiAqIEBuYW1lIEdDX01PREVTXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHN0YXRpY1xuICogQG1lbWJlcm9mIFBJWElcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBBVVRPIC0gR2FyYmFnZSBjb2xsZWN0aW9uIHdpbGwgaGFwcGVuIHBlcmlvZGljYWxseSBhdXRvbWF0aWNhbGx5XG4gKiBAcHJvcGVydHkge251bWJlcn0gTUFOVUFMIC0gR2FyYmFnZSBjb2xsZWN0aW9uIHdpbGwgbmVlZCB0byBiZSBjYWxsZWQgbWFudWFsbHlcbiAqL1xuZXhwb3J0IGVudW0gR0NfTU9ERVMge1xuICAgIEFVVE8sXG4gICAgTUFOVUFMLFxufVxuXG4vKipcbiAqIENvbnN0YW50cyB0aGF0IHNwZWNpZnkgZmxvYXQgcHJlY2lzaW9uIGluIHNoYWRlcnMuXG4gKlxuICogQG5hbWUgUFJFQ0lTSU9OXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQGNvbnN0YW50XG4gKiBAc3RhdGljXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByb3BlcnR5IHtzdHJpbmd9IExPVz0nbG93cCdcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBNRURJVU09J21lZGl1bXAnXG4gKiBAcHJvcGVydHkge3N0cmluZ30gSElHSD0naGlnaHAnXG4gKi9cbmV4cG9ydCBlbnVtIFBSRUNJU0lPTiB7XG4gICAgTE9XID0gJ2xvd3AnLFxuICAgIE1FRElVTSA9ICdtZWRpdW1wJyxcbiAgICBISUdIID0gJ2hpZ2hwJyxcbn1cblxuLyoqXG4gKiBDb25zdGFudHMgZm9yIG1hc2sgaW1wbGVtZW50YXRpb25zLlxuICogV2UgdXNlIGB0eXBlYCBzdWZmaXggYmVjYXVzZSBpdCBsZWFkcyB0byB2ZXJ5IGRpZmZlcmVudCBiZWhhdmlvdXJzXG4gKlxuICogQG5hbWUgTUFTS19UWVBFU1xuICogQG1lbWJlcm9mIFBJWElcbiAqIEBzdGF0aWNcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gTk9ORSAtIE1hc2sgaXMgaWdub3JlZFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNDSVNTT1IgLSBTY2lzc29yIG1hc2ssIHJlY3RhbmdsZSBvbiBzY3JlZW4sIGNoZWFwXG4gKiBAcHJvcGVydHkge251bWJlcn0gU1RFTkNJTCAtIFN0ZW5jaWwgbWFzaywgMS1iaXQsIG1lZGl1bSwgd29ya3Mgb25seSBpZiByZW5kZXJlciBzdXBwb3J0cyBzdGVuY2lsXG4gKiBAcHJvcGVydHkge251bWJlcn0gU1BSSVRFIC0gTWFzayB0aGF0IHVzZXMgU3ByaXRlTWFza0ZpbHRlciwgdXNlcyB0ZW1wb3JhcnkgUmVuZGVyVGV4dHVyZVxuICovXG5leHBvcnQgZW51bSBNQVNLX1RZUEVTIHtcbiAgICBOT05FID0gMCxcbiAgICBTQ0lTU09SID0gMSxcbiAgICBTVEVOQ0lMID0gMixcbiAgICBTUFJJVEUgPSAzLFxufVxuXG4vKipcbiAqIENvbnN0YW50cyBmb3IgbXVsdGktc2FtcGxpbmcgYW50aWFsaWFzaW5nLlxuICpcbiAqIEBzZWUgUElYSS5GcmFtZWJ1ZmZlciNtdWx0aXNhbXBsZVxuICpcbiAqIEBuYW1lIE1TQUFfUVVBTElUWVxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBzdGF0aWNcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gTk9ORSAtIE5vIG11bHRpc2FtcGxpbmcgZm9yIHRoaXMgcmVuZGVyVGV4dHVyZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IExPVyAtIFRyeSAyIHNhbXBsZXNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBNRURJVU0gLSBUcnkgNCBzYW1wbGVzXG4gKiBAcHJvcGVydHkge251bWJlcn0gSElHSCAtIFRyeSA4IHNhbXBsZXNcbiAqL1xuZXhwb3J0IGVudW0gTVNBQV9RVUFMSVRZIHtcbiAgICBOT05FID0gMCxcbiAgICBMT1cgPSAyLFxuICAgIE1FRElVTSA9IDQsXG4gICAgSElHSCA9IDhcbn1cbiIsICJpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcblxuLyoqXG4gKiBUaGUgcHJlZml4IHRoYXQgZGVub3RlcyBhIFVSTCBpcyBmb3IgYSByZXRpbmEgYXNzZXQuXG4gKlxuICogQHN0YXRpY1xuICogQG5hbWUgUkVUSU5BX1BSRUZJWFxuICogQG1lbWJlcm9mIFBJWEkuc2V0dGluZ3NcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAZGVmYXVsdCAvQChbMC05XFwuXSspeC9cbiAqIEBleGFtcGxlIGBAMnhgXG4gKi9cbnNldHRpbmdzLlJFVElOQV9QUkVGSVggPSAvQChbMC05XFwuXSspeC87XG5cbi8qKlxuICogU2hvdWxkIHRoZSBgZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdGAgZmxhZyBiZSBlbmFibGVkIGFzIGEgY29udGV4dCBvcHRpb24gdXNlZCBpbiB0aGUgYGlzV2ViR0xTdXBwb3J0ZWRgIGZ1bmN0aW9uLlxuICogRm9yIG1vc3Qgc2NlbmFyaW9zIHRoaXMgc2hvdWxkIGJlIGxlZnQgYXMgdHJ1ZSwgYXMgb3RoZXJ3aXNlIHRoZSB1c2VyIG1heSBoYXZlIGEgcG9vciBleHBlcmllbmNlLlxuICogSG93ZXZlciwgaXQgY2FuIGJlIHVzZWZ1bCB0byBkaXNhYmxlIHVuZGVyIGNlcnRhaW4gc2NlbmFyaW9zLCBzdWNoIGFzIGhlYWRsZXNzIHVuaXQgdGVzdHMuXG4gKlxuICogQHN0YXRpY1xuICogQG5hbWUgRkFJTF9JRl9NQUpPUl9QRVJGT1JNQU5DRV9DQVZFQVRcbiAqIEBtZW1iZXJvZiBQSVhJLnNldHRpbmdzXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0IHRydWVcbiAqL1xuc2V0dGluZ3MuRkFJTF9JRl9NQUpPUl9QRVJGT1JNQU5DRV9DQVZFQVQgPSB0cnVlO1xuXG5leHBvcnQgeyBzZXR0aW5ncyB9O1xuIiwgImxldCBzYWlkSGVsbG8gPSBmYWxzZTtcbmNvbnN0IFZFUlNJT04gPSAnX19WRVJTSU9OX18nO1xuXG4vKipcbiAqIFNraXBzIHRoZSBoZWxsbyBtZXNzYWdlIG9mIHJlbmRlcmVycyB0aGF0IGFyZSBjcmVhdGVkIGFmdGVyIHRoaXMgaXMgcnVuLlxuICpcbiAqIEBmdW5jdGlvbiBza2lwSGVsbG9cbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBza2lwSGVsbG8oKTogdm9pZFxue1xuICAgIHNhaWRIZWxsbyA9IHRydWU7XG59XG5cbi8qKlxuICogTG9ncyBvdXQgdGhlIHZlcnNpb24gYW5kIHJlbmRlcmVyIGluZm9ybWF0aW9uIGZvciB0aGlzIHJ1bm5pbmcgaW5zdGFuY2Ugb2YgUElYSS5cbiAqIElmIHlvdSBkb24ndCB3YW50IHRvIHNlZSB0aGlzIG1lc3NhZ2UgeW91IGNhbiBydW4gYFBJWEkudXRpbHMuc2tpcEhlbGxvKClgIGJlZm9yZVxuICogY3JlYXRpbmcgeW91ciByZW5kZXJlci4gS2VlcCBpbiBtaW5kIHRoYXQgZG9pbmcgdGhhdCB3aWxsIGZvcmV2ZXIgbWFrZSB5b3UgYSBqZXJrIGZhY2UuXG4gKlxuICogQHN0YXRpY1xuICogQGZ1bmN0aW9uIHNheUhlbGxvXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBUaGUgc3RyaW5nIHJlbmRlcmVyIHR5cGUgdG8gbG9nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2F5SGVsbG8odHlwZTogc3RyaW5nKTogdm9pZFxue1xuICAgIGlmIChzYWlkSGVsbG8pXG4gICAge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdjaHJvbWUnKSA+IC0xKVxuICAgIHtcbiAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgIGBcXG4gJWMgJWMgJWMgUGl4aUpTICR7VkVSU0lPTn0gLSBcdTI3MzAgJHt0eXBlfSBcdTI3MzAgICVjICAlYyAgaHR0cDovL3d3dy5waXhpanMuY29tLyAgJWMgJWMgXHUyNjY1JWNcdTI2NjUlY1x1MjY2NSBcXG5cXG5gLFxuICAgICAgICAgICAgJ2JhY2tncm91bmQ6ICNmZjY2YTU7IHBhZGRpbmc6NXB4IDA7JyxcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kOiAjZmY2NmE1OyBwYWRkaW5nOjVweCAwOycsXG4gICAgICAgICAgICAnY29sb3I6ICNmZjY2YTU7IGJhY2tncm91bmQ6ICMwMzAzMDc7IHBhZGRpbmc6NXB4IDA7JyxcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kOiAjZmY2NmE1OyBwYWRkaW5nOjVweCAwOycsXG4gICAgICAgICAgICAnYmFja2dyb3VuZDogI2ZmYzNkYzsgcGFkZGluZzo1cHggMDsnLFxuICAgICAgICAgICAgJ2JhY2tncm91bmQ6ICNmZjY2YTU7IHBhZGRpbmc6NXB4IDA7JyxcbiAgICAgICAgICAgICdjb2xvcjogI2ZmMjQyNDsgYmFja2dyb3VuZDogI2ZmZjsgcGFkZGluZzo1cHggMDsnLFxuICAgICAgICAgICAgJ2NvbG9yOiAjZmYyNDI0OyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOjVweCAwOycsXG4gICAgICAgICAgICAnY29sb3I6ICNmZjI0MjQ7IGJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6NXB4IDA7JyxcbiAgICAgICAgXTtcblxuICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coLi4uYXJncyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHdpbmRvdy5jb25zb2xlKVxuICAgIHtcbiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKGBQaXhpSlMgJHtWRVJTSU9OfSAtICR7dHlwZX0gLSBodHRwOi8vd3d3LnBpeGlqcy5jb20vYCk7XG4gICAgfVxuXG4gICAgc2FpZEhlbGxvID0gdHJ1ZTtcbn1cbiIsICJpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJy4uL3NldHRpbmdzJztcblxubGV0IHN1cHBvcnRlZDogYm9vbGVhbnx1bmRlZmluZWQ7XG5cbi8qKlxuICogSGVscGVyIGZvciBjaGVja2luZyBmb3IgV2ViR0wgc3VwcG9ydC5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQGZ1bmN0aW9uIGlzV2ViR0xTdXBwb3J0ZWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIFdlYkdMIHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzV2ViR0xTdXBwb3J0ZWQoKTogYm9vbGVhblxue1xuICAgIGlmICh0eXBlb2Ygc3VwcG9ydGVkID09PSAndW5kZWZpbmVkJylcbiAgICB7XG4gICAgICAgIHN1cHBvcnRlZCA9IChmdW5jdGlvbiBzdXBwb3J0ZWQoKTogYm9vbGVhblxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBzdGVuY2lsOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6IHNldHRpbmdzLkZBSUxfSUZfTUFKT1JfUEVSRk9STUFOQ0VfQ0FWRUFULFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdHJ5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgICAgIGxldCBnbCA9IChcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJywgY29udGV4dE9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIHx8IGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnLCBjb250ZXh0T3B0aW9ucylcbiAgICAgICAgICAgICAgICApIGFzIFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAhIShnbCAmJiBnbC5nZXRDb250ZXh0QXR0cmlidXRlcygpLnN0ZW5jaWwpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGdsKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9zZUNvbnRleHQgPSBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2xvc2VfY29udGV4dCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb3NlQ29udGV4dClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9zZUNvbnRleHQubG9zZUNvbnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGdsID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdXBwb3J0ZWQ7XG59XG4iLCAiLyoqXG4gKiBDb252ZXJ0cyBhIGhleGFkZWNpbWFsIGNvbG9yIG51bWJlciB0byBhbiBbUiwgRywgQl0gYXJyYXkgb2Ygbm9ybWFsaXplZCBmbG9hdHMgKG51bWJlcnMgZnJvbSAwLjAgdG8gMS4wKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogUElYSS51dGlscy5oZXgycmdiKDB4ZmZmZmZmKTsgLy8gcmV0dXJucyBbMSwgMSwgMV1cbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAZnVuY3Rpb24gaGV4MnJnYlxuICogQHBhcmFtIHtudW1iZXJ9IGhleCAtIFRoZSBoZXhhZGVjaW1hbCBudW1iZXIgdG8gY29udmVydFxuICogQHBhcmFtICB7bnVtYmVyW119IFtvdXQ9W11dIC0gSWYgc3VwcGxpZWQsIHRoaXMgYXJyYXkgd2lsbCBiZSB1c2VkIHJhdGhlciB0aGFuIHJldHVybmluZyBhIG5ldyBvbmVcbiAqIEByZXR1cm4ge251bWJlcltdfSBBbiBhcnJheSByZXByZXNlbnRpbmcgdGhlIFtSLCBHLCBCXSBvZiB0aGUgY29sb3Igd2hlcmUgYWxsIHZhbHVlcyBhcmUgZmxvYXRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGV4MnJnYihoZXg6IG51bWJlciwgb3V0OiBBcnJheTxudW1iZXI+IHwgRmxvYXQzMkFycmF5ID0gW10pOiBBcnJheTxudW1iZXI+IHwgRmxvYXQzMkFycmF5XG57XG4gICAgb3V0WzBdID0gKChoZXggPj4gMTYpICYgMHhGRikgLyAyNTU7XG4gICAgb3V0WzFdID0gKChoZXggPj4gOCkgJiAweEZGKSAvIDI1NTtcbiAgICBvdXRbMl0gPSAoaGV4ICYgMHhGRikgLyAyNTU7XG5cbiAgICByZXR1cm4gb3V0O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgaGV4YWRlY2ltYWwgY29sb3IgbnVtYmVyIHRvIGEgc3RyaW5nLlxuICpcbiAqIEBleGFtcGxlXG4gKiBQSVhJLnV0aWxzLmhleDJzdHJpbmcoMHhmZmZmZmYpOyAvLyByZXR1cm5zIFwiI2ZmZmZmZlwiXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQGZ1bmN0aW9uIGhleDJzdHJpbmdcbiAqIEBwYXJhbSB7bnVtYmVyfSBoZXggLSBOdW1iZXIgaW4gaGV4IChlLmcuLCBgMHhmZmZmZmZgKVxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgc3RyaW5nIGNvbG9yIChlLmcuLCBgXCIjZmZmZmZmXCJgKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhleDJzdHJpbmcoaGV4OiBudW1iZXIpOiBzdHJpbmdcbntcbiAgICBsZXQgaGV4U3RyaW5nID0gaGV4LnRvU3RyaW5nKDE2KTtcblxuICAgIGhleFN0cmluZyA9ICcwMDAwMDAnLnN1YnN0cigwLCA2IC0gaGV4U3RyaW5nLmxlbmd0aCkgKyBoZXhTdHJpbmc7XG5cbiAgICByZXR1cm4gYCMke2hleFN0cmluZ31gO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgaGV4YWRlY2ltYWwgc3RyaW5nIHRvIGEgaGV4YWRlY2ltYWwgY29sb3IgbnVtYmVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBQSVhJLnV0aWxzLnN0cmluZzJoZXgoXCIjZmZmZmZmXCIpOyAvLyByZXR1cm5zIDB4ZmZmZmZmXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQGZ1bmN0aW9uIHN0cmluZzJoZXhcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgLSBUaGUgc3RyaW5nIGNvbG9yIChlLmcuLCBgXCIjZmZmZmZmXCJgKVxuICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgaW4gaGV4YWRlY2ltYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmcyaGV4KHN0cmluZzogc3RyaW5nKTogbnVtYmVyXG57XG4gICAgaWYgKHR5cGVvZiBzdHJpbmcgPT09ICdzdHJpbmcnICYmIHN0cmluZ1swXSA9PT0gJyMnKVxuICAgIHtcbiAgICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cigxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyc2VJbnQoc3RyaW5nLCAxNik7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBjb2xvciBhcyBhbiBbUiwgRywgQl0gYXJyYXkgb2Ygbm9ybWFsaXplZCBmbG9hdHMgdG8gYSBoZXhhZGVjaW1hbCBudW1iZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIFBJWEkudXRpbHMucmdiMmhleChbMSwgMSwgMV0pOyAvLyByZXR1cm5zIDB4ZmZmZmZmXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQGZ1bmN0aW9uIHJnYjJoZXhcbiAqIEBwYXJhbSB7bnVtYmVyW119IHJnYiAtIEFycmF5IG9mIG51bWJlcnMgd2hlcmUgYWxsIHZhbHVlcyBhcmUgbm9ybWFsaXplZCBmbG9hdHMgZnJvbSAwLjAgdG8gMS4wLlxuICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgaW4gaGV4YWRlY2ltYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZ2IyaGV4KHJnYjogbnVtYmVyW10gfCBGbG9hdDMyQXJyYXkpOiBudW1iZXJcbntcbiAgICByZXR1cm4gKCgocmdiWzBdICogMjU1KSA8PCAxNikgKyAoKHJnYlsxXSAqIDI1NSkgPDwgOCkgKyAocmdiWzJdICogMjU1IHwgMCkpO1xufVxuIiwgImltcG9ydCB7IEJMRU5EX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcblxuLyoqXG4gKiBDb3JyZWN0cyBQaXhpSlMgYmxlbmQsIHRha2VzIHByZW11bHRpcGxpZWQgYWxwaGEgaW50byBhY2NvdW50XG4gKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEBmdW5jdGlvbiBtYXBQcmVtdWx0aXBsaWVkQmxlbmRNb2Rlc1xuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcltdPn0gTWFwcGVkIG1vZGVzLlxuICovXG5mdW5jdGlvbiBtYXBQcmVtdWx0aXBsaWVkQmxlbmRNb2RlcygpOiBudW1iZXJbXVtdXG57XG4gICAgY29uc3QgcG0gPSBbXTtcbiAgICBjb25zdCBucG0gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7IGkrKylcbiAgICB7XG4gICAgICAgIHBtW2ldID0gaTtcbiAgICAgICAgbnBtW2ldID0gaTtcbiAgICB9XG5cbiAgICBwbVtCTEVORF9NT0RFUy5OT1JNQUxfTlBNXSA9IEJMRU5EX01PREVTLk5PUk1BTDtcbiAgICBwbVtCTEVORF9NT0RFUy5BRERfTlBNXSA9IEJMRU5EX01PREVTLkFERDtcbiAgICBwbVtCTEVORF9NT0RFUy5TQ1JFRU5fTlBNXSA9IEJMRU5EX01PREVTLlNDUkVFTjtcblxuICAgIG5wbVtCTEVORF9NT0RFUy5OT1JNQUxdID0gQkxFTkRfTU9ERVMuTk9STUFMX05QTTtcbiAgICBucG1bQkxFTkRfTU9ERVMuQUREXSA9IEJMRU5EX01PREVTLkFERF9OUE07XG4gICAgbnBtW0JMRU5EX01PREVTLlNDUkVFTl0gPSBCTEVORF9NT0RFUy5TQ1JFRU5fTlBNO1xuXG4gICAgY29uc3QgYXJyYXk6IG51bWJlcltdW10gPSBbXTtcblxuICAgIGFycmF5LnB1c2gobnBtKTtcbiAgICBhcnJheS5wdXNoKHBtKTtcblxuICAgIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBtYXBzIHByZW11bHRpcGx5IGZsYWcgYW5kIGJsZW5kTW9kZSB0byBhZGp1c3RlZCBibGVuZE1vZGVcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAY29uc3QgcHJlbXVsdGlwbHlCbGVuZE1vZGVcbiAqIEB0eXBlIHtBcnJheTxudW1iZXJbXT59XG4gKi9cbmV4cG9ydCBjb25zdCBwcmVtdWx0aXBseUJsZW5kTW9kZSA9IG1hcFByZW11bHRpcGxpZWRCbGVuZE1vZGVzKCk7XG5cbi8qKlxuICogY2hhbmdlcyBibGVuZE1vZGUgYWNjb3JkaW5nIHRvIHRleHR1cmUgZm9ybWF0XG4gKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEBmdW5jdGlvbiBjb3JyZWN0QmxlbmRNb2RlXG4gKiBAcGFyYW0ge251bWJlcn0gYmxlbmRNb2RlIC0gc3VwcG9zZWQgYmxlbmQgbW9kZVxuICogQHBhcmFtIHtib29sZWFufSBwcmVtdWx0aXBsaWVkIC0gd2hldGhlciBzb3VyY2UgaXMgcHJlbXVsdGlwbGllZFxuICogQHJldHVybnMge251bWJlcn0gdHJ1ZSBibGVuZCBtb2RlIGZvciB0aGlzIHRleHR1cmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcnJlY3RCbGVuZE1vZGUoYmxlbmRNb2RlOiBudW1iZXIsIHByZW11bHRpcGxpZWQ6IGJvb2xlYW4pOiBudW1iZXJcbntcbiAgICByZXR1cm4gcHJlbXVsdGlwbHlCbGVuZE1vZGVbcHJlbXVsdGlwbGllZCA/IDEgOiAwXVtibGVuZE1vZGVdO1xufVxuXG4vKipcbiAqIGNvbWJpbmVzIHJnYiBhbmQgYWxwaGEgdG8gb3V0IGFycmF5XG4gKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEBmdW5jdGlvbiBwcmVtdWx0aXBseVJnYmFcbiAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fG51bWJlcltdfSByZ2IgLSBpbnB1dCByZ2JcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbHBoYSAtIGFscGhhIHBhcmFtXG4gKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gW291dF0gLSBvdXRwdXRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3ByZW11bHRpcGx5PXRydWVdIC0gZG8gcHJlbXVsdGlwbHkgaXRcbiAqIEByZXR1cm5zIHtGbG9hdDMyQXJyYXl9IHZlYzQgcmdiYVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJlbXVsdGlwbHlSZ2JhKFxuICAgIHJnYjogRmxvYXQzMkFycmF5fG51bWJlcltdLFxuICAgIGFscGhhOiBudW1iZXIsXG4gICAgb3V0OiBGbG9hdDMyQXJyYXksXG4gICAgcHJlbXVsdGlwbHk6IGJvb2xlYW5cbik6IEZsb2F0MzJBcnJheVxue1xuICAgIG91dCA9IG91dCB8fCBuZXcgRmxvYXQzMkFycmF5KDQpO1xuICAgIGlmIChwcmVtdWx0aXBseSB8fCBwcmVtdWx0aXBseSA9PT0gdW5kZWZpbmVkKVxuICAgIHtcbiAgICAgICAgb3V0WzBdID0gcmdiWzBdICogYWxwaGE7XG4gICAgICAgIG91dFsxXSA9IHJnYlsxXSAqIGFscGhhO1xuICAgICAgICBvdXRbMl0gPSByZ2JbMl0gKiBhbHBoYTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgb3V0WzBdID0gcmdiWzBdO1xuICAgICAgICBvdXRbMV0gPSByZ2JbMV07XG4gICAgICAgIG91dFsyXSA9IHJnYlsyXTtcbiAgICB9XG4gICAgb3V0WzNdID0gYWxwaGE7XG5cbiAgICByZXR1cm4gb3V0O1xufVxuXG4vKipcbiAqIHByZW11bHRpcGxpZXMgdGludFxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAZnVuY3Rpb24gcHJlbXVsdGlwbHlUaW50XG4gKiBAcGFyYW0ge251bWJlcn0gdGludCAtIGludGVnZXIgUkdCXG4gKiBAcGFyYW0ge251bWJlcn0gYWxwaGEgLSBmbG9hdGluZyBwb2ludCBhbHBoYSAoMC4wLTEuMClcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHRpbnQgbXVsdGlwbGllZCBieSBhbHBoYVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJlbXVsdGlwbHlUaW50KHRpbnQ6IG51bWJlciwgYWxwaGE6IG51bWJlcik6IG51bWJlclxue1xuICAgIGlmIChhbHBoYSA9PT0gMS4wKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIChhbHBoYSAqIDI1NSA8PCAyNCkgKyB0aW50O1xuICAgIH1cbiAgICBpZiAoYWxwaGEgPT09IDAuMClcbiAgICB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBsZXQgUiA9ICgodGludCA+PiAxNikgJiAweEZGKTtcbiAgICBsZXQgRyA9ICgodGludCA+PiA4KSAmIDB4RkYpO1xuICAgIGxldCBCID0gKHRpbnQgJiAweEZGKTtcblxuICAgIFIgPSAoKFIgKiBhbHBoYSkgKyAwLjUpIHwgMDtcbiAgICBHID0gKChHICogYWxwaGEpICsgMC41KSB8IDA7XG4gICAgQiA9ICgoQiAqIGFscGhhKSArIDAuNSkgfCAwO1xuXG4gICAgcmV0dXJuIChhbHBoYSAqIDI1NSA8PCAyNCkgKyAoUiA8PCAxNikgKyAoRyA8PCA4KSArIEI7XG59XG5cbi8qKlxuICogY29udmVydHMgaW50ZWdlciB0aW50IGFuZCBmbG9hdCBhbHBoYSB0byB2ZWM0IGZvcm0sIHByZW11bHRpcGxpZXMgYnkgZGVmYXVsdFxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAZnVuY3Rpb24gcHJlbXVsdGlwbHlUaW50VG9SZ2JhXG4gKiBAcGFyYW0ge251bWJlcn0gdGludCAtIGlucHV0IHRpbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbHBoYSAtIGFscGhhIHBhcmFtXG4gKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gW291dF0gb3V0cHV0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtwcmVtdWx0aXBseT10cnVlXSAtIGRvIHByZW11bHRpcGx5IGl0XG4gKiBAcmV0dXJucyB7RmxvYXQzMkFycmF5fSB2ZWM0IHJnYmFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZW11bHRpcGx5VGludFRvUmdiYSh0aW50OiBudW1iZXIsIGFscGhhOiBudW1iZXIsIG91dDogRmxvYXQzMkFycmF5LCBwcmVtdWx0aXBseTogYm9vbGVhbik6IEZsb2F0MzJBcnJheVxue1xuICAgIG91dCA9IG91dCB8fCBuZXcgRmxvYXQzMkFycmF5KDQpO1xuICAgIG91dFswXSA9ICgodGludCA+PiAxNikgJiAweEZGKSAvIDI1NS4wO1xuICAgIG91dFsxXSA9ICgodGludCA+PiA4KSAmIDB4RkYpIC8gMjU1LjA7XG4gICAgb3V0WzJdID0gKHRpbnQgJiAweEZGKSAvIDI1NS4wO1xuICAgIGlmIChwcmVtdWx0aXBseSB8fCBwcmVtdWx0aXBseSA9PT0gdW5kZWZpbmVkKVxuICAgIHtcbiAgICAgICAgb3V0WzBdICo9IGFscGhhO1xuICAgICAgICBvdXRbMV0gKj0gYWxwaGE7XG4gICAgICAgIG91dFsyXSAqPSBhbHBoYTtcbiAgICB9XG4gICAgb3V0WzNdID0gYWxwaGE7XG5cbiAgICByZXR1cm4gb3V0O1xufVxuIiwgIi8qKlxuICogR2VuZXJpYyBNYXNrIFN0YWNrIGRhdGEgc3RydWN0dXJlXG4gKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEBmdW5jdGlvbiBjcmVhdGVJbmRpY2VzRm9yUXVhZHNcbiAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIC0gTnVtYmVyIG9mIHF1YWRzXG4gKiBAcGFyYW0ge1VpbnQxNkFycmF5fFVpbnQzMkFycmF5fSBbb3V0QnVmZmVyXSAtIEJ1ZmZlciBmb3Igb3V0cHV0LCBsZW5ndGggaGFzIHRvIGJlIGA2ICogc2l6ZWBcbiAqIEByZXR1cm4ge1VpbnQxNkFycmF5fFVpbnQzMkFycmF5fSAtIFJlc3VsdGluZyBpbmRleCBidWZmZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUluZGljZXNGb3JRdWFkcyhzaXplOiBudW1iZXIsIG91dEJ1ZmZlcjogVWludDE2QXJyYXl8VWludDMyQXJyYXkgPSBudWxsKTogVWludDE2QXJyYXl8VWludDMyQXJyYXlcbntcbiAgICAvLyB0aGUgdG90YWwgbnVtYmVyIG9mIGluZGljZXMgaW4gb3VyIGFycmF5LCB0aGVyZSBhcmUgNiBwb2ludHMgcGVyIHF1YWQuXG4gICAgY29uc3QgdG90YWxJbmRpY2VzID0gc2l6ZSAqIDY7XG5cbiAgICBvdXRCdWZmZXIgPSBvdXRCdWZmZXIgfHwgbmV3IFVpbnQxNkFycmF5KHRvdGFsSW5kaWNlcyk7XG5cbiAgICBpZiAob3V0QnVmZmVyLmxlbmd0aCAhPT0gdG90YWxJbmRpY2VzKVxuICAgIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPdXQgYnVmZmVyIGxlbmd0aCBpcyBpbmNvcnJlY3QsIGdvdCAke291dEJ1ZmZlci5sZW5ndGh9IGFuZCBleHBlY3RlZCAke3RvdGFsSW5kaWNlc31gKTtcbiAgICB9XG5cbiAgICAvLyBmaWxsIHRoZSBpbmRpY2VzIHdpdGggdGhlIHF1YWRzIHRvIGRyYXdcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IDA7IGkgPCB0b3RhbEluZGljZXM7IGkgKz0gNiwgaiArPSA0KVxuICAgIHtcbiAgICAgICAgb3V0QnVmZmVyW2kgKyAwXSA9IGogKyAwO1xuICAgICAgICBvdXRCdWZmZXJbaSArIDFdID0gaiArIDE7XG4gICAgICAgIG91dEJ1ZmZlcltpICsgMl0gPSBqICsgMjtcbiAgICAgICAgb3V0QnVmZmVyW2kgKyAzXSA9IGogKyAwO1xuICAgICAgICBvdXRCdWZmZXJbaSArIDRdID0gaiArIDI7XG4gICAgICAgIG91dEJ1ZmZlcltpICsgNV0gPSBqICsgMztcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0QnVmZmVyO1xufVxuIiwgImltcG9ydCB0eXBlIHsgSVR5cGVkQXJyYXkgfSBmcm9tICdAcGl4aS9jb3JlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJ1ZmZlclR5cGUoYXJyYXk6IElUeXBlZEFycmF5KTogJ0Zsb2F0MzJBcnJheSd8J1VpbnQzMkFycmF5J3wnSW50MzJBcnJheSd8J1VpbnQxNkFycmF5J3wnVWludDhBcnJheSd8bnVsbFxue1xuICAgIGlmIChhcnJheS5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNClcbiAgICB7XG4gICAgICAgIGlmIChhcnJheSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuICdGbG9hdDMyQXJyYXknO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFycmF5IGluc3RhbmNlb2YgVWludDMyQXJyYXkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiAnVWludDMyQXJyYXknO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICdJbnQzMkFycmF5JztcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJyYXkuQllURVNfUEVSX0VMRU1FTlQgPT09IDIpXG4gICAge1xuICAgICAgICBpZiAoYXJyYXkgaW5zdGFuY2VvZiBVaW50MTZBcnJheSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuICdVaW50MTZBcnJheSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoYXJyYXkuQllURVNfUEVSX0VMRU1FTlQgPT09IDEpXG4gICAge1xuICAgICAgICBpZiAoYXJyYXkgaW5zdGFuY2VvZiBVaW50OEFycmF5KVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gJ1VpbnQ4QXJyYXknO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVE9ETyBtYXAgb3V0IHRoZSByZXN0IG9mIHRoZSBhcnJheSBlbGVtZW50cyFcbiAgICByZXR1cm4gbnVsbDtcbn1cbiIsICJpbXBvcnQgeyBnZXRCdWZmZXJUeXBlIH0gZnJvbSAnLi9nZXRCdWZmZXJUeXBlJztcblxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LXNob3J0aGFuZCAqL1xuY29uc3QgbWFwID0geyBGbG9hdDMyQXJyYXk6IEZsb2F0MzJBcnJheSwgVWludDMyQXJyYXk6IFVpbnQzMkFycmF5LCBJbnQzMkFycmF5OiBJbnQzMkFycmF5LCBVaW50OEFycmF5OiBVaW50OEFycmF5IH07XG5cbnR5cGUgUGFja2VkQXJyYXkgPSBGbG9hdDMyQXJyYXl8VWludDMyQXJyYXl8SW50MzJBcnJheXxVaW50OEFycmF5O1xuXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJsZWF2ZVR5cGVkQXJyYXlzKGFycmF5czogUGFja2VkQXJyYXlbXSwgc2l6ZXM6IG51bWJlcltdKTogRmxvYXQzMkFycmF5XG57XG4gICAgbGV0IG91dFNpemUgPSAwO1xuICAgIGxldCBzdHJpZGUgPSAwO1xuICAgIGNvbnN0IHZpZXdzOiB7W2tleTogc3RyaW5nXTogUGFja2VkQXJyYXl9ID0ge307XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5cy5sZW5ndGg7IGkrKylcbiAgICB7XG4gICAgICAgIHN0cmlkZSArPSBzaXplc1tpXTtcbiAgICAgICAgb3V0U2l6ZSArPSBhcnJheXNbaV0ubGVuZ3RoO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihvdXRTaXplICogNCk7XG5cbiAgICBsZXQgb3V0ID0gbnVsbDtcbiAgICBsZXQgbGl0dGxlT2Zmc2V0ID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlzLmxlbmd0aDsgaSsrKVxuICAgIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IHNpemVzW2ldO1xuICAgICAgICBjb25zdCBhcnJheSA9IGFycmF5c1tpXTtcblxuICAgICAgICAvKlxuICAgICAgICBAdG9kbyBUaGlzIGlzIHVuc2FmZSBjYXN0aW5nIGJ1dCBjb25zaXN0ZW50IHdpdGggaG93IHRoZSBjb2RlIHdvcmtlZCBwcmV2aW91c2x5LiBTaG91bGQgaXQgc3RheSB0aGlzIHdheVxuICAgICAgICAgICAgICBvciBzaG91bGQgYW5kIGBnZXRCdWZmZXJUeXBlVW5zYWZlYCBmdW5jdGlvbiBiZSBleHBvc2VkIHRoYXQgdGhyb3dzIGFuIEVycm9yIGlmIHVuc3VwcG9ydGVkIHR5cGUgaXMgcGFzc2VkP1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgdHlwZSA9IGdldEJ1ZmZlclR5cGUoYXJyYXkpIGFzIGtleW9mIHR5cGVvZiBtYXA7XG5cbiAgICAgICAgaWYgKCF2aWV3c1t0eXBlXSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmlld3NbdHlwZV0gPSBuZXcgbWFwW3R5cGVdKGJ1ZmZlcik7XG4gICAgICAgIH1cblxuICAgICAgICBvdXQgPSB2aWV3c1t0eXBlXTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFycmF5Lmxlbmd0aDsgaisrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBpbmRleFN0YXJ0ID0gKChqIC8gc2l6ZSB8IDApICogc3RyaWRlKSArIGxpdHRsZU9mZnNldDtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gaiAlIHNpemU7XG5cbiAgICAgICAgICAgIG91dFtpbmRleFN0YXJ0ICsgaW5kZXhdID0gYXJyYXlbal07XG4gICAgICAgIH1cblxuICAgICAgICBsaXR0bGVPZmZzZXQgKz0gc2l6ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShidWZmZXIpO1xufVxuIiwgIi8vIFRha2VuIGZyb20gdGhlIGJpdC10d2lkZGxlIHBhY2thZ2VcblxuLyoqXG4gKiBSb3VuZHMgdG8gbmV4dCBwb3dlciBvZiB0d28uXG4gKlxuICogQGZ1bmN0aW9uIG5leHRQb3cyXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQHBhcmFtIHtudW1iZXJ9IHYgLSBpbnB1dCB2YWx1ZVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbmV4dFBvdzIodjogbnVtYmVyKTogbnVtYmVyXG57XG4gICAgdiArPSB2ID09PSAwID8gMSA6IDA7XG4gICAgLS12O1xuICAgIHYgfD0gdiA+Pj4gMTtcbiAgICB2IHw9IHYgPj4+IDI7XG4gICAgdiB8PSB2ID4+PiA0O1xuICAgIHYgfD0gdiA+Pj4gODtcbiAgICB2IHw9IHYgPj4+IDE2O1xuXG4gICAgcmV0dXJuIHYgKyAxO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIG51bWJlciBpcyBhIHBvd2VyIG9mIHR3by5cbiAqXG4gKiBAZnVuY3Rpb24gaXNQb3cyXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQHBhcmFtIHtudW1iZXJ9IHYgLSBpbnB1dCB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHZhbHVlIGlzIHBvd2VyIG9mIHR3b1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQb3cyKHY6IG51bWJlcik6IGJvb2xlYW5cbntcbiAgICByZXR1cm4gISh2ICYgKHYgLSAxKSkgJiYgKCEhdik7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgY2VpbCBvZiBsb2cgYmFzZSAyXG4gKlxuICogQGZ1bmN0aW9uIGxvZzJcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAcGFyYW0ge251bWJlcn0gdiAtIGlucHV0IHZhbHVlXG4gKiBAcmV0dXJuIHtudW1iZXJ9IGxvZ2FyaXRobSBiYXNlIDJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZzIodjogbnVtYmVyKTogbnVtYmVyXG57XG4gICAgbGV0IHIgPSAodiA+IDB4RkZGRiA/IDEgOiAwKSA8PCA0O1xuXG4gICAgdiA+Pj49IHI7XG5cbiAgICBsZXQgc2hpZnQgPSAodiA+IDB4RkYgPyAxIDogMCkgPDwgMztcblxuICAgIHYgPj4+PSBzaGlmdDsgciB8PSBzaGlmdDtcbiAgICBzaGlmdCA9ICh2ID4gMHhGID8gMSA6IDApIDw8IDI7XG4gICAgdiA+Pj49IHNoaWZ0OyByIHw9IHNoaWZ0O1xuICAgIHNoaWZ0ID0gKHYgPiAweDMgPyAxIDogMCkgPDwgMTtcbiAgICB2ID4+Pj0gc2hpZnQ7IHIgfD0gc2hpZnQ7XG5cbiAgICByZXR1cm4gciB8ICh2ID4+IDEpO1xufVxuIiwgIi8qKlxuICogUmVtb3ZlIGl0ZW1zIGZyb20gYSBqYXZhc2NyaXB0IGFycmF5IHdpdGhvdXQgZ2VuZXJhdGluZyBnYXJiYWdlXG4gKlxuICogQGZ1bmN0aW9uIHJlbW92ZUl0ZW1zXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQHBhcmFtIHtBcnJheTxhbnk+fSBhcnIgLSBBcnJheSB0byByZW1vdmUgZWxlbWVudHMgZnJvbVxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0SWR4IC0gc3RhcnRpbmcgaW5kZXhcbiAqIEBwYXJhbSB7bnVtYmVyfSByZW1vdmVDb3VudCAtIGhvdyBtYW55IHRvIHJlbW92ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSXRlbXMoYXJyOiBhbnlbXSwgc3RhcnRJZHg6IG51bWJlciwgcmVtb3ZlQ291bnQ6IG51bWJlcik6IHZvaWRcbntcbiAgICBjb25zdCBsZW5ndGggPSBhcnIubGVuZ3RoO1xuICAgIGxldCBpO1xuXG4gICAgaWYgKHN0YXJ0SWR4ID49IGxlbmd0aCB8fCByZW1vdmVDb3VudCA9PT0gMClcbiAgICB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZW1vdmVDb3VudCA9IChzdGFydElkeCArIHJlbW92ZUNvdW50ID4gbGVuZ3RoID8gbGVuZ3RoIC0gc3RhcnRJZHggOiByZW1vdmVDb3VudCk7XG5cbiAgICBjb25zdCBsZW4gPSBsZW5ndGggLSByZW1vdmVDb3VudDtcblxuICAgIGZvciAoaSA9IHN0YXJ0SWR4OyBpIDwgbGVuOyArK2kpXG4gICAge1xuICAgICAgICBhcnJbaV0gPSBhcnJbaSArIHJlbW92ZUNvdW50XTtcbiAgICB9XG5cbiAgICBhcnIubGVuZ3RoID0gbGVuO1xufVxuIiwgIi8qKlxuICogUmV0dXJucyBzaWduIG9mIG51bWJlclxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAZnVuY3Rpb24gc2lnblxuICogQHBhcmFtIHtudW1iZXJ9IG4gLSB0aGUgbnVtYmVyIHRvIGNoZWNrIHRoZSBzaWduIG9mXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAwIGlmIGBuYCBpcyAwLCAtMSBpZiBgbmAgaXMgbmVnYXRpdmUsIDEgaWYgYG5gIGlzIHBvc2l0aXZlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaWduKG46IG51bWJlcik6IC0xfDB8MVxue1xuICAgIGlmIChuID09PSAwKSByZXR1cm4gMDtcblxuICAgIHJldHVybiBuIDwgMCA/IC0xIDogMTtcbn1cbiIsICJsZXQgbmV4dFVpZCA9IDA7XG5cbi8qKlxuICogR2V0cyB0aGUgbmV4dCB1bmlxdWUgaWRlbnRpZmllclxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAZnVuY3Rpb24gdWlkXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBuZXh0IHVuaXF1ZSBpZGVudGlmaWVyIHRvIHVzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVpZCgpOiBudW1iZXJcbntcbiAgICByZXR1cm4gKytuZXh0VWlkO1xufVxuIiwgImltcG9ydCB0eXBlIHsgRGljdCB9IGZyb20gJy4uL3R5cGVzJztcblxuLy8gQSBtYXAgb2Ygd2FybmluZyBtZXNzYWdlcyBhbHJlYWR5IGZpcmVkXG5jb25zdCB3YXJuaW5nczogRGljdDxib29sZWFuPiA9IHt9O1xuXG4vKipcbiAqIEhlbHBlciBmb3Igd2FybmluZyBkZXZlbG9wZXJzIGFib3V0IGRlcHJlY2F0ZWQgZmVhdHVyZXMgJiBzZXR0aW5ncy5cbiAqIEEgc3RhY2sgdHJhY2sgZm9yIHdhcm5pbmdzIGlzIGdpdmVuOyB1c2VmdWwgZm9yIHRyYWNraW5nLWRvd24gd2hlcmVcbiAqIGRlcHJlY2F0ZWQgbWV0aG9kcy9wcm9wZXJ0aWVzL2NsYXNzZXMgYXJlIGJlaW5nIHVzZWQgd2l0aGluIHRoZSBjb2RlLlxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAZnVuY3Rpb24gZGVwcmVjYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSB2ZXJzaW9uIC0gVGhlIHZlcnNpb24gd2hlcmUgdGhlIGZlYXR1cmUgYmVjYW1lIGRlcHJlY2F0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gTWVzc2FnZSBzaG91bGQgaW5jbHVkZSB3aGF0IGlzIGRlcHJlY2F0ZWQsIHdoZXJlLCBhbmQgdGhlIG5ldyBzb2x1dGlvblxuICogQHBhcmFtIHtudW1iZXJ9IFtpZ25vcmVEZXB0aD0zXSAtIFRoZSBudW1iZXIgb2Ygc3RlcHMgdG8gaWdub3JlIGF0IHRoZSB0b3Agb2YgdGhlIGVycm9yIHN0YWNrXG4gKiAgICAgICAgdGhpcyBpcyBtb3N0bHkgdG8gaWdub3JlIGludGVybmFsIGRlcHJlY2F0aW9uIGNhbGxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVwcmVjYXRpb24odmVyc2lvbjogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIGlnbm9yZURlcHRoID0gMyk6IHZvaWRcbntcbiAgICAvLyBJZ25vcmUgZHVwbGljYXRcbiAgICBpZiAod2FybmluZ3NbbWVzc2FnZV0pXG4gICAge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuICAgIGxldCBzdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuXG4gICAgLy8gSGFuZGxlIElFIDwgMTAgYW5kIFNhZmFyaSA8IDZcbiAgICBpZiAodHlwZW9mIHN0YWNrID09PSAndW5kZWZpbmVkJylcbiAgICB7XG4gICAgICAgIGNvbnNvbGUud2FybignUGl4aUpTIERlcHJlY2F0aW9uIFdhcm5pbmc6ICcsIGAke21lc3NhZ2V9XFxuRGVwcmVjYXRlZCBzaW5jZSB2JHt2ZXJzaW9ufWApO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICAvLyBjaG9wIG9mZiB0aGUgc3RhY2sgdHJhY2Ugd2hpY2ggaW5jbHVkZXMgUGl4aUpTIGludGVybmFsIGNhbGxzXG4gICAgICAgIHN0YWNrID0gc3RhY2suc3BsaXQoJ1xcbicpLnNwbGljZShpZ25vcmVEZXB0aCkuam9pbignXFxuJyk7XG5cbiAgICAgICAgaWYgKGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoXG4gICAgICAgICAgICAgICAgJyVjUGl4aUpTIERlcHJlY2F0aW9uIFdhcm5pbmc6ICVjJXMnLFxuICAgICAgICAgICAgICAgICdjb2xvcjojNjE0MTA4O2JhY2tncm91bmQ6I2ZmZmJlNicsXG4gICAgICAgICAgICAgICAgJ2ZvbnQtd2VpZ2h0Om5vcm1hbDtjb2xvcjojNjE0MTA4O2JhY2tncm91bmQ6I2ZmZmJlNicsXG4gICAgICAgICAgICAgICAgYCR7bWVzc2FnZX1cXG5EZXByZWNhdGVkIHNpbmNlIHYke3ZlcnNpb259YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihzdGFjayk7XG4gICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BpeGlKUyBEZXByZWNhdGlvbiBXYXJuaW5nOiAnLCBgJHttZXNzYWdlfVxcbkRlcHJlY2F0ZWQgc2luY2UgdiR7dmVyc2lvbn1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihzdGFjayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG5cbiAgICB3YXJuaW5nc1ttZXNzYWdlXSA9IHRydWU7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBQcm9ncmFtLCBUZXh0dXJlLCBCYXNlVGV4dHVyZSB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuXG4vKipcbiAqIEB0b2RvIERlc2NyaWJlIHByb3BlcnR5IHVzYWdlXG4gKlxuICogQHN0YXRpY1xuICogQG5hbWUgUHJvZ3JhbUNhY2hlXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQHR5cGUge09iamVjdH1cbiAqL1xuZXhwb3J0IGNvbnN0IFByb2dyYW1DYWNoZToge1trZXk6IHN0cmluZ106IFByb2dyYW19ID0ge307XG5cbi8qKlxuICogQHRvZG8gRGVzY3JpYmUgcHJvcGVydHkgdXNhZ2VcbiAqXG4gKiBAc3RhdGljXG4gKiBAbmFtZSBUZXh0dXJlQ2FjaGVcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5leHBvcnQgY29uc3QgVGV4dHVyZUNhY2hlOiB7W2tleTogc3RyaW5nXTogVGV4dHVyZX0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4vKipcbiAqIEB0b2RvIERlc2NyaWJlIHByb3BlcnR5IHVzYWdlXG4gKlxuICogQHN0YXRpY1xuICogQG5hbWUgQmFzZVRleHR1cmVDYWNoZVxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmV4cG9ydCBjb25zdCBCYXNlVGV4dHVyZUNhY2hlOiB7W2tleTogc3RyaW5nXTogQmFzZVRleHR1cmV9ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuLyoqXG4gKiBEZXN0cm95cyBhbGwgdGV4dHVyZSBpbiB0aGUgY2FjaGVcbiAqXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQGZ1bmN0aW9uIGRlc3Ryb3lUZXh0dXJlQ2FjaGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc3Ryb3lUZXh0dXJlQ2FjaGUoKTogdm9pZFxue1xuICAgIGxldCBrZXk7XG5cbiAgICBmb3IgKGtleSBpbiBUZXh0dXJlQ2FjaGUpXG4gICAge1xuICAgICAgICBUZXh0dXJlQ2FjaGVba2V5XS5kZXN0cm95KCk7XG4gICAgfVxuICAgIGZvciAoa2V5IGluIEJhc2VUZXh0dXJlQ2FjaGUpXG4gICAge1xuICAgICAgICBCYXNlVGV4dHVyZUNhY2hlW2tleV0uZGVzdHJveSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCB0ZXh0dXJlcyBmcm9tIGNhY2hlLCBidXQgZG9lcyBub3QgZGVzdHJveSB0aGVtXG4gKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEBmdW5jdGlvbiBjbGVhclRleHR1cmVDYWNoZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJUZXh0dXJlQ2FjaGUoKTogdm9pZFxue1xuICAgIGxldCBrZXk7XG5cbiAgICBmb3IgKGtleSBpbiBUZXh0dXJlQ2FjaGUpXG4gICAge1xuICAgICAgICBkZWxldGUgVGV4dHVyZUNhY2hlW2tleV07XG4gICAgfVxuICAgIGZvciAoa2V5IGluIEJhc2VUZXh0dXJlQ2FjaGUpXG4gICAge1xuICAgICAgICBkZWxldGUgQmFzZVRleHR1cmVDYWNoZVtrZXldO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgQ2FudmFzIGVsZW1lbnQgb2YgdGhlIGdpdmVuIHNpemUgdG8gYmUgdXNlZCBhcyBhIHRhcmdldCBmb3IgcmVuZGVyaW5nIHRvLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIENhbnZhc1JlbmRlclRhcmdldFxue1xuICAgIHB1YmxpYyBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgcHVibGljIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcblxuICAgIHB1YmxpYyByZXNvbHV0aW9uOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggLSB0aGUgd2lkdGggZm9yIHRoZSBuZXdseSBjcmVhdGVkIGNhbnZhc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgLSB0aGUgaGVpZ2h0IGZvciB0aGUgbmV3bHkgY3JlYXRlZCBjYW52YXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Jlc29sdXRpb249MV0gLSBUaGUgcmVzb2x1dGlvbiAvIGRldmljZSBwaXhlbCByYXRpbyBvZiB0aGUgY2FudmFzXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcilcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgQ2FudmFzIG9iamVjdCB0aGF0IGJlbG9uZ3MgdG8gdGhpcyBDYW52YXNSZW5kZXJUYXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgb2JqZWN0IHJlcHJlc2VudGluZyBhIHR3by1kaW1lbnNpb25hbCByZW5kZXJpbmcgY29udGV4dC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uIHx8IHNldHRpbmdzLlJFU09MVVRJT047XG5cbiAgICAgICAgdGhpcy5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHRoZSBjYW52YXMgdGhhdCB3YXMgY3JlYXRlZCBieSB0aGUgQ2FudmFzUmVuZGVyVGFyZ2V0IGNsYXNzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjbGVhcigpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmNvbnRleHQuc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2l6ZXMgdGhlIGNhbnZhcyB0byB0aGUgc3BlY2lmaWVkIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggLSB0aGUgbmV3IHdpZHRoIG9mIHRoZSBjYW52YXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gdGhlIG5ldyBoZWlnaHQgb2YgdGhlIGNhbnZhc1xuICAgICAqL1xuICAgIHJlc2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGggKiB0aGlzLnJlc29sdXRpb247XG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodCAqIHRoaXMucmVzb2x1dGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIGNhbnZhcy5cbiAgICAgKlxuICAgICAqL1xuICAgIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgY2FudmFzIGJ1ZmZlciBpbiBwaXhlbHMuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHdpZHRoKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzLndpZHRoO1xuICAgIH1cblxuICAgIHNldCB3aWR0aCh2YWw6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdmFsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBoZWlnaHQgb2YgdGhlIGNhbnZhcyBidWZmZXIgaW4gcGl4ZWxzLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBoZWlnaHQoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMuaGVpZ2h0O1xuICAgIH1cblxuICAgIHNldCBoZWlnaHQodmFsOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB2YWw7XG4gICAgfVxufVxuIiwgImludGVyZmFjZSBJbnNldCB7XG4gICAgdG9wPzogbnVtYmVyO1xuICAgIGxlZnQ/OiBudW1iZXI7XG4gICAgcmlnaHQ/OiBudW1iZXI7XG4gICAgYm90dG9tPzogbnVtYmVyO1xufVxuXG4vKipcbiAqIFRyaW0gdHJhbnNwYXJlbnQgYm9yZGVycyBmcm9tIGEgY2FudmFzXG4gKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEBmdW5jdGlvbiB0cmltQ2FudmFzXG4gKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBjYW52YXMgLSB0aGUgY2FudmFzIHRvIHRyaW1cbiAqIEByZXR1cm5zIHtvYmplY3R9IFRyaW0gZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJpbUNhbnZhcyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KToge3dpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyOyBkYXRhPzogSW1hZ2VEYXRhfVxue1xuICAgIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3JlbXkvNzg0NTA4XG5cbiAgICBsZXQgd2lkdGggPSBjYW52YXMud2lkdGg7XG4gICAgbGV0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG5cbiAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgY29uc3QgaW1hZ2VEYXRhID0gY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgY29uc3QgcGl4ZWxzID0gaW1hZ2VEYXRhLmRhdGE7XG4gICAgY29uc3QgbGVuID0gcGl4ZWxzLmxlbmd0aDtcblxuICAgIGNvbnN0IGJvdW5kOiBJbnNldCA9IHtcbiAgICAgICAgdG9wOiBudWxsLFxuICAgICAgICBsZWZ0OiBudWxsLFxuICAgICAgICByaWdodDogbnVsbCxcbiAgICAgICAgYm90dG9tOiBudWxsLFxuICAgIH07XG4gICAgbGV0IGRhdGEgPSBudWxsO1xuICAgIGxldCBpO1xuICAgIGxldCB4O1xuICAgIGxldCB5O1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KVxuICAgIHtcbiAgICAgICAgaWYgKHBpeGVsc1tpICsgM10gIT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHggPSAoaSAvIDQpICUgd2lkdGg7XG4gICAgICAgICAgICB5ID0gfn4oKGkgLyA0KSAvIHdpZHRoKTtcblxuICAgICAgICAgICAgaWYgKGJvdW5kLnRvcCA9PT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBib3VuZC50b3AgPSB5O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYm91bmQubGVmdCA9PT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBib3VuZC5sZWZ0ID0geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHggPCBib3VuZC5sZWZ0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJvdW5kLmxlZnQgPSB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYm91bmQucmlnaHQgPT09IG51bGwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYm91bmQucmlnaHQgPSB4ICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGJvdW5kLnJpZ2h0IDwgeClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBib3VuZC5yaWdodCA9IHggKyAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYm91bmQuYm90dG9tID09PSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJvdW5kLmJvdHRvbSA9IHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChib3VuZC5ib3R0b20gPCB5KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJvdW5kLmJvdHRvbSA9IHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYm91bmQudG9wICE9PSBudWxsKVxuICAgIHtcbiAgICAgICAgd2lkdGggPSBib3VuZC5yaWdodCAtIGJvdW5kLmxlZnQ7XG4gICAgICAgIGhlaWdodCA9IGJvdW5kLmJvdHRvbSAtIGJvdW5kLnRvcCArIDE7XG4gICAgICAgIGRhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YShib3VuZC5sZWZ0LCBib3VuZC50b3AsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGRhdGEsXG4gICAgfTtcbn1cbiIsICIvKipcbiAqIFJlZ2V4cCBmb3IgZGF0YSBVUkkuXG4gKiBCYXNlZCBvbjoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9yYWdpbmd3aW5kL2RhdGEtdXJpLXJlZ2V4fVxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdGFudCB7UmVnRXhwfHN0cmluZ30gREFUQV9VUklcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAZXhhbXBsZSBkYXRhOmltYWdlL3BuZztiYXNlNjRcbiAqL1xuZXhwb3J0IGNvbnN0IERBVEFfVVJJID0gL15cXHMqZGF0YTooPzooW1xcdy1dKylcXC8oW1xcdysuLV0rKSk/KD86O2NoYXJzZXQ9KFtcXHctXSspKT8oPzo7KGJhc2U2NCkpPywoLiopL2k7XG4iLCAiaW1wb3J0IHsgREFUQV9VUkkgfSBmcm9tICcuLi9jb25zdCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVjb21wb3NlZERhdGFVcmkge1xuICAgIG1lZGlhVHlwZTogc3RyaW5nO1xuICAgIHN1YlR5cGU6IHN0cmluZztcbiAgICBjaGFyc2V0OiBzdHJpbmc7XG4gICAgZW5jb2Rpbmc6IHN0cmluZztcbiAgICBkYXRhOiBzdHJpbmc7XG59XG5cbi8qKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEBpbnRlcmZhY2UgRGVjb21wb3NlZERhdGFVcmlcbiAqL1xuXG4vKipcbiAqIHR5cGUsIGVnLiBgaW1hZ2VgXG4gKiBAbWVtYmVyb2YgUElYSS51dGlscy5EZWNvbXBvc2VkRGF0YVVyaSNcbiAqIEBtZW1iZXIge3N0cmluZ30gbWVkaWFUeXBlXG4gKi9cblxuLyoqXG4gKiBTdWIgdHlwZSwgZWcuIGBwbmdgXG4gKiBAbWVtYmVyb2YgUElYSS51dGlscy5EZWNvbXBvc2VkRGF0YVVyaSNcbiAqIEBtZW1iZXIge3N0cmluZ30gc3ViVHlwZVxuICovXG5cbi8qKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHMuRGVjb21wb3NlZERhdGFVcmkjXG4gKiBAbWVtYmVyIHtzdHJpbmd9IGNoYXJzZXRcbiAqL1xuXG4vKipcbiAqIERhdGEgZW5jb2RpbmcsIGVnLiBgYmFzZTY0YFxuICogQG1lbWJlcm9mIFBJWEkudXRpbHMuRGVjb21wb3NlZERhdGFVcmkjXG4gKiBAbWVtYmVyIHtzdHJpbmd9IGVuY29kaW5nXG4gKi9cblxuLyoqXG4gKiBUaGUgYWN0dWFsIGRhdGFcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzLkRlY29tcG9zZWREYXRhVXJpI1xuICogQG1lbWJlciB7c3RyaW5nfSBkYXRhXG4gKi9cblxuLyoqXG4gKiBTcGxpdCBhIGRhdGEgVVJJIGludG8gY29tcG9uZW50cy4gUmV0dXJucyB1bmRlZmluZWQgaWZcbiAqIHBhcmFtZXRlciBgZGF0YVVyaWAgaXMgbm90IGEgdmFsaWQgZGF0YSBVUkkuXG4gKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEBmdW5jdGlvbiBkZWNvbXBvc2VEYXRhVXJpXG4gKiBAcGFyYW0ge3N0cmluZ30gZGF0YVVyaSAtIHRoZSBkYXRhIFVSSSB0byBjaGVja1xuICogQHJldHVybiB7UElYSS51dGlscy5EZWNvbXBvc2VkRGF0YVVyaXx1bmRlZmluZWR9IFRoZSBkZWNvbXBvc2VkIGRhdGEgdXJpIG9yIHVuZGVmaW5lZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb21wb3NlRGF0YVVyaShkYXRhVXJpOiBzdHJpbmcpOiBEZWNvbXBvc2VkRGF0YVVyaVxue1xuICAgIGNvbnN0IGRhdGFVcmlNYXRjaCA9IERBVEFfVVJJLmV4ZWMoZGF0YVVyaSk7XG5cbiAgICBpZiAoZGF0YVVyaU1hdGNoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1lZGlhVHlwZTogZGF0YVVyaU1hdGNoWzFdID8gZGF0YVVyaU1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzdWJUeXBlOiBkYXRhVXJpTWF0Y2hbMl0gPyBkYXRhVXJpTWF0Y2hbMl0udG9Mb3dlckNhc2UoKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNoYXJzZXQ6IGRhdGFVcmlNYXRjaFszXSA/IGRhdGFVcmlNYXRjaFszXS50b0xvd2VyQ2FzZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5jb2Rpbmc6IGRhdGFVcmlNYXRjaFs0XSA/IGRhdGFVcmlNYXRjaFs0XS50b0xvd2VyQ2FzZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZGF0YTogZGF0YVVyaU1hdGNoWzVdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4iLCAiaW1wb3J0ICogYXMgX3VybCBmcm9tICd1cmwnO1xuXG5sZXQgdGVtcEFuY2hvcjogSFRNTEFuY2hvckVsZW1lbnR8dW5kZWZpbmVkO1xuXG4vKipcbiAqIFNldHMgdGhlIGBjcm9zc09yaWdpbmAgcHJvcGVydHkgZm9yIHRoaXMgcmVzb3VyY2UgYmFzZWQgb24gaWYgdGhlIHVybFxuICogZm9yIHRoaXMgcmVzb3VyY2UgaXMgY3Jvc3Mtb3JpZ2luLiBJZiBjcm9zc09yaWdpbiB3YXMgbWFudWFsbHkgc2V0LCB0aGlzXG4gKiBmdW5jdGlvbiBkb2VzIG5vdGhpbmcuXG4gKiBOaXBwZWQgZnJvbSB0aGUgcmVzb3VyY2UgbG9hZGVyIVxuICpcbiAqIEBpZ25vcmVcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgdXJsIHRvIHRlc3QuXG4gKiBAcGFyYW0ge29iamVjdH0gW2xvYz13aW5kb3cubG9jYXRpb25dIC0gVGhlIGxvY2F0aW9uIG9iamVjdCB0byB0ZXN0IGFnYWluc3QuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjcm9zc09yaWdpbiB2YWx1ZSB0byB1c2UgKG9yIGVtcHR5IHN0cmluZyBmb3Igbm9uZSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmVDcm9zc09yaWdpbih1cmw6IHN0cmluZywgbG9jOiBMb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbik6IHN0cmluZ1xue1xuICAgIC8vIGRhdGE6IGFuZCBqYXZhc2NyaXB0OiB1cmxzIGFyZSBjb25zaWRlcmVkIHNhbWUtb3JpZ2luXG4gICAgaWYgKHVybC5pbmRleE9mKCdkYXRhOicpID09PSAwKVxuICAgIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8vIGRlZmF1bHQgaXMgd2luZG93LmxvY2F0aW9uXG4gICAgbG9jID0gbG9jIHx8IHdpbmRvdy5sb2NhdGlvbjtcblxuICAgIGlmICghdGVtcEFuY2hvcilcbiAgICB7XG4gICAgICAgIHRlbXBBbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgfVxuXG4gICAgLy8gbGV0IHRoZSBicm93c2VyIGRldGVybWluZSB0aGUgZnVsbCBocmVmIGZvciB0aGUgdXJsIG9mIHRoaXMgcmVzb3VyY2UgYW5kIHRoZW5cbiAgICAvLyBwYXJzZSB3aXRoIHRoZSBub2RlIHVybCBsaWIsIHdlIGNhbid0IHVzZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgYW5jaG9yIGVsZW1lbnRcbiAgICAvLyBiZWNhdXNlIHRoZXkgZG9uJ3Qgd29yayBpbiBJRTkgOihcbiAgICB0ZW1wQW5jaG9yLmhyZWYgPSB1cmw7XG4gICAgY29uc3QgcGFyc2VkVXJsID0gX3VybC5wYXJzZSh0ZW1wQW5jaG9yLmhyZWYpO1xuXG4gICAgY29uc3Qgc2FtZVBvcnQgPSAoIXBhcnNlZFVybC5wb3J0ICYmIGxvYy5wb3J0ID09PSAnJykgfHwgKHBhcnNlZFVybC5wb3J0ID09PSBsb2MucG9ydCk7XG5cbiAgICAvLyBpZiBjcm9zcyBvcmlnaW5cbiAgICBpZiAocGFyc2VkVXJsLmhvc3RuYW1lICE9PSBsb2MuaG9zdG5hbWUgfHwgIXNhbWVQb3J0IHx8IHBhcnNlZFVybC5wcm90b2NvbCAhPT0gbG9jLnByb3RvY29sKVxuICAgIHtcbiAgICAgICAgcmV0dXJuICdhbm9ueW1vdXMnO1xuICAgIH1cblxuICAgIHJldHVybiAnJztcbn1cbiIsICJpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJy4uL3NldHRpbmdzJztcblxuLyoqXG4gKiBnZXQgdGhlIHJlc29sdXRpb24gLyBkZXZpY2UgcGl4ZWwgcmF0aW8gb2YgYW4gYXNzZXQgYnkgbG9va2luZyBmb3IgdGhlIHByZWZpeFxuICogdXNlZCBieSBzcHJpdGVzaGVldHMgYW5kIGltYWdlIHVybHNcbiAqXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQGZ1bmN0aW9uIGdldFJlc29sdXRpb25PZlVybFxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIHRoZSBpbWFnZSBwYXRoXG4gKiBAcGFyYW0ge251bWJlcn0gW2RlZmF1bHRWYWx1ZT0xXSAtIHRoZSBkZWZhdWx0VmFsdWUgaWYgbm8gZmlsZW5hbWUgcHJlZml4IGlzIHNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gcmVzb2x1dGlvbiAvIGRldmljZSBwaXhlbCByYXRpbyBvZiBhbiBhc3NldFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVzb2x1dGlvbk9mVXJsKHVybDogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBudW1iZXIpOiBudW1iZXJcbntcbiAgICBjb25zdCByZXNvbHV0aW9uID0gc2V0dGluZ3MuUkVUSU5BX1BSRUZJWC5leGVjKHVybCk7XG5cbiAgICBpZiAocmVzb2x1dGlvbilcbiAgICB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHJlc29sdXRpb25bMV0pO1xuICAgIH1cblxuICAgIHJldHVybiBkZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IDE7XG59XG4iLCAiLyoqXG4gKiBHZW5lcmFsaXplZCBjb252ZW5pZW5jZSB1dGlsaXRpZXMgZm9yIFBJWEkuXG4gKiBAZXhhbXBsZVxuICogLy8gRXh0ZW5kIFBJWEkncyBpbnRlcm5hbCBFdmVudCBFbWl0dGVyLlxuICogY2xhc3MgTXlFbWl0dGVyIGV4dGVuZHMgUElYSS51dGlscy5FdmVudEVtaXR0ZXIge1xuICogICBjb25zdHJ1Y3RvcigpIHtcbiAqICAgICAgc3VwZXIoKTtcbiAqICAgICAgY29uc29sZS5sb2coXCJFbWl0dGVyIGNyZWF0ZWQhXCIpO1xuICogICB9XG4gKiB9XG4gKlxuICogLy8gR2V0IGluZm8gb24gY3VycmVudCBkZXZpY2VcbiAqIGNvbnNvbGUubG9nKFBJWEkudXRpbHMuaXNNb2JpbGUpO1xuICpcbiAqIC8vIENvbnZlcnQgaGV4IGNvbG9yIHRvIHN0cmluZ1xuICogY29uc29sZS5sb2coUElYSS51dGlscy5oZXgyc3RyaW5nKDB4ZmYwMGZmKSk7IC8vIHJldHVybnM6IFwiI2ZmMDBmZlwiXG4gKiBAbmFtZXNwYWNlIFBJWEkudXRpbHNcbiAqL1xuXG4vKipcbiAqIEEgc2ltcGxlIEpTIGxpYnJhcnkgdGhhdCBkZXRlY3RzIG1vYmlsZSBkZXZpY2VzLlxuICpcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9rYWltYWxsZWEvaXNNb2JpbGV9XG4gKlxuICogQG1lbWJlcm9mIFBJWEkudXRpbHNcbiAqIEBuYW1lIGlzTW9iaWxlXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByb3BlcnR5IHtib29sZWFufSBhbnkgLSBgdHJ1ZWAgaWYgY3VycmVudCBwbGF0Zm9ybSBpcyB0YWJsZXQgb3IgcGhvbmUgZGV2aWNlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHRhYmxldCAtIGB0cnVlYCBpZiBjdXJyZW50IHBsYXRmb3JtIGxhcmdlLXNjcmVlbiB0YWJsZXQgZGV2aWNlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHBob25lIC0gYHRydWVgIGlmIGN1cnJlbnQgcGxhdGZvcm0gc21hbGwtc2NyZWVuIHBob25lIGRldmljZVxuICogQHByb3BlcnR5IHtvYmplY3R9IGFwcGxlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFwcGxlLmRldmljZSAtIGB0cnVlYCBpZiBhbnkgQXBwbGUgZGV2aWNlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFwcGxlLnRhYmxldCAtIGB0cnVlYCBpZiBhbnkgQXBwbGUgaVBhZFxuICogQHByb3BlcnR5IHtib29sZWFufSBhcHBsZS5waG9uZSAtIGB0cnVlYCBpZiBhbnkgQXBwbGUgaVBob25lXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFwcGxlLmlwb2QgLSBgdHJ1ZWAgaWYgYW55IGlQb2RcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBhbmRyb2lkXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuZHJvaWQuZGV2aWNlIC0gYHRydWVgIGlmIGFueSBBbmRyb2lkIGRldmljZVxuICogQHByb3BlcnR5IHtib29sZWFufSBhbmRyb2lkLnRhYmxldCAtIGB0cnVlYCBpZiBhbnkgQW5kcm9pZCB0YWJsZXRcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYW5kcm9pZC5waG9uZSAtIGB0cnVlYCBpZiBhbnkgQW5kcm9pZCBwaG9uZVxuICogQHByb3BlcnR5IHtvYmplY3R9IGFtYXpvblxuICogQHByb3BlcnR5IHtib29sZWFufSBhbWF6b24uZGV2aWNlIC0gYHRydWVgIGlmIGFueSBTaWxrIGRldmljZVxuICogQHByb3BlcnR5IHtib29sZWFufSBhbWF6b24udGFibGV0IC0gYHRydWVgIGlmIGFueSBTaWxrIHRhYmxldFxuICogQHByb3BlcnR5IHtib29sZWFufSBhbWF6b24ucGhvbmUgLSBgdHJ1ZWAgaWYgYW55IFNpbGsgcGhvbmVcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSB3aW5kb3dzXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHdpbmRvd3MuZGV2aWNlIC0gYHRydWVgIGlmIGFueSBXaW5kb3dzIGRldmljZVxuICogQHByb3BlcnR5IHtib29sZWFufSB3aW5kb3dzLnRhYmxldCAtIGB0cnVlYCBpZiBhbnkgV2luZG93cyB0YWJsZXRcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gd2luZG93cy5waG9uZSAtIGB0cnVlYCBpZiBhbnkgV2luZG93cyBwaG9uZVxuICovXG5leHBvcnQgeyBpc01vYmlsZSB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcblxuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudGVtaXR0ZXIzJztcblxuLyoqXG4gKiBBIGhpZ2ggcGVyZm9ybWFuY2UgZXZlbnQgZW1pdHRlclxuICpcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9wcmltdXMvZXZlbnRlbWl0dGVyM31cbiAqXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQGNsYXNzIEV2ZW50RW1pdHRlclxuICogQHR5cGUge0V2ZW50RW1pdHRlcn1cbiAqL1xuZXhwb3J0IHsgRXZlbnRFbWl0dGVyIH07XG5cbi8qKlxuICogQSBwb2x5Z29uIHRyaWFuZ3VsYXRpb24gbGlicmFyeVxuICpcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvZWFyY3V0fVxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzXG4gKiBAZnVuY3Rpb24gZWFyY3V0XG4gKiBAcGFyYW0ge251bWJlcltdfSB2ZXJ0aWNlcyAtIEEgZmxhdCBhcnJheSBvZiB2ZXJ0ZXggY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7bnVtYmVyW119IFtob2xlc10gLSBBbiBhcnJheSBvZiBob2xlIGluZGljZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBbZGltZW5zaW9ucz0yXSAtIFRoZSBudW1iZXIgb2YgY29vcmRpbmF0ZXMgcGVyIHZlcnRleCBpbiB0aGUgaW5wdXQgYXJyYXlcbiAqIEByZXR1cm4ge251bWJlcltdfSBUcmlhbmd1bGF0ZWQgcG9seWdvblxuICovXG5leHBvcnQgeyBkZWZhdWx0IGFzIGVhcmN1dCB9IGZyb20gJ2VhcmN1dCc7XG5cbi8qKlxuICogTm9kZS5qcyBjb21wYXRpYmxlIFVSTCB1dGlsaXRpZXMuXG4gKlxuICogQHNlZSBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS91cmxcbiAqXG4gKiBAbWVtYmVyb2YgUElYSS51dGlsc1xuICogQG5hbWUgdXJsXG4gKiBAdHlwZSB7b2JqZWN0fVxuICovXG5leHBvcnQgeyBkZWZhdWx0IGFzIHVybCB9IGZyb20gJ3VybCc7XG5cbmltcG9ydCAnLi9zZXR0aW5ncyc7XG5cbmV4cG9ydCAqIGZyb20gJy4vYnJvd3Nlci9oZWxsbyc7XG5leHBvcnQgKiBmcm9tICcuL2Jyb3dzZXIvaXNXZWJHTFN1cHBvcnRlZCc7XG5leHBvcnQgKiBmcm9tICcuL2NvbG9yL2hleCc7XG5leHBvcnQgKiBmcm9tICcuL2NvbG9yL3ByZW11bHRpcGx5JztcbmV4cG9ydCAqIGZyb20gJy4vZGF0YS9jcmVhdGVJbmRpY2VzRm9yUXVhZHMnO1xuZXhwb3J0ICogZnJvbSAnLi9kYXRhL2dldEJ1ZmZlclR5cGUnO1xuZXhwb3J0ICogZnJvbSAnLi9kYXRhL2ludGVybGVhdmVUeXBlZEFycmF5cyc7XG5leHBvcnQgKiBmcm9tICcuL2RhdGEvcG93Mic7XG5leHBvcnQgKiBmcm9tICcuL2RhdGEvcmVtb3ZlSXRlbXMnO1xuZXhwb3J0ICogZnJvbSAnLi9kYXRhL3NpZ24nO1xuZXhwb3J0ICogZnJvbSAnLi9kYXRhL3VpZCc7XG5leHBvcnQgKiBmcm9tICcuL2xvZ2dpbmcvZGVwcmVjYXRpb24nO1xuZXhwb3J0ICogZnJvbSAnLi9tZWRpYS9jYWNoZXMnO1xuZXhwb3J0ICogZnJvbSAnLi9tZWRpYS9DYW52YXNSZW5kZXJUYXJnZXQnO1xuZXhwb3J0ICogZnJvbSAnLi9tZWRpYS90cmltQ2FudmFzJztcbmV4cG9ydCAqIGZyb20gJy4vbmV0d29yay9kZWNvbXBvc2VEYXRhVXJpJztcbmV4cG9ydCAqIGZyb20gJy4vbmV0d29yay9kZXRlcm1pbmVDcm9zc09yaWdpbic7XG5leHBvcnQgKiBmcm9tICcuL25ldHdvcmsvZ2V0UmVzb2x1dGlvbk9mVXJsJztcbmV4cG9ydCAqIGZyb20gJy4vY29uc3QnO1xuZXhwb3J0ICogZnJvbSAnLi90eXBlcyc7XG4iLCAiLyoqXG4gKiBUd28gUGkuXG4gKlxuICogQHN0YXRpY1xuICogQGNvbnN0YW50IHtudW1iZXJ9IFBJXzJcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjb25zdCBQSV8yID0gTWF0aC5QSSAqIDI7XG5cbi8qKlxuICogQ29udmVyc2lvbiBmYWN0b3IgZm9yIGNvbnZlcnRpbmcgcmFkaWFucyB0byBkZWdyZWVzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdGFudCB7bnVtYmVyfSBSQURfVE9fREVHXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY29uc3QgUkFEX1RPX0RFRyA9IDE4MCAvIE1hdGguUEk7XG5cbi8qKlxuICogQ29udmVyc2lvbiBmYWN0b3IgZm9yIGNvbnZlcnRpbmcgZGVncmVlcyB0byByYWRpYW5zLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdGFudCB7bnVtYmVyfSBERUdfVE9fUkFEXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY29uc3QgREVHX1RPX1JBRCA9IE1hdGguUEkgLyAxODA7XG5cbmV4cG9ydCBlbnVtIFNIQVBFUyB7XG4gICAgUE9MWSA9IDAsXG4gICAgUkVDVCA9IDEsXG4gICAgQ0lSQyA9IDIsXG4gICAgRUxJUCA9IDMsXG4gICAgUlJFQyA9IDQsXG59XG4vKipcbiAqIENvbnN0YW50cyB0aGF0IGlkZW50aWZ5IHNoYXBlcywgbWFpbmx5IHRvIHByZXZlbnQgYGluc3RhbmNlb2ZgIGNhbGxzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdGFudFxuICogQG5hbWUgU0hBUEVTXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHR5cGUge2VudW19XG4gKiBAcHJvcGVydHkge251bWJlcn0gUE9MWSBQb2x5Z29uXG4gKiBAcHJvcGVydHkge251bWJlcn0gUkVDVCBSZWN0YW5nbGVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDSVJDIENpcmNsZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IEVMSVAgRWxsaXBzZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFJSRUMgUm91bmRlZCBSZWN0YW5nbGVcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbiIsICJpbXBvcnQgeyBTSEFQRVMgfSBmcm9tICcuLi9jb25zdCc7XG5cbi8qKlxuICogU2l6ZSBvYmplY3QsIGNvbnRhaW5zIHdpZHRoIGFuZCBoZWlnaHRcbiAqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHR5cGVkZWYge29iamVjdH0gSVNpemVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWR0aCAtIFdpZHRoIGNvbXBvbmVudFxuICogQHByb3BlcnR5IHtudW1iZXJ9IGhlaWdodCAtIEhlaWdodCBjb21wb25lbnRcbiAqL1xuXG4vKipcbiAqIFJlY3RhbmdsZSBvYmplY3QgaXMgYW4gYXJlYSBkZWZpbmVkIGJ5IGl0cyBwb3NpdGlvbiwgYXMgaW5kaWNhdGVkIGJ5IGl0cyB0b3AtbGVmdCBjb3JuZXJcbiAqIHBvaW50ICh4LCB5KSBhbmQgYnkgaXRzIHdpZHRoIGFuZCBpdHMgaGVpZ2h0LlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIFJlY3RhbmdsZVxue1xuICAgIHB1YmxpYyB4OiBudW1iZXI7XG4gICAgcHVibGljIHk6IG51bWJlcjtcbiAgICBwdWJsaWMgd2lkdGg6IG51bWJlcjtcbiAgICBwdWJsaWMgaGVpZ2h0OiBudW1iZXI7XG4gICAgcHVibGljIHJlYWRvbmx5IHR5cGU6IFNIQVBFUy5SRUNUO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt4PTBdIC0gVGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIHJlY3RhbmdsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbeT0wXSAtIFRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHVwcGVyLWxlZnQgY29ybmVyIG9mIHRoZSByZWN0YW5nbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoPTBdIC0gVGhlIG92ZXJhbGwgd2lkdGggb2YgdGhpcyByZWN0YW5nbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2hlaWdodD0wXSAtIFRoZSBvdmVyYWxsIGhlaWdodCBvZiB0aGlzIHJlY3RhbmdsZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy54ID0gTnVtYmVyKHgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueSA9IE51bWJlcih5KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndpZHRoID0gTnVtYmVyKHdpZHRoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhlaWdodCA9IE51bWJlcihoZWlnaHQpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHlwZSBvZiB0aGUgb2JqZWN0LCBtYWlubHkgdXNlZCB0byBhdm9pZCBgaW5zdGFuY2VvZmAgY2hlY2tzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHJlYWRPbmx5XG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuU0hBUEVTLlJFQ1RcbiAgICAgICAgICogQHNlZSBQSVhJLlNIQVBFU1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gU0hBUEVTLlJFQ1Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgbGVmdCBlZGdlIG9mIHRoZSByZWN0YW5nbGVcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgbGVmdCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLng7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgcmlnaHQgZWRnZSBvZiB0aGUgcmVjdGFuZ2xlXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHJpZ2h0KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueCArIHRoaXMud2lkdGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgdG9wIGVkZ2Ugb2YgdGhlIHJlY3RhbmdsZVxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB0b3AoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy55O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIGJvdHRvbSBlZGdlIG9mIHRoZSByZWN0YW5nbGVcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgYm90dG9tKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueSArIHRoaXMuaGVpZ2h0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgY29uc3RhbnQgZW1wdHkgcmVjdGFuZ2xlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBjb25zdGFudFxuICAgICAqIEBtZW1iZXIge1BJWEkuUmVjdGFuZ2xlfVxuICAgICAqIEByZXR1cm4ge1BJWEkuUmVjdGFuZ2xlfSBBbiBlbXB0eSByZWN0YW5nbGVcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IEVNUFRZKCk6IFJlY3RhbmdsZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN0YW5nbGUoMCwgMCwgMCwgMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgUmVjdGFuZ2xlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLlJlY3RhbmdsZX0gYSBjb3B5IG9mIHRoZSByZWN0YW5nbGVcbiAgICAgKi9cbiAgICBjbG9uZSgpOiBSZWN0YW5nbGVcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjdGFuZ2xlKHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29waWVzIGFub3RoZXIgcmVjdGFuZ2xlIHRvIHRoaXMgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlY3RhbmdsZX0gcmVjdGFuZ2xlIC0gVGhlIHJlY3RhbmdsZSB0byBjb3B5IGZyb20uXG4gICAgICogQHJldHVybiB7UElYSS5SZWN0YW5nbGV9IFJldHVybnMgaXRzZWxmLlxuICAgICAqL1xuICAgIGNvcHlGcm9tKHJlY3RhbmdsZTogUmVjdGFuZ2xlKTogUmVjdGFuZ2xlXG4gICAge1xuICAgICAgICB0aGlzLnggPSByZWN0YW5nbGUueDtcbiAgICAgICAgdGhpcy55ID0gcmVjdGFuZ2xlLnk7XG4gICAgICAgIHRoaXMud2lkdGggPSByZWN0YW5nbGUud2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gcmVjdGFuZ2xlLmhlaWdodDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgdGhpcyByZWN0YW5nbGUgdG8gYW5vdGhlciBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSByZWN0YW5nbGUgLSBUaGUgcmVjdGFuZ2xlIHRvIGNvcHkgdG8uXG4gICAgICogQHJldHVybiB7UElYSS5SZWN0YW5nbGV9IFJldHVybnMgZ2l2ZW4gcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGNvcHlUbyhyZWN0YW5nbGU6IFJlY3RhbmdsZSk6IFJlY3RhbmdsZVxuICAgIHtcbiAgICAgICAgcmVjdGFuZ2xlLnggPSB0aGlzLng7XG4gICAgICAgIHJlY3RhbmdsZS55ID0gdGhpcy55O1xuICAgICAgICByZWN0YW5nbGUud2lkdGggPSB0aGlzLndpZHRoO1xuICAgICAgICByZWN0YW5nbGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cbiAgICAgICAgcmV0dXJuIHJlY3RhbmdsZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGUgeCBhbmQgeSBjb29yZGluYXRlcyBnaXZlbiBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGlzIFJlY3RhbmdsZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgeC95IGNvb3JkaW5hdGVzIGFyZSB3aXRoaW4gdGhpcyBSZWN0YW5nbGVcbiAgICAgKi9cbiAgICBjb250YWlucyh4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIGlmICh0aGlzLndpZHRoIDw9IDAgfHwgdGhpcy5oZWlnaHQgPD0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHggPj0gdGhpcy54ICYmIHggPCB0aGlzLnggKyB0aGlzLndpZHRoKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoeSA+PSB0aGlzLnkgJiYgeSA8IHRoaXMueSArIHRoaXMuaGVpZ2h0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhZHMgdGhlIHJlY3RhbmdsZSBtYWtpbmcgaXQgZ3JvdyBpbiBhbGwgZGlyZWN0aW9ucy5cbiAgICAgKiBJZiBwYWRkaW5nWSBpcyBvbWl0dGVkLCBib3RoIHBhZGRpbmdYIGFuZCBwYWRkaW5nWSB3aWxsIGJlIHNldCB0byBwYWRkaW5nWC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcGFkZGluZ1g9MF0gLSBUaGUgaG9yaXpvbnRhbCBwYWRkaW5nIGFtb3VudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3BhZGRpbmdZPTBdIC0gVGhlIHZlcnRpY2FsIHBhZGRpbmcgYW1vdW50LlxuICAgICAqIEByZXR1cm4ge1BJWEkuUmVjdGFuZ2xlfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBwYWQocGFkZGluZ1ggPSAwLCBwYWRkaW5nWSA9IHBhZGRpbmdYKTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy54IC09IHBhZGRpbmdYO1xuICAgICAgICB0aGlzLnkgLT0gcGFkZGluZ1k7XG5cbiAgICAgICAgdGhpcy53aWR0aCArPSBwYWRkaW5nWCAqIDI7XG4gICAgICAgIHRoaXMuaGVpZ2h0ICs9IHBhZGRpbmdZICogMjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaXRzIHRoaXMgcmVjdGFuZ2xlIGFyb3VuZCB0aGUgcGFzc2VkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZWN0YW5nbGV9IHJlY3RhbmdsZSAtIFRoZSByZWN0YW5nbGUgdG8gZml0LlxuICAgICAqIEByZXR1cm4ge1BJWEkuUmVjdGFuZ2xlfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBmaXQocmVjdGFuZ2xlOiBSZWN0YW5nbGUpOiB0aGlzXG4gICAge1xuICAgICAgICBjb25zdCB4MSA9IE1hdGgubWF4KHRoaXMueCwgcmVjdGFuZ2xlLngpO1xuICAgICAgICBjb25zdCB4MiA9IE1hdGgubWluKHRoaXMueCArIHRoaXMud2lkdGgsIHJlY3RhbmdsZS54ICsgcmVjdGFuZ2xlLndpZHRoKTtcbiAgICAgICAgY29uc3QgeTEgPSBNYXRoLm1heCh0aGlzLnksIHJlY3RhbmdsZS55KTtcbiAgICAgICAgY29uc3QgeTIgPSBNYXRoLm1pbih0aGlzLnkgKyB0aGlzLmhlaWdodCwgcmVjdGFuZ2xlLnkgKyByZWN0YW5nbGUuaGVpZ2h0KTtcblxuICAgICAgICB0aGlzLnggPSB4MTtcbiAgICAgICAgdGhpcy53aWR0aCA9IE1hdGgubWF4KHgyIC0geDEsIDApO1xuICAgICAgICB0aGlzLnkgPSB5MTtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCh5MiAtIHkxLCAwKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmxhcmdlcyByZWN0YW5nbGUgdGhhdCB3YXkgaXRzIGNvcm5lcnMgbGllIG9uIGdyaWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcmVzb2x1dGlvbj0xXSByZXNvbHV0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtlcHM9MC4wMDFdIHByZWNpc2lvblxuICAgICAqIEByZXR1cm4ge1BJWEkuUmVjdGFuZ2xlfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBjZWlsKHJlc29sdXRpb24gPSAxLCBlcHMgPSAwLjAwMSk6IHRoaXNcbiAgICB7XG4gICAgICAgIGNvbnN0IHgyID0gTWF0aC5jZWlsKCh0aGlzLnggKyB0aGlzLndpZHRoIC0gZXBzKSAqIHJlc29sdXRpb24pIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgY29uc3QgeTIgPSBNYXRoLmNlaWwoKHRoaXMueSArIHRoaXMuaGVpZ2h0IC0gZXBzKSAqIHJlc29sdXRpb24pIC8gcmVzb2x1dGlvbjtcblxuICAgICAgICB0aGlzLnggPSBNYXRoLmZsb29yKCh0aGlzLnggKyBlcHMpICogcmVzb2x1dGlvbikgLyByZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLnkgPSBNYXRoLmZsb29yKCh0aGlzLnkgKyBlcHMpICogcmVzb2x1dGlvbikgLyByZXNvbHV0aW9uO1xuXG4gICAgICAgIHRoaXMud2lkdGggPSB4MiAtIHRoaXMueDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB5MiAtIHRoaXMueTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmxhcmdlcyB0aGlzIHJlY3RhbmdsZSB0byBpbmNsdWRlIHRoZSBwYXNzZWQgcmVjdGFuZ2xlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlY3RhbmdsZX0gcmVjdGFuZ2xlIC0gVGhlIHJlY3RhbmdsZSB0byBpbmNsdWRlLlxuICAgICAqIEByZXR1cm4ge1BJWEkuUmVjdGFuZ2xlfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBlbmxhcmdlKHJlY3RhbmdsZTogUmVjdGFuZ2xlKTogdGhpc1xuICAgIHtcbiAgICAgICAgY29uc3QgeDEgPSBNYXRoLm1pbih0aGlzLngsIHJlY3RhbmdsZS54KTtcbiAgICAgICAgY29uc3QgeDIgPSBNYXRoLm1heCh0aGlzLnggKyB0aGlzLndpZHRoLCByZWN0YW5nbGUueCArIHJlY3RhbmdsZS53aWR0aCk7XG4gICAgICAgIGNvbnN0IHkxID0gTWF0aC5taW4odGhpcy55LCByZWN0YW5nbGUueSk7XG4gICAgICAgIGNvbnN0IHkyID0gTWF0aC5tYXgodGhpcy55ICsgdGhpcy5oZWlnaHQsIHJlY3RhbmdsZS55ICsgcmVjdGFuZ2xlLmhlaWdodCk7XG5cbiAgICAgICAgdGhpcy54ID0geDE7XG4gICAgICAgIHRoaXMud2lkdGggPSB4MiAtIHgxO1xuICAgICAgICB0aGlzLnkgPSB5MTtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB5MiAtIHkxO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTSEFQRVMgfSBmcm9tICcuLy4uL2NvbnN0JztcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gJy4vUmVjdGFuZ2xlJztcblxuLyoqXG4gKiBUaGUgQ2lyY2xlIG9iamVjdCBpcyB1c2VkIHRvIGhlbHAgZHJhdyBncmFwaGljcyBhbmQgY2FuIGFsc28gYmUgdXNlZCB0byBzcGVjaWZ5IGEgaGl0IGFyZWEgZm9yIGRpc3BsYXlPYmplY3RzLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIENpcmNsZVxue1xuICAgIHB1YmxpYyB4OiBudW1iZXI7XG4gICAgcHVibGljIHk6IG51bWJlcjtcbiAgICBwdWJsaWMgcmFkaXVzOiBudW1iZXI7XG4gICAgcHVibGljIHJlYWRvbmx5IHR5cGU6IFNIQVBFUy5DSVJDO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt4PTBdIC0gVGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoaXMgY2lyY2xlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt5PTBdIC0gVGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoaXMgY2lyY2xlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyYWRpdXM9MF0gLSBUaGUgcmFkaXVzIG9mIHRoZSBjaXJjbGVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHJhZGl1cyA9IDApXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnggPSB4O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueSA9IHk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0eXBlIG9mIHRoZSBvYmplY3QsIG1haW5seSB1c2VkIHRvIGF2b2lkIGBpbnN0YW5jZW9mYCBjaGVja3NcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICAgICogQGRlZmF1bHQgUElYSS5TSEFQRVMuQ0lSQ1xuICAgICAgICAgKiBAc2VlIFBJWEkuU0hBUEVTXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBTSEFQRVMuQ0lSQztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgdGhpcyBDaXJjbGUgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1BJWEkuQ2lyY2xlfSBhIGNvcHkgb2YgdGhlIENpcmNsZVxuICAgICAqL1xuICAgIGNsb25lKCk6IENpcmNsZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGUodGhpcy54LCB0aGlzLnksIHRoaXMucmFkaXVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGUgeCBhbmQgeSBjb29yZGluYXRlcyBnaXZlbiBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGlzIGNpcmNsZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgeC95IGNvb3JkaW5hdGVzIGFyZSB3aXRoaW4gdGhpcyBDaXJjbGVcbiAgICAgKi9cbiAgICBjb250YWlucyh4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnJhZGl1cyA8PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByMiA9IHRoaXMucmFkaXVzICogdGhpcy5yYWRpdXM7XG4gICAgICAgIGxldCBkeCA9ICh0aGlzLnggLSB4KTtcbiAgICAgICAgbGV0IGR5ID0gKHRoaXMueSAtIHkpO1xuXG4gICAgICAgIGR4ICo9IGR4O1xuICAgICAgICBkeSAqPSBkeTtcblxuICAgICAgICByZXR1cm4gKGR4ICsgZHkgPD0gcjIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogUmV0dXJucyB0aGUgZnJhbWluZyByZWN0YW5nbGUgb2YgdGhlIGNpcmNsZSBhcyBhIFJlY3RhbmdsZSBvYmplY3RcbiAgICAqXG4gICAgKiBAcmV0dXJuIHtQSVhJLlJlY3RhbmdsZX0gdGhlIGZyYW1pbmcgcmVjdGFuZ2xlXG4gICAgKi9cbiAgICBnZXRCb3VuZHMoKTogUmVjdGFuZ2xlXG4gICAge1xuICAgICAgICByZXR1cm4gbmV3IFJlY3RhbmdsZSh0aGlzLnggLSB0aGlzLnJhZGl1cywgdGhpcy55IC0gdGhpcy5yYWRpdXMsIHRoaXMucmFkaXVzICogMiwgdGhpcy5yYWRpdXMgKiAyKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnLi9SZWN0YW5nbGUnO1xuaW1wb3J0IHsgU0hBUEVTIH0gZnJvbSAnLi4vY29uc3QnO1xuXG4vKipcbiAqIFRoZSBFbGxpcHNlIG9iamVjdCBpcyB1c2VkIHRvIGhlbHAgZHJhdyBncmFwaGljcyBhbmQgY2FuIGFsc28gYmUgdXNlZCB0byBzcGVjaWZ5IGEgaGl0IGFyZWEgZm9yIGRpc3BsYXlPYmplY3RzLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEVsbGlwc2VcbntcbiAgICBwdWJsaWMgeDogbnVtYmVyO1xuICAgIHB1YmxpYyB5OiBudW1iZXI7XG4gICAgcHVibGljIHdpZHRoOiBudW1iZXI7XG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyO1xuICAgIHB1YmxpYyByZWFkb25seSB0eXBlOiBTSEFQRVMuRUxJUDtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbeD0wXSAtIFRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRlciBvZiB0aGlzIGVsbGlwc2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3k9MF0gLSBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSBjZW50ZXIgb2YgdGhpcyBlbGxpcHNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtoYWxmV2lkdGg9MF0gLSBUaGUgaGFsZiB3aWR0aCBvZiB0aGlzIGVsbGlwc2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2hhbGZIZWlnaHQ9MF0gLSBUaGUgaGFsZiBoZWlnaHQgb2YgdGhpcyBlbGxpcHNlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwLCBoYWxmV2lkdGggPSAwLCBoYWxmSGVpZ2h0ID0gMClcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueCA9IHg7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55ID0geTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndpZHRoID0gaGFsZldpZHRoO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGFsZkhlaWdodDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHR5cGUgb2YgdGhlIG9iamVjdCwgbWFpbmx5IHVzZWQgdG8gYXZvaWQgYGluc3RhbmNlb2ZgIGNoZWNrc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEByZWFkT25seVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLlNIQVBFUy5FTElQXG4gICAgICAgICAqIEBzZWUgUElYSS5TSEFQRVNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFNIQVBFUy5FTElQO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIEVsbGlwc2UgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1BJWEkuRWxsaXBzZX0gYSBjb3B5IG9mIHRoZSBlbGxpcHNlXG4gICAgICovXG4gICAgY2xvbmUoKTogRWxsaXBzZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFbGxpcHNlKHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgZ2l2ZW4gYXJlIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBlbGxpcHNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50IHRvIHRlc3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50IHRvIHRlc3RcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSB4L3kgY29vcmRzIGFyZSB3aXRoaW4gdGhpcyBlbGxpcHNlXG4gICAgICovXG4gICAgY29udGFpbnMoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBib29sZWFuXG4gICAge1xuICAgICAgICBpZiAodGhpcy53aWR0aCA8PSAwIHx8IHRoaXMuaGVpZ2h0IDw9IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0aGUgY29vcmRzIHRvIGFuIGVsbGlwc2Ugd2l0aCBjZW50ZXIgMCwwXG4gICAgICAgIGxldCBub3JteCA9ICgoeCAtIHRoaXMueCkgLyB0aGlzLndpZHRoKTtcbiAgICAgICAgbGV0IG5vcm15ID0gKCh5IC0gdGhpcy55KSAvIHRoaXMuaGVpZ2h0KTtcblxuICAgICAgICBub3JteCAqPSBub3JteDtcbiAgICAgICAgbm9ybXkgKj0gbm9ybXk7XG5cbiAgICAgICAgcmV0dXJuIChub3JteCArIG5vcm15IDw9IDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoZSBlbGxpcHNlIGFzIGEgUmVjdGFuZ2xlIG9iamVjdFxuICAgICAqXG4gICAgICogQHJldHVybiB7UElYSS5SZWN0YW5nbGV9IHRoZSBmcmFtaW5nIHJlY3RhbmdsZVxuICAgICAqL1xuICAgIGdldEJvdW5kcygpOiBSZWN0YW5nbGVcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjdGFuZ2xlKHRoaXMueCAtIHRoaXMud2lkdGgsIHRoaXMueSAtIHRoaXMuaGVpZ2h0LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFNIQVBFUyB9IGZyb20gJy4uL2NvbnN0JztcbmltcG9ydCB0eXBlIHsgSVBvaW50IH0gZnJvbSAnLi4vSVBvaW50JztcblxuLyoqXG4gKiBBIGNsYXNzIHRvIGRlZmluZSBhIHNoYXBlIHZpYSB1c2VyIGRlZmluZWQgY28tb3JpbmF0ZXMuXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgUG9seWdvblxue1xuICAgIHB1YmxpYyBwb2ludHM6IG51bWJlcltdO1xuICAgIHB1YmxpYyBjbG9zZVN0cm9rZTogYm9vbGVhbjtcbiAgICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogU0hBUEVTLlBPTFk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwb2ludHM6IElQb2ludFtdfG51bWJlcltdKTtcbiAgICBjb25zdHJ1Y3RvciguLi5wb2ludHM6IElQb2ludFtdfG51bWJlcltdKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50W118bnVtYmVyW119IHBvaW50cyAtIFRoaXMgY2FuIGJlIGFuIGFycmF5IG9mIFBvaW50c1xuICAgICAqICB0aGF0IGZvcm0gdGhlIHBvbHlnb24sIGEgZmxhdCBhcnJheSBvZiBudW1iZXJzIHRoYXQgd2lsbCBiZSBpbnRlcnByZXRlZCBhcyBbeCx5LCB4LHksIC4uLl0sIG9yXG4gICAgICogIHRoZSBhcmd1bWVudHMgcGFzc2VkIGNhbiBiZSBhbGwgdGhlIHBvaW50cyBvZiB0aGUgcG9seWdvbiBlLmcuXG4gICAgICogIGBuZXcgUElYSS5Qb2x5Z29uKG5ldyBQSVhJLlBvaW50KCksIG5ldyBQSVhJLlBvaW50KCksIC4uLilgLCBvciB0aGUgYXJndW1lbnRzIHBhc3NlZCBjYW4gYmUgZmxhdFxuICAgICAqICB4LHkgdmFsdWVzIGUuZy4gYG5ldyBQb2x5Z29uKHgseSwgeCx5LCB4LHksIC4uLilgIHdoZXJlIGB4YCBhbmQgYHlgIGFyZSBOdW1iZXJzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnBvaW50czogYW55W10pXG4gICAge1xuICAgICAgICBsZXQgZmxhdDogSVBvaW50W118bnVtYmVyW10gPSBBcnJheS5pc0FycmF5KHBvaW50c1swXSkgPyBwb2ludHNbMF0gOiBwb2ludHM7XG5cbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhbiBhcnJheSBvZiBwb2ludHMsIGNvbnZlcnQgaXQgdG8gYSBmbGF0IGFycmF5IG9mIG51bWJlcnNcbiAgICAgICAgaWYgKHR5cGVvZiBmbGF0WzBdICE9PSAnbnVtYmVyJylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcDogbnVtYmVyW10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlsID0gZmxhdC5sZW5ndGg7IGkgPCBpbDsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHAucHVzaCgoZmxhdFtpXSBhcyBJUG9pbnQpLngsIChmbGF0W2ldIGFzIElQb2ludCkueSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZsYXQgPSBwO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGFycmF5IG9mIHRoZSBwb2ludHMgb2YgdGhpcyBwb2x5Z29uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcltdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wb2ludHMgPSBmbGF0IGFzIG51bWJlcltdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHlwZSBvZiB0aGUgb2JqZWN0LCBtYWlubHkgdXNlZCB0byBhdm9pZCBgaW5zdGFuY2VvZmAgY2hlY2tzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHJlYWRPbmx5XG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuU0hBUEVTLlBPTFlcbiAgICAgICAgICogQHNlZSBQSVhJLlNIQVBFU1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gU0hBUEVTLlBPTFk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGBmYWxzZWAgYWZ0ZXIgbW92ZVRvLCBgdHJ1ZWAgYWZ0ZXIgYGNsb3NlUGF0aGAuIEluIGFsbCBvdGhlciBjYXNlcyBpdCBpcyBgdHJ1ZWAuXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2VTdHJva2UgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIHBvbHlnb25cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1BJWEkuUG9seWdvbn0gYSBjb3B5IG9mIHRoZSBwb2x5Z29uXG4gICAgICovXG4gICAgY2xvbmUoKTogUG9seWdvblxuICAgIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5wb2ludHMuc2xpY2UoKTtcbiAgICAgICAgY29uc3QgcG9seWdvbiA9IG5ldyBQb2x5Z29uKHBvaW50cyk7XG5cbiAgICAgICAgcG9seWdvbi5jbG9zZVN0cm9rZSA9IHRoaXMuY2xvc2VTdHJva2U7XG5cbiAgICAgICAgcmV0dXJuIHBvbHlnb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBwb2x5Z29uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50IHRvIHRlc3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50IHRvIHRlc3RcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSB4L3kgY29vcmRpbmF0ZXMgYXJlIHdpdGhpbiB0aGlzIHBvbHlnb25cbiAgICAgKi9cbiAgICBjb250YWlucyh4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIGxldCBpbnNpZGUgPSBmYWxzZTtcblxuICAgICAgICAvLyB1c2Ugc29tZSByYXljYXN0aW5nIHRvIHRlc3QgaGl0c1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc3Vic3RhY2svcG9pbnQtaW4tcG9seWdvbi9ibG9iL21hc3Rlci9pbmRleC5qc1xuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLnBvaW50cy5sZW5ndGggLyAyO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gbGVuZ3RoIC0gMTsgaSA8IGxlbmd0aDsgaiA9IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgeGkgPSB0aGlzLnBvaW50c1tpICogMl07XG4gICAgICAgICAgICBjb25zdCB5aSA9IHRoaXMucG9pbnRzWyhpICogMikgKyAxXTtcbiAgICAgICAgICAgIGNvbnN0IHhqID0gdGhpcy5wb2ludHNbaiAqIDJdO1xuICAgICAgICAgICAgY29uc3QgeWogPSB0aGlzLnBvaW50c1soaiAqIDIpICsgMV07XG4gICAgICAgICAgICBjb25zdCBpbnRlcnNlY3QgPSAoKHlpID4geSkgIT09ICh5aiA+IHkpKSAmJiAoeCA8ICgoeGogLSB4aSkgKiAoKHkgLSB5aSkgLyAoeWogLSB5aSkpKSArIHhpKTtcblxuICAgICAgICAgICAgaWYgKGludGVyc2VjdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbnNpZGUgPSAhaW5zaWRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGluc2lkZTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgU0hBUEVTIH0gZnJvbSAnLi4vY29uc3QnO1xuXG4vKipcbiAqIFRoZSBSb3VuZGVkIFJlY3RhbmdsZSBvYmplY3QgaXMgYW4gYXJlYSB0aGF0IGhhcyBuaWNlIHJvdW5kZWQgY29ybmVycywgYXMgaW5kaWNhdGVkIGJ5IGl0c1xuICogdG9wLWxlZnQgY29ybmVyIHBvaW50ICh4LCB5KSBhbmQgYnkgaXRzIHdpZHRoIGFuZCBpdHMgaGVpZ2h0IGFuZCBpdHMgcmFkaXVzLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIFJvdW5kZWRSZWN0YW5nbGVcbntcbiAgICBwdWJsaWMgeDogbnVtYmVyO1xuICAgIHB1YmxpYyB5OiBudW1iZXI7XG4gICAgcHVibGljIHdpZHRoOiBudW1iZXI7XG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyO1xuICAgIHB1YmxpYyByYWRpdXM6IG51bWJlcjtcbiAgICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogU0hBUEVTLlJSRUM7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3g9MF0gLSBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgcm91bmRlZCByZWN0YW5nbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3k9MF0gLSBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgcm91bmRlZCByZWN0YW5nbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoPTBdIC0gVGhlIG92ZXJhbGwgd2lkdGggb2YgdGhpcyByb3VuZGVkIHJlY3RhbmdsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbaGVpZ2h0PTBdIC0gVGhlIG92ZXJhbGwgaGVpZ2h0IG9mIHRoaXMgcm91bmRlZCByZWN0YW5nbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JhZGl1cz0yMF0gLSBDb250cm9scyB0aGUgcmFkaXVzIG9mIHRoZSByb3VuZGVkIGNvcm5lcnNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCwgcmFkaXVzID0gMjApXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnggPSB4O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueSA9IHk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDIwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHR5cGUgb2YgdGhlIG9iamVjdCwgbWFpbmx5IHVzZWQgdG8gYXZvaWQgYGluc3RhbmNlb2ZgIGNoZWNrc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLlNIQVBFUy5SUkVDXG4gICAgICAgICAqIEBzZWUgUElYSS5TSEFQRVNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFNIQVBFUy5SUkVDO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIFJvdW5kZWQgUmVjdGFuZ2xlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLlJvdW5kZWRSZWN0YW5nbGV9IGEgY29weSBvZiB0aGUgcm91bmRlZCByZWN0YW5nbGVcbiAgICAgKi9cbiAgICBjbG9uZSgpOiBSb3VuZGVkUmVjdGFuZ2xlXG4gICAge1xuICAgICAgICByZXR1cm4gbmV3IFJvdW5kZWRSZWN0YW5nbGUodGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJhZGl1cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgZ2l2ZW4gYXJlIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBSb3VuZGVkIFJlY3RhbmdsZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgeC95IGNvb3JkaW5hdGVzIGFyZSB3aXRoaW4gdGhpcyBSb3VuZGVkIFJlY3RhbmdsZVxuICAgICAqL1xuICAgIGNvbnRhaW5zKHg6IG51bWJlciwgeTogbnVtYmVyKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMud2lkdGggPD0gMCB8fCB0aGlzLmhlaWdodCA8PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHggPj0gdGhpcy54ICYmIHggPD0gdGhpcy54ICsgdGhpcy53aWR0aClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHkgPj0gdGhpcy55ICYmIHkgPD0gdGhpcy55ICsgdGhpcy5oZWlnaHQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKCh5ID49IHRoaXMueSArIHRoaXMucmFkaXVzICYmIHkgPD0gdGhpcy55ICsgdGhpcy5oZWlnaHQgLSB0aGlzLnJhZGl1cylcbiAgICAgICAgICAgICAgICB8fCAoeCA+PSB0aGlzLnggKyB0aGlzLnJhZGl1cyAmJiB4IDw9IHRoaXMueCArIHRoaXMud2lkdGggLSB0aGlzLnJhZGl1cykpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGR4ID0geCAtICh0aGlzLnggKyB0aGlzLnJhZGl1cyk7XG4gICAgICAgICAgICAgICAgbGV0IGR5ID0geSAtICh0aGlzLnkgKyB0aGlzLnJhZGl1cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzMiA9IHRoaXMucmFkaXVzICogdGhpcy5yYWRpdXM7XG5cbiAgICAgICAgICAgICAgICBpZiAoKGR4ICogZHgpICsgKGR5ICogZHkpIDw9IHJhZGl1czIpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZHggPSB4IC0gKHRoaXMueCArIHRoaXMud2lkdGggLSB0aGlzLnJhZGl1cyk7XG4gICAgICAgICAgICAgICAgaWYgKChkeCAqIGR4KSArIChkeSAqIGR5KSA8PSByYWRpdXMyKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGR5ID0geSAtICh0aGlzLnkgKyB0aGlzLmhlaWdodCAtIHRoaXMucmFkaXVzKTtcbiAgICAgICAgICAgICAgICBpZiAoKGR4ICogZHgpICsgKGR5ICogZHkpIDw9IHJhZGl1czIpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZHggPSB4IC0gKHRoaXMueCArIHRoaXMucmFkaXVzKTtcbiAgICAgICAgICAgICAgICBpZiAoKGR4ICogZHgpICsgKGR5ICogZHkpIDw9IHJhZGl1czIpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIiwgImV4cG9ydCBpbnRlcmZhY2UgSVBvaW50RGF0YVxue1xuICAgIHg6IG51bWJlcjtcbiAgICB5OiBudW1iZXI7XG59XG5cbi8qKlxuICogQ29tbW9uIGludGVyZmFjZSBmb3IgcG9pbnRzLiBCb3RoIFBvaW50IGFuZCBPYnNlcnZhYmxlUG9pbnQgaW1wbGVtZW50IGl0XG4gKiBAbWVtYmVyb2YgUElYSVxuICogQGludGVyZmFjZSBJUG9pbnREYXRhXG4gKi9cblxuLyoqXG4gKiBYIGNvb3JkXG4gKiBAbWVtYmVyb2YgUElYSS5JUG9pbnREYXRhI1xuICogQG1lbWJlciB7bnVtYmVyfSB4XG4gKi9cblxuLyoqXG4gKiBZIGNvb3JkXG4gKiBAbWVtYmVyb2YgUElYSS5JUG9pbnREYXRhI1xuICogQG1lbWJlciB7bnVtYmVyfSB5XG4gKi9cbiIsICJpbXBvcnQgeyBJUG9pbnREYXRhIH0gZnJvbSAnLi9JUG9pbnREYXRhJztcblxuZXhwb3J0IGludGVyZmFjZSBJUG9pbnQgZXh0ZW5kcyBJUG9pbnREYXRhXG57XG4gICAgY29weUZyb20ocDogSVBvaW50RGF0YSk6IHRoaXM7XG4gICAgY29weVRvPFQgZXh0ZW5kcyBJUG9pbnQ+KHA6IFQpOiBUO1xuICAgIGVxdWFscyhwOiBJUG9pbnREYXRhKTogYm9vbGVhbjtcbiAgICBzZXQoeD86IG51bWJlciwgeT86IG51bWJlcik6IHZvaWQ7XG59XG4vKipcbiAqIENvbW1vbiBpbnRlcmZhY2UgZm9yIHBvaW50cy4gQm90aCBQb2ludCBhbmQgT2JzZXJ2YWJsZVBvaW50IGltcGxlbWVudCBpdFxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBpbnRlcmZhY2UgSVBvaW50XG4gKiBAZXh0ZW5kcyBQSVhJLklQb2ludERhdGFcbiAqL1xuXG4vKipcbiAqIFNldHMgdGhlIHBvaW50IHRvIGEgbmV3IHggYW5kIHkgcG9zaXRpb24uXG4gKiBJZiB5IGlzIG9taXR0ZWQsIGJvdGggeCBhbmQgeSB3aWxsIGJlIHNldCB0byB4LlxuICpcbiAqIEBtZXRob2Qgc2V0XG4gKiBAbWVtYmVyb2YgUElYSS5JUG9pbnQjXG4gKiBAcGFyYW0ge251bWJlcn0gW3g9MF0gLSBwb3NpdGlvbiBvZiB0aGUgcG9pbnQgb24gdGhlIHggYXhpc1xuICogQHBhcmFtIHtudW1iZXJ9IFt5PXhdIC0gcG9zaXRpb24gb2YgdGhlIHBvaW50IG9uIHRoZSB5IGF4aXNcbiAqL1xuXG4vKipcbiAqIENvcGllcyB4IGFuZCB5IGZyb20gdGhlIGdpdmVuIHBvaW50XG4gKiBAbWV0aG9kIGNvcHlGcm9tXG4gKiBAbWVtYmVyb2YgUElYSS5JUG9pbnQjXG4gKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcCAtIFRoZSBwb2ludCB0byBjb3B5IGZyb21cbiAqIEByZXR1cm5zIHt0aGlzfSBSZXR1cm5zIGl0c2VsZi5cbiAqL1xuXG4vKipcbiAqIENvcGllcyB4IGFuZCB5IGludG8gdGhlIGdpdmVuIHBvaW50XG4gKiBAbWV0aG9kIGNvcHlUb1xuICogQG1lbWJlcm9mIFBJWEkuSVBvaW50I1xuICogQHBhcmFtIHtQSVhJLklQb2ludH0gcCAtIFRoZSBwb2ludCB0byBjb3B5LlxuICogQHJldHVybnMge1BJWEkuSVBvaW50fSBHaXZlbiBwb2ludCB3aXRoIHZhbHVlcyB1cGRhdGVkXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHBvaW50IGlzIGVxdWFsIHRvIHRoaXMgcG9pbnRcbiAqXG4gKiBAbWV0aG9kIGVxdWFsc1xuICogQG1lbWJlcm9mIFBJWEkuSVBvaW50I1xuICogQHBhcmFtIHtQSVhJLklQb2ludERhdGF9IHAgLSBUaGUgcG9pbnQgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSBnaXZlbiBwb2ludCBlcXVhbCB0byB0aGlzIHBvaW50XG4gKi9cblxuIiwgImltcG9ydCB0eXBlIHsgSVBvaW50IH0gZnJvbSAnLi9JUG9pbnQnO1xuaW1wb3J0IHR5cGUgeyBJUG9pbnREYXRhIH0gZnJvbSAnLi9JUG9pbnREYXRhJztcblxuLyoqXG4gKiBUaGUgUG9pbnQgb2JqZWN0IHJlcHJlc2VudHMgYSBsb2NhdGlvbiBpbiBhIHR3by1kaW1lbnNpb25hbCBjb29yZGluYXRlIHN5c3RlbSwgd2hlcmUgeCByZXByZXNlbnRzXG4gKiB0aGUgaG9yaXpvbnRhbCBheGlzIGFuZCB5IHJlcHJlc2VudHMgdGhlIHZlcnRpY2FsIGF4aXMuXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQGltcGxlbWVudHMgSVBvaW50XG4gKi9cbmV4cG9ydCBjbGFzcyBQb2ludCBpbXBsZW1lbnRzIElQb2ludFxue1xuICAgIHB1YmxpYyB4OiBudW1iZXI7XG4gICAgcHVibGljIHk6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbeD0wXSAtIHBvc2l0aW9uIG9mIHRoZSBwb2ludCBvbiB0aGUgeCBheGlzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt5PTBdIC0gcG9zaXRpb24gb2YgdGhlIHBvaW50IG9uIHRoZSB5IGF4aXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDApXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnggPSB4O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgcG9pbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1BJWEkuUG9pbnR9IGEgY29weSBvZiB0aGUgcG9pbnRcbiAgICAgKi9cbiAgICBjbG9uZSgpOiBQb2ludFxuICAgIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLngsIHRoaXMueSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29waWVzIHggYW5kIHkgZnJvbSB0aGUgZ2l2ZW4gcG9pbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5JUG9pbnREYXRhfSBwIC0gVGhlIHBvaW50IHRvIGNvcHkgZnJvbVxuICAgICAqIEByZXR1cm5zIHt0aGlzfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBjb3B5RnJvbShwOiBJUG9pbnREYXRhKTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy5zZXQocC54LCBwLnkpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvcGllcyB4IGFuZCB5IGludG8gdGhlIGdpdmVuIHBvaW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50fSBwIC0gVGhlIHBvaW50IHRvIGNvcHkuXG4gICAgICogQHJldHVybnMge1BJWEkuSVBvaW50fSBHaXZlbiBwb2ludCB3aXRoIHZhbHVlcyB1cGRhdGVkXG4gICAgICovXG4gICAgY29weVRvPFQgZXh0ZW5kcyBJUG9pbnQ+KHA6IFQpOiBUXG4gICAge1xuICAgICAgICBwLnNldCh0aGlzLngsIHRoaXMueSk7XG5cbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBwb2ludCBpcyBlcXVhbCB0byB0aGlzIHBvaW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcCAtIFRoZSBwb2ludCB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSBnaXZlbiBwb2ludCBlcXVhbCB0byB0aGlzIHBvaW50XG4gICAgICovXG4gICAgZXF1YWxzKHA6IElQb2ludERhdGEpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gKHAueCA9PT0gdGhpcy54KSAmJiAocC55ID09PSB0aGlzLnkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHBvaW50IHRvIGEgbmV3IHggYW5kIHkgcG9zaXRpb24uXG4gICAgICogSWYgeSBpcyBvbWl0dGVkLCBib3RoIHggYW5kIHkgd2lsbCBiZSBzZXQgdG8geC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbeD0wXSAtIHBvc2l0aW9uIG9mIHRoZSBwb2ludCBvbiB0aGUgeCBheGlzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt5PXhdIC0gcG9zaXRpb24gb2YgdGhlIHBvaW50IG9uIHRoZSB5IGF4aXNcbiAgICAgKiBAcmV0dXJucyB7dGhpc30gUmV0dXJucyBpdHNlbGYuXG4gICAgICovXG4gICAgc2V0KHggPSAwLCB5ID0geCk6IHRoaXNcbiAgICB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgSVBvaW50RGF0YSB9IGZyb20gJy4vSVBvaW50RGF0YSc7XG5pbXBvcnQgdHlwZSB7IElQb2ludCB9IGZyb20gJy4vSVBvaW50JztcblxuLyoqXG4gKiBUaGUgUG9pbnQgb2JqZWN0IHJlcHJlc2VudHMgYSBsb2NhdGlvbiBpbiBhIHR3by1kaW1lbnNpb25hbCBjb29yZGluYXRlIHN5c3RlbSwgd2hlcmUgeCByZXByZXNlbnRzXG4gKiB0aGUgaG9yaXpvbnRhbCBheGlzIGFuZCB5IHJlcHJlc2VudHMgdGhlIHZlcnRpY2FsIGF4aXMuXG4gKlxuICogQW4gT2JzZXJ2YWJsZVBvaW50IGlzIGEgcG9pbnQgdGhhdCB0cmlnZ2VycyBhIGNhbGxiYWNrIHdoZW4gdGhlIHBvaW50J3MgcG9zaXRpb24gaXMgY2hhbmdlZC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAaW1wbGVtZW50cyBJUG9pbnRcbiAqL1xuZXhwb3J0IGNsYXNzIE9ic2VydmFibGVQb2ludDxUID0gYW55PiBpbXBsZW1lbnRzIElQb2ludFxue1xuICAgIHB1YmxpYyBjYjogKHRoaXM6IFQpID0+IGFueTtcbiAgICBwdWJsaWMgc2NvcGU6IGFueTtcbiAgICBfeDogbnVtYmVyO1xuICAgIF95OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiAtIGNhbGxiYWNrIHdoZW4gY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBzY29wZSAtIG93bmVyIG9mIGNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt4PTBdIC0gcG9zaXRpb24gb2YgdGhlIHBvaW50IG9uIHRoZSB4IGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3k9MF0gLSBwb3NpdGlvbiBvZiB0aGUgcG9pbnQgb24gdGhlIHkgYXhpc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNiOiAodGhpczogVCkgPT4gYW55LCBzY29wZTogVCwgeCA9IDAsIHkgPSAwKVxuICAgIHtcbiAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgIHRoaXMuX3kgPSB5O1xuXG4gICAgICAgIHRoaXMuY2IgPSBjYjtcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIHBvaW50LlxuICAgICAqIFRoZSBjYWxsYmFjayBhbmQgc2NvcGUgcGFyYW1zIGNhbiBiZSBvdmVyaWRkZW4gb3RoZXJ3aXNlIHRoZXkgd2lsbCBkZWZhdWx0XG4gICAgICogdG8gdGhlIGNsb25lIG9iamVjdCdzIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYj1udWxsXSAtIGNhbGxiYWNrIHdoZW4gY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbc2NvcGU9bnVsbF0gLSBvd25lciBvZiBjYWxsYmFja1xuICAgICAqIEByZXR1cm4ge1BJWEkuT2JzZXJ2YWJsZVBvaW50fSBhIGNvcHkgb2YgdGhlIHBvaW50XG4gICAgICovXG4gICAgY2xvbmUoY2IgPSB0aGlzLmNiLCBzY29wZSA9IHRoaXMuc2NvcGUpOiBPYnNlcnZhYmxlUG9pbnRcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZVBvaW50KGNiLCBzY29wZSwgdGhpcy5feCwgdGhpcy5feSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcG9pbnQgdG8gYSBuZXcgeCBhbmQgeSBwb3NpdGlvbi5cbiAgICAgKiBJZiB5IGlzIG9taXR0ZWQsIGJvdGggeCBhbmQgeSB3aWxsIGJlIHNldCB0byB4LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt4PTBdIC0gcG9zaXRpb24gb2YgdGhlIHBvaW50IG9uIHRoZSB4IGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3k9eF0gLSBwb3NpdGlvbiBvZiB0aGUgcG9pbnQgb24gdGhlIHkgYXhpc1xuICAgICAqIEByZXR1cm5zIHt0aGlzfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBzZXQoeCA9IDAsIHkgPSB4KTogdGhpc1xuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX3ggIT09IHggfHwgdGhpcy5feSAhPT0geSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnNjb3BlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvcGllcyB4IGFuZCB5IGZyb20gdGhlIGdpdmVuIHBvaW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcCAtIFRoZSBwb2ludCB0byBjb3B5IGZyb20uXG4gICAgICogQHJldHVybnMge3RoaXN9IFJldHVybnMgaXRzZWxmLlxuICAgICAqL1xuICAgIGNvcHlGcm9tKHA6IElQb2ludERhdGEpOiB0aGlzXG4gICAge1xuICAgICAgICBpZiAodGhpcy5feCAhPT0gcC54IHx8IHRoaXMuX3kgIT09IHAueSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5feCA9IHAueDtcbiAgICAgICAgICAgIHRoaXMuX3kgPSBwLnk7XG4gICAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy5zY29wZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgeCBhbmQgeSBpbnRvIHRoZSBnaXZlbiBwb2ludFxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLklQb2ludH0gcCAtIFRoZSBwb2ludCB0byBjb3B5LlxuICAgICAqIEByZXR1cm5zIHtQSVhJLklQb2ludH0gR2l2ZW4gcG9pbnQgd2l0aCB2YWx1ZXMgdXBkYXRlZFxuICAgICAqL1xuICAgIGNvcHlUbzxUIGV4dGVuZHMgSVBvaW50PihwOiBUKTogVFxuICAgIHtcbiAgICAgICAgcC5zZXQodGhpcy5feCwgdGhpcy5feSk7XG5cbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBwb2ludCBpcyBlcXVhbCB0byB0aGlzIHBvaW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcCAtIFRoZSBwb2ludCB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSBnaXZlbiBwb2ludCBlcXVhbCB0byB0aGlzIHBvaW50XG4gICAgICovXG4gICAgZXF1YWxzKHA6IElQb2ludERhdGEpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gKHAueCA9PT0gdGhpcy5feCkgJiYgKHAueSA9PT0gdGhpcy5feSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHBvc2l0aW9uIG9mIHRoZSBkaXNwbGF5T2JqZWN0IG9uIHRoZSB4IGF4aXMgcmVsYXRpdmUgdG8gdGhlIGxvY2FsIGNvb3JkaW5hdGVzIG9mIHRoZSBwYXJlbnQuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHgoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5feDtcbiAgICB9XG5cbiAgICBzZXQgeCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX3ggIT09IHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl94ID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy5zY29wZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcG9zaXRpb24gb2YgdGhlIGRpc3BsYXlPYmplY3Qgb24gdGhlIHggYXhpcyByZWxhdGl2ZSB0byB0aGUgbG9jYWwgY29vcmRpbmF0ZXMgb2YgdGhlIHBhcmVudC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgeSgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl95O1xuICAgIH1cblxuICAgIHNldCB5KHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5feSAhPT0gdmFsdWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3kgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnNjb3BlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQb2ludCB9IGZyb20gJy4vUG9pbnQnO1xuaW1wb3J0IHsgUElfMiB9IGZyb20gJy4vY29uc3QnO1xuXG5pbXBvcnQgdHlwZSB7IFRyYW5zZm9ybSB9IGZyb20gJy4vVHJhbnNmb3JtJztcbmltcG9ydCB0eXBlIHsgSVBvaW50RGF0YSB9IGZyb20gJy4vSVBvaW50RGF0YSc7XG5cbi8qKlxuICogVGhlIFBpeGlKUyBNYXRyaXggYXMgYSBjbGFzcyBtYWtlcyBpdCBhIGxvdCBmYXN0ZXIuXG4gKlxuICogSGVyZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGl0OlxuICogYGBganNcbiAqIHwgYSB8IGMgfCB0eHxcbiAqIHwgYiB8IGQgfCB0eXxcbiAqIHwgMCB8IDAgfCAxIHxcbiAqIGBgYFxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgTWF0cml4XG57XG4gICAgcHVibGljIGE6IG51bWJlcjtcbiAgICBwdWJsaWMgYjogbnVtYmVyO1xuICAgIHB1YmxpYyBjOiBudW1iZXI7XG4gICAgcHVibGljIGQ6IG51bWJlcjtcbiAgICBwdWJsaWMgdHg6IG51bWJlcjtcbiAgICBwdWJsaWMgdHk6IG51bWJlcjtcblxuICAgIHB1YmxpYyBhcnJheTogRmxvYXQzMkFycmF5fG51bGwgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthPTFdIC0geCBzY2FsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYj0wXSAtIHggc2tld1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYz0wXSAtIHkgc2tld1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZD0xXSAtIHkgc2NhbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3R4PTBdIC0geCB0cmFuc2xhdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdHk9MF0gLSB5IHRyYW5zbGF0aW9uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYSA9IDEsIGIgPSAwLCBjID0gMCwgZCA9IDEsIHR4ID0gMCwgdHkgPSAwKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hID0gYTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmIgPSBiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYyA9IGM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kID0gZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR4ID0gdHg7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eSA9IHR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBNYXRyaXggb2JqZWN0IGJhc2VkIG9uIHRoZSBnaXZlbiBhcnJheS4gVGhlIEVsZW1lbnQgdG8gTWF0cml4IG1hcHBpbmcgb3JkZXIgaXMgYXMgZm9sbG93czpcbiAgICAgKlxuICAgICAqIGEgPSBhcnJheVswXVxuICAgICAqIGIgPSBhcnJheVsxXVxuICAgICAqIGMgPSBhcnJheVszXVxuICAgICAqIGQgPSBhcnJheVs0XVxuICAgICAqIHR4ID0gYXJyYXlbMl1cbiAgICAgKiB0eSA9IGFycmF5WzVdXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBhcnJheSAtIFRoZSBhcnJheSB0aGF0IHRoZSBtYXRyaXggd2lsbCBiZSBwb3B1bGF0ZWQgZnJvbS5cbiAgICAgKi9cbiAgICBmcm9tQXJyYXkoYXJyYXk6IG51bWJlcltdKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5hID0gYXJyYXlbMF07XG4gICAgICAgIHRoaXMuYiA9IGFycmF5WzFdO1xuICAgICAgICB0aGlzLmMgPSBhcnJheVszXTtcbiAgICAgICAgdGhpcy5kID0gYXJyYXlbNF07XG4gICAgICAgIHRoaXMudHggPSBhcnJheVsyXTtcbiAgICAgICAgdGhpcy50eSA9IGFycmF5WzVdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldHMgdGhlIG1hdHJpeCBwcm9wZXJ0aWVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYSAtIE1hdHJpeCBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYiAtIE1hdHJpeCBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYyAtIE1hdHJpeCBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZCAtIE1hdHJpeCBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdHggLSBNYXRyaXggY29tcG9uZW50XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHR5IC0gTWF0cml4IGNvbXBvbmVudFxuICAgICAqXG4gICAgICogQHJldHVybiB7UElYSS5NYXRyaXh9IFRoaXMgbWF0cml4LiBHb29kIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovXG4gICAgc2V0KGE6IG51bWJlciwgYjogbnVtYmVyLCBjOiBudW1iZXIsIGQ6IG51bWJlciwgdHg6IG51bWJlciwgdHk6IG51bWJlcik6IHRoaXNcbiAgICB7XG4gICAgICAgIHRoaXMuYSA9IGE7XG4gICAgICAgIHRoaXMuYiA9IGI7XG4gICAgICAgIHRoaXMuYyA9IGM7XG4gICAgICAgIHRoaXMuZCA9IGQ7XG4gICAgICAgIHRoaXMudHggPSB0eDtcbiAgICAgICAgdGhpcy50eSA9IHR5O1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgZnJvbSB0aGUgY3VycmVudCBNYXRyaXggb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSB0cmFuc3Bvc2UgLSBXaGV0aGVyIHdlIG5lZWQgdG8gdHJhbnNwb3NlIHRoZSBtYXRyaXggb3Igbm90XG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IFtvdXQ9bmV3IEZsb2F0MzJBcnJheSg5KV0gLSBJZiBwcm92aWRlZCB0aGUgYXJyYXkgd2lsbCBiZSBhc3NpZ25lZCB0byBvdXRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJbXX0gdGhlIG5ld2x5IGNyZWF0ZWQgYXJyYXkgd2hpY2ggY29udGFpbnMgdGhlIG1hdHJpeFxuICAgICAqL1xuICAgIHRvQXJyYXkodHJhbnNwb3NlOiBib29sZWFuLCBvdXQ/OiBGbG9hdDMyQXJyYXkpOiBGbG9hdDMyQXJyYXlcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5hcnJheSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5hcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoOSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhcnJheSA9IG91dCB8fCB0aGlzLmFycmF5O1xuXG4gICAgICAgIGlmICh0cmFuc3Bvc2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGFycmF5WzBdID0gdGhpcy5hO1xuICAgICAgICAgICAgYXJyYXlbMV0gPSB0aGlzLmI7XG4gICAgICAgICAgICBhcnJheVsyXSA9IDA7XG4gICAgICAgICAgICBhcnJheVszXSA9IHRoaXMuYztcbiAgICAgICAgICAgIGFycmF5WzRdID0gdGhpcy5kO1xuICAgICAgICAgICAgYXJyYXlbNV0gPSAwO1xuICAgICAgICAgICAgYXJyYXlbNl0gPSB0aGlzLnR4O1xuICAgICAgICAgICAgYXJyYXlbN10gPSB0aGlzLnR5O1xuICAgICAgICAgICAgYXJyYXlbOF0gPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgYXJyYXlbMF0gPSB0aGlzLmE7XG4gICAgICAgICAgICBhcnJheVsxXSA9IHRoaXMuYztcbiAgICAgICAgICAgIGFycmF5WzJdID0gdGhpcy50eDtcbiAgICAgICAgICAgIGFycmF5WzNdID0gdGhpcy5iO1xuICAgICAgICAgICAgYXJyYXlbNF0gPSB0aGlzLmQ7XG4gICAgICAgICAgICBhcnJheVs1XSA9IHRoaXMudHk7XG4gICAgICAgICAgICBhcnJheVs2XSA9IDA7XG4gICAgICAgICAgICBhcnJheVs3XSA9IDA7XG4gICAgICAgICAgICBhcnJheVs4XSA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgbmV3IHBvc2l0aW9uIHdpdGggdGhlIGN1cnJlbnQgdHJhbnNmb3JtYXRpb24gYXBwbGllZC5cbiAgICAgKiBDYW4gYmUgdXNlZCB0byBnbyBmcm9tIGEgY2hpbGQncyBjb29yZGluYXRlIHNwYWNlIHRvIHRoZSB3b3JsZCBjb29yZGluYXRlIHNwYWNlLiAoZS5nLiByZW5kZXJpbmcpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcG9zIC0gVGhlIG9yaWdpblxuICAgICAqIEBwYXJhbSB7UElYSS5Qb2ludH0gW25ld1Bvc10gLSBUaGUgcG9pbnQgdGhhdCB0aGUgbmV3IHBvc2l0aW9uIGlzIGFzc2lnbmVkIHRvIChhbGxvd2VkIHRvIGJlIHNhbWUgYXMgaW5wdXQpXG4gICAgICogQHJldHVybiB7UElYSS5Qb2ludH0gVGhlIG5ldyBwb2ludCwgdHJhbnNmb3JtZWQgdGhyb3VnaCB0aGlzIG1hdHJpeFxuICAgICAqL1xuICAgIGFwcGx5PFAgZXh0ZW5kcyBJUG9pbnREYXRhID0gUG9pbnQ+KHBvczogSVBvaW50RGF0YSwgbmV3UG9zPzogUCk6IFBcbiAgICB7XG4gICAgICAgIG5ld1BvcyA9IChuZXdQb3MgfHwgbmV3IFBvaW50KCkpIGFzIFA7XG5cbiAgICAgICAgY29uc3QgeCA9IHBvcy54O1xuICAgICAgICBjb25zdCB5ID0gcG9zLnk7XG5cbiAgICAgICAgbmV3UG9zLnggPSAodGhpcy5hICogeCkgKyAodGhpcy5jICogeSkgKyB0aGlzLnR4O1xuICAgICAgICBuZXdQb3MueSA9ICh0aGlzLmIgKiB4KSArICh0aGlzLmQgKiB5KSArIHRoaXMudHk7XG5cbiAgICAgICAgcmV0dXJuIG5ld1BvcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSBuZXcgcG9zaXRpb24gd2l0aCB0aGUgaW52ZXJzZSBvZiB0aGUgY3VycmVudCB0cmFuc2Zvcm1hdGlvbiBhcHBsaWVkLlxuICAgICAqIENhbiBiZSB1c2VkIHRvIGdvIGZyb20gdGhlIHdvcmxkIGNvb3JkaW5hdGUgc3BhY2UgdG8gYSBjaGlsZCdzIGNvb3JkaW5hdGUgc3BhY2UuIChlLmcuIGlucHV0KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLklQb2ludERhdGF9IHBvcyAtIFRoZSBvcmlnaW5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUG9pbnR9IFtuZXdQb3NdIC0gVGhlIHBvaW50IHRoYXQgdGhlIG5ldyBwb3NpdGlvbiBpcyBhc3NpZ25lZCB0byAoYWxsb3dlZCB0byBiZSBzYW1lIGFzIGlucHV0KVxuICAgICAqIEByZXR1cm4ge1BJWEkuUG9pbnR9IFRoZSBuZXcgcG9pbnQsIGludmVyc2UtdHJhbnNmb3JtZWQgdGhyb3VnaCB0aGlzIG1hdHJpeFxuICAgICAqL1xuICAgIGFwcGx5SW52ZXJzZTxQIGV4dGVuZHMgSVBvaW50RGF0YSA9IFBvaW50Pihwb3M6IElQb2ludERhdGEsIG5ld1Bvcz86IFApOiBQXG4gICAge1xuICAgICAgICBuZXdQb3MgPSAobmV3UG9zIHx8IG5ldyBQb2ludCgpKSBhcyBQO1xuXG4gICAgICAgIGNvbnN0IGlkID0gMSAvICgodGhpcy5hICogdGhpcy5kKSArICh0aGlzLmMgKiAtdGhpcy5iKSk7XG5cbiAgICAgICAgY29uc3QgeCA9IHBvcy54O1xuICAgICAgICBjb25zdCB5ID0gcG9zLnk7XG5cbiAgICAgICAgbmV3UG9zLnggPSAodGhpcy5kICogaWQgKiB4KSArICgtdGhpcy5jICogaWQgKiB5KSArICgoKHRoaXMudHkgKiB0aGlzLmMpIC0gKHRoaXMudHggKiB0aGlzLmQpKSAqIGlkKTtcbiAgICAgICAgbmV3UG9zLnkgPSAodGhpcy5hICogaWQgKiB5KSArICgtdGhpcy5iICogaWQgKiB4KSArICgoKC10aGlzLnR5ICogdGhpcy5hKSArICh0aGlzLnR4ICogdGhpcy5iKSkgKiBpZCk7XG5cbiAgICAgICAgcmV0dXJuIG5ld1BvcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGVzIHRoZSBtYXRyaXggb24gdGhlIHggYW5kIHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIEhvdyBtdWNoIHRvIHRyYW5zbGF0ZSB4IGJ5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBIb3cgbXVjaCB0byB0cmFuc2xhdGUgeSBieVxuICAgICAqIEByZXR1cm4ge1BJWEkuTWF0cml4fSBUaGlzIG1hdHJpeC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqL1xuICAgIHRyYW5zbGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXNcbiAgICB7XG4gICAgICAgIHRoaXMudHggKz0geDtcbiAgICAgICAgdGhpcy50eSArPSB5O1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBzY2FsZSB0cmFuc2Zvcm1hdGlvbiB0byB0aGUgbWF0cml4LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBUaGUgYW1vdW50IHRvIHNjYWxlIGhvcml6b250YWxseVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIGFtb3VudCB0byBzY2FsZSB2ZXJ0aWNhbGx5XG4gICAgICogQHJldHVybiB7UElYSS5NYXRyaXh9IFRoaXMgbWF0cml4LiBHb29kIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovXG4gICAgc2NhbGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzXG4gICAge1xuICAgICAgICB0aGlzLmEgKj0geDtcbiAgICAgICAgdGhpcy5kICo9IHk7XG4gICAgICAgIHRoaXMuYyAqPSB4O1xuICAgICAgICB0aGlzLmIgKj0geTtcbiAgICAgICAgdGhpcy50eCAqPSB4O1xuICAgICAgICB0aGlzLnR5ICo9IHk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhIHJvdGF0aW9uIHRyYW5zZm9ybWF0aW9uIHRvIHRoZSBtYXRyaXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgLSBUaGUgYW5nbGUgaW4gcmFkaWFucy5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLk1hdHJpeH0gVGhpcyBtYXRyaXguIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi9cbiAgICByb3RhdGUoYW5nbGU6IG51bWJlcik6IHRoaXNcbiAgICB7XG4gICAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICAgICAgY29uc3Qgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuXG4gICAgICAgIGNvbnN0IGExID0gdGhpcy5hO1xuICAgICAgICBjb25zdCBjMSA9IHRoaXMuYztcbiAgICAgICAgY29uc3QgdHgxID0gdGhpcy50eDtcblxuICAgICAgICB0aGlzLmEgPSAoYTEgKiBjb3MpIC0gKHRoaXMuYiAqIHNpbik7XG4gICAgICAgIHRoaXMuYiA9IChhMSAqIHNpbikgKyAodGhpcy5iICogY29zKTtcbiAgICAgICAgdGhpcy5jID0gKGMxICogY29zKSAtICh0aGlzLmQgKiBzaW4pO1xuICAgICAgICB0aGlzLmQgPSAoYzEgKiBzaW4pICsgKHRoaXMuZCAqIGNvcyk7XG4gICAgICAgIHRoaXMudHggPSAodHgxICogY29zKSAtICh0aGlzLnR5ICogc2luKTtcbiAgICAgICAgdGhpcy50eSA9ICh0eDEgKiBzaW4pICsgKHRoaXMudHkgKiBjb3MpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgdGhlIGdpdmVuIE1hdHJpeCB0byB0aGlzIE1hdHJpeC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5NYXRyaXh9IG1hdHJpeCAtIFRoZSBtYXRyaXggdG8gYXBwZW5kLlxuICAgICAqIEByZXR1cm4ge1BJWEkuTWF0cml4fSBUaGlzIG1hdHJpeC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqL1xuICAgIGFwcGVuZChtYXRyaXg6IE1hdHJpeCk6IHRoaXNcbiAgICB7XG4gICAgICAgIGNvbnN0IGExID0gdGhpcy5hO1xuICAgICAgICBjb25zdCBiMSA9IHRoaXMuYjtcbiAgICAgICAgY29uc3QgYzEgPSB0aGlzLmM7XG4gICAgICAgIGNvbnN0IGQxID0gdGhpcy5kO1xuXG4gICAgICAgIHRoaXMuYSA9IChtYXRyaXguYSAqIGExKSArIChtYXRyaXguYiAqIGMxKTtcbiAgICAgICAgdGhpcy5iID0gKG1hdHJpeC5hICogYjEpICsgKG1hdHJpeC5iICogZDEpO1xuICAgICAgICB0aGlzLmMgPSAobWF0cml4LmMgKiBhMSkgKyAobWF0cml4LmQgKiBjMSk7XG4gICAgICAgIHRoaXMuZCA9IChtYXRyaXguYyAqIGIxKSArIChtYXRyaXguZCAqIGQxKTtcblxuICAgICAgICB0aGlzLnR4ID0gKG1hdHJpeC50eCAqIGExKSArIChtYXRyaXgudHkgKiBjMSkgKyB0aGlzLnR4O1xuICAgICAgICB0aGlzLnR5ID0gKG1hdHJpeC50eCAqIGIxKSArIChtYXRyaXgudHkgKiBkMSkgKyB0aGlzLnR5O1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIG1hdHJpeCBiYXNlZCBvbiBhbGwgdGhlIGF2YWlsYWJsZSBwcm9wZXJ0aWVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFBvc2l0aW9uIG9uIHRoZSB4IGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFBvc2l0aW9uIG9uIHRoZSB5IGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl2b3RYIC0gUGl2b3Qgb24gdGhlIHggYXhpc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXZvdFkgLSBQaXZvdCBvbiB0aGUgeSBheGlzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNjYWxlWCAtIFNjYWxlIG9uIHRoZSB4IGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NhbGVZIC0gU2NhbGUgb24gdGhlIHkgYXhpc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiAtIFJvdGF0aW9uIGluIHJhZGlhbnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2tld1ggLSBTa2V3IG9uIHRoZSB4IGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2tld1kgLSBTa2V3IG9uIHRoZSB5IGF4aXNcbiAgICAgKiBAcmV0dXJuIHtQSVhJLk1hdHJpeH0gVGhpcyBtYXRyaXguIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi9cbiAgICBzZXRUcmFuc2Zvcm0oeDogbnVtYmVyLCB5OiBudW1iZXIsIHBpdm90WDogbnVtYmVyLCBwaXZvdFk6IG51bWJlciwgc2NhbGVYOiBudW1iZXIsXG4gICAgICAgIHNjYWxlWTogbnVtYmVyLCByb3RhdGlvbjogbnVtYmVyLCBza2V3WDogbnVtYmVyLCBza2V3WTogbnVtYmVyKTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy5hID0gTWF0aC5jb3Mocm90YXRpb24gKyBza2V3WSkgKiBzY2FsZVg7XG4gICAgICAgIHRoaXMuYiA9IE1hdGguc2luKHJvdGF0aW9uICsgc2tld1kpICogc2NhbGVYO1xuICAgICAgICB0aGlzLmMgPSAtTWF0aC5zaW4ocm90YXRpb24gLSBza2V3WCkgKiBzY2FsZVk7XG4gICAgICAgIHRoaXMuZCA9IE1hdGguY29zKHJvdGF0aW9uIC0gc2tld1gpICogc2NhbGVZO1xuXG4gICAgICAgIHRoaXMudHggPSB4IC0gKChwaXZvdFggKiB0aGlzLmEpICsgKHBpdm90WSAqIHRoaXMuYykpO1xuICAgICAgICB0aGlzLnR5ID0geSAtICgocGl2b3RYICogdGhpcy5iKSArIChwaXZvdFkgKiB0aGlzLmQpKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcmVwZW5kcyB0aGUgZ2l2ZW4gTWF0cml4IHRvIHRoaXMgTWF0cml4LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gbWF0cml4IC0gVGhlIG1hdHJpeCB0byBwcmVwZW5kXG4gICAgICogQHJldHVybiB7UElYSS5NYXRyaXh9IFRoaXMgbWF0cml4LiBHb29kIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovXG4gICAgcHJlcGVuZChtYXRyaXg6IE1hdHJpeCk6IHRoaXNcbiAgICB7XG4gICAgICAgIGNvbnN0IHR4MSA9IHRoaXMudHg7XG5cbiAgICAgICAgaWYgKG1hdHJpeC5hICE9PSAxIHx8IG1hdHJpeC5iICE9PSAwIHx8IG1hdHJpeC5jICE9PSAwIHx8IG1hdHJpeC5kICE9PSAxKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBhMSA9IHRoaXMuYTtcbiAgICAgICAgICAgIGNvbnN0IGMxID0gdGhpcy5jO1xuXG4gICAgICAgICAgICB0aGlzLmEgPSAoYTEgKiBtYXRyaXguYSkgKyAodGhpcy5iICogbWF0cml4LmMpO1xuICAgICAgICAgICAgdGhpcy5iID0gKGExICogbWF0cml4LmIpICsgKHRoaXMuYiAqIG1hdHJpeC5kKTtcbiAgICAgICAgICAgIHRoaXMuYyA9IChjMSAqIG1hdHJpeC5hKSArICh0aGlzLmQgKiBtYXRyaXguYyk7XG4gICAgICAgICAgICB0aGlzLmQgPSAoYzEgKiBtYXRyaXguYikgKyAodGhpcy5kICogbWF0cml4LmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50eCA9ICh0eDEgKiBtYXRyaXguYSkgKyAodGhpcy50eSAqIG1hdHJpeC5jKSArIG1hdHJpeC50eDtcbiAgICAgICAgdGhpcy50eSA9ICh0eDEgKiBtYXRyaXguYikgKyAodGhpcy50eSAqIG1hdHJpeC5kKSArIG1hdHJpeC50eTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWNvbXBvc2VzIHRoZSBtYXRyaXggKHgsIHksIHNjYWxlWCwgc2NhbGVZLCBhbmQgcm90YXRpb24pIGFuZCBzZXRzIHRoZSBwcm9wZXJ0aWVzIG9uIHRvIGEgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlRyYW5zZm9ybX0gdHJhbnNmb3JtIC0gVGhlIHRyYW5zZm9ybSB0byBhcHBseSB0aGUgcHJvcGVydGllcyB0by5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlRyYW5zZm9ybX0gVGhlIHRyYW5zZm9ybSB3aXRoIHRoZSBuZXdseSBhcHBsaWVkIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBkZWNvbXBvc2UodHJhbnNmb3JtOiBUcmFuc2Zvcm0pOiBUcmFuc2Zvcm1cbiAgICB7XG4gICAgICAgIC8vIHNvcnQgb3V0IHJvdGF0aW9uIC8gc2tldy4uXG4gICAgICAgIGNvbnN0IGEgPSB0aGlzLmE7XG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLmI7XG4gICAgICAgIGNvbnN0IGMgPSB0aGlzLmM7XG4gICAgICAgIGNvbnN0IGQgPSB0aGlzLmQ7XG5cbiAgICAgICAgY29uc3Qgc2tld1ggPSAtTWF0aC5hdGFuMigtYywgZCk7XG4gICAgICAgIGNvbnN0IHNrZXdZID0gTWF0aC5hdGFuMihiLCBhKTtcblxuICAgICAgICBjb25zdCBkZWx0YSA9IE1hdGguYWJzKHNrZXdYICsgc2tld1kpO1xuXG4gICAgICAgIGlmIChkZWx0YSA8IDAuMDAwMDEgfHwgTWF0aC5hYnMoUElfMiAtIGRlbHRhKSA8IDAuMDAwMDEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybS5yb3RhdGlvbiA9IHNrZXdZO1xuICAgICAgICAgICAgdHJhbnNmb3JtLnNrZXcueCA9IHRyYW5zZm9ybS5za2V3LnkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdHJhbnNmb3JtLnJvdGF0aW9uID0gMDtcbiAgICAgICAgICAgIHRyYW5zZm9ybS5za2V3LnggPSBza2V3WDtcbiAgICAgICAgICAgIHRyYW5zZm9ybS5za2V3LnkgPSBza2V3WTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5leHQgc2V0IHNjYWxlXG4gICAgICAgIHRyYW5zZm9ybS5zY2FsZS54ID0gTWF0aC5zcXJ0KChhICogYSkgKyAoYiAqIGIpKTtcbiAgICAgICAgdHJhbnNmb3JtLnNjYWxlLnkgPSBNYXRoLnNxcnQoKGMgKiBjKSArIChkICogZCkpO1xuXG4gICAgICAgIC8vIG5leHQgc2V0IHBvc2l0aW9uXG4gICAgICAgIHRyYW5zZm9ybS5wb3NpdGlvbi54ID0gdGhpcy50eDtcbiAgICAgICAgdHJhbnNmb3JtLnBvc2l0aW9uLnkgPSB0aGlzLnR5O1xuXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW52ZXJ0cyB0aGlzIG1hdHJpeFxuICAgICAqXG4gICAgICogQHJldHVybiB7UElYSS5NYXRyaXh9IFRoaXMgbWF0cml4LiBHb29kIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovXG4gICAgaW52ZXJ0KCk6IHRoaXNcbiAgICB7XG4gICAgICAgIGNvbnN0IGExID0gdGhpcy5hO1xuICAgICAgICBjb25zdCBiMSA9IHRoaXMuYjtcbiAgICAgICAgY29uc3QgYzEgPSB0aGlzLmM7XG4gICAgICAgIGNvbnN0IGQxID0gdGhpcy5kO1xuICAgICAgICBjb25zdCB0eDEgPSB0aGlzLnR4O1xuICAgICAgICBjb25zdCBuID0gKGExICogZDEpIC0gKGIxICogYzEpO1xuXG4gICAgICAgIHRoaXMuYSA9IGQxIC8gbjtcbiAgICAgICAgdGhpcy5iID0gLWIxIC8gbjtcbiAgICAgICAgdGhpcy5jID0gLWMxIC8gbjtcbiAgICAgICAgdGhpcy5kID0gYTEgLyBuO1xuICAgICAgICB0aGlzLnR4ID0gKChjMSAqIHRoaXMudHkpIC0gKGQxICogdHgxKSkgLyBuO1xuICAgICAgICB0aGlzLnR5ID0gLSgoYTEgKiB0aGlzLnR5KSAtIChiMSAqIHR4MSkpIC8gbjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhpcyBNYXRyaXggdG8gYW4gaWRlbnRpdHkgKGRlZmF1bHQpIG1hdHJpeC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1BJWEkuTWF0cml4fSBUaGlzIG1hdHJpeC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqL1xuICAgIGlkZW50aXR5KCk6IHRoaXNcbiAgICB7XG4gICAgICAgIHRoaXMuYSA9IDE7XG4gICAgICAgIHRoaXMuYiA9IDA7XG4gICAgICAgIHRoaXMuYyA9IDA7XG4gICAgICAgIHRoaXMuZCA9IDE7XG4gICAgICAgIHRoaXMudHggPSAwO1xuICAgICAgICB0aGlzLnR5ID0gMDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE1hdHJpeCBvYmplY3Qgd2l0aCB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhpcyBvbmUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLk1hdHJpeH0gQSBjb3B5IG9mIHRoaXMgbWF0cml4LiBHb29kIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovXG4gICAgY2xvbmUoKTogTWF0cml4XG4gICAge1xuICAgICAgICBjb25zdCBtYXRyaXggPSBuZXcgTWF0cml4KCk7XG5cbiAgICAgICAgbWF0cml4LmEgPSB0aGlzLmE7XG4gICAgICAgIG1hdHJpeC5iID0gdGhpcy5iO1xuICAgICAgICBtYXRyaXguYyA9IHRoaXMuYztcbiAgICAgICAgbWF0cml4LmQgPSB0aGlzLmQ7XG4gICAgICAgIG1hdHJpeC50eCA9IHRoaXMudHg7XG4gICAgICAgIG1hdHJpeC50eSA9IHRoaXMudHk7XG5cbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIGdpdmVuIG1hdHJpeCB0byBiZSB0aGUgc2FtZSBhcyB0aGUgb25lcyBpbiB0aGlzIG1hdHJpeFxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gbWF0cml4IC0gVGhlIG1hdHJpeCB0byBjb3B5IHRvLlxuICAgICAqIEByZXR1cm4ge1BJWEkuTWF0cml4fSBUaGUgbWF0cml4IGdpdmVuIGluIHBhcmFtZXRlciB3aXRoIGl0cyB2YWx1ZXMgdXBkYXRlZC5cbiAgICAgKi9cbiAgICBjb3B5VG8obWF0cml4OiBNYXRyaXgpOiBNYXRyaXhcbiAgICB7XG4gICAgICAgIG1hdHJpeC5hID0gdGhpcy5hO1xuICAgICAgICBtYXRyaXguYiA9IHRoaXMuYjtcbiAgICAgICAgbWF0cml4LmMgPSB0aGlzLmM7XG4gICAgICAgIG1hdHJpeC5kID0gdGhpcy5kO1xuICAgICAgICBtYXRyaXgudHggPSB0aGlzLnR4O1xuICAgICAgICBtYXRyaXgudHkgPSB0aGlzLnR5O1xuXG4gICAgICAgIHJldHVybiBtYXRyaXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgdmFsdWVzIG9mIHRoZSBtYXRyaXggdG8gYmUgdGhlIHNhbWUgYXMgdGhlIG9uZXMgaW4gZ2l2ZW4gbWF0cml4XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuTWF0cml4fSBtYXRyaXggLSBUaGUgbWF0cml4IHRvIGNvcHkgZnJvbS5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLk1hdHJpeH0gdGhpc1xuICAgICAqL1xuICAgIGNvcHlGcm9tKG1hdHJpeDogTWF0cml4KTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy5hID0gbWF0cml4LmE7XG4gICAgICAgIHRoaXMuYiA9IG1hdHJpeC5iO1xuICAgICAgICB0aGlzLmMgPSBtYXRyaXguYztcbiAgICAgICAgdGhpcy5kID0gbWF0cml4LmQ7XG4gICAgICAgIHRoaXMudHggPSBtYXRyaXgudHg7XG4gICAgICAgIHRoaXMudHkgPSBtYXRyaXgudHk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBkZWZhdWx0IChpZGVudGl0eSkgbWF0cml4XG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQGNvbnN0XG4gICAgICogQG1lbWJlciB7UElYSS5NYXRyaXh9XG4gICAgICovXG4gICAgc3RhdGljIGdldCBJREVOVElUWSgpOiBNYXRyaXhcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgTWF0cml4KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSB0ZW1wIG1hdHJpeFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBjb25zdFxuICAgICAqIEBtZW1iZXIge1BJWEkuTWF0cml4fVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgVEVNUF9NQVRSSVgoKTogTWF0cml4XG4gICAge1xuICAgICAgICByZXR1cm4gbmV3IE1hdHJpeCgpO1xuICAgIH1cbn1cbiIsICIvLyBZb3VyIGZyaWVuZGx5IG5laWdoYm91ciBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EaWhlZHJhbF9ncm91cFxuLy9cbi8vIFRoaXMgZmlsZSBpbXBsZW1lbnRzIHRoZSBkaWhlZHJhbCBncm91cCBvZiBvcmRlciAxNiwgYWxzbyBjYWxsZWRcbi8vIG9mIGRlZ3JlZSA4LiBUaGF0J3Mgd2h5IGl0cyBjYWxsZWQgZ3JvdXBEOC5cblxuaW1wb3J0IHsgTWF0cml4IH0gZnJvbSAnLi9NYXRyaXgnO1xuXG4vKlxuICogVHJhbnNmb3JtIG1hdHJpeCBmb3Igb3BlcmF0aW9uIG4gaXM6XG4gKiB8IHV4IHwgdnggfFxuICogfCB1eSB8IHZ5IHxcbiAqL1xuXG5jb25zdCB1eCA9IFsxLCAxLCAwLCAtMSwgLTEsIC0xLCAwLCAxLCAxLCAxLCAwLCAtMSwgLTEsIC0xLCAwLCAxXTtcbmNvbnN0IHV5ID0gWzAsIDEsIDEsIDEsIDAsIC0xLCAtMSwgLTEsIDAsIDEsIDEsIDEsIDAsIC0xLCAtMSwgLTFdO1xuY29uc3QgdnggPSBbMCwgLTEsIC0xLCAtMSwgMCwgMSwgMSwgMSwgMCwgMSwgMSwgMSwgMCwgLTEsIC0xLCAtMV07XG5jb25zdCB2eSA9IFsxLCAxLCAwLCAtMSwgLTEsIC0xLCAwLCAxLCAtMSwgLTEsIDAsIDEsIDEsIDEsIDAsIC0xXTtcblxuLyoqXG4gKiBbQ2F5bGV5IFRhYmxlXXtAbGluayBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DYXlsZXlfdGFibGV9XG4gKiBmb3IgdGhlIGNvbXBvc2l0aW9uIG9mIGVhY2ggcm90YXRpb24gaW4gdGhlIGRpaGVkZXJhbCBncm91cCBEOC5cbiAqXG4gKiBAdHlwZSBudW1iZXJbXVtdXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCByb3RhdGlvbkNheWxleTogbnVtYmVyW11bXSA9IFtdO1xuXG4vKipcbiAqIE1hdHJpY2VzIGZvciBlYWNoIGBHRDhTeW1tZXRyeWAgcm90YXRpb24uXG4gKlxuICogQHR5cGUgTWF0cml4W11cbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHJvdGF0aW9uTWF0cmljZXM6IE1hdHJpeFtdID0gW107XG5cbi8qXG4gKiBBbGlhcyBmb3Ige0Bjb2RlIE1hdGguc2lnbn0uXG4gKi9cbmNvbnN0IHNpZ251bSA9IE1hdGguc2lnbjtcblxuLypcbiAqIEluaXRpYWxpemVzIGByb3RhdGlvbkNheWxleWAgYW5kIGByb3RhdGlvbk1hdHJpY2VzYC4gSXQgaXMgY2FsbGVkXG4gKiBvbmx5IG9uY2UgYmVsb3cuXG4gKi9cbmZ1bmN0aW9uIGluaXQoKTogdm9pZFxue1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKylcbiAgICB7XG4gICAgICAgIGNvbnN0IHJvdzogbnVtYmVyW10gPSBbXTtcblxuICAgICAgICByb3RhdGlvbkNheWxleS5wdXNoKHJvdyk7XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxNjsgaisrKVxuICAgICAgICB7XG4gICAgICAgICAgICAvKiBNdWx0aXBsaWVzIHJvdGF0aW9uIG1hdHJpY2VzIGkgYW5kIGouICovXG4gICAgICAgICAgICBjb25zdCBfdXggPSBzaWdudW0oKHV4W2ldICogdXhbal0pICsgKHZ4W2ldICogdXlbal0pKTtcbiAgICAgICAgICAgIGNvbnN0IF91eSA9IHNpZ251bSgodXlbaV0gKiB1eFtqXSkgKyAodnlbaV0gKiB1eVtqXSkpO1xuICAgICAgICAgICAgY29uc3QgX3Z4ID0gc2lnbnVtKCh1eFtpXSAqIHZ4W2pdKSArICh2eFtpXSAqIHZ5W2pdKSk7XG4gICAgICAgICAgICBjb25zdCBfdnkgPSBzaWdudW0oKHV5W2ldICogdnhbal0pICsgKHZ5W2ldICogdnlbal0pKTtcblxuICAgICAgICAgICAgLyogRmluZHMgcm90YXRpb24gbWF0cml4IG1hdGNoaW5nIHRoZSBwcm9kdWN0IGFuZCBwdXNoZXMgaXQuICovXG4gICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IDE2OyBrKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHV4W2tdID09PSBfdXggJiYgdXlba10gPT09IF91eVxuICAgICAgICAgICAgICAgICAgICAgICYmIHZ4W2tdID09PSBfdnggJiYgdnlba10gPT09IF92eSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5wdXNoKGspO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspXG4gICAge1xuICAgICAgICBjb25zdCBtYXQgPSBuZXcgTWF0cml4KCk7XG5cbiAgICAgICAgbWF0LnNldCh1eFtpXSwgdXlbaV0sIHZ4W2ldLCB2eVtpXSwgMCwgMCk7XG4gICAgICAgIHJvdGF0aW9uTWF0cmljZXMucHVzaChtYXQpO1xuICAgIH1cbn1cblxuaW5pdCgpO1xuXG50eXBlIEdEOFN5bW1ldHJ5ID0gbnVtYmVyO1xuLyoqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHR5cGVkZWYge251bWJlcn0gR0Q4U3ltbWV0cnlcbiAqIEBzZWUgUElYSS5ncm91cEQ4XG4gKi9cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBkaWhlZHJhbCBncm91cCBEOCwgd2hpY2ggaXMgc2ltaWxhciB0b1xuICogW2dyb3VwIEQ0XXtAbGluayBodHRwOi8vbWF0aHdvcmxkLndvbGZyYW0uY29tL0RpaGVkcmFsR3JvdXBENC5odG1sfTtcbiAqIEQ4IGlzIHRoZSBzYW1lIGJ1dCB3aXRoIGRpYWdvbmFscywgYW5kIGl0IGlzIHVzZWQgZm9yIHRleHR1cmVcbiAqIHJvdGF0aW9ucy5cbiAqXG4gKiBUaGUgZGlyZWN0aW9ucyB0aGUgVS0gYW5kIFYtIGF4ZXMgYWZ0ZXIgcm90YXRpb25cbiAqIG9mIGFuIGFuZ2xlIG9mIGBhOiBHRDhDb25zdGFudGAgYXJlIHRoZSB2ZWN0b3JzIGAodVgoYSksIHVZKGEpKWBcbiAqIGFuZCBgKHZYKGEpLCB2WShhKSlgLiBUaGVzZSBhcmVuJ3QgbmVjZXNzYXJpbHkgdW5pdCB2ZWN0b3JzLlxuICpcbiAqICoqT3JpZ2luOioqPGJyPlxuICogIFRoaXMgaXMgdGhlIHNtYWxsIHBhcnQgb2YgZ2FtZW9mYm9tYnMuY29tIHBvcnRhbCBzeXN0ZW0uIEl0IHdvcmtzLlxuICpcbiAqIEBzZWUgUElYSS5ncm91cEQ4LkVcbiAqIEBzZWUgUElYSS5ncm91cEQ4LlNFXG4gKiBAc2VlIFBJWEkuZ3JvdXBEOC5TXG4gKiBAc2VlIFBJWEkuZ3JvdXBEOC5TV1xuICogQHNlZSBQSVhJLmdyb3VwRDguV1xuICogQHNlZSBQSVhJLmdyb3VwRDguTldcbiAqIEBzZWUgUElYSS5ncm91cEQ4Lk5cbiAqIEBzZWUgUElYSS5ncm91cEQ4Lk5FXG4gKiBAYXV0aG9yIEl2YW4gQGl2YW5wb3BlbHlzaGV2XG4gKiBAbmFtZXNwYWNlIFBJWEkuZ3JvdXBEOFxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNvbnN0IGdyb3VwRDggPSB7XG4gICAgLyoqXG4gICAgICogfCBSb3RhdGlvbiB8IERpcmVjdGlvbiB8XG4gICAgICogfC0tLS0tLS0tLS18LS0tLS0tLS0tLS18XG4gICAgICogfCAwXHUwMEIwICAgICAgIHwgRWFzdCAgICAgIHxcbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBQSVhJLmdyb3VwRDhcbiAgICAgKiBAY29uc3RhbnQge1BJWEkuR0Q4U3ltbWV0cnl9XG4gICAgICovXG4gICAgRTogMCxcblxuICAgIC8qKlxuICAgICAqIHwgUm90YXRpb24gfCBEaXJlY3Rpb24gfFxuICAgICAqIHwtLS0tLS0tLS0tfC0tLS0tLS0tLS0tfFxuICAgICAqIHwgNDVcdTAwQjBcdTIxQkIgICAgIHwgU291dGhlYXN0IHxcbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBQSVhJLmdyb3VwRDhcbiAgICAgKiBAY29uc3RhbnQge1BJWEkuR0Q4U3ltbWV0cnl9XG4gICAgICovXG4gICAgU0U6IDEsXG5cbiAgICAvKipcbiAgICAgKiB8IFJvdGF0aW9uIHwgRGlyZWN0aW9uIHxcbiAgICAgKiB8LS0tLS0tLS0tLXwtLS0tLS0tLS0tLXxcbiAgICAgKiB8IDkwXHUwMEIwXHUyMUJCICAgICB8IFNvdXRoICAgICB8XG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQGNvbnN0YW50IHtQSVhJLkdEOFN5bW1ldHJ5fVxuICAgICAqL1xuICAgIFM6IDIsXG5cbiAgICAvKipcbiAgICAgKiB8IFJvdGF0aW9uIHwgRGlyZWN0aW9uIHxcbiAgICAgKiB8LS0tLS0tLS0tLXwtLS0tLS0tLS0tLXxcbiAgICAgKiB8IDEzNVx1MDBCMFx1MjFCQiAgICB8IFNvdXRod2VzdCB8XG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQGNvbnN0YW50IHtQSVhJLkdEOFN5bW1ldHJ5fVxuICAgICAqL1xuICAgIFNXOiAzLFxuXG4gICAgLyoqXG4gICAgICogfCBSb3RhdGlvbiB8IERpcmVjdGlvbiB8XG4gICAgICogfC0tLS0tLS0tLS18LS0tLS0tLS0tLS18XG4gICAgICogfCAxODBcdTAwQjAgICAgIHwgV2VzdCAgICAgIHxcbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBQSVhJLmdyb3VwRDhcbiAgICAgKiBAY29uc3RhbnQge1BJWEkuR0Q4U3ltbWV0cnl9XG4gICAgICovXG4gICAgVzogNCxcblxuICAgIC8qKlxuICAgICAqIHwgUm90YXRpb24gICAgfCBEaXJlY3Rpb24gICAgfFxuICAgICAqIHwtLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tfFxuICAgICAqIHwgLTEzNVx1MDBCMC8yMjVcdTAwQjBcdTIxQkIgfCBOb3J0aHdlc3QgICAgfFxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIFBJWEkuZ3JvdXBEOFxuICAgICAqIEBjb25zdGFudCB7UElYSS5HRDhTeW1tZXRyeX1cbiAgICAgKi9cbiAgICBOVzogNSxcblxuICAgIC8qKlxuICAgICAqIHwgUm90YXRpb24gICAgfCBEaXJlY3Rpb24gICAgfFxuICAgICAqIHwtLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tfFxuICAgICAqIHwgLTkwXHUwMEIwLzI3MFx1MDBCMFx1MjFCQiAgfCBOb3J0aCAgICAgICAgfFxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIFBJWEkuZ3JvdXBEOFxuICAgICAqIEBjb25zdGFudCB7UElYSS5HRDhTeW1tZXRyeX1cbiAgICAgKi9cbiAgICBOOiA2LFxuXG4gICAgLyoqXG4gICAgICogfCBSb3RhdGlvbiAgICB8IERpcmVjdGlvbiAgICB8XG4gICAgICogfC0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS18XG4gICAgICogfCAtNDVcdTAwQjAvMzE1XHUwMEIwXHUyMUJCICB8IE5vcnRoZWFzdCAgICB8XG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQGNvbnN0YW50IHtQSVhJLkdEOFN5bW1ldHJ5fVxuICAgICAqL1xuICAgIE5FOiA3LFxuXG4gICAgLyoqXG4gICAgICogUmVmbGVjdGlvbiBhYm91dCBZLWF4aXMuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQGNvbnN0YW50IHtQSVhJLkdEOFN5bW1ldHJ5fVxuICAgICAqL1xuICAgIE1JUlJPUl9WRVJUSUNBTDogOCxcblxuICAgIC8qKlxuICAgICAqIFJlZmxlY3Rpb24gYWJvdXQgdGhlIG1haW4gZGlhZ29uYWwuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQGNvbnN0YW50IHtQSVhJLkdEOFN5bW1ldHJ5fVxuICAgICAqL1xuICAgIE1BSU5fRElBR09OQUw6IDEwLFxuXG4gICAgLyoqXG4gICAgICogUmVmbGVjdGlvbiBhYm91dCBYLWF4aXMuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQGNvbnN0YW50IHtQSVhJLkdEOFN5bW1ldHJ5fVxuICAgICAqL1xuICAgIE1JUlJPUl9IT1JJWk9OVEFMOiAxMixcblxuICAgIC8qKlxuICAgICAqIFJlZmxlY3Rpb24gYWJvdXQgcmV2ZXJzZSBkaWFnb25hbC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBQSVhJLmdyb3VwRDhcbiAgICAgKiBAY29uc3RhbnQge1BJWEkuR0Q4U3ltbWV0cnl9XG4gICAgICovXG4gICAgUkVWRVJTRV9ESUFHT05BTDogMTQsXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQHBhcmFtIHtQSVhJLkdEOFN5bW1ldHJ5fSBpbmQgLSBzcHJpdGUgcm90YXRpb24gYW5nbGUuXG4gICAgICogQHJldHVybiB7UElYSS5HRDhTeW1tZXRyeX0gVGhlIFgtY29tcG9uZW50IG9mIHRoZSBVLWF4aXNcbiAgICAgKiAgICBhZnRlciByb3RhdGluZyB0aGUgYXhlcy5cbiAgICAgKi9cbiAgICB1WDogKGluZDogR0Q4U3ltbWV0cnkpOiBHRDhTeW1tZXRyeSA9PiB1eFtpbmRdLFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFBJWEkuZ3JvdXBEOFxuICAgICAqIEBwYXJhbSB7UElYSS5HRDhTeW1tZXRyeX0gaW5kIC0gc3ByaXRlIHJvdGF0aW9uIGFuZ2xlLlxuICAgICAqIEByZXR1cm4ge1BJWEkuR0Q4U3ltbWV0cnl9IFRoZSBZLWNvbXBvbmVudCBvZiB0aGUgVS1heGlzXG4gICAgICogICAgYWZ0ZXIgcm90YXRpbmcgdGhlIGF4ZXMuXG4gICAgICovXG4gICAgdVk6IChpbmQ6IEdEOFN5bW1ldHJ5KTogR0Q4U3ltbWV0cnkgPT4gdXlbaW5kXSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBQSVhJLmdyb3VwRDhcbiAgICAgKiBAcGFyYW0ge1BJWEkuR0Q4U3ltbWV0cnl9IGluZCAtIHNwcml0ZSByb3RhdGlvbiBhbmdsZS5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdEOFN5bW1ldHJ5fSBUaGUgWC1jb21wb25lbnQgb2YgdGhlIFYtYXhpc1xuICAgICAqICAgIGFmdGVyIHJvdGF0aW5nIHRoZSBheGVzLlxuICAgICAqL1xuICAgIHZYOiAoaW5kOiBHRDhTeW1tZXRyeSk6IEdEOFN5bW1ldHJ5ID0+IHZ4W2luZF0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQHBhcmFtIHtQSVhJLkdEOFN5bW1ldHJ5fSBpbmQgLSBzcHJpdGUgcm90YXRpb24gYW5nbGUuXG4gICAgICogQHJldHVybiB7UElYSS5HRDhTeW1tZXRyeX0gVGhlIFktY29tcG9uZW50IG9mIHRoZSBWLWF4aXNcbiAgICAgKiAgICBhZnRlciByb3RhdGluZyB0aGUgYXhlcy5cbiAgICAgKi9cbiAgICB2WTogKGluZDogR0Q4U3ltbWV0cnkpOiBHRDhTeW1tZXRyeSA9PiB2eVtpbmRdLFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFBJWEkuZ3JvdXBEOFxuICAgICAqIEBwYXJhbSB7UElYSS5HRDhTeW1tZXRyeX0gcm90YXRpb24gLSBzeW1tZXRyeSB3aG9zZSBvcHBvc2l0ZVxuICAgICAqICAgaXMgbmVlZGVkLiBPbmx5IHJvdGF0aW9ucyBoYXZlIG9wcG9zaXRlIHN5bW1ldHJpZXMgd2hpbGVcbiAgICAgKiAgIHJlZmxlY3Rpb25zIGRvbid0LlxuICAgICAqIEByZXR1cm4ge1BJWEkuR0Q4U3ltbWV0cnl9IFRoZSBvcHBvc2l0ZSBzeW1tZXRyeSBvZiBgcm90YXRpb25gXG4gICAgICovXG4gICAgaW52OiAocm90YXRpb246IEdEOFN5bW1ldHJ5KTogR0Q4U3ltbWV0cnkgPT5cbiAgICB7XG4gICAgICAgIGlmIChyb3RhdGlvbiAmIDgpLy8gdHJ1ZSBvbmx5IGlmIGJldHdlZW4gOCAmIDE1IChyZWZsZWN0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uICYgMTU7Ly8gb3Igcm90YXRpb24gJSAxNlxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICgtcm90YXRpb24pICYgNzsvLyBvciAoOCAtIHJvdGF0aW9uKSAlIDhcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29tcG9zZXMgdGhlIHR3byBEOCBvcGVyYXRpb25zLlxuICAgICAqXG4gICAgICogVGFraW5nIGBeYCBhcyByZWZsZWN0aW9uOlxuICAgICAqXG4gICAgICogfCAgICAgICB8IEU9MCB8IFM9MiB8IFc9NCB8IE49NiB8IEVePTggfCBTXj0xMCB8IFdePTEyIHwgTl49MTQgfFxuICAgICAqIHwtLS0tLS0tfC0tLS0tfC0tLS0tfC0tLS0tfC0tLS0tfC0tLS0tLXwtLS0tLS0tfC0tLS0tLS18LS0tLS0tLXxcbiAgICAgKiB8IEU9MCAgIHwgRSAgIHwgUyAgIHwgVyAgIHwgTiAgIHwgRV4gICB8IFNeICAgIHwgV14gICAgfCBOXiAgICB8XG4gICAgICogfCBTPTIgICB8IFMgICB8IFcgICB8IE4gICB8IEUgICB8IFNeICAgfCBXXiAgICB8IE5eICAgIHwgRV4gICAgfFxuICAgICAqIHwgVz00ICAgfCBXICAgfCBOICAgfCBFICAgfCBTICAgfCBXXiAgIHwgTl4gICAgfCBFXiAgICB8IFNeICAgIHxcbiAgICAgKiB8IE49NiAgIHwgTiAgIHwgRSAgIHwgUyAgIHwgVyAgIHwgTl4gICB8IEVeICAgIHwgU14gICAgfCBXXiAgICB8XG4gICAgICogfCBFXj04ICB8IEVeICB8IE5eICB8IFdeICB8IFNeICB8IEUgICAgfCBOICAgICB8IFcgICAgIHwgUyAgICAgfFxuICAgICAqIHwgU149MTAgfCBTXiAgfCBFXiAgfCBOXiAgfCBXXiAgfCBTICAgIHwgRSAgICAgfCBOICAgICB8IFcgICAgIHxcbiAgICAgKiB8IFdePTEyIHwgV14gIHwgU14gIHwgRV4gIHwgTl4gIHwgVyAgICB8IFMgICAgIHwgRSAgICAgfCBOICAgICB8XG4gICAgICogfCBOXj0xNCB8IE5eICB8IFdeICB8IFNeICB8IEVeICB8IE4gICAgfCBXICAgICB8IFMgICAgIHwgRSAgICAgfFxuICAgICAqXG4gICAgICogW1RoaXMgaXMgYSBDYXlsZXkgdGFibGVde0BsaW5rIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NheWxleV90YWJsZX1cbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQHBhcmFtIHtQSVhJLkdEOFN5bW1ldHJ5fSByb3RhdGlvblNlY29uZCAtIFNlY29uZCBvcGVyYXRpb24sIHdoaWNoXG4gICAgICogICBpcyB0aGUgcm93IGluIHRoZSBhYm92ZSBjYXlsZXkgdGFibGUuXG4gICAgICogQHBhcmFtIHtQSVhJLkdEOFN5bW1ldHJ5fSByb3RhdGlvbkZpcnN0IC0gRmlyc3Qgb3BlcmF0aW9uLCB3aGljaFxuICAgICAqICAgaXMgdGhlIGNvbHVtbiBpbiB0aGUgYWJvdmUgY2F5bGV5IHRhYmxlLlxuICAgICAqIEByZXR1cm4ge1BJWEkuR0Q4U3ltbWV0cnl9IENvbXBvc2VkIG9wZXJhdGlvblxuICAgICAqL1xuICAgIGFkZDogKHJvdGF0aW9uU2Vjb25kOiBHRDhTeW1tZXRyeSwgcm90YXRpb25GaXJzdDogR0Q4U3ltbWV0cnkpOiBHRDhTeW1tZXRyeSA9PiAoXG4gICAgICAgIHJvdGF0aW9uQ2F5bGV5W3JvdGF0aW9uU2Vjb25kXVtyb3RhdGlvbkZpcnN0XVxuICAgICksXG5cbiAgICAvKipcbiAgICAgKiBSZXZlcnNlIG9mIGBhZGRgLlxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIFBJWEkuZ3JvdXBEOFxuICAgICAqIEBwYXJhbSB7UElYSS5HRDhTeW1tZXRyeX0gcm90YXRpb25TZWNvbmQgLSBTZWNvbmQgb3BlcmF0aW9uXG4gICAgICogQHBhcmFtIHtQSVhJLkdEOFN5bW1ldHJ5fSByb3RhdGlvbkZpcnN0IC0gRmlyc3Qgb3BlcmF0aW9uXG4gICAgICogQHJldHVybiB7UElYSS5HRDhTeW1tZXRyeX0gUmVzdWx0XG4gICAgICovXG4gICAgc3ViOiAocm90YXRpb25TZWNvbmQ6IEdEOFN5bW1ldHJ5LCByb3RhdGlvbkZpcnN0OiBHRDhTeW1tZXRyeSk6IEdEOFN5bW1ldHJ5ID0+IChcbiAgICAgICAgcm90YXRpb25DYXlsZXlbcm90YXRpb25TZWNvbmRdW2dyb3VwRDguaW52KHJvdGF0aW9uRmlyc3QpXVxuICAgICksXG5cbiAgICAvKipcbiAgICAgKiBBZGRzIDE4MCBkZWdyZWVzIHRvIHJvdGF0aW9uLCB3aGljaCBpcyBhIGNvbW11dGF0aXZlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIFBJWEkuZ3JvdXBEOFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiAtIFRoZSBudW1iZXIgdG8gcm90YXRlLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJvdGF0ZWQgbnVtYmVyXG4gICAgICovXG4gICAgcm90YXRlMTgwOiAocm90YXRpb246IG51bWJlcik6IG51bWJlciA9PiByb3RhdGlvbiBeIDQsXG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIHJvdGF0aW9uIGFuZ2xlIGlzIHZlcnRpY2FsLCBpLmUuIHNvdXRoXG4gICAgICogb3Igbm9ydGguIEl0IGRvZXNuJ3Qgd29yayBmb3IgcmVmbGVjdGlvbnMuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQHBhcmFtIHtQSVhJLkdEOFN5bW1ldHJ5fSByb3RhdGlvbiAtIFRoZSBudW1iZXIgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBkaXJlY3Rpb24gaXMgdmVydGljYWxcbiAgICAgKi9cbiAgICBpc1ZlcnRpY2FsOiAocm90YXRpb246IEdEOFN5bW1ldHJ5KTogYm9vbGVhbiA9PiAocm90YXRpb24gJiAzKSA9PT0gMiwgLy8gcm90YXRpb24gJSA0ID09PSAyXG5cbiAgICAvKipcbiAgICAgKiBBcHByb3hpbWF0ZXMgdGhlIHZlY3RvciBgVihkeCxkeSlgIGludG8gb25lIG9mIHRoZVxuICAgICAqIGVpZ2h0IGRpcmVjdGlvbnMgcHJvdmlkZWQgYnkgYGdyb3VwRDhgLlxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIFBJWEkuZ3JvdXBEOFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkeCAtIFgtY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZHkgLSBZLWNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXG4gICAgICogQHJldHVybiB7UElYSS5HRDhTeW1tZXRyeX0gQXBwcm94aW1hdGlvbiBvZiB0aGUgdmVjdG9yIGludG9cbiAgICAgKiAgb25lIG9mIHRoZSBlaWdodCBzeW1tZXRyaWVzLlxuICAgICAqL1xuICAgIGJ5RGlyZWN0aW9uOiAoZHg6IG51bWJlciwgZHk6IG51bWJlcik6IEdEOFN5bW1ldHJ5ID0+XG4gICAge1xuICAgICAgICBpZiAoTWF0aC5hYnMoZHgpICogMiA8PSBNYXRoLmFicyhkeSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChkeSA+PSAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBncm91cEQ4LlM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBncm91cEQ4Lk47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoTWF0aC5hYnMoZHkpICogMiA8PSBNYXRoLmFicyhkeCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChkeCA+IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwRDguRTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwRDguVztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkeSA+IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChkeCA+IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwRDguU0U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBncm91cEQ4LlNXO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGR4ID4gMClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGdyb3VwRDguTkU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ3JvdXBEOC5OVztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGVscHMgc3ByaXRlIHRvIGNvbXBlbnNhdGUgdGV4dHVyZSBwYWNrZXIgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5ncm91cEQ4XG4gICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gbWF0cml4IC0gc3ByaXRlIHdvcmxkIG1hdHJpeFxuICAgICAqIEBwYXJhbSB7UElYSS5HRDhTeW1tZXRyeX0gcm90YXRpb24gLSBUaGUgcm90YXRpb24gZmFjdG9yIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdHggLSBzcHJpdGUgYW5jaG9yaW5nXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHR5IC0gc3ByaXRlIGFuY2hvcmluZ1xuICAgICAqL1xuICAgIG1hdHJpeEFwcGVuZFJvdGF0aW9uSW52OiAobWF0cml4OiBNYXRyaXgsIHJvdGF0aW9uOiBHRDhTeW1tZXRyeSwgdHggPSAwLCB0eSA9IDApOiB2b2lkID0+XG4gICAge1xuICAgICAgICAvLyBQYWNrZXIgdXNlZCBcInJvdGF0aW9uXCIsIHdlIHVzZSBcImludihyb3RhdGlvbilcIlxuICAgICAgICBjb25zdCBtYXQ6IE1hdHJpeCA9IHJvdGF0aW9uTWF0cmljZXNbZ3JvdXBEOC5pbnYocm90YXRpb24pXTtcblxuICAgICAgICBtYXQudHggPSB0eDtcbiAgICAgICAgbWF0LnR5ID0gdHk7XG4gICAgICAgIG1hdHJpeC5hcHBlbmQobWF0KTtcbiAgICB9LFxufTtcbiIsICJpbXBvcnQgeyBPYnNlcnZhYmxlUG9pbnQgfSBmcm9tICcuL09ic2VydmFibGVQb2ludCc7XG5pbXBvcnQgeyBNYXRyaXggfSBmcm9tICcuL01hdHJpeCc7XG5cbi8qKlxuICogVHJhbnNmb3JtIHRoYXQgdGFrZXMgY2FyZSBhYm91dCBpdHMgdmVyc2lvbnNcbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2Zvcm1cbntcbiAgICAvKipcbiAgICAgKiBBIGRlZmF1bHQgKGlkZW50aXR5KSB0cmFuc2Zvcm1cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAY29uc3RhbnRcbiAgICAgKiBAbWVtYmVyIHtQSVhJLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IElERU5USVRZID0gbmV3IFRyYW5zZm9ybSgpO1xuXG4gICAgcHVibGljIHdvcmxkVHJhbnNmb3JtOiBNYXRyaXg7XG4gICAgcHVibGljIGxvY2FsVHJhbnNmb3JtOiBNYXRyaXg7XG4gICAgcHVibGljIHBvc2l0aW9uOiBPYnNlcnZhYmxlUG9pbnQ7XG4gICAgcHVibGljIHNjYWxlOiBPYnNlcnZhYmxlUG9pbnQ7XG4gICAgcHVibGljIHBpdm90OiBPYnNlcnZhYmxlUG9pbnQ7XG4gICAgcHVibGljIHNrZXc6IE9ic2VydmFibGVQb2ludDtcbiAgICBwdWJsaWMgX3BhcmVudElEOiBudW1iZXI7XG4gICAgX3dvcmxkSUQ6IG51bWJlcjtcblxuICAgIHByb3RlY3RlZCBfcm90YXRpb246IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2N4OiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9zeDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfY3k6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX3N5OiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9sb2NhbElEOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9jdXJyZW50TG9jYWxJRDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB3b3JsZCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuTWF0cml4fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBNYXRyaXgoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGxvY2FsIHRyYW5zZm9ybWF0aW9uIG1hdHJpeC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5NYXRyaXh9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxvY2FsVHJhbnNmb3JtID0gbmV3IE1hdHJpeCgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29vcmRpbmF0ZSBvZiB0aGUgb2JqZWN0IHJlbGF0aXZlIHRvIHRoZSBsb2NhbCBjb29yZGluYXRlcyBvZiB0aGUgcGFyZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLk9ic2VydmFibGVQb2ludH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgT2JzZXJ2YWJsZVBvaW50KHRoaXMub25DaGFuZ2UsIHRoaXMsIDAsIDApO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2NhbGUgZmFjdG9yIG9mIHRoZSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuT2JzZXJ2YWJsZVBvaW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zY2FsZSA9IG5ldyBPYnNlcnZhYmxlUG9pbnQodGhpcy5vbkNoYW5nZSwgdGhpcywgMSwgMSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBwaXZvdCBwb2ludCBvZiB0aGUgZGlzcGxheU9iamVjdCB0aGF0IGl0IHJvdGF0ZXMgYXJvdW5kLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLk9ic2VydmFibGVQb2ludH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGl2b3QgPSBuZXcgT2JzZXJ2YWJsZVBvaW50KHRoaXMub25DaGFuZ2UsIHRoaXMsIDAsIDApO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2tldyBhbW91bnQsIG9uIHRoZSB4IGFuZCB5IGF4aXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuT2JzZXJ2YWJsZVBvaW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5za2V3ID0gbmV3IE9ic2VydmFibGVQb2ludCh0aGlzLnVwZGF0ZVNrZXcsIHRoaXMsIDAsIDApO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcm90YXRpb24gYW1vdW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3JvdGF0aW9uID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFgtY29vcmRpbmF0ZSB2YWx1ZSBvZiB0aGUgbm9ybWFsaXplZCBsb2NhbCBYIGF4aXMsXG4gICAgICAgICAqIHRoZSBmaXJzdCBjb2x1bW4gb2YgdGhlIGxvY2FsIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCB3aXRob3V0IGEgc2NhbGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fY3ggPSAxO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgWS1jb29yZGluYXRlIHZhbHVlIG9mIHRoZSBub3JtYWxpemVkIGxvY2FsIFggYXhpcyxcbiAgICAgICAgICogdGhlIGZpcnN0IGNvbHVtbiBvZiB0aGUgbG9jYWwgdHJhbnNmb3JtYXRpb24gbWF0cml4IHdpdGhvdXQgYSBzY2FsZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9zeCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBYLWNvb3JkaW5hdGUgdmFsdWUgb2YgdGhlIG5vcm1hbGl6ZWQgbG9jYWwgWSBheGlzLFxuICAgICAgICAgKiB0aGUgc2Vjb25kIGNvbHVtbiBvZiB0aGUgbG9jYWwgdHJhbnNmb3JtYXRpb24gbWF0cml4IHdpdGhvdXQgYSBzY2FsZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9jeSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBZLWNvb3JkaW5hdGUgdmFsdWUgb2YgdGhlIG5vcm1hbGl6ZWQgbG9jYWwgWSBheGlzLFxuICAgICAgICAgKiB0aGUgc2Vjb25kIGNvbHVtbiBvZiB0aGUgbG9jYWwgdHJhbnNmb3JtYXRpb24gbWF0cml4IHdpdGhvdXQgYSBzY2FsZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9zeSA9IDE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBsb2NhbGx5IHVuaXF1ZSBJRCBvZiB0aGUgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2xvY2FsSUQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbG9jYWxseSB1bmlxdWUgSUQgb2YgdGhlIGxvY2FsIHRyYW5zZm9ybVxuICAgICAgICAgKiB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgY3VycmVudCBsb2NhbCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fY3VycmVudExvY2FsSUQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbG9jYWxseSB1bmlxdWUgSUQgb2YgdGhlIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl93b3JsZElEID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGxvY2FsbHkgdW5pcXVlIElEIG9mIHRoZSBwYXJlbnQncyB3b3JsZCB0cmFuc2Zvcm1cbiAgICAgICAgICogdXNlZCB0byBjYWxjdWxhdGUgdGhlIGN1cnJlbnQgd29ybGQgdHJhbnNmb3JtYXRpb24gbWF0cml4LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3BhcmVudElEID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiBhIHZhbHVlIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIG9uQ2hhbmdlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX2xvY2FsSUQrKztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgc2tldyBvciB0aGUgcm90YXRpb24gY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdXBkYXRlU2tldygpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl9jeCA9IE1hdGguY29zKHRoaXMuX3JvdGF0aW9uICsgdGhpcy5za2V3LnkpO1xuICAgICAgICB0aGlzLl9zeCA9IE1hdGguc2luKHRoaXMuX3JvdGF0aW9uICsgdGhpcy5za2V3LnkpO1xuICAgICAgICB0aGlzLl9jeSA9IC1NYXRoLnNpbih0aGlzLl9yb3RhdGlvbiAtIHRoaXMuc2tldy54KTsgLy8gY29zLCBhZGRlZCBQSS8yXG4gICAgICAgIHRoaXMuX3N5ID0gTWF0aC5jb3ModGhpcy5fcm90YXRpb24gLSB0aGlzLnNrZXcueCk7IC8vIHNpbiwgYWRkZWQgUEkvMlxuXG4gICAgICAgIHRoaXMuX2xvY2FsSUQrKztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBsb2NhbCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguXG4gICAgICovXG4gICAgdXBkYXRlTG9jYWxUcmFuc2Zvcm0oKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbHQgPSB0aGlzLmxvY2FsVHJhbnNmb3JtO1xuXG4gICAgICAgIGlmICh0aGlzLl9sb2NhbElEICE9PSB0aGlzLl9jdXJyZW50TG9jYWxJRClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBtYXRyaXggdmFsdWVzIG9mIHRoZSBkaXNwbGF5b2JqZWN0IGJhc2VkIG9uIGl0cyB0cmFuc2Zvcm0gcHJvcGVydGllcy4uXG4gICAgICAgICAgICBsdC5hID0gdGhpcy5fY3ggKiB0aGlzLnNjYWxlLng7XG4gICAgICAgICAgICBsdC5iID0gdGhpcy5fc3ggKiB0aGlzLnNjYWxlLng7XG4gICAgICAgICAgICBsdC5jID0gdGhpcy5fY3kgKiB0aGlzLnNjYWxlLnk7XG4gICAgICAgICAgICBsdC5kID0gdGhpcy5fc3kgKiB0aGlzLnNjYWxlLnk7XG5cbiAgICAgICAgICAgIGx0LnR4ID0gdGhpcy5wb3NpdGlvbi54IC0gKCh0aGlzLnBpdm90LnggKiBsdC5hKSArICh0aGlzLnBpdm90LnkgKiBsdC5jKSk7XG4gICAgICAgICAgICBsdC50eSA9IHRoaXMucG9zaXRpb24ueSAtICgodGhpcy5waXZvdC54ICogbHQuYikgKyAodGhpcy5waXZvdC55ICogbHQuZCkpO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudExvY2FsSUQgPSB0aGlzLl9sb2NhbElEO1xuXG4gICAgICAgICAgICAvLyBmb3JjZSBhbiB1cGRhdGUuLlxuICAgICAgICAgICAgdGhpcy5fcGFyZW50SUQgPSAtMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGxvY2FsIGFuZCB0aGUgd29ybGQgdHJhbnNmb3JtYXRpb24gbWF0cmljZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuVHJhbnNmb3JtfSBwYXJlbnRUcmFuc2Zvcm0gLSBUaGUgcGFyZW50IHRyYW5zZm9ybVxuICAgICAqL1xuICAgIHVwZGF0ZVRyYW5zZm9ybShwYXJlbnRUcmFuc2Zvcm06IFRyYW5zZm9ybSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGx0ID0gdGhpcy5sb2NhbFRyYW5zZm9ybTtcblxuICAgICAgICBpZiAodGhpcy5fbG9jYWxJRCAhPT0gdGhpcy5fY3VycmVudExvY2FsSUQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgbWF0cml4IHZhbHVlcyBvZiB0aGUgZGlzcGxheW9iamVjdCBiYXNlZCBvbiBpdHMgdHJhbnNmb3JtIHByb3BlcnRpZXMuLlxuICAgICAgICAgICAgbHQuYSA9IHRoaXMuX2N4ICogdGhpcy5zY2FsZS54O1xuICAgICAgICAgICAgbHQuYiA9IHRoaXMuX3N4ICogdGhpcy5zY2FsZS54O1xuICAgICAgICAgICAgbHQuYyA9IHRoaXMuX2N5ICogdGhpcy5zY2FsZS55O1xuICAgICAgICAgICAgbHQuZCA9IHRoaXMuX3N5ICogdGhpcy5zY2FsZS55O1xuXG4gICAgICAgICAgICBsdC50eCA9IHRoaXMucG9zaXRpb24ueCAtICgodGhpcy5waXZvdC54ICogbHQuYSkgKyAodGhpcy5waXZvdC55ICogbHQuYykpO1xuICAgICAgICAgICAgbHQudHkgPSB0aGlzLnBvc2l0aW9uLnkgLSAoKHRoaXMucGl2b3QueCAqIGx0LmIpICsgKHRoaXMucGl2b3QueSAqIGx0LmQpKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRMb2NhbElEID0gdGhpcy5fbG9jYWxJRDtcblxuICAgICAgICAgICAgLy8gZm9yY2UgYW4gdXBkYXRlLi5cbiAgICAgICAgICAgIHRoaXMuX3BhcmVudElEID0gLTE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fcGFyZW50SUQgIT09IHBhcmVudFRyYW5zZm9ybS5fd29ybGRJRClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gY29uY2F0IHRoZSBwYXJlbnQgbWF0cml4IHdpdGggdGhlIG9iamVjdHMgdHJhbnNmb3JtLlxuICAgICAgICAgICAgY29uc3QgcHQgPSBwYXJlbnRUcmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm07XG4gICAgICAgICAgICBjb25zdCB3dCA9IHRoaXMud29ybGRUcmFuc2Zvcm07XG5cbiAgICAgICAgICAgIHd0LmEgPSAobHQuYSAqIHB0LmEpICsgKGx0LmIgKiBwdC5jKTtcbiAgICAgICAgICAgIHd0LmIgPSAobHQuYSAqIHB0LmIpICsgKGx0LmIgKiBwdC5kKTtcbiAgICAgICAgICAgIHd0LmMgPSAobHQuYyAqIHB0LmEpICsgKGx0LmQgKiBwdC5jKTtcbiAgICAgICAgICAgIHd0LmQgPSAobHQuYyAqIHB0LmIpICsgKGx0LmQgKiBwdC5kKTtcbiAgICAgICAgICAgIHd0LnR4ID0gKGx0LnR4ICogcHQuYSkgKyAobHQudHkgKiBwdC5jKSArIHB0LnR4O1xuICAgICAgICAgICAgd3QudHkgPSAobHQudHggKiBwdC5iKSArIChsdC50eSAqIHB0LmQpICsgcHQudHk7XG5cbiAgICAgICAgICAgIHRoaXMuX3BhcmVudElEID0gcGFyZW50VHJhbnNmb3JtLl93b3JsZElEO1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGlkIG9mIHRoZSB0cmFuc2Zvcm0uLlxuICAgICAgICAgICAgdGhpcy5fd29ybGRJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVjb21wb3NlcyBhIG1hdHJpeCBhbmQgc2V0cyB0aGUgdHJhbnNmb3JtcyBwcm9wZXJ0aWVzIGJhc2VkIG9uIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gbWF0cml4IC0gVGhlIG1hdHJpeCB0byBkZWNvbXBvc2VcbiAgICAgKi9cbiAgICBzZXRGcm9tTWF0cml4KG1hdHJpeDogTWF0cml4KTogdm9pZFxuICAgIHtcbiAgICAgICAgbWF0cml4LmRlY29tcG9zZSh0aGlzKTtcbiAgICAgICAgdGhpcy5fbG9jYWxJRCsrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSByb3RhdGlvbiBvZiB0aGUgb2JqZWN0IGluIHJhZGlhbnMuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHJvdGF0aW9uKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JvdGF0aW9uO1xuICAgIH1cblxuICAgIHNldCByb3RhdGlvbih2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX3JvdGF0aW9uICE9PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fcm90YXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2tldygpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qKlxuICogTWF0aCBjbGFzc2VzIGFuZCB1dGlsaXRpZXMgbWl4ZWQgaW50byBQSVhJIG5hbWVzcGFjZS5cbiAqXG4gKiBAbGVuZHMgUElYSVxuICovXG5cbmltcG9ydCB7IENpcmNsZSB9IGZyb20gJy4vc2hhcGVzL0NpcmNsZSc7XG5pbXBvcnQgeyBFbGxpcHNlIH0gZnJvbSAnLi9zaGFwZXMvRWxsaXBzZSc7XG5pbXBvcnQgeyBQb2x5Z29uIH0gZnJvbSAnLi9zaGFwZXMvUG9seWdvbic7XG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tICcuL3NoYXBlcy9SZWN0YW5nbGUnO1xuaW1wb3J0IHsgUm91bmRlZFJlY3RhbmdsZSB9IGZyb20gJy4vc2hhcGVzL1JvdW5kZWRSZWN0YW5nbGUnO1xuXG5leHBvcnQgKiBmcm9tICcuL0lQb2ludERhdGEnO1xuZXhwb3J0ICogZnJvbSAnLi9JUG9pbnQnO1xuZXhwb3J0ICogZnJvbSAnLi9Qb2ludCc7XG5leHBvcnQgKiBmcm9tICcuL09ic2VydmFibGVQb2ludCc7XG5leHBvcnQgKiBmcm9tICcuL01hdHJpeCc7XG5leHBvcnQgKiBmcm9tICcuL2dyb3VwRDgnO1xuZXhwb3J0ICogZnJvbSAnLi9UcmFuc2Zvcm0nO1xuXG5leHBvcnQgeyBDaXJjbGUgfTtcbmV4cG9ydCB7IEVsbGlwc2UgfTtcbmV4cG9ydCB7IFBvbHlnb24gfTtcbmV4cG9ydCB7IFJlY3RhbmdsZSB9O1xuZXhwb3J0IHsgUm91bmRlZFJlY3RhbmdsZSB9O1xuXG5leHBvcnQgKiBmcm9tICcuL2NvbnN0JztcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gQ29tcGxleCBzaGFwZSB0eXBlXG4gKlxuICovXG5leHBvcnQgdHlwZSBJU2hhcGUgPSBDaXJjbGUgfCBFbGxpcHNlIHwgUG9seWdvbiB8IFJlY3RhbmdsZSB8IFJvdW5kZWRSZWN0YW5nbGU7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNpemVcbntcbiAgICB3aWR0aDogbnVtYmVyO1xuICAgIGhlaWdodDogbnVtYmVyO1xufVxuIiwgImltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSAnQHBpeGkvc2V0dGluZ3MnO1xuXG4vKipcbiAqIFNldHMgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBjb250YWluZXIgcHJvcGVydHkgJ3NvcnRhYmxlQ2hpbGRyZW4nLlxuICogSWYgc2V0IHRvIHRydWUsIHRoZSBjb250YWluZXIgd2lsbCBzb3J0IGl0cyBjaGlsZHJlbiBieSB6SW5kZXggdmFsdWVcbiAqIHdoZW4gdXBkYXRlVHJhbnNmb3JtKCkgaXMgY2FsbGVkLCBvciBtYW51YWxseSBpZiBzb3J0Q2hpbGRyZW4oKSBpcyBjYWxsZWQuXG4gKlxuICogVGhpcyBhY3R1YWxseSBjaGFuZ2VzIHRoZSBvcmRlciBvZiBlbGVtZW50cyBpbiB0aGUgYXJyYXksIHNvIHNob3VsZCBiZSB0cmVhdGVkXG4gKiBhcyBhIGJhc2ljIHNvbHV0aW9uIHRoYXQgaXMgbm90IHBlcmZvcm1hbnQgY29tcGFyZWQgdG8gb3RoZXIgc29sdXRpb25zLFxuICogc3VjaCBhcyBAbGluayBodHRwczovL2dpdGh1Yi5jb20vcGl4aWpzL3BpeGktZGlzcGxheVxuICpcbiAqIEFsc28gYmUgYXdhcmUgb2YgdGhhdCB0aGlzIG1heSBub3Qgd29yayBuaWNlbHkgd2l0aCB0aGUgYWRkQ2hpbGRBdCgpIGZ1bmN0aW9uLFxuICogYXMgdGhlIHpJbmRleCBzb3J0aW5nIG1heSBjYXVzZSB0aGUgY2hpbGQgdG8gYXV0b21hdGljYWxseSBzb3J0ZWQgdG8gYW5vdGhlciBwb3NpdGlvbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIFNPUlRBQkxFX0NISUxEUkVOXG4gKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAZGVmYXVsdCBmYWxzZVxuICovXG5zZXR0aW5ncy5TT1JUQUJMRV9DSElMRFJFTiA9IGZhbHNlO1xuXG5leHBvcnQgeyBzZXR0aW5ncyB9O1xuIiwgImltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG5pbXBvcnQgdHlwZSB7IElQb2ludERhdGEsIFRyYW5zZm9ybSwgTWF0cml4IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbi8qKlxuICogJ0J1aWxkZXInIHBhdHRlcm4gZm9yIGJvdW5kcyByZWN0YW5nbGVzLlxuICpcbiAqIFRoaXMgY291bGQgYmUgY2FsbGVkIGFuIEF4aXMtQWxpZ25lZCBCb3VuZGluZyBCb3guXG4gKiBJdCBpcyBub3QgYW4gYWN0dWFsIHNoYXBlLiBJdCBpcyBhIG11dGFibGUgdGhpbmc7IG5vICdFTVBUWScgb3IgdGhvc2Uga2luZCBvZiBwcm9ibGVtcy5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBCb3VuZHNcbntcbiAgICBwdWJsaWMgbWluWDogbnVtYmVyO1xuICAgIHB1YmxpYyBtaW5ZOiBudW1iZXI7XG4gICAgcHVibGljIG1heFg6IG51bWJlcjtcbiAgICBwdWJsaWMgbWF4WTogbnVtYmVyO1xuICAgIHB1YmxpYyByZWN0OiBSZWN0YW5nbGU7XG4gICAgcHVibGljIHVwZGF0ZUlEOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcigpXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblggPSBJbmZpbml0eTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblkgPSBJbmZpbml0eTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFggPSAtSW5maW5pdHk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhZID0gLUluZmluaXR5O1xuXG4gICAgICAgIHRoaXMucmVjdCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEl0IGlzIHVwZGF0ZWQgdG8gX2JvdW5kc0lEIG9mIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHRvIGtlZXAgYm91bmRzIGluIHN5bmMgd2l0aCBjb250ZW50LlxuICAgICAgICAgKiBVcGRhdGVkIGZyb20gb3V0c2lkZSwgdGh1cyBwdWJsaWMgbW9kaWZpZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cGRhdGVJRCA9IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBib3VuZHMgYXJlIGVtcHR5LlxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBlbXB0eS5cbiAgICAgKi9cbiAgICBpc0VtcHR5KCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblggPiB0aGlzLm1heFggfHwgdGhpcy5taW5ZID4gdGhpcy5tYXhZO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgYm91bmRzIGFuZCByZXNldHMuXG4gICAgICpcbiAgICAgKi9cbiAgICBjbGVhcigpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLm1pblggPSBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5taW5ZID0gSW5maW5pdHk7XG4gICAgICAgIHRoaXMubWF4WCA9IC1JbmZpbml0eTtcbiAgICAgICAgdGhpcy5tYXhZID0gLUluZmluaXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbiByZXR1cm4gUmVjdGFuZ2xlLkVNUFRZIGNvbnN0YW50LCBlaXRoZXIgY29uc3RydWN0IG5ldyByZWN0YW5nbGUsIGVpdGhlciB1c2UgeW91ciByZWN0YW5nbGVcbiAgICAgKiBJdCBpcyBub3QgZ3VhcmFudGVlZCB0aGF0IGl0IHdpbGwgcmV0dXJuIHRlbXBSZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSByZWN0IC0gdGVtcG9yYXJ5IG9iamVjdCB3aWxsIGJlIHVzZWQgaWYgQUFCQiBpcyBub3QgZW1wdHlcbiAgICAgKiBAcmV0dXJucyB7UElYSS5SZWN0YW5nbGV9IEEgcmVjdGFuZ2xlIG9mIHRoZSBib3VuZHNcbiAgICAgKi9cbiAgICBnZXRSZWN0YW5nbGUocmVjdD86IFJlY3RhbmdsZSk6IFJlY3RhbmdsZVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMubWluWCA+IHRoaXMubWF4WCB8fCB0aGlzLm1pblkgPiB0aGlzLm1heFkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBSZWN0YW5nbGUuRU1QVFk7XG4gICAgICAgIH1cblxuICAgICAgICByZWN0ID0gcmVjdCB8fCBuZXcgUmVjdGFuZ2xlKDAsIDAsIDEsIDEpO1xuXG4gICAgICAgIHJlY3QueCA9IHRoaXMubWluWDtcbiAgICAgICAgcmVjdC55ID0gdGhpcy5taW5ZO1xuICAgICAgICByZWN0LndpZHRoID0gdGhpcy5tYXhYIC0gdGhpcy5taW5YO1xuICAgICAgICByZWN0LmhlaWdodCA9IHRoaXMubWF4WSAtIHRoaXMubWluWTtcblxuICAgICAgICByZXR1cm4gcmVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBiZSBpbmxpbmVkIHdoZW4gaXRzIHBvc3NpYmxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLklQb2ludERhdGF9IHBvaW50IC0gVGhlIHBvaW50IHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRQb2ludChwb2ludDogSVBvaW50RGF0YSk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMubWluWCA9IE1hdGgubWluKHRoaXMubWluWCwgcG9pbnQueCk7XG4gICAgICAgIHRoaXMubWF4WCA9IE1hdGgubWF4KHRoaXMubWF4WCwgcG9pbnQueCk7XG4gICAgICAgIHRoaXMubWluWSA9IE1hdGgubWluKHRoaXMubWluWSwgcG9pbnQueSk7XG4gICAgICAgIHRoaXMubWF4WSA9IE1hdGgubWF4KHRoaXMubWF4WSwgcG9pbnQueSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHF1YWQsIG5vdCB0cmFuc2Zvcm1lZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHZlcnRpY2VzIC0gVGhlIHZlcnRzIHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRRdWFkKHZlcnRpY2VzOiBGbG9hdDMyQXJyYXkpOiB2b2lkXG4gICAge1xuICAgICAgICBsZXQgbWluWCA9IHRoaXMubWluWDtcbiAgICAgICAgbGV0IG1pblkgPSB0aGlzLm1pblk7XG4gICAgICAgIGxldCBtYXhYID0gdGhpcy5tYXhYO1xuICAgICAgICBsZXQgbWF4WSA9IHRoaXMubWF4WTtcblxuICAgICAgICBsZXQgeCA9IHZlcnRpY2VzWzBdO1xuICAgICAgICBsZXQgeSA9IHZlcnRpY2VzWzFdO1xuXG4gICAgICAgIG1pblggPSB4IDwgbWluWCA/IHggOiBtaW5YO1xuICAgICAgICBtaW5ZID0geSA8IG1pblkgPyB5IDogbWluWTtcbiAgICAgICAgbWF4WCA9IHggPiBtYXhYID8geCA6IG1heFg7XG4gICAgICAgIG1heFkgPSB5ID4gbWF4WSA/IHkgOiBtYXhZO1xuXG4gICAgICAgIHggPSB2ZXJ0aWNlc1syXTtcbiAgICAgICAgeSA9IHZlcnRpY2VzWzNdO1xuICAgICAgICBtaW5YID0geCA8IG1pblggPyB4IDogbWluWDtcbiAgICAgICAgbWluWSA9IHkgPCBtaW5ZID8geSA6IG1pblk7XG4gICAgICAgIG1heFggPSB4ID4gbWF4WCA/IHggOiBtYXhYO1xuICAgICAgICBtYXhZID0geSA+IG1heFkgPyB5IDogbWF4WTtcblxuICAgICAgICB4ID0gdmVydGljZXNbNF07XG4gICAgICAgIHkgPSB2ZXJ0aWNlc1s1XTtcbiAgICAgICAgbWluWCA9IHggPCBtaW5YID8geCA6IG1pblg7XG4gICAgICAgIG1pblkgPSB5IDwgbWluWSA/IHkgOiBtaW5ZO1xuICAgICAgICBtYXhYID0geCA+IG1heFggPyB4IDogbWF4WDtcbiAgICAgICAgbWF4WSA9IHkgPiBtYXhZID8geSA6IG1heFk7XG5cbiAgICAgICAgeCA9IHZlcnRpY2VzWzZdO1xuICAgICAgICB5ID0gdmVydGljZXNbN107XG4gICAgICAgIG1pblggPSB4IDwgbWluWCA/IHggOiBtaW5YO1xuICAgICAgICBtaW5ZID0geSA8IG1pblkgPyB5IDogbWluWTtcbiAgICAgICAgbWF4WCA9IHggPiBtYXhYID8geCA6IG1heFg7XG4gICAgICAgIG1heFkgPSB5ID4gbWF4WSA/IHkgOiBtYXhZO1xuXG4gICAgICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgICAgIHRoaXMubWF4WCA9IG1heFg7XG4gICAgICAgIHRoaXMubWF4WSA9IG1heFk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBzcHJpdGUgZnJhbWUsIHRyYW5zZm9ybWVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlRyYW5zZm9ybX0gdHJhbnNmb3JtIC0gdHJhbnNmb3JtIHRvIGFwcGx5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgwIC0gbGVmdCBYIG9mIGZyYW1lXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkwIC0gdG9wIFkgb2YgZnJhbWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDEgLSByaWdodCBYIG9mIGZyYW1lXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkxIC0gYm90dG9tIFkgb2YgZnJhbWVcbiAgICAgKi9cbiAgICBhZGRGcmFtZSh0cmFuc2Zvcm06IFRyYW5zZm9ybSwgeDA6IG51bWJlciwgeTA6IG51bWJlciwgeDE6IG51bWJlciwgeTE6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuYWRkRnJhbWVNYXRyaXgodHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtLCB4MCwgeTAsIHgxLCB5MSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBzcHJpdGUgZnJhbWUsIG11bHRpcGxpZWQgYnkgbWF0cml4XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuTWF0cml4fSBtYXRyaXggLSBtYXRyaXggdG8gYXBwbHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDAgLSBsZWZ0IFggb2YgZnJhbWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTAgLSB0b3AgWSBvZiBmcmFtZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MSAtIHJpZ2h0IFggb2YgZnJhbWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTEgLSBib3R0b20gWSBvZiBmcmFtZVxuICAgICAqL1xuICAgIGFkZEZyYW1lTWF0cml4KG1hdHJpeDogTWF0cml4LCB4MDogbnVtYmVyLCB5MDogbnVtYmVyLCB4MTogbnVtYmVyLCB5MTogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgYSA9IG1hdHJpeC5hO1xuICAgICAgICBjb25zdCBiID0gbWF0cml4LmI7XG4gICAgICAgIGNvbnN0IGMgPSBtYXRyaXguYztcbiAgICAgICAgY29uc3QgZCA9IG1hdHJpeC5kO1xuICAgICAgICBjb25zdCB0eCA9IG1hdHJpeC50eDtcbiAgICAgICAgY29uc3QgdHkgPSBtYXRyaXgudHk7XG5cbiAgICAgICAgbGV0IG1pblggPSB0aGlzLm1pblg7XG4gICAgICAgIGxldCBtaW5ZID0gdGhpcy5taW5ZO1xuICAgICAgICBsZXQgbWF4WCA9IHRoaXMubWF4WDtcbiAgICAgICAgbGV0IG1heFkgPSB0aGlzLm1heFk7XG5cbiAgICAgICAgbGV0IHggPSAoYSAqIHgwKSArIChjICogeTApICsgdHg7XG4gICAgICAgIGxldCB5ID0gKGIgKiB4MCkgKyAoZCAqIHkwKSArIHR5O1xuXG4gICAgICAgIG1pblggPSB4IDwgbWluWCA/IHggOiBtaW5YO1xuICAgICAgICBtaW5ZID0geSA8IG1pblkgPyB5IDogbWluWTtcbiAgICAgICAgbWF4WCA9IHggPiBtYXhYID8geCA6IG1heFg7XG4gICAgICAgIG1heFkgPSB5ID4gbWF4WSA/IHkgOiBtYXhZO1xuXG4gICAgICAgIHggPSAoYSAqIHgxKSArIChjICogeTApICsgdHg7XG4gICAgICAgIHkgPSAoYiAqIHgxKSArIChkICogeTApICsgdHk7XG4gICAgICAgIG1pblggPSB4IDwgbWluWCA/IHggOiBtaW5YO1xuICAgICAgICBtaW5ZID0geSA8IG1pblkgPyB5IDogbWluWTtcbiAgICAgICAgbWF4WCA9IHggPiBtYXhYID8geCA6IG1heFg7XG4gICAgICAgIG1heFkgPSB5ID4gbWF4WSA/IHkgOiBtYXhZO1xuXG4gICAgICAgIHggPSAoYSAqIHgwKSArIChjICogeTEpICsgdHg7XG4gICAgICAgIHkgPSAoYiAqIHgwKSArIChkICogeTEpICsgdHk7XG4gICAgICAgIG1pblggPSB4IDwgbWluWCA/IHggOiBtaW5YO1xuICAgICAgICBtaW5ZID0geSA8IG1pblkgPyB5IDogbWluWTtcbiAgICAgICAgbWF4WCA9IHggPiBtYXhYID8geCA6IG1heFg7XG4gICAgICAgIG1heFkgPSB5ID4gbWF4WSA/IHkgOiBtYXhZO1xuXG4gICAgICAgIHggPSAoYSAqIHgxKSArIChjICogeTEpICsgdHg7XG4gICAgICAgIHkgPSAoYiAqIHgxKSArIChkICogeTEpICsgdHk7XG4gICAgICAgIG1pblggPSB4IDwgbWluWCA/IHggOiBtaW5YO1xuICAgICAgICBtaW5ZID0geSA8IG1pblkgPyB5IDogbWluWTtcbiAgICAgICAgbWF4WCA9IHggPiBtYXhYID8geCA6IG1heFg7XG4gICAgICAgIG1heFkgPSB5ID4gbWF4WSA/IHkgOiBtYXhZO1xuXG4gICAgICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgICAgIHRoaXMubWF4WCA9IG1heFg7XG4gICAgICAgIHRoaXMubWF4WSA9IG1heFk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBzY3JlZW4gdmVydGljZXMgZnJvbSBhcnJheVxuICAgICAqXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHZlcnRleERhdGEgLSBjYWxjdWxhdGVkIHZlcnRpY2VzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJlZ2luT2Zmc2V0IC0gYmVnaW4gb2Zmc2V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZE9mZnNldCAtIGVuZCBvZmZzZXQsIGV4Y2x1ZGVkXG4gICAgICovXG4gICAgYWRkVmVydGV4RGF0YSh2ZXJ0ZXhEYXRhOiBGbG9hdDMyQXJyYXksIGJlZ2luT2Zmc2V0OiBudW1iZXIsIGVuZE9mZnNldDogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgbGV0IG1pblggPSB0aGlzLm1pblg7XG4gICAgICAgIGxldCBtaW5ZID0gdGhpcy5taW5ZO1xuICAgICAgICBsZXQgbWF4WCA9IHRoaXMubWF4WDtcbiAgICAgICAgbGV0IG1heFkgPSB0aGlzLm1heFk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IGJlZ2luT2Zmc2V0OyBpIDwgZW5kT2Zmc2V0OyBpICs9IDIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSB2ZXJ0ZXhEYXRhW2ldO1xuICAgICAgICAgICAgY29uc3QgeSA9IHZlcnRleERhdGFbaSArIDFdO1xuXG4gICAgICAgICAgICBtaW5YID0geCA8IG1pblggPyB4IDogbWluWDtcbiAgICAgICAgICAgIG1pblkgPSB5IDwgbWluWSA/IHkgOiBtaW5ZO1xuICAgICAgICAgICAgbWF4WCA9IHggPiBtYXhYID8geCA6IG1heFg7XG4gICAgICAgICAgICBtYXhZID0geSA+IG1heFkgPyB5IDogbWF4WTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgICAgIHRoaXMubWF4WCA9IG1heFg7XG4gICAgICAgIHRoaXMubWF4WSA9IG1heFk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGFycmF5IG9mIG1lc2ggdmVydGljZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5UcmFuc2Zvcm19IHRyYW5zZm9ybSAtIG1lc2ggdHJhbnNmb3JtXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHZlcnRpY2VzIC0gbWVzaCBjb29yZGluYXRlcyBpbiBhcnJheVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpbk9mZnNldCAtIGJlZ2luIG9mZnNldFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRPZmZzZXQgLSBlbmQgb2Zmc2V0LCBleGNsdWRlZFxuICAgICAqL1xuICAgIGFkZFZlcnRpY2VzKHRyYW5zZm9ybTogVHJhbnNmb3JtLCB2ZXJ0aWNlczogRmxvYXQzMkFycmF5LCBiZWdpbk9mZnNldDogbnVtYmVyLCBlbmRPZmZzZXQ6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuYWRkVmVydGljZXNNYXRyaXgodHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtLCB2ZXJ0aWNlcywgYmVnaW5PZmZzZXQsIGVuZE9mZnNldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGFycmF5IG9mIG1lc2ggdmVydGljZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuTWF0cml4fSBtYXRyaXggLSBtZXNoIG1hdHJpeFxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fSB2ZXJ0aWNlcyAtIG1lc2ggY29vcmRpbmF0ZXMgaW4gYXJyYXlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYmVnaW5PZmZzZXQgLSBiZWdpbiBvZmZzZXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kT2Zmc2V0IC0gZW5kIG9mZnNldCwgZXhjbHVkZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3BhZFg9MF0gLSB4IHBhZGRpbmdcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3BhZFk9MF0gLSB5IHBhZGRpbmdcbiAgICAgKi9cbiAgICBhZGRWZXJ0aWNlc01hdHJpeChtYXRyaXg6IE1hdHJpeCwgdmVydGljZXM6IEZsb2F0MzJBcnJheSwgYmVnaW5PZmZzZXQ6IG51bWJlcixcbiAgICAgICAgZW5kT2Zmc2V0OiBudW1iZXIsIHBhZFggPSAwLCBwYWRZID0gcGFkWCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGEgPSBtYXRyaXguYTtcbiAgICAgICAgY29uc3QgYiA9IG1hdHJpeC5iO1xuICAgICAgICBjb25zdCBjID0gbWF0cml4LmM7XG4gICAgICAgIGNvbnN0IGQgPSBtYXRyaXguZDtcbiAgICAgICAgY29uc3QgdHggPSBtYXRyaXgudHg7XG4gICAgICAgIGNvbnN0IHR5ID0gbWF0cml4LnR5O1xuXG4gICAgICAgIGxldCBtaW5YID0gdGhpcy5taW5YO1xuICAgICAgICBsZXQgbWluWSA9IHRoaXMubWluWTtcbiAgICAgICAgbGV0IG1heFggPSB0aGlzLm1heFg7XG4gICAgICAgIGxldCBtYXhZID0gdGhpcy5tYXhZO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSBiZWdpbk9mZnNldDsgaSA8IGVuZE9mZnNldDsgaSArPSAyKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCByYXdYID0gdmVydGljZXNbaV07XG4gICAgICAgICAgICBjb25zdCByYXdZID0gdmVydGljZXNbaSArIDFdO1xuICAgICAgICAgICAgY29uc3QgeCA9IChhICogcmF3WCkgKyAoYyAqIHJhd1kpICsgdHg7XG4gICAgICAgICAgICBjb25zdCB5ID0gKGQgKiByYXdZKSArIChiICogcmF3WCkgKyB0eTtcblxuICAgICAgICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIHggLSBwYWRYKTtcbiAgICAgICAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCB4ICsgcGFkWCk7XG4gICAgICAgICAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgeSAtIHBhZFkpO1xuICAgICAgICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIHkgKyBwYWRZKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgICAgIHRoaXMubWF4WCA9IG1heFg7XG4gICAgICAgIHRoaXMubWF4WSA9IG1heFk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBvdGhlciBCb3VuZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuQm91bmRzfSBib3VuZHMgLSBUaGUgQm91bmRzIHRvIGJlIGFkZGVkXG4gICAgICovXG4gICAgYWRkQm91bmRzKGJvdW5kczogQm91bmRzKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbWluWCA9IHRoaXMubWluWDtcbiAgICAgICAgY29uc3QgbWluWSA9IHRoaXMubWluWTtcbiAgICAgICAgY29uc3QgbWF4WCA9IHRoaXMubWF4WDtcbiAgICAgICAgY29uc3QgbWF4WSA9IHRoaXMubWF4WTtcblxuICAgICAgICB0aGlzLm1pblggPSBib3VuZHMubWluWCA8IG1pblggPyBib3VuZHMubWluWCA6IG1pblg7XG4gICAgICAgIHRoaXMubWluWSA9IGJvdW5kcy5taW5ZIDwgbWluWSA/IGJvdW5kcy5taW5ZIDogbWluWTtcbiAgICAgICAgdGhpcy5tYXhYID0gYm91bmRzLm1heFggPiBtYXhYID8gYm91bmRzLm1heFggOiBtYXhYO1xuICAgICAgICB0aGlzLm1heFkgPSBib3VuZHMubWF4WSA+IG1heFkgPyBib3VuZHMubWF4WSA6IG1heFk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBvdGhlciBCb3VuZHMsIG1hc2tlZCB3aXRoIEJvdW5kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5Cb3VuZHN9IGJvdW5kcyAtIFRoZSBCb3VuZHMgdG8gYmUgYWRkZWQuXG4gICAgICogQHBhcmFtIHtQSVhJLkJvdW5kc30gbWFzayAtIFRPRE9cbiAgICAgKi9cbiAgICBhZGRCb3VuZHNNYXNrKGJvdW5kczogQm91bmRzLCBtYXNrOiBCb3VuZHMpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBfbWluWCA9IGJvdW5kcy5taW5YID4gbWFzay5taW5YID8gYm91bmRzLm1pblggOiBtYXNrLm1pblg7XG4gICAgICAgIGNvbnN0IF9taW5ZID0gYm91bmRzLm1pblkgPiBtYXNrLm1pblkgPyBib3VuZHMubWluWSA6IG1hc2subWluWTtcbiAgICAgICAgY29uc3QgX21heFggPSBib3VuZHMubWF4WCA8IG1hc2subWF4WCA/IGJvdW5kcy5tYXhYIDogbWFzay5tYXhYO1xuICAgICAgICBjb25zdCBfbWF4WSA9IGJvdW5kcy5tYXhZIDwgbWFzay5tYXhZID8gYm91bmRzLm1heFkgOiBtYXNrLm1heFk7XG5cbiAgICAgICAgaWYgKF9taW5YIDw9IF9tYXhYICYmIF9taW5ZIDw9IF9tYXhZKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBtaW5YID0gdGhpcy5taW5YO1xuICAgICAgICAgICAgY29uc3QgbWluWSA9IHRoaXMubWluWTtcbiAgICAgICAgICAgIGNvbnN0IG1heFggPSB0aGlzLm1heFg7XG4gICAgICAgICAgICBjb25zdCBtYXhZID0gdGhpcy5tYXhZO1xuXG4gICAgICAgICAgICB0aGlzLm1pblggPSBfbWluWCA8IG1pblggPyBfbWluWCA6IG1pblg7XG4gICAgICAgICAgICB0aGlzLm1pblkgPSBfbWluWSA8IG1pblkgPyBfbWluWSA6IG1pblk7XG4gICAgICAgICAgICB0aGlzLm1heFggPSBfbWF4WCA+IG1heFggPyBfbWF4WCA6IG1heFg7XG4gICAgICAgICAgICB0aGlzLm1heFkgPSBfbWF4WSA+IG1heFkgPyBfbWF4WSA6IG1heFk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIG90aGVyIEJvdW5kcywgbXVsdGlwbGllZCBieSBtYXRyaXguIEJvdW5kcyBzaG91bGRuJ3QgYmUgZW1wdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuQm91bmRzfSBib3VuZHMgLSBvdGhlciBib3VuZHNcbiAgICAgKiBAcGFyYW0ge1BJWEkuTWF0cml4fSBtYXRyaXggLSBtdWx0aXBsaWNhdG9yXG4gICAgICovXG4gICAgYWRkQm91bmRzTWF0cml4KGJvdW5kczogQm91bmRzLCBtYXRyaXg6IE1hdHJpeCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuYWRkRnJhbWVNYXRyaXgobWF0cml4LCBib3VuZHMubWluWCwgYm91bmRzLm1pblksIGJvdW5kcy5tYXhYLCBib3VuZHMubWF4WSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBvdGhlciBCb3VuZHMsIG1hc2tlZCB3aXRoIFJlY3RhbmdsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5Cb3VuZHN9IGJvdW5kcyAtIFRPRE9cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSBhcmVhIC0gVE9ET1xuICAgICAqL1xuICAgIGFkZEJvdW5kc0FyZWEoYm91bmRzOiBCb3VuZHMsIGFyZWE6IFJlY3RhbmdsZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IF9taW5YID0gYm91bmRzLm1pblggPiBhcmVhLnggPyBib3VuZHMubWluWCA6IGFyZWEueDtcbiAgICAgICAgY29uc3QgX21pblkgPSBib3VuZHMubWluWSA+IGFyZWEueSA/IGJvdW5kcy5taW5ZIDogYXJlYS55O1xuICAgICAgICBjb25zdCBfbWF4WCA9IGJvdW5kcy5tYXhYIDwgYXJlYS54ICsgYXJlYS53aWR0aCA/IGJvdW5kcy5tYXhYIDogKGFyZWEueCArIGFyZWEud2lkdGgpO1xuICAgICAgICBjb25zdCBfbWF4WSA9IGJvdW5kcy5tYXhZIDwgYXJlYS55ICsgYXJlYS5oZWlnaHQgPyBib3VuZHMubWF4WSA6IChhcmVhLnkgKyBhcmVhLmhlaWdodCk7XG5cbiAgICAgICAgaWYgKF9taW5YIDw9IF9tYXhYICYmIF9taW5ZIDw9IF9tYXhZKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBtaW5YID0gdGhpcy5taW5YO1xuICAgICAgICAgICAgY29uc3QgbWluWSA9IHRoaXMubWluWTtcbiAgICAgICAgICAgIGNvbnN0IG1heFggPSB0aGlzLm1heFg7XG4gICAgICAgICAgICBjb25zdCBtYXhZID0gdGhpcy5tYXhZO1xuXG4gICAgICAgICAgICB0aGlzLm1pblggPSBfbWluWCA8IG1pblggPyBfbWluWCA6IG1pblg7XG4gICAgICAgICAgICB0aGlzLm1pblkgPSBfbWluWSA8IG1pblkgPyBfbWluWSA6IG1pblk7XG4gICAgICAgICAgICB0aGlzLm1heFggPSBfbWF4WCA+IG1heFggPyBfbWF4WCA6IG1heFg7XG4gICAgICAgICAgICB0aGlzLm1heFkgPSBfbWF4WSA+IG1heFkgPyBfbWF4WSA6IG1heFk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYWRzIGJvdW5kcyBvYmplY3QsIG1ha2luZyBpdCBncm93IGluIGFsbCBkaXJlY3Rpb25zLlxuICAgICAqIElmIHBhZGRpbmdZIGlzIG9taXR0ZWQsIGJvdGggcGFkZGluZ1ggYW5kIHBhZGRpbmdZIHdpbGwgYmUgc2V0IHRvIHBhZGRpbmdYLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwYWRkaW5nWD0wXSAtIFRoZSBob3Jpem9udGFsIHBhZGRpbmcgYW1vdW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcGFkZGluZ1k9MF0gLSBUaGUgdmVydGljYWwgcGFkZGluZyBhbW91bnQuXG4gICAgICovXG4gICAgcGFkKHBhZGRpbmdYID0gMCwgcGFkZGluZ1kgPSBwYWRkaW5nWCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5pc0VtcHR5KCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubWluWCAtPSBwYWRkaW5nWDtcbiAgICAgICAgICAgIHRoaXMubWF4WCArPSBwYWRkaW5nWDtcbiAgICAgICAgICAgIHRoaXMubWluWSAtPSBwYWRkaW5nWTtcbiAgICAgICAgICAgIHRoaXMubWF4WSArPSBwYWRkaW5nWTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgcGFkZGVkIGZyYW1lLiAoeDAsIHkwKSBzaG91bGQgYmUgc3RyaWN0bHkgbGVzcyB0aGFuICh4MSwgeTEpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDAgLSBsZWZ0IFggb2YgZnJhbWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTAgLSB0b3AgWSBvZiBmcmFtZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MSAtIHJpZ2h0IFggb2YgZnJhbWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTEgLSBib3R0b20gWSBvZiBmcmFtZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwYWRYIC0gcGFkZGluZyBYXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBhZFkgLSBwYWRkaW5nIFlcbiAgICAgKi9cbiAgICBhZGRGcmFtZVBhZCh4MDogbnVtYmVyLCB5MDogbnVtYmVyLCB4MTogbnVtYmVyLCB5MTogbnVtYmVyLCBwYWRYOiBudW1iZXIsIHBhZFk6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHgwIC09IHBhZFg7XG4gICAgICAgIHkwIC09IHBhZFk7XG4gICAgICAgIHgxICs9IHBhZFg7XG4gICAgICAgIHkxICs9IHBhZFk7XG5cbiAgICAgICAgdGhpcy5taW5YID0gdGhpcy5taW5YIDwgeDAgPyB0aGlzLm1pblggOiB4MDtcbiAgICAgICAgdGhpcy5tYXhYID0gdGhpcy5tYXhYID4geDEgPyB0aGlzLm1heFggOiB4MTtcbiAgICAgICAgdGhpcy5taW5ZID0gdGhpcy5taW5ZIDwgeTAgPyB0aGlzLm1pblkgOiB5MDtcbiAgICAgICAgdGhpcy5tYXhZID0gdGhpcy5tYXhZID4geTEgPyB0aGlzLm1heFkgOiB5MTtcbiAgICB9XG59XG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiaW1wb3J0IHsgREVHX1RPX1JBRCwgTWF0cml4LCBQb2ludCwgUkFEX1RPX0RFRywgUmVjdGFuZ2xlLCBUcmFuc2Zvcm0gfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJy4vQ29udGFpbmVyJztcbmltcG9ydCB7IEJvdW5kcyB9IGZyb20gJy4vQm91bmRzJztcblxuaW1wb3J0IHR5cGUgeyBGaWx0ZXIsIE1hc2tEYXRhLCBSZW5kZXJlciB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBJUG9pbnREYXRhLCBPYnNlcnZhYmxlUG9pbnQgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB0eXBlIHsgRGljdCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBJRGVzdHJveU9wdGlvbnMge1xuICAgIGNoaWxkcmVuPzogYm9vbGVhbjtcbiAgICB0ZXh0dXJlPzogYm9vbGVhbjtcbiAgICBiYXNlVGV4dHVyZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlzcGxheU9iamVjdCBleHRlbmRzIEdsb2JhbE1peGlucy5EaXNwbGF5T2JqZWN0LCBFdmVudEVtaXR0ZXIge31cblxuLyoqXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIG9iamVjdHMgdGhhdCBhcmUgcmVuZGVyZWQgb24gdGhlIHNjcmVlbi5cbiAqXG4gKiBUaGlzIGlzIGFuIGFic3RyYWN0IGNsYXNzIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgb24gaXRzIG93bjsgcmF0aGVyIGl0IHNob3VsZCBiIGUgZXh0ZW5kZWQuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLnV0aWxzLkV2ZW50RW1pdHRlclxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERpc3BsYXlPYmplY3QgZXh0ZW5kcyBFdmVudEVtaXR0ZXJcbntcbiAgICBhYnN0cmFjdCBzb3J0RGlydHk6IGJvb2xlYW47XG5cbiAgICBwdWJsaWMgcGFyZW50OiBEaXNwbGF5T2JqZWN0O1xuICAgIHB1YmxpYyB3b3JsZEFscGhhOiBudW1iZXI7XG4gICAgcHVibGljIHRyYW5zZm9ybTogVHJhbnNmb3JtO1xuICAgIHB1YmxpYyBhbHBoYTogbnVtYmVyO1xuICAgIHB1YmxpYyB2aXNpYmxlOiBib29sZWFuO1xuICAgIHB1YmxpYyByZW5kZXJhYmxlOiBib29sZWFuO1xuICAgIHB1YmxpYyBmaWx0ZXJBcmVhOiBSZWN0YW5nbGU7XG4gICAgcHVibGljIGZpbHRlcnM6IEZpbHRlcltdO1xuICAgIHB1YmxpYyBpc1Nwcml0ZTogYm9vbGVhbjtcbiAgICBwdWJsaWMgaXNNYXNrOiBib29sZWFuO1xuICAgIHB1YmxpYyBfbGFzdFNvcnRlZEluZGV4OiBudW1iZXI7XG4gICAgcHVibGljIF9tYXNrOiBDb250YWluZXJ8TWFza0RhdGE7XG4gICAgcHVibGljIF9ib3VuZHM6IEJvdW5kcztcbiAgICBwdWJsaWMgX2xvY2FsQm91bmRzOiBCb3VuZHM7XG5cbiAgICBwcm90ZWN0ZWQgX3pJbmRleDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfZW5hYmxlZEZpbHRlcnM6IEZpbHRlcltdO1xuICAgIHByb3RlY3RlZCBfYm91bmRzSUQ6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2JvdW5kc1JlY3Q6IFJlY3RhbmdsZTtcbiAgICBwcm90ZWN0ZWQgX2xvY2FsQm91bmRzUmVjdDogUmVjdGFuZ2xlO1xuICAgIHByb3RlY3RlZCBfZGVzdHJveWVkOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSB0ZW1wRGlzcGxheU9iamVjdFBhcmVudDogVGVtcG9yYXJ5RGlzcGxheU9iamVjdDtcbiAgICBwdWJsaWMgZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybTogKCkgPT4gdm9pZDtcblxuICAgIC8qKlxuICAgICAqIE1peGVzIGFsbCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgZnJvbSBhIHNvdXJjZSBvYmplY3QgdG8gRGlzcGxheU9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBzb3VyY2UgLSBUaGUgc291cmNlIG9mIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgdG8gbWl4IGluLlxuICAgICAqL1xuICAgIHN0YXRpYyBtaXhpbihzb3VyY2U6IERpY3Q8YW55Pik6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIGluIEVTOC9FUzIwMTcsIHRoaXMgd291bGQgYmUgcmVhbGx5IGVhc3k6XG4gICAgICAgIC8vIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKERpc3BsYXlPYmplY3QucHJvdG90eXBlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTtcblxuICAgICAgICAvLyBnZXQgYWxsIHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IGtleXNcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHByb3BlcnRpZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eU5hbWUgPSBrZXlzW2ldO1xuXG4gICAgICAgICAgICAvLyBTZXQgdGhlIHByb3BlcnR5IHVzaW5nIHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIC0gdGhpcyB3b3JrcyBmb3IgYWNjZXNzb3JzIGFuZCBub3JtYWwgdmFsdWUgcHJvcGVydGllc1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFxuICAgICAgICAgICAgICAgIERpc3BsYXlPYmplY3QucHJvdG90eXBlLFxuICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZSxcbiAgICAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwgcHJvcGVydHlOYW1lKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy50ZW1wRGlzcGxheU9iamVjdFBhcmVudCA9IG51bGw7XG5cbiAgICAgICAgLy8gVE9ETzogbmVlZCB0byBjcmVhdGUgVHJhbnNmb3JtIGZyb20gZmFjdG9yeVxuICAgICAgICAvKipcbiAgICAgICAgICogV29ybGQgdHJhbnNmb3JtIGFuZCBsb2NhbCB0cmFuc2Zvcm0gb2YgdGhpcyBvYmplY3QuXG4gICAgICAgICAqIFRoaXMgd2lsbCBiZWNvbWUgcmVhZC1vbmx5IGxhdGVyLCBwbGVhc2UgZG8gbm90IGFzc2lnbiBhbnl0aGluZyB0aGVyZSB1bmxlc3MgeW91IGtub3cgd2hhdCBhcmUgeW91IGRvaW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3BhY2l0eSBvZiB0aGUgb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFscGhhID0gMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHZpc2liaWxpdHkgb2YgdGhlIG9iamVjdC4gSWYgZmFsc2UgdGhlIG9iamVjdCB3aWxsIG5vdCBiZSBkcmF3biwgYW5kXG4gICAgICAgICAqIHRoZSB1cGRhdGVUcmFuc2Zvcm0gZnVuY3Rpb24gd2lsbCBub3QgYmUgY2FsbGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBPbmx5IGFmZmVjdHMgcmVjdXJzaXZlIGNhbGxzIGZyb20gcGFyZW50LiBZb3UgY2FuIGFzayBmb3IgYm91bmRzIG9yIGNhbGwgdXBkYXRlVHJhbnNmb3JtIG1hbnVhbGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FuIHRoaXMgb2JqZWN0IGJlIHJlbmRlcmVkLCBpZiBmYWxzZSB0aGUgb2JqZWN0IHdpbGwgbm90IGJlIGRyYXduIGJ1dCB0aGUgdXBkYXRlVHJhbnNmb3JtXG4gICAgICAgICAqIG1ldGhvZHMgd2lsbCBzdGlsbCBiZSBjYWxsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIE9ubHkgYWZmZWN0cyByZWN1cnNpdmUgY2FsbHMgZnJvbSBwYXJlbnQuIFlvdSBjYW4gYXNrIGZvciBib3VuZHMgbWFudWFsbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbmRlcmFibGUgPSB0cnVlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGlzcGxheSBvYmplY3QgY29udGFpbmVyIHRoYXQgY29udGFpbnMgdGhpcyBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5Db250YWluZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtdWx0aXBsaWVkIGFscGhhIG9mIHRoZSBkaXNwbGF5T2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53b3JsZEFscGhhID0gMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hpY2ggaW5kZXggaW4gdGhlIGNoaWxkcmVuIGFycmF5IHRoZSBkaXNwbGF5IGNvbXBvbmVudCB3YXMgYmVmb3JlIHRoZSBwcmV2aW91cyB6SW5kZXggc29ydC5cbiAgICAgICAgICogVXNlZCBieSBjb250YWluZXJzIHRvIGhlbHAgc29ydCBvYmplY3RzIHdpdGggdGhlIHNhbWUgekluZGV4LCBieSB1c2luZyBwcmV2aW91cyBhcnJheSBpbmRleCBhcyB0aGUgZGVjaWRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9sYXN0U29ydGVkSW5kZXggPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgekluZGV4IG9mIHRoZSBkaXNwbGF5T2JqZWN0LlxuICAgICAgICAgKiBBIGhpZ2hlciB2YWx1ZSB3aWxsIG1lYW4gaXQgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3Agb2Ygb3RoZXIgZGlzcGxheU9iamVjdHMgd2l0aGluIHRoZSBzYW1lIGNvbnRhaW5lci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl96SW5kZXggPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYXJlYSB0aGUgZmlsdGVyIGlzIGFwcGxpZWQgdG8uIFRoaXMgaXMgdXNlZCBhcyBtb3JlIG9mIGFuIG9wdGltaXphdGlvblxuICAgICAgICAgKiByYXRoZXIgdGhhbiBmaWd1cmluZyBvdXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGRpc3BsYXlPYmplY3QgZWFjaCBmcmFtZSB5b3UgY2FuIHNldCB0aGlzIHJlY3RhbmdsZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQWxzbyB3b3JrcyBhcyBhbiBpbnRlcmFjdGlvbiBtYXNrLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHs/UElYSS5SZWN0YW5nbGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlckFyZWEgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBmaWx0ZXJzIGZvciB0aGUgZGlzcGxheU9iamVjdC5cbiAgICAgICAgICogKiBJTVBPUlRBTlQ6IFRoaXMgaXMgYSBXZWJHTCBvbmx5IGZlYXR1cmUgYW5kIHdpbGwgYmUgaWdub3JlZCBieSB0aGUgY2FudmFzIHJlbmRlcmVyLlxuICAgICAgICAgKiBUbyByZW1vdmUgZmlsdGVycyBzaW1wbHkgc2V0IHRoaXMgcHJvcGVydHkgdG8gYCdudWxsJ2AuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIgez9QSVhJLkZpbHRlcltdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJzID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3VycmVudGx5IGVuYWJsZWQgZmlsdGVyc1xuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkZpbHRlcltdfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9lbmFibGVkRmlsdGVycyA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBib3VuZHMgb2JqZWN0LCB0aGlzIGlzIHVzZWQgdG8gY2FsY3VsYXRlIGFuZCBzdG9yZSB0aGUgYm91bmRzIG9mIHRoZSBkaXNwbGF5T2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkJvdW5kc31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JvdW5kcyA9IG5ldyBCb3VuZHMoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9jYWwgYm91bmRzIG9iamVjdCwgc3dhcHBlZCB3aXRoIGBfYm91bmRzYCB3aGVuIHVzaW5nIGBnZXRMb2NhbEJvdW5kcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5Cb3VuZHN9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9sb2NhbEJvdW5kcyA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZsYWdzIHRoZSBjYWNoZWQgYm91bmRzIGFzIGRpcnR5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JvdW5kc0lEID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGUgb2YgdGhpcyBkaXNwbGF5LW9iamVjdCdzIGJvdW5kcy1yZWN0YW5nbGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuQm91bmRzfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9ib3VuZHNSZWN0ID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGUgb2YgdGhpcyBkaXNwbGF5LW9iamVjdCdzIGxvY2FsLWJvdW5kcyByZWN0YW5nbGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuQm91bmRzfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9sb2NhbEJvdW5kc1JlY3QgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3JpZ2luYWwsIGNhY2hlZCBtYXNrIG9mIHRoZSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuQ29udGFpbmVyfFBJWEkuTWFza0RhdGF8bnVsbH1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fbWFzayA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gdGhpcyBEaXNwbGF5T2JqZWN0IGlzIGFkZGVkIHRvIGEgQ29udGFpbmVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5EaXNwbGF5T2JqZWN0I2FkZGVkXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5Db250YWluZXJ9IGNvbnRhaW5lciAtIFRoZSBjb250YWluZXIgYWRkZWQgdG8uXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIHRoaXMgRGlzcGxheU9iamVjdCBpcyByZW1vdmVkIGZyb20gYSBDb250YWluZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjcmVtb3ZlZFxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuQ29udGFpbmVyfSBjb250YWluZXIgLSBUaGUgY29udGFpbmVyIHJlbW92ZWQgZnJvbS5cbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRoZSBvYmplY3QgaGFzIGJlZW4gZGVzdHJveWVkIHZpYSBkZXN0cm95KCkuIElmIHRydWUsIGl0IHNob3VsZCBub3QgYmUgdXNlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fZGVzdHJveWVkID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHVzZWQgdG8gZmFzdCBjaGVjayBpZiBhIHNwcml0ZSBpcy4uIGEgc3ByaXRlIVxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc1Nwcml0ZSA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEb2VzIGFueSBvdGhlciBkaXNwbGF5T2JqZWN0IHVzZSB0aGlzIG9iamVjdCBhcyBhIG1hc2s/XG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzTWFzayA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY2FsY3VsYXRlcyB0aGUgYm91bmRzIG9mIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgKi9cbiAgICBhYnN0cmFjdCBjYWxjdWxhdGVCb3VuZHMoKTogdm9pZDtcblxuICAgIGFic3RyYWN0IHJlbW92ZUNoaWxkKGNoaWxkOiBEaXNwbGF5T2JqZWN0KTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIG9iamVjdCB1c2luZyB0aGUgV2ViR0wgcmVuZGVyZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIGFic3RyYWN0IHJlbmRlcihyZW5kZXJlcjogUmVuZGVyZXIpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlbHkgdXBkYXRlcyB0cmFuc2Zvcm0gb2YgYWxsIG9iamVjdHMgZnJvbSB0aGUgcm9vdCB0byB0aGlzIG9uZVxuICAgICAqIGludGVybmFsIGZ1bmN0aW9uIGZvciB0b0xvY2FsKClcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX3JlY3Vyc2l2ZVBvc3RVcGRhdGVUcmFuc2Zvcm0oKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5fcmVjdXJzaXZlUG9zdFVwZGF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0udXBkYXRlVHJhbnNmb3JtKHRoaXMucGFyZW50LnRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybS51cGRhdGVUcmFuc2Zvcm0odGhpcy5fdGVtcERpc3BsYXlPYmplY3RQYXJlbnQudHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIG9iamVjdCB0cmFuc2Zvcm0gZm9yIHJlbmRlcmluZy5cbiAgICAgKlxuICAgICAqIFRPRE8gLSBPcHRpbWl6YXRpb24gcGFzcyFcbiAgICAgKi9cbiAgICB1cGRhdGVUcmFuc2Zvcm0oKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fYm91bmRzSUQrKztcblxuICAgICAgICB0aGlzLnRyYW5zZm9ybS51cGRhdGVUcmFuc2Zvcm0odGhpcy5wYXJlbnQudHJhbnNmb3JtKTtcbiAgICAgICAgLy8gbXVsdGlwbHkgdGhlIGFscGhhcy4uXG4gICAgICAgIHRoaXMud29ybGRBbHBoYSA9IHRoaXMuYWxwaGEgKiB0aGlzLnBhcmVudC53b3JsZEFscGhhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgYm91bmRzIG9mIHRoZSBkaXNwbGF5T2JqZWN0IGFzIGEgcmVjdGFuZ2xlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NraXBVcGRhdGVdIC0gU2V0dGluZyB0byBgdHJ1ZWAgd2lsbCBzdG9wIHRoZSB0cmFuc2Zvcm1zIG9mIHRoZSBzY2VuZSBncmFwaCBmcm9tXG4gICAgICogIGJlaW5nIHVwZGF0ZWQuIFRoaXMgbWVhbnMgdGhlIGNhbGN1bGF0aW9uIHJldHVybmVkIE1BWSBiZSBvdXQgb2YgZGF0ZSBCVVQgd2lsbCBnaXZlIHlvdSBhXG4gICAgICogIG5pY2UgcGVyZm9ybWFuY2UgYm9vc3QuXG4gICAgICogQHBhcmFtIHtQSVhJLlJlY3RhbmdsZX0gW3JlY3RdIC0gT3B0aW9uYWwgcmVjdGFuZ2xlIHRvIHN0b3JlIHRoZSByZXN1bHQgb2YgdGhlIGJvdW5kcyBjYWxjdWxhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlJlY3RhbmdsZX0gVGhlIHJlY3Rhbmd1bGFyIGJvdW5kaW5nIGFyZWEuXG4gICAgICovXG4gICAgZ2V0Qm91bmRzKHNraXBVcGRhdGU/OiBib29sZWFuLCByZWN0PzogUmVjdGFuZ2xlKTogUmVjdGFuZ2xlXG4gICAge1xuICAgICAgICBpZiAoIXNraXBVcGRhdGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSB0aGlzLl90ZW1wRGlzcGxheU9iamVjdFBhcmVudDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWN1cnNpdmVQb3N0VXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib3VuZHMudXBkYXRlSUQgIT09IHRoaXMuX2JvdW5kc0lEKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgdGhpcy5fYm91bmRzLnVwZGF0ZUlEID0gdGhpcy5fYm91bmRzSUQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlY3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fYm91bmRzUmVjdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9ib3VuZHNSZWN0ID0gbmV3IFJlY3RhbmdsZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZWN0ID0gdGhpcy5fYm91bmRzUmVjdDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9ib3VuZHMuZ2V0UmVjdGFuZ2xlKHJlY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgbG9jYWwgYm91bmRzIG9mIHRoZSBkaXNwbGF5T2JqZWN0IGFzIGEgcmVjdGFuZ2xlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZWN0YW5nbGV9IFtyZWN0XSAtIE9wdGlvbmFsIHJlY3RhbmdsZSB0byBzdG9yZSB0aGUgcmVzdWx0IG9mIHRoZSBib3VuZHMgY2FsY3VsYXRpb24uXG4gICAgICogQHJldHVybiB7UElYSS5SZWN0YW5nbGV9IFRoZSByZWN0YW5ndWxhciBib3VuZGluZyBhcmVhLlxuICAgICAqL1xuICAgIGdldExvY2FsQm91bmRzKHJlY3Q/OiBSZWN0YW5nbGUpOiBSZWN0YW5nbGVcbiAgICB7XG4gICAgICAgIGlmICghcmVjdClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9sb2NhbEJvdW5kc1JlY3QpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9jYWxCb3VuZHNSZWN0ID0gbmV3IFJlY3RhbmdsZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZWN0ID0gdGhpcy5fbG9jYWxCb3VuZHNSZWN0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl9sb2NhbEJvdW5kcylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fbG9jYWxCb3VuZHMgPSBuZXcgQm91bmRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1SZWYgPSB0aGlzLnRyYW5zZm9ybTtcbiAgICAgICAgY29uc3QgcGFyZW50UmVmID0gdGhpcy5wYXJlbnQ7XG5cbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMuX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50LnRyYW5zZm9ybTtcblxuICAgICAgICBjb25zdCB3b3JsZEJvdW5kcyA9IHRoaXMuX2JvdW5kcztcbiAgICAgICAgY29uc3Qgd29ybGRCb3VuZHNJRCA9IHRoaXMuX2JvdW5kc0lEO1xuXG4gICAgICAgIHRoaXMuX2JvdW5kcyA9IHRoaXMuX2xvY2FsQm91bmRzO1xuXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKGZhbHNlLCByZWN0KTtcblxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudFJlZjtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1SZWY7XG5cbiAgICAgICAgdGhpcy5fYm91bmRzID0gd29ybGRCb3VuZHM7XG4gICAgICAgIHRoaXMuX2JvdW5kcy51cGRhdGVJRCArPSB0aGlzLl9ib3VuZHNJRCAtIHdvcmxkQm91bmRzSUQ7Ly8gcmVmbGVjdCBzaWRlLWVmZmVjdHNcblxuICAgICAgICByZXR1cm4gYm91bmRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgdGhlIGdsb2JhbCBwb3NpdGlvbiBvZiB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcG9zaXRpb24gLSBUaGUgd29ybGQgb3JpZ2luIHRvIGNhbGN1bGF0ZSBmcm9tLlxuICAgICAqIEBwYXJhbSB7UElYSS5Qb2ludH0gW3BvaW50XSAtIEEgUG9pbnQgb2JqZWN0IGluIHdoaWNoIHRvIHN0b3JlIHRoZSB2YWx1ZSwgb3B0aW9uYWxcbiAgICAgKiAgKG90aGVyd2lzZSB3aWxsIGNyZWF0ZSBhIG5ldyBQb2ludCkuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFVwZGF0ZT1mYWxzZV0gLSBTaG91bGQgd2Ugc2tpcCB0aGUgdXBkYXRlIHRyYW5zZm9ybS5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlBvaW50fSBBIHBvaW50IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHBvc2l0aW9uIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqL1xuICAgIHRvR2xvYmFsPFAgZXh0ZW5kcyBJUG9pbnREYXRhID0gUG9pbnQ+KHBvc2l0aW9uOiBJUG9pbnREYXRhLCBwb2ludD86IFAsIHNraXBVcGRhdGUgPSBmYWxzZSk6IFBcbiAgICB7XG4gICAgICAgIGlmICghc2tpcFVwZGF0ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fcmVjdXJzaXZlUG9zdFVwZGF0ZVRyYW5zZm9ybSgpO1xuXG4gICAgICAgICAgICAvLyB0aGlzIHBhcmVudCBjaGVjayBpcyBmb3IganVzdCBpbiBjYXNlIHRoZSBpdGVtIGlzIGEgcm9vdCBvYmplY3QuXG4gICAgICAgICAgICAvLyBJZiBpdCBpcyB3ZSBuZWVkIHRvIGdpdmUgaXQgYSB0ZW1wb3JhcnkgcGFyZW50IHNvIHRoYXQgZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybSB3b3JrcyBjb3JyZWN0bHlcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgbWFpbmx5IHRvIGF2b2lkIGEgcGFyZW50IGNoZWNrIGluIHRoZSBtYWluIGxvb3AuIEV2ZXJ5IGxpdHRsZSBoZWxwcyBmb3IgcGVyZm9ybWFuY2UgOilcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSB0aGlzLl90ZW1wRGlzcGxheU9iamVjdFBhcmVudDtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5T2JqZWN0VXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkb24ndCBuZWVkIHRvIHVwZGF0ZSB0aGUgbG90XG4gICAgICAgIHJldHVybiB0aGlzLndvcmxkVHJhbnNmb3JtLmFwcGx5PFA+KHBvc2l0aW9uLCBwb2ludCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgbG9jYWwgcG9zaXRpb24gb2YgdGhlIGRpc3BsYXkgb2JqZWN0IHJlbGF0aXZlIHRvIGFub3RoZXIgcG9pbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcG9zaXRpb24gLSBUaGUgd29ybGQgb3JpZ2luIHRvIGNhbGN1bGF0ZSBmcm9tLlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBbZnJvbV0gLSBUaGUgRGlzcGxheU9iamVjdCB0byBjYWxjdWxhdGUgdGhlIGdsb2JhbCBwb3NpdGlvbiBmcm9tLlxuICAgICAqIEBwYXJhbSB7UElYSS5Qb2ludH0gW3BvaW50XSAtIEEgUG9pbnQgb2JqZWN0IGluIHdoaWNoIHRvIHN0b3JlIHRoZSB2YWx1ZSwgb3B0aW9uYWxcbiAgICAgKiAgKG90aGVyd2lzZSB3aWxsIGNyZWF0ZSBhIG5ldyBQb2ludCkuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFVwZGF0ZT1mYWxzZV0gLSBTaG91bGQgd2Ugc2tpcCB0aGUgdXBkYXRlIHRyYW5zZm9ybVxuICAgICAqIEByZXR1cm4ge1BJWEkuUG9pbnR9IEEgcG9pbnQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcG9zaXRpb24gb2YgdGhpcyBvYmplY3RcbiAgICAgKi9cbiAgICB0b0xvY2FsPFAgZXh0ZW5kcyBJUG9pbnREYXRhID0gUG9pbnQ+KHBvc2l0aW9uOiBJUG9pbnREYXRhLCBmcm9tOiBEaXNwbGF5T2JqZWN0LCBwb2ludD86IFAsIHNraXBVcGRhdGU/OiBib29sZWFuKTogUFxuICAgIHtcbiAgICAgICAgaWYgKGZyb20pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gZnJvbS50b0dsb2JhbChwb3NpdGlvbiwgcG9pbnQsIHNraXBVcGRhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFza2lwVXBkYXRlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9yZWN1cnNpdmVQb3N0VXBkYXRlVHJhbnNmb3JtKCk7XG5cbiAgICAgICAgICAgIC8vIHRoaXMgcGFyZW50IGNoZWNrIGlzIGZvciBqdXN0IGluIGNhc2UgdGhlIGl0ZW0gaXMgYSByb290IG9iamVjdC5cbiAgICAgICAgICAgIC8vIElmIGl0IGlzIHdlIG5lZWQgdG8gZ2l2ZSBpdCBhIHRlbXBvcmFyeSBwYXJlbnQgc28gdGhhdCBkaXNwbGF5T2JqZWN0VXBkYXRlVHJhbnNmb3JtIHdvcmtzIGNvcnJlY3RseVxuICAgICAgICAgICAgLy8gdGhpcyBpcyBtYWlubHkgdG8gYXZvaWQgYSBwYXJlbnQgY2hlY2sgaW4gdGhlIG1haW4gbG9vcC4gRXZlcnkgbGl0dGxlIGhlbHBzIGZvciBwZXJmb3JtYW5jZSA6KVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudCA9IHRoaXMuX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNpbXBseSBhcHBseSB0aGUgbWF0cml4Li5cbiAgICAgICAgcmV0dXJuIHRoaXMud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlPFA+KHBvc2l0aW9uLCBwb2ludCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBwYXJlbnQgQ29udGFpbmVyIG9mIHRoaXMgRGlzcGxheU9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5Db250YWluZXJ9IGNvbnRhaW5lciAtIFRoZSBDb250YWluZXIgdG8gYWRkIHRoaXMgRGlzcGxheU9iamVjdCB0by5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkNvbnRhaW5lcn0gVGhlIENvbnRhaW5lciB0aGF0IHRoaXMgRGlzcGxheU9iamVjdCB3YXMgYWRkZWQgdG8uXG4gICAgICovXG4gICAgc2V0UGFyZW50KGNvbnRhaW5lcjogQ29udGFpbmVyKTogQ29udGFpbmVyXG4gICAge1xuICAgICAgICBpZiAoIWNvbnRhaW5lciB8fCAhY29udGFpbmVyLmFkZENoaWxkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFBhcmVudDogQXJndW1lbnQgbXVzdCBiZSBhIENvbnRhaW5lcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHRoaXMpO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVuaWVuY2UgZnVuY3Rpb24gdG8gc2V0IHRoZSBwb3NpdGlvbiwgc2NhbGUsIHNrZXcgYW5kIHBpdm90IGF0IG9uY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3g9MF0gLSBUaGUgWCBwb3NpdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbeT0wXSAtIFRoZSBZIHBvc2l0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzY2FsZVg9MV0gLSBUaGUgWCBzY2FsZSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc2NhbGVZPTFdIC0gVGhlIFkgc2NhbGUgdmFsdWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JvdGF0aW9uPTBdIC0gVGhlIHJvdGF0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtza2V3WD0wXSAtIFRoZSBYIHNrZXcgdmFsdWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NrZXdZPTBdIC0gVGhlIFkgc2tldyB2YWx1ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcGl2b3RYPTBdIC0gVGhlIFggcGl2b3QgdmFsdWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Bpdm90WT0wXSAtIFRoZSBZIHBpdm90IHZhbHVlXG4gICAgICogQHJldHVybiB7UElYSS5EaXNwbGF5T2JqZWN0fSBUaGUgRGlzcGxheU9iamVjdCBpbnN0YW5jZVxuICAgICAqL1xuICAgIHNldFRyYW5zZm9ybSh4ID0gMCwgeSA9IDAsIHNjYWxlWCA9IDEsIHNjYWxlWSA9IDEsIHJvdGF0aW9uID0gMCwgc2tld1ggPSAwLCBza2V3WSA9IDAsIHBpdm90WCA9IDAsIHBpdm90WSA9IDApOiB0aGlzXG4gICAge1xuICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSB4O1xuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSB5O1xuICAgICAgICB0aGlzLnNjYWxlLnggPSAhc2NhbGVYID8gMSA6IHNjYWxlWDtcbiAgICAgICAgdGhpcy5zY2FsZS55ID0gIXNjYWxlWSA/IDEgOiBzY2FsZVk7XG4gICAgICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbiAgICAgICAgdGhpcy5za2V3LnggPSBza2V3WDtcbiAgICAgICAgdGhpcy5za2V3LnkgPSBza2V3WTtcbiAgICAgICAgdGhpcy5waXZvdC54ID0gcGl2b3RYO1xuICAgICAgICB0aGlzLnBpdm90LnkgPSBwaXZvdFk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmFzZSBkZXN0cm95IG1ldGhvZCBmb3IgZ2VuZXJpYyBkaXNwbGF5IG9iamVjdHMuIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5XG4gICAgICogcmVtb3ZlIHRoZSBkaXNwbGF5IG9iamVjdCBmcm9tIGl0cyBwYXJlbnQgQ29udGFpbmVyIGFzIHdlbGwgYXMgcmVtb3ZlXG4gICAgICogYWxsIGN1cnJlbnQgZXZlbnQgbGlzdGVuZXJzIGFuZCBpbnRlcm5hbCByZWZlcmVuY2VzLiBEbyBub3QgdXNlIGEgRGlzcGxheU9iamVjdFxuICAgICAqIGFmdGVyIGNhbGxpbmcgYGRlc3Ryb3koKWAuXG4gICAgICpcbiAgICAgKi9cbiAgICBkZXN0cm95KF9vcHRpb25zPzogSURlc3Ryb3lPcHRpb25zfGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbnVsbDtcblxuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2JvdW5kcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX21hc2sgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IG51bGw7XG4gICAgICAgIHRoaXMuZmlsdGVyQXJlYSA9IG51bGw7XG4gICAgICAgIHRoaXMuaGl0QXJlYSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5pbnRlcmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmludGVyYWN0aXZlQ2hpbGRyZW4gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9kZXN0cm95ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbWVtYmVyIHtQSVhJLkNvbnRhaW5lcn1cbiAgICAgKi9cbiAgICBnZXQgX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50KCk6IFRlbXBvcmFyeURpc3BsYXlPYmplY3RcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnRlbXBEaXNwbGF5T2JqZWN0UGFyZW50ID09PSBudWxsKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgIHRoaXMudGVtcERpc3BsYXlPYmplY3RQYXJlbnQgPSBuZXcgVGVtcG9yYXJ5RGlzcGxheU9iamVjdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcERpc3BsYXlPYmplY3RQYXJlbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZCBpbiBSZW5kZXJlciwgY2FjaGVBc0JpdG1hcCBhbmQgb3RoZXIgcGxhY2VzIHdoZXJlIHlvdSBjYWxsIGFuIGB1cGRhdGVUcmFuc2Zvcm1gIG9uIHJvb3RcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IGNhY2hlUGFyZW50ID0gZWxlbS5lbmFibGVUZW1wUGFyZW50KCk7XG4gICAgICogZWxlbS51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgKiBlbGVtLmRpc2FibGVUZW1wUGFyZW50KGNhY2hlUGFyZW50KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQSVhJLkRpc3BsYXlPYmplY3R9IGN1cnJlbnQgcGFyZW50XG4gICAgICovXG4gICAgZW5hYmxlVGVtcFBhcmVudCgpOiBEaXNwbGF5T2JqZWN0XG4gICAge1xuICAgICAgICBjb25zdCBteVBhcmVudCA9IHRoaXMucGFyZW50O1xuXG4gICAgICAgIHRoaXMucGFyZW50ID0gdGhpcy5fdGVtcERpc3BsYXlPYmplY3RQYXJlbnQ7XG5cbiAgICAgICAgcmV0dXJuIG15UGFyZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhaXIgbWV0aG9kIGZvciBgZW5hYmxlVGVtcFBhcmVudGBcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gY2FjaGVQYXJlbnQgYWN0dWFsIHBhcmVudCBvZiBlbGVtZW50XG4gICAgICovXG4gICAgZGlzYWJsZVRlbXBQYXJlbnQoY2FjaGVQYXJlbnQ6IERpc3BsYXlPYmplY3QpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnBhcmVudCA9IGNhY2hlUGFyZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBwb3NpdGlvbiBvZiB0aGUgZGlzcGxheU9iamVjdCBvbiB0aGUgeCBheGlzIHJlbGF0aXZlIHRvIHRoZSBsb2NhbCBjb29yZGluYXRlcyBvZiB0aGUgcGFyZW50LlxuICAgICAqIEFuIGFsaWFzIHRvIHBvc2l0aW9uLnhcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgeCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLng7XG4gICAgfVxuXG4gICAgc2V0IHgodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtLnBvc2l0aW9uLnggPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcG9zaXRpb24gb2YgdGhlIGRpc3BsYXlPYmplY3Qgb24gdGhlIHkgYXhpcyByZWxhdGl2ZSB0byB0aGUgbG9jYWwgY29vcmRpbmF0ZXMgb2YgdGhlIHBhcmVudC5cbiAgICAgKiBBbiBhbGlhcyB0byBwb3NpdGlvbi55XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHkoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi55O1xuICAgIH1cblxuICAgIHNldCB5KHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi55ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3VycmVudCB0cmFuc2Zvcm0gb2YgdGhlIG9iamVjdCBiYXNlZCBvbiB3b3JsZCAocGFyZW50KSBmYWN0b3JzLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7UElYSS5NYXRyaXh9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IHdvcmxkVHJhbnNmb3JtKCk6IE1hdHJpeFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgdHJhbnNmb3JtIG9mIHRoZSBvYmplY3QgYmFzZWQgb24gbG9jYWwgZmFjdG9yczogcG9zaXRpb24sIHNjYWxlLCBvdGhlciBzdHVmZi5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuTWF0cml4fVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIGdldCBsb2NhbFRyYW5zZm9ybSgpOiBNYXRyaXhcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5sb2NhbFRyYW5zZm9ybTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29vcmRpbmF0ZSBvZiB0aGUgb2JqZWN0IHJlbGF0aXZlIHRvIHRoZSBsb2NhbCBjb29yZGluYXRlcyBvZiB0aGUgcGFyZW50LlxuICAgICAqIEFzc2lnbm1lbnQgYnkgdmFsdWUgc2luY2UgcGl4aS12NC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuT2JzZXJ2YWJsZVBvaW50fVxuICAgICAqL1xuICAgIGdldCBwb3NpdGlvbigpOiBPYnNlcnZhYmxlUG9pbnRcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbjtcbiAgICB9XG5cbiAgICBzZXQgcG9zaXRpb24odmFsdWU6IE9ic2VydmFibGVQb2ludClcbiAgICB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtLnBvc2l0aW9uLmNvcHlGcm9tKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NhbGUgZmFjdG9yIG9mIHRoZSBvYmplY3QuXG4gICAgICogQXNzaWdubWVudCBieSB2YWx1ZSBzaW5jZSBwaXhpLXY0LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7UElYSS5PYnNlcnZhYmxlUG9pbnR9XG4gICAgICovXG4gICAgZ2V0IHNjYWxlKCk6IE9ic2VydmFibGVQb2ludFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtLnNjYWxlO1xuICAgIH1cblxuICAgIHNldCBzY2FsZSh2YWx1ZTogT2JzZXJ2YWJsZVBvaW50KVxuICAgIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0uc2NhbGUuY29weUZyb20odmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBwaXZvdCBwb2ludCBvZiB0aGUgZGlzcGxheU9iamVjdCB0aGF0IGl0IHJvdGF0ZXMgYXJvdW5kLlxuICAgICAqIEFzc2lnbm1lbnQgYnkgdmFsdWUgc2luY2UgcGl4aS12NC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuT2JzZXJ2YWJsZVBvaW50fVxuICAgICAqL1xuICAgIGdldCBwaXZvdCgpOiBPYnNlcnZhYmxlUG9pbnRcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5waXZvdDtcbiAgICB9XG5cbiAgICBzZXQgcGl2b3QodmFsdWU6IE9ic2VydmFibGVQb2ludClcbiAgICB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtLnBpdm90LmNvcHlGcm9tKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2tldyBmYWN0b3IgZm9yIHRoZSBvYmplY3QgaW4gcmFkaWFucy5cbiAgICAgKiBBc3NpZ25tZW50IGJ5IHZhbHVlIHNpbmNlIHBpeGktdjQuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtQSVhJLk9ic2VydmFibGVQb2ludH1cbiAgICAgKi9cbiAgICBnZXQgc2tldygpOiBPYnNlcnZhYmxlUG9pbnRcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5za2V3O1xuICAgIH1cblxuICAgIHNldCBza2V3KHZhbHVlOiBPYnNlcnZhYmxlUG9pbnQpXG4gICAge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybS5za2V3LmNvcHlGcm9tKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcm90YXRpb24gb2YgdGhlIG9iamVjdCBpbiByYWRpYW5zLlxuICAgICAqICdyb3RhdGlvbicgYW5kICdhbmdsZScgaGF2ZSB0aGUgc2FtZSBlZmZlY3Qgb24gYSBkaXNwbGF5IG9iamVjdDsgcm90YXRpb24gaXMgaW4gcmFkaWFucywgYW5nbGUgaXMgaW4gZGVncmVlcy5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgcm90YXRpb24oKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm0ucm90YXRpb247XG4gICAgfVxuXG4gICAgc2V0IHJvdGF0aW9uKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvbiA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBhbmdsZSBvZiB0aGUgb2JqZWN0IGluIGRlZ3JlZXMuXG4gICAgICogJ3JvdGF0aW9uJyBhbmQgJ2FuZ2xlJyBoYXZlIHRoZSBzYW1lIGVmZmVjdCBvbiBhIGRpc3BsYXkgb2JqZWN0OyByb3RhdGlvbiBpcyBpbiByYWRpYW5zLCBhbmdsZSBpcyBpbiBkZWdyZWVzLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBhbmdsZSgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvbiAqIFJBRF9UT19ERUc7XG4gICAgfVxuXG4gICAgc2V0IGFuZ2xlKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvbiA9IHZhbHVlICogREVHX1RPX1JBRDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgekluZGV4IG9mIHRoZSBkaXNwbGF5T2JqZWN0LlxuICAgICAqIElmIGEgY29udGFpbmVyIGhhcyB0aGUgc29ydGFibGVDaGlsZHJlbiBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZSwgY2hpbGRyZW4gd2lsbCBiZSBhdXRvbWF0aWNhbGx5XG4gICAgICogc29ydGVkIGJ5IHpJbmRleCB2YWx1ZTsgYSBoaWdoZXIgdmFsdWUgd2lsbCBtZWFuIGl0IHdpbGwgYmUgbW92ZWQgdG93YXJkcyB0aGUgZW5kIG9mIHRoZSBhcnJheSxcbiAgICAgKiBhbmQgdGh1cyByZW5kZXJlZCBvbiB0b3Agb2Ygb3RoZXIgZGlzcGxheU9iamVjdHMgd2l0aGluIHRoZSBzYW1lIGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgekluZGV4KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3pJbmRleDtcbiAgICB9XG5cbiAgICBzZXQgekluZGV4KHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLl96SW5kZXggPSB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zb3J0RGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIHRoZSBvYmplY3QgaXMgZ2xvYmFsbHkgdmlzaWJsZS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IHdvcmxkVmlzaWJsZSgpOiBib29sZWFuXG4gICAge1xuICAgICAgICBsZXQgaXRlbSA9IHRoaXMgYXMgRGlzcGxheU9iamVjdDtcblxuICAgICAgICBkb1xuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIWl0ZW0udmlzaWJsZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGl0ZW0gPSBpdGVtLnBhcmVudDtcbiAgICAgICAgfSB3aGlsZSAoaXRlbSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIG1hc2sgZm9yIHRoZSBkaXNwbGF5T2JqZWN0LiBBIG1hc2sgaXMgYW4gb2JqZWN0IHRoYXQgbGltaXRzIHRoZSB2aXNpYmlsaXR5IG9mIGFuXG4gICAgICogb2JqZWN0IHRvIHRoZSBzaGFwZSBvZiB0aGUgbWFzayBhcHBsaWVkIHRvIGl0LiBJbiBQaXhpSlMgYSByZWd1bGFyIG1hc2sgbXVzdCBiZSBhXG4gICAgICoge0BsaW5rIFBJWEkuR3JhcGhpY3N9IG9yIGEge0BsaW5rIFBJWEkuU3ByaXRlfSBvYmplY3QuIFRoaXMgYWxsb3dzIGZvciBtdWNoIGZhc3RlciBtYXNraW5nIGluIGNhbnZhcyBhcyBpdFxuICAgICAqIHV0aWxpdGllcyBzaGFwZSBjbGlwcGluZy4gVG8gcmVtb3ZlIGEgbWFzaywgc2V0IHRoaXMgcHJvcGVydHkgdG8gYG51bGxgLlxuICAgICAqXG4gICAgICogRm9yIHNwcml0ZSBtYXNrIGJvdGggYWxwaGEgYW5kIHJlZCBjaGFubmVsIGFyZSB1c2VkLiBCbGFjayBtYXNrIGlzIHRoZSBzYW1lIGFzIHRyYW5zcGFyZW50IG1hc2suXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBncmFwaGljcyA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XG4gICAgICogZ3JhcGhpY3MuYmVnaW5GaWxsKDB4RkYzMzAwKTtcbiAgICAgKiBncmFwaGljcy5kcmF3UmVjdCg1MCwgMjUwLCAxMDAsIDEwMCk7XG4gICAgICogZ3JhcGhpY3MuZW5kRmlsbCgpO1xuICAgICAqXG4gICAgICogY29uc3Qgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xuICAgICAqIHNwcml0ZS5tYXNrID0gZ3JhcGhpY3M7XG4gICAgICogQHRvZG8gQXQgdGhlIG1vbWVudCwgUElYSS5DYW52YXNSZW5kZXJlciBkb2Vzbid0IHN1cHBvcnQgUElYSS5TcHJpdGUgYXMgbWFzay5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuQ29udGFpbmVyfFBJWEkuTWFza0RhdGF8bnVsbH1cbiAgICAgKi9cbiAgICBnZXQgbWFzaygpOiBDb250YWluZXJ8TWFza0RhdGF8bnVsbFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hc2s7XG4gICAgfVxuXG4gICAgc2V0IG1hc2sodmFsdWU6IENvbnRhaW5lcnxNYXNrRGF0YXxudWxsKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX21hc2spXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG1hc2tPYmplY3QgPSAoKHRoaXMuX21hc2sgYXMgTWFza0RhdGEpLm1hc2tPYmplY3QgfHwgdGhpcy5fbWFzaykgYXMgQ29udGFpbmVyO1xuXG4gICAgICAgICAgICBtYXNrT2JqZWN0LnJlbmRlcmFibGUgPSB0cnVlO1xuICAgICAgICAgICAgbWFza09iamVjdC5pc01hc2sgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX21hc2sgPSB2YWx1ZTtcblxuICAgICAgICBpZiAodGhpcy5fbWFzaylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbWFza09iamVjdCA9ICgodGhpcy5fbWFzayBhcyBNYXNrRGF0YSkubWFza09iamVjdCB8fCB0aGlzLl9tYXNrKSBhcyBDb250YWluZXI7XG5cbiAgICAgICAgICAgIG1hc2tPYmplY3QucmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgbWFza09iamVjdC5pc01hc2sgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVGVtcG9yYXJ5RGlzcGxheU9iamVjdCBleHRlbmRzIERpc3BsYXlPYmplY3RcbntcbiAgICBjYWxjdWxhdGVCb3VuZHM6ICgpID0+IG51bGw7XG4gICAgcmVtb3ZlQ2hpbGQ6IChjaGlsZDogRGlzcGxheU9iamVjdCkgPT4gbnVsbDtcbiAgICByZW5kZXI6IChyZW5kZXJlcjogUmVuZGVyZXIpID0+IG51bGw7XG4gICAgc29ydERpcnR5OiBib29sZWFuID0gbnVsbDtcbn1cblxuLyoqXG4gKiBEaXNwbGF5T2JqZWN0IGRlZmF1bHQgdXBkYXRlVHJhbnNmb3JtLCBkb2VzIG5vdCB1cGRhdGUgY2hpbGRyZW4gb2YgY29udGFpbmVyLlxuICogV2lsbCBjcmFzaCBpZiB0aGVyZSdzIG5vIHBhcmVudCBlbGVtZW50LlxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLkRpc3BsYXlPYmplY3QjXG4gKiBAZnVuY3Rpb24gZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybVxuICovXG5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5kaXNwbGF5T2JqZWN0VXBkYXRlVHJhbnNmb3JtID0gRGlzcGxheU9iamVjdC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtO1xuIiwgImltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSAnQHBpeGkvc2V0dGluZ3MnO1xuaW1wb3J0IHsgcmVtb3ZlSXRlbXMgfSBmcm9tICdAcGl4aS91dGlscyc7XG5pbXBvcnQgeyBEaXNwbGF5T2JqZWN0IH0gZnJvbSAnLi9EaXNwbGF5T2JqZWN0JztcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG5pbXBvcnQgdHlwZSB7IE1hc2tEYXRhLCBSZW5kZXJlciB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBJRGVzdHJveU9wdGlvbnMgfSBmcm9tICcuL0Rpc3BsYXlPYmplY3QnO1xuXG5mdW5jdGlvbiBzb3J0Q2hpbGRyZW4oYTogRGlzcGxheU9iamVjdCwgYjogRGlzcGxheU9iamVjdCk6IG51bWJlclxue1xuICAgIGlmIChhLnpJbmRleCA9PT0gYi56SW5kZXgpXG4gICAge1xuICAgICAgICByZXR1cm4gYS5fbGFzdFNvcnRlZEluZGV4IC0gYi5fbGFzdFNvcnRlZEluZGV4O1xuICAgIH1cblxuICAgIHJldHVybiBhLnpJbmRleCAtIGIuekluZGV4O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRhaW5lciBleHRlbmRzIEdsb2JhbE1peGlucy5Db250YWluZXIsIERpc3BsYXlPYmplY3Qge31cblxuLyoqXG4gKiBBIENvbnRhaW5lciByZXByZXNlbnRzIGEgY29sbGVjdGlvbiBvZiBkaXNwbGF5IG9iamVjdHMuXG4gKlxuICogSXQgaXMgdGhlIGJhc2UgY2xhc3Mgb2YgYWxsIGRpc3BsYXkgb2JqZWN0cyB0aGF0IGFjdCBhcyBhIGNvbnRhaW5lciBmb3Igb3RoZXIgb2JqZWN0cyAobGlrZSBTcHJpdGVzKS5cbiAqXG4gKmBgYGpzXG4gKiBsZXQgY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG4gKiBjb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTtcbiAqIGBgYFxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5EaXNwbGF5T2JqZWN0XG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyIGV4dGVuZHMgRGlzcGxheU9iamVjdFxue1xuICAgIHB1YmxpYyByZWFkb25seSBjaGlsZHJlbjogRGlzcGxheU9iamVjdFtdO1xuICAgIHB1YmxpYyBzb3J0YWJsZUNoaWxkcmVuOiBib29sZWFuO1xuICAgIHB1YmxpYyBzb3J0RGlydHk6IGJvb2xlYW47XG4gICAgcHVibGljIGNvbnRhaW5lclVwZGF0ZVRyYW5zZm9ybTogKCkgPT4gdm9pZDtcblxuICAgIHByb3RlY3RlZCBfd2lkdGg6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2hlaWdodDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFycmF5IG9mIGNoaWxkcmVuIG9mIHRoaXMgY29udGFpbmVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkRpc3BsYXlPYmplY3RbXX1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHNldCB0byB0cnVlLCB0aGUgY29udGFpbmVyIHdpbGwgc29ydCBpdHMgY2hpbGRyZW4gYnkgekluZGV4IHZhbHVlXG4gICAgICAgICAqIHdoZW4gdXBkYXRlVHJhbnNmb3JtKCkgaXMgY2FsbGVkLCBvciBtYW51YWxseSBpZiBzb3J0Q2hpbGRyZW4oKSBpcyBjYWxsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgYWN0dWFsbHkgY2hhbmdlcyB0aGUgb3JkZXIgb2YgZWxlbWVudHMgaW4gdGhlIGFycmF5LCBzbyBzaG91bGQgYmUgdHJlYXRlZFxuICAgICAgICAgKiBhcyBhIGJhc2ljIHNvbHV0aW9uIHRoYXQgaXMgbm90IHBlcmZvcm1hbnQgY29tcGFyZWQgdG8gb3RoZXIgc29sdXRpb25zLFxuICAgICAgICAgKiBzdWNoIGFzIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9waXhpanMvcGl4aS1kaXNwbGF5XG4gICAgICAgICAqXG4gICAgICAgICAqIEFsc28gYmUgYXdhcmUgb2YgdGhhdCB0aGlzIG1heSBub3Qgd29yayBuaWNlbHkgd2l0aCB0aGUgYWRkQ2hpbGRBdCgpIGZ1bmN0aW9uLFxuICAgICAgICAgKiBhcyB0aGUgekluZGV4IHNvcnRpbmcgbWF5IGNhdXNlIHRoZSBjaGlsZCB0byBhdXRvbWF0aWNhbGx5IHNvcnRlZCB0byBhbm90aGVyIHBvc2l0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2VlIFBJWEkuc2V0dGluZ3MuU09SVEFCTEVfQ0hJTERSRU5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc29ydGFibGVDaGlsZHJlbiA9IHNldHRpbmdzLlNPUlRBQkxFX0NISUxEUkVOO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG91bGQgY2hpbGRyZW4gYmUgc29ydGVkIGJ5IHpJbmRleCBhdCB0aGUgbmV4dCB1cGRhdGVUcmFuc2Zvcm0gY2FsbC5cbiAgICAgICAgICogV2lsbCBnZXQgYXV0b21hdGljYWxseSBzZXQgdG8gdHJ1ZSBpZiBhIG5ldyBjaGlsZCBpcyBhZGRlZCwgb3IgaWYgYSBjaGlsZCdzIHpJbmRleCBjaGFuZ2VzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3J0RGlydHkgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIERpc3BsYXlPYmplY3QgaXMgYWRkZWQgdG8gdGhpcyBDb250YWluZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkNvbnRhaW5lciNjaGlsZEFkZGVkXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBjaGlsZCAtIFRoZSBjaGlsZCBhZGRlZCB0byB0aGUgQ29udGFpbmVyLlxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuQ29udGFpbmVyfSBjb250YWluZXIgLSBUaGUgY29udGFpbmVyIHRoYXQgYWRkZWQgdGhlIGNoaWxkLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBUaGUgY2hpbGRyZW4ncyBpbmRleCBvZiB0aGUgYWRkZWQgY2hpbGQuXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgRGlzcGxheU9iamVjdCBpcyByZW1vdmVkIGZyb20gdGhpcyBDb250YWluZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjcmVtb3ZlZEZyb21cbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IGNoaWxkIC0gVGhlIGNoaWxkIHJlbW92ZWQgZnJvbSB0aGUgQ29udGFpbmVyLlxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuQ29udGFpbmVyfSBjb250YWluZXIgLSBUaGUgY29udGFpbmVyIHRoYXQgcmVtb3ZlZCByZW1vdmVkIHRoZSBjaGlsZC5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gVGhlIGZvcm1lciBjaGlsZHJlbidzIGluZGV4IG9mIHRoZSByZW1vdmVkIGNoaWxkXG4gICAgICAgICAqL1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRhYmxlIG1ldGhvZCB0aGF0IGNhbiBiZSB1c2VkIGJ5IENvbnRhaW5lciBzdWJjbGFzc2VzIHdoZW5ldmVyIHRoZSBjaGlsZHJlbiBhcnJheSBpcyBtb2RpZmllZFxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBvbkNoaWxkcmVuQ2hhbmdlKF9sZW5ndGg6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIC8qIGVtcHR5ICovXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBvbmUgb3IgbW9yZSBjaGlsZHJlbiB0byB0aGUgY29udGFpbmVyLlxuICAgICAqXG4gICAgICogTXVsdGlwbGUgaXRlbXMgY2FuIGJlIGFkZGVkIGxpa2Ugc286IGBteUNvbnRhaW5lci5hZGRDaGlsZCh0aGluZ09uZSwgdGhpbmdUd28sIHRoaW5nVGhyZWUpYFxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi5QSVhJLkRpc3BsYXlPYmplY3R9IGNoaWxkcmVuIC0gVGhlIERpc3BsYXlPYmplY3QocykgdG8gYWRkIHRvIHRoZSBjb250YWluZXJcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkRpc3BsYXlPYmplY3R9IFRoZSBmaXJzdCBjaGlsZCB0aGF0IHdhcyBhZGRlZC5cbiAgICAgKi9cbiAgICBhZGRDaGlsZDxUIGV4dGVuZHMgRGlzcGxheU9iamVjdFtdPiguLi5jaGlsZHJlbjogVCk6IFRbMF1cbiAgICB7XG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lIGFyZ3VtZW50IHdlIGNhbiBieXBhc3MgbG9vcGluZyB0aHJvdWdoIHRoZSB0aGVtXG4gICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAxKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGFycmF5IGFuZCBhZGQgYWxsIGNoaWxkcmVuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENoaWxkKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAvLyBpZiB0aGUgY2hpbGQgaGFzIGEgcGFyZW50IHRoZW4gbGV0cyByZW1vdmUgaXQgYXMgUGl4aUpTIG9iamVjdHMgY2FuIG9ubHkgZXhpc3QgaW4gb25lIHBsYWNlXG5cbiAgICAgICAgICAgIGlmIChjaGlsZC5wYXJlbnQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2hpbGQucGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuc29ydERpcnR5ID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gZW5zdXJlIGNoaWxkIHRyYW5zZm9ybSB3aWxsIGJlIHJlY2FsY3VsYXRlZFxuICAgICAgICAgICAgY2hpbGQudHJhbnNmb3JtLl9wYXJlbnRJRCA9IC0xO1xuXG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuXG4gICAgICAgICAgICAvLyBlbnN1cmUgYm91bmRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkXG4gICAgICAgICAgICB0aGlzLl9ib3VuZHNJRCsrO1xuXG4gICAgICAgICAgICAvLyBUT0RPIC0gbGV0cyBlaXRoZXIgZG8gYWxsIGNhbGxiYWNrcyBvciBhbGwgZXZlbnRzLi4gbm90IGJvdGghXG4gICAgICAgICAgICB0aGlzLm9uQ2hpbGRyZW5DaGFuZ2UodGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY2hpbGRBZGRlZCcsIGNoaWxkLCB0aGlzLCB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgY2hpbGQuZW1pdCgnYWRkZWQnLCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGlsZHJlblswXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgY2hpbGQgdG8gdGhlIGNvbnRhaW5lciBhdCBhIHNwZWNpZmllZCBpbmRleC4gSWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd25cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBjaGlsZCAtIFRoZSBjaGlsZCB0byBhZGRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBUaGUgaW5kZXggdG8gcGxhY2UgdGhlIGNoaWxkIGluXG4gICAgICogQHJldHVybiB7UElYSS5EaXNwbGF5T2JqZWN0fSBUaGUgY2hpbGQgdGhhdCB3YXMgYWRkZWQuXG4gICAgICovXG4gICAgYWRkQ2hpbGRBdDxUIGV4dGVuZHMgRGlzcGxheU9iamVjdD4oY2hpbGQ6IFQsIGluZGV4OiBudW1iZXIpOiBUXG4gICAge1xuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gdGhpcy5jaGlsZHJlbi5sZW5ndGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjaGlsZH1hZGRDaGlsZEF0OiBUaGUgaW5kZXggJHtpbmRleH0gc3VwcGxpZWQgaXMgb3V0IG9mIGJvdW5kcyAke3RoaXMuY2hpbGRyZW4ubGVuZ3RofWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoaWxkLnBhcmVudClcbiAgICAgICAge1xuICAgICAgICAgICAgY2hpbGQucGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkLnBhcmVudCA9IHRoaXM7XG4gICAgICAgIHRoaXMuc29ydERpcnR5ID0gdHJ1ZTtcblxuICAgICAgICAvLyBlbnN1cmUgY2hpbGQgdHJhbnNmb3JtIHdpbGwgYmUgcmVjYWxjdWxhdGVkXG4gICAgICAgIGNoaWxkLnRyYW5zZm9ybS5fcGFyZW50SUQgPSAtMTtcblxuICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpbmRleCwgMCwgY2hpbGQpO1xuXG4gICAgICAgIC8vIGVuc3VyZSBib3VuZHMgd2lsbCBiZSByZWNhbGN1bGF0ZWRcbiAgICAgICAgdGhpcy5fYm91bmRzSUQrKztcblxuICAgICAgICAvLyBUT0RPIC0gbGV0cyBlaXRoZXIgZG8gYWxsIGNhbGxiYWNrcyBvciBhbGwgZXZlbnRzLi4gbm90IGJvdGghXG4gICAgICAgIHRoaXMub25DaGlsZHJlbkNoYW5nZShpbmRleCk7XG4gICAgICAgIGNoaWxkLmVtaXQoJ2FkZGVkJywgdGhpcyk7XG4gICAgICAgIHRoaXMuZW1pdCgnY2hpbGRBZGRlZCcsIGNoaWxkLCB0aGlzLCBpbmRleCk7XG5cbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN3YXBzIHRoZSBwb3NpdGlvbiBvZiAyIERpc3BsYXkgT2JqZWN0cyB3aXRoaW4gdGhpcyBjb250YWluZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gY2hpbGQgLSBGaXJzdCBkaXNwbGF5IG9iamVjdCB0byBzd2FwXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IGNoaWxkMiAtIFNlY29uZCBkaXNwbGF5IG9iamVjdCB0byBzd2FwXG4gICAgICovXG4gICAgc3dhcENoaWxkcmVuKGNoaWxkOiBEaXNwbGF5T2JqZWN0LCBjaGlsZDI6IERpc3BsYXlPYmplY3QpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoY2hpbGQgPT09IGNoaWxkMilcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5kZXgxID0gdGhpcy5nZXRDaGlsZEluZGV4KGNoaWxkKTtcbiAgICAgICAgY29uc3QgaW5kZXgyID0gdGhpcy5nZXRDaGlsZEluZGV4KGNoaWxkMik7XG5cbiAgICAgICAgdGhpcy5jaGlsZHJlbltpbmRleDFdID0gY2hpbGQyO1xuICAgICAgICB0aGlzLmNoaWxkcmVuW2luZGV4Ml0gPSBjaGlsZDtcbiAgICAgICAgdGhpcy5vbkNoaWxkcmVuQ2hhbmdlKGluZGV4MSA8IGluZGV4MiA/IGluZGV4MSA6IGluZGV4Mik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggcG9zaXRpb24gb2YgYSBjaGlsZCBEaXNwbGF5T2JqZWN0IGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gY2hpbGQgLSBUaGUgRGlzcGxheU9iamVjdCBpbnN0YW5jZSB0byBpZGVudGlmeVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IHBvc2l0aW9uIG9mIHRoZSBjaGlsZCBkaXNwbGF5IG9iamVjdCB0byBpZGVudGlmeVxuICAgICAqL1xuICAgIGdldENoaWxkSW5kZXgoY2hpbGQ6IERpc3BsYXlPYmplY3QpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jaGlsZHJlbi5pbmRleE9mKGNoaWxkKTtcblxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzdXBwbGllZCBEaXNwbGF5T2JqZWN0IG11c3QgYmUgYSBjaGlsZCBvZiB0aGUgY2FsbGVyJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgcG9zaXRpb24gb2YgYW4gZXhpc3RpbmcgY2hpbGQgaW4gdGhlIGRpc3BsYXkgb2JqZWN0IGNvbnRhaW5lclxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IGNoaWxkIC0gVGhlIGNoaWxkIERpc3BsYXlPYmplY3QgaW5zdGFuY2UgZm9yIHdoaWNoIHlvdSB3YW50IHRvIGNoYW5nZSB0aGUgaW5kZXggbnVtYmVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gVGhlIHJlc3VsdGluZyBpbmRleCBudW1iZXIgZm9yIHRoZSBjaGlsZCBkaXNwbGF5IG9iamVjdFxuICAgICAqL1xuICAgIHNldENoaWxkSW5kZXgoY2hpbGQ6IERpc3BsYXlPYmplY3QsIGluZGV4OiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBpbmRleCAke2luZGV4fSBzdXBwbGllZCBpcyBvdXQgb2YgYm91bmRzICR7dGhpcy5jaGlsZHJlbi5sZW5ndGh9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLmdldENoaWxkSW5kZXgoY2hpbGQpO1xuXG4gICAgICAgIHJlbW92ZUl0ZW1zKHRoaXMuY2hpbGRyZW4sIGN1cnJlbnRJbmRleCwgMSk7IC8vIHJlbW92ZSBmcm9tIG9sZCBwb3NpdGlvblxuICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpbmRleCwgMCwgY2hpbGQpOyAvLyBhZGQgYXQgbmV3IHBvc2l0aW9uXG5cbiAgICAgICAgdGhpcy5vbkNoaWxkcmVuQ2hhbmdlKGluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjaGlsZCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBUaGUgaW5kZXggdG8gZ2V0IHRoZSBjaGlsZCBhdFxuICAgICAqIEByZXR1cm4ge1BJWEkuRGlzcGxheU9iamVjdH0gVGhlIGNoaWxkIGF0IHRoZSBnaXZlbiBpbmRleCwgaWYgYW55LlxuICAgICAqL1xuICAgIGdldENoaWxkQXQoaW5kZXg6IG51bWJlcik6IERpc3BsYXlPYmplY3RcbiAgICB7XG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5jaGlsZHJlbi5sZW5ndGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZ2V0Q2hpbGRBdDogSW5kZXggKCR7aW5kZXh9KSBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuW2luZGV4XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIG9uZSBvciBtb3JlIGNoaWxkcmVuIGZyb20gdGhlIGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uUElYSS5EaXNwbGF5T2JqZWN0fSBjaGlsZHJlbiAtIFRoZSBEaXNwbGF5T2JqZWN0KHMpIHRvIHJlbW92ZVxuICAgICAqIEByZXR1cm4ge1BJWEkuRGlzcGxheU9iamVjdH0gVGhlIGZpcnN0IGNoaWxkIHRoYXQgd2FzIHJlbW92ZWQuXG4gICAgICovXG4gICAgcmVtb3ZlQ2hpbGQ8VCBleHRlbmRzIERpc3BsYXlPYmplY3RbXT4oLi4uY2hpbGRyZW46IFQpOiBUWzBdXG4gICAge1xuICAgICAgICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSBhcmd1bWVudCB3ZSBjYW4gYnlwYXNzIGxvb3BpbmcgdGhyb3VnaCB0aGUgdGhlbVxuICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBhcmd1bWVudHMgcHJvcGVydHkgYW5kIHJlbW92ZSBhbGwgY2hpbGRyZW5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGlsZChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmNoaWxkcmVuLmluZGV4T2YoY2hpbGQpO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIC8vIGVuc3VyZSBjaGlsZCB0cmFuc2Zvcm0gd2lsbCBiZSByZWNhbGN1bGF0ZWRcbiAgICAgICAgICAgIGNoaWxkLnRyYW5zZm9ybS5fcGFyZW50SUQgPSAtMTtcbiAgICAgICAgICAgIHJlbW92ZUl0ZW1zKHRoaXMuY2hpbGRyZW4sIGluZGV4LCAxKTtcblxuICAgICAgICAgICAgLy8gZW5zdXJlIGJvdW5kcyB3aWxsIGJlIHJlY2FsY3VsYXRlZFxuICAgICAgICAgICAgdGhpcy5fYm91bmRzSUQrKztcblxuICAgICAgICAgICAgLy8gVE9ETyAtIGxldHMgZWl0aGVyIGRvIGFsbCBjYWxsYmFja3Mgb3IgYWxsIGV2ZW50cy4uIG5vdCBib3RoIVxuICAgICAgICAgICAgdGhpcy5vbkNoaWxkcmVuQ2hhbmdlKGluZGV4KTtcbiAgICAgICAgICAgIGNoaWxkLmVtaXQoJ3JlbW92ZWQnLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY2hpbGRSZW1vdmVkJywgY2hpbGQsIHRoaXMsIGluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGlsZHJlblswXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgY2hpbGQgZnJvbSB0aGUgc3BlY2lmaWVkIGluZGV4IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gVGhlIGluZGV4IHRvIGdldCB0aGUgY2hpbGQgZnJvbVxuICAgICAqIEByZXR1cm4ge1BJWEkuRGlzcGxheU9iamVjdH0gVGhlIGNoaWxkIHRoYXQgd2FzIHJlbW92ZWQuXG4gICAgICovXG4gICAgcmVtb3ZlQ2hpbGRBdChpbmRleDogbnVtYmVyKTogRGlzcGxheU9iamVjdFxuICAgIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmdldENoaWxkQXQoaW5kZXgpO1xuXG4gICAgICAgIC8vIGVuc3VyZSBjaGlsZCB0cmFuc2Zvcm0gd2lsbCBiZSByZWNhbGN1bGF0ZWQuLlxuICAgICAgICBjaGlsZC5wYXJlbnQgPSBudWxsO1xuICAgICAgICBjaGlsZC50cmFuc2Zvcm0uX3BhcmVudElEID0gLTE7XG4gICAgICAgIHJlbW92ZUl0ZW1zKHRoaXMuY2hpbGRyZW4sIGluZGV4LCAxKTtcblxuICAgICAgICAvLyBlbnN1cmUgYm91bmRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkXG4gICAgICAgIHRoaXMuX2JvdW5kc0lEKys7XG5cbiAgICAgICAgLy8gVE9ETyAtIGxldHMgZWl0aGVyIGRvIGFsbCBjYWxsYmFja3Mgb3IgYWxsIGV2ZW50cy4uIG5vdCBib3RoIVxuICAgICAgICB0aGlzLm9uQ2hpbGRyZW5DaGFuZ2UoaW5kZXgpO1xuICAgICAgICBjaGlsZC5lbWl0KCdyZW1vdmVkJywgdGhpcyk7XG4gICAgICAgIHRoaXMuZW1pdCgnY2hpbGRSZW1vdmVkJywgY2hpbGQsIHRoaXMsIGluZGV4KTtcblxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSB0aGlzIGNvbnRhaW5lciB0aGF0IGFyZSB3aXRoaW4gdGhlIGJlZ2luIGFuZCBlbmQgaW5kZXhlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYmVnaW5JbmRleD0wXSAtIFRoZSBiZWdpbm5pbmcgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtlbmRJbmRleD10aGlzLmNoaWxkcmVuLmxlbmd0aF0gLSBUaGUgZW5kaW5nIHBvc2l0aW9uLiBEZWZhdWx0IHZhbHVlIGlzIHNpemUgb2YgdGhlIGNvbnRhaW5lci5cbiAgICAgKiBAcmV0dXJucyB7UElYSS5EaXNwbGF5T2JqZWN0W119IExpc3Qgb2YgcmVtb3ZlZCBjaGlsZHJlblxuICAgICAqL1xuICAgIHJlbW92ZUNoaWxkcmVuKGJlZ2luSW5kZXggPSAwLCBlbmRJbmRleCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKTogRGlzcGxheU9iamVjdFtdXG4gICAge1xuICAgICAgICBjb25zdCBiZWdpbiA9IGJlZ2luSW5kZXg7XG4gICAgICAgIGNvbnN0IGVuZCA9IGVuZEluZGV4O1xuICAgICAgICBjb25zdCByYW5nZSA9IGVuZCAtIGJlZ2luO1xuICAgICAgICBsZXQgcmVtb3ZlZDtcblxuICAgICAgICBpZiAocmFuZ2UgPiAwICYmIHJhbmdlIDw9IGVuZClcbiAgICAgICAge1xuICAgICAgICAgICAgcmVtb3ZlZCA9IHRoaXMuY2hpbGRyZW4uc3BsaWNlKGJlZ2luLCByYW5nZSk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtb3ZlZC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZW1vdmVkW2ldLnBhcmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZWRbaV0udHJhbnNmb3JtKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZFtpXS50cmFuc2Zvcm0uX3BhcmVudElEID0gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9ib3VuZHNJRCsrO1xuXG4gICAgICAgICAgICB0aGlzLm9uQ2hpbGRyZW5DaGFuZ2UoYmVnaW5JbmRleCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtb3ZlZC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZW1vdmVkW2ldLmVtaXQoJ3JlbW92ZWQnLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2NoaWxkUmVtb3ZlZCcsIHJlbW92ZWRbaV0sIHRoaXMsIGkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVtb3ZlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyYW5nZSA9PT0gMCAmJiB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3JlbW92ZUNoaWxkcmVuOiBudW1lcmljIHZhbHVlcyBhcmUgb3V0c2lkZSB0aGUgYWNjZXB0YWJsZSByYW5nZS4nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTb3J0cyBjaGlsZHJlbiBieSB6SW5kZXguIFByZXZpb3VzIG9yZGVyIGlzIG1hbnRhaW5lZCBmb3IgMiBjaGlsZHJlbiB3aXRoIHRoZSBzYW1lIHpJbmRleC5cbiAgICAgKi9cbiAgICBzb3J0Q2hpbGRyZW4oKTogdm9pZFxuICAgIHtcbiAgICAgICAgbGV0IHNvcnRSZXF1aXJlZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyArK2kpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXTtcblxuICAgICAgICAgICAgY2hpbGQuX2xhc3RTb3J0ZWRJbmRleCA9IGk7XG5cbiAgICAgICAgICAgIGlmICghc29ydFJlcXVpcmVkICYmIGNoaWxkLnpJbmRleCAhPT0gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzb3J0UmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNvcnRSZXF1aXJlZCAmJiB0aGlzLmNoaWxkcmVuLmxlbmd0aCA+IDEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4uc29ydChzb3J0Q2hpbGRyZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zb3J0RGlydHkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB0cmFuc2Zvcm0gb24gYWxsIGNoaWxkcmVuIG9mIHRoaXMgY29udGFpbmVyIGZvciByZW5kZXJpbmdcbiAgICAgKi9cbiAgICB1cGRhdGVUcmFuc2Zvcm0oKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuc29ydGFibGVDaGlsZHJlbiAmJiB0aGlzLnNvcnREaXJ0eSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zb3J0Q2hpbGRyZW4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2JvdW5kc0lEKys7XG5cbiAgICAgICAgdGhpcy50cmFuc2Zvcm0udXBkYXRlVHJhbnNmb3JtKHRoaXMucGFyZW50LnRyYW5zZm9ybSk7XG5cbiAgICAgICAgLy8gVE9ETzogY2hlY2sgcmVuZGVyIGZsYWdzLCBob3cgdG8gcHJvY2VzcyBzdHVmZiBoZXJlXG4gICAgICAgIHRoaXMud29ybGRBbHBoYSA9IHRoaXMuYWxwaGEgKiB0aGlzLnBhcmVudC53b3JsZEFscGhhO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyArK2kpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXTtcblxuICAgICAgICAgICAgaWYgKGNoaWxkLnZpc2libGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2hpbGQudXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWNhbGN1bGF0ZXMgdGhlIGJvdW5kcyBvZiB0aGUgY29udGFpbmVyLlxuICAgICAqXG4gICAgICovXG4gICAgY2FsY3VsYXRlQm91bmRzKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX2JvdW5kcy5jbGVhcigpO1xuXG4gICAgICAgIHRoaXMuX2NhbGN1bGF0ZUJvdW5kcygpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldO1xuXG4gICAgICAgICAgICBpZiAoIWNoaWxkLnZpc2libGUgfHwgIWNoaWxkLnJlbmRlcmFibGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNoaWxkLmNhbGN1bGF0ZUJvdW5kcygpO1xuXG4gICAgICAgICAgICAvLyBUT0RPOiBmaWx0ZXIrbWFzaywgbmVlZCB0byBtYXNrIGJvdGggc29tZWhvd1xuICAgICAgICAgICAgaWYgKGNoaWxkLl9tYXNrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tPYmplY3QgPSAoKGNoaWxkLl9tYXNrIGFzIE1hc2tEYXRhKS5tYXNrT2JqZWN0IHx8IGNoaWxkLl9tYXNrKSBhcyBDb250YWluZXI7XG5cbiAgICAgICAgICAgICAgICBtYXNrT2JqZWN0LmNhbGN1bGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2JvdW5kcy5hZGRCb3VuZHNNYXNrKGNoaWxkLl9ib3VuZHMsIG1hc2tPYmplY3QuX2JvdW5kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5maWx0ZXJBcmVhKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuX2JvdW5kcy5hZGRCb3VuZHNBcmVhKGNoaWxkLl9ib3VuZHMsIGNoaWxkLmZpbHRlckFyZWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuX2JvdW5kcy5hZGRCb3VuZHMoY2hpbGQuX2JvdW5kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9ib3VuZHMudXBkYXRlSUQgPSB0aGlzLl9ib3VuZHNJRDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGxvY2FsIGJvdW5kcyBvZiB0aGUgZGlzcGxheU9iamVjdCBhcyBhIHJlY3RhbmdsZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSBbcmVjdF0gLSBPcHRpb25hbCByZWN0YW5nbGUgdG8gc3RvcmUgdGhlIHJlc3VsdCBvZiB0aGUgYm91bmRzIGNhbGN1bGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NraXBDaGlsZHJlblVwZGF0ZT1mYWxzZV0gLSBTZXR0aW5nIHRvIGB0cnVlYCB3aWxsIHN0b3AgcmUtY2FsY3VsYXRpb24gb2YgY2hpbGRyZW4gdHJhbnNmb3JtcyxcbiAgICAgKiAgaXQgd2FzIGRlZmF1bHQgYmVoYXZpb3VyIG9mIHBpeGkgNC4wLTUuMiBhbmQgY2F1c2VkIG1hbnkgcHJvYmxlbXMgdG8gdXNlcnMuXG4gICAgICogQHJldHVybiB7UElYSS5SZWN0YW5nbGV9IFRoZSByZWN0YW5ndWxhciBib3VuZGluZyBhcmVhLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRMb2NhbEJvdW5kcyhyZWN0PzogUmVjdGFuZ2xlLCBza2lwQ2hpbGRyZW5VcGRhdGUgPSBmYWxzZSk6IFJlY3RhbmdsZVxuICAgIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc3VwZXIuZ2V0TG9jYWxCb3VuZHMocmVjdCk7XG5cbiAgICAgICAgaWYgKCFza2lwQ2hpbGRyZW5VcGRhdGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyArK2kpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLnZpc2libGUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZC51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY2FsY3VsYXRlcyB0aGUgYm91bmRzIG9mIHRoZSBvYmplY3QuIE92ZXJyaWRlIHRoaXMgdG9cbiAgICAgKiBjYWxjdWxhdGUgdGhlIGJvdW5kcyBvZiB0aGUgc3BlY2lmaWMgb2JqZWN0IChub3QgaW5jbHVkaW5nIGNoaWxkcmVuKS5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX2NhbGN1bGF0ZUJvdW5kcygpOiB2b2lkXG4gICAge1xuICAgICAgICAvLyBGSUxMIElOLy9cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIHRoZSBvYmplY3QgdXNpbmcgdGhlIFdlYkdMIHJlbmRlcmVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyXG4gICAgICovXG4gICAgcmVuZGVyKHJlbmRlcmVyOiBSZW5kZXJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIGlmIHRoZSBvYmplY3QgaXMgbm90IHZpc2libGUgb3IgdGhlIGFscGhhIGlzIDAgdGhlbiBubyBuZWVkIHRvIHJlbmRlciB0aGlzIGVsZW1lbnRcbiAgICAgICAgaWYgKCF0aGlzLnZpc2libGUgfHwgdGhpcy53b3JsZEFscGhhIDw9IDAgfHwgIXRoaXMucmVuZGVyYWJsZSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZG8gYSBxdWljayBjaGVjayB0byBzZWUgaWYgdGhpcyBlbGVtZW50IGhhcyBhIG1hc2sgb3IgYSBmaWx0ZXIuXG4gICAgICAgIGlmICh0aGlzLl9tYXNrIHx8ICh0aGlzLmZpbHRlcnMgJiYgdGhpcy5maWx0ZXJzLmxlbmd0aCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQWR2YW5jZWQocmVuZGVyZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyKHJlbmRlcmVyKTtcblxuICAgICAgICAgICAgLy8gc2ltcGxlIHJlbmRlciBjaGlsZHJlbiFcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyArK2kpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbltpXS5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBvYmplY3QgdXNpbmcgdGhlIFdlYkdMIHJlbmRlcmVyIGFuZCBhZHZhbmNlZCBmZWF0dXJlcy5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHJlbmRlckFkdmFuY2VkKHJlbmRlcmVyOiBSZW5kZXJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHJlbmRlcmVyLmJhdGNoLmZsdXNoKCk7XG5cbiAgICAgICAgY29uc3QgZmlsdGVycyA9IHRoaXMuZmlsdGVycztcbiAgICAgICAgY29uc3QgbWFzayA9IHRoaXMuX21hc2s7XG5cbiAgICAgICAgLy8gcHVzaCBmaWx0ZXIgZmlyc3QgYXMgd2UgbmVlZCB0byBlbnN1cmUgdGhlIHN0ZW5jaWwgYnVmZmVyIGlzIGNvcnJlY3QgZm9yIGFueSBtYXNraW5nXG4gICAgICAgIGlmIChmaWx0ZXJzKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2VuYWJsZWRGaWx0ZXJzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VuYWJsZWRGaWx0ZXJzID0gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZWRGaWx0ZXJzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVycy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyc1tpXS5lbmFibGVkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZW5hYmxlZEZpbHRlcnMucHVzaChmaWx0ZXJzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9lbmFibGVkRmlsdGVycy5sZW5ndGgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuZmlsdGVyLnB1c2godGhpcywgdGhpcy5fZW5hYmxlZEZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hc2spXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLm1hc2sucHVzaCh0aGlzLCB0aGlzLl9tYXNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCB0aGlzIG9iamVjdCB0byB0aGUgYmF0Y2gsIG9ubHkgcmVuZGVyZWQgaWYgaXQgaGFzIGEgdGV4dHVyZS5cbiAgICAgICAgdGhpcy5fcmVuZGVyKHJlbmRlcmVyKTtcblxuICAgICAgICAvLyBub3cgbG9vcCB0aHJvdWdoIHRoZSBjaGlsZHJlbiBhbmQgbWFrZSBzdXJlIHRoZXkgZ2V0IHJlbmRlcmVkXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5baV0ucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmRlcmVyLmJhdGNoLmZsdXNoKCk7XG5cbiAgICAgICAgaWYgKG1hc2spXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLm1hc2sucG9wKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbHRlcnMgJiYgdGhpcy5fZW5hYmxlZEZpbHRlcnMgJiYgdGhpcy5fZW5hYmxlZEZpbHRlcnMubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZW5kZXJlci5maWx0ZXIucG9wKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUbyBiZSBvdmVycmlkZGVuIGJ5IHRoZSBzdWJjbGFzc2VzLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX3JlbmRlcihfcmVuZGVyZXI6IFJlbmRlcmVyKTogdm9pZCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAge1xuICAgICAgICAvLyB0aGlzIGlzIHdoZXJlIGNvbnRlbnQgaXRzZWxmIGdldHMgcmVuZGVyZWQuLi5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBpbnRlcm5hbCByZWZlcmVuY2VzIGFuZCBsaXN0ZW5lcnMgYXMgd2VsbCBhcyByZW1vdmVzIGNoaWxkcmVuIGZyb20gdGhlIGRpc3BsYXkgbGlzdC5cbiAgICAgKiBEbyBub3QgdXNlIGEgQ29udGFpbmVyIGFmdGVyIGNhbGxpbmcgYGRlc3Ryb3lgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R8Ym9vbGVhbn0gW29wdGlvbnNdIC0gT3B0aW9ucyBwYXJhbWV0ZXIuIEEgYm9vbGVhbiB3aWxsIGFjdCBhcyBpZiBhbGwgb3B0aW9uc1xuICAgICAqICBoYXZlIGJlZW4gc2V0IHRvIHRoYXQgdmFsdWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNoaWxkcmVuPWZhbHNlXSAtIGlmIHNldCB0byB0cnVlLCBhbGwgdGhlIGNoaWxkcmVuIHdpbGwgaGF2ZSB0aGVpciBkZXN0cm95XG4gICAgICogIG1ldGhvZCBjYWxsZWQgYXMgd2VsbC4gJ29wdGlvbnMnIHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRob3NlIGNhbGxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudGV4dHVyZT1mYWxzZV0gLSBPbmx5IHVzZWQgZm9yIGNoaWxkIFNwcml0ZXMgaWYgb3B0aW9ucy5jaGlsZHJlbiBpcyBzZXQgdG8gdHJ1ZVxuICAgICAqICBTaG91bGQgaXQgZGVzdHJveSB0aGUgdGV4dHVyZSBvZiB0aGUgY2hpbGQgc3ByaXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5iYXNlVGV4dHVyZT1mYWxzZV0gLSBPbmx5IHVzZWQgZm9yIGNoaWxkIFNwcml0ZXMgaWYgb3B0aW9ucy5jaGlsZHJlbiBpcyBzZXQgdG8gdHJ1ZVxuICAgICAqICBTaG91bGQgaXQgZGVzdHJveSB0aGUgYmFzZSB0ZXh0dXJlIG9mIHRoZSBjaGlsZCBzcHJpdGVcbiAgICAgKi9cbiAgICBkZXN0cm95KG9wdGlvbnM/OiBJRGVzdHJveU9wdGlvbnN8Ym9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcblxuICAgICAgICB0aGlzLnNvcnREaXJ0eSA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGRlc3Ryb3lDaGlsZHJlbiA9IHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicgPyBvcHRpb25zIDogb3B0aW9ucyAmJiBvcHRpb25zLmNoaWxkcmVuO1xuXG4gICAgICAgIGNvbnN0IG9sZENoaWxkcmVuID0gdGhpcy5yZW1vdmVDaGlsZHJlbigwLCB0aGlzLmNoaWxkcmVuLmxlbmd0aCk7XG5cbiAgICAgICAgaWYgKGRlc3Ryb3lDaGlsZHJlbilcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvbGRDaGlsZHJlbi5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvbGRDaGlsZHJlbltpXS5kZXN0cm95KG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIHRoZSBDb250YWluZXIsIHNldHRpbmcgdGhpcyB3aWxsIGFjdHVhbGx5IG1vZGlmeSB0aGUgc2NhbGUgdG8gYWNoaWV2ZSB0aGUgdmFsdWUgc2V0XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHdpZHRoKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGUueCAqIHRoaXMuZ2V0TG9jYWxCb3VuZHMoKS53aWR0aDtcbiAgICB9XG5cbiAgICBzZXQgd2lkdGgodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5nZXRMb2NhbEJvdW5kcygpLndpZHRoO1xuXG4gICAgICAgIGlmICh3aWR0aCAhPT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zY2FsZS54ID0gdmFsdWUgLyB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2NhbGUueCA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl93aWR0aCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBoZWlnaHQgb2YgdGhlIENvbnRhaW5lciwgc2V0dGluZyB0aGlzIHdpbGwgYWN0dWFsbHkgbW9kaWZ5IHRoZSBzY2FsZSB0byBhY2hpZXZlIHRoZSB2YWx1ZSBzZXRcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgaGVpZ2h0KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGUueSAqIHRoaXMuZ2V0TG9jYWxCb3VuZHMoKS5oZWlnaHQ7XG4gICAgfVxuXG4gICAgc2V0IGhlaWdodCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5nZXRMb2NhbEJvdW5kcygpLmhlaWdodDtcblxuICAgICAgICBpZiAoaGVpZ2h0ICE9PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNjYWxlLnkgPSB2YWx1ZSAvIGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2NhbGUueSA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9oZWlnaHQgPSB2YWx1ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udGFpbmVyIGRlZmF1bHQgdXBkYXRlVHJhbnNmb3JtLCBkb2VzIHVwZGF0ZSBjaGlsZHJlbiBvZiBjb250YWluZXIuXG4gKiBXaWxsIGNyYXNoIGlmIHRoZXJlJ3Mgbm8gcGFyZW50IGVsZW1lbnQuXG4gKlxuICogQG1lbWJlcm9mIFBJWEkuQ29udGFpbmVyI1xuICogQGZ1bmN0aW9uIGNvbnRhaW5lclVwZGF0ZVRyYW5zZm9ybVxuICovXG5Db250YWluZXIucHJvdG90eXBlLmNvbnRhaW5lclVwZGF0ZVRyYW5zZm9ybSA9IENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtO1xuIiwgImltcG9ydCB0eXBlIHsgRGlzcGxheU9iamVjdCB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuXG5leHBvcnQgdHlwZSBQb2ludGVyRXZlbnRzID0gJ2F1dG8nXG58ICdub25lJ1xufCAndmlzaWJsZVBhaW50ZWQnXG58ICd2aXNpYmxlRmlsbCdcbnwgJ3Zpc2libGVTdHJva2UnXG58ICd2aXNpYmxlJ1xufCAncGFpbnRlZCdcbnwgJ2ZpbGwnXG58ICdzdHJva2UnXG58ICdhbGwnXG58ICdpbmhlcml0JztcblxuZXhwb3J0IGludGVyZmFjZSBJQWNjZXNzaWJsZVRhcmdldCB7XG4gICAgYWNjZXNzaWJsZTogYm9vbGVhbjtcbiAgICBhY2Nlc3NpYmxlVGl0bGU6IHN0cmluZztcbiAgICBhY2Nlc3NpYmxlSGludDogc3RyaW5nO1xuICAgIHRhYkluZGV4OiBudW1iZXI7XG4gICAgX2FjY2Vzc2libGVBY3RpdmU6IGJvb2xlYW47XG4gICAgX2FjY2Vzc2libGVEaXY6IElBY2Nlc3NpYmxlSFRNTEVsZW1lbnQ7XG4gICAgYWNjZXNzaWJsZVR5cGU6IHN0cmluZztcbiAgICBhY2Nlc3NpYmxlUG9pbnRlckV2ZW50czogUG9pbnRlckV2ZW50cztcbiAgICBhY2Nlc3NpYmxlQ2hpbGRyZW46IHRydWU7XG4gICAgcmVuZGVySWQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQWNjZXNzaWJsZUhUTUxFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIHR5cGU/OiBzdHJpbmc7XG4gICAgZGlzcGxheU9iamVjdD86IERpc3BsYXlPYmplY3Q7XG59XG5cbi8qKlxuICogRGVmYXVsdCBwcm9wZXJ0eSB2YWx1ZXMgb2YgYWNjZXNzaWJsZSBvYmplY3RzXG4gKiB1c2VkIGJ5IHtAbGluayBQSVhJLkFjY2Vzc2liaWxpdHlNYW5hZ2VyfS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uIGFjY2Vzc2libGVUYXJnZXRcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQGV4YW1wbGVcbiAqICAgICAgZnVuY3Rpb24gTXlPYmplY3QoKSB7fVxuICpcbiAqICAgICAgT2JqZWN0LmFzc2lnbihcbiAqICAgICAgICAgIE15T2JqZWN0LnByb3RvdHlwZSxcbiAqICAgICAgICAgIFBJWEkuYWNjZXNzaWJsZVRhcmdldFxuICogICAgICApO1xuICovXG5leHBvcnQgY29uc3QgYWNjZXNzaWJsZVRhcmdldDogSUFjY2Vzc2libGVUYXJnZXQgPSB7XG4gICAgLyoqXG4gICAgICogIEZsYWcgZm9yIGlmIHRoZSBvYmplY3QgaXMgYWNjZXNzaWJsZS4gSWYgdHJ1ZSBBY2Nlc3NpYmlsaXR5TWFuYWdlciB3aWxsIG92ZXJsYXkgYVxuICAgICAqICAgc2hhZG93IGRpdiB3aXRoIGF0dHJpYnV0ZXMgc2V0XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJvZiBQSVhJLkRpc3BsYXlPYmplY3QjXG4gICAgICovXG4gICAgYWNjZXNzaWJsZTogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0aXRsZSBhdHRyaWJ1dGUgb2YgdGhlIHNoYWRvdyBkaXZcbiAgICAgKiBJZiBhY2Nlc3NpYmxlVGl0bGUgQU5EIGFjY2Vzc2libGVIaW50IGhhcyBub3QgYmVlbiB0aGlzIHdpbGwgZGVmYXVsdCB0byAnZGlzcGxheU9iamVjdCBbdGFiSW5kZXhdJ1xuICAgICAqXG4gICAgICogQG1lbWJlciB7P3N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICAgICAqL1xuICAgIGFjY2Vzc2libGVUaXRsZTogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGFyaWEtbGFiZWwgYXR0cmlidXRlIG9mIHRoZSBzaGFkb3cgZGl2XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICogQG1lbWJlcm9mIFBJWEkuRGlzcGxheU9iamVjdCNcbiAgICAgKi9cbiAgICBhY2Nlc3NpYmxlSGludDogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICAgICAqIEBwcml2YXRlXG4gICAgICogQHRvZG8gTmVlZHMgZG9jcy5cbiAgICAgKi9cbiAgICB0YWJJbmRleDogMCxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQG1lbWJlcm9mIFBJWEkuRGlzcGxheU9iamVjdCNcbiAgICAgKiBAdG9kbyBOZWVkcyBkb2NzLlxuICAgICAqL1xuICAgIF9hY2Nlc3NpYmxlQWN0aXZlOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQG1lbWJlcm9mIFBJWEkuRGlzcGxheU9iamVjdCNcbiAgICAgKiBAdG9kbyBOZWVkcyBkb2NzLlxuICAgICAqL1xuICAgIF9hY2Nlc3NpYmxlRGl2OiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogU3BlY2lmeSB0aGUgdHlwZSBvZiBkaXYgdGhlIGFjY2Vzc2libGUgbGF5ZXIgaXMuIFNjcmVlbiByZWFkZXJzIHRyZWF0IHRoZSBlbGVtZW50IGRpZmZlcmVudGx5XG4gICAgICogZGVwZW5kaW5nIG9uIHRoaXMgdHlwZS4gRGVmYXVsdHMgdG8gYnV0dG9uLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBQSVhJLkRpc3BsYXlPYmplY3QjXG4gICAgICogQGRlZmF1bHQgJ2J1dHRvbidcbiAgICAgKi9cbiAgICBhY2Nlc3NpYmxlVHlwZTogJ2J1dHRvbicsXG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZ5IHRoZSBwb2ludGVyLWV2ZW50cyB0aGUgYWNjZXNzaWJsZSBkaXYgd2lsbCB1c2VcbiAgICAgKiBEZWZhdWx0cyB0byBhdXRvLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBQSVhJLkRpc3BsYXlPYmplY3QjXG4gICAgICogQGRlZmF1bHQgJ2F1dG8nXG4gICAgICovXG4gICAgYWNjZXNzaWJsZVBvaW50ZXJFdmVudHM6ICdhdXRvJyxcblxuICAgIC8qKlxuICAgICAqIFNldHRpbmcgdG8gZmFsc2Ugd2lsbCBwcmV2ZW50IGFueSBjaGlsZHJlbiBpbnNpZGUgdGhpcyBjb250YWluZXIgdG9cbiAgICAgKiBiZSBhY2Nlc3NpYmxlLiBEZWZhdWx0cyB0byB0cnVlLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgKi9cbiAgICBhY2Nlc3NpYmxlQ2hpbGRyZW46IHRydWUsXG5cbiAgICByZW5kZXJJZDogLTEsXG59O1xuIiwgImltcG9ydCB7IERpc3BsYXlPYmplY3QgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmltcG9ydCB7IGlzTW9iaWxlLCByZW1vdmVJdGVtcyB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IGFjY2Vzc2libGVUYXJnZXQgfSBmcm9tICcuL2FjY2Vzc2libGVUYXJnZXQnO1xuXG5pbXBvcnQgdHlwZSB7IFJlY3RhbmdsZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHR5cGUgeyBDb250YWluZXIgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIsIEFic3RyYWN0UmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgSUFjY2Vzc2libGVIVE1MRWxlbWVudCB9IGZyb20gJy4vYWNjZXNzaWJsZVRhcmdldCc7XG5cbi8vIGFkZCBzb21lIGV4dHJhIHZhcmlhYmxlcyB0byB0aGUgY29udGFpbmVyLi5cbkRpc3BsYXlPYmplY3QubWl4aW4oYWNjZXNzaWJsZVRhcmdldCk7XG5cbmNvbnN0IEtFWV9DT0RFX1RBQiA9IDk7XG5cbmNvbnN0IERJVl9UT1VDSF9TSVpFID0gMTAwO1xuY29uc3QgRElWX1RPVUNIX1BPU19YID0gMDtcbmNvbnN0IERJVl9UT1VDSF9QT1NfWSA9IDA7XG5jb25zdCBESVZfVE9VQ0hfWklOREVYID0gMjtcblxuY29uc3QgRElWX0hPT0tfU0laRSA9IDE7XG5jb25zdCBESVZfSE9PS19QT1NfWCA9IC0xMDAwO1xuY29uc3QgRElWX0hPT0tfUE9TX1kgPSAtMTAwMDtcbmNvbnN0IERJVl9IT09LX1pJTkRFWCA9IDI7XG5cbi8qKlxuICogVGhlIEFjY2Vzc2liaWxpdHkgbWFuYWdlciByZWNyZWF0ZXMgdGhlIGFiaWxpdHkgdG8gdGFiIGFuZCBoYXZlIGNvbnRlbnQgcmVhZCBieSBzY3JlZW4gcmVhZGVycy5cbiAqIFRoaXMgaXMgdmVyeSBpbXBvcnRhbnQgYXMgaXQgY2FuIHBvc3NpYmx5IGhlbHAgcGVvcGxlIHdpdGggZGlzYWJpbGl0aWVzIGFjY2VzcyBQaXhpSlMgY29udGVudC5cbiAqXG4gKiBBIERpc3BsYXlPYmplY3QgY2FuIGJlIG1hZGUgYWNjZXNzaWJsZSBqdXN0IGxpa2UgaXQgY2FuIGJlIG1hZGUgaW50ZXJhY3RpdmUuIFRoaXMgbWFuYWdlciB3aWxsIG1hcCB0aGVcbiAqIGV2ZW50cyBhcyBpZiB0aGUgbW91c2Ugd2FzIGJlaW5nIHVzZWQsIG1pbmltaXppbmcgdGhlIGVmZm9ydCByZXF1aXJlZCB0byBpbXBsZW1lbnQuXG4gKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgYnkgZGVmYXVsdCwgYW5kIGNhbiBiZSBmb3VuZCBhdCBgcmVuZGVyZXIucGx1Z2lucy5hY2Nlc3NpYmlsaXR5YFxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEFjY2Vzc2liaWxpdHlNYW5hZ2VyXG57XG4gICAgcHVibGljIGRlYnVnOiBib29sZWFuO1xuICAgIHB1YmxpYyByZW5kZXJlcjogQWJzdHJhY3RSZW5kZXJlcnxSZW5kZXJlcjtcblxuICAgIHByaXZhdGUgX2lzQWN0aXZlOiBib29sZWFuO1xuICAgIHByaXZhdGUgX2lzTW9iaWxlQWNjZXNzaWJpbGl0eTogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9ob29rRGl2OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGRpdjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBwb29sOiBJQWNjZXNzaWJsZUhUTUxFbGVtZW50W107XG4gICAgcHJpdmF0ZSByZW5kZXJJZDogbnVtYmVyO1xuICAgIHByaXZhdGUgY2hpbGRyZW46IERpc3BsYXlPYmplY3RbXTtcbiAgICBwcml2YXRlIGFuZHJvaWRVcGRhdGVDb3VudDogbnVtYmVyO1xuICAgIHByaXZhdGUgYW5kcm9pZFVwZGF0ZUZyZXF1ZW5jeTogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLkNhbnZhc1JlbmRlcmVyfFBJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gQSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogQWJzdHJhY3RSZW5kZXJlcnxSZW5kZXJlcilcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P0hUTUxFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5faG9va0RpdiA9IG51bGw7XG5cbiAgICAgICAgaWYgKGlzTW9iaWxlLnRhYmxldCB8fCBpc01vYmlsZS5waG9uZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUb3VjaEhvb2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZpcnN0IHdlIGNyZWF0ZSBhIGRpdiB0aGF0IHdpbGwgc2l0IG92ZXIgdGhlIFBpeGlKUyBlbGVtZW50LiBUaGlzIGlzIHdoZXJlIHRoZSBkaXYgb3ZlcmxheXMgd2lsbCBnby5cbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgZGl2LnN0eWxlLndpZHRoID0gYCR7RElWX1RPVUNIX1NJWkV9cHhgO1xuICAgICAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gYCR7RElWX1RPVUNIX1NJWkV9cHhgO1xuICAgICAgICBkaXYuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBkaXYuc3R5bGUudG9wID0gYCR7RElWX1RPVUNIX1BPU19YfXB4YDtcbiAgICAgICAgZGl2LnN0eWxlLmxlZnQgPSBgJHtESVZfVE9VQ0hfUE9TX1l9cHhgO1xuICAgICAgICBkaXYuc3R5bGUuekluZGV4ID0gRElWX1RPVUNIX1pJTkRFWC50b1N0cmluZygpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGlzIHRoZSBkb20gZWxlbWVudCB0aGF0IHdpbGwgc2l0IG92ZXIgdGhlIFBpeGlKUyBlbGVtZW50LiBUaGlzIGlzIHdoZXJlIHRoZSBkaXYgb3ZlcmxheXMgd2lsbCBnby5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXYgPSBkaXY7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2ltcGxlIHBvb2wgZm9yIHN0b3JpbmcgZGl2cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvb2wgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBpcyBhIHRpY2sgdXNlZCB0byBjaGVjayBpZiBhbiBvYmplY3QgaXMgbm8gbG9uZ2VyIGJlaW5nIHJlbmRlcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW5kZXJJZCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHRpbmcgdGhpcyB0byB0cnVlIHdpbGwgdmlzdWFsbHkgc2hvdyB0aGUgZGl2cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlYnVnID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZW5kZXJlciB0aGlzIGFjY2Vzc2liaWxpdHkgbWFuYWdlciB3b3JrcyBmb3IuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuQWJzdHJhY3RSZW5kZXJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFycmF5IG9mIGN1cnJlbnRseSBhY3RpdmUgYWNjZXNzaWJsZSBpdGVtcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7QXJyYXk8Kj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHByZS1iaW5kIHRoZSBmdW5jdGlvbnNcbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fb25LZXlEb3duID0gdGhpcy5fb25LZXlEb3duLmJpbmQodGhpcyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHByZS1iaW5kIHRoZSBmdW5jdGlvbnNcbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fb25Nb3VzZU1vdmUgPSB0aGlzLl9vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuX2lzQWN0aXZlID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5faXNNb2JpbGVBY2Nlc3NpYmlsaXR5ID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvdW50IHRvIHRocm90dGxlIGRpdiB1cGRhdGVzIG9uIGFuZHJvaWQgZGV2aWNlc1xuICAgICAgICAgKiBAdHlwZSBudW1iZXJcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYW5kcm9pZFVwZGF0ZUNvdW50ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIGZyZXF1ZW5jeSB0byB1cGRhdGUgdGhlIGRpdiBlbGVtZW50cyAoKVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbmRyb2lkVXBkYXRlRnJlcXVlbmN5ID0gNTAwOyAvLyAyZnBzXG5cbiAgICAgICAgLy8gbGV0IGxpc3RlbiBmb3IgdGFiLi4gb25jZSBwcmVzc2VkIHdlIGNhbiBmaXJlIHVwIGFuZCBzaG93IHRoZSBhY2Nlc3NpYmlsaXR5IGxheWVyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fb25LZXlEb3duLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmbGFnXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBnZXQgaXNBY3RpdmUoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzQWN0aXZlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZmxhZ1xuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IGlzTW9iaWxlQWNjZXNzaWJpbGl0eSgpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNNb2JpbGVBY2Nlc3NpYmlsaXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIHRvdWNoIGhvb2tzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZVRvdWNoSG9vaygpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBob29rRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgICAgICAgaG9va0Rpdi5zdHlsZS53aWR0aCA9IGAke0RJVl9IT09LX1NJWkV9cHhgO1xuICAgICAgICBob29rRGl2LnN0eWxlLmhlaWdodCA9IGAke0RJVl9IT09LX1NJWkV9cHhgO1xuICAgICAgICBob29rRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgaG9va0Rpdi5zdHlsZS50b3AgPSBgJHtESVZfSE9PS19QT1NfWH1weGA7XG4gICAgICAgIGhvb2tEaXYuc3R5bGUubGVmdCA9IGAke0RJVl9IT09LX1BPU19ZfXB4YDtcbiAgICAgICAgaG9va0Rpdi5zdHlsZS56SW5kZXggPSBESVZfSE9PS19aSU5ERVgudG9TdHJpbmcoKTtcbiAgICAgICAgaG9va0Rpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0ZGMDAwMCc7XG4gICAgICAgIGhvb2tEaXYudGl0bGUgPSAnc2VsZWN0IHRvIGVuYWJsZSBhY2Nlc3NhYmlsaXR5IGZvciB0aGlzIGNvbnRlbnQnO1xuXG4gICAgICAgIGhvb2tEaXYuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PlxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9pc01vYmlsZUFjY2Vzc2liaWxpdHkgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95VG91Y2hIb29rKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaG9va0Rpdik7XG4gICAgICAgIHRoaXMuX2hvb2tEaXYgPSBob29rRGl2O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoZSB0b3VjaCBob29rcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBkZXN0cm95VG91Y2hIb29rKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5faG9va0RpdilcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5faG9va0Rpdik7XG4gICAgICAgIHRoaXMuX2hvb2tEaXYgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjdGl2YXRpbmcgd2lsbCBjYXVzZSB0aGUgQWNjZXNzaWJpbGl0eSBsYXllciB0byBiZSBzaG93bi5cbiAgICAgKiBUaGlzIGlzIGNhbGxlZCB3aGVuIGEgdXNlciBwcmVzc2VzIHRoZSB0YWIga2V5LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFjdGl2YXRlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9pc0FjdGl2ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faXNBY3RpdmUgPSB0cnVlO1xuXG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSwgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fb25LZXlEb3duLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3Rpbmcgd2hlbiBDYW52YXNSZW5kZXJlciBpcyBjb252ZXJ0ZWRcbiAgICAgICAgKHRoaXMucmVuZGVyZXIgYXMgQWJzdHJhY3RSZW5kZXJlcikub24oJ3Bvc3RyZW5kZXInLCB0aGlzLnVwZGF0ZSwgdGhpcyk7XG5cbiAgICAgICAgaWYgKCh0aGlzLnJlbmRlcmVyIGFzIEFic3RyYWN0UmVuZGVyZXIpLnZpZXcucGFyZW50Tm9kZSlcbiAgICAgICAge1xuICAgICAgICAgICAgKHRoaXMucmVuZGVyZXIgYXMgQWJzdHJhY3RSZW5kZXJlcikudmlldy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuZGl2KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlYWN0aXZhdGluZyB3aWxsIGNhdXNlIHRoZSBBY2Nlc3NpYmlsaXR5IGxheWVyIHRvIGJlIGhpZGRlbi5cbiAgICAgKiBUaGlzIGlzIGNhbGxlZCB3aGVuIGEgdXNlciBtb3ZlcyB0aGUgbW91c2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgZGVhY3RpdmF0ZSgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuX2lzQWN0aXZlIHx8IHRoaXMuX2lzTW9iaWxlQWNjZXNzaWJpbGl0eSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcblxuICAgICAgICB3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25Nb3VzZU1vdmUsIHRydWUpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uS2V5RG93biwgZmFsc2UpO1xuXG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSBjYXN0aW5nIHdoZW4gQ2FudmFzUmVuZGVyZXIgaXMgY29udmVydGVkXG4gICAgICAgICh0aGlzLnJlbmRlcmVyIGFzIEFic3RyYWN0UmVuZGVyZXIpLm9mZigncG9zdHJlbmRlcicsIHRoaXMudXBkYXRlKTtcblxuICAgICAgICBpZiAodGhpcy5kaXYucGFyZW50Tm9kZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRpdik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHJlY3Vyc2l2ZSBmdW5jdGlvbiB3aWxsIHJ1biB0aHJvdWdoIHRoZSBzY2VuZSBncmFwaCBhbmQgYWRkIGFueSBuZXcgYWNjZXNzaWJsZSBvYmplY3RzIHRvIHRoZSBET00gbGF5ZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UElYSS5Db250YWluZXJ9IGRpc3BsYXlPYmplY3QgLSBUaGUgRGlzcGxheU9iamVjdCB0byBjaGVjay5cbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZUFjY2Vzc2libGVPYmplY3RzKGRpc3BsYXlPYmplY3Q6IENvbnRhaW5lcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICghZGlzcGxheU9iamVjdC52aXNpYmxlIHx8ICFkaXNwbGF5T2JqZWN0LmFjY2Vzc2libGVDaGlsZHJlbilcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpc3BsYXlPYmplY3QuYWNjZXNzaWJsZSAmJiBkaXNwbGF5T2JqZWN0LmludGVyYWN0aXZlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIWRpc3BsYXlPYmplY3QuX2FjY2Vzc2libGVBY3RpdmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDaGlsZChkaXNwbGF5T2JqZWN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGlzcGxheU9iamVjdC5yZW5kZXJJZCA9IHRoaXMucmVuZGVySWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGRpc3BsYXlPYmplY3QuY2hpbGRyZW47XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBY2Nlc3NpYmxlT2JqZWN0cyhjaGlsZHJlbltpXSBhcyBDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmVmb3JlIGVhY2ggcmVuZGVyIHRoaXMgZnVuY3Rpb24gd2lsbCBlbnN1cmUgdGhhdCBhbGwgZGl2cyBhcmUgbWFwcGVkIGNvcnJlY3RseSB0byB0aGVpciBEaXNwbGF5T2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGUoKTogdm9pZFxuICAgIHtcbiAgICAgICAgLyogT24gQW5kcm9pZCBkZWZhdWx0IHdlYiBicm93c2VyLCB0YWIgb3JkZXIgc2VlbXMgdG8gYmUgY2FsY3VsYXRlZCBieSBwb3NpdGlvbiByYXRoZXIgdGhhbiB0YWJJbmRleCxcbiAgICAgICAgKiAgbW92aW5nIGJ1dHRvbnMgY2FuIGNhdXNlIGZvY3VzIHRvIGZsaWNrZXIgYmV0d2VlbiB0d28gYnV0dG9ucyBtYWtpbmcgaXQgaGFyZC9pbXBvc3NpYmxlIHRvIG5hdmlnYXRlLFxuICAgICAgICAqICBzbyBJIGFtIGp1c3QgcnVubmluZyB1cGRhdGUgZXZlcnkgaGFsZiBhIHNlY29uZCwgc2VlbXMgdG8gZml4IGl0LlxuICAgICAgICAqL1xuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgICAgICBpZiAoaXNNb2JpbGUuYW5kcm9pZC5kZXZpY2UgJiYgbm93IDwgdGhpcy5hbmRyb2lkVXBkYXRlQ291bnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYW5kcm9pZFVwZGF0ZUNvdW50ID0gbm93ICsgdGhpcy5hbmRyb2lkVXBkYXRlRnJlcXVlbmN5O1xuXG4gICAgICAgIGlmICghKHRoaXMucmVuZGVyZXIgYXMgUmVuZGVyZXIpLnJlbmRlcmluZ1RvU2NyZWVuKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgY2hpbGRyZW4uLi5cbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZXIuX2xhc3RPYmplY3RSZW5kZXJlZClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBY2Nlc3NpYmxlT2JqZWN0cyh0aGlzLnJlbmRlcmVyLl9sYXN0T2JqZWN0UmVuZGVyZWQgYXMgQ29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSBjYXN0aW5nIHdoZW4gQ2FudmFzUmVuZGVyZXIgaXMgY29udmVydGVkXG4gICAgICAgIGNvbnN0IHJlY3QgPSAodGhpcy5yZW5kZXJlciBhcyBBYnN0cmFjdFJlbmRlcmVyKS52aWV3LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIGNvbnN0IHJlc29sdXRpb24gPSB0aGlzLnJlbmRlcmVyLnJlc29sdXRpb247XG5cbiAgICAgICAgY29uc3Qgc3ggPSAocmVjdC53aWR0aCAvICh0aGlzLnJlbmRlcmVyIGFzIEFic3RyYWN0UmVuZGVyZXIpLndpZHRoKSAqIHJlc29sdXRpb247XG4gICAgICAgIGNvbnN0IHN5ID0gKHJlY3QuaGVpZ2h0IC8gKHRoaXMucmVuZGVyZXIgYXMgQWJzdHJhY3RSZW5kZXJlcikuaGVpZ2h0KSAqIHJlc29sdXRpb247XG5cbiAgICAgICAgbGV0IGRpdiA9IHRoaXMuZGl2O1xuXG4gICAgICAgIGRpdi5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcbiAgICAgICAgZGl2LnN0eWxlLnRvcCA9IGAke3JlY3QudG9wfXB4YDtcbiAgICAgICAgZGl2LnN0eWxlLndpZHRoID0gYCR7KHRoaXMucmVuZGVyZXIgYXMgQWJzdHJhY3RSZW5kZXJlcikud2lkdGh9cHhgO1xuICAgICAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gYCR7KHRoaXMucmVuZGVyZXIgYXMgQWJzdHJhY3RSZW5kZXJlcikuaGVpZ2h0fXB4YDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXTtcblxuICAgICAgICAgICAgaWYgKGNoaWxkLnJlbmRlcklkICE9PSB0aGlzLnJlbmRlcklkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNoaWxkLl9hY2Nlc3NpYmxlQWN0aXZlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICByZW1vdmVJdGVtcyh0aGlzLmNoaWxkcmVuLCBpLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpdi5yZW1vdmVDaGlsZChjaGlsZC5fYWNjZXNzaWJsZURpdik7XG4gICAgICAgICAgICAgICAgdGhpcy5wb29sLnB1c2goY2hpbGQuX2FjY2Vzc2libGVEaXYpO1xuICAgICAgICAgICAgICAgIGNoaWxkLl9hY2Nlc3NpYmxlRGl2ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBtYXAgZGl2IHRvIGRpc3BsYXkuLlxuICAgICAgICAgICAgICAgIGRpdiA9IGNoaWxkLl9hY2Nlc3NpYmxlRGl2O1xuICAgICAgICAgICAgICAgIGxldCBoaXRBcmVhID0gY2hpbGQuaGl0QXJlYSBhcyBSZWN0YW5nbGU7XG4gICAgICAgICAgICAgICAgY29uc3Qgd3QgPSBjaGlsZC53b3JsZFRyYW5zZm9ybTtcblxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5oaXRBcmVhKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmxlZnQgPSBgJHsod3QudHggKyAoaGl0QXJlYS54ICogd3QuYSkpICogc3h9cHhgO1xuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUudG9wID0gYCR7KHd0LnR5ICsgKGhpdEFyZWEueSAqIHd0LmQpKSAqIHN5fXB4YDtcblxuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUud2lkdGggPSBgJHtoaXRBcmVhLndpZHRoICogd3QuYSAqIHN4fXB4YDtcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmhlaWdodCA9IGAke2hpdEFyZWEuaGVpZ2h0ICogd3QuZCAqIHN5fXB4YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaGl0QXJlYSA9IGNoaWxkLmdldEJvdW5kcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FwSGl0QXJlYShoaXRBcmVhKTtcblxuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUubGVmdCA9IGAke2hpdEFyZWEueCAqIHN4fXB4YDtcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLnRvcCA9IGAke2hpdEFyZWEueSAqIHN5fXB4YDtcblxuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUud2lkdGggPSBgJHtoaXRBcmVhLndpZHRoICogc3h9cHhgO1xuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gYCR7aGl0QXJlYS5oZWlnaHQgKiBzeX1weGA7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGJ1dHRvbiB0aXRsZXMgYW5kIGhpbnRzIGlmIHRoZXkgZXhpc3QgYW5kIHRoZXkndmUgY2hhbmdlZFxuICAgICAgICAgICAgICAgICAgICBpZiAoZGl2LnRpdGxlICE9PSBjaGlsZC5hY2Nlc3NpYmxlVGl0bGUgJiYgY2hpbGQuYWNjZXNzaWJsZVRpdGxlICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXYudGl0bGUgPSBjaGlsZC5hY2Nlc3NpYmxlVGl0bGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpdi5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSAhPT0gY2hpbGQuYWNjZXNzaWJsZUhpbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGNoaWxkLmFjY2Vzc2libGVIaW50ICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgY2hpbGQuYWNjZXNzaWJsZUhpbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdGhlIHRpdGxlIG9yIGluZGV4IG1heSBoYXZlIGNoYW5nZWQsIGlmIHNvIGxldHMgdXBkYXRlIGl0IVxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5hY2Nlc3NpYmxlVGl0bGUgIT09IGRpdi50aXRsZSB8fCBjaGlsZC50YWJJbmRleCAhPT0gZGl2LnRhYkluZGV4KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LnRpdGxlID0gY2hpbGQuYWNjZXNzaWJsZVRpdGxlO1xuICAgICAgICAgICAgICAgICAgICBkaXYudGFiSW5kZXggPSBjaGlsZC50YWJJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVidWcpIHRoaXMudXBkYXRlRGVidWdIVE1MKGRpdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW5jcmVtZW50IHRoZSByZW5kZXIgaWQuLlxuICAgICAgICB0aGlzLnJlbmRlcklkKys7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcHJpdmF0ZSBmdW5jdGlvbiB0aGF0IHdpbGwgdmlzdWFsbHkgYWRkIHRoZSBpbmZvcm1hdGlvbiB0byB0aGVcbiAgICAgKiBhY2Nlc3NhYmlsaXR5IGRpdlxuICAgICAqXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGl2XG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZURlYnVnSFRNTChkaXY6IElBY2Nlc3NpYmxlSFRNTEVsZW1lbnQpOiB2b2lkXG4gICAge1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gYHR5cGU6ICR7ZGl2LnR5cGV9PC9icj4gdGl0bGUgOiAke2Rpdi50aXRsZX08L2JyPiB0YWJJbmRleDogJHtkaXYudGFiSW5kZXh9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGp1c3QgdGhlIGhpdCBhcmVhIGJhc2VkIG9uIHRoZSBib3VuZHMgb2YgYSBkaXNwbGF5IG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlY3RhbmdsZX0gaGl0QXJlYSAtIEJvdW5kcyBvZiB0aGUgY2hpbGRcbiAgICAgKi9cbiAgICBwdWJsaWMgY2FwSGl0QXJlYShoaXRBcmVhOiBSZWN0YW5nbGUpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoaGl0QXJlYS54IDwgMClcbiAgICAgICAge1xuICAgICAgICAgICAgaGl0QXJlYS53aWR0aCArPSBoaXRBcmVhLng7XG4gICAgICAgICAgICBoaXRBcmVhLnggPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhpdEFyZWEueSA8IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGhpdEFyZWEuaGVpZ2h0ICs9IGhpdEFyZWEueTtcbiAgICAgICAgICAgIGhpdEFyZWEueSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPOiBSZW1vdmUgY2FzdGluZyB3aGVuIENhbnZhc1JlbmRlcmVyIGlzIGNvbnZlcnRlZFxuICAgICAgICBpZiAoaGl0QXJlYS54ICsgaGl0QXJlYS53aWR0aCA+ICh0aGlzLnJlbmRlcmVyIGFzIEFic3RyYWN0UmVuZGVyZXIpLndpZHRoKVxuICAgICAgICB7XG4gICAgICAgICAgICBoaXRBcmVhLndpZHRoID0gKHRoaXMucmVuZGVyZXIgYXMgQWJzdHJhY3RSZW5kZXJlcikud2lkdGggLSBoaXRBcmVhLng7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGl0QXJlYS55ICsgaGl0QXJlYS5oZWlnaHQgPiAodGhpcy5yZW5kZXJlciBhcyBBYnN0cmFjdFJlbmRlcmVyKS5oZWlnaHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGhpdEFyZWEuaGVpZ2h0ID0gKHRoaXMucmVuZGVyZXIgYXMgQWJzdHJhY3RSZW5kZXJlcikuaGVpZ2h0IC0gaGl0QXJlYS55O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIERpc3BsYXlPYmplY3QgdG8gdGhlIGFjY2Vzc2liaWxpdHkgbWFuYWdlclxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gZGlzcGxheU9iamVjdCAtIFRoZSBjaGlsZCB0byBtYWtlIGFjY2Vzc2libGUuXG4gICAgICovXG4gICAgcHJpdmF0ZSBhZGRDaGlsZDxUIGV4dGVuZHMgRGlzcGxheU9iamVjdD4oZGlzcGxheU9iamVjdDogVCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vICAgIHRoaXMuYWN0aXZhdGUoKTtcblxuICAgICAgICBsZXQgZGl2ID0gdGhpcy5wb29sLnBvcCgpO1xuXG4gICAgICAgIGlmICghZGl2KVxuICAgICAgICB7XG4gICAgICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblxuICAgICAgICAgICAgZGl2LnN0eWxlLndpZHRoID0gYCR7RElWX1RPVUNIX1NJWkV9cHhgO1xuICAgICAgICAgICAgZGl2LnN0eWxlLmhlaWdodCA9IGAke0RJVl9UT1VDSF9TSVpFfXB4YDtcbiAgICAgICAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmRlYnVnID8gJ3JnYmEoMjU1LDI1NSwyNTUsMC41KScgOiAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgZGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIGRpdi5zdHlsZS56SW5kZXggPSBESVZfVE9VQ0hfWklOREVYLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBkaXYuc3R5bGUuYm9yZGVyU3R5bGUgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgIC8vIEFSSUEgYXR0cmlidXRlcyBlbnN1cmUgdGhhdCBidXR0b24gdGl0bGUgYW5kIGhpbnQgdXBkYXRlcyBhcmUgYW5ub3VuY2VkIHByb3Blcmx5XG4gICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2Nocm9tZScpID4gLTEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQ2hyb21lIGRvZXNuJ3QgbmVlZCBhcmlhLWxpdmUgdG8gd29yayBhcyBpbnRlbmRlZDsgaW4gZmFjdCBpdCBqdXN0IGdldHMgbW9yZSBjb25mdXNlZC5cbiAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAnb2ZmJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ3BvbGl0ZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvcnY6LipHZWNrb1xcLy8pKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEZpcmVGb3ggbmVlZHMgdGhpcyB0byBhbm5vdW5jZSBvbmx5IHRoZSBuZXcgYnV0dG9uIG5hbWVcbiAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdhcmlhLXJlbGV2YW50JywgJ2FkZGl0aW9ucycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIHJlcXVpcmVkIGJ5IElFLCBvdGhlciBicm93c2VycyBkb24ndCBtdWNoIGNhcmVcbiAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdhcmlhLXJlbGV2YW50JywgJ3RleHQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGljay5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX29uRm9jdXMuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCB0aGlzLl9vbkZvY3VzT3V0LmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2V0IHBvaW50ZXIgZXZlbnRzXG4gICAgICAgIGRpdi5zdHlsZS5wb2ludGVyRXZlbnRzID0gZGlzcGxheU9iamVjdC5hY2Nlc3NpYmxlUG9pbnRlckV2ZW50cztcbiAgICAgICAgLy8gc2V0IHRoZSB0eXBlLCB0aGlzIGRlZmF1bHRzIHRvIGJ1dHRvbiFcbiAgICAgICAgZGl2LnR5cGUgPSBkaXNwbGF5T2JqZWN0LmFjY2Vzc2libGVUeXBlO1xuXG4gICAgICAgIGlmIChkaXNwbGF5T2JqZWN0LmFjY2Vzc2libGVUaXRsZSAmJiBkaXNwbGF5T2JqZWN0LmFjY2Vzc2libGVUaXRsZSAhPT0gbnVsbClcbiAgICAgICAge1xuICAgICAgICAgICAgZGl2LnRpdGxlID0gZGlzcGxheU9iamVjdC5hY2Nlc3NpYmxlVGl0bGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWRpc3BsYXlPYmplY3QuYWNjZXNzaWJsZUhpbnRcbiAgICAgICAgICAgICAgICAgfHwgZGlzcGxheU9iamVjdC5hY2Nlc3NpYmxlSGludCA9PT0gbnVsbClcbiAgICAgICAge1xuICAgICAgICAgICAgZGl2LnRpdGxlID0gYGRpc3BsYXlPYmplY3QgJHtkaXNwbGF5T2JqZWN0LnRhYkluZGV4fWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlzcGxheU9iamVjdC5hY2Nlc3NpYmxlSGludFxuICAgICAgICAgICAgJiYgZGlzcGxheU9iamVjdC5hY2Nlc3NpYmxlSGludCAhPT0gbnVsbClcbiAgICAgICAge1xuICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGRpc3BsYXlPYmplY3QuYWNjZXNzaWJsZUhpbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGVidWcpIHRoaXMudXBkYXRlRGVidWdIVE1MKGRpdik7XG5cbiAgICAgICAgZGlzcGxheU9iamVjdC5fYWNjZXNzaWJsZUFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGRpc3BsYXlPYmplY3QuX2FjY2Vzc2libGVEaXYgPSBkaXY7XG4gICAgICAgIGRpdi5kaXNwbGF5T2JqZWN0ID0gZGlzcGxheU9iamVjdDtcblxuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goZGlzcGxheU9iamVjdCk7XG4gICAgICAgIHRoaXMuZGl2LmFwcGVuZENoaWxkKGRpc3BsYXlPYmplY3QuX2FjY2Vzc2libGVEaXYpO1xuICAgICAgICBkaXNwbGF5T2JqZWN0Ll9hY2Nlc3NpYmxlRGl2LnRhYkluZGV4ID0gZGlzcGxheU9iamVjdC50YWJJbmRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXBzIHRoZSBkaXYgYnV0dG9uIHByZXNzIHRvIHBpeGkncyBJbnRlcmFjdGlvbk1hbmFnZXIgKGNsaWNrKVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGUgLSBUaGUgY2xpY2sgZXZlbnQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfb25DbGljayhlOiBNb3VzZUV2ZW50KTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3Rpbmcgd2hlbiBDYW52YXNSZW5kZXJlciBpcyBjb252ZXJ0ZWRcbiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25NYW5hZ2VyID0gKHRoaXMucmVuZGVyZXIgYXMgQWJzdHJhY3RSZW5kZXJlcikucGx1Z2lucy5pbnRlcmFjdGlvbjtcblxuICAgICAgICBpbnRlcmFjdGlvbk1hbmFnZXIuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIChlLnRhcmdldCBhcyBJQWNjZXNzaWJsZUhUTUxFbGVtZW50KS5kaXNwbGF5T2JqZWN0LCAnY2xpY2snLCBpbnRlcmFjdGlvbk1hbmFnZXIuZXZlbnREYXRhXG4gICAgICAgICk7XG4gICAgICAgIGludGVyYWN0aW9uTWFuYWdlci5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgKGUudGFyZ2V0IGFzIElBY2Nlc3NpYmxlSFRNTEVsZW1lbnQpLmRpc3BsYXlPYmplY3QsICdwb2ludGVydGFwJywgaW50ZXJhY3Rpb25NYW5hZ2VyLmV2ZW50RGF0YVxuICAgICAgICApO1xuICAgICAgICBpbnRlcmFjdGlvbk1hbmFnZXIuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIChlLnRhcmdldCBhcyBJQWNjZXNzaWJsZUhUTUxFbGVtZW50KS5kaXNwbGF5T2JqZWN0LCAndGFwJywgaW50ZXJhY3Rpb25NYW5hZ2VyLmV2ZW50RGF0YVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcHMgdGhlIGRpdiBmb2N1cyBldmVudHMgdG8gcGl4aSdzIEludGVyYWN0aW9uTWFuYWdlciAobW91c2VvdmVyKVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0ZvY3VzRXZlbnR9IGUgLSBUaGUgZm9jdXMgZXZlbnQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfb25Gb2N1cyhlOiBGb2N1c0V2ZW50KTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKCEoZS50YXJnZXQgYXMgRWxlbWVudCkuZ2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnKSlcbiAgICAgICAge1xuICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEVsZW1lbnQpLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ2Fzc2VydGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3Rpbmcgd2hlbiBDYW52YXNSZW5kZXJlciBpcyBjb252ZXJ0ZWRcbiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25NYW5hZ2VyID0gKHRoaXMucmVuZGVyZXIgYXMgQWJzdHJhY3RSZW5kZXJlcikucGx1Z2lucy5pbnRlcmFjdGlvbjtcblxuICAgICAgICBpbnRlcmFjdGlvbk1hbmFnZXIuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIChlLnRhcmdldCBhcyBJQWNjZXNzaWJsZUhUTUxFbGVtZW50KS5kaXNwbGF5T2JqZWN0LCAnbW91c2VvdmVyJywgaW50ZXJhY3Rpb25NYW5hZ2VyLmV2ZW50RGF0YVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcHMgdGhlIGRpdiBmb2N1cyBldmVudHMgdG8gcGl4aSdzIEludGVyYWN0aW9uTWFuYWdlciAobW91c2VvdXQpXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Rm9jdXNFdmVudH0gZSAtIFRoZSBmb2N1c291dCBldmVudC5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9vbkZvY3VzT3V0KGU6IEZvY3VzRXZlbnQpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIShlLnRhcmdldCBhcyBFbGVtZW50KS5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScpKVxuICAgICAgICB7XG4gICAgICAgICAgICAoZS50YXJnZXQgYXMgRWxlbWVudCkuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAncG9saXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPOiBSZW1vdmUgY2FzdGluZyB3aGVuIENhbnZhc1JlbmRlcmVyIGlzIGNvbnZlcnRlZFxuICAgICAgICBjb25zdCBpbnRlcmFjdGlvbk1hbmFnZXIgPSAodGhpcy5yZW5kZXJlciBhcyBBYnN0cmFjdFJlbmRlcmVyKS5wbHVnaW5zLmludGVyYWN0aW9uO1xuXG4gICAgICAgIGludGVyYWN0aW9uTWFuYWdlci5kaXNwYXRjaEV2ZW50KChlLnRhcmdldCBhcyBhbnkpLmRpc3BsYXlPYmplY3QsICdtb3VzZW91dCcsIGludGVyYWN0aW9uTWFuYWdlci5ldmVudERhdGEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElzIGNhbGxlZCB3aGVuIGEga2V5IGlzIHByZXNzZWRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBlIC0gVGhlIGtleWRvd24gZXZlbnQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfb25LZXlEb3duKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoZS5rZXlDb2RlICE9PSBLRVlfQ09ERV9UQUIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWN0aXZhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJcyBjYWxsZWQgd2hlbiB0aGUgbW91c2UgbW92ZXMgYWNyb3NzIHRoZSByZW5kZXJlciBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZSAtIFRoZSBtb3VzZSBldmVudC5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9vbk1vdXNlTW92ZShlOiBNb3VzZUV2ZW50KTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKGUubW92ZW1lbnRYID09PSAwICYmIGUubW92ZW1lbnRZID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRlYWN0aXZhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgYWNjZXNzaWJpbGl0eSBtYW5hZ2VyXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmRlc3Ryb3lUb3VjaEhvb2soKTtcbiAgICAgICAgdGhpcy5kaXYgPSBudWxsO1xuXG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSwgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fb25LZXlEb3duKTtcblxuICAgICAgICB0aGlzLnBvb2wgPSBudWxsO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSAnQHBpeGkvc2V0dGluZ3MnO1xuXG4vKipcbiAqIFRhcmdldCBmcmFtZXMgcGVyIG1pbGxpc2Vjb25kLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBuYW1lIFRBUkdFVF9GUE1TXG4gKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0IDAuMDZcbiAqL1xuc2V0dGluZ3MuVEFSR0VUX0ZQTVMgPSAwLjA2O1xuXG5leHBvcnQgeyBzZXR0aW5ncyB9O1xuIiwgIi8qKlxuICogUmVwcmVzZW50cyB0aGUgdXBkYXRlIHByaW9yaXRpZXMgdXNlZCBieSBpbnRlcm5hbCBQSVhJIGNsYXNzZXMgd2hlbiByZWdpc3RlcmVkIHdpdGhcbiAqIHRoZSB7QGxpbmsgUElYSS5UaWNrZXJ9IG9iamVjdC4gSGlnaGVyIHByaW9yaXR5IGl0ZW1zIGFyZSB1cGRhdGVkIGZpcnN0IGFuZCBsb3dlclxuICogcHJpb3JpdHkgaXRlbXMsIHN1Y2ggYXMgcmVuZGVyLCBzaG91bGQgZ28gbGF0ZXIuXG4gKlxuICogQHN0YXRpY1xuICogQGNvbnN0YW50XG4gKiBAbmFtZSBVUERBVEVfUFJJT1JJVFlcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IElOVEVSQUNUSU9OPTUwIEhpZ2hlc3QgcHJpb3JpdHksIHVzZWQgZm9yIHtAbGluayBQSVhJLkludGVyYWN0aW9uTWFuYWdlcn1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBISUdIPTI1IEhpZ2ggcHJpb3JpdHkgdXBkYXRpbmcsIHtAbGluayBQSVhJLlZpZGVvQmFzZVRleHR1cmV9IGFuZCB7QGxpbmsgUElYSS5BbmltYXRlZFNwcml0ZX1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBOT1JNQUw9MCBEZWZhdWx0IHByaW9yaXR5IGZvciB0aWNrZXIgZXZlbnRzLCBzZWUge0BsaW5rIFBJWEkuVGlja2VyI2FkZH0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gTE9XPS0yNSBMb3cgcHJpb3JpdHkgdXNlZCBmb3Ige0BsaW5rIFBJWEkuQXBwbGljYXRpb259IHJlbmRlcmluZy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVVElMSVRZPS01MCBMb3dlc3QgcHJpb3JpdHkgdXNlZCBmb3Ige0BsaW5rIFBJWEkuQmFzZVByZXBhcmV9IHV0aWxpdHkuXG4gKi9cbmV4cG9ydCBlbnVtIFVQREFURV9QUklPUklUWSB7XG4gICAgSU5URVJBQ1RJT04gPSA1MCxcbiAgICBISUdIID0gMjUsXG4gICAgTk9STUFMID0gMCxcbiAgICBMT1cgPSAtMjUsXG4gICAgVVRJTElUWSA9IC01MCxcbn1cbiIsICJpbXBvcnQgeyBUaWNrZXJDYWxsYmFjayB9IGZyb20gJy4vVGlja2VyJztcblxuLyoqXG4gKiBJbnRlcm5hbCBjbGFzcyBmb3IgaGFuZGxpbmcgdGhlIHByaW9yaXR5IHNvcnRpbmcgb2YgdGlja2VyIGhhbmRsZXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBUaWNrZXJMaXN0ZW5lcjxUID0gYW55Plxue1xuICAgIHB1YmxpYyBwcmlvcml0eTogbnVtYmVyO1xuICAgIHB1YmxpYyBuZXh0OiBUaWNrZXJMaXN0ZW5lcjtcbiAgICBwdWJsaWMgcHJldmlvdXM6IFRpY2tlckxpc3RlbmVyO1xuXG4gICAgcHJpdmF0ZSBmbjogVGlja2VyQ2FsbGJhY2s8VD47XG4gICAgcHJpdmF0ZSBjb250ZXh0OiBUO1xuICAgIHByaXZhdGUgb25jZTogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9kZXN0cm95ZWQ6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBUaGUgbGlzdGVuZXIgZnVuY3Rpb24gdG8gYmUgYWRkZWQgZm9yIG9uZSB1cGRhdGVcbiAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0PW51bGxdIC0gVGhlIGxpc3RlbmVyIGNvbnRleHRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5PTBdIC0gVGhlIHByaW9yaXR5IGZvciBlbWl0dGluZ1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29uY2U9ZmFsc2VdIC0gSWYgdGhlIGhhbmRsZXIgc2hvdWxkIGZpcmUgb25jZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZuOiBUaWNrZXJDYWxsYmFjazxUPiwgY29udGV4dDogVCA9IG51bGwsIHByaW9yaXR5ID0gMCwgb25jZSA9IGZhbHNlKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBoYW5kbGVyIGZ1bmN0aW9uIHRvIGV4ZWN1dGUuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge0Z1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mbiA9IGZuO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY2FsbGluZyB0byBleGVjdXRlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHsqfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgcHJpb3JpdHkuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhpcyBzaG91bGQgb25seSBleGVjdXRlIG9uY2UuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uY2UgPSBvbmNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmV4dCBpdGVtIGluIGNoYWluLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtUaWNrZXJMaXN0ZW5lcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmV4dCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBwcmV2aW91cyBpdGVtIGluIGNoYWluLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtUaWNrZXJMaXN0ZW5lcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJldmlvdXMgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgdHJ1ZWAgaWYgdGhpcyBsaXN0ZW5lciBoYXMgYmVlbiBkZXN0cm95ZWQgYWxyZWFkeS5cbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNpbXBsZSBjb21wYXJlIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgaWYgYSBmdW5jdGlvbiBhbmQgY29udGV4dCBtYXRjaC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHRvIGJlIGFkZGVkIGZvciBvbmUgdXBkYXRlXG4gICAgICogQHBhcmFtIHthbnl9IFtjb250ZXh0XSAtIFRoZSBsaXN0ZW5lciBjb250ZXh0XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBsaXN0ZW5lciBtYXRjaCB0aGUgYXJndW1lbnRzXG4gICAgICovXG4gICAgbWF0Y2goZm46IFRpY2tlckNhbGxiYWNrPFQ+LCBjb250ZXh0OiBhbnkgPSBudWxsKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm4gPT09IGZuICYmIHRoaXMuY29udGV4dCA9PT0gY29udGV4dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbWl0IGJ5IGNhbGxpbmcgdGhlIGN1cnJlbnQgZnVuY3Rpb24uXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFUaW1lIC0gdGltZSBzaW5jZSB0aGUgbGFzdCBlbWl0LlxuICAgICAqIEByZXR1cm4ge1RpY2tlckxpc3RlbmVyfSBOZXh0IHRpY2tlclxuICAgICAqL1xuICAgIGVtaXQoZGVsdGFUaW1lOiBudW1iZXIpOiBUaWNrZXJMaXN0ZW5lclxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuZm4pXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRleHQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbi5jYWxsKHRoaXMuY29udGV4dCwgZGVsdGFUaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAodGhpcyBhcyBUaWNrZXJMaXN0ZW5lcjxhbnk+KS5mbihkZWx0YVRpbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVkaXJlY3QgPSB0aGlzLm5leHQ7XG5cbiAgICAgICAgaWYgKHRoaXMub25jZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95KHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU29mdC1kZXN0cm95aW5nIHNob3VsZCByZW1vdmVcbiAgICAgICAgLy8gdGhlIG5leHQgcmVmZXJlbmNlXG4gICAgICAgIGlmICh0aGlzLl9kZXN0cm95ZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVkaXJlY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byB0aGUgbGlzdC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7VGlja2VyTGlzdGVuZXJ9IHByZXZpb3VzIC0gSW5wdXQgbm9kZSwgcHJldmlvdXMgbGlzdGVuZXJcbiAgICAgKi9cbiAgICBjb25uZWN0KHByZXZpb3VzOiBUaWNrZXJMaXN0ZW5lcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMucHJldmlvdXMgPSBwcmV2aW91cztcbiAgICAgICAgaWYgKHByZXZpb3VzLm5leHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHByZXZpb3VzLm5leHQucHJldmlvdXMgPSB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV4dCA9IHByZXZpb3VzLm5leHQ7XG4gICAgICAgIHByZXZpb3VzLm5leHQgPSB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgYW5kIGRvbid0IHVzZSBhZnRlciB0aGlzLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaGFyZCA9IGZhbHNlXSBgdHJ1ZWAgdG8gcmVtb3ZlIHRoZSBgbmV4dGAgcmVmZXJlbmNlLCB0aGlzXG4gICAgICogICAgICAgIGlzIGNvbnNpZGVyZWQgYSBoYXJkIGRlc3Ryb3kuIFNvZnQgZGVzdHJveSBtYWludGFpbnMgdGhlIG5leHQgcmVmZXJlbmNlLlxuICAgICAqIEByZXR1cm4ge1RpY2tlckxpc3RlbmVyfSBUaGUgbGlzdGVuZXIgdG8gcmVkaXJlY3Qgd2hpbGUgZW1pdHRpbmcgb3IgcmVtb3ZpbmcuXG4gICAgICovXG4gICAgZGVzdHJveShoYXJkID0gZmFsc2UpOiBUaWNrZXJMaXN0ZW5lclxuICAgIHtcbiAgICAgICAgdGhpcy5fZGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5mbiA9IG51bGw7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IG51bGw7XG5cbiAgICAgICAgLy8gRGlzY29ubmVjdCwgaG9vayB1cCBuZXh0IGFuZCBwcmV2aW91c1xuICAgICAgICBpZiAodGhpcy5wcmV2aW91cylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91cy5uZXh0ID0gdGhpcy5uZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubmV4dClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5uZXh0LnByZXZpb3VzID0gdGhpcy5wcmV2aW91cztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlZGlyZWN0IHRvIHRoZSBuZXh0IGl0ZW1cbiAgICAgICAgY29uc3QgcmVkaXJlY3QgPSB0aGlzLm5leHQ7XG5cbiAgICAgICAgLy8gUmVtb3ZlIHJlZmVyZW5jZXNcbiAgICAgICAgdGhpcy5uZXh0ID0gaGFyZCA/IG51bGwgOiByZWRpcmVjdDtcbiAgICAgICAgdGhpcy5wcmV2aW91cyA9IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHJlZGlyZWN0O1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVVBEQVRFX1BSSU9SSVRZIH0gZnJvbSAnLi9jb25zdCc7XG5pbXBvcnQgeyBUaWNrZXJMaXN0ZW5lciB9IGZyb20gJy4vVGlja2VyTGlzdGVuZXInO1xuXG5leHBvcnQgdHlwZSBUaWNrZXJDYWxsYmFjazxUPiA9ICh0aGlzOiBULCBkdDogbnVtYmVyKSA9PiBhbnk7XG5cbi8qKlxuICogQSBUaWNrZXIgY2xhc3MgdGhhdCBydW5zIGFuIHVwZGF0ZSBsb29wIHRoYXQgb3RoZXIgb2JqZWN0cyBsaXN0ZW4gdG8uXG4gKlxuICogVGhpcyBjbGFzcyBpcyBjb21wb3NlZCBhcm91bmQgbGlzdGVuZXJzIG1lYW50IGZvciBleGVjdXRpb24gb24gdGhlIG5leHQgcmVxdWVzdGVkIGFuaW1hdGlvbiBmcmFtZS5cbiAqIEFuaW1hdGlvbiBmcmFtZXMgYXJlIHJlcXVlc3RlZCBvbmx5IHdoZW4gbmVjZXNzYXJ5LCBlLmcuIFdoZW4gdGhlIHRpY2tlciBpcyBzdGFydGVkIGFuZCB0aGUgZW1pdHRlciBoYXMgbGlzdGVuZXJzLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIFRpY2tlclxue1xuICAgIHN0YXRpYyBfc2hhcmVkOiBUaWNrZXI7XG4gICAgc3RhdGljIF9zeXN0ZW06IFRpY2tlcjtcblxuICAgIHB1YmxpYyBhdXRvU3RhcnQ6IGJvb2xlYW47XG4gICAgcHVibGljIGRlbHRhVGltZTogbnVtYmVyO1xuICAgIHB1YmxpYyBkZWx0YU1TOiBudW1iZXI7XG4gICAgcHVibGljIGVsYXBzZWRNUzogbnVtYmVyO1xuICAgIHB1YmxpYyBsYXN0VGltZTogbnVtYmVyO1xuICAgIHB1YmxpYyBzcGVlZDogbnVtYmVyO1xuICAgIHB1YmxpYyBzdGFydGVkOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfaGVhZDogVGlja2VyTGlzdGVuZXI7XG4gICAgcHJpdmF0ZSBfcmVxdWVzdElkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfbWF4RWxhcHNlZE1TOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfbWluRWxhcHNlZE1TOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfcHJvdGVjdGVkOiBib29sZWFuO1xuICAgIHByaXZhdGUgX2xhc3RGcmFtZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3RpY2s6ICh0aW1lOiBudW1iZXIpID0+IGFueTtcblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZmlyc3QgbGlzdGVuZXIuIEFsbCBuZXcgbGlzdGVuZXJzIGFkZGVkIGFyZSBjaGFpbmVkIG9uIHRoaXMuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtUaWNrZXJMaXN0ZW5lcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2hlYWQgPSBuZXcgVGlja2VyTGlzdGVuZXIobnVsbCwgbnVsbCwgSW5maW5pdHkpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCBjdXJyZW50IGZyYW1lIHJlcXVlc3QgSURcbiAgICAgICAgICogQHR5cGUgez9udW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9yZXF1ZXN0SWQgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCB2YWx1ZSBtYW5hZ2VkIGJ5IG1pbkZQUyBwcm9wZXJ0eSBzZXR0ZXIgYW5kIGdldHRlci5cbiAgICAgICAgICogVGhpcyBpcyB0aGUgbWF4aW11bSBhbGxvd2VkIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHVwZGF0ZXMuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9tYXhFbGFwc2VkTVMgPSAxMDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVybmFsIHZhbHVlIG1hbmFnZWQgYnkgbWF4RlBTIHByb3BlcnR5IHNldHRlciBhbmQgZ2V0dGVyLlxuICAgICAgICAgKiBUaGlzIGlzIHRoZSBtaW5pbXVtIGFsbG93ZWQgbWlsbGlzZWNvbmRzIGJldHdlZW4gdXBkYXRlcy5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX21pbkVsYXBzZWRNUyA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgb3Igbm90IHRoaXMgdGlja2VyIHNob3VsZCBpbnZva2UgdGhlIG1ldGhvZFxuICAgICAgICAgKiB7QGxpbmsgUElYSS5UaWNrZXIjc3RhcnR9IGF1dG9tYXRpY2FsbHlcbiAgICAgICAgICogd2hlbiBhIGxpc3RlbmVyIGlzIGFkZGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hdXRvU3RhcnQgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2NhbGFyIHRpbWUgdmFsdWUgZnJvbSBsYXN0IGZyYW1lIHRvIHRoaXMgZnJhbWUuXG4gICAgICAgICAqIFRoaXMgdmFsdWUgaXMgY2FwcGVkIGJ5IHNldHRpbmcge0BsaW5rIFBJWEkuVGlja2VyI21pbkZQU31cbiAgICAgICAgICogYW5kIGlzIHNjYWxlZCB3aXRoIHtAbGluayBQSVhJLlRpY2tlciNzcGVlZH0uXG4gICAgICAgICAqICoqTm90ZToqKiBUaGUgY2FwIG1heSBiZSBleGNlZWRlZCBieSBzY2FsaW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDFcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVsdGFUaW1lID0gMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2NhbGVyIHRpbWUgZWxhcHNlZCBpbiBtaWxsaXNlY29uZHMgZnJvbSBsYXN0IGZyYW1lIHRvIHRoaXMgZnJhbWUuXG4gICAgICAgICAqIFRoaXMgdmFsdWUgaXMgY2FwcGVkIGJ5IHNldHRpbmcge0BsaW5rIFBJWEkuVGlja2VyI21pbkZQU31cbiAgICAgICAgICogYW5kIGlzIHNjYWxlZCB3aXRoIHtAbGluayBQSVhJLlRpY2tlciNzcGVlZH0uXG4gICAgICAgICAqICoqTm90ZToqKiBUaGUgY2FwIG1heSBiZSBleGNlZWRlZCBieSBzY2FsaW5nLlxuICAgICAgICAgKiBJZiB0aGUgcGxhdGZvcm0gc3VwcG9ydHMgRE9NSGlnaFJlc1RpbWVTdGFtcCxcbiAgICAgICAgICogdGhpcyB2YWx1ZSB3aWxsIGhhdmUgYSBwcmVjaXNpb24gb2YgMSBcdTAwQjVzLlxuICAgICAgICAgKiBEZWZhdWx0cyB0byB0YXJnZXQgZnJhbWUgdGltZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDE2LjY2XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlbHRhTVMgPSAxIC8gc2V0dGluZ3MuVEFSR0VUX0ZQTVM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRpbWUgZWxhcHNlZCBpbiBtaWxsaXNlY29uZHMgZnJvbSBsYXN0IGZyYW1lIHRvIHRoaXMgZnJhbWUuXG4gICAgICAgICAqIE9wcG9zZWQgdG8gd2hhdCB0aGUgc2NhbGFyIHtAbGluayBQSVhJLlRpY2tlciNkZWx0YVRpbWV9XG4gICAgICAgICAqIGlzIGJhc2VkLCB0aGlzIHZhbHVlIGlzIG5laXRoZXIgY2FwcGVkIG5vciBzY2FsZWQuXG4gICAgICAgICAqIElmIHRoZSBwbGF0Zm9ybSBzdXBwb3J0cyBET01IaWdoUmVzVGltZVN0YW1wLFxuICAgICAgICAgKiB0aGlzIHZhbHVlIHdpbGwgaGF2ZSBhIHByZWNpc2lvbiBvZiAxIFx1MDBCNXMuXG4gICAgICAgICAqIERlZmF1bHRzIHRvIHRhcmdldCBmcmFtZSB0aW1lXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMTYuNjZcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZWxhcHNlZE1TID0gMSAvIHNldHRpbmdzLlRBUkdFVF9GUE1TO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbGFzdCB0aW1lIHtAbGluayBQSVhJLlRpY2tlciN1cGRhdGV9IHdhcyBpbnZva2VkLlxuICAgICAgICAgKiBUaGlzIHZhbHVlIGlzIGFsc28gcmVzZXQgaW50ZXJuYWxseSBvdXRzaWRlIG9mIGludm9raW5nXG4gICAgICAgICAqIHVwZGF0ZSwgYnV0IG9ubHkgd2hlbiBhIG5ldyBhbmltYXRpb24gZnJhbWUgaXMgcmVxdWVzdGVkLlxuICAgICAgICAgKiBJZiB0aGUgcGxhdGZvcm0gc3VwcG9ydHMgRE9NSGlnaFJlc1RpbWVTdGFtcCxcbiAgICAgICAgICogdGhpcyB2YWx1ZSB3aWxsIGhhdmUgYSBwcmVjaXNpb24gb2YgMSBcdTAwQjVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IC0xXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxhc3RUaW1lID0gLTE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZhY3RvciBvZiBjdXJyZW50IHtAbGluayBQSVhJLlRpY2tlciNkZWx0YVRpbWV9LlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiAvLyBTY2FsZXMgdGlja2VyLmRlbHRhVGltZSB0byB3aGF0IHdvdWxkIGJlXG4gICAgICAgICAqIC8vIHRoZSBlcXVpdmFsZW50IG9mIGFwcHJveGltYXRlbHkgMTIwIEZQU1xuICAgICAgICAgKiB0aWNrZXIuc3BlZWQgPSAyO1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDFcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3BlZWQgPSAxO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIHRpY2tlciBoYXMgYmVlbiBzdGFydGVkLlxuICAgICAgICAgKiBgdHJ1ZWAgaWYge0BsaW5rIFBJWEkuVGlja2VyI3N0YXJ0fSBoYXMgYmVlbiBjYWxsZWQuXG4gICAgICAgICAqIGBmYWxzZWAgaWYge0BsaW5rIFBJWEkuVGlja2VyI3N0b3B9IGhhcyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICogV2hpbGUgYGZhbHNlYCwgdGhpcyB2YWx1ZSBtYXkgY2hhbmdlIHRvIGB0cnVlYCBpbiB0aGVcbiAgICAgICAgICogZXZlbnQgb2Yge0BsaW5rIFBJWEkuVGlja2VyI2F1dG9TdGFydH0gYmVpbmcgYHRydWVgXG4gICAgICAgICAqIGFuZCBhIGxpc3RlbmVyIGlzIGFkZGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGVuYWJsZWQsIGRlbGV0aW5nIGlzIGRpc2FibGVkLlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcHJvdGVjdGVkID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBsYXN0IHRpbWUga2V5ZnJhbWUgd2FzIGV4ZWN1dGVkLlxuICAgICAgICAgKiBNYWludGFpbnMgYSByZWxhdGl2ZWx5IGZpeGVkIGludGVydmFsIHdpdGggdGhlIHByZXZpb3VzIHZhbHVlLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IC0xXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9sYXN0RnJhbWUgPSAtMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgdGljayBtZXRob2QgYm91bmQgdG8gdGlja2VyIGluc3RhbmNlLlxuICAgICAgICAgKiBUaGlzIGlzIGJlY2F1c2UgaW4gZWFybHkgMjAxNSwgRnVuY3Rpb24uYmluZFxuICAgICAgICAgKiBpcyBzdGlsbCA2MCUgc2xvd2VyIGluIGhpZ2ggcGVyZm9ybWFuY2Ugc2NlbmFyaW9zLlxuICAgICAgICAgKiBBbHNvIHNlcGFyYXRpbmcgZnJhbWUgcmVxdWVzdHMgZnJvbSB1cGRhdGUgbWV0aG9kXG4gICAgICAgICAqIHNvIGxpc3RlbmVycyBtYXkgYmUgY2FsbGVkIGF0IGFueSB0aW1lIGFuZCB3aXRoXG4gICAgICAgICAqIGFueSBhbmltYXRpb24gQVBJLCBqdXN0IGludm9rZSB0aWNrZXIudXBkYXRlKHRpbWUpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSAtIFRpbWUgc2luY2UgbGFzdCB0aWNrLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGljayA9ICh0aW1lOiBudW1iZXIpOiB2b2lkID0+XG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RJZCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gSW52b2tlIGxpc3RlbmVycyBub3dcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aW1lKTtcbiAgICAgICAgICAgICAgICAvLyBMaXN0ZW5lciBzaWRlIGVmZmVjdHMgbWF5IGhhdmUgbW9kaWZpZWQgdGlja2VyIHN0YXRlLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQgJiYgdGhpcy5fcmVxdWVzdElkID09PSBudWxsICYmIHRoaXMuX2hlYWQubmV4dClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl90aWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29uZGl0aW9uYWxseSByZXF1ZXN0cyBhIG5ldyBhbmltYXRpb24gZnJhbWUuXG4gICAgICogSWYgYSBmcmFtZSBoYXMgbm90IGFscmVhZHkgYmVlbiByZXF1ZXN0ZWQsIGFuZCBpZiB0aGUgaW50ZXJuYWxcbiAgICAgKiBlbWl0dGVyIGhhcyBsaXN0ZW5lcnMsIGEgbmV3IGZyYW1lIGlzIHJlcXVlc3RlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBfcmVxdWVzdElmTmVlZGVkKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9yZXF1ZXN0SWQgPT09IG51bGwgJiYgdGhpcy5faGVhZC5uZXh0KVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBlbnN1cmUgY2FsbGJhY2tzIGdldCBjb3JyZWN0IGRlbHRhXG4gICAgICAgICAgICB0aGlzLmxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICB0aGlzLl9sYXN0RnJhbWUgPSB0aGlzLmxhc3RUaW1lO1xuICAgICAgICAgICAgdGhpcy5fcmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX3RpY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29uZGl0aW9uYWxseSBjYW5jZWxzIGEgcGVuZGluZyBhbmltYXRpb24gZnJhbWUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgX2NhbmNlbElmTmVlZGVkKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9yZXF1ZXN0SWQgIT09IG51bGwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX3JlcXVlc3RJZCk7XG4gICAgICAgICAgICB0aGlzLl9yZXF1ZXN0SWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29uZGl0aW9uYWxseSByZXF1ZXN0cyBhIG5ldyBhbmltYXRpb24gZnJhbWUuXG4gICAgICogSWYgdGhlIHRpY2tlciBoYXMgYmVlbiBzdGFydGVkIGl0IGNoZWNrcyBpZiBhIGZyYW1lIGhhcyBub3QgYWxyZWFkeVxuICAgICAqIGJlZW4gcmVxdWVzdGVkLCBhbmQgaWYgdGhlIGludGVybmFsIGVtaXR0ZXIgaGFzIGxpc3RlbmVycy4gSWYgdGhlc2VcbiAgICAgKiBjb25kaXRpb25zIGFyZSBtZXQsIGEgbmV3IGZyYW1lIGlzIHJlcXVlc3RlZC4gSWYgdGhlIHRpY2tlciBoYXMgbm90XG4gICAgICogYmVlbiBzdGFydGVkLCBidXQgYXV0b1N0YXJ0IGlzIGB0cnVlYCwgdGhlbiB0aGUgdGlja2VyIHN0YXJ0cyBub3csXG4gICAgICogYW5kIGNvbnRpbnVlcyB3aXRoIHRoZSBwcmV2aW91cyBjb25kaXRpb25zIHRvIHJlcXVlc3QgYSBuZXcgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgX3N0YXJ0SWZQb3NzaWJsZSgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9yZXF1ZXN0SWZOZWVkZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmF1dG9TdGFydClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIGZvciB0aWNrIGV2ZW50cy4gQ2FsbHMgY29udGludW91c2x5IHVubGVzc1xuICAgICAqIGl0IGlzIHJlbW92ZWQgb3IgdGhlIHRpY2tlciBpcyBzdG9wcGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBUaGUgbGlzdGVuZXIgZnVuY3Rpb24gdG8gYmUgYWRkZWQgZm9yIHVwZGF0ZXNcbiAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0XSAtIFRoZSBsaXN0ZW5lciBjb250ZXh0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eT1QSVhJLlVQREFURV9QUklPUklUWS5OT1JNQUxdIC0gVGhlIHByaW9yaXR5IGZvciBlbWl0dGluZ1xuICAgICAqIEByZXR1cm5zIHtQSVhJLlRpY2tlcn0gVGhpcyBpbnN0YW5jZSBvZiBhIHRpY2tlclxuICAgICAqL1xuICAgIGFkZDxUID0gYW55PihmbjogVGlja2VyQ2FsbGJhY2s8VD4sIGNvbnRleHQ6IFQsIHByaW9yaXR5ID0gVVBEQVRFX1BSSU9SSVRZLk5PUk1BTCk6IHRoaXNcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRMaXN0ZW5lcihuZXcgVGlja2VyTGlzdGVuZXIoZm4sIGNvbnRleHQsIHByaW9yaXR5KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgaGFuZGxlciBmb3IgdGhlIHRpY2sgZXZlbnQgd2hpY2ggaXMgb25seSBleGVjdXRlIG9uY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byBiZSBhZGRlZCBmb3Igb25lIHVwZGF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gW2NvbnRleHRdIC0gVGhlIGxpc3RlbmVyIGNvbnRleHRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5PVBJWEkuVVBEQVRFX1BSSU9SSVRZLk5PUk1BTF0gLSBUaGUgcHJpb3JpdHkgZm9yIGVtaXR0aW5nXG4gICAgICogQHJldHVybnMge1BJWEkuVGlja2VyfSBUaGlzIGluc3RhbmNlIG9mIGEgdGlja2VyXG4gICAgICovXG4gICAgYWRkT25jZTxUID0gYW55PihmbjogVGlja2VyQ2FsbGJhY2s8VD4sIGNvbnRleHQ6IFQsIHByaW9yaXR5ID0gVVBEQVRFX1BSSU9SSVRZLk5PUk1BTCk6IHRoaXNcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRMaXN0ZW5lcihuZXcgVGlja2VyTGlzdGVuZXIoZm4sIGNvbnRleHQsIHByaW9yaXR5LCB0cnVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWxseSBhZGRzIHRoZSBldmVudCBoYW5kbGVyIHNvIHRoYXQgaXQgY2FuIGJlIHNvcnRlZCBieSBwcmlvcml0eS5cbiAgICAgKiBQcmlvcml0eSBhbGxvd3MgY2VydGFpbiBoYW5kbGVyICh1c2VyLCBBbmltYXRlZFNwcml0ZSwgSW50ZXJhY3Rpb24pIHRvIGJlIHJ1blxuICAgICAqIGJlZm9yZSB0aGUgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1RpY2tlckxpc3RlbmVyfSBsaXN0ZW5lciAtIEN1cnJlbnQgbGlzdGVuZXIgYmVpbmcgYWRkZWQuXG4gICAgICogQHJldHVybnMge1BJWEkuVGlja2VyfSBUaGlzIGluc3RhbmNlIG9mIGEgdGlja2VyXG4gICAgICovXG4gICAgcHJpdmF0ZSBfYWRkTGlzdGVuZXIobGlzdGVuZXI6IFRpY2tlckxpc3RlbmVyKTogdGhpc1xuICAgIHtcbiAgICAgICAgLy8gRm9yIGF0dGFjaGluZyB0byBoZWFkXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5faGVhZC5uZXh0O1xuICAgICAgICBsZXQgcHJldmlvdXMgPSB0aGlzLl9oZWFkO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgZmlyc3QgaXRlbVxuICAgICAgICBpZiAoIWN1cnJlbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxpc3RlbmVyLmNvbm5lY3QocHJldmlvdXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gR28gZnJvbSBoaWdoZXN0IHRvIGxvd2VzdCBwcmlvcml0eVxuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyLnByaW9yaXR5ID4gY3VycmVudC5wcmlvcml0eSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmNvbm5lY3QocHJldmlvdXMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJldmlvdXMgPSBjdXJyZW50O1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE5vdCB5ZXQgY29ubmVjdGVkXG4gICAgICAgICAgICBpZiAoIWxpc3RlbmVyLnByZXZpb3VzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmNvbm5lY3QocHJldmlvdXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc3RhcnRJZlBvc3NpYmxlKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbnkgaGFuZGxlcnMgbWF0Y2hpbmcgdGhlIGZ1bmN0aW9uIGFuZCBjb250ZXh0IHBhcmFtZXRlcnMuXG4gICAgICogSWYgbm8gaGFuZGxlcnMgYXJlIGxlZnQgYWZ0ZXIgcmVtb3ZpbmcsIHRoZW4gaXQgY2FuY2VscyB0aGUgYW5pbWF0aW9uIGZyYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBUaGUgbGlzdGVuZXIgZnVuY3Rpb24gdG8gYmUgcmVtb3ZlZFxuICAgICAqIEBwYXJhbSB7Kn0gW2NvbnRleHRdIC0gVGhlIGxpc3RlbmVyIGNvbnRleHQgdG8gYmUgcmVtb3ZlZFxuICAgICAqIEByZXR1cm5zIHtQSVhJLlRpY2tlcn0gVGhpcyBpbnN0YW5jZSBvZiBhIHRpY2tlclxuICAgICAqL1xuICAgIHJlbW92ZTxUID0gYW55PihmbjogVGlja2VyQ2FsbGJhY2s8VD4sIGNvbnRleHQ6IFQpOiB0aGlzXG4gICAge1xuICAgICAgICBsZXQgbGlzdGVuZXIgPSB0aGlzLl9oZWFkLm5leHQ7XG5cbiAgICAgICAgd2hpbGUgKGxpc3RlbmVyKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBXZSBmb3VuZCBhIG1hdGNoLCBsZXRzIHJlbW92ZSBpdFxuICAgICAgICAgICAgLy8gbm8gYnJlYWsgdG8gZGVsZXRlIGFsbCBwb3NzaWJsZSBtYXRjaGVzXG4gICAgICAgICAgICAvLyBpbmNhc2UgYSBsaXN0ZW5lciB3YXMgYWRkZWQgMisgdGltZXNcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lci5tYXRjaChmbiwgY29udGV4dCkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lci5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lci5uZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl9oZWFkLm5leHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbmNlbElmTmVlZGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGxpc3RlbmVycyBvbiB0aGlzIHRpY2tlciwgY2FsY3VsYXRlZCBieSB3YWxraW5nIHRocm91Z2ggbGlua2VkIGxpc3RcbiAgICAgKlxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgY291bnQoKTogbnVtYmVyXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuX2hlYWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLl9oZWFkO1xuXG4gICAgICAgIHdoaWxlICgoY3VycmVudCA9IGN1cnJlbnQubmV4dCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0aWNrZXIuIElmIHRoZSB0aWNrZXIgaGFzIGxpc3RlbmVyc1xuICAgICAqIGEgbmV3IGFuaW1hdGlvbiBmcmFtZSBpcyByZXF1ZXN0ZWQgYXQgdGhpcyBwb2ludC5cbiAgICAgKi9cbiAgICBzdGFydCgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RJZk5lZWRlZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIHRpY2tlci4gSWYgdGhlIHRpY2tlciBoYXMgcmVxdWVzdGVkXG4gICAgICogYW4gYW5pbWF0aW9uIGZyYW1lIGl0IGlzIGNhbmNlbGVkIGF0IHRoaXMgcG9pbnQuXG4gICAgICovXG4gICAgc3RvcCgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2NhbmNlbElmTmVlZGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95IHRoZSB0aWNrZXIgYW5kIGRvbid0IHVzZSBhZnRlciB0aGlzLiBDYWxsaW5nXG4gICAgICogdGhpcyBtZXRob2QgcmVtb3ZlcyBhbGwgcmVmZXJlbmNlcyB0byBpbnRlcm5hbCBldmVudHMuXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuX3Byb3RlY3RlZClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG5cbiAgICAgICAgICAgIGxldCBsaXN0ZW5lciA9IHRoaXMuX2hlYWQubmV4dDtcblxuICAgICAgICAgICAgd2hpbGUgKGxpc3RlbmVyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXIuZGVzdHJveSh0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5faGVhZC5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLl9oZWFkID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJzIGFuIHVwZGF0ZS4gQW4gdXBkYXRlIGVudGFpbHMgc2V0dGluZyB0aGVcbiAgICAgKiBjdXJyZW50IHtAbGluayBQSVhJLlRpY2tlciNlbGFwc2VkTVN9LFxuICAgICAqIHRoZSBjdXJyZW50IHtAbGluayBQSVhJLlRpY2tlciNkZWx0YVRpbWV9LFxuICAgICAqIGludm9raW5nIGFsbCBsaXN0ZW5lcnMgd2l0aCBjdXJyZW50IGRlbHRhVGltZSxcbiAgICAgKiBhbmQgdGhlbiBmaW5hbGx5IHNldHRpbmcge0BsaW5rIFBJWEkuVGlja2VyI2xhc3RUaW1lfVxuICAgICAqIHdpdGggdGhlIHZhbHVlIG9mIGN1cnJlbnRUaW1lIHRoYXQgd2FzIHByb3ZpZGVkLlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIGF1dG9tYXRpY2FsbHkgYnkgYW5pbWF0aW9uXG4gICAgICogZnJhbWUgY2FsbGJhY2tzIGlmIHRoZSB0aWNrZXIgaW5zdGFuY2UgaGFzIGJlZW4gc3RhcnRlZFxuICAgICAqIGFuZCBsaXN0ZW5lcnMgYXJlIGFkZGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjdXJyZW50VGltZT1wZXJmb3JtYW5jZS5ub3coKV0gLSB0aGUgY3VycmVudCB0aW1lIG9mIGV4ZWN1dGlvblxuICAgICAqL1xuICAgIHVwZGF0ZShjdXJyZW50VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpKTogdm9pZFxuICAgIHtcbiAgICAgICAgbGV0IGVsYXBzZWRNUztcblxuICAgICAgICAvLyBJZiB0aGUgZGlmZmVyZW5jZSBpbiB0aW1lIGlzIHplcm8gb3IgbmVnYXRpdmUsIHdlIGlnbm9yZSBtb3N0IG9mIHRoZSB3b3JrIGRvbmUgaGVyZS5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gdmFsaWQgZGlmZmVyZW5jZSwgdGhlbiBzaG91bGQgYmUgbm8gcmVhc29uIHRvIGxldCBhbnlvbmUga25vdyBhYm91dCBpdC5cbiAgICAgICAgLy8gQSB6ZXJvIGRlbHRhLCBpcyBleGFjdGx5IHRoYXQsIG5vdGhpbmcgc2hvdWxkIHVwZGF0ZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhlIGRpZmZlcmVuY2UgaW4gdGltZSBjYW4gYmUgbmVnYXRpdmUsIGFuZCBubyB0aGlzIGRvZXMgbm90IG1lYW4gdGltZSB0cmF2ZWxpbmcuXG4gICAgICAgIC8vIFRoaXMgY2FuIGJlIHRoZSByZXN1bHQgb2YgYSByYWNlIGNvbmRpdGlvbiBiZXR3ZWVuIHdoZW4gYW4gYW5pbWF0aW9uIGZyYW1lIGlzIHJlcXVlc3RlZFxuICAgICAgICAvLyBvbiB0aGUgY3VycmVudCBKYXZhU2NyaXB0IGVuZ2luZSBldmVudCBsb29wLCBhbmQgd2hlbiB0aGUgdGlja2VyJ3Mgc3RhcnQgbWV0aG9kIGlzIGludm9rZWRcbiAgICAgICAgLy8gKHdoaWNoIGludm9rZXMgdGhlIGludGVybmFsIF9yZXF1ZXN0SWZOZWVkZWQgbWV0aG9kKS4gSWYgYSBmcmFtZSBpcyByZXF1ZXN0ZWQgYmVmb3JlXG4gICAgICAgIC8vIF9yZXF1ZXN0SWZOZWVkZWQgaXMgaW52b2tlZCwgdGhlbiB0aGUgY2FsbGJhY2sgZm9yIHRoZSBhbmltYXRpb24gZnJhbWUgdGhlIHRpY2tlciByZXF1ZXN0cyxcbiAgICAgICAgLy8gY2FuIHJlY2VpdmUgYSB0aW1lIGFyZ3VtZW50IHRoYXQgY2FuIGJlIGxlc3MgdGhhbiB0aGUgbGFzdFRpbWUgdmFsdWUgdGhhdCB3YXMgc2V0IHdpdGhpblxuICAgICAgICAvLyBfcmVxdWVzdElmTmVlZGVkLiBUaGlzIGRpZmZlcmVuY2UgaXMgaW4gbWljcm9zZWNvbmRzLCBidXQgdGhpcyBpcyBlbm91Z2ggdG8gY2F1c2UgcHJvYmxlbXMuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoaXMgY2hlY2sgY292ZXJzIHRoaXMgYnJvd3NlciBlbmdpbmUgdGltaW5nIGlzc3VlLCBhcyB3ZWxsIGFzIGlmIGNvbnN1bWVycyBwYXNzIGFuIGludmFsaWRcbiAgICAgICAgLy8gY3VycmVudFRpbWUgdmFsdWUuIFRoaXMgbWF5IGhhcHBlbiBpZiBjb25zdW1lcnMgb3B0LW91dCBvZiB0aGUgYXV0b1N0YXJ0LCBhbmQgdXBkYXRlIHRoZW1zZWx2ZXMuXG5cbiAgICAgICAgaWYgKGN1cnJlbnRUaW1lID4gdGhpcy5sYXN0VGltZSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gU2F2ZSB1bmNhcHBlZCBlbGFwc2VkTVMgZm9yIG1lYXN1cmVtZW50XG4gICAgICAgICAgICBlbGFwc2VkTVMgPSB0aGlzLmVsYXBzZWRNUyA9IGN1cnJlbnRUaW1lIC0gdGhpcy5sYXN0VGltZTtcblxuICAgICAgICAgICAgLy8gY2FwIHRoZSBtaWxsaXNlY29uZHMgZWxhcHNlZCB1c2VkIGZvciBkZWx0YVRpbWVcbiAgICAgICAgICAgIGlmIChlbGFwc2VkTVMgPiB0aGlzLl9tYXhFbGFwc2VkTVMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZWxhcHNlZE1TID0gdGhpcy5fbWF4RWxhcHNlZE1TO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbGFwc2VkTVMgKj0gdGhpcy5zcGVlZDtcblxuICAgICAgICAgICAgLy8gSWYgbm90IGVub3VnaCB0aW1lIGhhcyBwYXNzZWQsIGV4aXQgdGhlIGZ1bmN0aW9uLlxuICAgICAgICAgICAgLy8gR2V0IHJlYWR5IGZvciBuZXh0IGZyYW1lIGJ5IHNldHRpbmcgX2xhc3RGcmFtZSwgYnV0IGJhc2VkIG9uIF9taW5FbGFwc2VkTVNcbiAgICAgICAgICAgIC8vIGFkanVzdG1lbnQgdG8gZW5zdXJlIGEgcmVsYXRpdmVseSBzdGFibGUgaW50ZXJ2YWwuXG4gICAgICAgICAgICBpZiAodGhpcy5fbWluRWxhcHNlZE1TKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gY3VycmVudFRpbWUgLSB0aGlzLl9sYXN0RnJhbWUgfCAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRlbHRhIDwgdGhpcy5fbWluRWxhcHNlZE1TKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RGcmFtZSA9IGN1cnJlbnRUaW1lIC0gKGRlbHRhICUgdGhpcy5fbWluRWxhcHNlZE1TKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5kZWx0YU1TID0gZWxhcHNlZE1TO1xuICAgICAgICAgICAgdGhpcy5kZWx0YVRpbWUgPSB0aGlzLmRlbHRhTVMgKiBzZXR0aW5ncy5UQVJHRVRfRlBNUztcblxuICAgICAgICAgICAgLy8gQ2FjaGUgYSBsb2NhbCByZWZlcmVuY2UsIGluLWNhc2UgdGlja2VyIGlzIGRlc3Ryb3llZFxuICAgICAgICAgICAgLy8gZHVyaW5nIHRoZSBlbWl0LCB3ZSBjYW4gc3RpbGwgY2hlY2sgZm9yIGhlYWQubmV4dFxuICAgICAgICAgICAgY29uc3QgaGVhZCA9IHRoaXMuX2hlYWQ7XG5cbiAgICAgICAgICAgIC8vIEludm9rZSBsaXN0ZW5lcnMgYWRkZWQgdG8gaW50ZXJuYWwgZW1pdHRlclxuICAgICAgICAgICAgbGV0IGxpc3RlbmVyID0gaGVhZC5uZXh0O1xuXG4gICAgICAgICAgICB3aGlsZSAobGlzdGVuZXIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lci5lbWl0KHRoaXMuZGVsdGFUaW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFoZWFkLm5leHQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsSWZOZWVkZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZGVsdGFUaW1lID0gdGhpcy5kZWx0YU1TID0gdGhpcy5lbGFwc2VkTVMgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sYXN0VGltZSA9IGN1cnJlbnRUaW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFtZXMgcGVyIHNlY29uZCBhdCB3aGljaCB0aGlzIHRpY2tlciBpcyBydW5uaW5nLlxuICAgICAqIFRoZSBkZWZhdWx0IGlzIGFwcHJveGltYXRlbHkgNjAgaW4gbW9zdCBtb2Rlcm4gYnJvd3NlcnMuXG4gICAgICogKipOb3RlOioqIFRoaXMgZG9lcyBub3QgZmFjdG9yIGluIHRoZSB2YWx1ZSBvZlxuICAgICAqIHtAbGluayBQSVhJLlRpY2tlciNzcGVlZH0sIHdoaWNoIGlzIHNwZWNpZmljXG4gICAgICogdG8gc2NhbGluZyB7QGxpbmsgUElYSS5UaWNrZXIjZGVsdGFUaW1lfS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBnZXQgRlBTKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIDEwMDAgLyB0aGlzLmVsYXBzZWRNUztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYW5hZ2VzIHRoZSBtYXhpbXVtIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgYWxsb3dlZCB0b1xuICAgICAqIGVsYXBzZSBiZXR3ZWVuIGludm9raW5nIHtAbGluayBQSVhJLlRpY2tlciN1cGRhdGV9LlxuICAgICAqIFRoaXMgdmFsdWUgaXMgdXNlZCB0byBjYXAge0BsaW5rIFBJWEkuVGlja2VyI2RlbHRhVGltZX0sXG4gICAgICogYnV0IGRvZXMgbm90IGVmZmVjdCB0aGUgbWVhc3VyZWQgdmFsdWUgb2Yge0BsaW5rIFBJWEkuVGlja2VyI0ZQU30uXG4gICAgICogV2hlbiBzZXR0aW5nIHRoaXMgcHJvcGVydHkgaXQgaXMgY2xhbXBlZCB0byBhIHZhbHVlIGJldHdlZW5cbiAgICAgKiBgMGAgYW5kIGBQSVhJLnNldHRpbmdzLlRBUkdFVF9GUE1TICogMTAwMGAuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMTBcbiAgICAgKi9cbiAgICBnZXQgbWluRlBTKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIDEwMDAgLyB0aGlzLl9tYXhFbGFwc2VkTVM7XG4gICAgfVxuXG4gICAgc2V0IG1pbkZQUyhmcHM6IG51bWJlcilcbiAgICB7XG4gICAgICAgIC8vIE1pbmltdW0gbXVzdCBiZSBiZWxvdyB0aGUgbWF4RlBTXG4gICAgICAgIGNvbnN0IG1pbkZQUyA9IE1hdGgubWluKHRoaXMubWF4RlBTLCBmcHMpO1xuXG4gICAgICAgIC8vIE11c3QgYmUgYXQgbGVhc3QgMCwgYnV0IGJlbG93IDEgLyBzZXR0aW5ncy5UQVJHRVRfRlBNU1xuICAgICAgICBjb25zdCBtaW5GUE1TID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgbWluRlBTKSAvIDEwMDAsIHNldHRpbmdzLlRBUkdFVF9GUE1TKTtcblxuICAgICAgICB0aGlzLl9tYXhFbGFwc2VkTVMgPSAxIC8gbWluRlBNUztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYW5hZ2VzIHRoZSBtaW5pbXVtIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgcmVxdWlyZWQgdG9cbiAgICAgKiBlbGFwc2UgYmV0d2VlbiBpbnZva2luZyB7QGxpbmsgUElYSS5UaWNrZXIjdXBkYXRlfS5cbiAgICAgKiBUaGlzIHdpbGwgZWZmZWN0IHRoZSBtZWFzdXJlZCB2YWx1ZSBvZiB7QGxpbmsgUElYSS5UaWNrZXIjRlBTfS5cbiAgICAgKiBJZiBpdCBpcyBzZXQgdG8gYDBgLCB0aGVuIHRoZXJlIGlzIG5vIGxpbWl0OyBQaXhpSlMgd2lsbCByZW5kZXIgYXMgbWFueSBmcmFtZXMgYXMgaXQgY2FuLlxuICAgICAqIE90aGVyd2lzZSBpdCB3aWxsIGJlIGF0IGxlYXN0IGBtaW5GUFNgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIGdldCBtYXhGUFMoKTogbnVtYmVyXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fbWluRWxhcHNlZE1TKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgxMDAwIC8gdGhpcy5fbWluRWxhcHNlZE1TKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHNldCBtYXhGUFMoZnBzOiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAoZnBzID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9taW5FbGFwc2VkTVMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gTWF4IG11c3QgYmUgYXQgbGVhc3QgdGhlIG1pbkZQU1xuICAgICAgICAgICAgY29uc3QgbWF4RlBTID0gTWF0aC5tYXgodGhpcy5taW5GUFMsIGZwcyk7XG5cbiAgICAgICAgICAgIHRoaXMuX21pbkVsYXBzZWRNUyA9IDEgLyAobWF4RlBTIC8gMTAwMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2hhcmVkIHRpY2tlciBpbnN0YW5jZSB1c2VkIGJ5IHtAbGluayBQSVhJLkFuaW1hdGVkU3ByaXRlfSBhbmQgYnlcbiAgICAgKiB7QGxpbmsgUElYSS5WaWRlb1Jlc291cmNlfSB0byB1cGRhdGUgYW5pbWF0aW9uIGZyYW1lcyAvIHZpZGVvIHRleHR1cmVzLlxuICAgICAqXG4gICAgICogSXQgbWF5IGFsc28gYmUgdXNlZCBieSB7QGxpbmsgUElYSS5BcHBsaWNhdGlvbn0gaWYgY3JlYXRlZCB3aXRoIHRoZSBgc2hhcmVkVGlja2VyYCBvcHRpb24gcHJvcGVydHkgc2V0IHRvIHRydWUuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvcGVydHkge0BsaW5rIFBJWEkuVGlja2VyI2F1dG9TdGFydH0gaXMgc2V0IHRvIGB0cnVlYCBmb3IgdGhpcyBpbnN0YW5jZS5cbiAgICAgKiBQbGVhc2UgZm9sbG93IHRoZSBleGFtcGxlcyBmb3IgdXNhZ2UsIGluY2x1ZGluZyBob3cgdG8gb3B0LW91dCBvZiBhdXRvLXN0YXJ0aW5nIHRoZSBzaGFyZWQgdGlja2VyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBsZXQgdGlja2VyID0gUElYSS5UaWNrZXIuc2hhcmVkO1xuICAgICAqIC8vIFNldCB0aGlzIHRvIHByZXZlbnQgc3RhcnRpbmcgdGhpcyB0aWNrZXIgd2hlbiBsaXN0ZW5lcnMgYXJlIGFkZGVkLlxuICAgICAqIC8vIEJ5IGRlZmF1bHQgdGhpcyBpcyB0cnVlIG9ubHkgZm9yIHRoZSBQSVhJLlRpY2tlci5zaGFyZWQgaW5zdGFuY2UuXG4gICAgICogdGlja2VyLmF1dG9TdGFydCA9IGZhbHNlO1xuICAgICAqIC8vIEZZSSwgY2FsbCB0aGlzIHRvIGVuc3VyZSB0aGUgdGlja2VyIGlzIHN0b3BwZWQuIEl0IHNob3VsZCBiZSBzdG9wcGVkXG4gICAgICogLy8gaWYgeW91IGhhdmUgbm90IGF0dGVtcHRlZCB0byByZW5kZXIgYW55dGhpbmcgeWV0LlxuICAgICAqIHRpY2tlci5zdG9wKCk7XG4gICAgICogLy8gQ2FsbCB0aGlzIHdoZW4geW91IGFyZSByZWFkeSBmb3IgYSBydW5uaW5nIHNoYXJlZCB0aWNrZXIuXG4gICAgICogdGlja2VyLnN0YXJ0KCk7XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIFlvdSBtYXkgdXNlIHRoZSBzaGFyZWQgdGlja2VyIHRvIHJlbmRlci4uLlxuICAgICAqIGxldCByZW5kZXJlciA9IFBJWEkuYXV0b0RldGVjdFJlbmRlcmVyKCk7XG4gICAgICogbGV0IHN0YWdlID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG4gICAgICogZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci52aWV3KTtcbiAgICAgKiB0aWNrZXIuYWRkKGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgICogICAgIHJlbmRlcmVyLnJlbmRlcihzdGFnZSk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIE9yIHlvdSBjYW4ganVzdCB1cGRhdGUgaXQgbWFudWFsbHkuXG4gICAgICogdGlja2VyLmF1dG9TdGFydCA9IGZhbHNlO1xuICAgICAqIHRpY2tlci5zdG9wKCk7XG4gICAgICogZnVuY3Rpb24gYW5pbWF0ZSh0aW1lKSB7XG4gICAgICogICAgIHRpY2tlci51cGRhdGUodGltZSk7XG4gICAgICogICAgIHJlbmRlcmVyLnJlbmRlcihzdGFnZSk7XG4gICAgICogICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICAgKiB9XG4gICAgICogYW5pbWF0ZShwZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtQSVhJLlRpY2tlcn1cbiAgICAgKiBAc3RhdGljXG4gICAgICovXG4gICAgc3RhdGljIGdldCBzaGFyZWQoKTogVGlja2VyXG4gICAge1xuICAgICAgICBpZiAoIVRpY2tlci5fc2hhcmVkKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzaGFyZWQgPSBUaWNrZXIuX3NoYXJlZCA9IG5ldyBUaWNrZXIoKTtcblxuICAgICAgICAgICAgc2hhcmVkLmF1dG9TdGFydCA9IHRydWU7XG4gICAgICAgICAgICBzaGFyZWQuX3Byb3RlY3RlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gVGlja2VyLl9zaGFyZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHN5c3RlbSB0aWNrZXIgaW5zdGFuY2UgdXNlZCBieSB7QGxpbmsgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXJ9IGFuZCBieVxuICAgICAqIHtAbGluayBQSVhJLkJhc2VQcmVwYXJlfSBmb3IgY29yZSB0aW1pbmcgZnVuY3Rpb25hbGl0eSB0aGF0IHNob3VsZG4ndCB1c3VhbGx5IG5lZWQgdG8gYmUgcGF1c2VkLFxuICAgICAqIHVubGlrZSB0aGUgYHNoYXJlZGAgdGlja2VyIHdoaWNoIGRyaXZlcyB2aXN1YWwgYW5pbWF0aW9ucyBhbmQgcmVuZGVyaW5nIHdoaWNoIG1heSB3YW50IHRvIGJlIHBhdXNlZC5cbiAgICAgKlxuICAgICAqIFRoZSBwcm9wZXJ0eSB7QGxpbmsgUElYSS5UaWNrZXIjYXV0b1N0YXJ0fSBpcyBzZXQgdG8gYHRydWVgIGZvciB0aGlzIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7UElYSS5UaWNrZXJ9XG4gICAgICogQHN0YXRpY1xuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgc3lzdGVtKCk6IFRpY2tlclxuICAgIHtcbiAgICAgICAgaWYgKCFUaWNrZXIuX3N5c3RlbSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc3lzdGVtID0gVGlja2VyLl9zeXN0ZW0gPSBuZXcgVGlja2VyKCk7XG5cbiAgICAgICAgICAgIHN5c3RlbS5hdXRvU3RhcnQgPSB0cnVlO1xuICAgICAgICAgICAgc3lzdGVtLl9wcm90ZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFRpY2tlci5fc3lzdGVtO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBVUERBVEVfUFJJT1JJVFkgfSBmcm9tICcuL2NvbnN0JztcbmltcG9ydCB7IFRpY2tlciB9IGZyb20gJy4vVGlja2VyJztcblxuaW1wb3J0IHR5cGUgeyBJQXBwbGljYXRpb25PcHRpb25zIH0gZnJvbSAnQHBpeGkvYXBwJztcblxuLyoqXG4gKiBNaWRkbGV3YXJlIGZvciBmb3IgQXBwbGljYXRpb24gVGlja2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQge1RpY2tlclBsdWdpbn0gZnJvbSAnQHBpeGkvdGlja2VyJztcbiAqIGltcG9ydCB7QXBwbGljYXRpb259IGZyb20gJ0BwaXhpL2FwcCc7XG4gKiBBcHBsaWNhdGlvbi5yZWdpc3RlclBsdWdpbihUaWNrZXJQbHVnaW4pO1xuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIFRpY2tlclBsdWdpblxue1xuICAgIHN0YXRpYyBzdGFydDogKCkgPT4gdm9pZDtcbiAgICBzdGF0aWMgc3RvcDogKCkgPT4gdm9pZDtcbiAgICBzdGF0aWMgX3RpY2tlcjogVGlja2VyO1xuICAgIHN0YXRpYyB0aWNrZXI6IFRpY2tlcjtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIHBsdWdpbiB3aXRoIHNjb3BlIG9mIGFwcGxpY2F0aW9uIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gU2VlIGFwcGxpY2F0aW9uIG9wdGlvbnNcbiAgICAgKi9cbiAgICBzdGF0aWMgaW5pdChvcHRpb25zPzogSUFwcGxpY2F0aW9uT3B0aW9ucyk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIFNldCBkZWZhdWx0XG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGF1dG9TdGFydDogdHJ1ZSxcbiAgICAgICAgICAgIHNoYXJlZFRpY2tlcjogZmFsc2UsXG4gICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0aWNrZXIgc2V0dGVyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAndGlja2VyJyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzZXQodGlja2VyKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3RpY2tlcilcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGlja2VyLnJlbW92ZSh0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGlja2VyID0gdGlja2VyO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGlja2VyKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXIuYWRkKHRoaXMucmVuZGVyLCB0aGlzLCBVUERBVEVfUFJJT1JJVFkuTE9XKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0KClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl90aWNrZXI7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIHN0b3BwaW5nIHRoZSByZW5kZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZXRob2QgUElYSS5BcHBsaWNhdGlvbiNzdG9wXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0b3AgPSAoKTogdm9pZCA9PlxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl90aWNrZXIuc3RvcCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIHN0YXJ0aW5nIHRoZSByZW5kZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZXRob2QgUElYSS5BcHBsaWNhdGlvbiNzdGFydFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFydCA9ICgpOiB2b2lkID0+XG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3RpY2tlci5zdGFydCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCByZWZlcmVuY2UgdG8gdGhlIHRpY2tlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge1BJWEkuVGlja2VyfVxuICAgICAgICAgKiBAbmFtZSBfdGlja2VyXG4gICAgICAgICAqIEBtZW1iZXJvZiBQSVhJLkFwcGxpY2F0aW9uI1xuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGlja2VyID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGlja2VyIGZvciBkb2luZyByZW5kZXIgdXBkYXRlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge1BJWEkuVGlja2VyfVxuICAgICAgICAgKiBAbmFtZSB0aWNrZXJcbiAgICAgICAgICogQG1lbWJlcm9mIFBJWEkuQXBwbGljYXRpb24jXG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuVGlja2VyLnNoYXJlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWNrZXIgPSBvcHRpb25zLnNoYXJlZFRpY2tlciA/IFRpY2tlci5zaGFyZWQgOiBuZXcgVGlja2VyKCk7XG5cbiAgICAgICAgLy8gU3RhcnQgdGhlIHJlbmRlcmluZ1xuICAgICAgICBpZiAob3B0aW9ucy5hdXRvU3RhcnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIHRoZSB0aWNrZXIsIHNjb3BlZCB0byBhcHBsaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN0YXRpYyBkZXN0cm95KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl90aWNrZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZFRpY2tlciA9IHRoaXMuX3RpY2tlcjtcblxuICAgICAgICAgICAgdGhpcy50aWNrZXIgPSBudWxsO1xuICAgICAgICAgICAgb2xkVGlja2VyLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQb2ludCwgSVBvaW50RGF0YSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG5pbXBvcnQgdHlwZSB7IERpc3BsYXlPYmplY3QgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcblxuZXhwb3J0IHR5cGUgSW50ZXJhY3RpdmVQb2ludGVyRXZlbnQgPSBQb2ludGVyRXZlbnQgfCBUb3VjaEV2ZW50IHwgTW91c2VFdmVudDtcblxuLyoqXG4gKiBIb2xkcyBhbGwgaW5mb3JtYXRpb24gcmVsYXRlZCB0byBhbiBJbnRlcmFjdGlvbiBldmVudFxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVyYWN0aW9uRGF0YVxue1xuICAgIHB1YmxpYyBnbG9iYWw6IFBvaW50O1xuICAgIHB1YmxpYyB0YXJnZXQ6IERpc3BsYXlPYmplY3Q7XG4gICAgcHVibGljIG9yaWdpbmFsRXZlbnQ6IEludGVyYWN0aXZlUG9pbnRlckV2ZW50O1xuICAgIHB1YmxpYyBpZGVudGlmaWVyOiBudW1iZXI7XG4gICAgcHVibGljIGlzUHJpbWFyeTogYm9vbGVhbjtcbiAgICBwdWJsaWMgYnV0dG9uOiBudW1iZXI7XG4gICAgcHVibGljIGJ1dHRvbnM6IG51bWJlcjtcbiAgICBwdWJsaWMgd2lkdGg6IG51bWJlcjtcbiAgICBwdWJsaWMgaGVpZ2h0OiBudW1iZXI7XG4gICAgcHVibGljIHRpbHRYOiBudW1iZXI7XG4gICAgcHVibGljIHRpbHRZOiBudW1iZXI7XG4gICAgcHVibGljIHBvaW50ZXJUeXBlOiBzdHJpbmc7XG4gICAgcHVibGljIHByZXNzdXJlID0gMDtcbiAgICBwdWJsaWMgcm90YXRpb25BbmdsZSA9IDA7XG4gICAgcHVibGljIHR3aXN0ID0gMDtcbiAgICBwdWJsaWMgdGFuZ2VudGlhbFByZXNzdXJlID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIHBvaW50IHN0b3JlcyB0aGUgZ2xvYmFsIGNvb3JkcyBvZiB3aGVyZSB0aGUgdG91Y2gvbW91c2UgZXZlbnQgaGFwcGVuZWRcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5Qb2ludH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2xvYmFsID0gbmV3IFBvaW50KCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0YXJnZXQgU3ByaXRlIHRoYXQgd2FzIGludGVyYWN0ZWQgd2l0aFxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlNwcml0ZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBwYXNzZWQgdG8gYW4gZXZlbnQgaGFuZGxlciwgdGhpcyB3aWxsIGJlIHRoZSBvcmlnaW5hbCBET00gRXZlbnQgdGhhdCB3YXMgY2FwdHVyZWRcbiAgICAgICAgICpcbiAgICAgICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudFxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ub3VjaEV2ZW50XG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BvaW50ZXJFdmVudFxuICAgICAgICAgKiBAbWVtYmVyIHtNb3VzZUV2ZW50fFRvdWNoRXZlbnR8UG9pbnRlckV2ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmlnaW5hbEV2ZW50ID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgaW50ZXJhY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pZGVudGlmaWVyID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRoZSBwb2ludGVyIGRldmljZSB0aGF0IGNyZWF0ZWQgdGhlIGV2ZW50IGlzIHRoZSBwcmltYXJ5IHBvaW50ZXIuXG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BvaW50ZXJFdmVudC9pc1ByaW1hcnlcbiAgICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgd2hpY2ggYnV0dG9uIHdhcyBwcmVzc2VkIG9uIHRoZSBtb3VzZSBvciBwb2ludGVyIGRldmljZSB0byB0cmlnZ2VyIHRoZSBldmVudC5cbiAgICAgICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudC9idXR0b25cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnV0dG9uID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHdoaWNoIGJ1dHRvbnMgYXJlIHByZXNzZWQgb24gdGhlIG1vdXNlIG9yIHBvaW50ZXIgZGV2aWNlIHdoZW4gdGhlIGV2ZW50IGlzIHRyaWdnZXJlZC5cbiAgICAgICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudC9idXR0b25zXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1dHRvbnMgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd2lkdGggb2YgdGhlIHBvaW50ZXIncyBjb250YWN0IGFsb25nIHRoZSB4LWF4aXMsIG1lYXN1cmVkIGluIENTUyBwaXhlbHMuXG4gICAgICAgICAqIHJhZGl1c1ggb2YgVG91Y2hFdmVudHMgd2lsbCBiZSByZXByZXNlbnRlZCBieSB0aGlzIHZhbHVlLlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Qb2ludGVyRXZlbnQvd2lkdGhcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBwb2ludGVyJ3MgY29udGFjdCBhbG9uZyB0aGUgeS1heGlzLCBtZWFzdXJlZCBpbiBDU1MgcGl4ZWxzLlxuICAgICAgICAgKiByYWRpdXNZIG9mIFRvdWNoRXZlbnRzIHdpbGwgYmUgcmVwcmVzZW50ZWQgYnkgdGhpcyB2YWx1ZS5cbiAgICAgICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUG9pbnRlckV2ZW50L2hlaWdodFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYW5nbGUsIGluIGRlZ3JlZXMsIGJldHdlZW4gdGhlIHBvaW50ZXIgZGV2aWNlIGFuZCB0aGUgc2NyZWVuLlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Qb2ludGVyRXZlbnQvdGlsdFhcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGlsdFggPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYW5nbGUsIGluIGRlZ3JlZXMsIGJldHdlZW4gdGhlIHBvaW50ZXIgZGV2aWNlIGFuZCB0aGUgc2NyZWVuLlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Qb2ludGVyRXZlbnQvdGlsdFlcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGlsdFkgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHlwZSBvZiBwb2ludGVyIHRoYXQgdHJpZ2dlcmVkIHRoZSBldmVudC5cbiAgICAgICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUG9pbnRlckV2ZW50L3BvaW50ZXJUeXBlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvaW50ZXJUeXBlID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJlc3N1cmUgYXBwbGllZCBieSB0aGUgcG9pbnRpbmcgZGV2aWNlIGR1cmluZyB0aGUgZXZlbnQuIEEgVG91Y2gncyBmb3JjZSBwcm9wZXJ0eVxuICAgICAgICAgKiB3aWxsIGJlIHJlcHJlc2VudGVkIGJ5IHRoaXMgdmFsdWUuXG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BvaW50ZXJFdmVudC9wcmVzc3VyZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcmVzc3VyZSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZyb20gVG91Y2hFdmVudHMgKG5vdCBQb2ludGVyRXZlbnRzIHRyaWdnZXJlZCBieSB0b3VjaGVzKSwgdGhlIHJvdGF0aW9uQW5nbGUgb2YgdGhlIFRvdWNoLlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ub3VjaC9yb3RhdGlvbkFuZ2xlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJvdGF0aW9uQW5nbGUgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUd2lzdCBvZiBhIHN0eWx1cyBwb2ludGVyLlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9wb2ludGVyZXZlbnRzLyNwb2ludGVyZXZlbnQtaW50ZXJmYWNlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR3aXN0ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQmFycmVsIHByZXNzdXJlIG9uIGEgc3R5bHVzIHBvaW50ZXIuXG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3BvaW50ZXJldmVudHMvI3BvaW50ZXJldmVudC1pbnRlcmZhY2VcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFuZ2VudGlhbFByZXNzdXJlID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHBvaW50ZXIuIEl0IHdpbGwgYmUgdGhlIHNhbWUgYXMgYGlkZW50aWZpZXJgLlxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Qb2ludGVyRXZlbnQvcG9pbnRlcklkXG4gICAgICovXG4gICAgZ2V0IHBvaW50ZXJJZCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkZW50aWZpZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyB3aWxsIHJldHVybiB0aGUgbG9jYWwgY29vcmRpbmF0ZXMgb2YgdGhlIHNwZWNpZmllZCBkaXNwbGF5T2JqZWN0IGZvciB0aGlzIEludGVyYWN0aW9uRGF0YVxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IGRpc3BsYXlPYmplY3QgLSBUaGUgRGlzcGxheU9iamVjdCB0aGF0IHlvdSB3b3VsZCBsaWtlIHRoZSBsb2NhbFxuICAgICAqICBjb29yZHMgb2ZmXG4gICAgICogQHBhcmFtIHtQSVhJLlBvaW50fSBbcG9pbnRdIC0gQSBQb2ludCBvYmplY3QgaW4gd2hpY2ggdG8gc3RvcmUgdGhlIHZhbHVlLCBvcHRpb25hbCAob3RoZXJ3aXNlXG4gICAgICogIHdpbGwgY3JlYXRlIGEgbmV3IHBvaW50KVxuICAgICAqIEBwYXJhbSB7UElYSS5Qb2ludH0gW2dsb2JhbFBvc10gLSBBIFBvaW50IG9iamVjdCBjb250YWluaW5nIHlvdXIgY3VzdG9tIGdsb2JhbCBjb29yZHMsIG9wdGlvbmFsXG4gICAgICogIChvdGhlcndpc2Ugd2lsbCB1c2UgdGhlIGN1cnJlbnQgZ2xvYmFsIGNvb3JkcylcbiAgICAgKiBAcmV0dXJuIHtQSVhJLlBvaW50fSBBIHBvaW50IGNvbnRhaW5pbmcgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBJbnRlcmFjdGlvbkRhdGEgcG9zaXRpb24gcmVsYXRpdmVcbiAgICAgKiAgdG8gdGhlIERpc3BsYXlPYmplY3RcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0TG9jYWxQb3NpdGlvbjxQIGV4dGVuZHMgSVBvaW50RGF0YSA9IFBvaW50PihkaXNwbGF5T2JqZWN0OiBEaXNwbGF5T2JqZWN0LCBwb2ludD86IFAsIGdsb2JhbFBvcz86IElQb2ludERhdGEpOiBQXG4gICAge1xuICAgICAgICByZXR1cm4gZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybS5hcHBseUludmVyc2U8UD4oZ2xvYmFsUG9zIHx8IHRoaXMuZ2xvYmFsLCBwb2ludCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29waWVzIHByb3BlcnRpZXMgZnJvbSBub3JtYWxpemVkIGV2ZW50IGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RvdWNofE1vdXNlRXZlbnR8UG9pbnRlckV2ZW50fSBldmVudCAtIFRoZSBub3JtYWxpemVkIGV2ZW50IGRhdGFcbiAgICAgKi9cbiAgICBwdWJsaWMgY29weUV2ZW50KGV2ZW50OiBUb3VjaCB8IEludGVyYWN0aXZlUG9pbnRlckV2ZW50KTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gaXNQcmltYXJ5IHNob3VsZCBvbmx5IGNoYW5nZSBvbiB0b3VjaHN0YXJ0L3BvaW50ZXJkb3duLCBzbyB3ZSBkb24ndCB3YW50IHRvIG92ZXJ3cml0ZVxuICAgICAgICAvLyBpdCB3aXRoIFwiZmFsc2VcIiBvbiBsYXRlciBldmVudHMgd2hlbiBvdXIgc2hpbSBmb3IgaXQgb24gdG91Y2ggZXZlbnRzIG1pZ2h0IG5vdCBiZVxuICAgICAgICAvLyBhY2N1cmF0ZVxuICAgICAgICBpZiAoJ2lzUHJpbWFyeScgaW4gZXZlbnQgJiYgZXZlbnQuaXNQcmltYXJ5KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idXR0b24gPSAnYnV0dG9uJyBpbiBldmVudCAmJiBldmVudC5idXR0b247XG4gICAgICAgIC8vIGV2ZW50LmJ1dHRvbnMgaXMgbm90IGF2YWlsYWJsZSBpbiBhbGwgYnJvd3NlcnMgKGllLiBTYWZhcmkpLCBidXQgaXQgZG9lcyBoYXZlIGEgbm9uLXN0YW5kYXJkXG4gICAgICAgIC8vIGV2ZW50LndoaWNoIHByb3BlcnR5IGluc3RlYWQsIHdoaWNoIGNvbnZleXMgdGhlIHNhbWUgaW5mb3JtYXRpb24uXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSAnYnV0dG9ucycgaW4gZXZlbnQgJiYgZXZlbnQuYnV0dG9ucztcblxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBOdW1iZXIuaXNJbnRlZ2VyKGJ1dHRvbnMpID8gYnV0dG9ucyA6ICd3aGljaCcgaW4gZXZlbnQgJiYgZXZlbnQud2hpY2g7XG4gICAgICAgIHRoaXMud2lkdGggPSAnd2lkdGgnIGluIGV2ZW50ICYmIGV2ZW50LndpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9ICdoZWlnaHQnIGluIGV2ZW50ICYmIGV2ZW50LmhlaWdodDtcbiAgICAgICAgdGhpcy50aWx0WCA9ICd0aWx0WCcgaW4gZXZlbnQgJiYgZXZlbnQudGlsdFg7XG4gICAgICAgIHRoaXMudGlsdFkgPSAndGlsdFknIGluIGV2ZW50ICYmIGV2ZW50LnRpbHRZO1xuICAgICAgICB0aGlzLnBvaW50ZXJUeXBlID0gJ3BvaW50ZXJUeXBlJyBpbiBldmVudCAmJiBldmVudC5wb2ludGVyVHlwZTtcbiAgICAgICAgdGhpcy5wcmVzc3VyZSA9ICdwcmVzc3VyZScgaW4gZXZlbnQgJiYgZXZlbnQucHJlc3N1cmU7XG4gICAgICAgIHRoaXMucm90YXRpb25BbmdsZSA9ICdyb3RhdGlvbkFuZ2xlJyBpbiBldmVudCAmJiBldmVudC5yb3RhdGlvbkFuZ2xlO1xuICAgICAgICB0aGlzLnR3aXN0ID0gKCd0d2lzdCcgaW4gZXZlbnQgJiYgZXZlbnQudHdpc3QpIHx8IDA7XG4gICAgICAgIHRoaXMudGFuZ2VudGlhbFByZXNzdXJlID0gKCd0YW5nZW50aWFsUHJlc3N1cmUnIGluIGV2ZW50ICYmIGV2ZW50LnRhbmdlbnRpYWxQcmVzc3VyZSkgfHwgMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGRhdGEgZm9yIHBvb2xpbmcuXG4gICAgICovXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIGlzUHJpbWFyeSBpcyB0aGUgb25seSBwcm9wZXJ0eSB0aGF0IHdlIHJlYWxseSBuZWVkIHRvIHJlc2V0IC0gZXZlcnl0aGluZyBlbHNlIGlzXG4gICAgICAgIC8vIGd1YXJhbnRlZWQgdG8gYmUgb3ZlcndyaXR0ZW5cbiAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSBmYWxzZTtcbiAgICB9XG59XG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiaW1wb3J0IHR5cGUgeyBEaXNwbGF5T2JqZWN0IH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5pbXBvcnQgdHlwZSB7IEludGVyYWN0aW9uRGF0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb25EYXRhJztcblxuZXhwb3J0IHR5cGUgSW50ZXJhY3Rpb25DYWxsYmFjayA9IChpbnRlcmFjdGlvbkV2ZW50OiBJbnRlcmFjdGlvbkV2ZW50LCBkaXNwbGF5T2JqZWN0OiBEaXNwbGF5T2JqZWN0LCBoaXQ/OiBib29sZWFuKSA9PiB2b2lkO1xuXG4vKipcbiAqIEV2ZW50IGNsYXNzIHRoYXQgbWltaWNzIG5hdGl2ZSBET00gZXZlbnRzLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVyYWN0aW9uRXZlbnRcbntcbiAgICBwdWJsaWMgc3RvcHBlZDogYm9vbGVhbjtcbiAgICBwdWJsaWMgc3RvcHNQcm9wYWdhdGluZ0F0OiBEaXNwbGF5T2JqZWN0O1xuICAgIHB1YmxpYyBzdG9wUHJvcGFnYXRpb25IaW50OiBib29sZWFuO1xuICAgIHB1YmxpYyB0YXJnZXQ6IERpc3BsYXlPYmplY3Q7XG4gICAgcHVibGljIGN1cnJlbnRUYXJnZXQ6IERpc3BsYXlPYmplY3Q7XG4gICAgcHVibGljIHR5cGU6IHN0cmluZztcbiAgICBwdWJsaWMgZGF0YTogSW50ZXJhY3Rpb25EYXRhO1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyBldmVudCB3aWxsIGNvbnRpbnVlIHByb3BhZ2F0aW5nIGluIHRoZSB0cmVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBSZW1haW5pbmcgZXZlbnRzIGZvciB0aGUge0BsaW5rIHN0b3BzUHJvcGFnYXRpbmdBdH0gb2JqZWN0XG4gICAgICAgICAqIHdpbGwgc3RpbGwgYmUgZGlzcGF0Y2hlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdCB3aGljaCBvYmplY3QgdGhpcyBldmVudCBzdG9wcyBwcm9wYWdhdGluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5EaXNwbGF5T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdG9wc1Byb3BhZ2F0aW5nQXQgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHdlIGFscmVhZHkgcmVhY2hlZCB0aGUgZWxlbWVudCB3ZSB3YW50IHRvXG4gICAgICAgICAqIHN0b3AgcHJvcGFnYXRpbmcgYXQuIFRoaXMgaXMgaW1wb3J0YW50IGZvciBkZWxheWVkIGV2ZW50cyxcbiAgICAgICAgICogd2hlcmUgd2Ugc3RhcnQgb3ZlciBkZWVwZXIgaW4gdGhlIHRyZWUgYWdhaW4uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0b3BQcm9wYWdhdGlvbkhpbnQgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9iamVjdCB3aGljaCBjYXVzZWQgdGhpcyBldmVudCB0byBiZSBkaXNwYXRjaGVkLlxuICAgICAgICAgKiBGb3IgbGlzdGVuZXIgY2FsbGJhY2sgc2VlIHtAbGluayBQSVhJLkludGVyYWN0aW9uRXZlbnQuY3VycmVudFRhcmdldH0uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuRGlzcGxheU9iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9iamVjdCB3aG9zZSBldmVudCBsaXN0ZW5lclx1MjAxOXMgY2FsbGJhY2sgaXMgY3VycmVudGx5IGJlaW5nIGludm9rZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuRGlzcGxheU9iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFR5cGUgb2YgdGhlIGV2ZW50XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVyYWN0aW9uRGF0YSByZWxhdGVkIHRvIHRoaXMgZXZlbnRcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5JbnRlcmFjdGlvbkRhdGF9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIGV2ZW50IGZyb20gcmVhY2hpbmcgYW55IG9iamVjdHMgb3RoZXIgdGhhbiB0aGUgY3VycmVudCBvYmplY3QuXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RvcFByb3BhZ2F0aW9uKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RvcFByb3BhZ2F0aW9uSGludCA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RvcHNQcm9wYWdhdGluZ0F0ID0gdGhpcy5jdXJyZW50VGFyZ2V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgZXZlbnQuXG4gICAgICovXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0b3BzUHJvcGFnYXRpbmdBdCA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RvcFByb3BhZ2F0aW9uSGludCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgfVxufVxuIiwgImV4cG9ydCBpbnRlcmZhY2UgSW50ZXJhY3Rpb25UcmFja2luZ0ZsYWdzXG57XG4gICAgT1ZFUjogbnVtYmVyO1xuICAgIExFRlRfRE9XTjogbnVtYmVyO1xuICAgIFJJR0hUX0RPV046IG51bWJlcjtcbiAgICBOT05FOiBudW1iZXI7XG59XG5cbi8qKlxuICogRGlzcGxheU9iamVjdHMgd2l0aCB0aGUge0BsaW5rIFBJWEkuaW50ZXJhY3RpdmVUYXJnZXR9IG1peGluIHVzZSB0aGlzIGNsYXNzIHRvIHRyYWNrIGludGVyYWN0aW9uc1xuICpcbiAqIEBjbGFzc1xuICogQHByaXZhdGVcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnRlcmFjdGlvblRyYWNraW5nRGF0YVxue1xuICAgIHB1YmxpYyBzdGF0aWMgRkxBR1M6IFJlYWRvbmx5PEludGVyYWN0aW9uVHJhY2tpbmdGbGFncz4gPSBPYmplY3QuZnJlZXplKHtcbiAgICAgICAgTk9ORTogMCxcbiAgICAgICAgT1ZFUjogMSA8PCAwLFxuICAgICAgICBMRUZUX0RPV046IDEgPDwgMSxcbiAgICAgICAgUklHSFRfRE9XTjogMSA8PCAyLFxuICAgIH0pO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcG9pbnRlcklkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfZmxhZ3M6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb2ludGVySWQgLSBVbmlxdWUgcG9pbnRlciBpZCBvZiB0aGUgZXZlbnRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBvaW50ZXJJZDogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5fcG9pbnRlcklkID0gcG9pbnRlcklkO1xuICAgICAgICB0aGlzLl9mbGFncyA9IEludGVyYWN0aW9uVHJhY2tpbmdEYXRhLkZMQUdTLk5PTkU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmbGFnIC0gVGhlIGludGVyYWN0aW9uIGZsYWcgdG8gc2V0XG4gICAgICogQHBhcmFtIHtib29sZWFufSB5biAtIFNob3VsZCB0aGUgZmxhZyBiZSBzZXQgb3IgdW5zZXRcbiAgICAgKi9cbiAgICBwcml2YXRlIF9kb1NldChmbGFnOiBudW1iZXIsIHluOiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHluKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9mbGFncyA9IHRoaXMuX2ZsYWdzIHwgZmxhZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2ZsYWdzID0gdGhpcy5fZmxhZ3MgJiAofmZsYWcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5pcXVlIHBvaW50ZXIgaWQgb2YgdGhlIGV2ZW50XG4gICAgICpcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgcG9pbnRlcklkKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvaW50ZXJJZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGF0ZSBvZiB0aGUgdHJhY2tpbmcgZGF0YSwgZXhwcmVzc2VkIGFzIGJpdCBmbGFnc1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGZsYWdzKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZsYWdzO1xuICAgIH1cblxuICAgIHNldCBmbGFncyhmbGFnczogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5fZmxhZ3MgPSBmbGFncztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJcyB0aGUgdHJhY2tlZCBldmVudCBpbmFjdGl2ZSAobm90IG92ZXIgb3IgZG93bik/XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgbm9uZSgpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmxhZ3MgPT09IEludGVyYWN0aW9uVHJhY2tpbmdEYXRhLkZMQUdTLk5PTkU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXMgdGhlIHRyYWNrZWQgZXZlbnQgb3ZlciB0aGUgRGlzcGxheU9iamVjdD9cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgb3ZlcigpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2ZsYWdzICYgSW50ZXJhY3Rpb25UcmFja2luZ0RhdGEuRkxBR1MuT1ZFUikgIT09IDA7XG4gICAgfVxuXG4gICAgc2V0IG92ZXIoeW46IGJvb2xlYW4pXG4gICAge1xuICAgICAgICB0aGlzLl9kb1NldChJbnRlcmFjdGlvblRyYWNraW5nRGF0YS5GTEFHUy5PVkVSLCB5bik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlkIHRoZSByaWdodCBtb3VzZSBidXR0b24gY29tZSBkb3duIGluIHRoZSBEaXNwbGF5T2JqZWN0P1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCByaWdodERvd24oKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9mbGFncyAmIEludGVyYWN0aW9uVHJhY2tpbmdEYXRhLkZMQUdTLlJJR0hUX0RPV04pICE9PSAwO1xuICAgIH1cblxuICAgIHNldCByaWdodERvd24oeW46IGJvb2xlYW4pXG4gICAge1xuICAgICAgICB0aGlzLl9kb1NldChJbnRlcmFjdGlvblRyYWNraW5nRGF0YS5GTEFHUy5SSUdIVF9ET1dOLCB5bik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlkIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBjb21lIGRvd24gaW4gdGhlIERpc3BsYXlPYmplY3Q/XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGxlZnREb3duKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiAodGhpcy5fZmxhZ3MgJiBJbnRlcmFjdGlvblRyYWNraW5nRGF0YS5GTEFHUy5MRUZUX0RPV04pICE9PSAwO1xuICAgIH1cblxuICAgIHNldCBsZWZ0RG93bih5bjogYm9vbGVhbilcbiAgICB7XG4gICAgICAgIHRoaXMuX2RvU2V0KEludGVyYWN0aW9uVHJhY2tpbmdEYXRhLkZMQUdTLkxFRlRfRE9XTiwgeW4pO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQb2ludCB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG5pbXBvcnQgdHlwZSB7IEludGVyYWN0aW9uRXZlbnQsIEludGVyYWN0aW9uQ2FsbGJhY2sgfSBmcm9tICcuL0ludGVyYWN0aW9uRXZlbnQnO1xuaW1wb3J0IHR5cGUgeyBDb250YWluZXIsIERpc3BsYXlPYmplY3QgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcblxuLyoqXG4gKiBTdHJhdGVneSBob3cgdG8gc2VhcmNoIHRocm91Z2ggc3RhZ2UgdHJlZSBmb3IgaW50ZXJhY3RpdmUgb2JqZWN0c1xuICpcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmVlU2VhcmNoXG57XG4gICAgcHJpdmF0ZSByZWFkb25seSBfdGVtcFBvaW50OiBQb2ludDtcblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIHRoaXMuX3RlbXBQb2ludCA9IG5ldyBQb2ludCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY3Vyc2l2ZSBpbXBsZW1lbnRhdGlvbiBmb3IgZmluZEhpdFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gaW50ZXJhY3Rpb25FdmVudCAtIGV2ZW50IGNvbnRhaW5pbmcgdGhlIHBvaW50IHRoYXRcbiAgICAgKiAgaXMgdGVzdGVkIGZvciBjb2xsaXNpb25cbiAgICAgKiBAcGFyYW0ge1BJWEkuQ29udGFpbmVyfFBJWEkuU3ByaXRlfFBJWEkuVGlsaW5nU3ByaXRlfSBkaXNwbGF5T2JqZWN0IC0gdGhlIGRpc3BsYXlPYmplY3RcbiAgICAgKiAgdGhhdCB3aWxsIGJlIGhpdCB0ZXN0IChyZWN1cnNpdmVseSBjcmF3bHMgaXRzIGNoaWxkcmVuKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtmdW5jXSAtIHRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggaW50ZXJhY3RpdmUgb2JqZWN0LiBUaGVcbiAgICAgKiAgaW50ZXJhY3Rpb25FdmVudCwgZGlzcGxheU9iamVjdCBhbmQgaGl0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2hpdFRlc3RdIC0gdGhpcyBpbmRpY2F0ZXMgaWYgdGhlIG9iamVjdHMgaW5zaWRlIHNob3VsZCBiZSBoaXQgdGVzdCBhZ2FpbnN0IHRoZSBwb2ludFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ludGVyYWN0aXZlXSAtIFdoZXRoZXIgdGhlIGRpc3BsYXlPYmplY3QgaXMgaW50ZXJhY3RpdmVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSByZXR1cm5zIHRydWUgaWYgdGhlIGRpc3BsYXlPYmplY3QgaGl0IHRoZSBwb2ludFxuICAgICAqL1xuICAgIHB1YmxpYyByZWN1cnNpdmVGaW5kSGl0KGludGVyYWN0aW9uRXZlbnQ6IEludGVyYWN0aW9uRXZlbnQsIGRpc3BsYXlPYmplY3Q6IERpc3BsYXlPYmplY3QsXG4gICAgICAgIGZ1bmM/OiBJbnRlcmFjdGlvbkNhbGxiYWNrLCBoaXRUZXN0PzogYm9vbGVhbiwgaW50ZXJhY3RpdmU/OiBib29sZWFuXG4gICAgKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgaWYgKCFkaXNwbGF5T2JqZWN0IHx8ICFkaXNwbGF5T2JqZWN0LnZpc2libGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBvaW50ID0gaW50ZXJhY3Rpb25FdmVudC5kYXRhLmdsb2JhbDtcblxuICAgICAgICAvLyBUb29rIGEgbGl0dGxlIHdoaWxlIHRvIHJld29yayB0aGlzIGZ1bmN0aW9uIGNvcnJlY3RseSEgQnV0IG5vdyBpdCBpcyBkb25lIGFuZCBuaWNlIGFuZCBvcHRpbWl6ZWQhIF5fXlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgbm93IGxvb3AgdGhyb3VnaCBhbGwgb2JqZWN0cyBhbmQgdGhlbiBvbmx5IGhpdCB0ZXN0IHRoZSBvYmplY3RzIGl0IEhBU1xuICAgICAgICAvLyB0bywgbm90IGFsbCBvZiB0aGVtLiBNVUNIIGZhc3Rlci4uXG4gICAgICAgIC8vIEFuIG9iamVjdCB3aWxsIGJlIGhpdCB0ZXN0IGlmIHRoZSBmb2xsb3dpbmcgaXMgdHJ1ZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gMTogSXQgaXMgaW50ZXJhY3RpdmUuXG4gICAgICAgIC8vIDI6IEl0IGJlbG9uZ3MgdG8gYSBwYXJlbnQgdGhhdCBpcyBpbnRlcmFjdGl2ZSBBTkQgb25lIG9mIHRoZSBwYXJlbnRzIGNoaWxkcmVuIGhhdmUgbm90IGFscmVhZHkgYmVlbiBoaXQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEFzIGFub3RoZXIgbGl0dGxlIG9wdGltaXphdGlvbiBvbmNlIGFuIGludGVyYWN0aXZlIG9iamVjdCBoYXMgYmVlbiBoaXQgd2UgY2FuIGNhcnJ5IG9uXG4gICAgICAgIC8vIHRocm91Z2ggdGhlIHNjZW5lZ3JhcGgsIGJ1dCB3ZSBrbm93IHRoYXQgdGhlcmUgd2lsbCBiZSBubyBtb3JlIGhpdHMhIFNvIHdlIGNhbiBhdm9pZCBleHRyYSBoaXQgdGVzdHNcbiAgICAgICAgLy8gQSBmaW5hbCBvcHRpbWl6YXRpb24gaXMgdGhhdCBhbiBvYmplY3QgaXMgbm90IGhpdCB0ZXN0IGRpcmVjdGx5IGlmIGEgY2hpbGQgaGFzIGFscmVhZHkgYmVlbiBoaXQuXG5cbiAgICAgICAgaW50ZXJhY3RpdmUgPSBkaXNwbGF5T2JqZWN0LmludGVyYWN0aXZlIHx8IGludGVyYWN0aXZlO1xuXG4gICAgICAgIGxldCBoaXQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGludGVyYWN0aXZlUGFyZW50ID0gaW50ZXJhY3RpdmU7XG5cbiAgICAgICAgLy8gRmxhZyBoZXJlIGNhbiBzZXQgdG8gZmFsc2UgaWYgdGhlIGV2ZW50IGlzIG91dHNpZGUgdGhlIHBhcmVudHMgaGl0QXJlYSBvciBtYXNrXG4gICAgICAgIGxldCBoaXRUZXN0Q2hpbGRyZW4gPSB0cnVlO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgaGl0QXJlYSwgbm8gbmVlZCB0byB0ZXN0IGFnYWluc3QgYW55dGhpbmcgZWxzZSBpZiB0aGUgcG9pbnRlciBpcyBub3Qgd2l0aGluIHRoZSBoaXRBcmVhXG4gICAgICAgIC8vIFRoZXJlIGlzIGFsc28gbm8gbG9uZ2VyIGEgbmVlZCB0byBoaXRUZXN0IGNoaWxkcmVuLlxuICAgICAgICBpZiAoZGlzcGxheU9iamVjdC5oaXRBcmVhKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoaGl0VGVzdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtLmFwcGx5SW52ZXJzZShwb2ludCwgdGhpcy5fdGVtcFBvaW50KTtcbiAgICAgICAgICAgICAgICBpZiAoIWRpc3BsYXlPYmplY3QuaGl0QXJlYS5jb250YWlucyh0aGlzLl90ZW1wUG9pbnQueCwgdGhpcy5fdGVtcFBvaW50LnkpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaGl0VGVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBoaXRUZXN0Q2hpbGRyZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnRlcmFjdGl2ZVBhcmVudCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgbWFzaywgbm8gbmVlZCB0byBoaXRUZXN0IGFnYWluc3QgYW55dGhpbmcgZWxzZSBpZiB0aGUgcG9pbnRlciBpcyBub3Qgd2l0aGluIHRoZSBtYXNrLlxuICAgICAgICAvLyBXZSBzdGlsbCB3YW50IHRvIGhpdFRlc3RDaGlsZHJlbiwgaG93ZXZlciwgdG8gZW5zdXJlIGEgbW91c2VvdXQgY2FuIHN0aWxsIGJlIGdlbmVyYXRlZC5cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BpeGlqcy9waXhpLmpzL2lzc3Vlcy81MTM1XG4gICAgICAgIGVsc2UgaWYgKGRpc3BsYXlPYmplY3QuX21hc2spXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChoaXRUZXN0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmICghKChkaXNwbGF5T2JqZWN0Ll9tYXNrIGFzIGFueSkuY29udGFpbnNQb2ludCAmJiAoZGlzcGxheU9iamVjdC5fbWFzayBhcyBhbnkpLmNvbnRhaW5zUG9pbnQocG9pbnQpKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGhpdFRlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAqKiBGUkVFIFRJUCAqKiEgSWYgYW4gb2JqZWN0IGlzIG5vdCBpbnRlcmFjdGl2ZSBvciBoYXMgbm8gYnV0dG9ucyBpbiBpdFxuICAgICAgICAvLyAoc3VjaCBhcyBhIGdhbWUgc2NlbmUhKSBzZXQgaW50ZXJhY3RpdmVDaGlsZHJlbiB0byBmYWxzZSBmb3IgdGhhdCBkaXNwbGF5T2JqZWN0LlxuICAgICAgICAvLyBUaGlzIHdpbGwgYWxsb3cgUGl4aUpTIHRvIGNvbXBsZXRlbHkgaWdub3JlIGFuZCBieXBhc3MgY2hlY2tpbmcgdGhlIGRpc3BsYXlPYmplY3RzIGNoaWxkcmVuLlxuICAgICAgICBpZiAoaGl0VGVzdENoaWxkcmVuICYmIGRpc3BsYXlPYmplY3QuaW50ZXJhY3RpdmVDaGlsZHJlbiAmJiAoZGlzcGxheU9iamVjdCBhcyBDb250YWluZXIpLmNoaWxkcmVuKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IChkaXNwbGF5T2JqZWN0IGFzIENvbnRhaW5lcikuY2hpbGRyZW47XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBjaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXG4gICAgICAgICAgICAgICAgLy8gdGltZSB0byBnZXQgcmVjdXJzaXZlLi4gaWYgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiBpZiBzb21ldGhpbmcgaXMgaGl0Li5cbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEhpdCA9IHRoaXMucmVjdXJzaXZlRmluZEhpdChpbnRlcmFjdGlvbkV2ZW50LCBjaGlsZCwgZnVuYywgaGl0VGVzdCwgaW50ZXJhY3RpdmVQYXJlbnQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkSGl0KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaXRzIGEgZ29vZCBpZGVhIHRvIGNoZWNrIGlmIGEgY2hpbGQgaGFzIGxvc3QgaXRzIHBhcmVudC5cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBtZWFucyBpdCBoYXMgYmVlbiByZW1vdmVkIHdoaWxzdCBsb29waW5nIHNvIGl0cyBiZXN0XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hpbGQucGFyZW50KVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIG5vIGxvbmdlciBuZWVkIHRvIGhpdCB0ZXN0IGFueSBtb3JlIG9iamVjdHMgaW4gdGhpcyBjb250YWluZXIgYXMgd2Ugd2VcbiAgICAgICAgICAgICAgICAgICAgLy8gbm93IGtub3cgdGhlIHBhcmVudCBoYXMgYmVlbiBoaXRcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3RpdmVQYXJlbnQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2hpbGQgaXMgaW50ZXJhY3RpdmUgLCB0aGF0IG1lYW5zIHRoYXQgdGhlIG9iamVjdCBoaXQgd2FzIGFjdHVhbGx5XG4gICAgICAgICAgICAgICAgICAgIC8vIGludGVyYWN0aXZlIGFuZCBub3QganVzdCB0aGUgY2hpbGQgb2YgYW4gaW50ZXJhY3RpdmUgb2JqZWN0LlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIG1lYW5zIHdlIG5vIGxvbmdlciBuZWVkIHRvIGhpdCB0ZXN0IGFueXRoaW5nIGVsc2UuIFdlIHN0aWxsIG5lZWQgdG8gcnVuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRocm91Z2ggYWxsIG9iamVjdHMsIGJ1dCB3ZSBkb24ndCBuZWVkIHRvIHBlcmZvcm0gYW55IGhpdCB0ZXN0cy5cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRIaXQpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcmFjdGlvbkV2ZW50LnRhcmdldClcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXRUZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm8gcG9pbnQgcnVubmluZyB0aGlzIGlmIHRoZSBpdGVtIGlzIG5vdCBpbnRlcmFjdGl2ZSBvciBkb2VzIG5vdCBoYXZlIGFuIGludGVyYWN0aXZlIHBhcmVudC5cbiAgICAgICAgaWYgKGludGVyYWN0aXZlKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBpZiB3ZSBhcmUgaGl0IHRlc3RpbmcgKGFzIGluIHdlIGhhdmUgbm8gaGl0IGFueSBvYmplY3RzIHlldClcbiAgICAgICAgICAgIC8vIFdlIGFsc28gZG9uJ3QgbmVlZCB0byB3b3JyeSBhYm91dCBoaXQgdGVzdGluZyBpZiBvbmNlIG9mIHRoZSBkaXNwbGF5T2JqZWN0cyBjaGlsZHJlblxuICAgICAgICAgICAgLy8gaGFzIGFscmVhZHkgYmVlbiBoaXQgLSBidXQgb25seSBpZiBpdCB3YXMgaW50ZXJhY3RpdmUsIG90aGVyd2lzZSB3ZSBuZWVkIHRvIGtlZXBcbiAgICAgICAgICAgIC8vIGxvb2tpbmcgZm9yIGFuIGludGVyYWN0aXZlIGNoaWxkLCBqdXN0IGluIGNhc2Ugd2UgaGl0IG9uZVxuICAgICAgICAgICAgaWYgKGhpdFRlc3QgJiYgIWludGVyYWN0aW9uRXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgdGVzdGVkIGFnYWluc3QgaGl0QXJlYSBpZiBpdCBpcyBkZWZpbmVkXG4gICAgICAgICAgICAgICAgaWYgKCFkaXNwbGF5T2JqZWN0LmhpdEFyZWEgJiYgKGRpc3BsYXlPYmplY3QgYXMgYW55KS5jb250YWluc1BvaW50KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChkaXNwbGF5T2JqZWN0IGFzIGFueSkuY29udGFpbnNQb2ludChwb2ludCkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkaXNwbGF5T2JqZWN0LmludGVyYWN0aXZlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChoaXQgJiYgIWludGVyYWN0aW9uRXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3Rpb25FdmVudC50YXJnZXQgPSBkaXNwbGF5T2JqZWN0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmdW5jKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuYyhpbnRlcmFjdGlvbkV2ZW50LCBkaXNwbGF5T2JqZWN0LCAhIWhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhpdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHByb3ZpZGVzIGEgbmVhdCB3YXkgb2YgY3Jhd2xpbmcgdGhyb3VnaCB0aGUgc2NlbmUgZ3JhcGggYW5kIHJ1bm5pbmcgYVxuICAgICAqIHNwZWNpZmllZCBmdW5jdGlvbiBvbiBhbGwgaW50ZXJhY3RpdmUgb2JqZWN0cyBpdCBmaW5kcy4gSXQgd2lsbCBhbHNvIHRha2UgY2FyZSBvZiBoaXRcbiAgICAgKiB0ZXN0aW5nIHRoZSBpbnRlcmFjdGl2ZSBvYmplY3RzIGFuZCBwYXNzZXMgdGhlIGhpdCBhY3Jvc3MgaW4gdGhlIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gaW50ZXJhY3Rpb25FdmVudCAtIGV2ZW50IGNvbnRhaW5pbmcgdGhlIHBvaW50IHRoYXRcbiAgICAgKiAgaXMgdGVzdGVkIGZvciBjb2xsaXNpb25cbiAgICAgKiBAcGFyYW0ge1BJWEkuQ29udGFpbmVyfFBJWEkuU3ByaXRlfFBJWEkuVGlsaW5nU3ByaXRlfSBkaXNwbGF5T2JqZWN0IC0gdGhlIGRpc3BsYXlPYmplY3RcbiAgICAgKiAgdGhhdCB3aWxsIGJlIGhpdCB0ZXN0IChyZWN1cnNpdmVseSBjcmF3bHMgaXRzIGNoaWxkcmVuKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtmdW5jXSAtIHRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggaW50ZXJhY3RpdmUgb2JqZWN0LiBUaGVcbiAgICAgKiAgaW50ZXJhY3Rpb25FdmVudCwgZGlzcGxheU9iamVjdCBhbmQgaGl0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2hpdFRlc3RdIC0gdGhpcyBpbmRpY2F0ZXMgaWYgdGhlIG9iamVjdHMgaW5zaWRlIHNob3VsZCBiZSBoaXQgdGVzdCBhZ2FpbnN0IHRoZSBwb2ludFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHJldHVybnMgdHJ1ZSBpZiB0aGUgZGlzcGxheU9iamVjdCBoaXQgdGhlIHBvaW50XG4gICAgICovXG4gICAgcHVibGljIGZpbmRIaXQoaW50ZXJhY3Rpb25FdmVudDogSW50ZXJhY3Rpb25FdmVudCwgZGlzcGxheU9iamVjdDogRGlzcGxheU9iamVjdCxcbiAgICAgICAgZnVuYz86IEludGVyYWN0aW9uQ2FsbGJhY2ssIGhpdFRlc3Q/OiBib29sZWFuXG4gICAgKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5yZWN1cnNpdmVGaW5kSGl0KGludGVyYWN0aW9uRXZlbnQsIGRpc3BsYXlPYmplY3QsIGZ1bmMsIGhpdFRlc3QsIGZhbHNlKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBJbnRlcmFjdGlvblRyYWNraW5nRGF0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb25UcmFja2luZ0RhdGEnO1xuXG5leHBvcnQgdHlwZSBDdXJzb3IgPSAnYXV0bydcbiAgICB8ICdkZWZhdWx0J1xuICAgIHwgJ25vbmUnXG4gICAgfCAnY29udGV4dC1tZW51J1xuICAgIHwgJ2hlbHAnXG4gICAgfCAncG9pbnRlcidcbiAgICB8ICdwcm9ncmVzcydcbiAgICB8ICd3YWl0J1xuICAgIHwgJ2NlbGwnXG4gICAgfCAnY3Jvc3NoYWlyJ1xuICAgIHwgJ3RleHQnXG4gICAgfCAndmVydGljYWwtdGV4dCdcbiAgICB8ICdhbGlhcydcbiAgICB8ICdjb3B5J1xuICAgIHwgJ21vdmUnXG4gICAgfCAnbm8tZHJvcCdcbiAgICB8ICdub3QtYWxsb3dlZCdcbiAgICB8ICdlLXJlc2l6ZSdcbiAgICB8ICduLXJlc2l6ZSdcbiAgICB8ICduZS1yZXNpemUnXG4gICAgfCAnbnctcmVzaXplJ1xuICAgIHwgJ3MtcmVzaXplJ1xuICAgIHwgJ3NlLXJlc2l6ZSdcbiAgICB8ICdzdy1yZXNpemUnXG4gICAgfCAndy1yZXNpemUnXG4gICAgfCAnbnMtcmVzaXplJ1xuICAgIHwgJ2V3LXJlc2l6ZSdcbiAgICB8ICduZXN3LXJlc2l6ZSdcbiAgICB8ICdjb2wtcmVzaXplJ1xuICAgIHwgJ253c2UtcmVzaXplJ1xuICAgIHwgJ3Jvdy1yZXNpemUnXG4gICAgfCAnYWxsLXNjcm9sbCdcbiAgICB8ICd6b29tLWluJ1xuICAgIHwgJ3pvb20tb3V0J1xuICAgIHwgJ2dyYWInXG4gICAgfCAnZ3JhYmJpbmcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElIaXRBcmVhIHtcbiAgICBjb250YWlucyh4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJhY3RpdmVUYXJnZXQge1xuICAgIGludGVyYWN0aXZlOiBib29sZWFuO1xuICAgIGludGVyYWN0aXZlQ2hpbGRyZW46IGJvb2xlYW47XG4gICAgaGl0QXJlYTogSUhpdEFyZWE7XG4gICAgY3Vyc29yOiBDdXJzb3IgfCBzdHJpbmc7XG4gICAgYnV0dG9uTW9kZTogYm9vbGVhbjtcbiAgICB0cmFja2VkUG9pbnRlcnM6IHtbeDogbnVtYmVyXTogSW50ZXJhY3Rpb25UcmFja2luZ0RhdGF9O1xuICAgIF90cmFja2VkUG9pbnRlcnM6IHtbeDogbnVtYmVyXTogSW50ZXJhY3Rpb25UcmFja2luZ0RhdGF9O1xufVxuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgY2xhc3NlcyB0aGF0IHJlcHJlc2VudCBhIGhpdCBhcmVhLlxuICpcbiAqIEl0IGlzIGltcGxlbWVudGVkIGJ5IHRoZSBmb2xsb3dpbmcgY2xhc3NlczpcbiAqIC0ge0BsaW5rIFBJWEkuQ2lyY2xlfVxuICogLSB7QGxpbmsgUElYSS5FbGxpcHNlfVxuICogLSB7QGxpbmsgUElYSS5Qb2x5Z29ufVxuICogLSB7QGxpbmsgUElYSS5Sb3VuZGVkUmVjdGFuZ2xlfVxuICpcbiAqIEBpbnRlcmZhY2UgSUhpdEFyZWFcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgeCBhbmQgeSBjb29yZGluYXRlcyBnaXZlbiBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGlzIGFyZWFcbiAqXG4gKiBAbWV0aG9kXG4gKiBAbmFtZSBjb250YWluc1xuICogQG1lbWJlcm9mIFBJWEkuSUhpdEFyZWEjXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50IHRvIHRlc3RcbiAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgeC95IGNvb3JkaW5hdGVzIGFyZSB3aXRoaW4gdGhpcyBhcmVhXG4gKi9cblxuLyoqXG4gKiBEZWZhdWx0IHByb3BlcnR5IHZhbHVlcyBvZiBpbnRlcmFjdGl2ZSBvYmplY3RzXG4gKiBVc2VkIGJ5IHtAbGluayBQSVhJLkludGVyYWN0aW9uTWFuYWdlcn0gdG8gYXV0b21hdGljYWxseSBnaXZlIGFsbCBEaXNwbGF5T2JqZWN0cyB0aGVzZSBwcm9wZXJ0aWVzXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGludGVyYWN0aXZlVGFyZ2V0XG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBleGFtcGxlXG4gKiAgICAgIGZ1bmN0aW9uIE15T2JqZWN0KCkge31cbiAqXG4gKiAgICAgIE9iamVjdC5hc3NpZ24oXG4gKiAgICAgICAgICBEaXNwbGF5T2JqZWN0LnByb3RvdHlwZSxcbiAqICAgICAgICAgIFBJWEkuaW50ZXJhY3RpdmVUYXJnZXRcbiAqICAgICAgKTtcbiAqL1xuZXhwb3J0IGNvbnN0IGludGVyYWN0aXZlVGFyZ2V0OiBJbnRlcmFjdGl2ZVRhcmdldCA9IHtcblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBpbnRlcmFjdGlvbiBldmVudHMgZm9yIHRoZSBEaXNwbGF5T2JqZWN0LiBUb3VjaCwgcG9pbnRlciBhbmQgbW91c2VcbiAgICAgKiBldmVudHMgd2lsbCBub3QgYmUgZW1pdHRlZCB1bmxlc3MgYGludGVyYWN0aXZlYCBpcyBzZXQgdG8gYHRydWVgLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBzcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XG4gICAgICogc3ByaXRlLmludGVyYWN0aXZlID0gdHJ1ZTtcbiAgICAgKiBzcHJpdGUub24oJ3RhcCcsIChldmVudCkgPT4ge1xuICAgICAqICAgIC8vaGFuZGxlIGV2ZW50XG4gICAgICogfSk7XG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICAgICAqL1xuICAgIGludGVyYWN0aXZlOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhlIGNoaWxkcmVuIHRvIHRoZSBkaXNwbGF5T2JqZWN0IGNhbiBiZSBjbGlja2VkL3RvdWNoZWRcbiAgICAgKiBTZXR0aW5nIHRoaXMgdG8gZmFsc2UgYWxsb3dzIFBpeGlKUyB0byBieXBhc3MgYSByZWN1cnNpdmUgYGhpdFRlc3RgIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJvZiBQSVhJLkNvbnRhaW5lciNcbiAgICAgKi9cbiAgICBpbnRlcmFjdGl2ZUNoaWxkcmVuOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogSW50ZXJhY3Rpb24gc2hhcGUuIENoaWxkcmVuIHdpbGwgYmUgaGl0IGZpcnN0LCB0aGVuIHRoaXMgc2hhcGUgd2lsbCBiZSBjaGVja2VkLlxuICAgICAqIFNldHRpbmcgdGhpcyB3aWxsIGNhdXNlIHRoaXMgc2hhcGUgdG8gYmUgY2hlY2tlZCBpbiBoaXQgdGVzdHMgcmF0aGVyIHRoYW4gdGhlIGRpc3BsYXlPYmplY3QncyBib3VuZHMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IHNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcbiAgICAgKiBzcHJpdGUuaW50ZXJhY3RpdmUgPSB0cnVlO1xuICAgICAqIHNwcml0ZS5oaXRBcmVhID0gbmV3IFBJWEkuUmVjdGFuZ2xlKDAsIDAsIDEwMCwgMTAwKTtcbiAgICAgKiBAbWVtYmVyIHtQSVhJLklIaXRBcmVhfVxuICAgICAqIEBtZW1iZXJvZiBQSVhJLkRpc3BsYXlPYmplY3QjXG4gICAgICovXG4gICAgaGl0QXJlYTogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIElmIGVuYWJsZWQsIHRoZSBtb3VzZSBjdXJzb3IgdXNlIHRoZSBwb2ludGVyIGJlaGF2aW9yIHdoZW4gaG92ZXJlZCBvdmVyIHRoZSBkaXNwbGF5T2JqZWN0IGlmIGl0IGlzIGludGVyYWN0aXZlXG4gICAgICogU2V0dGluZyB0aGlzIGNoYW5nZXMgdGhlICdjdXJzb3InIHByb3BlcnR5IHRvIGAncG9pbnRlcidgLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBzcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XG4gICAgICogc3ByaXRlLmludGVyYWN0aXZlID0gdHJ1ZTtcbiAgICAgKiBzcHJpdGUuYnV0dG9uTW9kZSA9IHRydWU7XG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICAgICAqL1xuICAgIGdldCBidXR0b25Nb2RlKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnNvciA9PT0gJ3BvaW50ZXInO1xuICAgIH0sXG4gICAgc2V0IGJ1dHRvbk1vZGUodmFsdWU6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY3Vyc29yID09PSAncG9pbnRlcicpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGRlZmluZXMgd2hhdCBjdXJzb3IgbW9kZSBpcyB1c2VkIHdoZW4gdGhlIG1vdXNlIGN1cnNvclxuICAgICAqIGlzIGhvdmVyZWQgb3ZlciB0aGUgZGlzcGxheU9iamVjdC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY29uc3Qgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xuICAgICAqIHNwcml0ZS5pbnRlcmFjdGl2ZSA9IHRydWU7XG4gICAgICogc3ByaXRlLmN1cnNvciA9ICd3YWl0JztcbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0NTUy9jdXJzb3JcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICAgICAqL1xuICAgIGN1cnNvcjogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIHNldCBvZiBhbGwgYWN0aXZlIHBvaW50ZXJzLCBieSBpZGVudGlmaWVyXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtNYXA8bnVtYmVyLCBJbnRlcmFjdGlvblRyYWNraW5nRGF0YT59XG4gICAgICogQG1lbWJlcm9mIFBJWEkuRGlzcGxheU9iamVjdCNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGdldCB0cmFja2VkUG9pbnRlcnMoKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYWNrZWRQb2ludGVycyA9PT0gdW5kZWZpbmVkKSB0aGlzLl90cmFja2VkUG9pbnRlcnMgPSB7fTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fdHJhY2tlZFBvaW50ZXJzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNYXAgb2YgYWxsIHRyYWNrZWQgcG9pbnRlcnMsIGJ5IGlkZW50aWZpZXIuIFVzZSB0cmFja2VkUG9pbnRlcnMgdG8gYWNjZXNzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7TWFwPG51bWJlciwgSW50ZXJhY3Rpb25UcmFja2luZ0RhdGE+fVxuICAgICAqL1xuICAgIF90cmFja2VkUG9pbnRlcnM6IHVuZGVmaW5lZCxcbn07XG4iLCAiaW1wb3J0IHsgVGlja2VyLCBVUERBVEVfUFJJT1JJVFkgfSBmcm9tICdAcGl4aS90aWNrZXInO1xuaW1wb3J0IHsgRGlzcGxheU9iamVjdCwgVGVtcG9yYXJ5RGlzcGxheU9iamVjdCB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuaW1wb3J0IHsgSW50ZXJhY3Rpb25EYXRhLCBJbnRlcmFjdGl2ZVBvaW50ZXJFdmVudCB9IGZyb20gJy4vSW50ZXJhY3Rpb25EYXRhJztcbmltcG9ydCB7IEludGVyYWN0aW9uRXZlbnQsIEludGVyYWN0aW9uQ2FsbGJhY2sgfSBmcm9tICcuL0ludGVyYWN0aW9uRXZlbnQnO1xuaW1wb3J0IHsgSW50ZXJhY3Rpb25UcmFja2luZ0RhdGEgfSBmcm9tICcuL0ludGVyYWN0aW9uVHJhY2tpbmdEYXRhJztcbmltcG9ydCB7IFRyZWVTZWFyY2ggfSBmcm9tICcuL1RyZWVTZWFyY2gnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHsgaW50ZXJhY3RpdmVUYXJnZXQgfSBmcm9tICcuL2ludGVyYWN0aXZlVGFyZ2V0JztcblxuaW1wb3J0IHR5cGUgeyBBYnN0cmFjdFJlbmRlcmVyIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgdHlwZSB7IFBvaW50LCBJUG9pbnREYXRhIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgdHlwZSB7IERpY3QgfSBmcm9tICdAcGl4aS91dGlscyc7XG5cbi8vIE1peCBpbnRlcmFjdGl2ZVRhcmdldCBpbnRvIERpc3BsYXlPYmplY3QucHJvdG90eXBlLFxuLy8gYWZ0ZXIgZGVwcmVjYXRpb24gaGFzIGJlZW4gaGFuZGxlZFxuRGlzcGxheU9iamVjdC5taXhpbihpbnRlcmFjdGl2ZVRhcmdldCk7XG5cbmNvbnN0IE1PVVNFX1BPSU5URVJfSUQgPSAxO1xuXG4vLyBNb2NrIGludGVyZmFjZSBmb3IgaGl0VGVzdEV2ZW50IC0gb25seSB1c2VkIGluc2lkZSBoaXRUZXN0KClcbmludGVyZmFjZSBUZXN0SW50ZXJhY3Rpb25FdmVudFxue1xuICAgIHRhcmdldDogRGlzcGxheU9iamVjdDtcbiAgICBkYXRhOiB7Z2xvYmFsOiBQb2ludH07XG59XG5cbi8vIGhlbHBlcnMgZm9yIGhpdFRlc3QoKSAtIG9ubHkgdXNlZCBpbnNpZGUgaGl0VGVzdCgpXG5jb25zdCBoaXRUZXN0RXZlbnQ6IFRlc3RJbnRlcmFjdGlvbkV2ZW50ID0ge1xuICAgIHRhcmdldDogbnVsbCxcbiAgICBkYXRhOiB7XG4gICAgICAgIGdsb2JhbDogbnVsbCxcbiAgICB9LFxufTtcblxuZXhwb3J0IGludGVyZmFjZSBJbnRlcmFjdGlvbk1hbmFnZXJPcHRpb25zIHtcbiAgICBhdXRvUHJldmVudERlZmF1bHQ/OiBib29sZWFuO1xuICAgIGludGVyYWN0aW9uRnJlcXVlbmN5PzogbnVtYmVyO1xuICAgIHVzZVN5c3RlbVRpY2tlcj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVsYXllZEV2ZW50IHtcbiAgICBkaXNwbGF5T2JqZWN0OiBEaXNwbGF5T2JqZWN0O1xuICAgIGV2ZW50U3RyaW5nOiBzdHJpbmc7XG4gICAgZXZlbnREYXRhOiBJbnRlcmFjdGlvbkV2ZW50O1xufVxuXG5pbnRlcmZhY2UgQ3Jvc3NDU1NTdHlsZURlY2xhcmF0aW9uIGV4dGVuZHMgQ1NTU3R5bGVEZWNsYXJhdGlvblxue1xuICAgIG1zQ29udGVudFpvb21pbmc6IHN0cmluZztcbiAgICBtc1RvdWNoQWN0aW9uOiBzdHJpbmc7XG59XG5cbi8qKlxuICogVGhlIGludGVyYWN0aW9uIG1hbmFnZXIgZGVhbHMgd2l0aCBtb3VzZSwgdG91Y2ggYW5kIHBvaW50ZXIgZXZlbnRzLlxuICpcbiAqIEFueSBEaXNwbGF5T2JqZWN0IGNhbiBiZSBpbnRlcmFjdGl2ZSBpZiBpdHMgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBpcyBzZXQgdG8gdHJ1ZS5cbiAqXG4gKiBUaGlzIG1hbmFnZXIgYWxzbyBzdXBwb3J0cyBtdWx0aXRvdWNoLlxuICpcbiAqIEFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBjcmVhdGVkIGJ5IGRlZmF1bHQsIGFuZCBjYW4gYmUgZm91bmQgYXQgYHJlbmRlcmVyLnBsdWdpbnMuaW50ZXJhY3Rpb25gXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLnV0aWxzLkV2ZW50RW1pdHRlclxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVyYWN0aW9uTWFuYWdlciBleHRlbmRzIEV2ZW50RW1pdHRlclxue1xuICAgIHB1YmxpYyByZWFkb25seSBhY3RpdmVJbnRlcmFjdGlvbkRhdGE6IHsgW2tleTogbnVtYmVyXTogSW50ZXJhY3Rpb25EYXRhIH07XG4gICAgcHVibGljIHJlYWRvbmx5IHN1cHBvcnRzVG91Y2hFdmVudHM6IGJvb2xlYW47XG4gICAgcHVibGljIHJlYWRvbmx5IHN1cHBvcnRzUG9pbnRlckV2ZW50czogYm9vbGVhbjtcbiAgICBwdWJsaWMgaW50ZXJhY3Rpb25EYXRhUG9vbDogSW50ZXJhY3Rpb25EYXRhW107XG4gICAgcHVibGljIGN1cnNvcjogc3RyaW5nO1xuICAgIHB1YmxpYyBkZWxheWVkRXZlbnRzOiBEZWxheWVkRXZlbnRbXTtcbiAgICBwdWJsaWMgc2VhcmNoOiBUcmVlU2VhcmNoO1xuICAgIHB1YmxpYyByZW5kZXJlcjogQWJzdHJhY3RSZW5kZXJlcjtcbiAgICBwdWJsaWMgYXV0b1ByZXZlbnREZWZhdWx0OiBib29sZWFuO1xuICAgIHB1YmxpYyBpbnRlcmFjdGlvbkZyZXF1ZW5jeTogbnVtYmVyO1xuICAgIHB1YmxpYyBtb3VzZTogSW50ZXJhY3Rpb25EYXRhO1xuICAgIHB1YmxpYyBldmVudERhdGE6IEludGVyYWN0aW9uRXZlbnQ7XG4gICAgcHVibGljIG1vdmVXaGVuSW5zaWRlOiBib29sZWFuO1xuICAgIHB1YmxpYyBjdXJzb3JTdHlsZXM6IERpY3Q8c3RyaW5nIHwgKChtb2RlOiBzdHJpbmcpID0+IHZvaWQpIHwgQ1NTU3R5bGVEZWNsYXJhdGlvbj47XG4gICAgcHVibGljIGN1cnJlbnRDdXJzb3JNb2RlOiBzdHJpbmc7XG4gICAgcHVibGljIHJlc29sdXRpb246IG51bWJlcjtcblxuICAgIHByb3RlY3RlZCBpbnRlcmFjdGlvbkRPTUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHByb3RlY3RlZCBldmVudHNBZGRlZDogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgdGlja2VyQWRkZWQ6IGJvb2xlYW47XG4gICAgcHJvdGVjdGVkIG1vdXNlT3ZlclJlbmRlcmVyOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfdXNlU3lzdGVtVGlja2VyOiBib29sZWFuO1xuICAgIHByaXZhdGUgX2RlbHRhVGltZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX2RpZE1vdmU6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfdGVtcERpc3BsYXlPYmplY3Q6IERpc3BsYXlPYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuQ2FudmFzUmVuZGVyZXJ8UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBBIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCByZW5kZXJlclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBUaGUgb3B0aW9ucyBmb3IgdGhlIG1hbmFnZXIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hdXRvUHJldmVudERlZmF1bHQ9dHJ1ZV0gLSBTaG91bGQgdGhlIG1hbmFnZXIgYXV0b21hdGljYWxseSBwcmV2ZW50IGRlZmF1bHQgYnJvd3NlciBhY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5pbnRlcmFjdGlvbkZyZXF1ZW5jeT0xMF0gLSBNYXhpbXVtIHJlcXVlbmN5IChtcykgYXQgcG9pbnRlciBvdmVyL291dCBzdGF0ZXMgd2lsbCBiZSBjaGVja2VkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy51c2VTeXN0ZW1UaWNrZXI9dHJ1ZV0gLSBXaGV0aGVyIHRvIGFkZCB7QGxpbmsgdGlja2VyVXBkYXRlfSB0byB7QGxpbmsgUElYSS5UaWNrZXIuc3lzdGVtfS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogQWJzdHJhY3RSZW5kZXJlciwgb3B0aW9uczogSW50ZXJhY3Rpb25NYW5hZ2VyT3B0aW9ucylcbiAgICB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZW5kZXJlciB0aGlzIGludGVyYWN0aW9uIG1hbmFnZXIgd29ya3MgZm9yLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkFic3RyYWN0UmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3VsZCBkZWZhdWx0IGJyb3dzZXIgYWN0aW9ucyBhdXRvbWF0aWNhbGx5IGJlIHByZXZlbnRlZC5cbiAgICAgICAgICogRG9lcyBub3QgYXBwbHkgdG8gcG9pbnRlciBldmVudHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgICAqIHByZXZlbnREZWZhdWx0IG9uIHBvaW50ZXIgZXZlbnRzIHN0b3BzIG1vdXNlIGV2ZW50cyBmcm9tIGZpcmluZ1xuICAgICAgICAgKiBUaHVzLCBmb3IgZXZlcnkgcG9pbnRlciBldmVudCwgdGhlcmUgd2lsbCBhbHdheXMgYmUgZWl0aGVyIGEgbW91c2Ugb2YgdG91Y2ggZXZlbnQgYWxvbmdzaWRlIGl0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmF1dG9QcmV2ZW50RGVmYXVsdCA9IG9wdGlvbnMuYXV0b1ByZXZlbnREZWZhdWx0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF1dG9QcmV2ZW50RGVmYXVsdCA6IHRydWU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1heGltdW0gcmVxdWVuY3kgaW4gbWlsbGlzZWNvbmRzIGF0IHdoaWNoIHBvaW50ZXIgb3Zlci9vdXQgc3RhdGVzIHdpbGwgYmUgY2hlY2tlZCBieSB7QGxpbmsgdGlja2VyVXBkYXRlfS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAxMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkZyZXF1ZW5jeSA9IG9wdGlvbnMuaW50ZXJhY3Rpb25GcmVxdWVuY3kgfHwgMTA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtb3VzZSBkYXRhXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuSW50ZXJhY3Rpb25EYXRhfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tb3VzZSA9IG5ldyBJbnRlcmFjdGlvbkRhdGEoKTtcbiAgICAgICAgdGhpcy5tb3VzZS5pZGVudGlmaWVyID0gTU9VU0VfUE9JTlRFUl9JRDtcblxuICAgICAgICAvLyBzZXR0aW5nIHRoZSBtb3VzZSB0byBzdGFydCBvZmYgZmFyIG9mZiBzY3JlZW4gd2lsbCBtZWFuIHRoYXQgbW91c2Ugb3ZlciBkb2VzXG4gICAgICAgIC8vICBub3QgZ2V0IGNhbGxlZCBiZWZvcmUgd2UgZXZlbiBtb3ZlIHRoZSBtb3VzZS5cbiAgICAgICAgdGhpcy5tb3VzZS5nbG9iYWwuc2V0KC05OTk5OTkpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBY3RpdmVseSB0cmFja2VkIEludGVyYWN0aW9uRGF0YVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3QuPG51bWJlcixQSVhJLkludGVyYWN0aW9uRGF0YT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFjdGl2ZUludGVyYWN0aW9uRGF0YSA9IHt9O1xuICAgICAgICB0aGlzLmFjdGl2ZUludGVyYWN0aW9uRGF0YVtNT1VTRV9QT0lOVEVSX0lEXSA9IHRoaXMubW91c2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvb2wgb2YgdW51c2VkIEludGVyYWN0aW9uRGF0YVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkludGVyYWN0aW9uRGF0YVtdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRhdGFQb29sID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGV2ZW50IGRhdGEgb2JqZWN0IHRvIGhhbmRsZSBhbGwgdGhlIGV2ZW50IHRyYWNraW5nL2Rpc3BhdGNoaW5nXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXZlbnREYXRhID0gbmV3IEludGVyYWN0aW9uRXZlbnQoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIERPTSBlbGVtZW50IHRvIGJpbmQgdG8uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQG1lbWJlciB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgcHJvcGVydHkgZGV0ZXJtaW5lcyBpZiBtb3VzZW1vdmUgYW5kIHRvdWNobW92ZSBldmVudHMgYXJlIGZpcmVkIG9ubHkgd2hlbiB0aGUgY3Vyc29yXG4gICAgICAgICAqIGlzIG92ZXIgdGhlIG9iamVjdC5cbiAgICAgICAgICogU2V0dGluZyB0byB0cnVlIHdpbGwgbWFrZSB0aGluZ3Mgd29yayBtb3JlIGluIGxpbmUgd2l0aCBob3cgdGhlIERPTSB2ZXJzaW9uIHdvcmtzLlxuICAgICAgICAgKiBTZXR0aW5nIHRvIGZhbHNlIGNhbiBtYWtlIHRoaW5ncyBlYXNpZXIgZm9yIHRoaW5ncyBsaWtlIGRyYWdnaW5nXG4gICAgICAgICAqIEl0IGlzIGN1cnJlbnRseSBzZXQgdG8gZmFsc2UgYXMgdGhpcyBpcyBob3cgUGl4aUpTIHVzZWQgdG8gd29yay4gVGhpcyB3aWxsIGJlIHNldCB0byB0cnVlIGluXG4gICAgICAgICAqIGZ1dHVyZSB2ZXJzaW9ucyBvZiBwaXhpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tb3ZlV2hlbkluc2lkZSA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYXZlIGV2ZW50cyBiZWVuIGF0dGFjaGVkIHRvIHRoZSBkb20gZWxlbWVudD9cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ldmVudHNBZGRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYXMgdGhlIHN5c3RlbSB0aWNrZXIgYmVlbiBhZGRlZD9cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWNrZXJBZGRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJcyB0aGUgbW91c2UgaG92ZXJpbmcgb3ZlciB0aGUgcmVuZGVyZXI/XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubW91c2VPdmVyUmVuZGVyZXIgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRG9lcyB0aGUgZGV2aWNlIHN1cHBvcnQgdG91Y2ggZXZlbnRzXG4gICAgICAgICAqIGh0dHBzOi8vd3d3LnczLm9yZy9UUi90b3VjaC1ldmVudHMvXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzID0gJ29udG91Y2hzdGFydCcgaW4gd2luZG93O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEb2VzIHRoZSBkZXZpY2Ugc3VwcG9ydCBwb2ludGVyIGV2ZW50c1xuICAgICAgICAgKiBodHRwczovL3d3dy53My5vcmcvU3VibWlzc2lvbi9wb2ludGVyLWV2ZW50cy9cbiAgICAgICAgICpcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN1cHBvcnRzUG9pbnRlckV2ZW50cyA9ICEhd2luZG93LlBvaW50ZXJFdmVudDtcblxuICAgICAgICAvLyB0aGlzIHdpbGwgbWFrZSBpdCBzbyB0aGF0IHlvdSBkb24ndCBoYXZlIHRvIGNhbGwgYmluZCBhbGwgdGhlIHRpbWVcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uUG9pbnRlclVwID0gdGhpcy5vblBvaW50ZXJVcC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByb2Nlc3NQb2ludGVyVXAgPSB0aGlzLnByb2Nlc3NQb2ludGVyVXAuYmluZCh0aGlzKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uUG9pbnRlckNhbmNlbCA9IHRoaXMub25Qb2ludGVyQ2FuY2VsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucHJvY2Vzc1BvaW50ZXJDYW5jZWwgPSB0aGlzLnByb2Nlc3NQb2ludGVyQ2FuY2VsLmJpbmQodGhpcyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge0Z1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vblBvaW50ZXJEb3duID0gdGhpcy5vblBvaW50ZXJEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucHJvY2Vzc1BvaW50ZXJEb3duID0gdGhpcy5wcm9jZXNzUG9pbnRlckRvd24uYmluZCh0aGlzKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uUG9pbnRlck1vdmUgPSB0aGlzLm9uUG9pbnRlck1vdmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9jZXNzUG9pbnRlck1vdmUgPSB0aGlzLnByb2Nlc3NQb2ludGVyTW92ZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Qb2ludGVyT3V0ID0gdGhpcy5vblBvaW50ZXJPdXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9jZXNzUG9pbnRlck92ZXJPdXQgPSB0aGlzLnByb2Nlc3NQb2ludGVyT3Zlck91dC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Qb2ludGVyT3ZlciA9IHRoaXMub25Qb2ludGVyT3Zlci5iaW5kKHRoaXMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaWN0aW9uYXJ5IG9mIGhvdyBkaWZmZXJlbnQgY3Vyc29yIG1vZGVzIGFyZSBoYW5kbGVkLiBTdHJpbmdzIGFyZSBoYW5kbGVkIGFzIENTUyBjdXJzb3JcbiAgICAgICAgICogdmFsdWVzLCBvYmplY3RzIGFyZSBoYW5kbGVkIGFzIGRpY3Rpb25hcmllcyBvZiBDU1MgdmFsdWVzIGZvciBpbnRlcmFjdGlvbkRPTUVsZW1lbnQsXG4gICAgICAgICAqIGFuZCBmdW5jdGlvbnMgYXJlIGNhbGxlZCBpbnN0ZWFkIG9mIGNoYW5naW5nIHRoZSBDU1MuXG4gICAgICAgICAqIERlZmF1bHQgQ1NTIGN1cnNvciB2YWx1ZXMgYXJlIHByb3ZpZGVkIGZvciAnZGVmYXVsdCcgYW5kICdwb2ludGVyJyBtb2Rlcy5cbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsIE9iamVjdD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnNvclN0eWxlcyA9IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdpbmhlcml0JyxcbiAgICAgICAgICAgIHBvaW50ZXI6ICdwb2ludGVyJyxcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1vZGUgb2YgdGhlIGN1cnNvciB0aGF0IGlzIGJlaW5nIHVzZWQuXG4gICAgICAgICAqIFRoZSB2YWx1ZSBvZiB0aGlzIGlzIGEga2V5IGZyb20gdGhlIGN1cnNvclN0eWxlcyBkaWN0aW9uYXJ5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRDdXJzb3JNb2RlID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgY2FjaGVkIGxldC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdXJzb3IgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCByZXNvbHV0aW9uIC8gZGV2aWNlIHBpeGVsIHJhdGlvLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDFcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IDE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlbGF5ZWQgcG9pbnRlciBldmVudHMuIFVzZWQgdG8gZ3VhcmFudGVlIGNvcnJlY3Qgb3JkZXJpbmcgb2Ygb3Zlci9vdXQgZXZlbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVsYXllZEV2ZW50cyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmVlU2VhcmNoIGNvbXBvbmVudCB0aGF0IGlzIHVzZWQgdG8gaGl0VGVzdCBzdGFnZSB0cmVlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuVHJlZVNlYXJjaH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VhcmNoID0gbmV3IFRyZWVTZWFyY2goKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCBhcyBhIGxhc3QgcmVuZGVyZWQgb2JqZWN0IGluIGNhc2UgcmVuZGVyZXIgZG9lc250IGhhdmUgX2xhc3RPYmplY3RSZW5kZXJlZFxuICAgICAgICAgKiBAbWVtYmVyIHtEaXNwbGF5T2JqZWN0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGVtcERpc3BsYXlPYmplY3QgPSBuZXcgVGVtcG9yYXJ5RGlzcGxheU9iamVjdCgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgYnV0dG9uICh1c3VhbGx5IGEgbW91c2UgbGVmdC1idXR0b24pIGlzIHByZXNzZWQgb24gdGhlIGRpc3BsYXlcbiAgICAgICAgICogb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjbW91c2Vkb3duXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2Ugc2Vjb25kYXJ5IGJ1dHRvbiAodXN1YWxseSBhIG1vdXNlIHJpZ2h0LWJ1dHRvbikgaXMgcHJlc3NlZFxuICAgICAgICAgKiBvbiB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciNyaWdodGRvd25cbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBidXR0b24gKHVzdWFsbHkgYSBtb3VzZSBsZWZ0LWJ1dHRvbikgaXMgcmVsZWFzZWQgb3ZlciB0aGUgZGlzcGxheVxuICAgICAgICAgKiBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciNtb3VzZXVwXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2Ugc2Vjb25kYXJ5IGJ1dHRvbiAodXN1YWxseSBhIG1vdXNlIHJpZ2h0LWJ1dHRvbikgaXMgcmVsZWFzZWRcbiAgICAgICAgICogb3ZlciB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciNyaWdodHVwXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgYnV0dG9uICh1c3VhbGx5IGEgbW91c2UgbGVmdC1idXR0b24pIGlzIHByZXNzZWQgYW5kIHJlbGVhc2VkIG9uXG4gICAgICAgICAqIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyI2NsaWNrXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2Ugc2Vjb25kYXJ5IGJ1dHRvbiAodXN1YWxseSBhIG1vdXNlIHJpZ2h0LWJ1dHRvbikgaXMgcHJlc3NlZFxuICAgICAgICAgKiBhbmQgcmVsZWFzZWQgb24gdGhlIGRpc3BsYXkgb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjcmlnaHRjbGlja1xuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHBvaW50ZXIgZGV2aWNlIGJ1dHRvbiAodXN1YWxseSBhIG1vdXNlIGxlZnQtYnV0dG9uKSBpcyByZWxlYXNlZCBvdXRzaWRlIHRoZVxuICAgICAgICAgKiBkaXNwbGF5IG9iamVjdCB0aGF0IGluaXRpYWxseSByZWdpc3RlcmVkIGFcbiAgICAgICAgICogW21vdXNlZG93bl17QGxpbmsgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjZXZlbnQ6bW91c2Vkb3dufS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyI21vdXNldXBvdXRzaWRlXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2Ugc2Vjb25kYXJ5IGJ1dHRvbiAodXN1YWxseSBhIG1vdXNlIHJpZ2h0LWJ1dHRvbikgaXMgcmVsZWFzZWRcbiAgICAgICAgICogb3V0c2lkZSB0aGUgZGlzcGxheSBvYmplY3QgdGhhdCBpbml0aWFsbHkgcmVnaXN0ZXJlZCBhXG4gICAgICAgICAqIFtyaWdodGRvd25de0BsaW5rIFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyI2V2ZW50OnJpZ2h0ZG93bn0uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciNyaWdodHVwb3V0c2lkZVxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHBvaW50ZXIgZGV2aWNlICh1c3VhbGx5IGEgbW91c2UpIGlzIG1vdmVkIHdoaWxlIG92ZXIgdGhlIGRpc3BsYXkgb2JqZWN0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciNtb3VzZW1vdmVcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSAodXN1YWxseSBhIG1vdXNlKSBpcyBtb3ZlZCBvbnRvIHRoZSBkaXNwbGF5IG9iamVjdFxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjbW91c2VvdmVyXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgKHVzdWFsbHkgYSBtb3VzZSkgaXMgbW92ZWQgb2ZmIHRoZSBkaXNwbGF5IG9iamVjdFxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjbW91c2VvdXRcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBidXR0b24gaXMgcHJlc3NlZCBvbiB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciNwb2ludGVyZG93blxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHBvaW50ZXIgZGV2aWNlIGJ1dHRvbiBpcyByZWxlYXNlZCBvdmVyIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICogTm90IGFsd2F5cyBmaXJlZCB3aGVuIHNvbWUgYnV0dG9ucyBhcmUgaGVsZCBkb3duIHdoaWxlIG90aGVycyBhcmUgcmVsZWFzZWQuIEluIHRob3NlIGNhc2VzLFxuICAgICAgICAgKiB1c2UgW21vdXNlZG93bl17QGxpbmsgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjZXZlbnQ6bW91c2Vkb3dufSBhbmRcbiAgICAgICAgICogW21vdXNldXBde0BsaW5rIFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyI2V2ZW50Om1vdXNldXB9IGluc3RlYWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciNwb2ludGVydXBcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gdGhlIG9wZXJhdGluZyBzeXN0ZW0gY2FuY2VscyBhIHBvaW50ZXIgZXZlbnRcbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyI3BvaW50ZXJjYW5jZWxcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBidXR0b24gaXMgcHJlc3NlZCBhbmQgcmVsZWFzZWQgb24gdGhlIGRpc3BsYXkgb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjcG9pbnRlcnRhcFxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHBvaW50ZXIgZGV2aWNlIGJ1dHRvbiBpcyByZWxlYXNlZCBvdXRzaWRlIHRoZSBkaXNwbGF5IG9iamVjdCB0aGF0IGluaXRpYWxseVxuICAgICAgICAgKiByZWdpc3RlcmVkIGEgW3BvaW50ZXJkb3duXXtAbGluayBQSVhJLkludGVyYWN0aW9uTWFuYWdlciNldmVudDpwb2ludGVyZG93bn0uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciNwb2ludGVydXBvdXRzaWRlXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgaXMgbW92ZWQgd2hpbGUgb3ZlciB0aGUgZGlzcGxheSBvYmplY3RcbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyI3BvaW50ZXJtb3ZlXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgaXMgbW92ZWQgb250byB0aGUgZGlzcGxheSBvYmplY3RcbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyI3BvaW50ZXJvdmVyXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgaXMgbW92ZWQgb2ZmIHRoZSBkaXNwbGF5IG9iamVjdFxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjcG9pbnRlcm91dFxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHRvdWNoIHBvaW50IGlzIHBsYWNlZCBvbiB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciN0b3VjaHN0YXJ0XG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgdG91Y2ggcG9pbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyI3RvdWNoZW5kXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIHRoZSBvcGVyYXRpbmcgc3lzdGVtIGNhbmNlbHMgYSB0b3VjaFxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjdG91Y2hjYW5jZWxcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSB0b3VjaCBwb2ludCBpcyBwbGFjZWQgYW5kIHJlbW92ZWQgZnJvbSB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciN0YXBcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSB0b3VjaCBwb2ludCBpcyByZW1vdmVkIG91dHNpZGUgb2YgdGhlIGRpc3BsYXkgb2JqZWN0IHRoYXQgaW5pdGlhbGx5XG4gICAgICAgICAqIHJlZ2lzdGVyZWQgYSBbdG91Y2hzdGFydF17QGxpbmsgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIjZXZlbnQ6dG91Y2hzdGFydH0uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciN0b3VjaGVuZG91dHNpZGVcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSB0b3VjaCBwb2ludCBpcyBtb3ZlZCBhbG9uZyB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkludGVyYWN0aW9uTWFuYWdlciN0b3VjaG1vdmVcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBidXR0b24gKHVzdWFsbHkgYSBtb3VzZSBsZWZ0LWJ1dHRvbikgaXMgcHJlc3NlZCBvbiB0aGUgZGlzcGxheS5cbiAgICAgICAgICogb2JqZWN0LiBEaXNwbGF5T2JqZWN0J3MgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gZmlyZSBldmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuRGlzcGxheU9iamVjdCNtb3VzZWRvd25cbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBzZWNvbmRhcnkgYnV0dG9uICh1c3VhbGx5IGEgbW91c2UgcmlnaHQtYnV0dG9uKSBpcyBwcmVzc2VkXG4gICAgICAgICAqIG9uIHRoZSBkaXNwbGF5IG9iamVjdC4gRGlzcGxheU9iamVjdCdzIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gYHRydWVgIHRvIGZpcmUgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjcmlnaHRkb3duXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgYnV0dG9uICh1c3VhbGx5IGEgbW91c2UgbGVmdC1idXR0b24pIGlzIHJlbGVhc2VkIG92ZXIgdGhlIGRpc3BsYXlcbiAgICAgICAgICogb2JqZWN0LiBEaXNwbGF5T2JqZWN0J3MgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gZmlyZSBldmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuRGlzcGxheU9iamVjdCNtb3VzZXVwXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2Ugc2Vjb25kYXJ5IGJ1dHRvbiAodXN1YWxseSBhIG1vdXNlIHJpZ2h0LWJ1dHRvbikgaXMgcmVsZWFzZWRcbiAgICAgICAgICogb3ZlciB0aGUgZGlzcGxheSBvYmplY3QuIERpc3BsYXlPYmplY3QncyBgaW50ZXJhY3RpdmVgIHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byBmaXJlIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5EaXNwbGF5T2JqZWN0I3JpZ2h0dXBcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBidXR0b24gKHVzdWFsbHkgYSBtb3VzZSBsZWZ0LWJ1dHRvbikgaXMgcHJlc3NlZCBhbmQgcmVsZWFzZWQgb25cbiAgICAgICAgICogdGhlIGRpc3BsYXkgb2JqZWN0LiBEaXNwbGF5T2JqZWN0J3MgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gZmlyZSBldmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuRGlzcGxheU9iamVjdCNjbGlja1xuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHBvaW50ZXIgZGV2aWNlIHNlY29uZGFyeSBidXR0b24gKHVzdWFsbHkgYSBtb3VzZSByaWdodC1idXR0b24pIGlzIHByZXNzZWRcbiAgICAgICAgICogYW5kIHJlbGVhc2VkIG9uIHRoZSBkaXNwbGF5IG9iamVjdC4gRGlzcGxheU9iamVjdCdzIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gYHRydWVgIHRvIGZpcmUgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjcmlnaHRjbGlja1xuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHBvaW50ZXIgZGV2aWNlIGJ1dHRvbiAodXN1YWxseSBhIG1vdXNlIGxlZnQtYnV0dG9uKSBpcyByZWxlYXNlZCBvdXRzaWRlIHRoZVxuICAgICAgICAgKiBkaXNwbGF5IG9iamVjdCB0aGF0IGluaXRpYWxseSByZWdpc3RlcmVkIGFcbiAgICAgICAgICogW21vdXNlZG93bl17QGxpbmsgUElYSS5EaXNwbGF5T2JqZWN0I2V2ZW50Om1vdXNlZG93bn0uXG4gICAgICAgICAqIERpc3BsYXlPYmplY3QncyBgaW50ZXJhY3RpdmVgIHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byBmaXJlIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5EaXNwbGF5T2JqZWN0I21vdXNldXBvdXRzaWRlXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2Ugc2Vjb25kYXJ5IGJ1dHRvbiAodXN1YWxseSBhIG1vdXNlIHJpZ2h0LWJ1dHRvbikgaXMgcmVsZWFzZWRcbiAgICAgICAgICogb3V0c2lkZSB0aGUgZGlzcGxheSBvYmplY3QgdGhhdCBpbml0aWFsbHkgcmVnaXN0ZXJlZCBhXG4gICAgICAgICAqIFtyaWdodGRvd25de0BsaW5rIFBJWEkuRGlzcGxheU9iamVjdCNldmVudDpyaWdodGRvd259LlxuICAgICAgICAgKiBEaXNwbGF5T2JqZWN0J3MgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gZmlyZSBldmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuRGlzcGxheU9iamVjdCNyaWdodHVwb3V0c2lkZVxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHBvaW50ZXIgZGV2aWNlICh1c3VhbGx5IGEgbW91c2UpIGlzIG1vdmVkIHdoaWxlIG92ZXIgdGhlIGRpc3BsYXkgb2JqZWN0LlxuICAgICAgICAgKiBEaXNwbGF5T2JqZWN0J3MgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gZmlyZSBldmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuRGlzcGxheU9iamVjdCNtb3VzZW1vdmVcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSAodXN1YWxseSBhIG1vdXNlKSBpcyBtb3ZlZCBvbnRvIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICogRGlzcGxheU9iamVjdCdzIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gYHRydWVgIHRvIGZpcmUgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjbW91c2VvdmVyXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgKHVzdWFsbHkgYSBtb3VzZSkgaXMgbW92ZWQgb2ZmIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICogRGlzcGxheU9iamVjdCdzIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gYHRydWVgIHRvIGZpcmUgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjbW91c2VvdXRcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBidXR0b24gaXMgcHJlc3NlZCBvbiB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgICAqIERpc3BsYXlPYmplY3QncyBgaW50ZXJhY3RpdmVgIHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byBmaXJlIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5EaXNwbGF5T2JqZWN0I3BvaW50ZXJkb3duXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgYnV0dG9uIGlzIHJlbGVhc2VkIG92ZXIgdGhlIGRpc3BsYXkgb2JqZWN0LlxuICAgICAgICAgKiBEaXNwbGF5T2JqZWN0J3MgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gZmlyZSBldmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuRGlzcGxheU9iamVjdCNwb2ludGVydXBcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gdGhlIG9wZXJhdGluZyBzeXN0ZW0gY2FuY2VscyBhIHBvaW50ZXIgZXZlbnQuXG4gICAgICAgICAqIERpc3BsYXlPYmplY3QncyBgaW50ZXJhY3RpdmVgIHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byBmaXJlIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5EaXNwbGF5T2JqZWN0I3BvaW50ZXJjYW5jZWxcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBidXR0b24gaXMgcHJlc3NlZCBhbmQgcmVsZWFzZWQgb24gdGhlIGRpc3BsYXkgb2JqZWN0LlxuICAgICAgICAgKiBEaXNwbGF5T2JqZWN0J3MgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gZmlyZSBldmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuRGlzcGxheU9iamVjdCNwb2ludGVydGFwXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgcG9pbnRlciBkZXZpY2UgYnV0dG9uIGlzIHJlbGVhc2VkIG91dHNpZGUgdGhlIGRpc3BsYXkgb2JqZWN0IHRoYXQgaW5pdGlhbGx5XG4gICAgICAgICAqIHJlZ2lzdGVyZWQgYSBbcG9pbnRlcmRvd25de0BsaW5rIFBJWEkuRGlzcGxheU9iamVjdCNldmVudDpwb2ludGVyZG93bn0uXG4gICAgICAgICAqIERpc3BsYXlPYmplY3QncyBgaW50ZXJhY3RpdmVgIHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byBmaXJlIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5EaXNwbGF5T2JqZWN0I3BvaW50ZXJ1cG91dHNpZGVcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBpcyBtb3ZlZCB3aGlsZSBvdmVyIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICogRGlzcGxheU9iamVjdCdzIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gYHRydWVgIHRvIGZpcmUgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjcG9pbnRlcm1vdmVcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBpcyBtb3ZlZCBvbnRvIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICogRGlzcGxheU9iamVjdCdzIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gYHRydWVgIHRvIGZpcmUgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjcG9pbnRlcm92ZXJcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSBwb2ludGVyIGRldmljZSBpcyBtb3ZlZCBvZmYgdGhlIGRpc3BsYXkgb2JqZWN0LlxuICAgICAgICAgKiBEaXNwbGF5T2JqZWN0J3MgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gZmlyZSBldmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuRGlzcGxheU9iamVjdCNwb2ludGVyb3V0XG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgdG91Y2ggcG9pbnQgaXMgcGxhY2VkIG9uIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICogRGlzcGxheU9iamVjdCdzIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gYHRydWVgIHRvIGZpcmUgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjdG91Y2hzdGFydFxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHRvdWNoIHBvaW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgICAqIERpc3BsYXlPYmplY3QncyBgaW50ZXJhY3RpdmVgIHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byBmaXJlIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5EaXNwbGF5T2JqZWN0I3RvdWNoZW5kXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIHRoZSBvcGVyYXRpbmcgc3lzdGVtIGNhbmNlbHMgYSB0b3VjaC5cbiAgICAgICAgICogRGlzcGxheU9iamVjdCdzIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gYHRydWVgIHRvIGZpcmUgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjdG91Y2hjYW5jZWxcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50IC0gSW50ZXJhY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gYSB0b3VjaCBwb2ludCBpcyBwbGFjZWQgYW5kIHJlbW92ZWQgZnJvbSB0aGUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgICAqIERpc3BsYXlPYmplY3QncyBgaW50ZXJhY3RpdmVgIHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byBmaXJlIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5EaXNwbGF5T2JqZWN0I3RhcFxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHRvdWNoIHBvaW50IGlzIHJlbW92ZWQgb3V0c2lkZSBvZiB0aGUgZGlzcGxheSBvYmplY3QgdGhhdCBpbml0aWFsbHlcbiAgICAgICAgICogcmVnaXN0ZXJlZCBhIFt0b3VjaHN0YXJ0XXtAbGluayBQSVhJLkRpc3BsYXlPYmplY3QjZXZlbnQ6dG91Y2hzdGFydH0uXG4gICAgICAgICAqIERpc3BsYXlPYmplY3QncyBgaW50ZXJhY3RpdmVgIHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byBmaXJlIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5EaXNwbGF5T2JqZWN0I3RvdWNoZW5kb3V0c2lkZVxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gZXZlbnQgLSBJbnRlcmFjdGlvbiBldmVudFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIHRvdWNoIHBvaW50IGlzIG1vdmVkIGFsb25nIHRoZSBkaXNwbGF5IG9iamVjdC5cbiAgICAgICAgICogRGlzcGxheU9iamVjdCdzIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gYHRydWVgIHRvIGZpcmUgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLkRpc3BsYXlPYmplY3QjdG91Y2htb3ZlXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBldmVudCAtIEludGVyYWN0aW9uIGV2ZW50XG4gICAgICAgICAqL1xuXG4gICAgICAgIHRoaXMuX3VzZVN5c3RlbVRpY2tlciA9IG9wdGlvbnMudXNlU3lzdGVtVGlja2VyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnVzZVN5c3RlbVRpY2tlciA6IHRydWU7XG5cbiAgICAgICAgdGhpcy5zZXRUYXJnZXRFbGVtZW50KHRoaXMucmVuZGVyZXIudmlldywgdGhpcy5yZW5kZXJlci5yZXNvbHV0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG91bGQgdGhlIEludGVyYWN0aW9uTWFuYWdlciBhdXRvbWF0aWNhbGx5IGFkZCB7QGxpbmsgdGlja2VyVXBkYXRlfSB0byB7QGxpbmsgUElYSS5UaWNrZXIuc3lzdGVtfS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqL1xuICAgIGdldCB1c2VTeXN0ZW1UaWNrZXIoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZVN5c3RlbVRpY2tlcjtcbiAgICB9XG4gICAgc2V0IHVzZVN5c3RlbVRpY2tlcih1c2VTeXN0ZW1UaWNrZXI6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICB0aGlzLl91c2VTeXN0ZW1UaWNrZXIgPSB1c2VTeXN0ZW1UaWNrZXI7XG5cbiAgICAgICAgaWYgKHVzZVN5c3RlbVRpY2tlcilcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5hZGRUaWNrZXJMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVUaWNrZXJMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGFzdCByZW5kZXJlZCBvYmplY3Qgb3IgdGVtcCBvYmplY3RcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG1lbWJlciB7UElYSS5EaXNwbGF5T2JqZWN0fVxuICAgICAqL1xuICAgIGdldCBsYXN0T2JqZWN0UmVuZGVyZWQoKTogRGlzcGxheU9iamVjdFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIuX2xhc3RPYmplY3RSZW5kZXJlZCB8fCB0aGlzLl90ZW1wRGlzcGxheU9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaXQgdGVzdHMgYSBwb2ludCBhZ2FpbnN0IHRoZSBkaXNwbGF5IHRyZWUsIHJldHVybmluZyB0aGUgZmlyc3QgaW50ZXJhY3RpdmUgb2JqZWN0IHRoYXQgaXMgaGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlBvaW50fSBnbG9iYWxQb2ludCAtIEEgcG9pbnQgdG8gaGl0IHRlc3Qgd2l0aCwgaW4gZ2xvYmFsIHNwYWNlLlxuICAgICAqIEBwYXJhbSB7UElYSS5Db250YWluZXJ9IFtyb290XSAtIFRoZSByb290IGRpc3BsYXkgb2JqZWN0IHRvIHN0YXJ0IGZyb20uIElmIG9taXR0ZWQsIGRlZmF1bHRzXG4gICAgICogdG8gdGhlIGxhc3QgcmVuZGVyZWQgcm9vdCBvZiB0aGUgYXNzb2NpYXRlZCByZW5kZXJlci5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkRpc3BsYXlPYmplY3R9IFRoZSBoaXQgZGlzcGxheSBvYmplY3QsIGlmIGFueS5cbiAgICAgKi9cbiAgICBwdWJsaWMgaGl0VGVzdChnbG9iYWxQb2ludDogUG9pbnQsIHJvb3Q/OiBEaXNwbGF5T2JqZWN0KTogRGlzcGxheU9iamVjdFxuICAgIHtcbiAgICAgICAgLy8gY2xlYXIgdGhlIHRhcmdldCBmb3Igb3VyIGhpdCB0ZXN0XG4gICAgICAgIGhpdFRlc3RFdmVudC50YXJnZXQgPSBudWxsO1xuICAgICAgICAvLyBhc3NpZ24gdGhlIGdsb2JhbCBwb2ludFxuICAgICAgICBoaXRUZXN0RXZlbnQuZGF0YS5nbG9iYWwgPSBnbG9iYWxQb2ludDtcbiAgICAgICAgLy8gZW5zdXJlIHNhZmV0eSBvZiB0aGUgcm9vdFxuICAgICAgICBpZiAoIXJvb3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJvb3QgPSB0aGlzLmxhc3RPYmplY3RSZW5kZXJlZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBydW4gdGhlIGhpdCB0ZXN0XG4gICAgICAgIHRoaXMucHJvY2Vzc0ludGVyYWN0aXZlKGhpdFRlc3RFdmVudCBhcyBJbnRlcmFjdGlvbkV2ZW50LCByb290LCBudWxsLCB0cnVlKTtcbiAgICAgICAgLy8gcmV0dXJuIG91ciBmb3VuZCBvYmplY3QgLSBpdCdsbCBiZSBudWxsIGlmIHdlIGRpZG4ndCBoaXQgYW55dGhpbmdcblxuICAgICAgICByZXR1cm4gaGl0VGVzdEV2ZW50LnRhcmdldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBET00gZWxlbWVudCB3aGljaCB3aWxsIHJlY2VpdmUgbW91c2UvdG91Y2ggZXZlbnRzLiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB5b3UgaGF2ZVxuICAgICAqIG90aGVyIERPTSBlbGVtZW50cyBvbiB0b3Agb2YgdGhlIHJlbmRlcmVycyBDYW52YXMgZWxlbWVudC4gV2l0aCB0aGlzIHlvdSdsbCBiZSBiYWxlIHRvIGRlbGVnYXRlXG4gICAgICogYW5vdGhlciBET00gZWxlbWVudCB0byByZWNlaXZlIHRob3NlIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSB0aGUgRE9NIGVsZW1lbnQgd2hpY2ggd2lsbCByZWNlaXZlIG1vdXNlIGFuZCB0b3VjaCBldmVudHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyZXNvbHV0aW9uPTFdIC0gVGhlIHJlc29sdXRpb24gLyBkZXZpY2UgcGl4ZWwgcmF0aW8gb2YgdGhlIG5ldyBlbGVtZW50IChyZWxhdGl2ZSB0byB0aGUgY2FudmFzKS5cbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0VGFyZ2V0RWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgcmVzb2x1dGlvbiA9IDEpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnJlbW92ZVRpY2tlckxpc3RlbmVyKCk7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudHMoKTtcblxuICAgICAgICB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcblxuICAgICAgICB0aGlzLmFkZEV2ZW50cygpO1xuXG4gICAgICAgIHRoaXMuYWRkVGlja2VyTGlzdGVuZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIHRpY2tlciBsaXN0ZW5lclxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFkZFRpY2tlckxpc3RlbmVyKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnRpY2tlckFkZGVkIHx8ICF0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudCB8fCAhdGhpcy5fdXNlU3lzdGVtVGlja2VyKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBUaWNrZXIuc3lzdGVtLmFkZCh0aGlzLnRpY2tlclVwZGF0ZSwgdGhpcywgVVBEQVRFX1BSSU9SSVRZLklOVEVSQUNUSU9OKTtcblxuICAgICAgICB0aGlzLnRpY2tlckFkZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIHRpY2tlciBsaXN0ZW5lclxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlbW92ZVRpY2tlckxpc3RlbmVyKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy50aWNrZXJBZGRlZClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgVGlja2VyLnN5c3RlbS5yZW1vdmUodGhpcy50aWNrZXJVcGRhdGUsIHRoaXMpO1xuXG4gICAgICAgIHRoaXMudGlja2VyQWRkZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYWxsIHRoZSBET00gZXZlbnRzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgYWRkRXZlbnRzKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmV2ZW50c0FkZGVkIHx8ICF0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZSBhcyBDcm9zc0NTU1N0eWxlRGVjbGFyYXRpb247XG5cbiAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZClcbiAgICAgICAge1xuICAgICAgICAgICAgc3R5bGUubXNDb250ZW50Wm9vbWluZyA9ICdub25lJztcbiAgICAgICAgICAgIHN0eWxlLm1zVG91Y2hBY3Rpb24gPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdXBwb3J0c1BvaW50ZXJFdmVudHMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN0eWxlLnRvdWNoQWN0aW9uID0gJ25vbmUnO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZXNlIGV2ZW50cyBhcmUgYWRkZWQgZmlyc3QsIHNvIHRoYXQgaWYgcG9pbnRlciBldmVudHMgYXJlIG5vcm1hbGl6ZWQsIHRoZXkgYXJlIGZpcmVkXG4gICAgICAgICAqIGluIHRoZSBzYW1lIG9yZGVyIGFzIG5vbi1ub3JtYWxpemVkIGV2ZW50cy4gaWUuIHBvaW50ZXIgZXZlbnQgMXN0LCBtb3VzZSAvIHRvdWNoIDJuZFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNQb2ludGVyRXZlbnRzKVxuICAgICAgICB7XG4gICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCB0aGlzLm9uUG9pbnRlck1vdmUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLm9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgICAgICAgLy8gcG9pbnRlcm91dCBpcyBmaXJlZCBpbiBhZGRpdGlvbiB0byBwb2ludGVydXAgKGZvciB0b3VjaCBldmVudHMpIGFuZCBwb2ludGVyY2FuY2VsXG4gICAgICAgICAgICAvLyB3ZSBhbHJlYWR5IGhhbmRsZSB0aG9zZSwgc28gZm9yIHRoZSBwdXJwb3NlcyBvZiB3aGF0IHdlIGRvIGluIG9uUG9pbnRlck91dCwgd2Ugb25seVxuICAgICAgICAgICAgLy8gY2FyZSBhYm91dCB0aGUgcG9pbnRlcmxlYXZlIGV2ZW50XG4gICAgICAgICAgICB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybGVhdmUnLCB0aGlzLm9uUG9pbnRlck91dCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyb3ZlcicsIHRoaXMub25Qb2ludGVyT3ZlciwgdHJ1ZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIHRoaXMub25Qb2ludGVyQ2FuY2VsLCB0cnVlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCB0aGlzLm9uUG9pbnRlclVwLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uUG9pbnRlck1vdmUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5vblBvaW50ZXJPdXQsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5vblBvaW50ZXJPdmVyLCB0cnVlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vblBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhbHdheXMgbG9vayBkaXJlY3RseSBmb3IgdG91Y2ggZXZlbnRzIHNvIHRoYXQgd2UgY2FuIHByb3ZpZGUgb3JpZ2luYWwgZGF0YVxuICAgICAgICAvLyBJbiBhIGZ1dHVyZSB2ZXJzaW9uIHdlIHNob3VsZCBjaGFuZ2UgdGhpcyB0byBiZWluZyBqdXN0IGEgZmFsbGJhY2sgYW5kIHJlbHkgc29sZWx5IG9uXG4gICAgICAgIC8vIFBvaW50ZXJFdmVudHMgd2hlbmV2ZXIgYXZhaWxhYmxlXG4gICAgICAgIGlmICh0aGlzLnN1cHBvcnRzVG91Y2hFdmVudHMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCB0aGlzLm9uUG9pbnRlckNhbmNlbCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Qb2ludGVyVXAsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblBvaW50ZXJNb3ZlLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXZlbnRzQWRkZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHRoZSBET00gZXZlbnRzIHRoYXQgd2VyZSBwcmV2aW91c2x5IHJlZ2lzdGVyZWRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW1vdmVFdmVudHMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c0FkZGVkIHx8ICF0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZSBhcyBDcm9zc0NTU1N0eWxlRGVjbGFyYXRpb247XG5cbiAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZClcbiAgICAgICAge1xuICAgICAgICAgICAgc3R5bGUubXNDb250ZW50Wm9vbWluZyA9ICcnO1xuICAgICAgICAgICAgc3R5bGUubXNUb3VjaEFjdGlvbiA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3VwcG9ydHNQb2ludGVyRXZlbnRzKVxuICAgICAgICB7XG4gICAgICAgICAgICBzdHlsZS50b3VjaEFjdGlvbiA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNQb2ludGVyRXZlbnRzKVxuICAgICAgICB7XG4gICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCB0aGlzLm9uUG9pbnRlck1vdmUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLm9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgdGhpcy5vblBvaW50ZXJPdXQsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm92ZXInLCB0aGlzLm9uUG9pbnRlck92ZXIsIHRydWUpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJjYW5jZWwnLCB0aGlzLm9uUG9pbnRlckNhbmNlbCwgdHJ1ZSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgdGhpcy5vblBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vblBvaW50ZXJNb3ZlLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMub25Qb2ludGVyT3V0LCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMub25Qb2ludGVyT3ZlciwgdHJ1ZSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Qb2ludGVyVXAsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNUb3VjaEV2ZW50cylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMub25Qb2ludGVyQ2FuY2VsLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uUG9pbnRlck1vdmUsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuZXZlbnRzQWRkZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzdGF0ZSBvZiBpbnRlcmFjdGl2ZSBvYmplY3RzIGlmIGF0IGxlYXN0IHtAbGluayBpbnRlcmFjdGlvbkZyZXF1ZW5jeX1cbiAgICAgKiBtaWxsaXNlY29uZHMgaGF2ZSBwYXNzZWQgc2luY2UgdGhlIGxhc3QgaW52b2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEludm9rZWQgYnkgYSB0aHJvdHRsZWQgdGlja2VyIHVwZGF0ZSBmcm9tIHtAbGluayBQSVhJLlRpY2tlci5zeXN0ZW19LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhVGltZSAtIHRpbWUgZGVsdGEgc2luY2UgdGhlIGxhc3QgY2FsbFxuICAgICAqL1xuICAgIHB1YmxpYyB0aWNrZXJVcGRhdGUoZGVsdGFUaW1lOiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl9kZWx0YVRpbWUgKz0gZGVsdGFUaW1lO1xuXG4gICAgICAgIGlmICh0aGlzLl9kZWx0YVRpbWUgPCB0aGlzLmludGVyYWN0aW9uRnJlcXVlbmN5KVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kZWx0YVRpbWUgPSAwO1xuXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc3RhdGUgb2YgaW50ZXJhY3RpdmUgb2JqZWN0cy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZSB1c2VyIG1vdmUgdGhlIG1vdXNlIHRoaXMgY2hlY2sgaGFzIGFscmVhZHkgYmVlbiBkb25lIHVzaW5nIHRoZSBtb3VzZSBtb3ZlIVxuICAgICAgICBpZiAodGhpcy5fZGlkTW92ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZGlkTW92ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmN1cnNvciA9IG51bGw7XG5cbiAgICAgICAgLy8gUmVzZXRzIHRoZSBmbGFnIGFzIHNldCBieSBhIHN0b3BQcm9wYWdhdGlvbiBjYWxsLiBUaGlzIGZsYWcgaXMgdXN1YWxseSByZXNldCBieSBhIHVzZXIgaW50ZXJhY3Rpb24gb2YgYW55IGtpbmQsXG4gICAgICAgIC8vIGJ1dCB0aGVyZSB3YXMgYSBzY2VuYXJpbyBvZiBhIGRpc3BsYXkgb2JqZWN0IG1vdmluZyB1bmRlciBhIHN0YXRpYyBtb3VzZSBjdXJzb3IuXG4gICAgICAgIC8vIEluIHRoaXMgY2FzZSwgbW91c2VvdmVyIGFuZCBtb3VzZWV2ZW50cyB3b3VsZCBub3QgcGFzcyB0aGUgZmxhZyB0ZXN0IGluIGRpc3BhdGNoRXZlbnQgZnVuY3Rpb25cbiAgICAgICAgZm9yIChjb25zdCBrIGluIHRoaXMuYWN0aXZlSW50ZXJhY3Rpb25EYXRhKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVJbnRlcmFjdGlvbkRhdGEuaGFzT3duUHJvcGVydHkoaykpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25EYXRhID0gdGhpcy5hY3RpdmVJbnRlcmFjdGlvbkRhdGFba107XG5cbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJhY3Rpb25EYXRhLm9yaWdpbmFsRXZlbnQgJiYgaW50ZXJhY3Rpb25EYXRhLnBvaW50ZXJUeXBlICE9PSAndG91Y2gnKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25FdmVudCA9IHRoaXMuY29uZmlndXJlSW50ZXJhY3Rpb25FdmVudEZvckRPTUV2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGlvbkRhdGEub3JpZ2luYWxFdmVudCBhcyBQb2ludGVyRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGlvbkRhdGFcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NJbnRlcmFjdGl2ZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyYWN0aW9uRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RPYmplY3RSZW5kZXJlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1BvaW50ZXJPdmVyT3V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0Q3Vyc29yTW9kZSh0aGlzLmN1cnNvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY3VycmVudCBjdXJzb3IgbW9kZSwgaGFuZGxpbmcgYW55IGNhbGxiYWNrcyBvciBDU1Mgc3R5bGUgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIC0gY3Vyc29yIG1vZGUsIGEga2V5IGZyb20gdGhlIGN1cnNvclN0eWxlcyBkaWN0aW9uYXJ5XG4gICAgICovXG4gICAgcHVibGljIHNldEN1cnNvck1vZGUobW9kZTogc3RyaW5nKTogdm9pZFxuICAgIHtcbiAgICAgICAgbW9kZSA9IG1vZGUgfHwgJ2RlZmF1bHQnO1xuICAgICAgICAvLyBpZiB0aGUgbW9kZSBkaWRuJ3QgYWN0dWFsbHkgY2hhbmdlLCBiYWlsIGVhcmx5XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDdXJzb3JNb2RlID09PSBtb2RlKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50Q3Vyc29yTW9kZSA9IG1vZGU7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5jdXJzb3JTdHlsZXNbbW9kZV07XG5cbiAgICAgICAgLy8gb25seSBkbyB0aGluZ3MgaWYgdGhlcmUgaXMgYSBjdXJzb3Igc3R5bGUgZm9yIGl0XG4gICAgICAgIGlmIChzdHlsZSlcbiAgICAgICAge1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlb2Ygc3R5bGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RyaW5nIHN0eWxlcyBhcmUgaGFuZGxlZCBhcyBjdXJzb3IgQ1NTXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnN0eWxlLmN1cnNvciA9IHN0eWxlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIC8vIGZ1bmN0aW9ucyBhcmUganVzdCBjYWxsZWQsIGFuZCBwYXNzZWQgdGhlIGN1cnNvciBtb2RlXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlKG1vZGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCBpcyBhbiBvYmplY3QsIGFzc3VtZSB0aGF0IGl0IGlzIGEgZGljdGlvbmFyeSBvZiBDU1Mgc3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICAvLyBhcHBseSBpdCB0byB0aGUgaW50ZXJhY3Rpb25ET01FbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGUsIHN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5jdXJzb3JTdHlsZXMsIG1vZGUpKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBpZiBpdCBtb2RlIGlzIGEgc3RyaW5nIChub3QgYSBTeW1ib2wpIGFuZCBjdXJzb3JTdHlsZXMgZG9lc24ndCBoYXZlIGFueSBlbnRyeVxuICAgICAgICAgICAgLy8gZm9yIHRoZSBtb2RlLCB0aGVuIGFzc3VtZSB0aGF0IHRoZSBkZXYgd2FudHMgaXQgdG8gYmUgQ1NTIGZvciB0aGUgY3Vyc29yLlxuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGUuY3Vyc29yID0gbW9kZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgb24gdGhlIGRpc3BsYXkgb2JqZWN0IHRoYXQgd2FzIGludGVyYWN0ZWQgd2l0aFxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkNvbnRhaW5lcnxQSVhJLlNwcml0ZXxQSVhJLlRpbGluZ1Nwcml0ZX0gZGlzcGxheU9iamVjdCAtIHRoZSBkaXNwbGF5IG9iamVjdCBpbiBxdWVzdGlvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFN0cmluZyAtIHRoZSBuYW1lIG9mIHRoZSBldmVudCAoZS5nLCBtb3VzZWRvd24pXG4gICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGV2ZW50RGF0YSAtIHRoZSBldmVudCBkYXRhIG9iamVjdFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBkaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3Q6IERpc3BsYXlPYmplY3QsIGV2ZW50U3RyaW5nOiBzdHJpbmcsIGV2ZW50RGF0YTogSW50ZXJhY3Rpb25FdmVudCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIEV2ZW4gaWYgdGhlIGV2ZW50IHdhcyBzdG9wcGVkLCBhdCBsZWFzdCBkaXNwYXRjaCBhbnkgcmVtYWluaW5nIGV2ZW50c1xuICAgICAgICAvLyBmb3IgdGhlIHNhbWUgZGlzcGxheSBvYmplY3QuXG4gICAgICAgIGlmICghZXZlbnREYXRhLnN0b3BQcm9wYWdhdGlvbkhpbnQgfHwgZGlzcGxheU9iamVjdCA9PT0gZXZlbnREYXRhLnN0b3BzUHJvcGFnYXRpbmdBdClcbiAgICAgICAge1xuICAgICAgICAgICAgZXZlbnREYXRhLmN1cnJlbnRUYXJnZXQgPSBkaXNwbGF5T2JqZWN0O1xuICAgICAgICAgICAgZXZlbnREYXRhLnR5cGUgPSBldmVudFN0cmluZztcblxuICAgICAgICAgICAgZGlzcGxheU9iamVjdC5lbWl0KGV2ZW50U3RyaW5nLCBldmVudERhdGEpO1xuXG4gICAgICAgICAgICBpZiAoKGRpc3BsYXlPYmplY3QgYXMgYW55KVtldmVudFN0cmluZ10pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgKGRpc3BsYXlPYmplY3QgYXMgYW55KVtldmVudFN0cmluZ10oZXZlbnREYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFB1dHMgYSBldmVudCBvbiBhIHF1ZXVlIHRvIGJlIGRpc3BhdGNoZWQgbGF0ZXIuIFRoaXMgaXMgdXNlZCB0byBndWFyYW50ZWUgY29ycmVjdFxuICAgICAqIG9yZGVyaW5nIG9mIG92ZXIvb3V0IGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5Db250YWluZXJ8UElYSS5TcHJpdGV8UElYSS5UaWxpbmdTcHJpdGV9IGRpc3BsYXlPYmplY3QgLSB0aGUgZGlzcGxheSBvYmplY3QgaW4gcXVlc3Rpb25cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRTdHJpbmcgLSB0aGUgbmFtZSBvZiB0aGUgZXZlbnQgKGUuZywgbW91c2Vkb3duKVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudERhdGEgLSB0aGUgZXZlbnQgZGF0YSBvYmplY3RcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgZGVsYXlEaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3Q6IERpc3BsYXlPYmplY3QsIGV2ZW50U3RyaW5nOiBzdHJpbmcsIGV2ZW50RGF0YTogSW50ZXJhY3Rpb25FdmVudCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuZGVsYXllZEV2ZW50cy5wdXNoKHsgZGlzcGxheU9iamVjdCwgZXZlbnRTdHJpbmcsIGV2ZW50RGF0YSB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXBzIHggYW5kIHkgY29vcmRzIGZyb20gYSBET00gb2JqZWN0IGFuZCBtYXBzIHRoZW0gY29ycmVjdGx5IHRvIHRoZSBQaXhpSlMgdmlldy4gVGhlXG4gICAgICogcmVzdWx0aW5nIHZhbHVlIGlzIHN0b3JlZCBpbiB0aGUgcG9pbnQuIFRoaXMgdGFrZXMgaW50byBhY2NvdW50IHRoZSBmYWN0IHRoYXQgdGhlIERPTVxuICAgICAqIGVsZW1lbnQgY291bGQgYmUgc2NhbGVkIGFuZCBwb3NpdGlvbmVkIGFueXdoZXJlIG9uIHRoZSBzY3JlZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtQSVhJLklQb2ludERhdGF9IHBvaW50IC0gdGhlIHBvaW50IHRoYXQgdGhlIHJlc3VsdCB3aWxsIGJlIHN0b3JlZCBpblxuICAgICAqIEBwYXJhbSAge251bWJlcn0geCAtIHRoZSB4IGNvb3JkIG9mIHRoZSBwb3NpdGlvbiB0byBtYXBcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHkgLSB0aGUgeSBjb29yZCBvZiB0aGUgcG9zaXRpb24gdG8gbWFwXG4gICAgICovXG4gICAgcHVibGljIG1hcFBvc2l0aW9uVG9Qb2ludChwb2ludDogSVBvaW50RGF0YSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBsZXQgcmVjdDtcblxuICAgICAgICAvLyBJRSAxMSBmaXhcbiAgICAgICAgaWYgKCF0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5wYXJlbnRFbGVtZW50KVxuICAgICAgICB7XG4gICAgICAgICAgICByZWN0ID0geyB4OiAwLCB5OiAwLCB3aWR0aDogMCwgaGVpZ2h0OiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICByZWN0ID0gdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNvbHV0aW9uTXVsdGlwbGllciA9IDEuMCAvIHRoaXMucmVzb2x1dGlvbjtcblxuICAgICAgICBwb2ludC54ID0gKCh4IC0gcmVjdC5sZWZ0KSAqICgodGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQgYXMgYW55KS53aWR0aCAvIHJlY3Qud2lkdGgpKSAqIHJlc29sdXRpb25NdWx0aXBsaWVyO1xuICAgICAgICBwb2ludC55ID0gKCh5IC0gcmVjdC50b3ApICogKCh0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudCBhcyBhbnkpLmhlaWdodCAvIHJlY3QuaGVpZ2h0KSkgKiByZXNvbHV0aW9uTXVsdGlwbGllcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHByb3ZpZGVzIGEgbmVhdCB3YXkgb2YgY3Jhd2xpbmcgdGhyb3VnaCB0aGUgc2NlbmUgZ3JhcGggYW5kIHJ1bm5pbmcgYVxuICAgICAqIHNwZWNpZmllZCBmdW5jdGlvbiBvbiBhbGwgaW50ZXJhY3RpdmUgb2JqZWN0cyBpdCBmaW5kcy4gSXQgd2lsbCBhbHNvIHRha2UgY2FyZSBvZiBoaXRcbiAgICAgKiB0ZXN0aW5nIHRoZSBpbnRlcmFjdGl2ZSBvYmplY3RzIGFuZCBwYXNzZXMgdGhlIGhpdCBhY3Jvc3MgaW4gdGhlIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBpbnRlcmFjdGlvbkV2ZW50IC0gZXZlbnQgY29udGFpbmluZyB0aGUgcG9pbnQgdGhhdFxuICAgICAqICBpcyB0ZXN0ZWQgZm9yIGNvbGxpc2lvblxuICAgICAqIEBwYXJhbSB7UElYSS5Db250YWluZXJ8UElYSS5TcHJpdGV8UElYSS5UaWxpbmdTcHJpdGV9IGRpc3BsYXlPYmplY3QgLSB0aGUgZGlzcGxheU9iamVjdFxuICAgICAqICB0aGF0IHdpbGwgYmUgaGl0IHRlc3QgKHJlY3Vyc2l2ZWx5IGNyYXdscyBpdHMgY2hpbGRyZW4pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2Z1bmNdIC0gdGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZWFjaCBpbnRlcmFjdGl2ZSBvYmplY3QuIFRoZVxuICAgICAqICBpbnRlcmFjdGlvbkV2ZW50LCBkaXNwbGF5T2JqZWN0IGFuZCBoaXQgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaGl0VGVzdF0gLSBpbmRpY2F0ZXMgd2hldGhlciB3ZSB3YW50IHRvIGNhbGN1bGF0ZSBoaXRzXG4gICAgICogIG9yIGp1c3QgaXRlcmF0ZSB0aHJvdWdoIGFsbCBpbnRlcmFjdGl2ZSBvYmplY3RzXG4gICAgICovXG4gICAgcHVibGljIHByb2Nlc3NJbnRlcmFjdGl2ZShpbnRlcmFjdGlvbkV2ZW50OiBJbnRlcmFjdGlvbkV2ZW50LCBkaXNwbGF5T2JqZWN0OiBEaXNwbGF5T2JqZWN0LFxuICAgICAgICBmdW5jPzogSW50ZXJhY3Rpb25DYWxsYmFjaywgaGl0VGVzdD86IGJvb2xlYW5cbiAgICApOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBoaXQgPSB0aGlzLnNlYXJjaC5maW5kSGl0KGludGVyYWN0aW9uRXZlbnQsIGRpc3BsYXlPYmplY3QsIGZ1bmMsIGhpdFRlc3QpO1xuXG4gICAgICAgIGNvbnN0IGRlbGF5ZWRFdmVudHMgPSB0aGlzLmRlbGF5ZWRFdmVudHM7XG5cbiAgICAgICAgaWYgKCFkZWxheWVkRXZlbnRzLmxlbmd0aClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGhpdDtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXNldCB0aGUgcHJvcGFnYXRpb24gaGludCwgYmVjYXVzZSB3ZSBzdGFydCBkZWVwZXIgaW4gdGhlIHRyZWUgYWdhaW4uXG4gICAgICAgIGludGVyYWN0aW9uRXZlbnQuc3RvcFByb3BhZ2F0aW9uSGludCA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGRlbGF5ZWRMZW4gPSBkZWxheWVkRXZlbnRzLmxlbmd0aDtcblxuICAgICAgICB0aGlzLmRlbGF5ZWRFdmVudHMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlbGF5ZWRMZW47IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgeyBkaXNwbGF5T2JqZWN0LCBldmVudFN0cmluZywgZXZlbnREYXRhIH0gPSBkZWxheWVkRXZlbnRzW2ldO1xuXG4gICAgICAgICAgICAvLyBXaGVuIHdlIHJlYWNoIHRoZSBvYmplY3Qgd2Ugd2FudGVkIHRvIHN0b3AgcHJvcGFnYXRpbmcgYXQsXG4gICAgICAgICAgICAvLyBzZXQgdGhlIHByb3BhZ2F0aW9uIGhpbnQuXG4gICAgICAgICAgICBpZiAoZXZlbnREYXRhLnN0b3BzUHJvcGFnYXRpbmdBdCA9PT0gZGlzcGxheU9iamVjdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudERhdGEuc3RvcFByb3BhZ2F0aW9uSGludCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChkaXNwbGF5T2JqZWN0LCBldmVudFN0cmluZywgZXZlbnREYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoaXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXMgY2FsbGVkIHdoZW4gdGhlIHBvaW50ZXIgYnV0dG9uIGlzIHByZXNzZWQgZG93biBvbiB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gb3JpZ2luYWxFdmVudCAtIFRoZSBET00gZXZlbnQgb2YgYSBwb2ludGVyIGJ1dHRvbiBiZWluZyBwcmVzc2VkIGRvd25cbiAgICAgKi9cbiAgICBwcml2YXRlIG9uUG9pbnRlckRvd24ob3JpZ2luYWxFdmVudDogSW50ZXJhY3RpdmVQb2ludGVyRXZlbnQpOiB2b2lkXG4gICAge1xuICAgICAgICAvLyBpZiB3ZSBzdXBwb3J0IHRvdWNoIGV2ZW50cywgdGhlbiBvbmx5IHVzZSB0aG9zZSBmb3IgdG91Y2ggZXZlbnRzLCBub3QgcG9pbnRlciBldmVudHNcbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNUb3VjaEV2ZW50cyAmJiAob3JpZ2luYWxFdmVudCBhcyBQb2ludGVyRXZlbnQpLnBvaW50ZXJUeXBlID09PSAndG91Y2gnKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5ub3JtYWxpemVUb1BvaW50ZXJEYXRhKG9yaWdpbmFsRXZlbnQpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBObyBuZWVkIHRvIHByZXZlbnQgZGVmYXVsdCBvbiBuYXR1cmFsIHBvaW50ZXIgZXZlbnRzLCBhcyB0aGVyZSBhcmUgbm8gc2lkZSBlZmZlY3RzXG4gICAgICAgICAqIE5vcm1hbGl6ZWQgZXZlbnRzLCBob3dldmVyLCBtYXkgaGF2ZSB0aGUgZG91YmxlIG1vdXNlZG93bi90b3VjaHN0YXJ0IGlzc3VlIG9uIHRoZSBuYXRpdmUgYW5kcm9pZCBicm93c2VyLFxuICAgICAgICAgKiBzbyBzdGlsbCBuZWVkIHRvIGJlIHByZXZlbnRlZC5cbiAgICAgICAgICovXG5cbiAgICAgICAgLy8gR3VhcmFudGVlZCB0aGF0IHRoZXJlIHdpbGwgYmUgYXQgbGVhc3Qgb25lIGV2ZW50IGluIGV2ZW50cywgYW5kIGFsbCBldmVudHMgbXVzdCBoYXZlIHRoZSBzYW1lIHBvaW50ZXIgdHlwZVxuXG4gICAgICAgIGlmICh0aGlzLmF1dG9QcmV2ZW50RGVmYXVsdCAmJiAoZXZlbnRzWzBdIGFzIGFueSkuaXNOb3JtYWxpemVkKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxhYmxlID0gb3JpZ2luYWxFdmVudC5jYW5jZWxhYmxlIHx8ICEoJ2NhbmNlbGFibGUnIGluIG9yaWdpbmFsRXZlbnQpO1xuXG4gICAgICAgICAgICBpZiAoY2FuY2VsYWJsZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBldmVudExlbiA9IGV2ZW50cy5sZW5ndGg7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudExlbjsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IGV2ZW50c1tpXTtcblxuICAgICAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25EYXRhID0gdGhpcy5nZXRJbnRlcmFjdGlvbkRhdGFGb3JQb2ludGVySWQoZXZlbnQpO1xuXG4gICAgICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkV2ZW50ID0gdGhpcy5jb25maWd1cmVJbnRlcmFjdGlvbkV2ZW50Rm9yRE9NRXZlbnQodGhpcy5ldmVudERhdGEsIGV2ZW50LCBpbnRlcmFjdGlvbkRhdGEpO1xuXG4gICAgICAgICAgICBpbnRlcmFjdGlvbkV2ZW50LmRhdGEub3JpZ2luYWxFdmVudCA9IG9yaWdpbmFsRXZlbnQ7XG5cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ludGVyYWN0aXZlKGludGVyYWN0aW9uRXZlbnQsIHRoaXMubGFzdE9iamVjdFJlbmRlcmVkLCB0aGlzLnByb2Nlc3NQb2ludGVyRG93biwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMuZW1pdCgncG9pbnRlcmRvd24nLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgICAgIGlmIChldmVudC5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3RvdWNoc3RhcnQnLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVtaXQgYSBtb3VzZSBldmVudCBmb3IgXCJwZW5cIiBwb2ludGVycywgdGhlIHdheSBhIGJyb3dzZXIgd291bGQgZW1pdCBhIGZhbGxiYWNrIGV2ZW50XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJyB8fCBldmVudC5wb2ludGVyVHlwZSA9PT0gJ3BlbicpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNSaWdodEJ1dHRvbiA9IGV2ZW50LmJ1dHRvbiA9PT0gMjtcblxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChpc1JpZ2h0QnV0dG9uID8gJ3JpZ2h0ZG93bicgOiAnbW91c2Vkb3duJywgdGhpcy5ldmVudERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIHRoZSByZXN1bHQgb2YgdGhlIHBvaW50ZXIgZG93biBjaGVjayBhbmQgZGlzcGF0Y2hlcyB0aGUgZXZlbnQgaWYgbmVlZCBiZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gaW50ZXJhY3Rpb25FdmVudCAtIFRoZSBpbnRlcmFjdGlvbiBldmVudCB3cmFwcGluZyB0aGUgRE9NIGV2ZW50XG4gICAgICogQHBhcmFtIHtQSVhJLkNvbnRhaW5lcnxQSVhJLlNwcml0ZXxQSVhJLlRpbGluZ1Nwcml0ZX0gZGlzcGxheU9iamVjdCAtIFRoZSBkaXNwbGF5IG9iamVjdCB0aGF0IHdhcyB0ZXN0ZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhpdCAtIHRoZSByZXN1bHQgb2YgdGhlIGhpdCB0ZXN0IG9uIHRoZSBkaXNwbGF5IG9iamVjdFxuICAgICAqL1xuICAgIHByaXZhdGUgcHJvY2Vzc1BvaW50ZXJEb3duKGludGVyYWN0aW9uRXZlbnQ6IEludGVyYWN0aW9uRXZlbnQsIGRpc3BsYXlPYmplY3Q6IERpc3BsYXlPYmplY3QsIGhpdDogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBpbnRlcmFjdGlvbkV2ZW50LmRhdGE7XG4gICAgICAgIGNvbnN0IGlkID0gaW50ZXJhY3Rpb25FdmVudC5kYXRhLmlkZW50aWZpZXI7XG5cbiAgICAgICAgaWYgKGhpdClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCFkaXNwbGF5T2JqZWN0LnRyYWNrZWRQb2ludGVyc1tpZF0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGlzcGxheU9iamVjdC50cmFja2VkUG9pbnRlcnNbaWRdID0gbmV3IEludGVyYWN0aW9uVHJhY2tpbmdEYXRhKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChkaXNwbGF5T2JqZWN0LCAncG9pbnRlcmRvd24nLCBpbnRlcmFjdGlvbkV2ZW50KTtcblxuICAgICAgICAgICAgaWYgKGRhdGEucG9pbnRlclR5cGUgPT09ICd0b3VjaCcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3QsICd0b3VjaHN0YXJ0JywgaW50ZXJhY3Rpb25FdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLnBvaW50ZXJUeXBlID09PSAnbW91c2UnIHx8IGRhdGEucG9pbnRlclR5cGUgPT09ICdwZW4nKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzUmlnaHRCdXR0b24gPSBkYXRhLmJ1dHRvbiA9PT0gMjtcblxuICAgICAgICAgICAgICAgIGlmIChpc1JpZ2h0QnV0dG9uKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU9iamVjdC50cmFja2VkUG9pbnRlcnNbaWRdLnJpZ2h0RG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlPYmplY3QudHJhY2tlZFBvaW50ZXJzW2lkXS5sZWZ0RG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3QsIGlzUmlnaHRCdXR0b24gPyAncmlnaHRkb3duJyA6ICdtb3VzZWRvd24nLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElzIGNhbGxlZCB3aGVuIHRoZSBwb2ludGVyIGJ1dHRvbiBpcyByZWxlYXNlZCBvbiB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gb3JpZ2luYWxFdmVudCAtIFRoZSBET00gZXZlbnQgb2YgYSBwb2ludGVyIGJ1dHRvbiBiZWluZyByZWxlYXNlZFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2FuY2VsbGVkIC0gdHJ1ZSBpZiB0aGUgcG9pbnRlciBpcyBjYW5jZWxsZWRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIC0gRnVuY3Rpb24gcGFzc2VkIHRvIHtAbGluayBwcm9jZXNzSW50ZXJhY3RpdmV9XG4gICAgICovXG4gICAgcHJpdmF0ZSBvblBvaW50ZXJDb21wbGV0ZShvcmlnaW5hbEV2ZW50OiBJbnRlcmFjdGl2ZVBvaW50ZXJFdmVudCwgY2FuY2VsbGVkOiBib29sZWFuLCBmdW5jOiBJbnRlcmFjdGlvbkNhbGxiYWNrKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5ub3JtYWxpemVUb1BvaW50ZXJEYXRhKG9yaWdpbmFsRXZlbnQpO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50TGVuID0gZXZlbnRzLmxlbmd0aDtcblxuICAgICAgICAvLyBpZiB0aGUgZXZlbnQgd2Fzbid0IHRhcmdldGluZyBvdXIgY2FudmFzLCB0aGVuIGNvbnNpZGVyIGl0IHRvIGJlIHBvaW50ZXJ1cG91dHNpZGVcbiAgICAgICAgLy8gaW4gYWxsIGNhc2VzICh1bmxlc3MgaXQgd2FzIGEgcG9pbnRlcmNhbmNlbClcbiAgICAgICAgY29uc3QgZXZlbnRBcHBlbmQgPSBvcmlnaW5hbEV2ZW50LnRhcmdldCAhPT0gdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQgPyAnb3V0c2lkZScgOiAnJztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50TGVuOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzW2ldO1xuXG4gICAgICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkRhdGEgPSB0aGlzLmdldEludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZChldmVudCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGludGVyYWN0aW9uRXZlbnQgPSB0aGlzLmNvbmZpZ3VyZUludGVyYWN0aW9uRXZlbnRGb3JET01FdmVudCh0aGlzLmV2ZW50RGF0YSwgZXZlbnQsIGludGVyYWN0aW9uRGF0YSk7XG5cbiAgICAgICAgICAgIGludGVyYWN0aW9uRXZlbnQuZGF0YS5vcmlnaW5hbEV2ZW50ID0gb3JpZ2luYWxFdmVudDtcblxuICAgICAgICAgICAgLy8gcGVyZm9ybSBoaXQgdGVzdGluZyBmb3IgZXZlbnRzIHRhcmdldGluZyBvdXIgY2FudmFzIG9yIGNhbmNlbCBldmVudHNcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ludGVyYWN0aXZlKGludGVyYWN0aW9uRXZlbnQsIHRoaXMubGFzdE9iamVjdFJlbmRlcmVkLCBmdW5jLCBjYW5jZWxsZWQgfHwgIWV2ZW50QXBwZW5kKTtcblxuICAgICAgICAgICAgdGhpcy5lbWl0KGNhbmNlbGxlZCA/ICdwb2ludGVyY2FuY2VsJyA6IGBwb2ludGVydXAke2V2ZW50QXBwZW5kfWAsIGludGVyYWN0aW9uRXZlbnQpO1xuXG4gICAgICAgICAgICBpZiAoZXZlbnQucG9pbnRlclR5cGUgPT09ICdtb3VzZScgfHwgZXZlbnQucG9pbnRlclR5cGUgPT09ICdwZW4nKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzUmlnaHRCdXR0b24gPSBldmVudC5idXR0b24gPT09IDI7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoaXNSaWdodEJ1dHRvbiA/IGByaWdodHVwJHtldmVudEFwcGVuZH1gIDogYG1vdXNldXAke2V2ZW50QXBwZW5kfWAsIGludGVyYWN0aW9uRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQucG9pbnRlclR5cGUgPT09ICd0b3VjaCcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KGNhbmNlbGxlZCA/ICd0b3VjaGNhbmNlbCcgOiBgdG91Y2hlbmQke2V2ZW50QXBwZW5kfWAsIGludGVyYWN0aW9uRXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZUludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZChldmVudC5wb2ludGVySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXMgY2FsbGVkIHdoZW4gdGhlIHBvaW50ZXIgYnV0dG9uIGlzIGNhbmNlbGxlZFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gZXZlbnQgLSBUaGUgRE9NIGV2ZW50IG9mIGEgcG9pbnRlciBidXR0b24gYmVpbmcgcmVsZWFzZWRcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uUG9pbnRlckNhbmNlbChldmVudDogSW50ZXJhY3RpdmVQb2ludGVyRXZlbnQpOiB2b2lkXG4gICAge1xuICAgICAgICAvLyBpZiB3ZSBzdXBwb3J0IHRvdWNoIGV2ZW50cywgdGhlbiBvbmx5IHVzZSB0aG9zZSBmb3IgdG91Y2ggZXZlbnRzLCBub3QgcG9pbnRlciBldmVudHNcbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNUb3VjaEV2ZW50cyAmJiAoZXZlbnQgYXMgUG9pbnRlckV2ZW50KS5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJykgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMub25Qb2ludGVyQ29tcGxldGUoZXZlbnQsIHRydWUsIHRoaXMucHJvY2Vzc1BvaW50ZXJDYW5jZWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyB0aGUgcmVzdWx0IG9mIHRoZSBwb2ludGVyIGNhbmNlbCBjaGVjayBhbmQgZGlzcGF0Y2hlcyB0aGUgZXZlbnQgaWYgbmVlZCBiZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gaW50ZXJhY3Rpb25FdmVudCAtIFRoZSBpbnRlcmFjdGlvbiBldmVudCB3cmFwcGluZyB0aGUgRE9NIGV2ZW50XG4gICAgICogQHBhcmFtIHtQSVhJLkNvbnRhaW5lcnxQSVhJLlNwcml0ZXxQSVhJLlRpbGluZ1Nwcml0ZX0gZGlzcGxheU9iamVjdCAtIFRoZSBkaXNwbGF5IG9iamVjdCB0aGF0IHdhcyB0ZXN0ZWRcbiAgICAgKi9cbiAgICBwcml2YXRlIHByb2Nlc3NQb2ludGVyQ2FuY2VsKGludGVyYWN0aW9uRXZlbnQ6IEludGVyYWN0aW9uRXZlbnQsIGRpc3BsYXlPYmplY3Q6IERpc3BsYXlPYmplY3QpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBkYXRhID0gaW50ZXJhY3Rpb25FdmVudC5kYXRhO1xuXG4gICAgICAgIGNvbnN0IGlkID0gaW50ZXJhY3Rpb25FdmVudC5kYXRhLmlkZW50aWZpZXI7XG5cbiAgICAgICAgaWYgKGRpc3BsYXlPYmplY3QudHJhY2tlZFBvaW50ZXJzW2lkXSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZWxldGUgZGlzcGxheU9iamVjdC50cmFja2VkUG9pbnRlcnNbaWRdO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3QsICdwb2ludGVyY2FuY2VsJywgaW50ZXJhY3Rpb25FdmVudCk7XG5cbiAgICAgICAgICAgIGlmIChkYXRhLnBvaW50ZXJUeXBlID09PSAndG91Y2gnKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChkaXNwbGF5T2JqZWN0LCAndG91Y2hjYW5jZWwnLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElzIGNhbGxlZCB3aGVuIHRoZSBwb2ludGVyIGJ1dHRvbiBpcyByZWxlYXNlZCBvbiB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gZXZlbnQgLSBUaGUgRE9NIGV2ZW50IG9mIGEgcG9pbnRlciBidXR0b24gYmVpbmcgcmVsZWFzZWRcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uUG9pbnRlclVwKGV2ZW50OiBJbnRlcmFjdGl2ZVBvaW50ZXJFdmVudCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIGlmIHdlIHN1cHBvcnQgdG91Y2ggZXZlbnRzLCB0aGVuIG9ubHkgdXNlIHRob3NlIGZvciB0b3VjaCBldmVudHMsIG5vdCBwb2ludGVyIGV2ZW50c1xuICAgICAgICBpZiAodGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzICYmIChldmVudCBhcyBQb2ludGVyRXZlbnQpLnBvaW50ZXJUeXBlID09PSAndG91Y2gnKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5vblBvaW50ZXJDb21wbGV0ZShldmVudCwgZmFsc2UsIHRoaXMucHJvY2Vzc1BvaW50ZXJVcCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIHRoZSByZXN1bHQgb2YgdGhlIHBvaW50ZXIgdXAgY2hlY2sgYW5kIGRpc3BhdGNoZXMgdGhlIGV2ZW50IGlmIG5lZWQgYmVcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGludGVyYWN0aW9uRXZlbnQgLSBUaGUgaW50ZXJhY3Rpb24gZXZlbnQgd3JhcHBpbmcgdGhlIERPTSBldmVudFxuICAgICAqIEBwYXJhbSB7UElYSS5Db250YWluZXJ8UElYSS5TcHJpdGV8UElYSS5UaWxpbmdTcHJpdGV9IGRpc3BsYXlPYmplY3QgLSBUaGUgZGlzcGxheSBvYmplY3QgdGhhdCB3YXMgdGVzdGVkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBoaXQgLSB0aGUgcmVzdWx0IG9mIHRoZSBoaXQgdGVzdCBvbiB0aGUgZGlzcGxheSBvYmplY3RcbiAgICAgKi9cbiAgICBwcml2YXRlIHByb2Nlc3NQb2ludGVyVXAoaW50ZXJhY3Rpb25FdmVudDogSW50ZXJhY3Rpb25FdmVudCwgZGlzcGxheU9iamVjdDogRGlzcGxheU9iamVjdCwgaGl0OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGludGVyYWN0aW9uRXZlbnQuZGF0YTtcblxuICAgICAgICBjb25zdCBpZCA9IGludGVyYWN0aW9uRXZlbnQuZGF0YS5pZGVudGlmaWVyO1xuXG4gICAgICAgIGNvbnN0IHRyYWNraW5nRGF0YSA9IGRpc3BsYXlPYmplY3QudHJhY2tlZFBvaW50ZXJzW2lkXTtcblxuICAgICAgICBjb25zdCBpc1RvdWNoID0gZGF0YS5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJztcblxuICAgICAgICBjb25zdCBpc01vdXNlID0gKGRhdGEucG9pbnRlclR5cGUgPT09ICdtb3VzZScgfHwgZGF0YS5wb2ludGVyVHlwZSA9PT0gJ3BlbicpO1xuICAgICAgICAvLyBuZWVkIHRvIHRyYWNrIG1vdXNlIGRvd24gc3RhdHVzIGluIHRoZSBtb3VzZSBibG9jayBzbyB0aGF0IHdlIGNhbiBlbWl0XG4gICAgICAgIC8vIGV2ZW50IGluIGEgbGF0ZXIgYmxvY2tcbiAgICAgICAgbGV0IGlzTW91c2VUYXAgPSBmYWxzZTtcblxuICAgICAgICAvLyBNb3VzZSBvbmx5XG4gICAgICAgIGlmIChpc01vdXNlKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBpc1JpZ2h0QnV0dG9uID0gZGF0YS5idXR0b24gPT09IDI7XG5cbiAgICAgICAgICAgIGNvbnN0IGZsYWdzID0gSW50ZXJhY3Rpb25UcmFja2luZ0RhdGEuRkxBR1M7XG5cbiAgICAgICAgICAgIGNvbnN0IHRlc3QgPSBpc1JpZ2h0QnV0dG9uID8gZmxhZ3MuUklHSFRfRE9XTiA6IGZsYWdzLkxFRlRfRE9XTjtcblxuICAgICAgICAgICAgY29uc3QgaXNEb3duID0gdHJhY2tpbmdEYXRhICE9PSB1bmRlZmluZWQgJiYgKHRyYWNraW5nRGF0YS5mbGFncyAmIHRlc3QpO1xuXG4gICAgICAgICAgICBpZiAoaGl0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChkaXNwbGF5T2JqZWN0LCBpc1JpZ2h0QnV0dG9uID8gJ3JpZ2h0dXAnIDogJ21vdXNldXAnLCBpbnRlcmFjdGlvbkV2ZW50KTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0Rvd24pXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZGlzcGxheU9iamVjdCwgaXNSaWdodEJ1dHRvbiA/ICdyaWdodGNsaWNrJyA6ICdjbGljaycsIGludGVyYWN0aW9uRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIHdlIGNhbiBjb25maXJtIHRoYXQgdGhlIG1vdXNlZG93biBoYXBwZW5lZCBvbiB0aGlzIG9iamVjdCwgZmxhZyBmb3IgbGF0ZXIgZW1pdCBvZiBwb2ludGVydGFwXG4gICAgICAgICAgICAgICAgICAgIGlzTW91c2VUYXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzRG93bilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZGlzcGxheU9iamVjdCwgaXNSaWdodEJ1dHRvbiA/ICdyaWdodHVwb3V0c2lkZScgOiAnbW91c2V1cG91dHNpZGUnLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZG93biBzdGF0ZSBvZiB0aGUgdHJhY2tpbmcgZGF0YVxuICAgICAgICAgICAgaWYgKHRyYWNraW5nRGF0YSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNSaWdodEJ1dHRvbilcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNraW5nRGF0YS5yaWdodERvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tpbmdEYXRhLmxlZnREb3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUG9pbnRlcnMgYW5kIFRvdWNoZXMsIGFuZCBNb3VzZVxuICAgICAgICBpZiAoaGl0KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZGlzcGxheU9iamVjdCwgJ3BvaW50ZXJ1cCcsIGludGVyYWN0aW9uRXZlbnQpO1xuICAgICAgICAgICAgaWYgKGlzVG91Y2gpIHRoaXMuZGlzcGF0Y2hFdmVudChkaXNwbGF5T2JqZWN0LCAndG91Y2hlbmQnLCBpbnRlcmFjdGlvbkV2ZW50KTtcblxuICAgICAgICAgICAgaWYgKHRyYWNraW5nRGF0YSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBlbWl0IHBvaW50ZXJ0YXAgaWYgbm90IGEgbW91c2UsIG9yIGlmIHRoZSBtb3VzZSBibG9jayBkZWNpZGVkIGl0IHdhcyBhIHRhcFxuICAgICAgICAgICAgICAgIGlmICghaXNNb3VzZSB8fCBpc01vdXNlVGFwKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3QsICdwb2ludGVydGFwJywgaW50ZXJhY3Rpb25FdmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc1RvdWNoKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3QsICd0YXAnLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdG91Y2hlcyBhcmUgbm8gbG9uZ2VyIG92ZXIgKGlmIHRoZXkgZXZlciB3ZXJlKSB3aGVuIHdlIGdldCB0aGUgdG91Y2hlbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gc28gd2Ugc2hvdWxkIGVuc3VyZSB0aGF0IHdlIGRvbid0IGtlZXAgcHJldGVuZGluZyB0aGF0IHRoZXkgYXJlXG4gICAgICAgICAgICAgICAgICAgIHRyYWNraW5nRGF0YS5vdmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRyYWNraW5nRGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3QsICdwb2ludGVydXBvdXRzaWRlJywgaW50ZXJhY3Rpb25FdmVudCk7XG4gICAgICAgICAgICBpZiAoaXNUb3VjaCkgdGhpcy5kaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3QsICd0b3VjaGVuZG91dHNpZGUnLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPbmx5IHJlbW92ZSB0aGUgdHJhY2tpbmcgZGF0YSBpZiB0aGVyZSBpcyBubyBvdmVyL2Rvd24gc3RhdGUgc3RpbGwgYXNzb2NpYXRlZCB3aXRoIGl0XG4gICAgICAgIGlmICh0cmFja2luZ0RhdGEgJiYgdHJhY2tpbmdEYXRhLm5vbmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlbGV0ZSBkaXNwbGF5T2JqZWN0LnRyYWNrZWRQb2ludGVyc1tpZF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJcyBjYWxsZWQgd2hlbiB0aGUgcG9pbnRlciBtb3ZlcyBhY3Jvc3MgdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IG9yaWdpbmFsRXZlbnQgLSBUaGUgRE9NIGV2ZW50IG9mIGEgcG9pbnRlciBtb3ZpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uUG9pbnRlck1vdmUob3JpZ2luYWxFdmVudDogSW50ZXJhY3RpdmVQb2ludGVyRXZlbnQpOiB2b2lkXG4gICAge1xuICAgICAgICAvLyBpZiB3ZSBzdXBwb3J0IHRvdWNoIGV2ZW50cywgdGhlbiBvbmx5IHVzZSB0aG9zZSBmb3IgdG91Y2ggZXZlbnRzLCBub3QgcG9pbnRlciBldmVudHNcbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNUb3VjaEV2ZW50cyAmJiAob3JpZ2luYWxFdmVudCBhcyBQb2ludGVyRXZlbnQpLnBvaW50ZXJUeXBlID09PSAndG91Y2gnKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5ub3JtYWxpemVUb1BvaW50ZXJEYXRhKG9yaWdpbmFsRXZlbnQpO1xuXG4gICAgICAgIGlmIChldmVudHNbMF0ucG9pbnRlclR5cGUgPT09ICdtb3VzZScgfHwgZXZlbnRzWzBdLnBvaW50ZXJUeXBlID09PSAncGVuJylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZGlkTW92ZSA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGV2ZW50TGVuID0gZXZlbnRzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50TGVuOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzW2ldO1xuXG4gICAgICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkRhdGEgPSB0aGlzLmdldEludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZChldmVudCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGludGVyYWN0aW9uRXZlbnQgPSB0aGlzLmNvbmZpZ3VyZUludGVyYWN0aW9uRXZlbnRGb3JET01FdmVudCh0aGlzLmV2ZW50RGF0YSwgZXZlbnQsIGludGVyYWN0aW9uRGF0YSk7XG5cbiAgICAgICAgICAgIGludGVyYWN0aW9uRXZlbnQuZGF0YS5vcmlnaW5hbEV2ZW50ID0gb3JpZ2luYWxFdmVudDtcblxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzSW50ZXJhY3RpdmUoaW50ZXJhY3Rpb25FdmVudCwgdGhpcy5sYXN0T2JqZWN0UmVuZGVyZWQsIHRoaXMucHJvY2Vzc1BvaW50ZXJNb3ZlLCB0cnVlKTtcblxuICAgICAgICAgICAgdGhpcy5lbWl0KCdwb2ludGVybW92ZScsIGludGVyYWN0aW9uRXZlbnQpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LnBvaW50ZXJUeXBlID09PSAndG91Y2gnKSB0aGlzLmVtaXQoJ3RvdWNobW92ZScsIGludGVyYWN0aW9uRXZlbnQpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LnBvaW50ZXJUeXBlID09PSAnbW91c2UnIHx8IGV2ZW50LnBvaW50ZXJUeXBlID09PSAncGVuJykgdGhpcy5lbWl0KCdtb3VzZW1vdmUnLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudHNbMF0ucG9pbnRlclR5cGUgPT09ICdtb3VzZScpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3Vyc29yTW9kZSh0aGlzLmN1cnNvcik7XG5cbiAgICAgICAgICAgIC8vIFRPRE8gQlVHIGZvciBwYXJlbnRzIGludGVyYWN0aXZlIG9iamVjdCAoYm9yZGVyIG9yZGVyIGlzc3VlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIHRoZSByZXN1bHQgb2YgdGhlIHBvaW50ZXIgbW92ZSBjaGVjayBhbmQgZGlzcGF0Y2hlcyB0aGUgZXZlbnQgaWYgbmVlZCBiZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gaW50ZXJhY3Rpb25FdmVudCAtIFRoZSBpbnRlcmFjdGlvbiBldmVudCB3cmFwcGluZyB0aGUgRE9NIGV2ZW50XG4gICAgICogQHBhcmFtIHtQSVhJLkNvbnRhaW5lcnxQSVhJLlNwcml0ZXxQSVhJLlRpbGluZ1Nwcml0ZX0gZGlzcGxheU9iamVjdCAtIFRoZSBkaXNwbGF5IG9iamVjdCB0aGF0IHdhcyB0ZXN0ZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhpdCAtIHRoZSByZXN1bHQgb2YgdGhlIGhpdCB0ZXN0IG9uIHRoZSBkaXNwbGF5IG9iamVjdFxuICAgICAqL1xuICAgIHByaXZhdGUgcHJvY2Vzc1BvaW50ZXJNb3ZlKGludGVyYWN0aW9uRXZlbnQ6IEludGVyYWN0aW9uRXZlbnQsIGRpc3BsYXlPYmplY3Q6IERpc3BsYXlPYmplY3QsIGhpdDogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBpbnRlcmFjdGlvbkV2ZW50LmRhdGE7XG5cbiAgICAgICAgY29uc3QgaXNUb3VjaCA9IGRhdGEucG9pbnRlclR5cGUgPT09ICd0b3VjaCc7XG5cbiAgICAgICAgY29uc3QgaXNNb3VzZSA9IChkYXRhLnBvaW50ZXJUeXBlID09PSAnbW91c2UnIHx8IGRhdGEucG9pbnRlclR5cGUgPT09ICdwZW4nKTtcblxuICAgICAgICBpZiAoaXNNb3VzZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUG9pbnRlck92ZXJPdXQoaW50ZXJhY3Rpb25FdmVudCwgZGlzcGxheU9iamVjdCwgaGl0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5tb3ZlV2hlbkluc2lkZSB8fCBoaXQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChkaXNwbGF5T2JqZWN0LCAncG9pbnRlcm1vdmUnLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgICAgIGlmIChpc1RvdWNoKSB0aGlzLmRpc3BhdGNoRXZlbnQoZGlzcGxheU9iamVjdCwgJ3RvdWNobW92ZScsIGludGVyYWN0aW9uRXZlbnQpO1xuICAgICAgICAgICAgaWYgKGlzTW91c2UpIHRoaXMuZGlzcGF0Y2hFdmVudChkaXNwbGF5T2JqZWN0LCAnbW91c2Vtb3ZlJywgaW50ZXJhY3Rpb25FdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJcyBjYWxsZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBtb3ZlZCBvdXQgb2YgdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IG9yaWdpbmFsRXZlbnQgLSBUaGUgRE9NIGV2ZW50IG9mIGEgcG9pbnRlciBiZWluZyBtb3ZlZCBvdXRcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uUG9pbnRlck91dChvcmlnaW5hbEV2ZW50OiBJbnRlcmFjdGl2ZVBvaW50ZXJFdmVudCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIGlmIHdlIHN1cHBvcnQgdG91Y2ggZXZlbnRzLCB0aGVuIG9ubHkgdXNlIHRob3NlIGZvciB0b3VjaCBldmVudHMsIG5vdCBwb2ludGVyIGV2ZW50c1xuICAgICAgICBpZiAodGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzICYmIChvcmlnaW5hbEV2ZW50IGFzIFBvaW50ZXJFdmVudCkucG9pbnRlclR5cGUgPT09ICd0b3VjaCcpIHJldHVybjtcblxuICAgICAgICBjb25zdCBldmVudHMgPSB0aGlzLm5vcm1hbGl6ZVRvUG9pbnRlckRhdGEob3JpZ2luYWxFdmVudCk7XG5cbiAgICAgICAgLy8gT25seSBtb3VzZSBhbmQgcG9pbnRlciBjYW4gY2FsbCBvblBvaW50ZXJPdXQsIHNvIGV2ZW50cyB3aWxsIGFsd2F5cyBiZSBsZW5ndGggMVxuICAgICAgICBjb25zdCBldmVudCA9IGV2ZW50c1swXTtcblxuICAgICAgICBpZiAoZXZlbnQucG9pbnRlclR5cGUgPT09ICdtb3VzZScpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VPdmVyUmVuZGVyZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3Vyc29yTW9kZShudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGludGVyYWN0aW9uRGF0YSA9IHRoaXMuZ2V0SW50ZXJhY3Rpb25EYXRhRm9yUG9pbnRlcklkKGV2ZW50KTtcblxuICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkV2ZW50ID0gdGhpcy5jb25maWd1cmVJbnRlcmFjdGlvbkV2ZW50Rm9yRE9NRXZlbnQodGhpcy5ldmVudERhdGEsIGV2ZW50LCBpbnRlcmFjdGlvbkRhdGEpO1xuXG4gICAgICAgIGludGVyYWN0aW9uRXZlbnQuZGF0YS5vcmlnaW5hbEV2ZW50ID0gZXZlbnQ7XG5cbiAgICAgICAgdGhpcy5wcm9jZXNzSW50ZXJhY3RpdmUoaW50ZXJhY3Rpb25FdmVudCwgdGhpcy5sYXN0T2JqZWN0UmVuZGVyZWQsIHRoaXMucHJvY2Vzc1BvaW50ZXJPdmVyT3V0LCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5lbWl0KCdwb2ludGVyb3V0JywgaW50ZXJhY3Rpb25FdmVudCk7XG4gICAgICAgIGlmIChldmVudC5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJyB8fCBldmVudC5wb2ludGVyVHlwZSA9PT0gJ3BlbicpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnbW91c2VvdXQnLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIHdlIGNhbiBnZXQgdG91Y2hsZWF2ZSBldmVudHMgYWZ0ZXIgdG91Y2hlbmQsIHNvIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIGRvbid0XG4gICAgICAgICAgICAvLyBpbnRyb2R1Y2UgbWVtb3J5IGxlYWtzXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2VJbnRlcmFjdGlvbkRhdGFGb3JQb2ludGVySWQoaW50ZXJhY3Rpb25EYXRhLmlkZW50aWZpZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIHRoZSByZXN1bHQgb2YgdGhlIHBvaW50ZXIgb3Zlci9vdXQgY2hlY2sgYW5kIGRpc3BhdGNoZXMgdGhlIGV2ZW50IGlmIG5lZWQgYmVcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLkludGVyYWN0aW9uRXZlbnR9IGludGVyYWN0aW9uRXZlbnQgLSBUaGUgaW50ZXJhY3Rpb24gZXZlbnQgd3JhcHBpbmcgdGhlIERPTSBldmVudFxuICAgICAqIEBwYXJhbSB7UElYSS5Db250YWluZXJ8UElYSS5TcHJpdGV8UElYSS5UaWxpbmdTcHJpdGV9IGRpc3BsYXlPYmplY3QgLSBUaGUgZGlzcGxheSBvYmplY3QgdGhhdCB3YXMgdGVzdGVkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBoaXQgLSB0aGUgcmVzdWx0IG9mIHRoZSBoaXQgdGVzdCBvbiB0aGUgZGlzcGxheSBvYmplY3RcbiAgICAgKi9cbiAgICBwcml2YXRlIHByb2Nlc3NQb2ludGVyT3Zlck91dChpbnRlcmFjdGlvbkV2ZW50OiBJbnRlcmFjdGlvbkV2ZW50LCBkaXNwbGF5T2JqZWN0OiBEaXNwbGF5T2JqZWN0LCBoaXQ6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBkYXRhID0gaW50ZXJhY3Rpb25FdmVudC5kYXRhO1xuXG4gICAgICAgIGNvbnN0IGlkID0gaW50ZXJhY3Rpb25FdmVudC5kYXRhLmlkZW50aWZpZXI7XG5cbiAgICAgICAgY29uc3QgaXNNb3VzZSA9IChkYXRhLnBvaW50ZXJUeXBlID09PSAnbW91c2UnIHx8IGRhdGEucG9pbnRlclR5cGUgPT09ICdwZW4nKTtcblxuICAgICAgICBsZXQgdHJhY2tpbmdEYXRhID0gZGlzcGxheU9iamVjdC50cmFja2VkUG9pbnRlcnNbaWRdO1xuXG4gICAgICAgIC8vIGlmIHdlIGp1c3QgbW91c2VkIG92ZXIgdGhlIGRpc3BsYXkgb2JqZWN0LCB0aGVuIHdlIG5lZWQgdG8gdHJhY2sgdGhhdCBzdGF0ZVxuICAgICAgICBpZiAoaGl0ICYmICF0cmFja2luZ0RhdGEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRyYWNraW5nRGF0YSA9IGRpc3BsYXlPYmplY3QudHJhY2tlZFBvaW50ZXJzW2lkXSA9IG5ldyBJbnRlcmFjdGlvblRyYWNraW5nRGF0YShpZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhY2tpbmdEYXRhID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuICAgICAgICBpZiAoaGl0ICYmIHRoaXMubW91c2VPdmVyUmVuZGVyZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghdHJhY2tpbmdEYXRhLm92ZXIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHJhY2tpbmdEYXRhLm92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsYXlEaXNwYXRjaEV2ZW50KGRpc3BsYXlPYmplY3QsICdwb2ludGVyb3ZlcicsIGludGVyYWN0aW9uRXZlbnQpO1xuICAgICAgICAgICAgICAgIGlmIChpc01vdXNlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxheURpc3BhdGNoRXZlbnQoZGlzcGxheU9iamVjdCwgJ21vdXNlb3ZlcicsIGludGVyYWN0aW9uRXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gb25seSBjaGFuZ2UgdGhlIGN1cnNvciBpZiBpdCBoYXMgbm90IGFscmVhZHkgYmVlbiBjaGFuZ2VkIChieSBzb21ldGhpbmcgZGVlcGVyIGluIHRoZVxuICAgICAgICAgICAgLy8gZGlzcGxheSB0cmVlKVxuICAgICAgICAgICAgaWYgKGlzTW91c2UgJiYgdGhpcy5jdXJzb3IgPT09IG51bGwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSBkaXNwbGF5T2JqZWN0LmN1cnNvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFja2luZ0RhdGEub3ZlcilcbiAgICAgICAge1xuICAgICAgICAgICAgdHJhY2tpbmdEYXRhLm92ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChkaXNwbGF5T2JqZWN0LCAncG9pbnRlcm91dCcsIHRoaXMuZXZlbnREYXRhKTtcbiAgICAgICAgICAgIGlmIChpc01vdXNlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChkaXNwbGF5T2JqZWN0LCAnbW91c2VvdXQnLCBpbnRlcmFjdGlvbkV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIG1vdXNlIGRvd24gaW5mb3JtYXRpb24gZm9yIHRoZSBwb2ludGVyLCB0aGVuIGl0IGlzIHNhZmUgdG8gZGVsZXRlXG4gICAgICAgICAgICBpZiAodHJhY2tpbmdEYXRhLm5vbmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGRpc3BsYXlPYmplY3QudHJhY2tlZFBvaW50ZXJzW2lkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElzIGNhbGxlZCB3aGVuIHRoZSBwb2ludGVyIGlzIG1vdmVkIGludG8gdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IG9yaWdpbmFsRXZlbnQgLSBUaGUgRE9NIGV2ZW50IG9mIGEgcG9pbnRlciBidXR0b24gYmVpbmcgbW92ZWQgaW50byB0aGUgcmVuZGVyZXIgdmlld1xuICAgICAqL1xuICAgIHByaXZhdGUgb25Qb2ludGVyT3ZlcihvcmlnaW5hbEV2ZW50OiBJbnRlcmFjdGl2ZVBvaW50ZXJFdmVudCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMubm9ybWFsaXplVG9Qb2ludGVyRGF0YShvcmlnaW5hbEV2ZW50KTtcblxuICAgICAgICAvLyBPbmx5IG1vdXNlIGFuZCBwb2ludGVyIGNhbiBjYWxsIG9uUG9pbnRlck92ZXIsIHNvIGV2ZW50cyB3aWxsIGFsd2F5cyBiZSBsZW5ndGggMVxuICAgICAgICBjb25zdCBldmVudCA9IGV2ZW50c1swXTtcblxuICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkRhdGEgPSB0aGlzLmdldEludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZChldmVudCk7XG5cbiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25FdmVudCA9IHRoaXMuY29uZmlndXJlSW50ZXJhY3Rpb25FdmVudEZvckRPTUV2ZW50KHRoaXMuZXZlbnREYXRhLCBldmVudCwgaW50ZXJhY3Rpb25EYXRhKTtcblxuICAgICAgICBpbnRlcmFjdGlvbkV2ZW50LmRhdGEub3JpZ2luYWxFdmVudCA9IGV2ZW50O1xuXG4gICAgICAgIGlmIChldmVudC5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5tb3VzZU92ZXJSZW5kZXJlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVtaXQoJ3BvaW50ZXJvdmVyJywgaW50ZXJhY3Rpb25FdmVudCk7XG4gICAgICAgIGlmIChldmVudC5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJyB8fCBldmVudC5wb2ludGVyVHlwZSA9PT0gJ3BlbicpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnbW91c2VvdmVyJywgaW50ZXJhY3Rpb25FdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgSW50ZXJhY3Rpb25EYXRhIGZvciBhIGdpdmVuIHBvaW50ZXJJZC4gU3RvcmUgdGhhdCBkYXRhIGFzIHdlbGxcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IGV2ZW50IC0gTm9ybWFsaXplZCBwb2ludGVyIGV2ZW50LCBvdXRwdXQgZnJvbSBub3JtYWxpemVUb1BvaW50ZXJEYXRhXG4gICAgICogQHJldHVybiB7UElYSS5JbnRlcmFjdGlvbkRhdGF9IC0gSW50ZXJhY3Rpb24gZGF0YSBmb3IgdGhlIGdpdmVuIHBvaW50ZXIgaWRlbnRpZmllclxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0SW50ZXJhY3Rpb25EYXRhRm9yUG9pbnRlcklkKGV2ZW50OiBQb2ludGVyRXZlbnQpOiBJbnRlcmFjdGlvbkRhdGFcbiAgICB7XG4gICAgICAgIGNvbnN0IHBvaW50ZXJJZCA9IGV2ZW50LnBvaW50ZXJJZDtcblxuICAgICAgICBsZXQgaW50ZXJhY3Rpb25EYXRhO1xuXG4gICAgICAgIGlmIChwb2ludGVySWQgPT09IE1PVVNFX1BPSU5URVJfSUQgfHwgZXZlbnQucG9pbnRlclR5cGUgPT09ICdtb3VzZScpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9uRGF0YSA9IHRoaXMubW91c2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmVJbnRlcmFjdGlvbkRhdGFbcG9pbnRlcklkXSlcbiAgICAgICAge1xuICAgICAgICAgICAgaW50ZXJhY3Rpb25EYXRhID0gdGhpcy5hY3RpdmVJbnRlcmFjdGlvbkRhdGFbcG9pbnRlcklkXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9uRGF0YSA9IHRoaXMuaW50ZXJhY3Rpb25EYXRhUG9vbC5wb3AoKSB8fCBuZXcgSW50ZXJhY3Rpb25EYXRhKCk7XG4gICAgICAgICAgICBpbnRlcmFjdGlvbkRhdGEuaWRlbnRpZmllciA9IHBvaW50ZXJJZDtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSW50ZXJhY3Rpb25EYXRhW3BvaW50ZXJJZF0gPSBpbnRlcmFjdGlvbkRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZyb20gdGhlIGV2ZW50LCBzbyB0aGF0IHdlIGNhbiBtYWtlIHN1cmUgdGhhdCB0b3VjaC9wb2ludGVyIHNwZWNpZmljXG4gICAgICAgIC8vIGRhdGEgaXMgYXZhaWxhYmxlXG4gICAgICAgIGludGVyYWN0aW9uRGF0YS5jb3B5RXZlbnQoZXZlbnQpO1xuXG4gICAgICAgIHJldHVybiBpbnRlcmFjdGlvbkRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHVudXNlZCBJbnRlcmFjdGlvbkRhdGEgdG8gdGhlIHBvb2wsIGZvciBhIGdpdmVuIHBvaW50ZXJJZFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9pbnRlcklkIC0gSWRlbnRpZmllciBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgICAqL1xuICAgIHByaXZhdGUgcmVsZWFzZUludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZChwb2ludGVySWQ6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGludGVyYWN0aW9uRGF0YSA9IHRoaXMuYWN0aXZlSW50ZXJhY3Rpb25EYXRhW3BvaW50ZXJJZF07XG5cbiAgICAgICAgaWYgKGludGVyYWN0aW9uRGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWN0aXZlSW50ZXJhY3Rpb25EYXRhW3BvaW50ZXJJZF07XG4gICAgICAgICAgICBpbnRlcmFjdGlvbkRhdGEucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25EYXRhUG9vbC5wdXNoKGludGVyYWN0aW9uRGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmUgYW4gSW50ZXJhY3Rpb25FdmVudCB0byB3cmFwIGEgRE9NIFBvaW50ZXJFdmVudCBhbmQgSW50ZXJhY3Rpb25EYXRhXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbkV2ZW50fSBpbnRlcmFjdGlvbkV2ZW50IC0gVGhlIGV2ZW50IHRvIGJlIGNvbmZpZ3VyZWRcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IC0gVGhlIERPTSBldmVudCB0aGF0IHdpbGwgYmUgcGFpcmVkIHdpdGggdGhlIEludGVyYWN0aW9uRXZlbnRcbiAgICAgKiBAcGFyYW0ge1BJWEkuSW50ZXJhY3Rpb25EYXRhfSBpbnRlcmFjdGlvbkRhdGEgLSBUaGUgSW50ZXJhY3Rpb25EYXRhIHRoYXQgd2lsbCBiZSBwYWlyZWRcbiAgICAgKiAgICAgICAgd2l0aCB0aGUgSW50ZXJhY3Rpb25FdmVudFxuICAgICAqIEByZXR1cm4ge1BJWEkuSW50ZXJhY3Rpb25FdmVudH0gdGhlIGludGVyYWN0aW9uIGV2ZW50IHRoYXQgd2FzIHBhc3NlZCBpblxuICAgICAqL1xuICAgIHByaXZhdGUgY29uZmlndXJlSW50ZXJhY3Rpb25FdmVudEZvckRPTUV2ZW50KGludGVyYWN0aW9uRXZlbnQ6IEludGVyYWN0aW9uRXZlbnQsIHBvaW50ZXJFdmVudDogUG9pbnRlckV2ZW50LFxuICAgICAgICBpbnRlcmFjdGlvbkRhdGE6IEludGVyYWN0aW9uRGF0YVxuICAgICk6IEludGVyYWN0aW9uRXZlbnRcbiAgICB7XG4gICAgICAgIGludGVyYWN0aW9uRXZlbnQuZGF0YSA9IGludGVyYWN0aW9uRGF0YTtcblxuICAgICAgICB0aGlzLm1hcFBvc2l0aW9uVG9Qb2ludChpbnRlcmFjdGlvbkRhdGEuZ2xvYmFsLCBwb2ludGVyRXZlbnQuY2xpZW50WCwgcG9pbnRlckV2ZW50LmNsaWVudFkpO1xuXG4gICAgICAgIC8vIE5vdCByZWFsbHkgc3VyZSB3aHkgdGhpcyBpcyBoYXBwZW5pbmcsIGJ1dCBpdCdzIGhvdyBhIHByZXZpb3VzIHZlcnNpb24gaGFuZGxlZCB0aGluZ3NcbiAgICAgICAgaWYgKHBvaW50ZXJFdmVudC5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJylcbiAgICAgICAge1xuICAgICAgICAgICAgKHBvaW50ZXJFdmVudCBhcyBhbnkpLmdsb2JhbFggPSBpbnRlcmFjdGlvbkRhdGEuZ2xvYmFsLng7XG4gICAgICAgICAgICAocG9pbnRlckV2ZW50IGFzIGFueSkuZ2xvYmFsWSA9IGludGVyYWN0aW9uRGF0YS5nbG9iYWwueTtcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVyYWN0aW9uRGF0YS5vcmlnaW5hbEV2ZW50ID0gcG9pbnRlckV2ZW50O1xuICAgICAgICBpbnRlcmFjdGlvbkV2ZW50LnJlc2V0KCk7XG5cbiAgICAgICAgcmV0dXJuIGludGVyYWN0aW9uRXZlbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGF0IHRoZSBvcmlnaW5hbCBldmVudCBvYmplY3QgY29udGFpbnMgYWxsIGRhdGEgdGhhdCBhIHJlZ3VsYXIgcG9pbnRlciBldmVudCB3b3VsZCBoYXZlXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7VG91Y2hFdmVudHxNb3VzZUV2ZW50fFBvaW50ZXJFdmVudH0gZXZlbnQgLSBUaGUgb3JpZ2luYWwgZXZlbnQgZGF0YSBmcm9tIGEgdG91Y2ggb3IgbW91c2UgZXZlbnRcbiAgICAgKiBAcmV0dXJuIHtQb2ludGVyRXZlbnRbXX0gQW4gYXJyYXkgY29udGFpbmluZyBhIHNpbmdsZSBub3JtYWxpemVkIHBvaW50ZXIgZXZlbnQsIGluIHRoZSBjYXNlIG9mIGEgcG9pbnRlclxuICAgICAqICBvciBtb3VzZSBldmVudCwgb3IgYSBtdWx0aXBsZSBub3JtYWxpemVkIHBvaW50ZXIgZXZlbnRzIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBjaGFuZ2VkIHRvdWNoZXNcbiAgICAgKi9cbiAgICBwcml2YXRlIG5vcm1hbGl6ZVRvUG9pbnRlckRhdGEoZXZlbnQ6IEludGVyYWN0aXZlUG9pbnRlckV2ZW50KTogUG9pbnRlckV2ZW50W11cbiAgICB7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRFdmVudHMgPSBbXTtcblxuICAgICAgICBpZiAodGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzICYmIGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudClcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxpID0gZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpIDwgbGk7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldIGFzIFBpeGlUb3VjaDtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG91Y2guYnV0dG9uID09PSAndW5kZWZpbmVkJykgdG91Y2guYnV0dG9uID0gZXZlbnQudG91Y2hlcy5sZW5ndGggPyAxIDogMDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvdWNoLmJ1dHRvbnMgPT09ICd1bmRlZmluZWQnKSB0b3VjaC5idXR0b25zID0gZXZlbnQudG91Y2hlcy5sZW5ndGggPyAxIDogMDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvdWNoLmlzUHJpbWFyeSA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaC5pc1ByaW1hcnkgPSBldmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMSAmJiBldmVudC50eXBlID09PSAndG91Y2hzdGFydCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG91Y2gud2lkdGggPT09ICd1bmRlZmluZWQnKSB0b3VjaC53aWR0aCA9IHRvdWNoLnJhZGl1c1ggfHwgMTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvdWNoLmhlaWdodCA9PT0gJ3VuZGVmaW5lZCcpIHRvdWNoLmhlaWdodCA9IHRvdWNoLnJhZGl1c1kgfHwgMTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvdWNoLnRpbHRYID09PSAndW5kZWZpbmVkJykgdG91Y2gudGlsdFggPSAwO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG91Y2gudGlsdFkgPT09ICd1bmRlZmluZWQnKSB0b3VjaC50aWx0WSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC5wb2ludGVyVHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHRvdWNoLnBvaW50ZXJUeXBlID0gJ3RvdWNoJztcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvdWNoLnBvaW50ZXJJZCA9PT0gJ3VuZGVmaW5lZCcpIHRvdWNoLnBvaW50ZXJJZCA9IHRvdWNoLmlkZW50aWZpZXIgfHwgMDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvdWNoLnByZXNzdXJlID09PSAndW5kZWZpbmVkJykgdG91Y2gucHJlc3N1cmUgPSB0b3VjaC5mb3JjZSB8fCAwLjU7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC50d2lzdCA9PT0gJ3VuZGVmaW5lZCcpIHRvdWNoLnR3aXN0ID0gMDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvdWNoLnRhbmdlbnRpYWxQcmVzc3VyZSA9PT0gJ3VuZGVmaW5lZCcpIHRvdWNoLnRhbmdlbnRpYWxQcmVzc3VyZSA9IDA7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIHRoZXNlLCBhcyBsYXllclgvWSBpcyBub3QgYSBzdGFuZGFyZCwgaXMgZGVwcmVjYXRlZCwgaGFzIHVuZXZlblxuICAgICAgICAgICAgICAgIC8vIHN1cHBvcnQsIGFuZCB0aGUgZmlsbCBpbnMgYXJlIG5vdCBxdWl0ZSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgIC8vIG9mZnNldFgvWSBtaWdodCBiZSBva2F5LCBidXQgaXMgbm90IHRoZSBzYW1lIGFzIGNsaWVudFgvWSB3aGVuIHRoZSBjYW52YXMncyB0b3BcbiAgICAgICAgICAgICAgICAvLyBsZWZ0IGlzIG5vdCAwLDAgb24gdGhlIHBhZ2VcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvdWNoLmxheWVyWCA9PT0gJ3VuZGVmaW5lZCcpIHRvdWNoLmxheWVyWCA9IHRvdWNoLm9mZnNldFggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG91Y2gubGF5ZXJZID09PSAndW5kZWZpbmVkJykgdG91Y2gubGF5ZXJZID0gdG91Y2gub2Zmc2V0WSA9IHRvdWNoLmNsaWVudFk7XG5cbiAgICAgICAgICAgICAgICAvLyBtYXJrIHRoZSB0b3VjaCBhcyBub3JtYWxpemVkLCBqdXN0IHNvIHRoYXQgd2Uga25vdyB3ZSBkaWQgaXRcbiAgICAgICAgICAgICAgICB0b3VjaC5pc05vcm1hbGl6ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZEV2ZW50cy5wdXNoKHRvdWNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBhcHBhcmVudGx5IFBvaW50ZXJFdmVudCBzdWJjbGFzc2VzIE1vdXNlRXZlbnQsIHNvIHlheVxuICAgICAgICBlbHNlIGlmIChldmVudCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgKCF0aGlzLnN1cHBvcnRzUG9pbnRlckV2ZW50cyB8fCAhKGV2ZW50IGluc3RhbmNlb2Ygd2luZG93LlBvaW50ZXJFdmVudCkpKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wRXZlbnQgPSBldmVudCBhcyBQaXhpUG9pbnRlckV2ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC5pc1ByaW1hcnkgPT09ICd1bmRlZmluZWQnKSB0ZW1wRXZlbnQuaXNQcmltYXJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LndpZHRoID09PSAndW5kZWZpbmVkJykgdGVtcEV2ZW50LndpZHRoID0gMTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LmhlaWdodCA9PT0gJ3VuZGVmaW5lZCcpIHRlbXBFdmVudC5oZWlnaHQgPSAxO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQudGlsdFggPT09ICd1bmRlZmluZWQnKSB0ZW1wRXZlbnQudGlsdFggPSAwO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQudGlsdFkgPT09ICd1bmRlZmluZWQnKSB0ZW1wRXZlbnQudGlsdFkgPSAwO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQucG9pbnRlclR5cGUgPT09ICd1bmRlZmluZWQnKSB0ZW1wRXZlbnQucG9pbnRlclR5cGUgPSAnbW91c2UnO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQucG9pbnRlcklkID09PSAndW5kZWZpbmVkJykgdGVtcEV2ZW50LnBvaW50ZXJJZCA9IE1PVVNFX1BPSU5URVJfSUQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC5wcmVzc3VyZSA9PT0gJ3VuZGVmaW5lZCcpIHRlbXBFdmVudC5wcmVzc3VyZSA9IDAuNTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LnR3aXN0ID09PSAndW5kZWZpbmVkJykgdGVtcEV2ZW50LnR3aXN0ID0gMDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LnRhbmdlbnRpYWxQcmVzc3VyZSA9PT0gJ3VuZGVmaW5lZCcpIHRlbXBFdmVudC50YW5nZW50aWFsUHJlc3N1cmUgPSAwO1xuXG4gICAgICAgICAgICAvLyBtYXJrIHRoZSBtb3VzZSBldmVudCBhcyBub3JtYWxpemVkLCBqdXN0IHNvIHRoYXQgd2Uga25vdyB3ZSBkaWQgaXRcbiAgICAgICAgICAgIHRlbXBFdmVudC5pc05vcm1hbGl6ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBub3JtYWxpemVkRXZlbnRzLnB1c2godGVtcEV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRFdmVudHMucHVzaChldmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9ybWFsaXplZEV2ZW50cyBhcyBQb2ludGVyRXZlbnRbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgaW50ZXJhY3Rpb24gbWFuYWdlclxuICAgICAqXG4gICAgICovXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudHMoKTtcblxuICAgICAgICB0aGlzLnJlbW92ZVRpY2tlckxpc3RlbmVyKCk7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcblxuICAgICAgICB0aGlzLm1vdXNlID0gbnVsbDtcblxuICAgICAgICB0aGlzLmV2ZW50RGF0YSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMub25Qb2ludGVyRG93biA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvY2Vzc1BvaW50ZXJEb3duID0gbnVsbDtcblxuICAgICAgICB0aGlzLm9uUG9pbnRlclVwID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcm9jZXNzUG9pbnRlclVwID0gbnVsbDtcblxuICAgICAgICB0aGlzLm9uUG9pbnRlckNhbmNlbCA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvY2Vzc1BvaW50ZXJDYW5jZWwgPSBudWxsO1xuXG4gICAgICAgIHRoaXMub25Qb2ludGVyTW92ZSA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvY2Vzc1BvaW50ZXJNb3ZlID0gbnVsbDtcblxuICAgICAgICB0aGlzLm9uUG9pbnRlck91dCA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvY2Vzc1BvaW50ZXJPdmVyT3V0ID0gbnVsbDtcblxuICAgICAgICB0aGlzLm9uUG9pbnRlck92ZXIgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuc2VhcmNoID0gbnVsbDtcbiAgICB9XG59XG5cbmludGVyZmFjZSBQaXhpUG9pbnRlckV2ZW50IGV4dGVuZHMgUG9pbnRlckV2ZW50XG57XG4gICAgaXNQcmltYXJ5OiBib29sZWFuO1xuICAgIHdpZHRoOiBudW1iZXI7XG4gICAgaGVpZ2h0OiBudW1iZXI7XG4gICAgdGlsdFg6IG51bWJlcjtcbiAgICB0aWx0WTogbnVtYmVyO1xuICAgIHBvaW50ZXJUeXBlOiBzdHJpbmc7XG4gICAgcG9pbnRlcklkOiBudW1iZXI7XG4gICAgcHJlc3N1cmU6IG51bWJlcjtcbiAgICB0d2lzdDogbnVtYmVyO1xuICAgIHRhbmdlbnRpYWxQcmVzc3VyZTogbnVtYmVyO1xuICAgIGlzTm9ybWFsaXplZDogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFBpeGlUb3VjaCBleHRlbmRzIFRvdWNoXG57XG4gICAgYnV0dG9uOiBudW1iZXI7XG4gICAgYnV0dG9uczogbnVtYmVyO1xuICAgIGlzUHJpbWFyeTogYm9vbGVhbjtcbiAgICB3aWR0aDogbnVtYmVyO1xuICAgIGhlaWdodDogbnVtYmVyO1xuICAgIHRpbHRYOiBudW1iZXI7XG4gICAgdGlsdFk6IG51bWJlcjtcbiAgICBwb2ludGVyVHlwZTogc3RyaW5nO1xuICAgIHBvaW50ZXJJZDogbnVtYmVyO1xuICAgIHByZXNzdXJlOiBudW1iZXI7XG4gICAgdHdpc3Q6IG51bWJlcjtcbiAgICB0YW5nZW50aWFsUHJlc3N1cmU6IG51bWJlcjtcbiAgICBsYXllclg6IG51bWJlcjtcbiAgICBsYXllclk6IG51bWJlcjtcbiAgICBvZmZzZXRYOiBudW1iZXI7XG4gICAgb2Zmc2V0WTogbnVtYmVyO1xuICAgIGlzTm9ybWFsaXplZDogYm9vbGVhbjtcbn1cbiIsICIvKipcbiAqIEEgUnVubmVyIGlzIGEgaGlnaGx5IHBlcmZvcm1hbnQgYW5kIHNpbXBsZSBhbHRlcm5hdGl2ZSB0byBzaWduYWxzLiBCZXN0IHVzZWQgaW4gc2l0dWF0aW9uc1xuICogd2hlcmUgZXZlbnRzIGFyZSBkaXNwYXRjaGVkIHRvIG1hbnkgb2JqZWN0cyBhdCBoaWdoIGZyZXF1ZW5jeSAoc2F5IGV2ZXJ5IGZyYW1lISlcbiAqXG4gKlxuICogbGlrZSBhIHNpZ25hbC4uXG4gKiBgYGBcbiAqIGltcG9ydCB7IFJ1bm5lciB9IGZyb20gJ0BwaXhpL3J1bm5lcic7XG4gKlxuICogY29uc3QgbXlPYmplY3QgPSB7XG4gKiAgICAgbG9hZGVkOiBuZXcgUnVubmVyKCdsb2FkZWQnKVxuICogfVxuICpcbiAqIGNvbnN0IGxpc3RlbmVyID0ge1xuICogICAgIGxvYWRlZDogZnVuY3Rpb24oKXtcbiAqICAgICAgICAgLy8gdGhpblxuICogICAgIH1cbiAqIH1cbiAqXG4gKiBteU9iamVjdC51cGRhdGUuYWRkKGxpc3RlbmVyKTtcbiAqXG4gKiBteU9iamVjdC5sb2FkZWQuZW1pdCgpO1xuICogYGBgXG4gKlxuICogT3IgZm9yIGhhbmRsaW5nIGNhbGxpbmcgdGhlIHNhbWUgZnVuY3Rpb24gb24gbWFueSBpdGVtc1xuICogYGBgXG4gKiBpbXBvcnQgeyBSdW5uZXIgfSBmcm9tICdAcGl4aS9ydW5uZXInO1xuICpcbiAqIGNvbnN0IG15R2FtZSA9IHtcbiAqICAgICB1cGRhdGU6IG5ldyBSdW5uZXIoJ3VwZGF0ZScpXG4gKiB9XG4gKlxuICogY29uc3QgZ2FtZU9iamVjdCA9IHtcbiAqICAgICB1cGRhdGU6IGZ1bmN0aW9uKHRpbWUpe1xuICogICAgICAgICAvLyB1cGRhdGUgbXkgZ2FtZXkgc3RhdGVcbiAqICAgICB9XG4gKiB9XG4gKlxuICogbXlHYW1lLnVwZGF0ZS5hZGQoZ2FtZU9iamVjdDEpO1xuICpcbiAqIG15R2FtZS51cGRhdGUuZW1pdCh0aW1lKTtcbiAqIGBgYFxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgUnVubmVyXG57XG4gICAgcHVibGljIGl0ZW1zOiBhbnlbXTtcbiAgICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfYWxpYXNDb3VudDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gdGhlIGZ1bmN0aW9uIG5hbWUgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIG9uIHRoZSBsaXN0ZW5lcnMgYWRkZWQgdG8gdGhpcyBSdW5uZXIuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nKVxuICAgIHtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fYWxpYXNDb3VudCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGF0Y2gvQnJvYWRjYXN0IFJ1bm5lciB0byBhbGwgbGlzdGVuZXJzIGFkZGVkIHRvIHRoZSBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gey4uLmFueX0gcGFyYW1zIC0gb3B0aW9uYWwgcGFyYW1ldGVycyB0byBwYXNzIHRvIGVhY2ggbGlzdGVuZXJcbiAgICAgKiBAcmV0dXJuIHtQSVhJLlJ1bm5lcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZW1pdChhMD86IHVua25vd24sIGExPzogdW5rbm93biwgYTI/OiB1bmtub3duLCBhMz86IHVua25vd24sXG4gICAgICAgIGE0PzogdW5rbm93biwgYTU/OiB1bmtub3duLCBhNj86IHVua25vd24sIGE3PzogdW5rbm93bik6IHRoaXNcbiAgICB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gOClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXggYXJndW1lbnRzIHJlYWNoZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgaXRlbXMgfSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fYWxpYXNDb3VudCsrO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgaXRlbXNbaV1bbmFtZV0oYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpdGVtcyA9PT0gdGhpcy5pdGVtcylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fYWxpYXNDb3VudC0tO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbnN1cmVOb25BbGlhc2VkSXRlbXMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2FsaWFzQ291bnQgPiAwICYmIHRoaXMuaXRlbXMubGVuZ3RoID4gMSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fYWxpYXNDb3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5zbGljZSgwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGxpc3RlbmVyIHRvIHRoZSBSdW5uZXJcbiAgICAgKlxuICAgICAqIFJ1bm5lcnMgZG8gbm90IG5lZWQgdG8gaGF2ZSBzY29wZSBvciBmdW5jdGlvbnMgcGFzc2VkIHRvIHRoZW0uXG4gICAgICogQWxsIHRoYXQgaXMgcmVxdWlyZWQgaXMgdG8gcGFzcyB0aGUgbGlzdGVuaW5nIG9iamVjdCBhbmQgZW5zdXJlIHRoYXQgaXQgaGFzIGNvbnRhaW5zIGEgZnVuY3Rpb24gdGhhdCBoYXMgdGhlIHNhbWUgbmFtZVxuICAgICAqIGFzIHRoZSBuYW1lIHByb3ZpZGVkIHRvIHRoZSBSdW5uZXIgd2hlbiBpdCB3YXMgY3JlYXRlZC5cbiAgICAgKlxuICAgICAqIEVnIEEgbGlzdGVuZXIgcGFzc2VkIHRvIHRoaXMgUnVubmVyIHdpbGwgcmVxdWlyZSBhICdjb21wbGV0ZScgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBpbXBvcnQgeyBSdW5uZXIgfSBmcm9tICdAcGl4aS9ydW5uZXInO1xuICAgICAqXG4gICAgICogY29uc3QgY29tcGxldGUgPSBuZXcgUnVubmVyKCdjb21wbGV0ZScpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhlIHNjb3BlIHVzZWQgd2lsbCBiZSB0aGUgb2JqZWN0IGl0c2VsZi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7YW55fSBpdGVtIC0gVGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgbGlzdGVuaW5nLlxuICAgICAqIEByZXR1cm4ge1BJWEkuUnVubmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBhZGQoaXRlbTogdW5rbm93bik6IHRoaXNcbiAgICB7XG4gICAgICAgIGlmICgoaXRlbSBhcyBhbnkpW3RoaXMuX25hbWVdKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZU5vbkFsaWFzZWRJdGVtcygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoaXRlbSk7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBzaW5nbGUgbGlzdGVuZXIgZnJvbSB0aGUgZGlzcGF0Y2ggcXVldWUuXG4gICAgICogQHBhcmFtIHthbnl9IGl0ZW0gLSBUaGUgbGlzdGVuciB0aGF0IHlvdSB3b3VsZCBsaWtlIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlJ1bm5lcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVtb3ZlKGl0ZW06IHVua25vd24pOiB0aGlzXG4gICAge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuaXRlbXMuaW5kZXhPZihpdGVtKTtcblxuICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZU5vbkFsaWFzZWRJdGVtcygpO1xuICAgICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBsaXN0ZW5lciBpcyBhbHJlYWR5IGluIHRoZSBSdW5uZXJcbiAgICAgKiBAcGFyYW0ge2FueX0gaXRlbSAtIFRoZSBsaXN0ZW5lciB0aGF0IHlvdSB3b3VsZCBsaWtlIHRvIGNoZWNrLlxuICAgICAqL1xuICAgIHB1YmxpYyBjb250YWlucyhpdGVtOiB1bmtub3duKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuaW5kZXhPZihpdGVtKSAhPT0gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgZnJvbSB0aGUgUnVubmVyXG4gICAgICogQHJldHVybiB7UElYSS5SdW5uZXJ9XG4gICAgICovXG4gICAgcHVibGljIHJlbW92ZUFsbCgpOiB0aGlzXG4gICAge1xuICAgICAgICB0aGlzLmVuc3VyZU5vbkFsaWFzZWRJdGVtcygpO1xuICAgICAgICB0aGlzLml0ZW1zLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCByZWZlcmVuY2VzLCBkb24ndCB1c2UgYWZ0ZXIgdGhpcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnJlbW92ZUFsbCgpO1xuICAgICAgICB0aGlzLml0ZW1zID0gbnVsbDtcbiAgICAgICAgdGhpcy5fbmFtZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZXJlIGFyZSBubyB0aGlzIFJ1bm5lciBjb250YWlucyBubyBsaXN0ZW5lcnNcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgcHVibGljIGdldCBlbXB0eSgpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGggPT09IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHJ1bm5lci5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJ1bm5lci5wcm90b3R5cGUsIHtcbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgYGVtaXRgXG4gICAgICogQG1lbWJlcm9mIFBJWEkuUnVubmVyI1xuICAgICAqIEBtZXRob2QgZGlzcGF0Y2hcbiAgICAgKiBAc2VlIFBJWEkuUnVubmVyI2VtaXRcbiAgICAgKi9cbiAgICBkaXNwYXRjaDogeyB2YWx1ZTogUnVubmVyLnByb3RvdHlwZS5lbWl0IH0sXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGBlbWl0YFxuICAgICAqIEBtZW1iZXJvZiBQSVhJLlJ1bm5lciNcbiAgICAgKiBAbWV0aG9kIHJ1blxuICAgICAqIEBzZWUgUElYSS5SdW5uZXIjZW1pdFxuICAgICAqL1xuICAgIHJ1bjogeyB2YWx1ZTogUnVubmVyLnByb3RvdHlwZS5lbWl0IH0sXG59KTtcbiIsICJpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcbmltcG9ydCB7IEVOViB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBpc01vYmlsZSB9IGZyb20gJ0BwaXhpL3V0aWxzJztcblxuLyoqXG4gKiBUaGUgbWF4aW11bSBzdXBwb3J0IGZvciB1c2luZyBXZWJHTC4gSWYgYSBkZXZpY2UgZG9lcyBub3RcbiAqIHN1cHBvcnQgV2ViR0wgdmVyc2lvbiwgZm9yIGluc3RhbmNlIFdlYkdMIDIsIGl0IHdpbGwgc3RpbGxcbiAqIGF0dGVtcHQgdG8gZmFsbGJhY2sgc3VwcG9ydCB0byBXZWJHTCAxLiBJZiB5b3Ugd2FudCB0b1xuICogZXhwbGljaXRseSByZW1vdmUgZmVhdHVyZSBzdXBwb3J0IHRvIHRhcmdldCBhIG1vcmUgc3RhYmxlXG4gKiBiYXNlbGluZSwgcHJlZmVyIGEgbG93ZXIgZW52aXJvbm1lbnQuXG4gKlxuICogRHVlIHRvIHtAbGluayBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD05MzQ4MjN8YnVnIGluIGNocm9taXVtfVxuICogd2UgZGlzYWJsZSB3ZWJnbDIgYnkgZGVmYXVsdCBmb3IgYWxsIG5vbi1hcHBsZSBtb2JpbGUgZGV2aWNlcy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbmFtZSBQUkVGRVJfRU5WXG4gKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0IFBJWEkuRU5WLldFQkdMMlxuICovXG5zZXR0aW5ncy5QUkVGRVJfRU5WID0gaXNNb2JpbGUuYW55ID8gRU5WLldFQkdMIDogRU5WLldFQkdMMjtcblxuLyoqXG4gKiBJZiBzZXQgdG8gYHRydWVgLCAqb25seSogVGV4dHVyZXMgYW5kIEJhc2VUZXh0dXJlIG9iamVjdHMgc3RvcmVkXG4gKiBpbiB0aGUgY2FjaGVzICh7QGxpbmsgUElYSS51dGlscy5UZXh0dXJlQ2FjaGUgVGV4dHVyZUNhY2hlfSBhbmRcbiAqIHtAbGluayBQSVhJLnV0aWxzLkJhc2VUZXh0dXJlQ2FjaGUgQmFzZVRleHR1cmVDYWNoZX0pIGNhbiBiZVxuICogdXNlZCB3aGVuIGNhbGxpbmcge0BsaW5rIFBJWEkuVGV4dHVyZS5mcm9tIFRleHR1cmUuZnJvbX0gb3JcbiAqIHtAbGluayBQSVhJLkJhc2VUZXh0dXJlLmZyb20gQmFzZVRleHR1cmUuZnJvbX0uXG4gKiBPdGhlcndpc2UsIHRoZXNlIGBmcm9tYCBjYWxscyB0aHJvdyBhbiBleGNlcHRpb24uIFVzaW5nIHRoaXMgcHJvcGVydHlcbiAqIGNhbiBiZSB1c2VmdWwgaWYgeW91IHdhbnQgdG8gZW5mb3JjZSBwcmVsb2FkaW5nIGFsbCBhc3NldHMgd2l0aFxuICoge0BsaW5rIFBJWEkuTG9hZGVyIExvYWRlcn0uXG4gKlxuICogQHN0YXRpY1xuICogQG5hbWUgU1RSSUNUX1RFWFRVUkVfQ0FDSEVcbiAqIEBtZW1iZXJvZiBQSVhJLnNldHRpbmdzXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0IGZhbHNlXG4gKi9cbnNldHRpbmdzLlNUUklDVF9URVhUVVJFX0NBQ0hFID0gZmFsc2U7XG5cbmV4cG9ydCB7IHNldHRpbmdzIH07XG4iLCAiaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tICcuL1Jlc291cmNlJztcblxuaW1wb3J0IHR5cGUgeyBJSW1hZ2VSZXNvdXJjZU9wdGlvbnMgfSBmcm9tICcuL0ltYWdlUmVzb3VyY2UnO1xuaW1wb3J0IHR5cGV7IElTaXplIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgdHlwZXsgSUN1YmVSZXNvdXJjZU9wdGlvbnMgfSBmcm9tICcuL0N1YmVSZXNvdXJjZSc7XG5pbXBvcnQgdHlwZXsgSVNWR1Jlc291cmNlT3B0aW9ucyB9IGZyb20gJy4vU1ZHUmVzb3VyY2UnO1xuaW1wb3J0IHR5cGV7IElWaWRlb1Jlc291cmNlT3B0aW9ucyB9IGZyb20gJy4vVmlkZW9SZXNvdXJjZSc7XG5cbi8qKlxuICogQWxsb3cgZmxleGlibGUgb3B0aW9ucyBmb3IgcmVzb3VyY2UgcGx1Z2luc1xuICovXG5leHBvcnQgdHlwZSBJUmVzb3VyY2VQbHVnaW5PcHRpb25zID0geyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuLyoqXG4gKiBBbGwgYWxsb3dhYmxlIG9wdGlvbnMgZm9yIGF1dG9EZXRlY3RSZXNvdXJjZVxuICovXG5leHBvcnQgdHlwZSBJQXV0b0RldGVjdE9wdGlvbnMgPSBJU2l6ZVxuICAgIHwgSUN1YmVSZXNvdXJjZU9wdGlvbnNcbiAgICB8IElJbWFnZVJlc291cmNlT3B0aW9uc1xuICAgIHwgSVNWR1Jlc291cmNlT3B0aW9uc1xuICAgIHwgSVZpZGVvUmVzb3VyY2VPcHRpb25zXG4gICAgfCBJUmVzb3VyY2VQbHVnaW5PcHRpb25zO1xuXG4vKipcbiAqIFNoYXBlIG9mIHN1cHBvcnRlZCByZXNvdXJjZSBwbHVnaW5zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlUGx1Z2luXG57XG4gICAgdGVzdChzb3VyY2U6IHVua25vd24sIGV4dGVuc2lvbjogc3RyaW5nKTogYm9vbGVhbjtcbiAgICBuZXcgKHNvdXJjZTogYW55LCBvcHRpb25zPzogYW55KTogUmVzb3VyY2U7XG59XG5cbi8qKlxuICogQ29sbGVjdGlvbiBvZiBpbnN0YWxsZWQgcmVzb3VyY2UgdHlwZXMsIGNsYXNzIG11c3QgZXh0ZW5kIHtAbGluayBQSVhJLnJlc291cmNlcy5SZXNvdXJjZX0uXG4gKiBAZXhhbXBsZVxuICogY2xhc3MgQ3VzdG9tUmVzb3VyY2UgZXh0ZW5kcyBQSVhJLnJlc291cmNlcy5SZXNvdXJjZSB7XG4gKiAgIC8vIE1VU1QgaGF2ZSBzb3VyY2UsIG9wdGlvbnMgY29uc3RydWN0b3Igc2lnbmF0dXJlXG4gKiAgIC8vIGZvciBhdXRvLWRldGVjdGVkIHJlc291cmNlcyB0byBiZSBjcmVhdGVkLlxuICogICBjb25zdHJ1Y3Rvcihzb3VyY2UsIG9wdGlvbnMpIHtcbiAqICAgICBzdXBlcigpO1xuICogICB9XG4gKiAgIHVwbG9hZChyZW5kZXJlciwgYmFzZVRleHR1cmUsIGdsVGV4dHVyZSkge1xuICogICAgIC8vIHVwbG9hZCB3aXRoIEdMXG4gKiAgICAgcmV0dXJuIHRydWU7XG4gKiAgIH1cbiAqICAgLy8gdXNlZCB0byBhdXRvLWRldGVjdCByZXNvdXJjZVxuICogICBzdGF0aWMgdGVzdChzb3VyY2UsIGV4dGVuc2lvbikge1xuICogICAgIHJldHVybiBleHRlbnNpb24gPT09ICd4eXonfHwgc291cmNlIGluc3RhbmNlb2YgU29tZUNsYXNzO1xuICogICB9XG4gKiB9XG4gKiAvLyBJbnN0YWxsIHRoZSBuZXcgcmVzb3VyY2UgdHlwZVxuICogUElYSS5yZXNvdXJjZXMuSU5TVEFMTEVELnB1c2goQ3VzdG9tUmVzb3VyY2UpO1xuICpcbiAqIEBuYW1lIFBJWEkucmVzb3VyY2VzLklOU1RBTExFRFxuICogQHR5cGUge0FycmF5PCo+fVxuICogQHN0YXRpY1xuICogQHJlYWRvbmx5XG4gKi9cbmV4cG9ydCBjb25zdCBJTlNUQUxMRUQ6IEFycmF5PElSZXNvdXJjZVBsdWdpbj4gPSBbXTtcblxuLyoqXG4gKiBDcmVhdGUgYSByZXNvdXJjZSBlbGVtZW50IGZyb20gYSBzaW5nbGUgc291cmNlIGVsZW1lbnQuIFRoaXNcbiAqIGF1dG8tZGV0ZWN0cyB3aGljaCB0eXBlIG9mIHJlc291cmNlIHRvIGNyZWF0ZS4gQWxsIHJlc291cmNlcyB0aGF0XG4gKiBhcmUgYXV0by1kZXRlY3RhYmxlIG11c3QgaGF2ZSBhIHN0YXRpYyBgdGVzdGAgbWV0aG9kIGFuZCBhIGNvbnN0cnVjdG9yXG4gKiB3aXRoIHRoZSBhcmd1bWVudHMgYChzb3VyY2UsIG9wdGlvbnM/KWAuIEN1cnJlbnRseSwgdGhlIHN1cHBvcnRlZFxuICogcmVzb3VyY2VzIGZvciBhdXRvLWRldGVjdGlvbiBpbmNsdWRlOlxuICogIC0ge0BsaW5rIFBJWEkucmVzb3VyY2VzLkltYWdlUmVzb3VyY2V9XG4gKiAgLSB7QGxpbmsgUElYSS5yZXNvdXJjZXMuQ2FudmFzUmVzb3VyY2V9XG4gKiAgLSB7QGxpbmsgUElYSS5yZXNvdXJjZXMuVmlkZW9SZXNvdXJjZX1cbiAqICAtIHtAbGluayBQSVhJLnJlc291cmNlcy5TVkdSZXNvdXJjZX1cbiAqICAtIHtAbGluayBQSVhJLnJlc291cmNlcy5CdWZmZXJSZXNvdXJjZX1cbiAqIEBzdGF0aWNcbiAqIEBmdW5jdGlvbiBQSVhJLnJlc291cmNlcy5hdXRvRGV0ZWN0UmVzb3VyY2VcbiAqIEBwYXJhbSB7c3RyaW5nfCp9IHNvdXJjZSAtIFJlc291cmNlIHNvdXJjZSwgdGhpcyBjYW4gYmUgdGhlIFVSTCB0byB0aGUgcmVzb3VyY2UsXG4gKiAgICAgICAgYSB0eXBlZC1hcnJheSAoZm9yIEJ1ZmZlclJlc291cmNlKSwgSFRNTFZpZGVvRWxlbWVudCwgU1ZHIGRhdGEtdXJpXG4gKiAgICAgICAgb3IgYW55IG90aGVyIHJlc291cmNlIHRoYXQgY2FuIGJlIGF1dG8tZGV0ZWN0ZWQuIElmIG5vdCByZXNvdXJjZSBpc1xuICogICAgICAgIGRldGVjdGVkLCBpdCdzIGFzc3VtZWQgdG8gYmUgYW4gSW1hZ2VSZXNvdXJjZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBQYXNzLXRocm91Z2ggb3B0aW9ucyB0byB1c2UgZm9yIFJlc291cmNlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGhdIC0gV2lkdGggb2YgQnVmZmVyUmVzb3VyY2Ugb3IgU1ZHIHJhc3Rlcml6YXRpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5oZWlnaHRdIC0gSGVpZ2h0IG9mIEJ1ZmZlclJlc291cmNlIG9yIFNWRyByYXN0ZXJpemF0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmF1dG9Mb2FkPXRydWVdIC0gSW1hZ2UsIFNWRyBhbmQgVmlkZW8gZmxhZyB0byBzdGFydCBsb2FkaW5nXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuc2NhbGU9MV0gLSBTVkcgc291cmNlIHNjYWxlLiBPdmVycmlkZGVuIGJ5IHdpZHRoLCBoZWlnaHRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY3JlYXRlQml0bWFwPVBJWEkuc2V0dGluZ3MuQ1JFQVRFX0lNQUdFX0JJVE1BUF0gLSBJbWFnZSBvcHRpb24gdG8gY3JlYXRlIEJpdG1hcCBvYmplY3RcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY3Jvc3NvcmlnaW49dHJ1ZV0gLSBJbWFnZSBhbmQgVmlkZW8gb3B0aW9uIHRvIHNldCBjcm9zc09yaWdpblxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hdXRvUGxheT10cnVlXSAtIFZpZGVvIG9wdGlvbiB0byBzdGFydCBwbGF5aW5nIHZpZGVvIGltbWVkaWF0ZWx5XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMudXBkYXRlRlBTPTBdIC0gVmlkZW8gb3B0aW9uIHRvIHVwZGF0ZSBob3cgbWFueSB0aW1lcyBhIHNlY29uZCB0aGVcbiAqICAgICAgICB0ZXh0dXJlIHNob3VsZCBiZSB1cGRhdGVkIGZyb20gdGhlIHZpZGVvLiBMZWF2ZSBhdCAwIHRvIHVwZGF0ZSBhdCBldmVyeSByZW5kZXJcbiAqIEByZXR1cm4ge1BJWEkucmVzb3VyY2VzLlJlc291cmNlfSBUaGUgY3JlYXRlZCByZXNvdXJjZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF1dG9EZXRlY3RSZXNvdXJjZShzb3VyY2U6IHVua25vd24sIG9wdGlvbnM/OiBJQXV0b0RldGVjdE9wdGlvbnMpOiBSZXNvdXJjZVxue1xuICAgIGlmICghc291cmNlKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IGV4dGVuc2lvbiA9ICcnO1xuXG4gICAgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnKVxuICAgIHtcbiAgICAgICAgLy8gc2VhcmNoIGZvciBmaWxlIGV4dGVuc2lvbjogcGVyaW9kLCAzLTQgY2hhcnMsIHRoZW4gPywgIyBvciBFT0xcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKC9cXC4oXFx3ezMsNH0pKD86JHxcXD98IykvaSkuZXhlYyhzb3VyY2UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGV4dGVuc2lvbiA9IHJlc3VsdFsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IElOU1RBTExFRC5sZW5ndGggLSAxOyBpID49IDA7IC0taSlcbiAgICB7XG4gICAgICAgIGNvbnN0IFJlc291cmNlUGx1Z2luID0gSU5TVEFMTEVEW2ldO1xuXG4gICAgICAgIGlmIChSZXNvdXJjZVBsdWdpbi50ZXN0ICYmIFJlc291cmNlUGx1Z2luLnRlc3Qoc291cmNlLCBleHRlbnNpb24pKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGx1Z2luKHNvdXJjZSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCBzb3VyY2UgdHlwZSB0byBhdXRvLWRldGVjdCBSZXNvdXJjZScpO1xufVxuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwgImltcG9ydCB7IFJ1bm5lciB9IGZyb20gJ0BwaXhpL3J1bm5lcic7XG5cbmltcG9ydCB0eXBlIHsgQmFzZVRleHR1cmUgfSBmcm9tICcuLi9CYXNlVGV4dHVyZSc7XG5pbXBvcnQgdHlwZSB7IFJlbmRlcmVyIH0gZnJvbSAnLi4vLi4vUmVuZGVyZXInO1xuaW1wb3J0IHR5cGUgeyBHTFRleHR1cmUgfSBmcm9tICcuLi9HTFRleHR1cmUnO1xuXG4vKipcbiAqIEJhc2UgcmVzb3VyY2UgY2xhc3MgZm9yIHRleHR1cmVzIHRoYXQgbWFuYWdlcyB2YWxpZGF0aW9uIGFuZCB1cGxvYWRpbmcsIGRlcGVuZGluZyBvbiBpdHMgdHlwZS5cbiAqXG4gKiBVcGxvYWRpbmcgb2YgYSBiYXNlIHRleHR1cmUgdG8gdGhlIEdQVSBpcyByZXF1aXJlZC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJLnJlc291cmNlc1xuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVzb3VyY2VcbntcbiAgICBwdWJsaWMgZGVzdHJveWVkOiBib29sZWFuO1xuICAgIHB1YmxpYyBpbnRlcm5hbDogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgX3dpZHRoOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9oZWlnaHQ6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgb25SZXNpemU6IFJ1bm5lcjtcbiAgICBwcm90ZWN0ZWQgb25VcGRhdGU6IFJ1bm5lcjtcbiAgICBwcm90ZWN0ZWQgb25FcnJvcjogUnVubmVyO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGg9MF0gLSBXaWR0aCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2hlaWdodD0wXSAtIEhlaWdodCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih3aWR0aCA9IDAsIGhlaWdodCA9IDApXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgd2lkdGggb2YgdGhlIHJlc291cmNlXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgaGVpZ2h0IG9mIHRoZSByZXNvdXJjZVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgcmVzb3VyY2UgaGFzIGJlZW4gZGVzdHJveWVkXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogYHRydWVgIGlmIHJlc291cmNlIGlzIGNyZWF0ZWQgYnkgQmFzZVRleHR1cmVcbiAgICAgICAgICogdXNlZnVsIGZvciBkb2luZyBjbGVhbnVwIHdpdGggQmFzZVRleHR1cmUgZGVzdHJveVxuICAgICAgICAgKiBhbmQgbm90IGNsZWFuaW5nIHVwIHJlc291cmNlcyB0aGF0IHdlcmUgY3JlYXRlZFxuICAgICAgICAgKiBleHRlcm5hbGx5LlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmludGVybmFsID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1pbmktcnVubmVyIGZvciBoYW5kbGluZyByZXNpemUgZXZlbnRzXG4gICAgICAgICAqIGFjY2VwdHMgMiBwYXJhbWV0ZXJzOiB3aWR0aCwgaGVpZ2h0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1J1bm5lcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25SZXNpemUgPSBuZXcgUnVubmVyKCdzZXRSZWFsU2l6ZScpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNaW5pLXJ1bm5lciBmb3IgaGFuZGxpbmcgdXBkYXRlIGV2ZW50c1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtSdW5uZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uVXBkYXRlID0gbmV3IFJ1bm5lcigndXBkYXRlJyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBpbnRlcm5hbCBlcnJvcnMsIHN1Y2ggYXMgbG9hZGluZyBlcnJvcnNcbiAgICAgICAgICogYWNjZXB0cyAxIHBhcmFtOiBlcnJvclxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtSdW5uZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRXJyb3IgPSBuZXcgUnVubmVyKCdvbkVycm9yJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmluZCB0byBhIHBhcmVudCBCYXNlVGV4dHVyZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSBiYXNlVGV4dHVyZSAtIFBhcmVudCB0ZXh0dXJlXG4gICAgICovXG4gICAgYmluZChiYXNlVGV4dHVyZTogQmFzZVRleHR1cmUpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLm9uUmVzaXplLmFkZChiYXNlVGV4dHVyZSk7XG4gICAgICAgIHRoaXMub25VcGRhdGUuYWRkKGJhc2VUZXh0dXJlKTtcbiAgICAgICAgdGhpcy5vbkVycm9yLmFkZChiYXNlVGV4dHVyZSk7XG5cbiAgICAgICAgLy8gQ2FsbCBhIHJlc2l6ZSBpbW1lZGlhdGUgaWYgd2UgYWxyZWFkeVxuICAgICAgICAvLyBoYXZlIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSByZXNvdXJjZVxuICAgICAgICBpZiAodGhpcy5fd2lkdGggfHwgdGhpcy5faGVpZ2h0KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplLmVtaXQodGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbmJpbmQgdG8gYSBwYXJlbnQgQmFzZVRleHR1cmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSBQYXJlbnQgdGV4dHVyZVxuICAgICAqL1xuICAgIHVuYmluZChiYXNlVGV4dHVyZTogQmFzZVRleHR1cmUpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLm9uUmVzaXplLnJlbW92ZShiYXNlVGV4dHVyZSk7XG4gICAgICAgIHRoaXMub25VcGRhdGUucmVtb3ZlKGJhc2VUZXh0dXJlKTtcbiAgICAgICAgdGhpcy5vbkVycm9yLnJlbW92ZShiYXNlVGV4dHVyZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBhIHJlc2l6ZSBldmVudFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFggZGltZW5zaW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFkgZGltZW5zaW9uXG4gICAgICovXG4gICAgcmVzaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHdpZHRoICE9PSB0aGlzLl93aWR0aCB8fCBoZWlnaHQgIT09IHRoaXMuX2hlaWdodClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMub25SZXNpemUuZW1pdCh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhcyBiZWVuIHZhbGlkYXRlZFxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IHZhbGlkKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX3dpZHRoICYmICEhdGhpcy5faGVpZ2h0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhcyBiZWVuIHVwZGF0ZWQgdHJpZ2dlciBldmVudFxuICAgICAqL1xuICAgIHVwZGF0ZSgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuZGVzdHJveWVkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm9uVXBkYXRlLmVtaXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgY2FuIGJlIG92ZXJyaWRkZW4gdG8gc3RhcnQgcHJlbG9hZGluZyBhIHJlc291cmNlXG4gICAgICogb3IgZG8gYW55IG90aGVyIHByZXBhcmUgc3RlcC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7UHJvbWlzZTx2b2lkPn0gSGFuZGxlIHRoZSB2YWxpZGF0ZSBldmVudFxuICAgICAqL1xuICAgIGxvYWQoKTogUHJvbWlzZTxSZXNvdXJjZT5cbiAgICB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIHRoZSByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBnZXQgd2lkdGgoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGhlaWdodCBvZiB0aGUgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IGhlaWdodCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBsb2FkcyB0aGUgdGV4dHVyZSBvciByZXR1cm5zIGZhbHNlIGlmIGl0IGNhbnQgZm9yIHNvbWUgcmVhc29uLiBPdmVycmlkZSB0aGlzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIHllYWgsIHJlbmRlcmVyIVxuICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSB0aGUgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7UElYSS5HTFRleHR1cmV9IGdsVGV4dHVyZSAtIHRleHR1cmUgaW5zdGFuY2UgZm9yIHRoaXMgd2ViZ2wgY29udGV4dFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlzIHN1Y2Nlc3NcbiAgICAgKi9cbiAgICBhYnN0cmFjdCB1cGxvYWQocmVuZGVyZXI6IFJlbmRlcmVyLCBiYXNlVGV4dHVyZTogQmFzZVRleHR1cmUsIGdsVGV4dHVyZTogR0xUZXh0dXJlKTogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3R5bGUsIG9wdGlvbmFsIHRvIG92ZXJyaWRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0geWVhaCwgcmVuZGVyZXIhXG4gICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSBiYXNlVGV4dHVyZSAtIHRoZSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtQSVhJLkdMVGV4dHVyZX0gZ2xUZXh0dXJlIC0gdGV4dHVyZSBpbnN0YW5jZSBmb3IgdGhpcyB3ZWJnbCBjb250ZXh0XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpcyBzdWNjZXNzXG4gICAgICovXG4gICAgc3R5bGUoX3JlbmRlcmVyOiBSZW5kZXJlciwgX2Jhc2VUZXh0dXJlOiBCYXNlVGV4dHVyZSwgX2dsVGV4dHVyZTogR0xUZXh0dXJlKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIGFueXRoaW5nLCB0aGlzIGhhcHBlbnMgd2hlbiBkZXN0cm95aW5nIGlzIHJlYWR5LlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGRpc3Bvc2UoKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gb3ZlcnJpZGVcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIHdoZW4gZGVzdHJveWluZyByZXNvdXJjZSwgdW5iaW5kIGFueSBCYXNlVGV4dHVyZSBvYmplY3RcbiAgICAgKiBiZWZvcmUgY2FsbGluZyB0aGlzIG1ldGhvZCwgYXMgcmVmZXJlbmNlIGNvdW50cyBhcmUgbWFpbnRhaW5lZFxuICAgICAqIGludGVybmFsbHkuXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuZGVzdHJveWVkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25FcnJvci5yZW1vdmVBbGwoKTtcbiAgICAgICAgICAgIHRoaXMub25FcnJvciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplLnJlbW92ZUFsbCgpO1xuICAgICAgICAgICAgdGhpcy5vblJlc2l6ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm9uVXBkYXRlLnJlbW92ZUFsbCgpO1xuICAgICAgICAgICAgdGhpcy5vblVwZGF0ZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBYnN0cmFjdCwgdXNlZCB0byBhdXRvLWRldGVjdCByZXNvdXJjZSB0eXBlXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2UgLSBUaGUgc291cmNlIG9iamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gLSBUaGUgZXh0ZW5zaW9uIG9mIHNvdXJjZSwgaWYgc2V0XG4gICAgICovXG4gICAgc3RhdGljIHRlc3QoX3NvdXJjZTogdW5rbm93biwgX2V4dGVuc2lvbj86IHN0cmluZyk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tICcuL1Jlc291cmNlJztcbmltcG9ydCB7IEFMUEhBX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcblxuaW1wb3J0IHR5cGUgeyBJU2l6ZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHR5cGUgeyBCYXNlVGV4dHVyZSB9IGZyb20gJy4uL0Jhc2VUZXh0dXJlJztcbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi8uLi9SZW5kZXJlcic7XG5pbXBvcnQgdHlwZSB7IEdMVGV4dHVyZSB9IGZyb20gJy4uL0dMVGV4dHVyZSc7XG4vKipcbiAqIEBpbnRlcmZhY2UgU2hhcmVkQXJyYXlCdWZmZXJcbiAqL1xuXG4vKipcbiAqIEJ1ZmZlciByZXNvdXJjZSB3aXRoIGRhdGEgb2YgdHlwZWQgYXJyYXkuXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkucmVzb3VyY2VzLlJlc291cmNlXG4gKiBAbWVtYmVyb2YgUElYSS5yZXNvdXJjZXNcbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlclJlc291cmNlIGV4dGVuZHMgUmVzb3VyY2VcbntcbiAgICBkYXRhOiBGbG9hdDMyQXJyYXl8VWludDhBcnJheXxVaW50MzJBcnJheTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fFVpbnQ4QXJyYXl8VWludDMyQXJyYXl9IHNvdXJjZSAtIFNvdXJjZSBidWZmZXJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy53aWR0aCAtIFdpZHRoIG9mIHRoZSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuaGVpZ2h0IC0gSGVpZ2h0IG9mIHRoZSB0ZXh0dXJlXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc291cmNlOiBGbG9hdDMyQXJyYXl8VWludDhBcnJheXxVaW50MzJBcnJheSwgb3B0aW9uczogSVNpemUpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKCF3aWR0aCB8fCAhaGVpZ2h0KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0J1ZmZlclJlc291cmNlIHdpZHRoIG9yIGhlaWdodCBpbnZhbGlkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcih3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU291cmNlIGFycmF5XG4gICAgICAgICAqIENhbm5vdCBiZSBDbGFtcGVkVWludDhBcnJheSBiZWNhdXNlIGl0IGNhbnQgYmUgdXBsb2FkZWQgdG8gV2ViR0xcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7RmxvYXQzMkFycmF5fFVpbnQ4QXJyYXl8VWludDMyQXJyYXl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRhdGEgPSBzb3VyY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBsb2FkIHRoZSB0ZXh0dXJlIHRvIHRoZSBHUFUuXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFVwbG9hZCB0byB0aGUgcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlIC0gUmVmZXJlbmNlIHRvIHBhcmVudCB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtQSVhJLkdMVGV4dHVyZX0gZ2xUZXh0dXJlIC0gZ2xUZXh0dXJlXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaXMgc3VjY2Vzc1xuICAgICAqL1xuICAgIHVwbG9hZChyZW5kZXJlcjogUmVuZGVyZXIsIGJhc2VUZXh0dXJlOiBCYXNlVGV4dHVyZSwgZ2xUZXh0dXJlOiBHTFRleHR1cmUpOiBib29sZWFuXG4gICAge1xuICAgICAgICBjb25zdCBnbCA9IHJlbmRlcmVyLmdsO1xuXG4gICAgICAgIGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgYmFzZVRleHR1cmUuYWxwaGFNb2RlID09PSBBTFBIQV9NT0RFUy5VTlBBQ0spO1xuXG4gICAgICAgIGlmIChnbFRleHR1cmUud2lkdGggPT09IGJhc2VUZXh0dXJlLndpZHRoICYmIGdsVGV4dHVyZS5oZWlnaHQgPT09IGJhc2VUZXh0dXJlLmhlaWdodClcbiAgICAgICAge1xuICAgICAgICAgICAgZ2wudGV4U3ViSW1hZ2UyRChcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZS50YXJnZXQsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUud2lkdGgsXG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGJhc2VUZXh0dXJlLmZvcm1hdCxcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZS50eXBlLFxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsVGV4dHVyZS53aWR0aCA9IGJhc2VUZXh0dXJlLndpZHRoO1xuICAgICAgICAgICAgZ2xUZXh0dXJlLmhlaWdodCA9IGJhc2VUZXh0dXJlLmhlaWdodDtcblxuICAgICAgICAgICAgZ2wudGV4SW1hZ2UyRChcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZS50YXJnZXQsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICBnbFRleHR1cmUuaW50ZXJuYWxGb3JtYXQsXG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUud2lkdGgsXG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUuZm9ybWF0LFxuICAgICAgICAgICAgICAgIGdsVGV4dHVyZS50eXBlLFxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgYW5kIGRvbid0IHVzZSBhZnRlciB0aGlzXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZGlzcG9zZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gYXV0by1kZXRlY3QgdGhlIHR5cGUgb2YgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2UgLSBUaGUgc291cmNlIG9iamVjdFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiA8Y2FudmFzPlxuICAgICAqL1xuICAgIHN0YXRpYyB0ZXN0KHNvdXJjZTogdW5rbm93bik6IHNvdXJjZSBpcyBGbG9hdDMyQXJyYXl8VWludDhBcnJheXxVaW50MzJBcnJheVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheVxuICAgICAgICAgICAgfHwgc291cmNlIGluc3RhbmNlb2YgVWludDhBcnJheVxuICAgICAgICAgICAgfHwgc291cmNlIGluc3RhbmNlb2YgVWludDMyQXJyYXk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEJhc2VUZXh0dXJlQ2FjaGUsIEV2ZW50RW1pdHRlciwgaXNQb3cyLCBUZXh0dXJlQ2FjaGUsIHVpZCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IEZPUk1BVFMsIFNDQUxFX01PREVTLCBUQVJHRVRTLCBUWVBFUywgQUxQSEFfTU9ERVMsIE1JUE1BUF9NT0RFUywgV1JBUF9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gJy4vcmVzb3VyY2VzL1Jlc291cmNlJztcbmltcG9ydCB7IEJ1ZmZlclJlc291cmNlIH0gZnJvbSAnLi9yZXNvdXJjZXMvQnVmZmVyUmVzb3VyY2UnO1xuaW1wb3J0IHsgYXV0b0RldGVjdFJlc291cmNlIH0gZnJvbSAnLi9yZXNvdXJjZXMvYXV0b0RldGVjdFJlc291cmNlJztcbmltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSAnQHBpeGkvc2V0dGluZ3MnO1xuXG5pbXBvcnQgdHlwZSB7IEdMVGV4dHVyZSB9IGZyb20gJy4vR0xUZXh0dXJlJztcblxuY29uc3QgZGVmYXVsdEJ1ZmZlck9wdGlvbnMgPSB7XG4gICAgc2NhbGVNb2RlOiBTQ0FMRV9NT0RFUy5ORUFSRVNULFxuICAgIGZvcm1hdDogRk9STUFUUy5SR0JBLFxuICAgIGFscGhhTW9kZTogQUxQSEFfTU9ERVMuTlBNLFxufTtcblxuZXhwb3J0IHR5cGUgSW1hZ2VTb3VyY2UgPSBIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8SW1hZ2VCaXRtYXA7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJhc2VUZXh0dXJlT3B0aW9ucyB7XG4gICAgYWxwaGFNb2RlPzogQUxQSEFfTU9ERVM7XG4gICAgbWlwbWFwPzogTUlQTUFQX01PREVTO1xuICAgIGFuaXNvdHJvcGljTGV2ZWw/OiBudW1iZXI7XG4gICAgc2NhbGVNb2RlPzogU0NBTEVfTU9ERVM7XG4gICAgd2lkdGg/OiBudW1iZXI7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIHdyYXBNb2RlPzogV1JBUF9NT0RFUztcbiAgICBmb3JtYXQ/OiBGT1JNQVRTO1xuICAgIHR5cGU/OiBUWVBFUztcbiAgICB0YXJnZXQ/OiBUQVJHRVRTO1xuICAgIHJlc29sdXRpb24/OiBudW1iZXI7XG4gICAgcmVzb3VyY2VPcHRpb25zPzogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VUZXh0dXJlIGV4dGVuZHMgR2xvYmFsTWl4aW5zLkJhc2VUZXh0dXJlLCBFdmVudEVtaXR0ZXIge31cblxuLyoqXG4gKiBBIFRleHR1cmUgc3RvcmVzIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2UuXG4gKiBBbGwgdGV4dHVyZXMgaGF2ZSBhIGJhc2UgdGV4dHVyZSwgd2hpY2ggY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHNvdXJjZS5cbiAqIFRoZXJlZm9yZSB5b3UgY2FuIGhhdmUgbWFueSB0ZXh0dXJlcyBhbGwgdXNpbmcgYSBzaW5nbGUgQmFzZVRleHR1cmVcbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkudXRpbHMuRXZlbnRFbWl0dGVyXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHBhcmFtIHtQSVhJLnJlc291cmNlcy5SZXNvdXJjZXxzdHJpbmd8SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBbcmVzb3VyY2U9bnVsbF1cbiAqICAgICAgICBUaGUgY3VycmVudCByZXNvdXJjZSB0byB1c2UsIGZvciB0aGluZ3MgdGhhdCBhcmVuJ3QgUmVzb3VyY2Ugb2JqZWN0cywgd2lsbCBiZSBjb252ZXJ0ZWRcbiAqICAgICAgICBpbnRvIGEgUmVzb3VyY2UuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gQ29sbGVjdGlvbiBvZiBvcHRpb25zXG4gKiBAcGFyYW0ge1BJWEkuTUlQTUFQX01PREVTfSBbb3B0aW9ucy5taXBtYXA9UElYSS5zZXR0aW5ncy5NSVBNQVBfVEVYVFVSRVNdIC0gSWYgbWlwbWFwcGluZyBpcyBlbmFibGVkIGZvciB0ZXh0dXJlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuYW5pc290cm9waWNMZXZlbD1QSVhJLnNldHRpbmdzLkFOSVNPVFJPUElDX0xFVkVMXSAtIEFuaXNvdHJvcGljIGZpbHRlcmluZyBsZXZlbCBvZiB0ZXh0dXJlXG4gKiBAcGFyYW0ge1BJWEkuV1JBUF9NT0RFU30gW29wdGlvbnMud3JhcE1vZGU9UElYSS5zZXR0aW5ncy5XUkFQX01PREVdIC0gV3JhcCBtb2RlIGZvciB0ZXh0dXJlc1xuICogQHBhcmFtIHtQSVhJLlNDQUxFX01PREVTfSBbb3B0aW9ucy5zY2FsZU1vZGU9UElYSS5zZXR0aW5ncy5TQ0FMRV9NT0RFXSAtIERlZmF1bHQgc2NhbGUgbW9kZSwgbGluZWFyLCBuZWFyZXN0XG4gKiBAcGFyYW0ge1BJWEkuRk9STUFUU30gW29wdGlvbnMuZm9ybWF0PVBJWEkuRk9STUFUUy5SR0JBXSAtIEdMIGZvcm1hdCB0eXBlXG4gKiBAcGFyYW0ge1BJWEkuVFlQRVN9IFtvcHRpb25zLnR5cGU9UElYSS5UWVBFUy5VTlNJR05FRF9CWVRFXSAtIEdMIGRhdGEgdHlwZVxuICogQHBhcmFtIHtQSVhJLlRBUkdFVFN9IFtvcHRpb25zLnRhcmdldD1QSVhJLlRBUkdFVFMuVEVYVFVSRV8yRF0gLSBHTCB0ZXh0dXJlIHRhcmdldFxuICogQHBhcmFtIHtQSVhJLkFMUEhBX01PREVTfSBbb3B0aW9ucy5hbHBoYU1vZGU9UElYSS5BTFBIQV9NT0RFUy5VTlBBQ0tdIC0gUHJlIG11bHRpcGx5IHRoZSBpbWFnZSBhbHBoYVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoPTBdIC0gV2lkdGggb2YgdGhlIHRleHR1cmVcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5oZWlnaHQ9MF0gLSBIZWlnaHQgb2YgdGhlIHRleHR1cmVcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5yZXNvbHV0aW9uXSAtIFJlc29sdXRpb24gb2YgdGhlIGJhc2UgdGV4dHVyZVxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLnJlc291cmNlT3B0aW9uc10gLSBPcHRpb25hbCByZXNvdXJjZSBvcHRpb25zLFxuICogICAgICAgIHNlZSB7QGxpbmsgUElYSS5yZXNvdXJjZXMuYXV0b0RldGVjdFJlc291cmNlIGF1dG9EZXRlY3RSZXNvdXJjZX1cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VUZXh0dXJlIGV4dGVuZHMgRXZlbnRFbWl0dGVyXG57XG4gICAgcHVibGljIHdpZHRoOiBudW1iZXI7XG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyO1xuICAgIHB1YmxpYyByZXNvbHV0aW9uOiBudW1iZXI7XG4gICAgcHVibGljIGFscGhhTW9kZT86IEFMUEhBX01PREVTO1xuICAgIHB1YmxpYyBtaXBtYXA/OiBNSVBNQVBfTU9ERVM7XG4gICAgcHVibGljIGFuaXNvdHJvcGljTGV2ZWw/OiBudW1iZXI7XG4gICAgcHVibGljIHNjYWxlTW9kZT86IFNDQUxFX01PREVTO1xuICAgIHB1YmxpYyB3cmFwTW9kZT86IFdSQVBfTU9ERVM7XG4gICAgcHVibGljIGZvcm1hdD86IEZPUk1BVFM7XG4gICAgcHVibGljIHR5cGU/OiBUWVBFUztcbiAgICBwdWJsaWMgdGFyZ2V0PzogVEFSR0VUUztcblxuICAgIHB1YmxpYyByZWFkb25seSB1aWQ6IG51bWJlcjtcbiAgICB0b3VjaGVkOiBudW1iZXI7XG4gICAgaXNQb3dlck9mVHdvOiBib29sZWFuO1xuXG4gICAgX2dsVGV4dHVyZXM6IHsgW2tleTogbnVtYmVyXTogR0xUZXh0dXJlIH07XG4gICAgZGlydHlJZDogbnVtYmVyO1xuICAgIGRpcnR5U3R5bGVJZDogbnVtYmVyO1xuICAgIHB1YmxpYyBjYWNoZUlkOiBzdHJpbmc7XG4gICAgcHVibGljIHZhbGlkOiBib29sZWFuO1xuICAgIHRleHR1cmVDYWNoZUlkczogQXJyYXk8c3RyaW5nPjtcbiAgICBwdWJsaWMgZGVzdHJveWVkOiBib29sZWFuO1xuICAgIHB1YmxpYyByZXNvdXJjZTogUmVzb3VyY2U7XG4gICAgX2JhdGNoRW5hYmxlZDogbnVtYmVyO1xuICAgIF9iYXRjaExvY2F0aW9uOiBudW1iZXI7XG4gICAgcGFyZW50VGV4dHVyZUFycmF5OiBCYXNlVGV4dHVyZTtcblxuICAgIGNvbnN0cnVjdG9yKHJlc291cmNlOiBSZXNvdXJjZSB8IEltYWdlU291cmNlIHwgc3RyaW5nIHwgYW55ID0gbnVsbCwgb3B0aW9uczogSUJhc2VUZXh0dXJlT3B0aW9ucyA9IG51bGwpXG4gICAge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgYWxwaGFNb2RlLCBtaXBtYXAsIGFuaXNvdHJvcGljTGV2ZWwsIHNjYWxlTW9kZSwgd2lkdGgsIGhlaWdodCxcbiAgICAgICAgICAgIHdyYXBNb2RlLCBmb3JtYXQsIHR5cGUsIHRhcmdldCwgcmVzb2x1dGlvbiwgcmVzb3VyY2VPcHRpb25zIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIC8vIENvbnZlcnQgdGhlIHJlc291cmNlIHRvIGEgUmVzb3VyY2Ugb2JqZWN0XG4gICAgICAgIGlmIChyZXNvdXJjZSAmJiAhKHJlc291cmNlIGluc3RhbmNlb2YgUmVzb3VyY2UpKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXNvdXJjZSA9IGF1dG9EZXRlY3RSZXNvdXJjZShyZXNvdXJjZSwgcmVzb3VyY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJlc291cmNlLmludGVybmFsID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd2lkdGggb2YgdGhlIGJhc2UgdGV4dHVyZSBzZXQgd2hlbiB0aGUgaW1hZ2UgaGFzIGxvYWRlZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoIHx8IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBoZWlnaHQgb2YgdGhlIGJhc2UgdGV4dHVyZSBzZXQgd2hlbiB0aGUgaW1hZ2UgaGFzIGxvYWRlZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgfHwgMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHJlc29sdXRpb24gLyBkZXZpY2UgcGl4ZWwgcmF0aW8gb2YgdGhlIHRleHR1cmVcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLnNldHRpbmdzLlJFU09MVVRJT05cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IHJlc29sdXRpb24gfHwgc2V0dGluZ3MuUkVTT0xVVElPTjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWlwbWFwIG1vZGUgb2YgdGhlIHRleHR1cmUsIGFmZmVjdHMgZG93bnNjYWxlZCBpbWFnZXNcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5NSVBNQVBfTU9ERVN9XG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuc2V0dGluZ3MuTUlQTUFQX1RFWFRVUkVTXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pcG1hcCA9IG1pcG1hcCAhPT0gdW5kZWZpbmVkID8gbWlwbWFwIDogc2V0dGluZ3MuTUlQTUFQX1RFWFRVUkVTO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbmlzb3Ryb3BpYyBmaWx0ZXJpbmcgbGV2ZWwgb2YgdGV4dHVyZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuc2V0dGluZ3MuQU5JU09UUk9QSUNfTEVWRUxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYW5pc290cm9waWNMZXZlbCA9IGFuaXNvdHJvcGljTGV2ZWwgIT09IHVuZGVmaW5lZCA/IGFuaXNvdHJvcGljTGV2ZWwgOiBzZXR0aW5ncy5BTklTT1RST1BJQ19MRVZFTDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSG93IHRoZSB0ZXh0dXJlIHdyYXBzXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JhcE1vZGUgPSB3cmFwTW9kZSB8fCBzZXR0aW5ncy5XUkFQX01PREU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzY2FsZSBtb2RlIHRvIGFwcGx5IHdoZW4gc2NhbGluZyB0aGlzIHRleHR1cmVcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5TQ0FMRV9NT0RFU31cbiAgICAgICAgICogQGRlZmF1bHQgUElYSS5zZXR0aW5ncy5TQ0FMRV9NT0RFXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjYWxlTW9kZSA9IHNjYWxlTW9kZSAhPT0gdW5kZWZpbmVkID8gc2NhbGVNb2RlIDogc2V0dGluZ3MuU0NBTEVfTU9ERTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBpeGVsIGZvcm1hdCBvZiB0aGUgdGV4dHVyZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkZPUk1BVFN9XG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuRk9STUFUUy5SR0JBXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdCB8fCBGT1JNQVRTLlJHQkE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0eXBlIG9mIHJlc291cmNlIGRhdGFcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5UWVBFU31cbiAgICAgICAgICogQGRlZmF1bHQgUElYSS5UWVBFUy5VTlNJR05FRF9CWVRFXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlIHx8IFRZUEVTLlVOU0lHTkVEX0JZVEU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0YXJnZXQgdHlwZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlRBUkdFVFN9XG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuVEFSR0VUUy5URVhUVVJFXzJEXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldCB8fCBUQVJHRVRTLlRFWFRVUkVfMkQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhvdyB0byB0cmVhdCBwcmVtdWx0aXBsaWVkIGFscGhhLCBzZWUge0BsaW5rIFBJWEkuQUxQSEFfTU9ERVN9LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkFMUEhBX01PREVTfVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLkFMUEhBX01PREVTLlVOUEFDS1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbHBoYU1vZGUgPSBhbHBoYU1vZGUgIT09IHVuZGVmaW5lZCA/IGFscGhhTW9kZSA6IEFMUEhBX01PREVTLlVOUEFDSztcblxuICAgICAgICBpZiAoKG9wdGlvbnMgYXMgYW55KS5wcmVtdWx0aXBseUFscGhhICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIHRyaWdnZXJzIGRlcHJlY2F0aW9uXG4gICAgICAgICAgICAodGhpcyBhcyBhbnkpLnByZW11bHRpcGx5QWxwaGEgPSAob3B0aW9ucyBhcyBhbnkpLnByZW11bHRpcGx5QWxwaGE7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2xvYmFsIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIEJhc2VUZXh0dXJlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51aWQgPSB1aWQoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCBieSBhdXRvbWF0aWMgdGV4dHVyZSBHYXJiYWdlIENvbGxlY3Rpb24sIHN0b3JlcyBsYXN0IEdDIHRpY2sgd2hlbiBpdCB3YXMgYm91bmRcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRvdWNoZWQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIG9yIG5vdCB0aGUgdGV4dHVyZSBpcyBhIHBvd2VyIG9mIHR3bywgdHJ5IHRvIHVzZSBwb3dlciBvZiB0d28gdGV4dHVyZXMgYXMgbXVjaFxuICAgICAgICAgKiBhcyB5b3UgY2FuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc1Bvd2VyT2ZUd28gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaFBPVCgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFwIG9mIHJlbmRlciBjb250ZXh0IHRleHR1cmVzIHdoZXJlIHRoaXMgaXMgYm91bmRcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fZ2xUZXh0dXJlcyA9IHt9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIGJ5IFRleHR1cmVTeXN0ZW0gdG8gb25seSB1cGRhdGUgdGV4dHVyZSB0byB0aGUgR1BVIHdoZW4gbmVlZGVkLlxuICAgICAgICAgKiBQbGVhc2UgY2FsbCBgdXBkYXRlKClgIHRvIGluY3JlbWVudCBpdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlydHlJZCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgYnkgVGV4dHVyZVN5c3RlbSB0byBvbmx5IHVwZGF0ZSB0ZXh0dXJlIHN0eWxlIHdoZW4gbmVlZGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlydHlTdHlsZUlkID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3VycmVudGx5IGRlZmF1bHQgY2FjaGUgSUQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FjaGVJZCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdlbmVyYWxseSBzcGVha2luZyBtZWFucyB3aGVuIHJlc291cmNlIGlzIGxvYWRlZC5cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbGlkID0gd2lkdGggPiAwICYmIGhlaWdodCA+IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIGFsdGVybmF0aXZlIGNhY2hlIGlkcywgc2luY2Ugc29tZSBCYXNlVGV4dHVyZXNcbiAgICAgICAgICogY2FuIGhhdmUgbW9yZSB0aGFuIG9uZSBJRCwgc2hvcnQgbmFtZSBhbmQgbG9uZ2VyIGZ1bGwgVVJMXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge0FycmF5PHN0cmluZz59XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZXh0dXJlQ2FjaGVJZHMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRmxhZyBpZiBCYXNlVGV4dHVyZSBoYXMgYmVlbiBkZXN0cm95ZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHJlc291cmNlIHVzZWQgYnkgdGhpcyBCYXNlVGV4dHVyZSwgdGhlcmUgY2FuIG9ubHlcbiAgICAgICAgICogYmUgb25lIHJlc291cmNlIHBlciBCYXNlVGV4dHVyZSwgYnV0IHRleHR1cmVzIGNhbiBzaGFyZVxuICAgICAgICAgKiByZXNvdXJjZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkucmVzb3VyY2VzLlJlc291cmNlfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb3VyY2UgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOdW1iZXIgb2YgdGhlIHRleHR1cmUgYmF0Y2gsIHVzZWQgYnkgbXVsdGktdGV4dHVyZSByZW5kZXJlcnNcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYmF0Y2hFbmFibGVkID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9jYXRpb24gaW5zaWRlIHRleHR1cmUgYmF0Y2gsIHVzZWQgYnkgbXVsdGktdGV4dHVyZSByZW5kZXJlcnNcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYmF0Y2hMb2NhdGlvbiA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXRzIGEgcGFydCBvZiBhbm90aGVyIHRleHR1cmUsIGhhbmRsZWQgYnkgQXJyYXlSZXNvdXJjZSBvciBDdWJlUmVzb3VyY2VcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5CYXNlVGV4dHVyZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFyZW50VGV4dHVyZUFycmF5ID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBhIG5vdC1pbW1lZGlhdGVseS1hdmFpbGFibGUgc291cmNlIGZpbmlzaGVzIGxvYWRpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQGV2ZW50IFBJWEkuQmFzZVRleHR1cmUjbG9hZGVkXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSBSZXNvdXJjZSBsb2FkZWQuXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgbm90LWltbWVkaWF0ZWx5LWF2YWlsYWJsZSBzb3VyY2UgZmFpbHMgdG8gbG9hZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAZXZlbnQgUElYSS5CYXNlVGV4dHVyZSNlcnJvclxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlIC0gUmVzb3VyY2UgZXJyb3JlZC5cbiAgICAgICAgICogQHBhcmFtIHtFcnJvckV2ZW50fSBldmVudCAtIExvYWQgZXJyb3IgZXZlbnQuXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIEJhc2VUZXh0dXJlIGlzIHVwZGF0ZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQGV2ZW50IFBJWEkuQmFzZVRleHR1cmUjbG9hZGVkXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSBSZXNvdXJjZSBsb2FkZWQuXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIEJhc2VUZXh0dXJlIGlzIHVwZGF0ZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQGV2ZW50IFBJWEkuQmFzZVRleHR1cmUjdXBkYXRlXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSBJbnN0YW5jZSBvZiB0ZXh0dXJlIGJlaW5nIHVwZGF0ZWQuXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIEJhc2VUZXh0dXJlIGlzIGRlc3Ryb3llZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAZXZlbnQgUElYSS5CYXNlVGV4dHVyZSNkaXNwb3NlXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSBJbnN0YW5jZSBvZiB0ZXh0dXJlIGJlaW5nIGRlc3Ryb3llZC5cbiAgICAgICAgICovXG5cbiAgICAgICAgLy8gU2V0IHRoZSByZXNvdXJjZVxuICAgICAgICB0aGlzLnNldFJlc291cmNlKHJlc291cmNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQaXhlbCB3aWR0aCBvZiB0aGUgc291cmNlIG9mIHRoaXMgdGV4dHVyZVxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCByZWFsV2lkdGgoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKCh0aGlzLndpZHRoICogdGhpcy5yZXNvbHV0aW9uKSAtIDFlLTQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBpeGVsIGhlaWdodCBvZiB0aGUgc291cmNlIG9mIHRoaXMgdGV4dHVyZVxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCByZWFsSGVpZ2h0KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbCgodGhpcy5oZWlnaHQgKiB0aGlzLnJlc29sdXRpb24pIC0gMWUtNCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyBzdHlsZSBvcHRpb25zIG9mIEJhc2VUZXh0dXJlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuU0NBTEVfTU9ERVN9IFtzY2FsZU1vZGVdIC0gUGl4aSBzY2FsZW1vZGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuTUlQTUFQX01PREVTfSBbbWlwbWFwXSAtIGVuYWJsZSBtaXBtYXBzXG4gICAgICogQHJldHVybnMge1BJWEkuQmFzZVRleHR1cmV9IHRoaXNcbiAgICAgKi9cbiAgICBzZXRTdHlsZShzY2FsZU1vZGU/OiBTQ0FMRV9NT0RFUywgbWlwbWFwPzogTUlQTUFQX01PREVTKTogdGhpc1xuICAgIHtcbiAgICAgICAgbGV0IGRpcnR5O1xuXG4gICAgICAgIGlmIChzY2FsZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBzY2FsZU1vZGUgIT09IHRoaXMuc2NhbGVNb2RlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNjYWxlTW9kZSA9IHNjYWxlTW9kZTtcbiAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtaXBtYXAgIT09IHVuZGVmaW5lZCAmJiBtaXBtYXAgIT09IHRoaXMubWlwbWFwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm1pcG1hcCA9IG1pcG1hcDtcbiAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXJ0eSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eVN0eWxlSWQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdy9oL3Jlc29sdXRpb24uIFRleHR1cmUgYmVjb21lcyB2YWxpZCBpZiB3aWR0aCBhbmQgaGVpZ2h0IGFyZSBncmVhdGVyIHRoYW4gemVyby5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFZpc3VhbCB3aWR0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgLSBWaXN1YWwgaGVpZ2h0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyZXNvbHV0aW9uXSAtIE9wdGlvbmFsbHkgc2V0IHJlc29sdXRpb25cbiAgICAgKiBAcmV0dXJucyB7UElYSS5CYXNlVGV4dHVyZX0gdGhpc1xuICAgICAqL1xuICAgIHNldFNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHJlc29sdXRpb24/OiBudW1iZXIpOiB0aGlzXG4gICAge1xuICAgICAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uIHx8IHRoaXMucmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5fcmVmcmVzaFBPVCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgcmVhbCBzaXplIG9mIGJhc2VUZXh0dXJlLCBwcmVzZXJ2ZXMgY3VycmVudCByZXNvbHV0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlYWxXaWR0aCAtIEZ1bGwgcmVuZGVyZWQgd2lkdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVhbEhlaWdodCAtIEZ1bGwgcmVuZGVyZWQgaGVpZ2h0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyZXNvbHV0aW9uXSAtIE9wdGlvbmFsbHkgc2V0IHJlc29sdXRpb25cbiAgICAgKiBAcmV0dXJucyB7UElYSS5CYXNlVGV4dHVyZX0gdGhpc1xuICAgICAqL1xuICAgIHNldFJlYWxTaXplKHJlYWxXaWR0aDogbnVtYmVyLCByZWFsSGVpZ2h0OiBudW1iZXIsIHJlc29sdXRpb24/OiBudW1iZXIpOiB0aGlzXG4gICAge1xuICAgICAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uIHx8IHRoaXMucmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy53aWR0aCA9IHJlYWxXaWR0aCAvIHRoaXMucmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSByZWFsSGVpZ2h0IC8gdGhpcy5yZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLl9yZWZyZXNoUE9UKCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVmcmVzaCBjaGVjayBmb3IgaXNQb3dlck9mVHdvIHRleHR1cmUgYmFzZWQgb24gc2l6ZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX3JlZnJlc2hQT1QoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5pc1Bvd2VyT2ZUd28gPSBpc1BvdzIodGhpcy5yZWFsV2lkdGgpICYmIGlzUG93Mih0aGlzLnJlYWxIZWlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgcmVzb2x1dGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gLSByZXNcbiAgICAgKiBAcmV0dXJucyB7UElYSS5CYXNlVGV4dHVyZX0gdGhpc1xuICAgICAqL1xuICAgIHNldFJlc29sdXRpb24ocmVzb2x1dGlvbjogbnVtYmVyKTogdGhpc1xuICAgIHtcbiAgICAgICAgY29uc3Qgb2xkUmVzb2x1dGlvbiA9IHRoaXMucmVzb2x1dGlvbjtcblxuICAgICAgICBpZiAob2xkUmVzb2x1dGlvbiA9PT0gcmVzb2x1dGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuXG4gICAgICAgIGlmICh0aGlzLnZhbGlkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy53aWR0aCAqIG9sZFJlc29sdXRpb24gLyByZXNvbHV0aW9uO1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmhlaWdodCAqIG9sZFJlc29sdXRpb24gLyByZXNvbHV0aW9uO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd1cGRhdGUnLCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3JlZnJlc2hQT1QoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSByZXNvdXJjZSBpZiBpdCB3YXNuJ3Qgc2V0LiBUaHJvd3MgZXJyb3IgaWYgcmVzb3VyY2UgYWxyZWFkeSBwcmVzZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkucmVzb3VyY2VzLlJlc291cmNlfSByZXNvdXJjZSAtIHRoYXQgaXMgbWFuYWdpbmcgdGhpcyBCYXNlVGV4dHVyZVxuICAgICAqIEByZXR1cm5zIHtQSVhJLkJhc2VUZXh0dXJlfSB0aGlzXG4gICAgICovXG4gICAgc2V0UmVzb3VyY2UocmVzb3VyY2U6IFJlc291cmNlKTogdGhpc1xuICAgIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb3VyY2UgPT09IHJlc291cmNlKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJlc291cmNlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbiBiZSBzZXQgb25seSBvbmNlJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvdXJjZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMucmVzb3VyY2UgPSByZXNvdXJjZTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnZhbGlkYXRlcyB0aGUgb2JqZWN0LiBUZXh0dXJlIGJlY29tZXMgdmFsaWQgaWYgd2lkdGggYW5kIGhlaWdodCBhcmUgZ3JlYXRlciB0aGFuIHplcm8uXG4gICAgICovXG4gICAgdXBkYXRlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy52YWxpZClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMud2lkdGggPiAwICYmIHRoaXMuaGVpZ2h0ID4gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2xvYWRlZCcsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgndXBkYXRlJywgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5SWQrKztcbiAgICAgICAgICAgIHRoaXMuZGlydHlTdHlsZUlkKys7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3VwZGF0ZScsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGVycm9ycyB3aXRoIHJlc291cmNlcy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RXJyb3JFdmVudH0gZXZlbnQgLSBFcnJvciBldmVudCBlbWl0dGVkLlxuICAgICAqL1xuICAgIG9uRXJyb3IoZXZlbnQ6IEVycm9yRXZlbnQpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgdGhpcywgZXZlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoaXMgYmFzZSB0ZXh0dXJlLlxuICAgICAqIFRoZSBtZXRob2Qgc3RvcHMgaWYgcmVzb3VyY2UgZG9lc24ndCB3YW50IHRoaXMgdGV4dHVyZSB0byBiZSBkZXN0cm95ZWQuXG4gICAgICogUmVtb3ZlcyB0ZXh0dXJlIGZyb20gYWxsIGNhY2hlcy5cbiAgICAgKi9cbiAgICBkZXN0cm95KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIHJlbW92ZSBhbmQgZGVzdHJveSB0aGUgcmVzb3VyY2VcbiAgICAgICAgaWYgKHRoaXMucmVzb3VyY2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucmVzb3VyY2UudW5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgLy8gb25seSBkZXN0cm95IHJlc291cmNlZCBjcmVhdGVkIGludGVybmFsbHlcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc291cmNlLmludGVybmFsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzb3VyY2UuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jYWNoZUlkKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZWxldGUgQmFzZVRleHR1cmVDYWNoZVt0aGlzLmNhY2hlSWRdO1xuICAgICAgICAgICAgZGVsZXRlIFRleHR1cmVDYWNoZVt0aGlzLmNhY2hlSWRdO1xuXG4gICAgICAgICAgICB0aGlzLmNhY2hlSWQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmluYWxseSBsZXQgdGhlIFdlYkdMIHJlbmRlcmVyIGtub3cuLlxuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcblxuICAgICAgICBCYXNlVGV4dHVyZS5yZW1vdmVGcm9tQ2FjaGUodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dHVyZUNhY2hlSWRzID0gbnVsbDtcblxuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnJlZXMgdGhlIHRleHR1cmUgZnJvbSBXZWJHTCBtZW1vcnkgd2l0aG91dCBkZXN0cm95aW5nIHRoaXMgdGV4dHVyZSBvYmplY3QuXG4gICAgICogVGhpcyBtZWFucyB5b3UgY2FuIHN0aWxsIHVzZSB0aGUgdGV4dHVyZSBsYXRlciB3aGljaCB3aWxsIHVwbG9hZCBpdCB0byBHUFVcbiAgICAgKiBtZW1vcnkgYWdhaW4uXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUElYSS5CYXNlVGV4dHVyZSNkaXNwb3NlXG4gICAgICovXG4gICAgZGlzcG9zZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc3Bvc2UnLCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciBCYXNlVGV4dHVyZXxUZXh0dXJlIGNhc3RcbiAgICAgKi9cbiAgICBjYXN0VG9CYXNlVGV4dHVyZSgpOiBCYXNlVGV4dHVyZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIGJhc2UgdGV4dHVyZSBiYXNlZCBvbiB0aGUgc291cmNlIHlvdSBwcm92aWRlLlxuICAgICAqIFRoZSBzb3VyY2UgY2FuIGJlIC0gaW1hZ2UgdXJsLCBpbWFnZSBlbGVtZW50LCBjYW52YXMgZWxlbWVudC4gSWYgdGhlXG4gICAgICogc291cmNlIGlzIGFuIGltYWdlIHVybCBvciBhbiBpbWFnZSBlbGVtZW50IGFuZCBub3QgaW4gdGhlIGJhc2UgdGV4dHVyZVxuICAgICAqIGNhY2hlLCBpdCB3aWxsIGJlIGNyZWF0ZWQgYW5kIGxvYWRlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fFNWR0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gc291cmNlIC0gVGhlXG4gICAgICogICAgICAgIHNvdXJjZSB0byBjcmVhdGUgYmFzZSB0ZXh0dXJlIGZyb20uXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSBTZWUge0BsaW5rIFBJWEkuQmFzZVRleHR1cmV9J3MgY29uc3RydWN0b3IgZm9yIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc3RyaWN0XSAtIEVuZm9yY2Ugc3RyaWN0LW1vZGUsIHNlZSB7QGxpbmsgUElYSS5zZXR0aW5ncy5TVFJJQ1RfVEVYVFVSRV9DQUNIRX0uXG4gICAgICogQHJldHVybnMge1BJWEkuQmFzZVRleHR1cmV9IFRoZSBuZXcgYmFzZSB0ZXh0dXJlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tKHNvdXJjZTogSW1hZ2VTb3VyY2V8c3RyaW5nLCBvcHRpb25zOiBJQmFzZVRleHR1cmVPcHRpb25zLFxuICAgICAgICBzdHJpY3QgPSBzZXR0aW5ncy5TVFJJQ1RfVEVYVFVSRV9DQUNIRSk6IEJhc2VUZXh0dXJlXG4gICAge1xuICAgICAgICBjb25zdCBpc0ZyYW1lID0gdHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZyc7XG4gICAgICAgIGxldCBjYWNoZUlkID0gbnVsbDtcblxuICAgICAgICBpZiAoaXNGcmFtZSlcbiAgICAgICAge1xuICAgICAgICAgICAgY2FjaGVJZCA9IHNvdXJjZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghKHNvdXJjZSBhcyBhbnkpLl9waXhpSWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgKHNvdXJjZSBhcyBhbnkpLl9waXhpSWQgPSBgcGl4aWlkXyR7dWlkKCl9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FjaGVJZCA9IChzb3VyY2UgYXMgYW55KS5fcGl4aUlkO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJhc2VUZXh0dXJlID0gQmFzZVRleHR1cmVDYWNoZVtjYWNoZUlkXTtcblxuICAgICAgICAvLyBTdHJpY3QtbW9kZSByZWplY3RzIGludmFsaWQgY2FjaGVJZHNcbiAgICAgICAgaWYgKGlzRnJhbWUgJiYgc3RyaWN0ICYmICFiYXNlVGV4dHVyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgY2FjaGVJZCBcIiR7Y2FjaGVJZH1cIiBkb2VzIG5vdCBleGlzdCBpbiBCYXNlVGV4dHVyZUNhY2hlLmApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiYXNlVGV4dHVyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgYmFzZVRleHR1cmUgPSBuZXcgQmFzZVRleHR1cmUoc291cmNlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGJhc2VUZXh0dXJlLmNhY2hlSWQgPSBjYWNoZUlkO1xuICAgICAgICAgICAgQmFzZVRleHR1cmUuYWRkVG9DYWNoZShiYXNlVGV4dHVyZSwgY2FjaGVJZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYmFzZVRleHR1cmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEJhc2VUZXh0dXJlIHdpdGggYSBCdWZmZXJSZXNvdXJjZSBmcm9tIGEgRmxvYXQzMkFycmF5LlxuICAgICAqIFJHQkEgdmFsdWVzIGFyZSBmbG9hdHMgZnJvbSAwIHRvIDEuXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fFVpbnQ4QXJyYXl9IGJ1ZmZlciAtIFRoZSBvcHRpb25hbCBhcnJheSB0byB1c2UsIGlmIG5vIGRhdGFcbiAgICAgKiAgICAgICAgaXMgcHJvdmlkZWQsIGEgbmV3IEZsb2F0MzJBcnJheSBpcyBjcmVhdGVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFdpZHRoIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgLSBIZWlnaHQgb2YgdGhlIHJlc291cmNlXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSBTZWUge0BsaW5rIFBJWEkuQmFzZVRleHR1cmV9J3MgY29uc3RydWN0b3IgZm9yIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7UElYSS5CYXNlVGV4dHVyZX0gVGhlIHJlc3VsdGluZyBuZXcgQmFzZVRleHR1cmVcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUJ1ZmZlcihidWZmZXI6IEZsb2F0MzJBcnJheXxVaW50OEFycmF5LFxuICAgICAgICB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgb3B0aW9uczogSUJhc2VUZXh0dXJlT3B0aW9ucyk6IEJhc2VUZXh0dXJlXG4gICAge1xuICAgICAgICBidWZmZXIgPSBidWZmZXIgfHwgbmV3IEZsb2F0MzJBcnJheSh3aWR0aCAqIGhlaWdodCAqIDQpO1xuXG4gICAgICAgIGNvbnN0IHJlc291cmNlID0gbmV3IEJ1ZmZlclJlc291cmNlKGJ1ZmZlciwgeyB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgICAgICBjb25zdCB0eXBlID0gYnVmZmVyIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5ID8gVFlQRVMuRkxPQVQgOiBUWVBFUy5VTlNJR05FRF9CWVRFO1xuXG4gICAgICAgIHJldHVybiBuZXcgQmFzZVRleHR1cmUocmVzb3VyY2UsIE9iamVjdC5hc3NpZ24oZGVmYXVsdEJ1ZmZlck9wdGlvbnMsIG9wdGlvbnMgfHwgeyB3aWR0aCwgaGVpZ2h0LCB0eXBlIH0pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgQmFzZVRleHR1cmUgdG8gdGhlIGdsb2JhbCBCYXNlVGV4dHVyZUNhY2hlLiBUaGlzIGNhY2hlIGlzIHNoYXJlZCBhY3Jvc3MgdGhlIHdob2xlIFBJWEkgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSBUaGUgQmFzZVRleHR1cmUgdG8gYWRkIHRvIHRoZSBjYWNoZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgdGhhdCB0aGUgQmFzZVRleHR1cmUgd2lsbCBiZSBzdG9yZWQgYWdhaW5zdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYWRkVG9DYWNoZShiYXNlVGV4dHVyZTogQmFzZVRleHR1cmUsIGlkOiBzdHJpbmcpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChiYXNlVGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMuaW5kZXhPZihpZCkgPT09IC0xKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJhc2VUZXh0dXJlLnRleHR1cmVDYWNoZUlkcy5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKEJhc2VUZXh0dXJlQ2FjaGVbaWRdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBCYXNlVGV4dHVyZSBhZGRlZCB0byB0aGUgY2FjaGUgd2l0aCBhbiBpZCBbJHtpZH1dIHRoYXQgYWxyZWFkeSBoYWQgYW4gZW50cnlgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQmFzZVRleHR1cmVDYWNoZVtpZF0gPSBiYXNlVGV4dHVyZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIEJhc2VUZXh0dXJlIGZyb20gdGhlIGdsb2JhbCBCYXNlVGV4dHVyZUNhY2hlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfFBJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlIC0gaWQgb2YgYSBCYXNlVGV4dHVyZSB0byBiZSByZW1vdmVkLCBvciBhIEJhc2VUZXh0dXJlIGluc3RhbmNlIGl0c2VsZi5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkJhc2VUZXh0dXJlfG51bGx9IFRoZSBCYXNlVGV4dHVyZSB0aGF0IHdhcyByZW1vdmVkLlxuICAgICAqL1xuICAgIHN0YXRpYyByZW1vdmVGcm9tQ2FjaGUoYmFzZVRleHR1cmU6IHN0cmluZyB8IEJhc2VUZXh0dXJlKTogQmFzZVRleHR1cmV8bnVsbFxuICAgIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiYXNlVGV4dHVyZSA9PT0gJ3N0cmluZycpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGJhc2VUZXh0dXJlRnJvbUNhY2hlID0gQmFzZVRleHR1cmVDYWNoZVtiYXNlVGV4dHVyZV07XG5cbiAgICAgICAgICAgIGlmIChiYXNlVGV4dHVyZUZyb21DYWNoZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGJhc2VUZXh0dXJlRnJvbUNhY2hlLnRleHR1cmVDYWNoZUlkcy5pbmRleE9mKGJhc2VUZXh0dXJlKTtcblxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVRleHR1cmVGcm9tQ2FjaGUudGV4dHVyZUNhY2hlSWRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVsZXRlIEJhc2VUZXh0dXJlQ2FjaGVbYmFzZVRleHR1cmVdO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhc2VUZXh0dXJlRnJvbUNhY2hlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJhc2VUZXh0dXJlICYmIGJhc2VUZXh0dXJlLnRleHR1cmVDYWNoZUlkcylcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXNlVGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIEJhc2VUZXh0dXJlQ2FjaGVbYmFzZVRleHR1cmUudGV4dHVyZUNhY2hlSWRzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmFzZVRleHR1cmUudGV4dHVyZUNhY2hlSWRzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgIHJldHVybiBiYXNlVGV4dHVyZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdsb2JhbCBudW1iZXIgb2YgdGhlIHRleHR1cmUgYmF0Y2gsIHVzZWQgYnkgbXVsdGktdGV4dHVyZSByZW5kZXJlcnNcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3RhdGljIF9nbG9iYWxCYXRjaCA9IDA7XG59XG4iLCAiaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tICcuL1Jlc291cmNlJztcbmltcG9ydCB7IEJhc2VUZXh0dXJlIH0gZnJvbSAnLi4vQmFzZVRleHR1cmUnO1xuaW1wb3J0IHsgSVNpemUgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB7IGF1dG9EZXRlY3RSZXNvdXJjZSwgSUF1dG9EZXRlY3RPcHRpb25zIH0gZnJvbSAnLi9hdXRvRGV0ZWN0UmVzb3VyY2UnO1xuXG4vKipcbiAqIFJlc291cmNlIHRoYXQgY2FuIG1hbmFnZSBzZXZlcmFsIHJlc291cmNlIChpdGVtcykgaW5zaWRlLlxuICogQWxsIHJlc291cmNlcyBuZWVkIHRvIGhhdmUgdGhlIHNhbWUgcGl4ZWwgc2l6ZS5cbiAqIFBhcmVudCBjbGFzcyBmb3IgQ3ViZVJlc291cmNlIGFuZCBBcnJheVJlc291cmNlXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLnJlc291cmNlcy5SZXNvdXJjZVxuICogQG1lbWJlcm9mIFBJWEkucmVzb3VyY2VzXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMgdG8gZm9yIFJlc291cmNlIGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGhdIC0gV2lkdGggb2YgdGhlIHJlc291cmNlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaGVpZ2h0XSAtIEhlaWdodCBvZiB0aGUgcmVzb3VyY2VcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0TXVsdGlSZXNvdXJjZSBleHRlbmRzIFJlc291cmNlXG57XG4gICAgcmVhZG9ubHkgbGVuZ3RoOiBudW1iZXI7XG4gICAgaXRlbXM6IEFycmF5PEJhc2VUZXh0dXJlPjtcbiAgICBpdGVtRGlydHlJZHM6IEFycmF5PG51bWJlcj47XG4gICAgcHJpdmF0ZSBfbG9hZDogUHJvbWlzZTx0aGlzPjtcblxuICAgIGJhc2VUZXh0dXJlOiBCYXNlVGV4dHVyZTtcblxuICAgIGNvbnN0cnVjdG9yKGxlbmd0aDogbnVtYmVyLCBvcHRpb25zPzogSVNpemUpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgc3VwZXIod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb2xsZWN0aW9uIG9mIHBhcnRpYWwgYmFzZVRleHR1cmVzIHRoYXQgY29ycmVzcG9uZCB0byByZXNvdXJjZXNcbiAgICAgICAgICogQG1lbWJlciB7QXJyYXk8UElYSS5CYXNlVGV4dHVyZT59XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXJ0eSBJRHMgZm9yIGVhY2ggcGFydFxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXRlbURpcnR5SWRzID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcGFydFRleHR1cmUgPSBuZXcgQmFzZVRleHR1cmUoKTtcblxuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKHBhcnRUZXh0dXJlKTtcbiAgICAgICAgICAgIC8vIC0yIC0gZmlyc3QgcnVuIG9mIHRleHR1cmUgYXJyYXkgdXBsb2FkXG4gICAgICAgICAgICAvLyAtMSAtIHRleHR1cmUgaXRlbSB3YXMgYWxsb2NhdGVkXG4gICAgICAgICAgICAvLyA+PTAgLSB0ZXh0dXJlIGl0ZW0gdXBsb2FkZWQgLCBpbiBzeW5jIHdpdGggaXRlbXNbaV0uZGlydHlJZFxuICAgICAgICAgICAgdGhpcy5pdGVtRGlydHlJZHMucHVzaCgtMik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTnVtYmVyIG9mIGVsZW1lbnRzIGluIGFycmF5XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvbWlzZSB3aGVuIGxvYWRpbmdcbiAgICAgICAgICogQG1lbWJlciB7UHJvbWlzZX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fbG9hZCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJvdW5kIGJhc2VUZXh0dXJlLCB0aGVyZSBjYW4gb25seSBiZSBvbmVcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5CYXNlVGV4dHVyZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmFzZVRleHR1cmUgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHVzZWQgZnJvbSBBcnJheVJlc291cmNlIGFuZCBDdWJlUmVzb3VyY2UgY29uc3RydWN0b3JzXG4gICAgICogQHBhcmFtIHtBcnJheTwqPn0gcmVzb3VyY2VzIC0gQ2FuIGJlIHJlc291cmNlcywgaW1hZ2UgZWxlbWVudHMsIGNhbnZhcywgZXRjLiAsXG4gICAgICogIGxlbmd0aCBzaG91bGQgYmUgc2FtZSBhcyBjb25zdHJ1Y3RvciBsZW5ndGhcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gZGV0ZWN0IG9wdGlvbnMgZm9yIHJlc291cmNlc1xuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgaW5pdEZyb21BcnJheShyZXNvdXJjZXM6IEFycmF5PGFueT4sIG9wdGlvbnM/OiBJQXV0b0RldGVjdE9wdGlvbnMpOiB2b2lkXG4gICAge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghcmVzb3VyY2VzW2ldKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc291cmNlc1tpXS5jYXN0VG9CYXNlVGV4dHVyZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEJhc2VUZXh0dXJlQXQocmVzb3VyY2VzW2ldLmNhc3RUb0Jhc2VUZXh0dXJlKCksIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVzb3VyY2VzW2ldIGluc3RhbmNlb2YgUmVzb3VyY2UpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSZXNvdXJjZUF0KHJlc291cmNlc1tpXSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSZXNvdXJjZUF0KGF1dG9EZXRlY3RSZXNvdXJjZShyZXNvdXJjZXNbaV0sIG9wdGlvbnMpLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgdGhpcyBCYXNlSW1hZ2VSZXNvdXJjZVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGRpc3Bvc2UoKTogdm9pZFxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaV0uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXRlbXMgPSBudWxsO1xuICAgICAgICB0aGlzLml0ZW1EaXJ0eUlkcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2xvYWQgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBhIGJhc2VUZXh0dXJlIGJ5IElEXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gWmVyby1iYXNlZCBpbmRleCBvZiByZXNvdXJjZSB0byBzZXRcbiAgICAgKiBAcmV0dXJuIHtQSVhJLnJlc291cmNlcy5BYnN0cmFjdE11bHRpUmVzb3VyY2V9IEluc3RhbmNlIGZvciBjaGFpbmluZ1xuICAgICAqL1xuICAgIGFic3RyYWN0IGFkZEJhc2VUZXh0dXJlQXQoYmFzZVRleHR1cmU6IEJhc2VUZXh0dXJlLCBpbmRleDogbnVtYmVyKTogdGhpcztcblxuICAgIC8qKlxuICAgICAqIFNldCBhIHJlc291cmNlIGJ5IElEXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkucmVzb3VyY2VzLlJlc291cmNlfSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFplcm8tYmFzZWQgaW5kZXggb2YgcmVzb3VyY2UgdG8gc2V0XG4gICAgICogQHJldHVybiB7UElYSS5yZXNvdXJjZXMuQXJyYXlSZXNvdXJjZX0gSW5zdGFuY2UgZm9yIGNoYWluaW5nXG4gICAgICovXG4gICAgYWRkUmVzb3VyY2VBdChyZXNvdXJjZTogUmVzb3VyY2UsIGluZGV4OiBudW1iZXIpOiB0aGlzXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuaXRlbXNbaW5kZXhdKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluZGV4ICR7aW5kZXh9IGlzIG91dCBvZiBib3VuZHNgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluaGVyaXQgdGhlIGZpcnN0IHJlc291cmNlIGRpbWVuc2lvbnNcbiAgICAgICAgaWYgKHJlc291cmNlLnZhbGlkICYmICF0aGlzLnZhbGlkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZShyZXNvdXJjZS53aWR0aCwgcmVzb3VyY2UuaGVpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLnNldFJlc291cmNlKHJlc291cmNlKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHBhcmVudCBiYXNlIHRleHR1cmVcbiAgICAgKiBAbWVtYmVyIHtQSVhJLkJhc2VUZXh0dXJlfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGJpbmQoYmFzZVRleHR1cmU6IEJhc2VUZXh0dXJlKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuYmFzZVRleHR1cmUgIT09IG51bGwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBvbmUgYmFzZSB0ZXh0dXJlIHBlciBUZXh0dXJlQXJyYXkgaXMgYWxsb3dlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmJpbmQoYmFzZVRleHR1cmUpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5wYXJlbnRUZXh0dXJlQXJyYXkgPSBiYXNlVGV4dHVyZTtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaV0ub24oJ3VwZGF0ZScsIGJhc2VUZXh0dXJlLnVwZGF0ZSwgYmFzZVRleHR1cmUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5zZXQgdGhlIHBhcmVudCBiYXNlIHRleHR1cmVcbiAgICAgKiBAbWVtYmVyIHtQSVhJLkJhc2VUZXh0dXJlfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHVuYmluZChiYXNlVGV4dHVyZTogQmFzZVRleHR1cmUpOiB2b2lkXG4gICAge1xuICAgICAgICBzdXBlci51bmJpbmQoYmFzZVRleHR1cmUpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5wYXJlbnRUZXh0dXJlQXJyYXkgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5vZmYoJ3VwZGF0ZScsIGJhc2VUZXh0dXJlLnVwZGF0ZSwgYmFzZVRleHR1cmUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCBhbGwgdGhlIHJlc291cmNlcyBzaW11bHRhbmVvdXNseVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59IFdoZW4gbG9hZCBpcyByZXNvbHZlZFxuICAgICAqL1xuICAgIGxvYWQoKTogUHJvbWlzZTx0aGlzPlxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2xvYWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzb3VyY2VzID0gdGhpcy5pdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0ucmVzb3VyY2UpLmZpbHRlcigoaXRlbSkgPT4gaXRlbSk7XG5cbiAgICAgICAgLy8gVE9ETzogYWxzbyBpbXBsZW1lbnQgbG9hZCBwYXJ0LWJ5LXBhcnQgc3RyYXRlZ3lcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSByZXNvdXJjZXMubWFwKChpdGVtKSA9PiBpdGVtLmxvYWQoKSk7XG5cbiAgICAgICAgdGhpcy5fbG9hZCA9IFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHJlYWxXaWR0aCwgcmVhbEhlaWdodCB9ID0gdGhpcy5pdGVtc1swXTtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplKHJlYWxXaWR0aCwgcmVhbEhlaWdodCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fbG9hZDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQWJzdHJhY3RNdWx0aVJlc291cmNlIH0gZnJvbSAnLi9BYnN0cmFjdE11bHRpUmVzb3VyY2UnO1xuaW1wb3J0IHsgVEFSR0VUUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBCYXNlVGV4dHVyZSB9IGZyb20gJy4uL0Jhc2VUZXh0dXJlJztcblxuaW1wb3J0IHR5cGUgeyBCYXNlSW1hZ2VSZXNvdXJjZSB9IGZyb20gJy4vQmFzZUltYWdlUmVzb3VyY2UnO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uLy4uL1JlbmRlcmVyJztcbmltcG9ydCB0eXBlIHsgR0xUZXh0dXJlIH0gZnJvbSAnLi4vR0xUZXh0dXJlJztcbmltcG9ydCB0eXBlIHsgSVNpemUgfSBmcm9tICdAcGl4aS9tYXRoJztcblxuLyoqXG4gKiBBIHJlc291cmNlIHRoYXQgY29udGFpbnMgYSBudW1iZXIgb2Ygc291cmNlcy5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkucmVzb3VyY2VzLlJlc291cmNlXG4gKiBAbWVtYmVyb2YgUElYSS5yZXNvdXJjZXNcbiAqIEBwYXJhbSB7bnVtYmVyfEFycmF5PCo+fSBzb3VyY2UgLSBOdW1iZXIgb2YgaXRlbXMgaW4gYXJyYXkgb3IgdGhlIGNvbGxlY3Rpb25cbiAqICAgICAgICBvZiBpbWFnZSBVUkxzIHRvIHVzZS4gQ2FuIGFsc28gYmUgcmVzb3VyY2VzLCBpbWFnZSBlbGVtZW50cywgY2FudmFzLCBldGMuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyB0byBhcHBseSB0byB7QGxpbmsgUElYSS5yZXNvdXJjZXMuYXV0b0RldGVjdFJlc291cmNlfVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoXSAtIFdpZHRoIG9mIHRoZSByZXNvdXJjZVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmhlaWdodF0gLSBIZWlnaHQgb2YgdGhlIHJlc291cmNlXG4gKi9cbmV4cG9ydCBjbGFzcyBBcnJheVJlc291cmNlIGV4dGVuZHMgQWJzdHJhY3RNdWx0aVJlc291cmNlXG57XG4gICAgY29uc3RydWN0b3Ioc291cmNlOiBudW1iZXJ8QXJyYXk8YW55Piwgb3B0aW9ucz86IElTaXplKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGxldCB1cmxzO1xuICAgICAgICBsZXQgbGVuZ3RoOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlKSlcbiAgICAgICAge1xuICAgICAgICAgICAgdXJscyA9IHNvdXJjZTtcbiAgICAgICAgICAgIGxlbmd0aCA9IHNvdXJjZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBsZW5ndGggPSBzb3VyY2U7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihsZW5ndGgsIHsgd2lkdGgsIGhlaWdodCB9KTtcblxuICAgICAgICBpZiAodXJscylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5pbml0RnJvbUFycmF5KHVybHMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhIGJhc2VUZXh0dXJlIGJ5IElELFxuICAgICAqIEFycmF5UmVzb3VyY2UganVzdCB0YWtlcyByZXNvdXJjZSBmcm9tIGl0LCBub3RoaW5nIG1vcmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBaZXJvLWJhc2VkIGluZGV4IG9mIHJlc291cmNlIHRvIHNldFxuICAgICAqIEByZXR1cm4ge1BJWEkucmVzb3VyY2VzLkFycmF5UmVzb3VyY2V9IEluc3RhbmNlIGZvciBjaGFpbmluZ1xuICAgICAqL1xuICAgIGFkZEJhc2VUZXh0dXJlQXQoYmFzZVRleHR1cmU6IEJhc2VUZXh0dXJlLCBpbmRleDogbnVtYmVyKTogdGhpc1xuICAgIHtcbiAgICAgICAgaWYgKGJhc2VUZXh0dXJlLnJlc291cmNlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmFkZFJlc291cmNlQXQoYmFzZVRleHR1cmUucmVzb3VyY2UsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXJyYXlSZXNvdXJjZSBkb2VzIG5vdCBzdXBwb3J0IFJlbmRlclRleHR1cmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBiaW5kaW5nXG4gICAgICogQG1lbWJlciB7UElYSS5CYXNlVGV4dHVyZX1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBiaW5kKGJhc2VUZXh0dXJlOiBCYXNlVGV4dHVyZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIHN1cGVyLmJpbmQoYmFzZVRleHR1cmUpO1xuXG4gICAgICAgIGJhc2VUZXh0dXJlLnRhcmdldCA9IFRBUkdFVFMuVEVYVFVSRV8yRF9BUlJBWTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGxvYWQgdGhlIHJlc291cmNlcyB0byB0aGUgR1BVLlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IHRleHR1cmVcbiAgICAgKiBAcGFyYW0ge1BJWEkuR0xUZXh0dXJlfSBnbFRleHR1cmVcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0ZXh0dXJlIHdhcyB1cGxvYWRlZFxuICAgICAqL1xuICAgIHVwbG9hZChyZW5kZXJlcjogUmVuZGVyZXIsIHRleHR1cmU6IEJhc2VUZXh0dXJlLCBnbFRleHR1cmU6IEdMVGV4dHVyZSk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIGNvbnN0IHsgbGVuZ3RoLCBpdGVtRGlydHlJZHMsIGl0ZW1zIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB7IGdsIH0gPSByZW5kZXJlcjtcblxuICAgICAgICBpZiAoZ2xUZXh0dXJlLmRpcnR5SWQgPCAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC50ZXhJbWFnZTNEKFxuICAgICAgICAgICAgICAgIGdsLlRFWFRVUkVfMkRfQVJSQVksXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmZvcm1hdCxcbiAgICAgICAgICAgICAgICB0aGlzLl93aWR0aCxcbiAgICAgICAgICAgICAgICB0aGlzLl9oZWlnaHQsXG4gICAgICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdGV4dHVyZS5mb3JtYXQsXG4gICAgICAgICAgICAgICAgdGV4dHVyZS50eXBlLFxuICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbaV07XG5cbiAgICAgICAgICAgIGlmIChpdGVtRGlydHlJZHNbaV0gPCBpdGVtLmRpcnR5SWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbURpcnR5SWRzW2ldID0gaXRlbS5kaXJ0eUlkO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnZhbGlkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZ2wudGV4U3ViSW1hZ2UzRChcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsLlRFWFRVUkVfMkRfQVJSQVksXG4gICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgMCwgLy8geG9mZnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgMCwgLy8geW9mZnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgaSwgLy8gem9mZnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5yZXNvdXJjZS53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVzb3VyY2UuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUuZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgKGl0ZW0ucmVzb3VyY2UgYXMgQmFzZUltYWdlUmVzb3VyY2UpLnNvdXJjZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gJy4vUmVzb3VyY2UnO1xuaW1wb3J0IHsgZGV0ZXJtaW5lQ3Jvc3NPcmlnaW4gfSBmcm9tICdAcGl4aS91dGlscyc7XG5pbXBvcnQgeyBBTFBIQV9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbmltcG9ydCB0eXBlIHsgQmFzZVRleHR1cmUsIEltYWdlU291cmNlIH0gZnJvbSAnLi4vQmFzZVRleHR1cmUnO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uLy4uL1JlbmRlcmVyJztcbmltcG9ydCB0eXBlIHsgR0xUZXh0dXJlIH0gZnJvbSAnLi4vR0xUZXh0dXJlJztcbi8qKlxuICogQmFzZSBmb3IgYWxsIHRoZSBpbWFnZS9jYW52YXMgcmVzb3VyY2VzXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkucmVzb3VyY2VzLlJlc291cmNlXG4gKiBAbWVtYmVyb2YgUElYSS5yZXNvdXJjZXNcbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VJbWFnZVJlc291cmNlIGV4dGVuZHMgUmVzb3VyY2VcbntcbiAgICBwdWJsaWMgc291cmNlOiBJbWFnZVNvdXJjZTtcbiAgICBwdWJsaWMgbm9TdWJJbWFnZTogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fFNWR0VsZW1lbnR9IHNvdXJjZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZTogSW1hZ2VTb3VyY2UpXG4gICAge1xuICAgICAgICBjb25zdCBzb3VyY2VBbnkgPSBzb3VyY2UgYXMgYW55O1xuICAgICAgICBjb25zdCB3aWR0aCA9IHNvdXJjZUFueS5uYXR1cmFsV2lkdGggfHwgc291cmNlQW55LnZpZGVvV2lkdGggfHwgc291cmNlQW55LndpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBzb3VyY2VBbnkubmF0dXJhbEhlaWdodCB8fCBzb3VyY2VBbnkudmlkZW9IZWlnaHQgfHwgc291cmNlQW55LmhlaWdodDtcblxuICAgICAgICBzdXBlcih3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNvdXJjZSBlbGVtZW50XG4gICAgICAgICAqIEBtZW1iZXIge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxTVkdFbGVtZW50fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBzZXQgdG8gYHRydWVgLCB3aWxsIGZvcmNlIGB0ZXhJbWFnZTJEYCBvdmVyIGB0ZXhTdWJJbWFnZTJEYCBmb3IgdXBsb2FkaW5nLlxuICAgICAgICAgKiBDZXJ0YWluIHR5cGVzIG9mIG1lZGlhIChlLmcuIHZpZGVvKSB1c2luZyBgdGV4SW1hZ2UyRGAgaXMgbW9yZSBwZXJmb3JtYW50LlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ub1N1YkltYWdlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGNyb3NzIG9yaWdpbiBiYXNlZCBkZXRlY3RpbmcgdGhlIHVybCBhbmQgdGhlIGNyb3Nzb3JpZ2luXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSBFbGVtZW50IHRvIGFwcGx5IGNyb3NzT3JpZ2luXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFVSTCB0byBjaGVja1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IFtjcm9zc29yaWdpbj10cnVlXSAtIENyb3NzIG9yaWdpbiB2YWx1ZSB0byB1c2VcbiAgICAgKi9cbiAgICBzdGF0aWMgY3Jvc3NPcmlnaW4oZWxlbWVudDogSFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50LCB1cmw6IHN0cmluZywgY3Jvc3NvcmlnaW46IGJvb2xlYW58c3RyaW5nKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKGNyb3Nzb3JpZ2luID09PSB1bmRlZmluZWQgJiYgdXJsLmluZGV4T2YoJ2RhdGE6JykgIT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY3Jvc3NPcmlnaW4gPSBkZXRlcm1pbmVDcm9zc09yaWdpbih1cmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNyb3Nzb3JpZ2luICE9PSBmYWxzZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZWxlbWVudC5jcm9zc09yaWdpbiA9IHR5cGVvZiBjcm9zc29yaWdpbiA9PT0gJ3N0cmluZycgPyBjcm9zc29yaWdpbiA6ICdhbm9ueW1vdXMnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBsb2FkIHRoZSB0ZXh0dXJlIHRvIHRoZSBHUFUuXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFVwbG9hZCB0byB0aGUgcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlIC0gUmVmZXJlbmNlIHRvIHBhcmVudCB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtQSVhJLkdMVGV4dHVyZX0gZ2xUZXh0dXJlXG4gICAgICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8U1ZHRWxlbWVudH0gW3NvdXJjZV0gKG9wdGlvbmFsKVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlzIHN1Y2Nlc3NcbiAgICAgKi9cbiAgICB1cGxvYWQocmVuZGVyZXI6IFJlbmRlcmVyLCBiYXNlVGV4dHVyZTogQmFzZVRleHR1cmUsIGdsVGV4dHVyZTogR0xUZXh0dXJlLCBzb3VyY2U/OiBJbWFnZVNvdXJjZSk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIGNvbnN0IGdsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gYmFzZVRleHR1cmUucmVhbFdpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBiYXNlVGV4dHVyZS5yZWFsSGVpZ2h0O1xuXG4gICAgICAgIHNvdXJjZSA9IHNvdXJjZSB8fCB0aGlzLnNvdXJjZTtcblxuICAgICAgICBnbC5waXhlbFN0b3JlaShnbC5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsIGJhc2VUZXh0dXJlLmFscGhhTW9kZSA9PT0gQUxQSEFfTU9ERVMuVU5QQUNLKTtcblxuICAgICAgICBpZiAoIXRoaXMubm9TdWJJbWFnZVxuICAgICAgICAgICAgJiYgYmFzZVRleHR1cmUudGFyZ2V0ID09PSBnbC5URVhUVVJFXzJEXG4gICAgICAgICAgICAmJiBnbFRleHR1cmUud2lkdGggPT09IHdpZHRoXG4gICAgICAgICAgICAmJiBnbFRleHR1cmUuaGVpZ2h0ID09PSBoZWlnaHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsLnRleFN1YkltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgMCwgMCwgYmFzZVRleHR1cmUuZm9ybWF0LCBiYXNlVGV4dHVyZS50eXBlLCBzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgZ2xUZXh0dXJlLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBnbFRleHR1cmUuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgICAgICBnbC50ZXhJbWFnZTJEKGJhc2VUZXh0dXJlLnRhcmdldCwgMCwgYmFzZVRleHR1cmUuZm9ybWF0LCBiYXNlVGV4dHVyZS5mb3JtYXQsIGJhc2VUZXh0dXJlLnR5cGUsIHNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgc291cmNlIHdpZHRoL2hlaWdodCB3YXMgY2hhbmdlZCwgcmVzaXplIGNhbiBjYXVzZSBleHRyYSBiYXNlVGV4dHVyZSB1cGRhdGUuXG4gICAgICogVHJpZ2dlcnMgb25lIHVwZGF0ZSBpbiBhbnkgY2FzZS5cbiAgICAgKi9cbiAgICB1cGRhdGUoKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnNvdXJjZSBhcyBhbnk7XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSBzb3VyY2UubmF0dXJhbFdpZHRoIHx8IHNvdXJjZS52aWRlb1dpZHRoIHx8IHNvdXJjZS53aWR0aDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gc291cmNlLm5hdHVyYWxIZWlnaHQgfHwgc291cmNlLnZpZGVvSGVpZ2h0IHx8IHNvdXJjZS5oZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5yZXNpemUod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgc3VwZXIudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveSB0aGlzIEJhc2VJbWFnZVJlc291cmNlXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZGlzcG9zZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IG51bGw7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEJhc2VJbWFnZVJlc291cmNlIH0gZnJvbSAnLi9CYXNlSW1hZ2VSZXNvdXJjZSc7XG5cbi8qKlxuICogQGludGVyZmFjZSBPZmZzY3JlZW5DYW52YXNcbiAqL1xuXG4vKipcbiAqIFJlc291cmNlIHR5cGUgZm9yIEhUTUxDYW52YXNFbGVtZW50LlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLnJlc291cmNlcy5CYXNlSW1hZ2VSZXNvdXJjZVxuICogQG1lbWJlcm9mIFBJWEkucmVzb3VyY2VzXG4gKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBzb3VyY2UgLSBDYW52YXMgZWxlbWVudCB0byB1c2VcbiAqL1xuZXhwb3J0IGNsYXNzIENhbnZhc1Jlc291cmNlIGV4dGVuZHMgQmFzZUltYWdlUmVzb3VyY2VcbntcbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGF1dG8tZGV0ZWN0IHRoZSB0eXBlIG9mIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8T2Zmc2NyZWVuQ2FudmFzfSBzb3VyY2UgLSBUaGUgc291cmNlIG9iamVjdFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiBzb3VyY2UgaXMgSFRNTENhbnZhc0VsZW1lbnQgb3IgT2Zmc2NyZWVuQ2FudmFzXG4gICAgICovXG4gICAgc3RhdGljIHRlc3Qoc291cmNlOiB1bmtub3duKTogc291cmNlIGlzIE9mZnNjcmVlbkNhbnZhc3xIVE1MQ2FudmFzRWxlbWVudFxuICAgIHtcbiAgICAgICAgY29uc3QgeyBPZmZzY3JlZW5DYW52YXMgfSA9IHdpbmRvdztcblxuICAgICAgICAvLyBDaGVjayBmb3IgYnJvd3NlcnMgdGhhdCBkb24ndCB5ZXQgc3VwcG9ydCBPZmZzY3JlZW5DYW52YXNcbiAgICAgICAgaWYgKE9mZnNjcmVlbkNhbnZhcyAmJiBzb3VyY2UgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNvdXJjZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50O1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBYnN0cmFjdE11bHRpUmVzb3VyY2UgfSBmcm9tICcuL0Fic3RyYWN0TXVsdGlSZXNvdXJjZSc7XG5pbXBvcnQgeyBUQVJHRVRTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcblxuaW1wb3J0IHR5cGUgeyBSZXNvdXJjZSB9IGZyb20gJy4vUmVzb3VyY2UnO1xuaW1wb3J0IHR5cGUgeyBJU2l6ZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHR5cGUgeyBBcnJheUZpeGVkIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBCYXNlVGV4dHVyZSB9IGZyb20gJy4uL0Jhc2VUZXh0dXJlJztcbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi8uLi9SZW5kZXJlcic7XG5pbXBvcnQgdHlwZSB7IEdMVGV4dHVyZSB9IGZyb20gJy4uL0dMVGV4dHVyZSc7XG5cbi8qKlxuICogQ29uc3RydWN0b3Igb3B0aW9ucyBmb3IgQ3ViZVJlc291cmNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUN1YmVSZXNvdXJjZU9wdGlvbnMgZXh0ZW5kcyBJU2l6ZVxue1xuICAgIGF1dG9Mb2FkPzogYm9vbGVhbjtcbiAgICBsaW5rQmFzZVRleHR1cmU/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFJlc291cmNlIGZvciBhIEN1YmVUZXh0dXJlIHdoaWNoIGNvbnRhaW5zIHNpeCByZXNvdXJjZXMuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLnJlc291cmNlcy5BcnJheVJlc291cmNlXG4gKiBAbWVtYmVyb2YgUElYSS5yZXNvdXJjZXNcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nfFBJWEkucmVzb3VyY2VzLlJlc291cmNlPn0gW3NvdXJjZV0gLSBDb2xsZWN0aW9uIG9mIFVSTHMgb3IgcmVzb3VyY2VzXG4gKiAgICAgICAgdG8gdXNlIGFzIHRoZSBzaWRlcyBvZiB0aGUgY3ViZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBJbWFnZVJlc291cmNlIG9wdGlvbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy53aWR0aF0gLSBXaWR0aCBvZiByZXNvdXJjZVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmhlaWdodF0gLSBIZWlnaHQgb2YgcmVzb3VyY2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5hdXRvTG9hZD10cnVlXSAtIFdoZXRoZXIgdG8gYXV0by1sb2FkIHJlc291cmNlc1xuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmxpbmtCYXNlVGV4dHVyZT10cnVlXSAtIEluIGNhc2UgQmFzZVRleHR1cmVzIGFyZSBzdXBwbGllZCxcbiAqICAgd2hldGhlciB0byBjb3B5IHRoZW0gb3IgdXNlXG4gKi9cbmV4cG9ydCBjbGFzcyBDdWJlUmVzb3VyY2UgZXh0ZW5kcyBBYnN0cmFjdE11bHRpUmVzb3VyY2VcbntcbiAgICBpdGVtczogQXJyYXlGaXhlZDxCYXNlVGV4dHVyZSwgNj47XG5cbiAgICBsaW5rQmFzZVRleHR1cmU6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2U/OiBBcnJheUZpeGVkPHN0cmluZ3xSZXNvdXJjZSwgNj4sIG9wdGlvbnM/OiBJQ3ViZVJlc291cmNlT3B0aW9ucylcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCwgYXV0b0xvYWQsIGxpbmtCYXNlVGV4dHVyZSB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoc291cmNlICYmIHNvdXJjZS5sZW5ndGggIT09IEN1YmVSZXNvdXJjZS5TSURFUylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGxlbmd0aC4gR290ICR7c291cmNlLmxlbmd0aH0sIGV4cGVjdGVkIDZgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKDYsIHsgd2lkdGgsIGhlaWdodCB9KTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEN1YmVSZXNvdXJjZS5TSURFUzsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zW2ldLnRhcmdldCA9IFRBUkdFVFMuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YICsgaTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbiBjYXNlIEJhc2VUZXh0dXJlcyBhcmUgc3VwcGxpZWQsIHdoZXRoZXIgdG8gdXNlIHNhbWUgcmVzb3VyY2Ugb3IgYmluZCBiYXNlVGV4dHVyZSBpdHNlbGZcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saW5rQmFzZVRleHR1cmUgPSBsaW5rQmFzZVRleHR1cmUgIT09IGZhbHNlO1xuXG4gICAgICAgIGlmIChzb3VyY2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdEZyb21BcnJheShzb3VyY2UsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGF1dG9Mb2FkICE9PSBmYWxzZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYmluZGluZ1xuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSBiYXNlVGV4dHVyZSAtIHBhcmVudCBiYXNlIHRleHR1cmVcbiAgICAgKi9cbiAgICBiaW5kKGJhc2VUZXh0dXJlOiBCYXNlVGV4dHVyZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIHN1cGVyLmJpbmQoYmFzZVRleHR1cmUpO1xuXG4gICAgICAgIGJhc2VUZXh0dXJlLnRhcmdldCA9IFRBUkdFVFMuVEVYVFVSRV9DVUJFX01BUDtcbiAgICB9XG5cbiAgICBhZGRCYXNlVGV4dHVyZUF0KGJhc2VUZXh0dXJlOiBCYXNlVGV4dHVyZSwgaW5kZXg6IG51bWJlciwgbGlua0Jhc2VUZXh0dXJlPzogYm9vbGVhbik6IHRoaXNcbiAgICB7XG4gICAgICAgIGlmIChsaW5rQmFzZVRleHR1cmUgPT09IHVuZGVmaW5lZClcbiAgICAgICAge1xuICAgICAgICAgICAgbGlua0Jhc2VUZXh0dXJlID0gdGhpcy5saW5rQmFzZVRleHR1cmU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuaXRlbXNbaW5kZXhdKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluZGV4ICR7aW5kZXh9IGlzIG91dCBvZiBib3VuZHNgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5saW5rQmFzZVRleHR1cmVcbiAgICAgICAgICAgIHx8IGJhc2VUZXh0dXJlLnBhcmVudFRleHR1cmVBcnJheVxuICAgICAgICAgICAgfHwgT2JqZWN0LmtleXMoYmFzZVRleHR1cmUuX2dsVGV4dHVyZXMpLmxlbmd0aCA+IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGNvcHkgbW9kZVxuICAgICAgICAgICAgaWYgKGJhc2VUZXh0dXJlLnJlc291cmNlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVzb3VyY2VBdChiYXNlVGV4dHVyZS5yZXNvdXJjZSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ3ViZVJlc291cmNlIGRvZXMgbm90IHN1cHBvcnQgY29weWluZyBvZiByZW5kZXJUZXh0dXJlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gbGluayBtb2RlLCB0aGUgZGlmZmljdWx0IG9uZSFcbiAgICAgICAgICAgIGJhc2VUZXh0dXJlLnRhcmdldCA9IFRBUkdFVFMuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YICsgaW5kZXg7XG4gICAgICAgICAgICBiYXNlVGV4dHVyZS5wYXJlbnRUZXh0dXJlQXJyYXkgPSB0aGlzLmJhc2VUZXh0dXJlO1xuXG4gICAgICAgICAgICB0aGlzLml0ZW1zW2luZGV4XSA9IGJhc2VUZXh0dXJlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJhc2VUZXh0dXJlLnZhbGlkICYmICF0aGlzLnZhbGlkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZShiYXNlVGV4dHVyZS5yZWFsV2lkdGgsIGJhc2VUZXh0dXJlLnJlYWxIZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pdGVtc1tpbmRleF0gPSBiYXNlVGV4dHVyZTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGxvYWQgdGhlIHJlc291cmNlXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpcyBzdWNjZXNzXG4gICAgICovXG4gICAgdXBsb2FkKHJlbmRlcmVyOiBSZW5kZXJlciwgX2Jhc2VUZXh0dXJlOiBCYXNlVGV4dHVyZSwgZ2xUZXh0dXJlOiBHTFRleHR1cmUpOiBib29sZWFuXG4gICAge1xuICAgICAgICBjb25zdCBkaXJ0eSA9IHRoaXMuaXRlbURpcnR5SWRzO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ3ViZVJlc291cmNlLlNJREVTOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHNpZGUgPSB0aGlzLml0ZW1zW2ldO1xuXG4gICAgICAgICAgICBpZiAoZGlydHlbaV0gPCBzaWRlLmRpcnR5SWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHNpZGUudmFsaWQgJiYgc2lkZS5yZXNvdXJjZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNpZGUucmVzb3VyY2UudXBsb2FkKHJlbmRlcmVyLCBzaWRlLCBnbFRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICBkaXJ0eVtpXSA9IHNpZGUuZGlydHlJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlydHlbaV0gPCAtMSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVpdGhlciBpdGVtIGlzIG5vdCB2YWxpZCB5ZXQsIGVpdGhlciBpdHMgYSByZW5kZXJUZXh0dXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSBtZW1vcnlcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuZ2wudGV4SW1hZ2UyRChzaWRlLnRhcmdldCwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsVGV4dHVyZS5pbnRlcm5hbEZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iYXNlVGV4dHVyZS5yZWFsV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBfYmFzZVRleHR1cmUucmVhbEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBfYmFzZVRleHR1cmUuZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xUZXh0dXJlLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgZGlydHlbaV0gPSAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgdGV4dHVyZSBzaWRlcyB0byBzdG9yZSBmb3IgQ3ViZVJlc291cmNlc1xuICAgICAqXG4gICAgICogQG5hbWUgUElYSS5yZXNvdXJjZXMuQ3ViZVJlc291cmNlLlNJREVTXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCA2XG4gICAgICovXG4gICAgc3RhdGljIFNJREVTID0gNjtcblxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gYXV0by1kZXRlY3QgdGhlIHR5cGUgb2YgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHNvdXJjZSAtIFRoZSBzb3VyY2Ugb2JqZWN0XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHNvdXJjZSBpcyBhbiBhcnJheSBvZiA2IGVsZW1lbnRzXG4gICAgICovXG4gICAgc3RhdGljIHRlc3Qoc291cmNlOiB1bmtub3duKTogc291cmNlIGlzIEFycmF5Rml4ZWQ8c3RyaW5nfFJlc291cmNlLCA2PlxuICAgIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoc291cmNlKSAmJiBzb3VyY2UubGVuZ3RoID09PSBDdWJlUmVzb3VyY2UuU0lERVM7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEJhc2VJbWFnZVJlc291cmNlIH0gZnJvbSAnLi9CYXNlSW1hZ2VSZXNvdXJjZSc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcbmltcG9ydCB7IEFMUEhBX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcblxuaW1wb3J0IHR5cGUgeyBCYXNlVGV4dHVyZSB9IGZyb20gJy4uL0Jhc2VUZXh0dXJlJztcbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi8uLi9SZW5kZXJlcic7XG5pbXBvcnQgdHlwZSB7IEdMVGV4dHVyZSB9IGZyb20gJy4uL0dMVGV4dHVyZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUltYWdlUmVzb3VyY2VPcHRpb25zXG57XG4gICAgYXV0b0xvYWQ/OiBib29sZWFuO1xuICAgIGNyZWF0ZUJpdG1hcD86IGJvb2xlYW47XG4gICAgY3Jvc3NvcmlnaW4/OiBib29sZWFufHN0cmluZztcbiAgICBhbHBoYU1vZGU/OiBBTFBIQV9NT0RFUztcbn1cblxuLyoqXG4gKiBSZXNvdXJjZSB0eXBlIGZvciBIVE1MSW1hZ2VFbGVtZW50LlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLnJlc291cmNlcy5CYXNlSW1hZ2VSZXNvdXJjZVxuICogQG1lbWJlcm9mIFBJWEkucmVzb3VyY2VzXG4gKi9cbmV4cG9ydCBjbGFzcyBJbWFnZVJlc291cmNlIGV4dGVuZHMgQmFzZUltYWdlUmVzb3VyY2VcbntcbiAgICB1cmw6IHN0cmluZztcbiAgICBwcml2YXRlIF9sb2FkOiBQcm9taXNlPEltYWdlUmVzb3VyY2U+O1xuICAgIHByaXZhdGUgX3Byb2Nlc3M6IFByb21pc2U8SW1hZ2VSZXNvdXJjZT47XG4gICAgcHJlc2VydmVCaXRtYXA6IGJvb2xlYW47XG4gICAgY3JlYXRlQml0bWFwOiBib29sZWFuO1xuICAgIGFscGhhTW9kZTogQUxQSEFfTU9ERVM7XG4gICAgYml0bWFwOiBJbWFnZUJpdG1hcDtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR8c3RyaW5nfSBzb3VyY2UgLSBpbWFnZSBzb3VyY2Ugb3IgVVJMXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b0xvYWQ9dHJ1ZV0gLSBzdGFydCBsb2FkaW5nIHByb2Nlc3NcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyZWF0ZUJpdG1hcD1QSVhJLnNldHRpbmdzLkNSRUFURV9JTUFHRV9CSVRNQVBdIC0gd2hldGhlciBpdHMgcmVxdWlyZWQgdG8gY3JlYXRlXG4gICAgICogICAgICAgIGEgYml0bWFwIGJlZm9yZSB1cGxvYWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3Nzb3JpZ2luPXRydWVdIC0gTG9hZCBpbWFnZSB1c2luZyBjcm9zcyBvcmlnaW5cbiAgICAgKiBAcGFyYW0ge1BJWEkuQUxQSEFfTU9ERVN9IFtvcHRpb25zLmFscGhhTW9kZT1QSVhJLkFMUEhBX01PREVTLlVOUEFDS10gLSBQcmVtdWx0aXBseSBpbWFnZSBhbHBoYSBpbiBiaXRtYXBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2U6IEhUTUxJbWFnZUVsZW1lbnR8c3RyaW5nLCBvcHRpb25zPzogSUltYWdlUmVzb3VyY2VPcHRpb25zKVxuICAgIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IG5ldyBJbWFnZSgpO1xuXG4gICAgICAgICAgICBCYXNlSW1hZ2VSZXNvdXJjZS5jcm9zc09yaWdpbihpbWFnZUVsZW1lbnQsIHNvdXJjZSwgb3B0aW9ucy5jcm9zc29yaWdpbik7XG5cbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5zcmMgPSBzb3VyY2U7XG4gICAgICAgICAgICBzb3VyY2UgPSBpbWFnZUVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihzb3VyY2UpO1xuXG4gICAgICAgIC8vIEZpcmVGb3ggNjgsIGFuZCBwb3NzaWJseSBvdGhlciB2ZXJzaW9ucywgc2VlbXMgbGlrZSBzZXR0aW5nIHRoZSBIVE1MSW1hZ2VFbGVtZW50I3dpZHRoIGFuZCAjaGVpZ2h0XG4gICAgICAgIC8vIHRvIG5vbi16ZXJvIHZhbHVlcyBiZWZvcmUgaXRzIGxvYWRpbmcgY29tcGxldGVzIGlmIGltYWdlcyBhcmUgaW4gYSBjYWNoZS5cbiAgICAgICAgLy8gQmVjYXVzZSBvZiB0aGlzLCBuZWVkIHRvIHNldCB0aGUgYF93aWR0aGAgYW5kIHRoZSBgX2hlaWdodGAgdG8gemVybyB0byBhdm9pZCB1cGxvYWRpbmcgaW5jb21wbGV0ZSBpbWFnZXMuXG4gICAgICAgIC8vIFBsZWFzZSByZWZlciB0byB0aGUgaXNzdWUgIzU5NjggKGh0dHBzOi8vZ2l0aHViLmNvbS9waXhpanMvcGl4aS5qcy9pc3N1ZXMvNTk2OCkuXG4gICAgICAgIGlmICghc291cmNlLmNvbXBsZXRlICYmICEhdGhpcy5fd2lkdGggJiYgISF0aGlzLl9oZWlnaHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3dpZHRoID0gMDtcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVVJMIG9mIHRoZSBpbWFnZSBzb3VyY2VcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cmwgPSBzb3VyY2Uuc3JjO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHByb2Nlc3MgaXMgY29tcGxldGVkXG4gICAgICAgICAqIEBtZW1iZXIge1Byb21pc2U8dm9pZD59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9wcm9jZXNzID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIGltYWdlIHNob3VsZCBiZSBkaXNwb3NlZCBhZnRlciB1cGxvYWRcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJlc2VydmVCaXRtYXAgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgY2FwYWJsZSwgY29udmVydCB0aGUgaW1hZ2UgdXNpbmcgY3JlYXRlSW1hZ2VCaXRtYXAgQVBJXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuc2V0dGluZ3MuQ1JFQVRFX0lNQUdFX0JJVE1BUFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jcmVhdGVCaXRtYXAgPSAob3B0aW9ucy5jcmVhdGVCaXRtYXAgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmNyZWF0ZUJpdG1hcCA6IHNldHRpbmdzLkNSRUFURV9JTUFHRV9CSVRNQVApICYmICEhd2luZG93LmNyZWF0ZUltYWdlQml0bWFwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250cm9scyB0ZXh0dXJlIGFscGhhTW9kZSBmaWVsZFxuICAgICAgICAgKiBDb3BpZXMgZnJvbSBvcHRpb25zXG4gICAgICAgICAqIERlZmF1bHQgaXMgYG51bGxgLCBjb3BpZXMgb3B0aW9uIGZyb20gYmFzZVRleHR1cmVcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5BTFBIQV9NT0RFU3xudWxsfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWxwaGFNb2RlID0gdHlwZW9mIG9wdGlvbnMuYWxwaGFNb2RlID09PSAnbnVtYmVyJyA/IG9wdGlvbnMuYWxwaGFNb2RlIDogbnVsbDtcblxuICAgICAgICBpZiAoKG9wdGlvbnMgYXMgYW55KS5wcmVtdWx0aXBseUFscGhhICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIHRyaWdnZXJzIGRlcHJlY2F0aW9uXG4gICAgICAgICAgICAodGhpcyBhcyBhbnkpLnByZW11bHRpcGx5QWxwaGEgPSAob3B0aW9ucyBhcyBhbnkpLnByZW11bHRpcGx5QWxwaGE7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIEltYWdlQml0bWFwIGVsZW1lbnQgY3JlYXRlZCBmb3IgSFRNTEltYWdlRWxlbWVudFxuICAgICAgICAgKiBAbWVtYmVyIHtJbWFnZUJpdG1hcH1cbiAgICAgICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iaXRtYXAgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9taXNlIHdoZW4gbG9hZGluZ1xuICAgICAgICAgKiBAbWVtYmVyIHtQcm9taXNlPHZvaWQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAZGVmYXVsdCBudWxsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9sb2FkID0gbnVsbDtcblxuICAgICAgICBpZiAob3B0aW9ucy5hdXRvTG9hZCAhPT0gZmFsc2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBhIHByb21pc2Ugd2hlbiBpbWFnZSB3aWxsIGJlIGxvYWRlZCBhbmQgcHJvY2Vzc2VkXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjcmVhdGVCaXRtYXBdIC0gd2hldGhlciBwcm9jZXNzIGltYWdlIGludG8gYml0bWFwXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAgICovXG4gICAgbG9hZChjcmVhdGVCaXRtYXA/OiBib29sZWFuKTogUHJvbWlzZTxJbWFnZVJlc291cmNlPlxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2xvYWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNyZWF0ZUJpdG1hcCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUJpdG1hcCA9IGNyZWF0ZUJpdG1hcDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xvYWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KTogdm9pZCA9PlxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnNvdXJjZSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuXG4gICAgICAgICAgICB0aGlzLnVybCA9IHNvdXJjZS5zcmM7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZCA9ICgpOiB2b2lkID0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzb3VyY2Uub25sb2FkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzb3VyY2Uub25lcnJvciA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZShzb3VyY2Uud2lkdGgsIHNvdXJjZS5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3JlYXRlQml0bWFwKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnByb2Nlc3MoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHNvdXJjZS5jb21wbGV0ZSAmJiBzb3VyY2Uuc3JjKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNvdXJjZS5vbmxvYWQgPSBjb21wbGV0ZWQ7XG4gICAgICAgICAgICAgICAgc291cmNlLm9uZXJyb3IgPSAoZXZlbnQpOiB2b2lkID0+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBBdm9pZHMgUHJvbWlzZSBmcmVlemluZyB3aGVuIHJlc291cmNlIGJyb2tlblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IuZW1pdChldmVudCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gd2UgbmVlZCB0byBjb252ZXJ0IGltYWdlIGludG8gQml0bWFwSW1hZ2UuXG4gICAgICogQ2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcywgcmVhbCBwcm9taXNlIGlzIGNhY2hlZCBpbnNpZGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0gY2FjaGVkIHByb21pc2UgdG8gZmlsbCB0aGF0IGJpdG1hcFxuICAgICAqL1xuICAgIHByb2Nlc3MoKTogUHJvbWlzZTxJbWFnZVJlc291cmNlPlxuICAgIHtcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5zb3VyY2UgYXMgSFRNTEltYWdlRWxlbWVudDtcblxuICAgICAgICBpZiAodGhpcy5fcHJvY2VzcyAhPT0gbnVsbClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYml0bWFwICE9PSBudWxsIHx8ICF3aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wcm9jZXNzID0gKHdpbmRvdy5jcmVhdGVJbWFnZUJpdG1hcCBhcyBhbnkpKHNvdXJjZSxcbiAgICAgICAgICAgIDAsIDAsIHNvdXJjZS53aWR0aCwgc291cmNlLmhlaWdodCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcmVtdWx0aXBseUFscGhhOiB0aGlzLmFscGhhTW9kZSA9PT0gQUxQSEFfTU9ERVMuVU5QQUNLID8gJ3ByZW11bHRpcGx5JyA6ICdub25lJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoYml0bWFwOiBJbWFnZUJpdG1hcCkgPT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5iaXRtYXAgPSBiaXRtYXA7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2VzcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGxvYWQgdGhlIGltYWdlIHJlc291cmNlIHRvIEdQVS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBSZW5kZXJlciB0byB1cGxvYWQgdG9cbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlIC0gQmFzZVRleHR1cmUgZm9yIHRoaXMgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0ge1BJWEkuR0xUZXh0dXJlfSBnbFRleHR1cmUgLSBHTFRleHR1cmUgdG8gdXNlXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaXMgc3VjY2Vzc1xuICAgICAqL1xuICAgIHVwbG9hZChyZW5kZXJlcjogUmVuZGVyZXIsIGJhc2VUZXh0dXJlOiBCYXNlVGV4dHVyZSwgZ2xUZXh0dXJlOiBHTFRleHR1cmUpOiBib29sZWFuXG4gICAge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuYWxwaGFNb2RlID09PSAnbnVtYmVyJylcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gYml0bWFwIHN0b3JlcyB1bnBhY2sgcHJlbXVsdGlwbHkgZmxhZywgd2UgZG9udCBoYXZlIHRvIG5vdGlmeSB0ZXhJbWFnZTJEIGFib3V0IGl0XG5cbiAgICAgICAgICAgIGJhc2VUZXh0dXJlLmFscGhhTW9kZSA9IHRoaXMuYWxwaGFNb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmNyZWF0ZUJpdG1hcClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnVwbG9hZChyZW5kZXJlciwgYmFzZVRleHR1cmUsIGdsVGV4dHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmJpdG1hcClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8geWVhaCwgaWdub3JlIHRoZSBvdXRwdXRcbiAgICAgICAgICAgIHRoaXMucHJvY2VzcygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJpdG1hcClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlci51cGxvYWQocmVuZGVyZXIsIGJhc2VUZXh0dXJlLCBnbFRleHR1cmUsIHRoaXMuYml0bWFwKTtcblxuICAgICAgICBpZiAoIXRoaXMucHJlc2VydmVCaXRtYXApXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGNoZWNrcyBpZiB0aGVyZSBhcmUgb3RoZXIgcmVuZGVyZXJzIHRoYXQgcG9zc2libHkgbmVlZCB0aGlzIGJpdG1hcFxuXG4gICAgICAgICAgICBsZXQgZmxhZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGdsVGV4dHVyZXMgPSBiYXNlVGV4dHVyZS5fZ2xUZXh0dXJlcztcblxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZ2xUZXh0dXJlcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdGhlclRleCA9IGdsVGV4dHVyZXNba2V5XTtcblxuICAgICAgICAgICAgICAgIGlmIChvdGhlclRleCAhPT0gZ2xUZXh0dXJlICYmIG90aGVyVGV4LmRpcnR5SWQgIT09IGJhc2VUZXh0dXJlLmRpcnR5SWQpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZsYWcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0bWFwLmNsb3NlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaXRtYXAuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmJpdG1hcCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIHRleHR1cmVcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBkaXNwb3NlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgICh0aGlzLnNvdXJjZSBhcyBIVE1MSW1hZ2VFbGVtZW50KS5vbmxvYWQgPSBudWxsO1xuICAgICAgICAodGhpcy5zb3VyY2UgYXMgSFRNTEltYWdlRWxlbWVudCkub25lcnJvciA9IG51bGw7XG5cbiAgICAgICAgc3VwZXIuZGlzcG9zZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLmJpdG1hcClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5iaXRtYXAuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuYml0bWFwID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcm9jZXNzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fbG9hZCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZCB0byBhdXRvLWRldGVjdCB0aGUgdHlwZSBvZiByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xIVE1MSW1hZ2VFbGVtZW50fSBzb3VyY2UgLSBUaGUgc291cmNlIG9iamVjdFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiBzb3VyY2UgaXMgc3RyaW5nIG9yIEhUTUxJbWFnZUVsZW1lbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgdGVzdChzb3VyY2U6IHVua25vd24pOiBzb3VyY2UgaXMgc3RyaW5nfEhUTUxJbWFnZUVsZW1lbnRcbiAgICB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJyB8fCBzb3VyY2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyB1aWQgfSBmcm9tICdAcGl4aS91dGlscyc7XG5pbXBvcnQgeyBCYXNlSW1hZ2VSZXNvdXJjZSB9IGZyb20gJy4vQmFzZUltYWdlUmVzb3VyY2UnO1xuXG5pbXBvcnQgdHlwZSB7IElTaXplIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNWR1Jlc291cmNlT3B0aW9uc1xue1xuICAgIHNvdXJjZT86IHN0cmluZztcbiAgICBzY2FsZT86IG51bWJlcjtcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgYXV0b0xvYWQ/OiBib29sZWFuO1xuICAgIGNyb3Nzb3JpZ2luPzogYm9vbGVhbnxzdHJpbmc7XG59XG4vKipcbiAqIFJlc291cmNlIHR5cGUgZm9yIFNWRyBlbGVtZW50cyBhbmQgZ3JhcGhpY3MuXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkucmVzb3VyY2VzLkJhc2VJbWFnZVJlc291cmNlXG4gKiBAbWVtYmVyb2YgUElYSS5yZXNvdXJjZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2UgLSBCYXNlNjQgZW5jb2RlZCBTVkcgZWxlbWVudCBvciBVUkwgZm9yIFNWRyBmaWxlLlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgdG8gdXNlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuc2NhbGU9MV0gLSBTY2FsZSB0byBhcHBseSB0byBTVkcuIE92ZXJyaWRkZW4gYnkuLi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy53aWR0aF0gLSBSYXN0ZXJpemUgU1ZHIHRoaXMgd2lkZS4gQXNwZWN0IHJhdGlvIHByZXNlcnZlZCBpZiBoZWlnaHQgbm90IHNwZWNpZmllZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5oZWlnaHRdIC0gUmFzdGVyaXplIFNWRyB0aGlzIGhpZ2guIEFzcGVjdCByYXRpbyBwcmVzZXJ2ZWQgaWYgd2lkdGggbm90IHNwZWNpZmllZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b0xvYWQ9dHJ1ZV0gLSBTdGFydCBsb2FkaW5nIHJpZ2h0IGF3YXkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTVkdSZXNvdXJjZSBleHRlbmRzIEJhc2VJbWFnZVJlc291cmNlXG57XG4gICAgcHVibGljIHJlYWRvbmx5IHN2Zzogc3RyaW5nO1xuICAgIHB1YmxpYyByZWFkb25seSBzY2FsZTogbnVtYmVyO1xuICAgIHJlYWRvbmx5IF9vdmVycmlkZVdpZHRoOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgX292ZXJyaWRlSGVpZ2h0OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfcmVzb2x2ZTogKCkgPT4gdm9pZDtcbiAgICBwcml2YXRlIF9sb2FkOiBQcm9taXNlPFNWR1Jlc291cmNlPjtcbiAgICBwcml2YXRlIF9jcm9zc29yaWdpbj86IGJvb2xlYW58c3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3Ioc291cmNlQmFzZTY0OiBzdHJpbmcsIG9wdGlvbnM6IElTVkdSZXNvdXJjZU9wdGlvbnMpXG4gICAge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBzdXBlcihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSk7XG4gICAgICAgIHRoaXMuX3dpZHRoID0gMDtcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQmFzZTY0IGVuY29kZWQgU1ZHIGVsZW1lbnQgb3IgVVJMIGZvciBTVkcgZmlsZVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdmcgPSBzb3VyY2VCYXNlNjQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzb3VyY2Ugc2NhbGUgdG8gYXBwbHkgd2hlbiByYXN0ZXJpemluZyBvbiBsb2FkXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjYWxlID0gb3B0aW9ucy5zY2FsZSB8fCAxO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHdpZHRoIG92ZXJyaWRlIGZvciByYXN0ZXJpemF0aW9uIG9uIGxvYWRcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX292ZXJyaWRlV2lkdGggPSBvcHRpb25zLndpZHRoO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGhlaWdodCBvdmVycmlkZSBmb3IgcmFzdGVyaXphdGlvbiBvbiBsb2FkXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9vdmVycmlkZUhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsIHdoZW4gY29tcGxldGVseSBsb2FkZWRcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7ZnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9yZXNvbHZlID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3Jvc3Mgb3JpZ2luIHZhbHVlIHRvIHVzZVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufHN0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2Nyb3Nzb3JpZ2luID0gb3B0aW9ucy5jcm9zc29yaWdpbjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvbWlzZSB3aGVuIGxvYWRpbmdcbiAgICAgICAgICogQG1lbWJlciB7UHJvbWlzZTx2b2lkPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fbG9hZCA9IG51bGw7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYXV0b0xvYWQgIT09IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmxvYWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvYWQoKTogUHJvbWlzZTxTVkdSZXNvdXJjZT5cbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9sb2FkKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xvYWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSk6IHZvaWQgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGlzIHVudGlsIGFmdGVyIGxvYWQgaXMgZmluaXNoZWRcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUgPSAoKTogdm9pZCA9PlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplKHRoaXMuc291cmNlLndpZHRoLCB0aGlzLnNvdXJjZS5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBDb252ZXJ0IFNWRyBpbmxpbmUgc3RyaW5nIHRvIGRhdGEtdXJpXG4gICAgICAgICAgICBpZiAoKC9eXFw8c3ZnLykudGVzdCh0aGlzLnN2Zy50cmltKCkpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmICghYnRvYSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91ciBicm93c2VyIGRvZXNuXFwndCBzdXBwb3J0IGJhc2U2NCBjb252ZXJzaW9ucy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKHRoaXMgYXMgYW55KS5zdmcgPSBgZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwke2J0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuc3ZnKSkpfWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2xvYWRTdmcoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgYW4gU1ZHIGltYWdlIGZyb20gYGltYWdlVXJsYCBvciBgZGF0YSBVUkxgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIF9sb2FkU3ZnKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHRlbXBJbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG4gICAgICAgIEJhc2VJbWFnZVJlc291cmNlLmNyb3NzT3JpZ2luKHRlbXBJbWFnZSwgdGhpcy5zdmcsIHRoaXMuX2Nyb3Nzb3JpZ2luKTtcbiAgICAgICAgdGVtcEltYWdlLnNyYyA9IHRoaXMuc3ZnO1xuXG4gICAgICAgIHRlbXBJbWFnZS5vbmVycm9yID0gKGV2ZW50KTogdm9pZCA9PlxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3Jlc29sdmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZW1wSW1hZ2Uub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IuZW1pdChldmVudCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGVtcEltYWdlLm9ubG9hZCA9ICgpOiB2b2lkID0+XG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fcmVzb2x2ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHN2Z1dpZHRoID0gdGVtcEltYWdlLndpZHRoO1xuICAgICAgICAgICAgY29uc3Qgc3ZnSGVpZ2h0ID0gdGVtcEltYWdlLmhlaWdodDtcblxuICAgICAgICAgICAgaWYgKCFzdmdXaWR0aCB8fCAhc3ZnSGVpZ2h0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFNWRyBpbWFnZSBtdXN0IGhhdmUgd2lkdGggYW5kIGhlaWdodCBkZWZpbmVkIChpbiBwaXhlbHMpLCBjYW52YXMgQVBJIG5lZWRzIHRoZW0uJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldCByZW5kZXIgc2l6ZVxuICAgICAgICAgICAgbGV0IHdpZHRoID0gc3ZnV2lkdGggKiB0aGlzLnNjYWxlO1xuICAgICAgICAgICAgbGV0IGhlaWdodCA9IHN2Z0hlaWdodCAqIHRoaXMuc2NhbGU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9vdmVycmlkZVdpZHRoIHx8IHRoaXMuX292ZXJyaWRlSGVpZ2h0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy5fb3ZlcnJpZGVXaWR0aCB8fCB0aGlzLl9vdmVycmlkZUhlaWdodCAvIHN2Z0hlaWdodCAqIHN2Z1dpZHRoO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IHRoaXMuX292ZXJyaWRlSGVpZ2h0IHx8IHRoaXMuX292ZXJyaWRlV2lkdGggLyBzdmdXaWR0aCAqIHN2Z0hlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdpZHRoID0gTWF0aC5yb3VuZCh3aWR0aCk7XG4gICAgICAgICAgICBoZWlnaHQgPSBNYXRoLnJvdW5kKGhlaWdodCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGNhbnZhcyBlbGVtZW50XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLnNvdXJjZSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcblxuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgKGNhbnZhcyBhcyBhbnkpLl9waXhpSWQgPSBgY2FudmFzXyR7dWlkKCl9YDtcblxuICAgICAgICAgICAgLy8gRHJhdyB0aGUgU3ZnIHRvIHRoZSBjYW52YXNcbiAgICAgICAgICAgIGNhbnZhc1xuICAgICAgICAgICAgICAgIC5nZXRDb250ZXh0KCcyZCcpXG4gICAgICAgICAgICAgICAgLmRyYXdJbWFnZSh0ZW1wSW1hZ2UsIDAsIDAsIHN2Z1dpZHRoLCBzdmdIZWlnaHQsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKCk7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgc2l6ZSBmcm9tIGFuIHN2ZyBzdHJpbmcgdXNpbmcgcmVnZXhwLlxuICAgICAqXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdmdTdHJpbmcgLSBhIHNlcmlhbGl6ZWQgc3ZnIGVsZW1lbnRcbiAgICAgKiBAcmV0dXJuIHtQSVhJLklTaXplfSBpbWFnZSBleHRlbnNpb25cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0U2l6ZShzdmdTdHJpbmc/OiBzdHJpbmcpOiBJU2l6ZVxuICAgIHtcbiAgICAgICAgY29uc3Qgc2l6ZU1hdGNoID0gU1ZHUmVzb3VyY2UuU1ZHX1NJWkUuZXhlYyhzdmdTdHJpbmcpO1xuICAgICAgICBjb25zdCBzaXplOiBhbnkgPSB7fTtcblxuICAgICAgICBpZiAoc2l6ZU1hdGNoKVxuICAgICAgICB7XG4gICAgICAgICAgICBzaXplW3NpemVNYXRjaFsxXV0gPSBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoc2l6ZU1hdGNoWzNdKSk7XG4gICAgICAgICAgICBzaXplW3NpemVNYXRjaFs1XV0gPSBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoc2l6ZU1hdGNoWzddKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIHRleHR1cmVcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBkaXNwb3NlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2Nyb3Nzb3JpZ2luID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGF1dG8tZGV0ZWN0IHRoZSB0eXBlIG9mIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7Kn0gc291cmNlIC0gVGhlIHNvdXJjZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIC0gVGhlIGV4dGVuc2lvbiBvZiBzb3VyY2UsIGlmIHNldFxuICAgICAqL1xuICAgIHN0YXRpYyB0ZXN0KHNvdXJjZTogdW5rbm93biwgZXh0ZW5zaW9uPzogc3RyaW5nKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgLy8gdXJsIGZpbGUgZXh0ZW5zaW9uIGlzIFNWR1xuICAgICAgICByZXR1cm4gZXh0ZW5zaW9uID09PSAnc3ZnJ1xuICAgICAgICAgICAgLy8gc291cmNlIGlzIFNWRyBkYXRhLXVyaVxuICAgICAgICAgICAgfHwgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnICYmICgvXmRhdGE6aW1hZ2VcXC9zdmdcXCt4bWwoOyhjaGFyc2V0PXV0Zjh8dXRmOCkpPztiYXNlNjQvKS50ZXN0KHNvdXJjZSkpXG4gICAgICAgICAgICAvLyBzb3VyY2UgaXMgU1ZHIGlubGluZVxuICAgICAgICAgICAgfHwgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnICYmIHNvdXJjZS5pbmRleE9mKCc8c3ZnJykgPT09IDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ0V4cCBmb3IgU1ZHIHNpemUuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQGNvbnN0YW50IHtSZWdFeHB8c3RyaW5nfSBTVkdfU0laRVxuICAgICAqIEBtZW1iZXJvZiBQSVhJLnJlc291cmNlcy5TVkdSZXNvdXJjZVxuICAgICAqIEBleGFtcGxlICZsdDtzdmcgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIiZndDsmbHQ7L3N2ZyZndDtcbiAgICAgKi9cbiAgICBzdGF0aWMgU1ZHX1NJWkUgPSAvPHN2Z1tePl0qKD86XFxzKHdpZHRofGhlaWdodCk9KCd8XCIpKFxcZCooPzpcXC5cXGQrKT8pKD86cHgpPygnfFwiKSlbXj5dKig/Olxccyh3aWR0aHxoZWlnaHQpPSgnfFwiKShcXGQqKD86XFwuXFxkKyk/KSg/OnB4KT8oJ3xcIikpW14+XSo+L2k7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbWF4LWxlblxufVxuIiwgImltcG9ydCB7IEJhc2VJbWFnZVJlc291cmNlIH0gZnJvbSAnLi9CYXNlSW1hZ2VSZXNvdXJjZSc7XG5pbXBvcnQgeyBUaWNrZXIgfSBmcm9tICdAcGl4aS90aWNrZXInO1xuXG5pbXBvcnQgdHlwZSB7IERpY3QgfSBmcm9tICdAcGl4aS91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVZpZGVvUmVzb3VyY2VPcHRpb25zXG57XG4gICAgYXV0b0xvYWQ/OiBib29sZWFuO1xuICAgIGF1dG9QbGF5PzogYm9vbGVhbjtcbiAgICB1cGRhdGVGUFM/OiBudW1iZXI7XG4gICAgY3Jvc3NvcmlnaW4/OiBib29sZWFufHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVmlkZW9SZXNvdXJjZU9wdGlvbnNFbGVtZW50XG57XG4gICAgc3JjOiBzdHJpbmc7XG4gICAgbWltZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJlc291cmNlIHR5cGUgZm9yIEhUTUxWaWRlb0VsZW1lbnQuXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkucmVzb3VyY2VzLkJhc2VJbWFnZVJlc291cmNlXG4gKiBAbWVtYmVyb2YgUElYSS5yZXNvdXJjZXNcbiAqIEBwYXJhbSB7SFRNTFZpZGVvRWxlbWVudHxvYmplY3R8c3RyaW5nfEFycmF5PHN0cmluZ3xvYmplY3Q+fSBzb3VyY2UgLSBWaWRlbyBlbGVtZW50IHRvIHVzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIHRvIHVzZVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hdXRvTG9hZD10cnVlXSAtIFN0YXJ0IGxvYWRpbmcgdGhlIHZpZGVvIGltbWVkaWF0ZWx5XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmF1dG9QbGF5PXRydWVdIC0gU3RhcnQgcGxheWluZyB2aWRlbyBpbW1lZGlhdGVseVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnVwZGF0ZUZQUz0wXSAtIEhvdyBtYW55IHRpbWVzIGEgc2Vjb25kIHRvIHVwZGF0ZSB0aGUgdGV4dHVyZSBmcm9tIHRoZSB2aWRlby5cbiAqIExlYXZlIGF0IDAgdG8gdXBkYXRlIGF0IGV2ZXJ5IHJlbmRlci5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY3Jvc3NvcmlnaW49dHJ1ZV0gLSBMb2FkIGltYWdlIHVzaW5nIGNyb3NzIG9yaWdpblxuICovXG5leHBvcnQgY2xhc3MgVmlkZW9SZXNvdXJjZSBleHRlbmRzIEJhc2VJbWFnZVJlc291cmNlXG57XG4gICAgcHJvdGVjdGVkIF9hdXRvVXBkYXRlOiBib29sZWFuO1xuICAgIHByb3RlY3RlZCBfaXNDb25uZWN0ZWRUb1RpY2tlcjogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZUZQUzogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfbXNUb05leHRVcGRhdGU6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgYXV0b1BsYXk6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfbG9hZDogUHJvbWlzZTxWaWRlb1Jlc291cmNlPjtcbiAgICBwcml2YXRlIF9yZXNvbHZlOiAodmFsdWU/OiBWaWRlb1Jlc291cmNlIHwgUHJvbWlzZUxpa2U8VmlkZW9SZXNvdXJjZT4pID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2U/OiBIVE1MVmlkZW9FbGVtZW50fEFycmF5PHN0cmluZ3xJVmlkZW9SZXNvdXJjZU9wdGlvbnNFbGVtZW50PnxzdHJpbmcsIG9wdGlvbnM/OiBJVmlkZW9SZXNvdXJjZU9wdGlvbnMpXG4gICAge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcblxuICAgICAgICAgICAgLy8gd29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL3BpeGlqcy9waXhpLmpzL2lzc3Vlcy81OTk2XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc2V0QXR0cmlidXRlKCdwcmVsb2FkJywgJ2F1dG8nKTtcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICcnKTtcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc291cmNlID0gW3NvdXJjZV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGZpcnN0U3JjID0gKHNvdXJjZVswXSBhcyBJVmlkZW9SZXNvdXJjZU9wdGlvbnNFbGVtZW50KS5zcmMgfHwgc291cmNlWzBdIGFzIHN0cmluZztcblxuICAgICAgICAgICAgQmFzZUltYWdlUmVzb3VyY2UuY3Jvc3NPcmlnaW4odmlkZW9FbGVtZW50LCBmaXJzdFNyYywgb3B0aW9ucy5jcm9zc29yaWdpbik7XG5cbiAgICAgICAgICAgIC8vIGFycmF5IG9mIG9iamVjdHMgb3Igc3RyaW5nc1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xuXG4gICAgICAgICAgICAgICAgbGV0IHsgc3JjLCBtaW1lIH0gPSBzb3VyY2VbaV0gYXMgSVZpZGVvUmVzb3VyY2VPcHRpb25zRWxlbWVudDtcblxuICAgICAgICAgICAgICAgIHNyYyA9IHNyYyB8fCBzb3VyY2VbaV0gYXMgc3RyaW5nO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZVNyYyA9IHNyYy5zcGxpdCgnPycpLnNoaWZ0KCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBleHQgPSBiYXNlU3JjLnN1YnN0cihiYXNlU3JjLmxhc3RJbmRleE9mKCcuJykgKyAxKTtcblxuICAgICAgICAgICAgICAgIG1pbWUgPSBtaW1lIHx8IFZpZGVvUmVzb3VyY2UuTUlNRV9UWVBFU1tleHRdIHx8IGB2aWRlby8ke2V4dH1gO1xuXG4gICAgICAgICAgICAgICAgc291cmNlRWxlbWVudC5zcmMgPSBzcmM7XG4gICAgICAgICAgICAgICAgc291cmNlRWxlbWVudC50eXBlID0gbWltZTtcblxuICAgICAgICAgICAgICAgIHZpZGVvRWxlbWVudC5hcHBlbmRDaGlsZChzb3VyY2VFbGVtZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIHNvdXJjZVxuICAgICAgICAgICAgc291cmNlID0gdmlkZW9FbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIoc291cmNlKTtcblxuICAgICAgICB0aGlzLm5vU3ViSW1hZ2UgPSB0cnVlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgdHJ1ZWAgdG8gdXNlIFBJWEkuVGlja2VyLnNoYXJlZCB0byBhdXRvIHVwZGF0ZSB0aGUgYmFzZSB0ZXh0dXJlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYXV0b1VwZGF0ZSA9IHRydWU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGB0cnVlYCBpZiB0aGUgaW5zdGFuY2UgaXMgY3VycmVudGx5IGNvbm5lY3RlZCB0byBQSVhJLlRpY2tlci5zaGFyZWQgdG8gYXV0byB1cGRhdGUgdGhlIGJhc2UgdGV4dHVyZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlRlBTID0gb3B0aW9ucy51cGRhdGVGUFMgfHwgMDtcbiAgICAgICAgdGhpcy5fbXNUb05leHRVcGRhdGUgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHNldCB0byB0cnVlIHdpbGwgYXV0b21hdGljYWxseSBwbGF5IHZpZGVvcyB1c2VkIGJ5IHRoaXMgdGV4dHVyZSBvbmNlXG4gICAgICAgICAqIHRoZXkgYXJlIGxvYWRlZC4gSWYgZmFsc2UsIGl0IHdpbGwgbm90IG1vZGlmeSB0aGUgcGxheWluZyBzdGF0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hdXRvUGxheSA9IG9wdGlvbnMuYXV0b1BsYXkgIT09IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9taXNlIHdoZW4gbG9hZGluZ1xuICAgICAgICAgKiBAbWVtYmVyIHtQcm9taXNlPHZvaWQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAZGVmYXVsdCBudWxsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9sb2FkID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGJhY2sgd2hlbiBjb21wbGV0ZWQgd2l0aCBsb2FkLlxuICAgICAgICAgKiBAbWVtYmVyIHtmdW5jdGlvbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3Jlc29sdmUgPSBudWxsO1xuXG4gICAgICAgIC8vIEJpbmQgZm9yIGxpc3RlbmVyc1xuICAgICAgICB0aGlzLl9vbkNhblBsYXkgPSB0aGlzLl9vbkNhblBsYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fb25FcnJvciA9IHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5hdXRvTG9hZCAhPT0gZmFsc2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB1cGRhdGluZyBvZiB0aGUgdGV4dHVyZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtkZWx0YVRpbWU9MF0gLSB0aW1lIGRlbHRhIHNpbmNlIGxhc3QgdGlja1xuICAgICAqL1xuICAgIHVwZGF0ZShfZGVsdGFUaW1lID0gMCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5kZXN0cm95ZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGFjY291bnQgZm9yIGlmIHZpZGVvIGhhcyBoYWQgaXRzIHBsYXliYWNrUmF0ZSBjaGFuZ2VkXG4gICAgICAgICAgICBjb25zdCBlbGFwc2VkTVMgPSBUaWNrZXIuc2hhcmVkLmVsYXBzZWRNUyAqICh0aGlzLnNvdXJjZSBhcyBIVE1MVmlkZW9FbGVtZW50KS5wbGF5YmFja1JhdGU7XG5cbiAgICAgICAgICAgIHRoaXMuX21zVG9OZXh0VXBkYXRlID0gTWF0aC5mbG9vcih0aGlzLl9tc1RvTmV4dFVwZGF0ZSAtIGVsYXBzZWRNUyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3VwZGF0ZUZQUyB8fCB0aGlzLl9tc1RvTmV4dFVwZGF0ZSA8PSAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN1cGVyLnVwZGF0ZSgvKiBkZWx0YVRpbWUqLyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbXNUb05leHRVcGRhdGUgPSB0aGlzLl91cGRhdGVGUFMgPyBNYXRoLmZsb29yKDEwMDAgLyB0aGlzLl91cGRhdGVGUFMpIDogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXJ0IHByZWxvYWRpbmcgdGhlIHZpZGVvIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59IEhhbmRsZSB0aGUgdmFsaWRhdGUgZXZlbnRcbiAgICAgKi9cbiAgICBsb2FkKCk6IFByb21pc2U8VmlkZW9SZXNvdXJjZT5cbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9sb2FkKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuc291cmNlIGFzIEhUTUxWaWRlb0VsZW1lbnQ7XG5cbiAgICAgICAgaWYgKChzb3VyY2UucmVhZHlTdGF0ZSA9PT0gc291cmNlLkhBVkVfRU5PVUdIX0RBVEEgfHwgc291cmNlLnJlYWR5U3RhdGUgPT09IHNvdXJjZS5IQVZFX0ZVVFVSRV9EQVRBKVxuICAgICAgICAgICAgJiYgc291cmNlLndpZHRoICYmIHNvdXJjZS5oZWlnaHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIChzb3VyY2UgYXMgYW55KS5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIHRoaXMuX29uUGxheVN0YXJ0LmJpbmQodGhpcykpO1xuICAgICAgICBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCB0aGlzLl9vblBsYXlTdG9wLmJpbmQodGhpcykpO1xuXG4gICAgICAgIGlmICghdGhpcy5faXNTb3VyY2VSZWFkeSgpKVxuICAgICAgICB7XG4gICAgICAgICAgICBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsIHRoaXMuX29uQ2FuUGxheSk7XG4gICAgICAgICAgICBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCB0aGlzLl9vbkNhblBsYXkpO1xuICAgICAgICAgICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fb25FcnJvciwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9vbkNhblBsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xvYWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSk6IHZvaWQgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsaWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNvbHZlID0gcmVzb2x2ZTtcblxuICAgICAgICAgICAgICAgIHNvdXJjZS5sb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2FkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSB2aWRlbyBlcnJvciBldmVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgX29uRXJyb3IoZXZlbnQ6IEVycm9yRXZlbnQpOiB2b2lkXG4gICAge1xuICAgICAgICAodGhpcy5zb3VyY2UgYXMgSFRNTFZpZGVvRWxlbWVudCkucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLl9vbkVycm9yLCB0cnVlKTtcbiAgICAgICAgdGhpcy5vbkVycm9yLmVtaXQoZXZlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBzb3VyY2UgaXMgcGxheWluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBwbGF5aW5nLlxuICAgICAqL1xuICAgIHByaXZhdGUgX2lzU291cmNlUGxheWluZygpOiBib29sZWFuXG4gICAge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnNvdXJjZSBhcyBIVE1MVmlkZW9FbGVtZW50O1xuXG4gICAgICAgIHJldHVybiAoc291cmNlLmN1cnJlbnRUaW1lID4gMCAmJiBzb3VyY2UucGF1c2VkID09PSBmYWxzZSAmJiBzb3VyY2UuZW5kZWQgPT09IGZhbHNlICYmIHNvdXJjZS5yZWFkeVN0YXRlID4gMik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB1bmRlcmx5aW5nIHNvdXJjZSBpcyByZWFkeSBmb3IgcGxheWluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiByZWFkeS5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9pc1NvdXJjZVJlYWR5KCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuc291cmNlIGFzIEhUTUxWaWRlb0VsZW1lbnQ7XG5cbiAgICAgICAgcmV0dXJuIHNvdXJjZS5yZWFkeVN0YXRlID09PSAzIHx8IHNvdXJjZS5yZWFkeVN0YXRlID09PSA0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJ1bnMgdGhlIHVwZGF0ZSBsb29wIHdoZW4gdGhlIHZpZGVvIGlzIHJlYWR5IHRvIHBsYXlcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBfb25QbGF5U3RhcnQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gSnVzdCBpbiBjYXNlIHRoZSB2aWRlbyBoYXMgbm90IHJlY2VpdmVkIGl0cyBjYW4gcGxheSBldmVuIHlldC4uXG4gICAgICAgIGlmICghdGhpcy52YWxpZClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fb25DYW5QbGF5KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5hdXRvVXBkYXRlICYmICF0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyKVxuICAgICAgICB7XG4gICAgICAgICAgICBUaWNrZXIuc2hhcmVkLmFkZCh0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpcmVkIHdoZW4gYSBwYXVzZSBldmVudCBpcyB0cmlnZ2VyZWQsIHN0b3BzIHRoZSB1cGRhdGUgbG9vcFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIF9vblBsYXlTdG9wKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyKVxuICAgICAgICB7XG4gICAgICAgICAgICBUaWNrZXIuc2hhcmVkLnJlbW92ZSh0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSB2aWRlbyBpcyBsb2FkZWQgYW5kIHJlYWR5IHRvIHBsYXlcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBfb25DYW5QbGF5KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuc291cmNlIGFzIEhUTUxWaWRlb0VsZW1lbnQ7XG5cbiAgICAgICAgc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCB0aGlzLl9vbkNhblBsYXkpO1xuICAgICAgICBzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCB0aGlzLl9vbkNhblBsYXkpO1xuXG4gICAgICAgIGNvbnN0IHZhbGlkID0gdGhpcy52YWxpZDtcblxuICAgICAgICB0aGlzLnJlc2l6ZShzb3VyY2UudmlkZW9XaWR0aCwgc291cmNlLnZpZGVvSGVpZ2h0KTtcblxuICAgICAgICAvLyBwcmV2ZW50IG11bHRpcGxlIGxvYWRlZCBkaXNwYXRjaGVzLi5cbiAgICAgICAgaWYgKCF2YWxpZCAmJiB0aGlzLl9yZXNvbHZlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5faXNTb3VyY2VQbGF5aW5nKCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX29uUGxheVN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hdXRvUGxheSlcbiAgICAgICAge1xuICAgICAgICAgICAgc291cmNlLnBsYXkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoaXMgdGV4dHVyZVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGRpc3Bvc2UoKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzQ29ubmVjdGVkVG9UaWNrZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIFRpY2tlci5zaGFyZWQucmVtb3ZlKHRoaXMudXBkYXRlLCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuc291cmNlIGFzIEhUTUxWaWRlb0VsZW1lbnQ7XG5cbiAgICAgICAgaWYgKHNvdXJjZSlcbiAgICAgICAge1xuICAgICAgICAgICAgc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fb25FcnJvciwgdHJ1ZSk7XG4gICAgICAgICAgICBzb3VyY2UucGF1c2UoKTtcbiAgICAgICAgICAgIHNvdXJjZS5zcmMgPSAnJztcbiAgICAgICAgICAgIHNvdXJjZS5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3VsZCB0aGUgYmFzZSB0ZXh0dXJlIGF1dG9tYXRpY2FsbHkgdXBkYXRlIGl0c2VsZiwgc2V0IHRvIHRydWUgYnkgZGVmYXVsdFxuICAgICAqXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgYXV0b1VwZGF0ZSgpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b1VwZGF0ZTtcbiAgICB9XG5cbiAgICBzZXQgYXV0b1VwZGF0ZSh2YWx1ZTogYm9vbGVhbilcbiAgICB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fYXV0b1VwZGF0ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fYXV0b1VwZGF0ZSA9IHZhbHVlO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2F1dG9VcGRhdGUgJiYgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlcilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBUaWNrZXIuc2hhcmVkLnJlbW92ZSh0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fYXV0b1VwZGF0ZSAmJiAhdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciAmJiB0aGlzLl9pc1NvdXJjZVBsYXlpbmcoKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBUaWNrZXIuc2hhcmVkLmFkZCh0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIb3cgbWFueSB0aW1lcyBhIHNlY29uZCB0byB1cGRhdGUgdGhlIHRleHR1cmUgZnJvbSB0aGUgdmlkZW8uIExlYXZlIGF0IDAgdG8gdXBkYXRlIGF0IGV2ZXJ5IHJlbmRlci5cbiAgICAgKiBBIGxvd2VyIGZwcyBjYW4gaGVscCBwZXJmb3JtYW5jZSwgYXMgdXBkYXRpbmcgdGhlIHRleHR1cmUgYXQgNjBmcHMgb24gYSAzMHBzIHZpZGVvIG1heSBub3QgYmUgZWZmaWNpZW50LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB1cGRhdGVGUFMoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlRlBTO1xuICAgIH1cblxuICAgIHNldCB1cGRhdGVGUFModmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fdXBkYXRlRlBTKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVGUFMgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gYXV0by1kZXRlY3QgdGhlIHR5cGUgb2YgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2UgLSBUaGUgc291cmNlIG9iamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gLSBUaGUgZXh0ZW5zaW9uIG9mIHNvdXJjZSwgaWYgc2V0XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHZpZGVvIHNvdXJjZVxuICAgICAqL1xuICAgIHN0YXRpYyB0ZXN0KHNvdXJjZTogdW5rbm93biwgZXh0ZW5zaW9uPzogc3RyaW5nKTogc291cmNlIGlzIEhUTUxWaWRlb0VsZW1lbnRcbiAgICB7XG4gICAgICAgIHJldHVybiAoc291cmNlIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudClcbiAgICAgICAgICAgIHx8IFZpZGVvUmVzb3VyY2UuVFlQRVMuaW5kZXhPZihleHRlbnNpb24pID4gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdCBvZiBjb21tb24gdmlkZW8gZmlsZSBleHRlbnNpb25zIHN1cHBvcnRlZCBieSBWaWRlb1Jlc291cmNlLlxuICAgICAqIEBjb25zdGFudFxuICAgICAqIEBtZW1iZXIge0FycmF5PHN0cmluZz59XG4gICAgICogQHN0YXRpY1xuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIHN0YXRpYyBUWVBFUyA9IFsnbXA0JywgJ200dicsICd3ZWJtJywgJ29nZycsICdvZ3YnLCAnaDI2NCcsICdhdmknLCAnbW92J107XG5cbiAgICAvKipcbiAgICAgKiBNYXAgb2YgdmlkZW8gTUlNRSB0eXBlcyB0aGF0IGNhbid0IGJlIGRpcmVjdGx5IGRlcml2ZWQgZnJvbSBmaWxlIGV4dGVuc2lvbnMuXG4gICAgICogQGNvbnN0YW50XG4gICAgICogQG1lbWJlciB7b2JqZWN0fVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBzdGF0aWMgTUlNRV9UWVBFUzogRGljdDxzdHJpbmc+ID0ge1xuICAgICAgICBvZ3Y6ICd2aWRlby9vZ2cnLFxuICAgICAgICBtb3Y6ICd2aWRlby9xdWlja3RpbWUnLFxuICAgICAgICBtNHY6ICd2aWRlby9tcDQnLFxuICAgIH07XG59XG4iLCAiaW1wb3J0IHsgQmFzZUltYWdlUmVzb3VyY2UgfSBmcm9tICcuL0Jhc2VJbWFnZVJlc291cmNlJztcblxuLyoqXG4gKiBSZXNvdXJjZSB0eXBlIGZvciBJbWFnZUJpdG1hcC5cbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5yZXNvdXJjZXMuQmFzZUltYWdlUmVzb3VyY2VcbiAqIEBtZW1iZXJvZiBQSVhJLnJlc291cmNlc1xuICogQHBhcmFtIHtJbWFnZUJpdG1hcH0gc291cmNlIC0gSW1hZ2UgZWxlbWVudCB0byB1c2VcbiAqL1xuZXhwb3J0IGNsYXNzIEltYWdlQml0bWFwUmVzb3VyY2UgZXh0ZW5kcyBCYXNlSW1hZ2VSZXNvdXJjZVxue1xuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gYXV0by1kZXRlY3QgdGhlIHR5cGUgb2YgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtJbWFnZUJpdG1hcH0gc291cmNlIC0gVGhlIHNvdXJjZSBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgc291cmNlIGlzIGFuIEltYWdlQml0bWFwXG4gICAgICovXG4gICAgc3RhdGljIHRlc3Qoc291cmNlOiB1bmtub3duKTogc291cmNlIGlzIEltYWdlQml0bWFwXG4gICAge1xuICAgICAgICByZXR1cm4gISF3aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXAgJiYgc291cmNlIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXA7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IElOU1RBTExFRCB9IGZyb20gJy4vYXV0b0RldGVjdFJlc291cmNlJztcbmltcG9ydCB7IEFycmF5UmVzb3VyY2UgfSBmcm9tICcuL0FycmF5UmVzb3VyY2UnO1xuaW1wb3J0IHsgQnVmZmVyUmVzb3VyY2UgfSBmcm9tICcuL0J1ZmZlclJlc291cmNlJztcbmltcG9ydCB7IENhbnZhc1Jlc291cmNlIH0gZnJvbSAnLi9DYW52YXNSZXNvdXJjZSc7XG5pbXBvcnQgeyBDdWJlUmVzb3VyY2UgfSBmcm9tICcuL0N1YmVSZXNvdXJjZSc7XG5pbXBvcnQgeyBJbWFnZVJlc291cmNlIH0gZnJvbSAnLi9JbWFnZVJlc291cmNlJztcbmltcG9ydCB7IFNWR1Jlc291cmNlIH0gZnJvbSAnLi9TVkdSZXNvdXJjZSc7XG5pbXBvcnQgeyBWaWRlb1Jlc291cmNlIH0gZnJvbSAnLi9WaWRlb1Jlc291cmNlJztcbmltcG9ydCB7IEltYWdlQml0bWFwUmVzb3VyY2UgfSBmcm9tICcuL0ltYWdlQml0bWFwUmVzb3VyY2UnO1xuXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgYmFzZSByZXNvdXJjZSB0eXBlcyBzdXBwb3J0ZWQgYnkgUGl4aUpTLlxuICpcbiAqIFJlc291cmNlcyBhcmUgdXNlZCBieSB7QGxpbmsgUElYSS5CYXNlVGV4dHVyZX0gdG8gaGFuZGxlIGRpZmZlcmVudCBtZWRpYSB0eXBlc1xuICogc3VjaCBhcyBpbWFnZXMsIHZpZGVvLCBTVkcgZ3JhcGhpY3MsIGV0Yy4gSW4gbW9zdCB1c2UtY2FzZXMsIHlvdSBzaG91bGQgbm90XG4gKiBpbnN0YW50aWF0ZSB0aGUgcmVzb3VyY2VzIGRpcmVjdGx5LiBUaGUgZWFzeSB0aGluZyBpcyB0byB1c2VcbiAqIHtAbGluayBQSVhJLkJhc2VUZXh0dXJlLmZyb219LlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IGJhc2VUZXh0dXJlID0gUElYSS5CYXNlVGV4dHVyZS5mcm9tKCdwYXRoL3RvL2ltYWdlLmpwZycpO1xuICogQG5hbWVzcGFjZSBQSVhJLnJlc291cmNlc1xuICovXG5leHBvcnQgKiBmcm9tICcuL1Jlc291cmNlJztcbmV4cG9ydCAqIGZyb20gJy4vQmFzZUltYWdlUmVzb3VyY2UnO1xuXG5JTlNUQUxMRUQucHVzaChcbiAgICBJbWFnZVJlc291cmNlLFxuICAgIEltYWdlQml0bWFwUmVzb3VyY2UsXG4gICAgQ2FudmFzUmVzb3VyY2UsXG4gICAgVmlkZW9SZXNvdXJjZSxcbiAgICBTVkdSZXNvdXJjZSxcbiAgICBCdWZmZXJSZXNvdXJjZSxcbiAgICBDdWJlUmVzb3VyY2UsXG4gICAgQXJyYXlSZXNvdXJjZVxuKTtcblxuZXhwb3J0ICogZnJvbSAnLi9hdXRvRGV0ZWN0UmVzb3VyY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9BYnN0cmFjdE11bHRpUmVzb3VyY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9BcnJheVJlc291cmNlJztcbmV4cG9ydCAqIGZyb20gJy4vQnVmZmVyUmVzb3VyY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9DYW52YXNSZXNvdXJjZSc7XG5leHBvcnQgKiBmcm9tICcuL0N1YmVSZXNvdXJjZSc7XG5leHBvcnQgKiBmcm9tICcuL0ltYWdlUmVzb3VyY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9TVkdSZXNvdXJjZSc7XG5leHBvcnQgKiBmcm9tICcuL1ZpZGVvUmVzb3VyY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9JbWFnZUJpdG1hcFJlc291cmNlJztcbiIsICJpbXBvcnQgdHlwZSB7IFJlbmRlcmVyIH0gZnJvbSAnLi9SZW5kZXJlcic7XG5cbi8qKlxuICogU3lzdGVtIGlzIGEgYmFzZSBjbGFzcyB1c2VkIGZvciBleHRlbmRpbmcgc3lzdGVtcyB1c2VkIGJ5IHRoZSB7QGxpbmsgUElYSS5SZW5kZXJlcn1cbiAqXG4gKiBAc2VlIFBJWEkuUmVuZGVyZXIjYWRkU3lzdGVtXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1cbntcbiAgICAvLyBwdWJsaWMgYmVjYXVzZSBvZiBGaWx0ZXIgdXNhZ2UsXG4gICAgLy8gcHJvdGVjdGVkIGJlY2F1c2UgdXN1YWxseSByZW5kZXJlciBpdCBhbHJlYWR5IGtub3duIGJ5IHRob3NlIHdobyB1c2UgdGhlIHN5c3RlbVxuICAgIHJlbmRlcmVyOiBSZW5kZXJlcjtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgbWFuYWdlciB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZW5kZXJlciB0aGlzIG1hbmFnZXIgd29ya3MgZm9yLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlJlbmRlcmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyaWMgZGVzdHJveSBtZXRob2RzIHRvIGJlIG92ZXJyaWRkZW4gYnkgdGhlIHN1YmNsYXNzXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICAodGhpcyBhcyBhbnkpLnJlbmRlcmVyID0gbnVsbDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQUxQSEFfTU9ERVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuaW1wb3J0IHsgQnVmZmVyUmVzb3VyY2UgfSBmcm9tICcuL0J1ZmZlclJlc291cmNlJztcblxuaW1wb3J0IHR5cGUgeyBCYXNlVGV4dHVyZSB9IGZyb20gJy4uL0Jhc2VUZXh0dXJlJztcbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi8uLi9SZW5kZXJlcic7XG5pbXBvcnQgdHlwZSB7IEdMVGV4dHVyZSB9IGZyb20gJy4uL0dMVGV4dHVyZSc7XG4vKipcbiAqIFJlc291cmNlIHR5cGUgZm9yIERlcHRoVGV4dHVyZS5cbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5yZXNvdXJjZXMuQnVmZmVyUmVzb3VyY2VcbiAqIEBtZW1iZXJvZiBQSVhJLnJlc291cmNlc1xuICovXG5leHBvcnQgY2xhc3MgRGVwdGhSZXNvdXJjZSBleHRlbmRzIEJ1ZmZlclJlc291cmNlXG57XG4gICAgLyoqXG4gICAgICogVXBsb2FkIHRoZSB0ZXh0dXJlIHRvIHRoZSBHUFUuXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFVwbG9hZCB0byB0aGUgcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlIC0gUmVmZXJlbmNlIHRvIHBhcmVudCB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtQSVhJLkdMVGV4dHVyZX0gZ2xUZXh0dXJlIC0gZ2xUZXh0dXJlXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaXMgc3VjY2Vzc1xuICAgICAqL1xuICAgIHVwbG9hZChyZW5kZXJlcjogUmVuZGVyZXIsIGJhc2VUZXh0dXJlOiBCYXNlVGV4dHVyZSwgZ2xUZXh0dXJlOiBHTFRleHR1cmUpOiBib29sZWFuXG4gICAge1xuICAgICAgICBjb25zdCBnbCA9IHJlbmRlcmVyLmdsO1xuXG4gICAgICAgIGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgYmFzZVRleHR1cmUuYWxwaGFNb2RlID09PSBBTFBIQV9NT0RFUy5VTlBBQ0spO1xuXG4gICAgICAgIGlmIChnbFRleHR1cmUud2lkdGggPT09IGJhc2VUZXh0dXJlLndpZHRoICYmIGdsVGV4dHVyZS5oZWlnaHQgPT09IGJhc2VUZXh0dXJlLmhlaWdodClcbiAgICAgICAge1xuICAgICAgICAgICAgZ2wudGV4U3ViSW1hZ2UyRChcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZS50YXJnZXQsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUud2lkdGgsXG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGJhc2VUZXh0dXJlLmZvcm1hdCxcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZS50eXBlLFxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBnbFRleHR1cmUud2lkdGggPSBiYXNlVGV4dHVyZS53aWR0aDtcbiAgICAgICAgICAgIGdsVGV4dHVyZS5oZWlnaHQgPSBiYXNlVGV4dHVyZS5oZWlnaHQ7XG5cbiAgICAgICAgICAgIGdsLnRleEltYWdlMkQoXG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUudGFyZ2V0LFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgLy8gIGdsLkRFUFRIX0NPTVBPTkVOVDE2IE5lZWRlZCBmb3IgZGVwdGggdG8gcmVuZGVyIHByb3Blcmx5IGluIHdlYmdsMi4wXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuY29udGV4dC53ZWJHTFZlcnNpb24gPT09IDEgPyBnbC5ERVBUSF9DT01QT05FTlQgOiBnbC5ERVBUSF9DT01QT05FTlQxNixcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZS53aWR0aCxcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZS5mb3JtYXQsXG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUudHlwZSxcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFJ1bm5lciB9IGZyb20gJ0BwaXhpL3J1bm5lcic7XG5pbXBvcnQgeyBCYXNlVGV4dHVyZSB9IGZyb20gJy4uL3RleHR1cmVzL0Jhc2VUZXh0dXJlJztcbmltcG9ydCB7IERlcHRoUmVzb3VyY2UgfSBmcm9tICcuLi90ZXh0dXJlcy9yZXNvdXJjZXMvRGVwdGhSZXNvdXJjZSc7XG5pbXBvcnQgeyBGT1JNQVRTLCBNSVBNQVBfTU9ERVMsIFNDQUxFX01PREVTLCBUWVBFUywgTVNBQV9RVUFMSVRZIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcblxuaW1wb3J0IHR5cGUgeyBHTEZyYW1lYnVmZmVyIH0gZnJvbSAnLi9HTEZyYW1lYnVmZmVyJztcblxuLyoqXG4gKiBGcmFtZSBidWZmZXIgdXNlZCBieSB0aGUgQmFzZVJlbmRlclRleHR1cmVcbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBGcmFtZWJ1ZmZlclxue1xuICAgIHB1YmxpYyB3aWR0aDogbnVtYmVyO1xuICAgIHB1YmxpYyBoZWlnaHQ6IG51bWJlcjtcbiAgICBwdWJsaWMgbXVsdGlzYW1wbGU6IE1TQUFfUVVBTElUWTtcbiAgICBzdGVuY2lsOiBib29sZWFuO1xuICAgIGRlcHRoOiBib29sZWFuO1xuICAgIGRpcnR5SWQ6IG51bWJlcjtcbiAgICBkaXJ0eUZvcm1hdDogbnVtYmVyO1xuICAgIGRpcnR5U2l6ZTogbnVtYmVyO1xuICAgIGRlcHRoVGV4dHVyZTogQmFzZVRleHR1cmU7XG4gICAgY29sb3JUZXh0dXJlczogQXJyYXk8QmFzZVRleHR1cmU+O1xuICAgIGdsRnJhbWVidWZmZXJzOiB7W2tleTogc3RyaW5nXTogR0xGcmFtZWJ1ZmZlcn07XG4gICAgZGlzcG9zZVJ1bm5lcjogUnVubmVyO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFdpZHRoIG9mIHRoZSBmcmFtZSBidWZmZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gSGVpZ2h0IG9mIHRoZSBmcmFtZSBidWZmZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcilcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaWR0aCBvZiBmcmFtZWJ1ZmZlciBpbiBwaXhlbHNcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53aWR0aCA9IE1hdGguY2VpbCh3aWR0aCB8fCAxMDApO1xuICAgICAgICAvKipcbiAgICAgICAgICogSGVpZ2h0IG9mIGZyYW1lYnVmZmVyIGluIHBpeGVsc1xuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhlaWdodCA9IE1hdGguY2VpbChoZWlnaHQgfHwgMTAwKTtcblxuICAgICAgICB0aGlzLnN0ZW5jaWwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXB0aCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuZGlydHlJZCA9IDA7XG4gICAgICAgIHRoaXMuZGlydHlGb3JtYXQgPSAwO1xuICAgICAgICB0aGlzLmRpcnR5U2l6ZSA9IDA7XG5cbiAgICAgICAgdGhpcy5kZXB0aFRleHR1cmUgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbG9yVGV4dHVyZXMgPSBbXTtcblxuICAgICAgICB0aGlzLmdsRnJhbWVidWZmZXJzID0ge307XG5cbiAgICAgICAgdGhpcy5kaXNwb3NlUnVubmVyID0gbmV3IFJ1bm5lcignZGlzcG9zZUZyYW1lYnVmZmVyJyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlc2lyZWQgbnVtYmVyIG9mIHNhbXBsZXMgZm9yIGFudGlhbGlhc2luZy4gMCBtZWFucyBBQSBzaG91bGQgbm90IGJlIHVzZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEV4cGVyaW1lbnRhbCBXZWJHTDIgZmVhdHVyZSwgYWxsb3dzIHRvIHVzZSBhbnRpYWxpYXNpbmcgaW4gaW5kaXZpZHVhbCByZW5kZXJUZXh0dXJlcy5cbiAgICAgICAgICogQW50aWFsaWFzaW5nIGlzIHRoZSBzYW1lIGFzIGZvciBtYWluIGJ1ZmZlciB3aXRoIHJlbmRlcmVyIGBhbnRpYWxpYXM6dHJ1ZWAgb3B0aW9ucy5cbiAgICAgICAgICogU2VyaW91c2x5IGFmZmVjdHMgR1BVIG1lbW9yeSBjb25zdW1wdGlvbiBhbmQgR1BVIHBlcmZvcm1hbmNlLlxuICAgICAgICAgKlxuICAgICAgICAgKmBgYGpzXG4gICAgICAgICAqIHJlbmRlclRleHR1cmUuZnJhbWVidWZmZXIubXVsdGlzYW1wbGUgPSBQSVhJLk1TQUFfUVVBTElUWS5ISUdIO1xuICAgICAgICAgKiAvLy4uLlxuICAgICAgICAgKiByZW5kZXJlci5yZW5kZXIocmVuZGVyVGV4dHVyZSwgbXlDb250YWluZXIpO1xuICAgICAgICAgKiByZW5kZXJlci5mcmFtZWJ1ZmZlci5ibGl0KCk7IC8vIGNvcGllcyBkYXRhIGZyb20gTVNBQSBmcmFtZWJ1ZmZlciB0byB0ZXh0dXJlXG4gICAgICAgICAqICBgYGBcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5NU0FBX1FVQUxJVFl9XG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuTVNBQV9RVUFMSVRZLk5PTkVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXVsdGlzYW1wbGUgPSBNU0FBX1FVQUxJVFkuTk9ORTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIGNvbG9yVGV4dHVyZS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuQmFzZVRleHR1cmVbXX1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBnZXQgY29sb3JUZXh0dXJlKCk6IEJhc2VUZXh0dXJlXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvclRleHR1cmVzWzBdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCB0ZXh0dXJlIHRvIHRoZSBjb2xvclRleHR1cmUgYXJyYXlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbaW5kZXg9MF0gLSBJbmRleCBvZiB0aGUgYXJyYXkgdG8gYWRkIHRoZSB0ZXh0dXJlIHRvXG4gICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSBbdGV4dHVyZV0gLSBUZXh0dXJlIHRvIGFkZCB0byB0aGUgYXJyYXlcbiAgICAgKi9cbiAgICBhZGRDb2xvclRleHR1cmUoaW5kZXggPSAwLCB0ZXh0dXJlPzogQmFzZVRleHR1cmUpOiB0aGlzXG4gICAge1xuICAgICAgICAvLyBUT0RPIGFkZCBzb21lIHZhbGlkYXRpb24gdG8gdGhlIHRleHR1cmUgLSBzYW1lIHdpZHRoIC8gaGVpZ2h0IGV0Yz9cbiAgICAgICAgdGhpcy5jb2xvclRleHR1cmVzW2luZGV4XSA9IHRleHR1cmUgfHwgbmV3IEJhc2VUZXh0dXJlKG51bGwsIHtcbiAgICAgICAgICAgIHNjYWxlTW9kZTogU0NBTEVfTU9ERVMuTkVBUkVTVCxcbiAgICAgICAgICAgIHJlc29sdXRpb246IDEsXG4gICAgICAgICAgICBtaXBtYXA6IE1JUE1BUF9NT0RFUy5PRkYsXG4gICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgICAgICB0aGlzLmRpcnR5Rm9ybWF0Kys7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgZGVwdGggdGV4dHVyZSB0byB0aGUgZnJhbWUgYnVmZmVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IFt0ZXh0dXJlXSAtIFRleHR1cmUgdG8gYWRkXG4gICAgICovXG4gICAgYWRkRGVwdGhUZXh0dXJlKHRleHR1cmU/OiBCYXNlVGV4dHVyZSk6IHRoaXNcbiAgICB7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbiAgICAgICAgdGhpcy5kZXB0aFRleHR1cmUgPSB0ZXh0dXJlIHx8IG5ldyBCYXNlVGV4dHVyZShuZXcgRGVwdGhSZXNvdXJjZShudWxsLCB7IHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0IH0pLCB7XG4gICAgICAgICAgICBzY2FsZU1vZGU6IFNDQUxFX01PREVTLk5FQVJFU1QsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiAxLFxuICAgICAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgICAgICAgICAgbWlwbWFwOiBNSVBNQVBfTU9ERVMuT0ZGLFxuICAgICAgICAgICAgZm9ybWF0OiBGT1JNQVRTLkRFUFRIX0NPTVBPTkVOVCxcbiAgICAgICAgICAgIHR5cGU6IFRZUEVTLlVOU0lHTkVEX1NIT1JULFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmRpcnR5SWQrKztcbiAgICAgICAgdGhpcy5kaXJ0eUZvcm1hdCsrO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBkZXB0aCBvbiB0aGUgZnJhbWUgYnVmZmVyXG4gICAgICovXG4gICAgZW5hYmxlRGVwdGgoKTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy5kZXB0aCA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5kaXJ0eUlkKys7XG4gICAgICAgIHRoaXMuZGlydHlGb3JtYXQrKztcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGUgc3RlbmNpbCBvbiB0aGUgZnJhbWUgYnVmZmVyXG4gICAgICovXG4gICAgZW5hYmxlU3RlbmNpbCgpOiB0aGlzXG4gICAge1xuICAgICAgICB0aGlzLnN0ZW5jaWwgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgICAgICB0aGlzLmRpcnR5Rm9ybWF0Kys7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzaXplIHRoZSBmcmFtZSBidWZmZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFdpZHRoIG9mIHRoZSBmcmFtZSBidWZmZXIgdG8gcmVzaXplIHRvXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIEhlaWdodCBvZiB0aGUgZnJhbWUgYnVmZmVyIHRvIHJlc2l6ZSB0b1xuICAgICAqL1xuICAgIHJlc2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHdpZHRoID0gTWF0aC5jZWlsKHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5jZWlsKGhlaWdodCk7XG5cbiAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLndpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5oZWlnaHQpIHJldHVybjtcblxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgICAgICB0aGlzLmRpcnR5U2l6ZSsrO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2xvclRleHR1cmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5jb2xvclRleHR1cmVzW2ldO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbiA9IHRleHR1cmUucmVzb2x1dGlvbjtcblxuICAgICAgICAgICAgLy8gdGFrZSBpbnRvIGFjb3VudCB0aGUgZmFjdCB0aGUgdGV4dHVyZSBtYXkgaGF2ZSBhIGRpZmZlcmVudCByZXNvbHV0aW9uLi5cbiAgICAgICAgICAgIHRleHR1cmUuc2V0U2l6ZSh3aWR0aCAvIHJlc29sdXRpb24sIGhlaWdodCAvIHJlc29sdXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGVwdGhUZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uID0gdGhpcy5kZXB0aFRleHR1cmUucmVzb2x1dGlvbjtcblxuICAgICAgICAgICAgdGhpcy5kZXB0aFRleHR1cmUuc2V0U2l6ZSh3aWR0aCAvIHJlc29sdXRpb24sIGhlaWdodCAvIHJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZXMgV2ViR0wgcmVzb3VyY2VzIHRoYXQgYXJlIGNvbm5lY3RlZCB0byB0aGlzIGdlb21ldHJ5XG4gICAgICovXG4gICAgZGlzcG9zZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmRpc3Bvc2VSdW5uZXIuZW1pdCh0aGlzLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgYW5kIHJlbW92ZXMgdGhlIGRlcHRoIHRleHR1cmUgYWRkZWQgdG8gdGhpcyBmcmFtZWJ1ZmZlci5cbiAgICAgKi9cbiAgICBkZXN0cm95RGVwdGhUZXh0dXJlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmRlcHRoVGV4dHVyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kZXB0aFRleHR1cmUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5kZXB0aFRleHR1cmUgPSBudWxsO1xuXG4gICAgICAgICAgICArK3RoaXMuZGlydHlJZDtcbiAgICAgICAgICAgICsrdGhpcy5kaXJ0eUZvcm1hdDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBCYXNlVGV4dHVyZSB9IGZyb20gJy4uL3RleHR1cmVzL0Jhc2VUZXh0dXJlJztcbmltcG9ydCB7IEZyYW1lYnVmZmVyIH0gZnJvbSAnLi4vZnJhbWVidWZmZXIvRnJhbWVidWZmZXInO1xuXG5pbXBvcnQgdHlwZSB7IElCYXNlVGV4dHVyZU9wdGlvbnMgfSBmcm9tICcuLi90ZXh0dXJlcy9CYXNlVGV4dHVyZSc7XG5pbXBvcnQgdHlwZSB7IE1hc2tEYXRhIH0gZnJvbSAnLi4vbWFzay9NYXNrRGF0YSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVJlbmRlclRleHR1cmUgZXh0ZW5kcyBHbG9iYWxNaXhpbnMuQmFzZVJlbmRlclRleHR1cmUsIEJhc2VUZXh0dXJlIHt9XG5cbi8qKlxuICogQSBCYXNlUmVuZGVyVGV4dHVyZSBpcyBhIHNwZWNpYWwgdGV4dHVyZSB0aGF0IGFsbG93cyBhbnkgUGl4aUpTIGRpc3BsYXkgb2JqZWN0IHRvIGJlIHJlbmRlcmVkIHRvIGl0LlxuICpcbiAqIF9fSGludF9fOiBBbGwgRGlzcGxheU9iamVjdHMgKGkuZS4gU3ByaXRlcykgdGhhdCByZW5kZXIgdG8gYSBCYXNlUmVuZGVyVGV4dHVyZSBzaG91bGQgYmUgcHJlbG9hZGVkXG4gKiBvdGhlcndpc2UgYmxhY2sgcmVjdGFuZ2xlcyB3aWxsIGJlIGRyYXduIGluc3RlYWQuXG4gKlxuICogQSBCYXNlUmVuZGVyVGV4dHVyZSB0YWtlcyBhIHNuYXBzaG90IG9mIGFueSBEaXNwbGF5IE9iamVjdCBnaXZlbiB0byBpdHMgcmVuZGVyIG1ldGhvZC4gVGhlIHBvc2l0aW9uXG4gKiBhbmQgcm90YXRpb24gb2YgdGhlIGdpdmVuIERpc3BsYXkgT2JqZWN0cyBpcyBpZ25vcmVkLiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogbGV0IHJlbmRlcmVyID0gUElYSS5hdXRvRGV0ZWN0UmVuZGVyZXIoKTtcbiAqIGxldCBiYXNlUmVuZGVyVGV4dHVyZSA9IG5ldyBQSVhJLkJhc2VSZW5kZXJUZXh0dXJlKHsgd2lkdGg6IDgwMCwgaGVpZ2h0OiA2MDAgfSk7XG4gKiBsZXQgcmVuZGVyVGV4dHVyZSA9IG5ldyBQSVhJLlJlbmRlclRleHR1cmUoYmFzZVJlbmRlclRleHR1cmUpO1xuICogbGV0IHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb20oXCJzcGluT2JqXzAxLnBuZ1wiKTtcbiAqXG4gKiBzcHJpdGUucG9zaXRpb24ueCA9IDgwMC8yO1xuICogc3ByaXRlLnBvc2l0aW9uLnkgPSA2MDAvMjtcbiAqIHNwcml0ZS5hbmNob3IueCA9IDAuNTtcbiAqIHNwcml0ZS5hbmNob3IueSA9IDAuNTtcbiAqXG4gKiByZW5kZXJlci5yZW5kZXIoc3ByaXRlLCByZW5kZXJUZXh0dXJlKTtcbiAqIGBgYFxuICpcbiAqIFRoZSBTcHJpdGUgaW4gdGhpcyBjYXNlIHdpbGwgYmUgcmVuZGVyZWQgdXNpbmcgaXRzIGxvY2FsIHRyYW5zZm9ybS4gVG8gcmVuZGVyIHRoaXMgc3ByaXRlIGF0IDAsMFxuICogeW91IGNhbiBjbGVhciB0aGUgdHJhbnNmb3JtXG4gKlxuICogYGBganNcbiAqXG4gKiBzcHJpdGUuc2V0VHJhbnNmb3JtKClcbiAqXG4gKiBsZXQgYmFzZVJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5CYXNlUmVuZGVyVGV4dHVyZSh7IHdpZHRoOiAxMDAsIGhlaWdodDogMTAwIH0pO1xuICogbGV0IHJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5SZW5kZXJUZXh0dXJlKGJhc2VSZW5kZXJUZXh0dXJlKTtcbiAqXG4gKiByZW5kZXJlci5yZW5kZXIoc3ByaXRlLCByZW5kZXJUZXh0dXJlKTsgIC8vIFJlbmRlcnMgdG8gY2VudGVyIG9mIFJlbmRlclRleHR1cmVcbiAqIGBgYFxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5CYXNlVGV4dHVyZVxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VSZW5kZXJUZXh0dXJlIGV4dGVuZHMgQmFzZVRleHR1cmVcbntcbiAgICBwdWJsaWMgY2xlYXJDb2xvcjogbnVtYmVyW107XG4gICAgcHVibGljIGZyYW1lYnVmZmVyOiBGcmFtZWJ1ZmZlcjtcbiAgICBtYXNrU3RhY2s6IEFycmF5PE1hc2tEYXRhPjtcbiAgICBmaWx0ZXJTdGFjazogQXJyYXk8YW55PjtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoPTEwMF0gLSBUaGUgd2lkdGggb2YgdGhlIGJhc2UgcmVuZGVyIHRleHR1cmUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmhlaWdodD0xMDBdIC0gVGhlIGhlaWdodCBvZiB0aGUgYmFzZSByZW5kZXIgdGV4dHVyZS5cbiAgICAgKiBAcGFyYW0ge1BJWEkuU0NBTEVfTU9ERVN9IFtvcHRpb25zLnNjYWxlTW9kZV0gLSBTZWUge0BsaW5rIFBJWEkuU0NBTEVfTU9ERVN9IGZvciBwb3NzaWJsZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnJlc29sdXRpb249MV0gLSBUaGUgcmVzb2x1dGlvbiAvIGRldmljZSBwaXhlbCByYXRpbyBvZiB0aGUgdGV4dHVyZSBiZWluZyBnZW5lcmF0ZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogSUJhc2VUZXh0dXJlT3B0aW9ucylcbiAgICB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ251bWJlcicpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHByZWZlci1yZXN0LXBhcmFtcyAqL1xuICAgICAgICAgICAgLy8gQmFja3dhcmQgY29tcGF0aWJpbGl0eSBvZiBzaWduYXR1cmVcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVNb2RlID0gYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbiA9IGFyZ3VtZW50c1szXTtcblxuICAgICAgICAgICAgb3B0aW9ucyA9IHsgd2lkdGgsIGhlaWdodCwgc2NhbGVNb2RlLCByZXNvbHV0aW9uIH07XG4gICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIHByZWZlci1yZXN0LXBhcmFtcyAqL1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIobnVsbCwgb3B0aW9ucyk7XG5cbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIC8vIFNldCBkZWZhdWx0c1xuICAgICAgICB0aGlzLm1pcG1hcCA9IDA7XG4gICAgICAgIHRoaXMud2lkdGggPSBNYXRoLmNlaWwod2lkdGgpIHx8IDEwMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLmNlaWwoaGVpZ2h0KSB8fCAxMDA7XG4gICAgICAgIHRoaXMudmFsaWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuY2xlYXJDb2xvciA9IFswLCAwLCAwLCAwXTtcblxuICAgICAgICB0aGlzLmZyYW1lYnVmZmVyID0gbmV3IEZyYW1lYnVmZmVyKHRoaXMud2lkdGggKiB0aGlzLnJlc29sdXRpb24sIHRoaXMuaGVpZ2h0ICogdGhpcy5yZXNvbHV0aW9uKVxuICAgICAgICAgICAgLmFkZENvbG9yVGV4dHVyZSgwLCB0aGlzKTtcblxuICAgICAgICAvLyBUT0RPIC0gY291bGQgdGhpcyBiZSBhZGRlZCB0aGUgc3lzdGVtcz9cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRhdGEgc3RydWN0dXJlIGZvciB0aGUgc3RlbmNpbCBtYXNrcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5NYXNrRGF0YVtdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXNrU3RhY2sgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRhdGEgc3RydWN0dXJlIGZvciB0aGUgZmlsdGVycy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlclN0YWNrID0gW3t9XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNpemVzIHRoZSBCYXNlUmVuZGVyVGV4dHVyZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFRoZSB3aWR0aCB0byByZXNpemUgdG8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFRoZSBoZWlnaHQgdG8gcmVzaXplIHRvLlxuICAgICAqL1xuICAgIHJlc2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHdpZHRoID0gTWF0aC5jZWlsKHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5jZWlsKGhlaWdodCk7XG4gICAgICAgIHRoaXMuZnJhbWVidWZmZXIucmVzaXplKHdpZHRoICogdGhpcy5yZXNvbHV0aW9uLCBoZWlnaHQgKiB0aGlzLnJlc29sdXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZyZWVzIHRoZSB0ZXh0dXJlIGFuZCBmcmFtZWJ1ZmZlciBmcm9tIFdlYkdMIG1lbW9yeSB3aXRob3V0IGRlc3Ryb3lpbmcgdGhpcyB0ZXh0dXJlIG9iamVjdC5cbiAgICAgKiBUaGlzIG1lYW5zIHlvdSBjYW4gc3RpbGwgdXNlIHRoZSB0ZXh0dXJlIGxhdGVyIHdoaWNoIHdpbGwgdXBsb2FkIGl0IHRvIEdQVVxuICAgICAqIG1lbW9yeSBhZ2Fpbi5cbiAgICAgKlxuICAgICAqIEBmaXJlcyBQSVhJLkJhc2VUZXh0dXJlI2Rpc3Bvc2VcbiAgICAgKi9cbiAgICBkaXNwb3NlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuZnJhbWVidWZmZXIuZGlzcG9zZSgpO1xuXG4gICAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIHRleHR1cmUuXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG5cbiAgICAgICAgdGhpcy5mcmFtZWJ1ZmZlci5kZXN0cm95RGVwdGhUZXh0dXJlKCk7XG4gICAgICAgIHRoaXMuZnJhbWVidWZmZXIgPSBudWxsO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBncm91cEQ4IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbmltcG9ydCB0eXBlIHsgUmVjdGFuZ2xlLCBJU2l6ZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG4vKipcbiAqIFN0b3JlcyBhIHRleHR1cmUncyBmcmFtZSBpbiBVViBjb29yZGluYXRlcywgaW5cbiAqIHdoaWNoIGV2ZXJ5dGhpbmcgbGllcyBpbiB0aGUgcmVjdGFuZ2xlIGBbKDAsMCksICgxLDApLFxuICogKDEsMSksICgwLDEpXWAuXG4gKlxuICogfCBDb3JuZXIgICAgICAgfCBDb29yZGluYXRlcyB8XG4gKiB8LS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLXxcbiAqIHwgVG9wLUxlZnQgICAgIHwgYCh4MCx5MClgICAgfFxuICogfCBUb3AtUmlnaHQgICAgfCBgKHgxLHkxKWAgICB8XG4gKiB8IEJvdHRvbS1SaWdodCB8IGAoeDIseTIpYCAgIHxcbiAqIHwgQm90dG9tLUxlZnQgIHwgYCh4Myx5MylgICAgfFxuICpcbiAqIEBjbGFzc1xuICogQHByb3RlY3RlZFxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIFRleHR1cmVVdnNcbntcbiAgICBwdWJsaWMgeDA6IG51bWJlcjtcbiAgICBwdWJsaWMgeTA6IG51bWJlcjtcbiAgICBwdWJsaWMgeDE6IG51bWJlcjtcbiAgICBwdWJsaWMgeTE6IG51bWJlcjtcbiAgICBwdWJsaWMgeDI6IG51bWJlcjtcbiAgICBwdWJsaWMgeTI6IG51bWJlcjtcbiAgICBwdWJsaWMgeDM6IG51bWJlcjtcbiAgICBwdWJsaWMgeTM6IG51bWJlcjtcbiAgICBwdWJsaWMgdXZzRmxvYXQzMjogRmxvYXQzMkFycmF5O1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFgtY29tcG9uZW50IG9mIHRvcC1sZWZ0IGNvcm5lciBgKHgwLHkwKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueDAgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBZLWNvbXBvbmVudCBvZiB0b3AtbGVmdCBjb3JuZXIgYCh4MCx5MClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnkwID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogWC1jb21wb25lbnQgb2YgdG9wLXJpZ2h0IGNvcm5lciBgKHgxLHkxKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueDEgPSAxO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBZLWNvbXBvbmVudCBvZiB0b3AtcmlnaHQgY29ybmVyIGAoeDEseTEpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55MSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFgtY29tcG9uZW50IG9mIGJvdHRvbS1yaWdodCBjb3JuZXIgYCh4Mix5MilgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLngyID0gMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogWS1jb21wb25lbnQgb2YgYm90dG9tLXJpZ2h0IGNvcm5lciBgKHgyLHkyKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueTIgPSAxO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBYLWNvbXBvbmVudCBvZiBib3R0b20tbGVmdCBjb3JuZXIgYCh4Myx5MylgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLngzID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogWS1jb21wb25lbnQgb2YgYm90dG9tLXJpZ2h0IGNvcm5lciBgKHgzLHkzKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueTMgPSAxO1xuXG4gICAgICAgIHRoaXMudXZzRmxvYXQzMiA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdGV4dHVyZSBVdnMgYmFzZWQgb24gdGhlIGdpdmVuIGZyYW1lIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UElYSS5SZWN0YW5nbGV9IGZyYW1lIC0gVGhlIGZyYW1lIG9mIHRoZSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtQSVhJLlJlY3RhbmdsZX0gYmFzZUZyYW1lIC0gVGhlIGJhc2UgZnJhbWUgb2YgdGhlIHRleHR1cmVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRlIC0gUm90YXRpb24gb2YgZnJhbWUsIHNlZSB7QGxpbmsgUElYSS5ncm91cEQ4fVxuICAgICAqL1xuICAgIHNldChmcmFtZTogUmVjdGFuZ2xlLCBiYXNlRnJhbWU6IElTaXplLCByb3RhdGU6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHR3ID0gYmFzZUZyYW1lLndpZHRoO1xuICAgICAgICBjb25zdCB0aCA9IGJhc2VGcmFtZS5oZWlnaHQ7XG5cbiAgICAgICAgaWYgKHJvdGF0ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gd2lkdGggYW5kIGhlaWdodCBkaXYgMiBkaXYgYmFzZUZyYW1lIHNpemVcbiAgICAgICAgICAgIGNvbnN0IHcyID0gZnJhbWUud2lkdGggLyAyIC8gdHc7XG4gICAgICAgICAgICBjb25zdCBoMiA9IGZyYW1lLmhlaWdodCAvIDIgLyB0aDtcblxuICAgICAgICAgICAgLy8gY29vcmRpbmF0ZXMgb2YgY2VudGVyXG4gICAgICAgICAgICBjb25zdCBjWCA9IChmcmFtZS54IC8gdHcpICsgdzI7XG4gICAgICAgICAgICBjb25zdCBjWSA9IChmcmFtZS55IC8gdGgpICsgaDI7XG5cbiAgICAgICAgICAgIHJvdGF0ZSA9IGdyb3VwRDguYWRkKHJvdGF0ZSwgZ3JvdXBEOC5OVyk7IC8vIE5XIGlzIHRvcC1sZWZ0IGNvcm5lclxuICAgICAgICAgICAgdGhpcy54MCA9IGNYICsgKHcyICogZ3JvdXBEOC51WChyb3RhdGUpKTtcbiAgICAgICAgICAgIHRoaXMueTAgPSBjWSArIChoMiAqIGdyb3VwRDgudVkocm90YXRlKSk7XG5cbiAgICAgICAgICAgIHJvdGF0ZSA9IGdyb3VwRDguYWRkKHJvdGF0ZSwgMik7IC8vIHJvdGF0ZSA5MCBkZWdyZWVzIGNsb2Nrd2lzZVxuICAgICAgICAgICAgdGhpcy54MSA9IGNYICsgKHcyICogZ3JvdXBEOC51WChyb3RhdGUpKTtcbiAgICAgICAgICAgIHRoaXMueTEgPSBjWSArIChoMiAqIGdyb3VwRDgudVkocm90YXRlKSk7XG5cbiAgICAgICAgICAgIHJvdGF0ZSA9IGdyb3VwRDguYWRkKHJvdGF0ZSwgMik7XG4gICAgICAgICAgICB0aGlzLngyID0gY1ggKyAodzIgKiBncm91cEQ4LnVYKHJvdGF0ZSkpO1xuICAgICAgICAgICAgdGhpcy55MiA9IGNZICsgKGgyICogZ3JvdXBEOC51WShyb3RhdGUpKTtcblxuICAgICAgICAgICAgcm90YXRlID0gZ3JvdXBEOC5hZGQocm90YXRlLCAyKTtcbiAgICAgICAgICAgIHRoaXMueDMgPSBjWCArICh3MiAqIGdyb3VwRDgudVgocm90YXRlKSk7XG4gICAgICAgICAgICB0aGlzLnkzID0gY1kgKyAoaDIgKiBncm91cEQ4LnVZKHJvdGF0ZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy54MCA9IGZyYW1lLnggLyB0dztcbiAgICAgICAgICAgIHRoaXMueTAgPSBmcmFtZS55IC8gdGg7XG5cbiAgICAgICAgICAgIHRoaXMueDEgPSAoZnJhbWUueCArIGZyYW1lLndpZHRoKSAvIHR3O1xuICAgICAgICAgICAgdGhpcy55MSA9IGZyYW1lLnkgLyB0aDtcblxuICAgICAgICAgICAgdGhpcy54MiA9IChmcmFtZS54ICsgZnJhbWUud2lkdGgpIC8gdHc7XG4gICAgICAgICAgICB0aGlzLnkyID0gKGZyYW1lLnkgKyBmcmFtZS5oZWlnaHQpIC8gdGg7XG5cbiAgICAgICAgICAgIHRoaXMueDMgPSBmcmFtZS54IC8gdHc7XG4gICAgICAgICAgICB0aGlzLnkzID0gKGZyYW1lLnkgKyBmcmFtZS5oZWlnaHQpIC8gdGg7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbMF0gPSB0aGlzLngwO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbMV0gPSB0aGlzLnkwO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbMl0gPSB0aGlzLngxO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbM10gPSB0aGlzLnkxO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbNF0gPSB0aGlzLngyO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbNV0gPSB0aGlzLnkyO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbNl0gPSB0aGlzLngzO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbN10gPSB0aGlzLnkzO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBCYXNlVGV4dHVyZSB9IGZyb20gJy4vQmFzZVRleHR1cmUnO1xuaW1wb3J0IHsgSW1hZ2VSZXNvdXJjZSB9IGZyb20gJy4vcmVzb3VyY2VzL0ltYWdlUmVzb3VyY2UnO1xuaW1wb3J0IHsgQ2FudmFzUmVzb3VyY2UgfSBmcm9tICcuL3Jlc291cmNlcy9DYW52YXNSZXNvdXJjZSc7XG5pbXBvcnQgeyBUZXh0dXJlVXZzIH0gZnJvbSAnLi9UZXh0dXJlVXZzJztcbmltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSAnQHBpeGkvc2V0dGluZ3MnO1xuaW1wb3J0IHsgUmVjdGFuZ2xlLCBQb2ludCB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHsgdWlkLCBUZXh0dXJlQ2FjaGUsIGdldFJlc29sdXRpb25PZlVybCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuXG5pbXBvcnQgdHlwZSB7IElQb2ludERhdGEgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB0eXBlIHsgSUJhc2VUZXh0dXJlT3B0aW9ucywgSW1hZ2VTb3VyY2UgfSBmcm9tICcuL0Jhc2VUZXh0dXJlJztcbmltcG9ydCB0eXBlIHsgVGV4dHVyZU1hdHJpeCB9IGZyb20gJy4vVGV4dHVyZU1hdHJpeCc7XG5cbmNvbnN0IERFRkFVTFRfVVZTID0gbmV3IFRleHR1cmVVdnMoKTtcblxuZXhwb3J0IHR5cGUgVGV4dHVyZVNvdXJjZSA9IHN0cmluZ3xCYXNlVGV4dHVyZXxJbWFnZVNvdXJjZTtcblxuZXhwb3J0IGludGVyZmFjZSBUZXh0dXJlIGV4dGVuZHMgR2xvYmFsTWl4aW5zLlRleHR1cmUsIEV2ZW50RW1pdHRlciB7fVxuXG4vKipcbiAqIEEgdGV4dHVyZSBzdG9yZXMgdGhlIGluZm9ybWF0aW9uIHRoYXQgcmVwcmVzZW50cyBhbiBpbWFnZSBvciBwYXJ0IG9mIGFuIGltYWdlLlxuICpcbiAqIEl0IGNhbm5vdCBiZSBhZGRlZCB0byB0aGUgZGlzcGxheSBsaXN0IGRpcmVjdGx5OyBpbnN0ZWFkIHVzZSBpdCBhcyB0aGUgdGV4dHVyZSBmb3IgYSBTcHJpdGUuXG4gKiBJZiBubyBmcmFtZSBpcyBwcm92aWRlZCBmb3IgYSB0ZXh0dXJlLCB0aGVuIHRoZSB3aG9sZSBpbWFnZSBpcyB1c2VkLlxuICpcbiAqIFlvdSBjYW4gZGlyZWN0bHkgY3JlYXRlIGEgdGV4dHVyZSBmcm9tIGFuIGltYWdlIGFuZCB0aGVuIHJldXNlIGl0IG11bHRpcGxlIHRpbWVzIGxpa2UgdGhpcyA6XG4gKlxuICogYGBganNcbiAqIGxldCB0ZXh0dXJlID0gUElYSS5UZXh0dXJlLmZyb20oJ2Fzc2V0cy9pbWFnZS5wbmcnKTtcbiAqIGxldCBzcHJpdGUxID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xuICogbGV0IHNwcml0ZTIgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XG4gKiBgYGBcbiAqXG4gKiBJZiB5b3UgZGlkbnQgcGFzcyB0aGUgdGV4dHVyZSBmcmFtZSB0byBjb25zdHJ1Y3RvciwgaXQgZW5hYmxlcyBgbm9GcmFtZWAgbW9kZTpcbiAqIGl0IHN1YnNjcmliZXMgb24gYmFzZVRleHR1cmUgZXZlbnRzLCBpdCBhdXRvbWF0aWNhbGx5IHJlc2l6ZXMgYXQgdGhlIHNhbWUgdGltZSBhcyBiYXNlVGV4dHVyZS5cbiAqXG4gKiBUZXh0dXJlcyBtYWRlIGZyb20gU1ZHcywgbG9hZGVkIG9yIG5vdCwgY2Fubm90IGJlIHVzZWQgYmVmb3JlIHRoZSBmaWxlIGZpbmlzaGVzIHByb2Nlc3NpbmcuXG4gKiBZb3UgY2FuIGNoZWNrIGZvciB0aGlzIGJ5IGNoZWNraW5nIHRoZSBzcHJpdGUncyBfdGV4dHVyZUlEIHByb3BlcnR5LlxuICogYGBganNcbiAqIHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlLmZyb20oJ2Fzc2V0cy9pbWFnZS5zdmcnKTtcbiAqIHZhciBzcHJpdGUxID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xuICogLy9zcHJpdGUxLl90ZXh0dXJlSUQgc2hvdWxkIG5vdCBiZSB1bmRlZmluZWQgaWYgdGhlIHRleHR1cmUgaGFzIGZpbmlzaGVkIHByb2Nlc3NpbmcgdGhlIFNWRyBmaWxlXG4gKiBgYGBcbiAqIFlvdSBjYW4gdXNlIGEgdGlja2VyIG9yIHJBRiB0byBlbnN1cmUgeW91ciBzcHJpdGVzIGxvYWQgdGhlIGZpbmlzaGVkIHRleHR1cmVzIGFmdGVyIHByb2Nlc3NpbmcuIFNlZSBpc3N1ZSAjMzA2OC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkudXRpbHMuRXZlbnRFbWl0dGVyXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZSBleHRlbmRzIEV2ZW50RW1pdHRlclxue1xuICAgIHB1YmxpYyBiYXNlVGV4dHVyZTogQmFzZVRleHR1cmU7XG4gICAgcHVibGljIG9yaWc6IFJlY3RhbmdsZTtcbiAgICBwdWJsaWMgdHJpbTogUmVjdGFuZ2xlO1xuICAgIHB1YmxpYyB2YWxpZDogYm9vbGVhbjtcbiAgICBwdWJsaWMgbm9GcmFtZTogYm9vbGVhbjtcbiAgICBwdWJsaWMgZGVmYXVsdEFuY2hvcjogUG9pbnQ7XG4gICAgcHVibGljIHV2TWF0cml4OiBUZXh0dXJlTWF0cml4O1xuICAgIHByb3RlY3RlZCBfcm90YXRlOiBudW1iZXI7XG4gICAgX3VwZGF0ZUlEOiBudW1iZXI7XG4gICAgX2ZyYW1lOiBSZWN0YW5nbGU7XG4gICAgX3V2czogVGV4dHVyZVV2cztcbiAgICB0ZXh0dXJlQ2FjaGVJZHM6IEFycmF5PHN0cmluZz47XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlIC0gVGhlIGJhc2UgdGV4dHVyZSBzb3VyY2UgdG8gY3JlYXRlIHRoZSB0ZXh0dXJlIGZyb21cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSBbZnJhbWVdIC0gVGhlIHJlY3RhbmdsZSBmcmFtZSBvZiB0aGUgdGV4dHVyZSB0byBzaG93XG4gICAgICogQHBhcmFtIHtQSVhJLlJlY3RhbmdsZX0gW29yaWddIC0gVGhlIGFyZWEgb2Ygb3JpZ2luYWwgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7UElYSS5SZWN0YW5nbGV9IFt0cmltXSAtIFRyaW1tZWQgcmVjdGFuZ2xlIG9mIG9yaWdpbmFsIHRleHR1cmVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JvdGF0ZV0gLSBpbmRpY2F0ZXMgaG93IHRoZSB0ZXh0dXJlIHdhcyByb3RhdGVkIGJ5IHRleHR1cmUgcGFja2VyLiBTZWUge0BsaW5rIFBJWEkuZ3JvdXBEOH1cbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gW2FuY2hvcl0gLSBEZWZhdWx0IGFuY2hvciBwb2ludCB1c2VkIGZvciBzcHJpdGUgcGxhY2VtZW50IC8gcm90YXRpb25cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihiYXNlVGV4dHVyZTogQmFzZVRleHR1cmUsIGZyYW1lPzogUmVjdGFuZ2xlLFxuICAgICAgICBvcmlnPzogUmVjdGFuZ2xlLCB0cmltPzogUmVjdGFuZ2xlLCByb3RhdGU/OiBudW1iZXIsIGFuY2hvcj86IElQb2ludERhdGEpXG4gICAge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEb2VzIHRoaXMgVGV4dHVyZSBoYXZlIGFueSBmcmFtZSBkYXRhIGFzc2lnbmVkIHRvIGl0P1xuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIG1vZGUgaXMgZW5hYmxlZCBhdXRvbWF0aWNhbGx5IGlmIG5vIGZyYW1lIHdhcyBwYXNzZWQgaW5zaWRlIGNvbnN0cnVjdG9yLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJbiB0aGlzIG1vZGUgdGV4dHVyZSBpcyBzdWJzY3JpYmVkIHRvIGJhc2VUZXh0dXJlIGV2ZW50cywgYW5kIGZpcmVzIGB1cGRhdGVgIG9uIGFueSBjaGFuZ2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIEJld2FyZSwgYWZ0ZXIgbG9hZGluZyBvciByZXNpemUgb2YgYmFzZVRleHR1cmUgZXZlbnQgY2FuIGZpcmVkIHR3byB0aW1lcyFcbiAgICAgICAgICogSWYgeW91IHdhbnQgbW9yZSBjb250cm9sLCBzdWJzY3JpYmUgb24gYmFzZVRleHR1cmUgaXRzZWxmLlxuICAgICAgICAgKlxuICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgKiB0ZXh0dXJlLm9uKCd1cGRhdGUnLCAoKSA9PiB7fSk7XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKlxuICAgICAgICAgKiBBbnkgYXNzaWdubWVudCBvZiBgZnJhbWVgIHN3aXRjaGVzIG9mZiBgbm9GcmFtZWAgbW9kZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9GcmFtZSA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghZnJhbWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubm9GcmFtZSA9IHRydWU7XG4gICAgICAgICAgICBmcmFtZSA9IG5ldyBSZWN0YW5nbGUoMCwgMCwgMSwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmFzZVRleHR1cmUgaW5zdGFuY2VvZiBUZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICBiYXNlVGV4dHVyZSA9IGJhc2VUZXh0dXJlLmJhc2VUZXh0dXJlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBiYXNlIHRleHR1cmUgdGhhdCB0aGlzIHRleHR1cmUgdXNlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5CYXNlVGV4dHVyZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmFzZVRleHR1cmUgPSBiYXNlVGV4dHVyZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBpcyB0aGUgYXJlYSBvZiB0aGUgQmFzZVRleHR1cmUgaW1hZ2UgdG8gYWN0dWFsbHkgY29weSB0byB0aGUgQ2FudmFzIC8gV2ViR0wgd2hlbiByZW5kZXJpbmcsXG4gICAgICAgICAqIGlycmVzcGVjdGl2ZSBvZiB0aGUgYWN0dWFsIGZyYW1lIHNpemUgb3IgcGxhY2VtZW50ICh3aGljaCBjYW4gYmUgaW5mbHVlbmNlZCBieSB0cmltbWVkIHRleHR1cmUgYXRsYXNlcylcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5SZWN0YW5nbGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9mcmFtZSA9IGZyYW1lO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGlzIHRoZSB0cmltbWVkIGFyZWEgb2Ygb3JpZ2luYWwgdGV4dHVyZSwgYmVmb3JlIGl0IHdhcyBwdXQgaW4gYXRsYXNcbiAgICAgICAgICogUGxlYXNlIGNhbGwgYHVwZGF0ZVV2cygpYCBhZnRlciB5b3UgY2hhbmdlIGNvb3JkaW5hdGVzIG9mIGB0cmltYCBtYW51YWxseS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5SZWN0YW5nbGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyaW0gPSB0cmltO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIHdpbGwgbGV0IHRoZSByZW5kZXJlciBrbm93IGlmIHRoZSB0ZXh0dXJlIGlzIHZhbGlkLiBJZiBpdCdzIG5vdCB0aGVuIGl0IGNhbm5vdCBiZSByZW5kZXJlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFdlYkdMIFVWIGRhdGEgY2FjaGUuIENhbiBiZSB1c2VkIGFzIHF1YWQgVVZcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5UZXh0dXJlVXZzfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl91dnMgPSBERUZBVUxUX1VWUztcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVmYXVsdCBUZXh0dXJlTWF0cml4IGluc3RhbmNlIGZvciB0aGlzIHRleHR1cmVcbiAgICAgICAgICogQnkgZGVmYXVsdCB0aGF0IG9iamVjdCBpcyBub3QgY3JlYXRlZCBiZWNhdXNlIGl0cyBoZWF2eVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlRleHR1cmVNYXRyaXh9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnV2TWF0cml4ID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBpcyB0aGUgYXJlYSBvZiBvcmlnaW5hbCB0ZXh0dXJlLCBiZWZvcmUgaXQgd2FzIHB1dCBpbiBhdGxhc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlJlY3RhbmdsZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JpZyA9IG9yaWcgfHwgZnJhbWU7Ly8gbmV3IFJlY3RhbmdsZSgwLCAwLCAxLCAxKTtcblxuICAgICAgICB0aGlzLl9yb3RhdGUgPSBOdW1iZXIocm90YXRlIHx8IDApO1xuXG4gICAgICAgIGlmIChyb3RhdGUgYXMgYW55ID09PSB0cnVlKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIG9sZCB0ZXh0dXJlcGFja2VyIGxlZ2FjeSwgc29tZSBnYW1lcy9saWJyYXJpZXMgYXJlIHBhc3NpbmcgXCJ0cnVlXCIgZm9yIHJvdGF0ZWQgdGV4dHVyZXNcbiAgICAgICAgICAgIHRoaXMuX3JvdGF0ZSA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fcm90YXRlICUgMiAhPT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhdHRlbXB0IHRvIHVzZSBkaWFtb25kLXNoYXBlZCBVVnMuIElmIHlvdSBhcmUgc3VyZSwgc2V0IHJvdGF0aW9uIG1hbnVhbGx5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQW5jaG9yIHBvaW50IHRoYXQgaXMgdXNlZCBhcyBkZWZhdWx0IGlmIHNwcml0ZSBpcyBjcmVhdGVkIHdpdGggdGhpcyB0ZXh0dXJlLlxuICAgICAgICAgKiBDaGFuZ2luZyB0aGUgYGRlZmF1bHRBbmNob3JgIGF0IGEgbGF0ZXIgcG9pbnQgb2YgdGltZSB3aWxsIG5vdCB1cGRhdGUgU3ByaXRlJ3MgYW5jaG9yIHBvaW50LlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlBvaW50fVxuICAgICAgICAgKiBAZGVmYXVsdCB7MCwwfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0QW5jaG9yID0gYW5jaG9yID8gbmV3IFBvaW50KGFuY2hvci54LCBhbmNob3IueSkgOiBuZXcgUG9pbnQoMCwgMCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSBJRCBpcyBvYnNlcnZlZCBieSBzcHJpdGVzIGFuZCBUZXh0dXJlTWF0cml4IGluc3RhbmNlcy5cbiAgICAgICAgICogQ2FsbCB1cGRhdGVVdnMoKSB0byBpbmNyZW1lbnQgaXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cblxuICAgICAgICB0aGlzLl91cGRhdGVJRCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpZHMgdW5kZXIgd2hpY2ggdGhpcyBUZXh0dXJlIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSB0ZXh0dXJlIGNhY2hlLiBUaGlzIGlzXG4gICAgICAgICAqIGF1dG9tYXRpY2FsbHkgc2V0IGFzIGxvbmcgYXMgVGV4dHVyZS5hZGRUb0NhY2hlIGlzIHVzZWQsIGJ1dCBtYXkgbm90IGJlIHNldCBpZiBhXG4gICAgICAgICAqIFRleHR1cmUgaXMgYWRkZWQgZGlyZWN0bHkgdG8gdGhlIFRleHR1cmVDYWNoZSBhcnJheS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRleHR1cmVDYWNoZUlkcyA9IFtdO1xuXG4gICAgICAgIGlmICghYmFzZVRleHR1cmUudmFsaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJhc2VUZXh0dXJlLm9uY2UoJ2xvYWRlZCcsIHRoaXMub25CYXNlVGV4dHVyZVVwZGF0ZWQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMubm9GcmFtZSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gZnJhbWUgd2Ugc2hvdWxkIG1vbml0b3IgZm9yIGFueSBiYXNlIHRleHR1cmUgY2hhbmdlcy4uXG4gICAgICAgICAgICBpZiAoYmFzZVRleHR1cmUudmFsaWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkJhc2VUZXh0dXJlVXBkYXRlZChiYXNlVGV4dHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gZnJhbWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ub0ZyYW1lKVxuICAgICAgICB7XG4gICAgICAgICAgICBiYXNlVGV4dHVyZS5vbigndXBkYXRlJywgdGhpcy5vbkJhc2VUZXh0dXJlVXBkYXRlZCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoaXMgdGV4dHVyZSBvbiB0aGUgZ3B1LlxuICAgICAqXG4gICAgICogQ2FsbHMgdGhlIFRleHR1cmVSZXNvdXJjZSB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYWRqdXN0ZWQgYGZyYW1lYCBtYW51YWxseSwgcGxlYXNlIGNhbGwgYHVwZGF0ZVV2cygpYCBpbnN0ZWFkLlxuICAgICAqXG4gICAgICovXG4gICAgdXBkYXRlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmJhc2VUZXh0dXJlLnJlc291cmNlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmJhc2VUZXh0dXJlLnJlc291cmNlLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIGJhc2UgdGV4dHVyZSBpcyB1cGRhdGVkXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSBiYXNlVGV4dHVyZSAtIFRoZSBiYXNlIHRleHR1cmUuXG4gICAgICovXG4gICAgb25CYXNlVGV4dHVyZVVwZGF0ZWQoYmFzZVRleHR1cmU6IEJhc2VUZXh0dXJlKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMubm9GcmFtZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJhc2VUZXh0dXJlLnZhbGlkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fZnJhbWUud2lkdGggPSBiYXNlVGV4dHVyZS53aWR0aDtcbiAgICAgICAgICAgIHRoaXMuX2ZyYW1lLmhlaWdodCA9IGJhc2VUZXh0dXJlLmhlaWdodDtcbiAgICAgICAgICAgIHRoaXMudmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVVdnMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFRPRE8gdGhpcyBjb2RlIGxvb2tzIGNvbmZ1c2luZy4uIGJvbyB0byBhYnVzaW5nIGdldHRlcnMgYW5kIHNldHRlcnMhXG4gICAgICAgICAgICAvLyBpZiB1c2VyIGdhdmUgdXMgZnJhbWUgdGhhdCBoYXMgYmlnZ2VyIHNpemUgdGhhbiByZXNpemVkIHRleHR1cmUgaXQgY2FuIGJlIGEgcHJvYmxlbVxuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMuX2ZyYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbWl0KCd1cGRhdGUnLCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIHRleHR1cmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Rlc3Ryb3lCYXNlPWZhbHNlXSAtIFdoZXRoZXIgdG8gZGVzdHJveSB0aGUgYmFzZSB0ZXh0dXJlIGFzIHdlbGxcbiAgICAgKi9cbiAgICBkZXN0cm95KGRlc3Ryb3lCYXNlPzogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmJhc2VUZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoZGVzdHJveUJhc2UpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb3VyY2UgPSB0aGlzLmJhc2VUZXh0dXJlIGFzIGFueTtcblxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgdGV4dHVyZSBpZiBpdCBleGlzdHMgaW4gdGhlIHRleHR1cmUgY2FjaGUuLlxuICAgICAgICAgICAgICAgIC8vIHRoaXMgb25seSBuZWVkcyB0byBiZSByZW1vdmVkIGlmIHRoZSBiYXNlIHRleHR1cmUgaXMgYWN0dWFsbHkgZGVzdHJveWVkIHRvby4uXG4gICAgICAgICAgICAgICAgaWYgKHJlc291cmNlICYmIHJlc291cmNlLnVybCAmJiBUZXh0dXJlQ2FjaGVbcmVzb3VyY2UudXJsXSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFRleHR1cmUucmVtb3ZlRnJvbUNhY2hlKHJlc291cmNlLnVybCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlVGV4dHVyZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYmFzZVRleHR1cmUub2ZmKCdsb2FkZWQnLCB0aGlzLm9uQmFzZVRleHR1cmVVcGRhdGVkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYmFzZVRleHR1cmUub2ZmKCd1cGRhdGUnLCB0aGlzLm9uQmFzZVRleHR1cmVVcGRhdGVkLCB0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy5iYXNlVGV4dHVyZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mcmFtZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3V2cyA9IG51bGw7XG4gICAgICAgIHRoaXMudHJpbSA9IG51bGw7XG4gICAgICAgIHRoaXMub3JpZyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy52YWxpZCA9IGZhbHNlO1xuXG4gICAgICAgIFRleHR1cmUucmVtb3ZlRnJvbUNhY2hlKHRoaXMpO1xuICAgICAgICB0aGlzLnRleHR1cmVDYWNoZUlkcyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0ZXh0dXJlIG9iamVjdCB0aGF0IGFjdHMgdGhlIHNhbWUgYXMgdGhpcyBvbmUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLlRleHR1cmV9IFRoZSBuZXcgdGV4dHVyZVxuICAgICAqL1xuICAgIGNsb25lKCk6IFRleHR1cmVcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dHVyZSh0aGlzLmJhc2VUZXh0dXJlLFxuICAgICAgICAgICAgdGhpcy5mcmFtZS5jbG9uZSgpLFxuICAgICAgICAgICAgdGhpcy5vcmlnLmNsb25lKCksXG4gICAgICAgICAgICB0aGlzLnRyaW0gJiYgdGhpcy50cmltLmNsb25lKCksXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZSxcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEFuY2hvclxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGludGVybmFsIFdlYkdMIFVWIGNhY2hlLiBVc2UgaXQgYWZ0ZXIgeW91IGNoYW5nZSBgZnJhbWVgIG9yIGB0cmltYCBvZiB0aGUgdGV4dHVyZS5cbiAgICAgKiBDYWxsIGl0IGFmdGVyIGNoYW5naW5nIHRoZSBmcmFtZVxuICAgICAqL1xuICAgIHVwZGF0ZVV2cygpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fdXZzID09PSBERUZBVUxUX1VWUylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fdXZzID0gbmV3IFRleHR1cmVVdnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3V2cy5zZXQodGhpcy5fZnJhbWUsIHRoaXMuYmFzZVRleHR1cmUsIHRoaXMucm90YXRlKTtcblxuICAgICAgICB0aGlzLl91cGRhdGVJRCsrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYSBuZXcgVGV4dHVyZSBiYXNlZCBvbiB0aGUgc291cmNlIHlvdSBwcm92aWRlLlxuICAgICAqIFRoZSBzb3VyY2UgY2FuIGJlIC0gZnJhbWUgaWQsIGltYWdlIHVybCwgdmlkZW8gdXJsLCBjYW52YXMgZWxlbWVudCwgdmlkZW8gZWxlbWVudCwgYmFzZSB0ZXh0dXJlXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd8SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fFBJWEkuQmFzZVRleHR1cmV9IHNvdXJjZVxuICAgICAqICAgICAgICBTb3VyY2UgdG8gY3JlYXRlIHRleHR1cmUgZnJvbVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gU2VlIHtAbGluayBQSVhJLkJhc2VUZXh0dXJlfSdzIGNvbnN0cnVjdG9yIGZvciBvcHRpb25zLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0cmljdF0gLSBFbmZvcmNlIHN0cmljdC1tb2RlLCBzZWUge0BsaW5rIFBJWEkuc2V0dGluZ3MuU1RSSUNUX1RFWFRVUkVfQ0FDSEV9LlxuICAgICAqIEByZXR1cm4ge1BJWEkuVGV4dHVyZX0gVGhlIG5ld2x5IGNyZWF0ZWQgdGV4dHVyZVxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tKHNvdXJjZTogVGV4dHVyZVNvdXJjZSwgb3B0aW9uczogSUJhc2VUZXh0dXJlT3B0aW9ucyA9IHt9LFxuICAgICAgICBzdHJpY3QgPSBzZXR0aW5ncy5TVFJJQ1RfVEVYVFVSRV9DQUNIRSk6IFRleHR1cmVcbiAgICB7XG4gICAgICAgIGNvbnN0IGlzRnJhbWUgPSB0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJztcbiAgICAgICAgbGV0IGNhY2hlSWQgPSBudWxsO1xuXG4gICAgICAgIGlmIChpc0ZyYW1lKVxuICAgICAgICB7XG4gICAgICAgICAgICBjYWNoZUlkID0gc291cmNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCEoc291cmNlIGFzIGFueSkuX3BpeGlJZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAoc291cmNlIGFzIGFueSkuX3BpeGlJZCA9IGBwaXhpaWRfJHt1aWQoKX1gO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWNoZUlkID0gKHNvdXJjZSBhcyBhbnkpLl9waXhpSWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGV4dHVyZSA9IFRleHR1cmVDYWNoZVtjYWNoZUlkXTtcblxuICAgICAgICAvLyBTdHJpY3QtbW9kZSByZWplY3RzIGludmFsaWQgY2FjaGVJZHNcbiAgICAgICAgaWYgKGlzRnJhbWUgJiYgc3RyaWN0ICYmICF0ZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBjYWNoZUlkIFwiJHtjYWNoZUlkfVwiIGRvZXMgbm90IGV4aXN0IGluIFRleHR1cmVDYWNoZS5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGV4dHVyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLnJlc29sdXRpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5yZXNvbHV0aW9uID0gZ2V0UmVzb2x1dGlvbk9mVXJsKHNvdXJjZSBhcyBzdHJpbmcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmUobmV3IEJhc2VUZXh0dXJlKHNvdXJjZSwgb3B0aW9ucykpO1xuICAgICAgICAgICAgdGV4dHVyZS5iYXNlVGV4dHVyZS5jYWNoZUlkID0gY2FjaGVJZDtcblxuICAgICAgICAgICAgQmFzZVRleHR1cmUuYWRkVG9DYWNoZSh0ZXh0dXJlLmJhc2VUZXh0dXJlLCBjYWNoZUlkKTtcbiAgICAgICAgICAgIFRleHR1cmUuYWRkVG9DYWNoZSh0ZXh0dXJlLCBjYWNoZUlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxldHMgYXNzdW1lIGl0cyBhIGJhc2UgdGV4dHVyZSFcbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZnVsIGZvciBsb2FkaW5nIHRleHR1cmVzIHZpYSBVUkxzLiBVc2UgaW5zdGVhZCBvZiBgVGV4dHVyZS5mcm9tYCBiZWNhdXNlXG4gICAgICogaXQgZG9lcyBhIGJldHRlciBqb2Igb2YgaGFuZGxpbmcgZmFpbGVkIFVSTHMgbW9yZSBlZmZlY3RpdmVseS4gVGhpcyBhbHNvIGlnbm9yZXNcbiAgICAgKiBgUElYSS5zZXR0aW5ncy5TVFJJQ1RfVEVYVFVSRV9DQUNIRWAuIFdvcmtzIGZvciBWaWRlb3MsIFNWR3MsIEltYWdlcy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSByZW1vdGUgVVJMIHRvIGxvYWQuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSBPcHRpb25hbCBvcHRpb25zIHRvIGluY2x1ZGVcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFBJWEkuVGV4dHVyZT59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgVGV4dHVyZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVVSTCh1cmw6IHN0cmluZywgb3B0aW9ucz86IElCYXNlVGV4dHVyZU9wdGlvbnMpOiBQcm9taXNlPFRleHR1cmU+XG4gICAge1xuICAgICAgICBjb25zdCByZXNvdXJjZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgYXV0b0xvYWQ6IGZhbHNlIH0sIG9wdGlvbnM/LnJlc291cmNlT3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSBUZXh0dXJlLmZyb20odXJsLCBPYmplY3QuYXNzaWduKHsgcmVzb3VyY2VPcHRpb25zIH0sIG9wdGlvbnMpLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IHJlc291cmNlID0gdGV4dHVyZS5iYXNlVGV4dHVyZS5yZXNvdXJjZSBhcyBJbWFnZVJlc291cmNlO1xuXG4gICAgICAgIC8vIFRoZSB0ZXh0dXJlIHdhcyBhbHJlYWR5IGxvYWRlZFxuICAgICAgICBpZiAodGV4dHVyZS5iYXNlVGV4dHVyZS52YWxpZClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0ZXh0dXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1hbnVhbGx5IGxvYWQgdGhlIHRleHR1cmUsIHRoaXMgc2hvdWxkIGFsbG93IHVzZXJzIHRvIGhhbmRsZSBsb2FkIGVycm9yc1xuICAgICAgICByZXR1cm4gcmVzb3VyY2UubG9hZCgpLnRoZW4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRleHR1cmUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgVGV4dHVyZSB3aXRoIGEgQnVmZmVyUmVzb3VyY2UgZnJvbSBhIEZsb2F0MzJBcnJheS5cbiAgICAgKiBSR0JBIHZhbHVlcyBhcmUgZmxvYXRzIGZyb20gMCB0byAxLlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheXxVaW50OEFycmF5fSBidWZmZXIgLSBUaGUgb3B0aW9uYWwgYXJyYXkgdG8gdXNlLCBpZiBubyBkYXRhXG4gICAgICogICAgICAgIGlzIHByb3ZpZGVkLCBhIG5ldyBGbG9hdDMyQXJyYXkgaXMgY3JlYXRlZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggLSBXaWR0aCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gSGVpZ2h0IG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gU2VlIHtAbGluayBQSVhJLkJhc2VUZXh0dXJlfSdzIGNvbnN0cnVjdG9yIGZvciBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge1BJWEkuVGV4dHVyZX0gVGhlIHJlc3VsdGluZyBuZXcgQmFzZVRleHR1cmVcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUJ1ZmZlcihidWZmZXI6IEZsb2F0MzJBcnJheXxVaW50OEFycmF5LFxuICAgICAgICB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgb3B0aW9uczogSUJhc2VUZXh0dXJlT3B0aW9ucyk6IFRleHR1cmVcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dHVyZShCYXNlVGV4dHVyZS5mcm9tQnVmZmVyKGJ1ZmZlciwgd2lkdGgsIGhlaWdodCwgb3B0aW9ucykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHRleHR1cmUgZnJvbSBhIHNvdXJjZSBhbmQgYWRkIHRvIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9IHNvdXJjZSAtIFRoZSBpbnB1dCBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGltYWdlVXJsIC0gRmlsZSBuYW1lIG9mIHRleHR1cmUsIGZvciBjYWNoZSBhbmQgcmVzb2x2aW5nIHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtuYW1lXSAtIEh1bWFuIHJlYWRhYmxlIG5hbWUgZm9yIHRoZSB0ZXh0dXJlIGNhY2hlLiBJZiBubyBuYW1lIGlzXG4gICAgICogICAgICAgIHNwZWNpZmllZCwgb25seSBgaW1hZ2VVcmxgIHdpbGwgYmUgdXNlZCBhcyB0aGUgY2FjaGUgSUQuXG4gICAgICogQHJldHVybiB7UElYSS5UZXh0dXJlfSBPdXRwdXQgdGV4dHVyZVxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tTG9hZGVyKHNvdXJjZTogSFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudCwgaW1hZ2VVcmw6IHN0cmluZywgbmFtZTogc3RyaW5nKTogVGV4dHVyZVxuICAgIHtcbiAgICAgICAgY29uc3QgcmVzb3VyY2UgPSBuZXcgSW1hZ2VSZXNvdXJjZShzb3VyY2UgYXMgYW55KTtcblxuICAgICAgICByZXNvdXJjZS51cmwgPSBpbWFnZVVybDtcblxuICAgICAgICBjb25zdCBiYXNlVGV4dHVyZSA9IG5ldyBCYXNlVGV4dHVyZShyZXNvdXJjZSwge1xuICAgICAgICAgICAgc2NhbGVNb2RlOiBzZXR0aW5ncy5TQ0FMRV9NT0RFLFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogZ2V0UmVzb2x1dGlvbk9mVXJsKGltYWdlVXJsKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKGJhc2VUZXh0dXJlKTtcblxuICAgICAgICAvLyBObyBuYW1lLCB1c2UgaW1hZ2VVcmwgaW5zdGVhZFxuICAgICAgICBpZiAoIW5hbWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWUgPSBpbWFnZVVybDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxldHMgYWxzbyBhZGQgdGhlIGZyYW1lIHRvIHBpeGkncyBnbG9iYWwgY2FjaGUgZm9yICdmcm9tTG9hZGVyJyBmdW5jdGlvblxuICAgICAgICBCYXNlVGV4dHVyZS5hZGRUb0NhY2hlKHRleHR1cmUuYmFzZVRleHR1cmUsIG5hbWUpO1xuICAgICAgICBUZXh0dXJlLmFkZFRvQ2FjaGUodGV4dHVyZSwgbmFtZSk7XG5cbiAgICAgICAgLy8gYWxzbyBhZGQgcmVmZXJlbmNlcyBieSB1cmwgaWYgdGhleSBhcmUgZGlmZmVyZW50LlxuICAgICAgICBpZiAobmFtZSAhPT0gaW1hZ2VVcmwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIEJhc2VUZXh0dXJlLmFkZFRvQ2FjaGUodGV4dHVyZS5iYXNlVGV4dHVyZSwgaW1hZ2VVcmwpO1xuICAgICAgICAgICAgVGV4dHVyZS5hZGRUb0NhY2hlKHRleHR1cmUsIGltYWdlVXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBUZXh0dXJlIHRvIHRoZSBnbG9iYWwgVGV4dHVyZUNhY2hlLiBUaGlzIGNhY2hlIGlzIHNoYXJlZCBhY3Jvc3MgdGhlIHdob2xlIFBJWEkgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7UElYSS5UZXh0dXJlfSB0ZXh0dXJlIC0gVGhlIFRleHR1cmUgdG8gYWRkIHRvIHRoZSBjYWNoZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgdGhhdCB0aGUgVGV4dHVyZSB3aWxsIGJlIHN0b3JlZCBhZ2FpbnN0LlxuICAgICAqL1xuICAgIHN0YXRpYyBhZGRUb0NhY2hlKHRleHR1cmU6IFRleHR1cmUsIGlkOiBzdHJpbmcpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0ZXh0dXJlLnRleHR1cmVDYWNoZUlkcy5pbmRleE9mKGlkKSA9PT0gLTEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMucHVzaChpZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChUZXh0dXJlQ2FjaGVbaWRdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUZXh0dXJlIGFkZGVkIHRvIHRoZSBjYWNoZSB3aXRoIGFuIGlkIFske2lkfV0gdGhhdCBhbHJlYWR5IGhhZCBhbiBlbnRyeWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBUZXh0dXJlQ2FjaGVbaWRdID0gdGV4dHVyZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIFRleHR1cmUgZnJvbSB0aGUgZ2xvYmFsIFRleHR1cmVDYWNoZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xQSVhJLlRleHR1cmV9IHRleHR1cmUgLSBpZCBvZiBhIFRleHR1cmUgdG8gYmUgcmVtb3ZlZCwgb3IgYSBUZXh0dXJlIGluc3RhbmNlIGl0c2VsZlxuICAgICAqIEByZXR1cm4ge1BJWEkuVGV4dHVyZXxudWxsfSBUaGUgVGV4dHVyZSB0aGF0IHdhcyByZW1vdmVkXG4gICAgICovXG4gICAgc3RhdGljIHJlbW92ZUZyb21DYWNoZSh0ZXh0dXJlOiBzdHJpbmd8VGV4dHVyZSk6IFRleHR1cmV8bnVsbFxuICAgIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0ZXh0dXJlID09PSAnc3RyaW5nJylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdGV4dHVyZUZyb21DYWNoZSA9IFRleHR1cmVDYWNoZVt0ZXh0dXJlXTtcblxuICAgICAgICAgICAgaWYgKHRleHR1cmVGcm9tQ2FjaGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0ZXh0dXJlRnJvbUNhY2hlLnRleHR1cmVDYWNoZUlkcy5pbmRleE9mKHRleHR1cmUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlRnJvbUNhY2hlLnRleHR1cmVDYWNoZUlkcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlbGV0ZSBUZXh0dXJlQ2FjaGVbdGV4dHVyZV07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dHVyZUZyb21DYWNoZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0ZXh0dXJlICYmIHRleHR1cmUudGV4dHVyZUNhY2hlSWRzKVxuICAgICAgICB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHR1cmUudGV4dHVyZUNhY2hlSWRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgdGV4dHVyZSBtYXRjaGVzIHRoZSBvbmUgYmVpbmcgcGFzc2VkIGluIGJlZm9yZSBkZWxldGluZyBpdCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgICAgICAgICAgICBpZiAoVGV4dHVyZUNhY2hlW3RleHR1cmUudGV4dHVyZUNhY2hlSWRzW2ldXSA9PT0gdGV4dHVyZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBUZXh0dXJlQ2FjaGVbdGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHNbaV1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMubGVuZ3RoID0gMDtcblxuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHJlc29sdXRpb24gb2YgYmFzZVRleHR1cmVcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBnZXQgcmVzb2x1dGlvbigpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VUZXh0dXJlLnJlc29sdXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYW1lIHNwZWNpZmllcyB0aGUgcmVnaW9uIG9mIHRoZSBiYXNlIHRleHR1cmUgdGhhdCB0aGlzIHRleHR1cmUgdXNlcy5cbiAgICAgKiBQbGVhc2UgY2FsbCBgdXBkYXRlVXZzKClgIGFmdGVyIHlvdSBjaGFuZ2UgY29vcmRpbmF0ZXMgb2YgYGZyYW1lYCBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuUmVjdGFuZ2xlfVxuICAgICAqL1xuICAgIGdldCBmcmFtZSgpOiBSZWN0YW5nbGVcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mcmFtZTtcbiAgICB9XG5cbiAgICBzZXQgZnJhbWUoZnJhbWU6IFJlY3RhbmdsZSlcbiAgICB7XG4gICAgICAgIHRoaXMuX2ZyYW1lID0gZnJhbWU7XG5cbiAgICAgICAgdGhpcy5ub0ZyYW1lID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSBmcmFtZTtcbiAgICAgICAgY29uc3QgeE5vdEZpdCA9IHggKyB3aWR0aCA+IHRoaXMuYmFzZVRleHR1cmUud2lkdGg7XG4gICAgICAgIGNvbnN0IHlOb3RGaXQgPSB5ICsgaGVpZ2h0ID4gdGhpcy5iYXNlVGV4dHVyZS5oZWlnaHQ7XG5cbiAgICAgICAgaWYgKHhOb3RGaXQgfHwgeU5vdEZpdClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcmVsYXRpb25zaGlwID0geE5vdEZpdCAmJiB5Tm90Rml0ID8gJ2FuZCcgOiAnb3InO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JYID0gYFg6ICR7eH0gKyAke3dpZHRofSA9ICR7eCArIHdpZHRofSA+ICR7dGhpcy5iYXNlVGV4dHVyZS53aWR0aH1gO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JZID0gYFk6ICR7eX0gKyAke2hlaWdodH0gPSAke3kgKyBoZWlnaHR9ID4gJHt0aGlzLmJhc2VUZXh0dXJlLmhlaWdodH1gO1xuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RleHR1cmUgRXJyb3I6IGZyYW1lIGRvZXMgbm90IGZpdCBpbnNpZGUgdGhlIGJhc2UgVGV4dHVyZSBkaW1lbnNpb25zOiAnXG4gICAgICAgICAgICAgICAgKyBgJHtlcnJvclh9ICR7cmVsYXRpb25zaGlwfSAke2Vycm9yWX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudmFsaWQgPSB3aWR0aCAmJiBoZWlnaHQgJiYgdGhpcy5iYXNlVGV4dHVyZS52YWxpZDtcblxuICAgICAgICBpZiAoIXRoaXMudHJpbSAmJiAhdGhpcy5yb3RhdGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMub3JpZyA9IGZyYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudmFsaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVXZzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgdGV4dHVyZSBpcyByb3RhdGVkIGluc2lkZSB0aGUgYXRsYXNcbiAgICAgKiBzZXQgdG8gMiB0byBjb21wZW5zYXRlIGZvciB0ZXh0dXJlIHBhY2tlciByb3RhdGlvblxuICAgICAqIHNldCB0byA2IHRvIGNvbXBlbnNhdGUgZm9yIHNwaW5lIHBhY2tlciByb3RhdGlvblxuICAgICAqIGNhbiBiZSB1c2VkIHRvIHJvdGF0ZSBvciBtaXJyb3Igc3ByaXRlc1xuICAgICAqIFNlZSB7QGxpbmsgUElYSS5ncm91cEQ4fSBmb3IgZXhwbGFuYXRpb25cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgcm90YXRlKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JvdGF0ZTtcbiAgICB9XG5cbiAgICBzZXQgcm90YXRlKHJvdGF0ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5fcm90YXRlID0gcm90YXRlO1xuICAgICAgICBpZiAodGhpcy52YWxpZClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVVdnMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgVGV4dHVyZSBpbiBwaXhlbHMuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHdpZHRoKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZy53aWR0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBUZXh0dXJlIGluIHBpeGVscy5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgaGVpZ2h0KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgQmFzZVRleHR1cmV8VGV4dHVyZSBjYXN0XG4gICAgICovXG4gICAgY2FzdFRvQmFzZVRleHR1cmUoKTogQmFzZVRleHR1cmVcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VUZXh0dXJlO1xuICAgIH1cblxuICAgIHN0YXRpYyByZWFkb25seSBFTVBUWTogVGV4dHVyZTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgV0hJVEU6IFRleHR1cmU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVdoaXRlVGV4dHVyZSgpOiBUZXh0dXJlXG57XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cbiAgICBjYW52YXMud2lkdGggPSAxNjtcbiAgICBjYW52YXMuaGVpZ2h0ID0gMTY7XG5cbiAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCAxNiwgMTYpO1xuXG4gICAgcmV0dXJuIG5ldyBUZXh0dXJlKG5ldyBCYXNlVGV4dHVyZShuZXcgQ2FudmFzUmVzb3VyY2UoY2FudmFzKSkpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVBbGxIYW5kbGVycyh0ZXg6IGFueSk6IHZvaWRcbntcbiAgICB0ZXguZGVzdHJveSA9IGZ1bmN0aW9uIF9lbXB0eURlc3Ryb3koKTogdm9pZCB7IC8qIGVtcHR5ICovIH07XG4gICAgdGV4Lm9uID0gZnVuY3Rpb24gX2VtcHR5T24oKTogdm9pZCB7IC8qIGVtcHR5ICovIH07XG4gICAgdGV4Lm9uY2UgPSBmdW5jdGlvbiBfZW1wdHlPbmNlKCk6IHZvaWQgeyAvKiBlbXB0eSAqLyB9O1xuICAgIHRleC5lbWl0ID0gZnVuY3Rpb24gX2VtcHR5RW1pdCgpOiB2b2lkIHsgLyogZW1wdHkgKi8gfTtcbn1cblxuLyoqXG4gKiBBbiBlbXB0eSB0ZXh0dXJlLCB1c2VkIG9mdGVuIHRvIG5vdCBoYXZlIHRvIGNyZWF0ZSBtdWx0aXBsZSBlbXB0eSB0ZXh0dXJlcy5cbiAqIENhbiBub3QgYmUgZGVzdHJveWVkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdGFudFxuICogQG1lbWJlciB7UElYSS5UZXh0dXJlfVxuICovXG4oVGV4dHVyZSBhcyBhbnkpLkVNUFRZID0gbmV3IFRleHR1cmUobmV3IEJhc2VUZXh0dXJlKCkpO1xucmVtb3ZlQWxsSGFuZGxlcnMoVGV4dHVyZS5FTVBUWSk7XG5yZW1vdmVBbGxIYW5kbGVycyhUZXh0dXJlLkVNUFRZLmJhc2VUZXh0dXJlKTtcblxuLyoqXG4gKiBBIHdoaXRlIHRleHR1cmUgb2YgMTZ4MTYgc2l6ZSwgdXNlZCBmb3IgZ3JhcGhpY3MgYW5kIG90aGVyIHRoaW5nc1xuICogQ2FuIG5vdCBiZSBkZXN0cm95ZWQuXG4gKlxuICogQHN0YXRpY1xuICogQGNvbnN0YW50XG4gKiBAbWVtYmVyIHtQSVhJLlRleHR1cmV9XG4gKi9cbihUZXh0dXJlIGFzIGFueSkuV0hJVEUgPSBjcmVhdGVXaGl0ZVRleHR1cmUoKTtcbnJlbW92ZUFsbEhhbmRsZXJzKFRleHR1cmUuV0hJVEUpO1xucmVtb3ZlQWxsSGFuZGxlcnMoVGV4dHVyZS5XSElURS5iYXNlVGV4dHVyZSk7XG4iLCAiaW1wb3J0IHsgQmFzZVJlbmRlclRleHR1cmUgfSBmcm9tICcuL0Jhc2VSZW5kZXJUZXh0dXJlJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICcuLi90ZXh0dXJlcy9UZXh0dXJlJztcblxuaW1wb3J0IHR5cGUgeyBSZWN0YW5nbGUgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB0eXBlIHsgRnJhbWVidWZmZXIgfSBmcm9tICcuLi9mcmFtZWJ1ZmZlci9GcmFtZWJ1ZmZlcic7XG5pbXBvcnQgdHlwZSB7IElCYXNlVGV4dHVyZU9wdGlvbnMgfSBmcm9tICcuLi90ZXh0dXJlcy9CYXNlVGV4dHVyZSc7XG4vKipcbiAqIEEgUmVuZGVyVGV4dHVyZSBpcyBhIHNwZWNpYWwgdGV4dHVyZSB0aGF0IGFsbG93cyBhbnkgUGl4aUpTIGRpc3BsYXkgb2JqZWN0IHRvIGJlIHJlbmRlcmVkIHRvIGl0LlxuICpcbiAqIF9fSGludF9fOiBBbGwgRGlzcGxheU9iamVjdHMgKGkuZS4gU3ByaXRlcykgdGhhdCByZW5kZXIgdG8gYSBSZW5kZXJUZXh0dXJlIHNob3VsZCBiZSBwcmVsb2FkZWRcbiAqIG90aGVyd2lzZSBibGFjayByZWN0YW5nbGVzIHdpbGwgYmUgZHJhd24gaW5zdGVhZC5cbiAqXG4gKiBfX0hpbnQtMl9fOiBUaGUgYWN0dWFsIG1lbW9yeSBhbGxvY2F0aW9uIHdpbGwgaGFwcGVuIG9uIGZpcnN0IHJlbmRlci5cbiAqIFlvdSBzaG91bGRuJ3QgY3JlYXRlIHJlbmRlclRleHR1cmVzIGVhY2ggZnJhbWUganVzdCB0byBkZWxldGUgdGhlbSBhZnRlciwgdHJ5IHRvIHJldXNlIHRoZW0uXG4gKlxuICogQSBSZW5kZXJUZXh0dXJlIHRha2VzIGEgc25hcHNob3Qgb2YgYW55IERpc3BsYXkgT2JqZWN0IGdpdmVuIHRvIGl0cyByZW5kZXIgbWV0aG9kLiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogbGV0IHJlbmRlcmVyID0gUElYSS5hdXRvRGV0ZWN0UmVuZGVyZXIoKTtcbiAqIGxldCByZW5kZXJUZXh0dXJlID0gUElYSS5SZW5kZXJUZXh0dXJlLmNyZWF0ZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pO1xuICogbGV0IHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb20oXCJzcGluT2JqXzAxLnBuZ1wiKTtcbiAqXG4gKiBzcHJpdGUucG9zaXRpb24ueCA9IDgwMC8yO1xuICogc3ByaXRlLnBvc2l0aW9uLnkgPSA2MDAvMjtcbiAqIHNwcml0ZS5hbmNob3IueCA9IDAuNTtcbiAqIHNwcml0ZS5hbmNob3IueSA9IDAuNTtcbiAqXG4gKiByZW5kZXJlci5yZW5kZXIoc3ByaXRlLCByZW5kZXJUZXh0dXJlKTtcbiAqIGBgYFxuICpcbiAqIFRoZSBTcHJpdGUgaW4gdGhpcyBjYXNlIHdpbGwgYmUgcmVuZGVyZWQgdXNpbmcgaXRzIGxvY2FsIHRyYW5zZm9ybS4gVG8gcmVuZGVyIHRoaXMgc3ByaXRlIGF0IDAsMFxuICogeW91IGNhbiBjbGVhciB0aGUgdHJhbnNmb3JtXG4gKlxuICogYGBganNcbiAqXG4gKiBzcHJpdGUuc2V0VHJhbnNmb3JtKClcbiAqXG4gKiBsZXQgcmVuZGVyVGV4dHVyZSA9IG5ldyBQSVhJLlJlbmRlclRleHR1cmUuY3JlYXRlKDEwMCwgMTAwKTtcbiAqXG4gKiByZW5kZXJlci5yZW5kZXIoc3ByaXRlLCByZW5kZXJUZXh0dXJlKTsgIC8vIFJlbmRlcnMgdG8gY2VudGVyIG9mIFJlbmRlclRleHR1cmVcbiAqIGBgYFxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5UZXh0dXJlXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgUmVuZGVyVGV4dHVyZSBleHRlbmRzIFRleHR1cmVcbntcbiAgICBwdWJsaWMgZmlsdGVyRnJhbWU6IFJlY3RhbmdsZXxudWxsO1xuICAgIHB1YmxpYyBmaWx0ZXJQb29sS2V5OiBzdHJpbmd8bnVtYmVyfG51bGw7XG4gICAgbGVnYWN5UmVuZGVyZXI6IGFueTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVJlbmRlclRleHR1cmV9IGJhc2VSZW5kZXJUZXh0dXJlIC0gVGhlIGJhc2UgdGV4dHVyZSBvYmplY3QgdGhhdCB0aGlzIHRleHR1cmUgdXNlc1xuICAgICAqIEBwYXJhbSB7UElYSS5SZWN0YW5nbGV9IFtmcmFtZV0gLSBUaGUgcmVjdGFuZ2xlIGZyYW1lIG9mIHRoZSB0ZXh0dXJlIHRvIHNob3dcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihiYXNlUmVuZGVyVGV4dHVyZTogQmFzZVJlbmRlclRleHR1cmUsIGZyYW1lPzogUmVjdGFuZ2xlKVxuICAgIHtcbiAgICAgICAgLy8gc3VwcG9ydCBmb3IgbGVnYWN5Li5cbiAgICAgICAgbGV0IF9sZWdhY3lSZW5kZXJlciA9IG51bGw7XG5cbiAgICAgICAgaWYgKCEoYmFzZVJlbmRlclRleHR1cmUgaW5zdGFuY2VvZiBCYXNlUmVuZGVyVGV4dHVyZSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHByZWZlci1yZXN0LXBhcmFtcywgbm8tY29uc29sZSAqL1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICBjb25zdCBzY2FsZU1vZGUgPSBhcmd1bWVudHNbM107XG4gICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uID0gYXJndW1lbnRzWzRdO1xuXG4gICAgICAgICAgICAvLyB3ZSBoYXZlIGFuIG9sZCByZW5kZXIgdGV4dHVyZS4uXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFBsZWFzZSB1c2UgUmVuZGVyVGV4dHVyZS5jcmVhdGUoJHt3aWR0aH0sICR7aGVpZ2h0fSkgaW5zdGVhZCBvZiB0aGUgY3RvciBkaXJlY3RseS5gKTtcbiAgICAgICAgICAgIF9sZWdhY3lSZW5kZXJlciA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgcHJlZmVyLXJlc3QtcGFyYW1zLCBuby1jb25zb2xlICovXG5cbiAgICAgICAgICAgIGZyYW1lID0gbnVsbDtcbiAgICAgICAgICAgIGJhc2VSZW5kZXJUZXh0dXJlID0gbmV3IEJhc2VSZW5kZXJUZXh0dXJlKHtcbiAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgc2NhbGVNb2RlLFxuICAgICAgICAgICAgICAgIHJlc29sdXRpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYmFzZSB0ZXh0dXJlIG9iamVjdCB0aGF0IHRoaXMgdGV4dHVyZSB1c2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuQmFzZVRleHR1cmV9XG4gICAgICAgICAqL1xuICAgICAgICBzdXBlcihiYXNlUmVuZGVyVGV4dHVyZSwgZnJhbWUpO1xuXG4gICAgICAgIHRoaXMubGVnYWN5UmVuZGVyZXIgPSBfbGVnYWN5UmVuZGVyZXI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgd2lsbCBsZXQgdGhlIHJlbmRlcmVyIGtub3cgaWYgdGhlIHRleHR1cmUgaXMgdmFsaWQuIElmIGl0J3Mgbm90IHRoZW4gaXQgY2Fubm90IGJlIHJlbmRlcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWxpZCA9IHRydWU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyBgc291cmNlRnJhbWVgIHdoZW4gdGhpcyB0ZXh0dXJlIGlzIGluc2lkZSBjdXJyZW50IGZpbHRlciBzdGFjay5cbiAgICAgICAgICogWW91IGNhbiByZWFkIGl0IGluc2lkZSBmaWx0ZXJzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5SZWN0YW5nbGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlckZyYW1lID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGtleSBmb3IgcG9vbGVkIHRleHR1cmUgb2YgRmlsdGVyU3lzdGVtXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJQb29sS2V5ID0gbnVsbDtcblxuICAgICAgICB0aGlzLnVwZGF0ZVV2cygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3J0Y3V0IHRvIGB0aGlzLmJhc2VUZXh0dXJlLmZyYW1lYnVmZmVyYCwgc2F2ZXMgYmFzZVRleHR1cmUgY2FzdC5cbiAgICAgKiBAbWVtYmVyIHtQSVhJLkZyYW1lYnVmZmVyfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIGdldCBmcmFtZWJ1ZmZlcigpOiBGcmFtZWJ1ZmZlclxuICAgIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmJhc2VUZXh0dXJlIGFzIEJhc2VSZW5kZXJUZXh0dXJlKS5mcmFtZWJ1ZmZlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNpemVzIHRoZSBSZW5kZXJUZXh0dXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIC0gVGhlIHdpZHRoIHRvIHJlc2l6ZSB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gVGhlIGhlaWdodCB0byByZXNpemUgdG8uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcmVzaXplQmFzZVRleHR1cmU9dHJ1ZV0gLSBTaG91bGQgdGhlIGJhc2VUZXh0dXJlLndpZHRoIGFuZCBoZWlnaHQgdmFsdWVzIGJlIHJlc2l6ZWQgYXMgd2VsbD9cbiAgICAgKi9cbiAgICByZXNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHJlc2l6ZUJhc2VUZXh0dXJlID0gdHJ1ZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIHdpZHRoID0gTWF0aC5jZWlsKHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5jZWlsKGhlaWdodCk7XG5cbiAgICAgICAgLy8gVE9ETyAtIGNvdWxkIGJlIG5vdCByZXF1aXJlZC4uXG4gICAgICAgIHRoaXMudmFsaWQgPSAod2lkdGggPiAwICYmIGhlaWdodCA+IDApO1xuXG4gICAgICAgIHRoaXMuX2ZyYW1lLndpZHRoID0gdGhpcy5vcmlnLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2ZyYW1lLmhlaWdodCA9IHRoaXMub3JpZy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgaWYgKHJlc2l6ZUJhc2VUZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICAodGhpcy5iYXNlVGV4dHVyZSBhcyBCYXNlUmVuZGVyVGV4dHVyZSkucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVVdnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSByZXNvbHV0aW9uIG9mIGJhc2VUZXh0dXJlLCBidXQgZG9lcyBub3QgY2hhbmdlIGZyYW1lYnVmZmVyIHNpemUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiAtIFRoZSBuZXcgcmVzb2x1dGlvbiB0byBhcHBseSB0byBSZW5kZXJUZXh0dXJlXG4gICAgICovXG4gICAgc2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uOiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB7IGJhc2VUZXh0dXJlIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmIChiYXNlVGV4dHVyZS5yZXNvbHV0aW9uID09PSByZXNvbHV0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBiYXNlVGV4dHVyZS5zZXRSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgICAgICB0aGlzLnJlc2l6ZShiYXNlVGV4dHVyZS53aWR0aCwgYmFzZVRleHR1cmUuaGVpZ2h0LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzaG9ydCBoYW5kIHdheSBvZiBjcmVhdGluZyBhIHJlbmRlciB0ZXh0dXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGg9MTAwXSAtIFRoZSB3aWR0aCBvZiB0aGUgcmVuZGVyIHRleHR1cmVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaGVpZ2h0PTEwMF0gLSBUaGUgaGVpZ2h0IG9mIHRoZSByZW5kZXIgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5zY2FsZU1vZGU9UElYSS5zZXR0aW5ncy5TQ0FMRV9NT0RFXSAtIFNlZSB7QGxpbmsgUElYSS5TQ0FMRV9NT0RFU30gZm9yIHBvc3NpYmxlIHZhbHVlc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5yZXNvbHV0aW9uPTFdIC0gVGhlIHJlc29sdXRpb24gLyBkZXZpY2UgcGl4ZWwgcmF0aW8gb2YgdGhlIHRleHR1cmUgYmVpbmcgZ2VuZXJhdGVkXG4gICAgICogQHJldHVybiB7UElYSS5SZW5kZXJUZXh0dXJlfSBUaGUgbmV3IHJlbmRlciB0ZXh0dXJlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShvcHRpb25zOiBJQmFzZVRleHR1cmVPcHRpb25zKTogUmVuZGVyVGV4dHVyZVxuICAgIHtcbiAgICAgICAgLy8gZmFsbGJhY2ssIG9sZC1zdHlsZTogY3JlYXRlKHdpZHRoLCBoZWlnaHQsIHNjYWxlTW9kZSwgcmVzb2x1dGlvbilcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJylcbiAgICAgICAge1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLXJlc3QtcGFyYW1zICovXG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBvcHRpb25zLFxuICAgICAgICAgICAgICAgIGhlaWdodDogYXJndW1lbnRzWzFdLFxuICAgICAgICAgICAgICAgIHNjYWxlTW9kZTogYXJndW1lbnRzWzJdLFxuICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGFyZ3VtZW50c1szXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIHByZWZlci1yZXN0LXBhcmFtcyAqL1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJUZXh0dXJlKG5ldyBCYXNlUmVuZGVyVGV4dHVyZShvcHRpb25zKSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFJlbmRlclRleHR1cmUgfSBmcm9tICcuL1JlbmRlclRleHR1cmUnO1xuaW1wb3J0IHsgQmFzZVJlbmRlclRleHR1cmUgfSBmcm9tICcuL0Jhc2VSZW5kZXJUZXh0dXJlJztcbmltcG9ydCB7IG5leHRQb3cyIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuXG5pbXBvcnQgdHlwZSB7IElCYXNlVGV4dHVyZU9wdGlvbnMgfSBmcm9tICcuLi90ZXh0dXJlcy9CYXNlVGV4dHVyZSc7XG5pbXBvcnQgdHlwZSB7IElTaXplIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbi8qKlxuICogRXhwZXJpbWVudGFsIVxuICpcbiAqIFRleHR1cmUgcG9vbCwgdXNlZCBieSBGaWx0ZXJTeXN0ZW0gYW5kIHBsdWdpbnNcbiAqIFN0b3JlcyBjb2xsZWN0aW9uIG9mIHRlbXBvcmFyeSBwb3cyIG9yIHNjcmVlbi1zaXplZCByZW5kZXJUZXh0dXJlc1xuICpcbiAqIElmIHlvdSB1c2UgY3VzdG9tIFJlbmRlclRleHR1cmVQb29sIGZvciB5b3VyIGZpbHRlcnMsIHlvdSBjYW4gdXNlIG1ldGhvZHNcbiAqIGBnZXRGaWx0ZXJUZXh0dXJlYCBhbmQgYHJldHVybkZpbHRlclRleHR1cmVgIHNhbWUgYXMgaW5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBSZW5kZXJUZXh0dXJlUG9vbFxue1xuICAgIHB1YmxpYyB0ZXh0dXJlT3B0aW9uczogSUJhc2VUZXh0dXJlT3B0aW9ucztcbiAgICBwdWJsaWMgZW5hYmxlRnVsbFNjcmVlbjogYm9vbGVhbjtcbiAgICB0ZXh0dXJlUG9vbDoge1t4IGluIHN0cmluZ3xudW1iZXJdOiBSZW5kZXJUZXh0dXJlW119O1xuICAgIHByaXZhdGUgX3BpeGVsc1dpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfcGl4ZWxzSGVpZ2h0OiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFt0ZXh0dXJlT3B0aW9uc10gLSBvcHRpb25zIHRoYXQgd2lsbCBiZSBwYXNzZWQgdG8gQmFzZVJlbmRlclRleHR1cmUgY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1BJWEkuU0NBTEVfTU9ERVN9IFt0ZXh0dXJlT3B0aW9ucy5zY2FsZU1vZGVdIC0gU2VlIHtAbGluayBQSVhJLlNDQUxFX01PREVTfSBmb3IgcG9zc2libGUgdmFsdWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRleHR1cmVPcHRpb25zPzogSUJhc2VUZXh0dXJlT3B0aW9ucylcbiAgICB7XG4gICAgICAgIHRoaXMudGV4dHVyZVBvb2wgPSB7fTtcbiAgICAgICAgdGhpcy50ZXh0dXJlT3B0aW9ucyA9IHRleHR1cmVPcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxsb3cgcmVuZGVyVGV4dHVyZXMgb2YgdGhlIHNhbWUgc2l6ZSBhcyBzY3JlZW4sIG5vdCBqdXN0IHBvdzJcbiAgICAgICAgICpcbiAgICAgICAgICogQXV0b21hdGljYWxseSBzZXRzIHRvIHRydWUgYWZ0ZXIgYHNldFNjcmVlblNpemVgXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVuYWJsZUZ1bGxTY3JlZW4gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9waXhlbHNXaWR0aCA9IDA7XG4gICAgICAgIHRoaXMuX3BpeGVsc0hlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY3JlYXRlcyBvZiB0ZXh0dXJlIHdpdGggcGFyYW1zIHRoYXQgd2VyZSBzcGVjaWZpZWQgaW4gcG9vbCBjb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlYWxXaWR0aCAtIHdpZHRoIG9mIHRleHR1cmUgaW4gcGl4ZWxzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlYWxIZWlnaHQgLSBoZWlnaHQgb2YgdGV4dHVyZSBpbiBwaXhlbHNcbiAgICAgKiBAcmV0dXJucyB7UmVuZGVyVGV4dHVyZX1cbiAgICAgKi9cbiAgICBjcmVhdGVUZXh0dXJlKHJlYWxXaWR0aDogbnVtYmVyLCByZWFsSGVpZ2h0OiBudW1iZXIpOiBSZW5kZXJUZXh0dXJlXG4gICAge1xuICAgICAgICBjb25zdCBiYXNlUmVuZGVyVGV4dHVyZSA9IG5ldyBCYXNlUmVuZGVyVGV4dHVyZShPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHdpZHRoOiByZWFsV2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHJlYWxIZWlnaHQsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiAxLFxuICAgICAgICB9LCB0aGlzLnRleHR1cmVPcHRpb25zKSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJUZXh0dXJlKGJhc2VSZW5kZXJUZXh0dXJlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgUG93ZXItb2YtVHdvIHJlbmRlciB0ZXh0dXJlIG9yIGZ1bGxTY3JlZW4gdGV4dHVyZVxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5XaWR0aCAtIFRoZSBtaW5pbXVtIHdpZHRoIG9mIHRoZSByZW5kZXIgdGV4dHVyZSBpbiByZWFsIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluSGVpZ2h0IC0gVGhlIG1pbmltdW0gaGVpZ2h0IG9mIHRoZSByZW5kZXIgdGV4dHVyZSBpbiByZWFsIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Jlc29sdXRpb249MV0gLSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgcmVuZGVyIHRleHR1cmUuXG4gICAgICogQHJldHVybiB7UElYSS5SZW5kZXJUZXh0dXJlfSBUaGUgbmV3IHJlbmRlciB0ZXh0dXJlLlxuICAgICAqL1xuICAgIGdldE9wdGltYWxUZXh0dXJlKG1pbldpZHRoOiBudW1iZXIsIG1pbkhlaWdodDogbnVtYmVyLCByZXNvbHV0aW9uID0gMSk6IFJlbmRlclRleHR1cmVcbiAgICB7XG4gICAgICAgIGxldCBrZXk6IG51bWJlcnxzdHJpbmcgPSBSZW5kZXJUZXh0dXJlUG9vbC5TQ1JFRU5fS0VZO1xuXG4gICAgICAgIG1pbldpZHRoICo9IHJlc29sdXRpb247XG4gICAgICAgIG1pbkhlaWdodCAqPSByZXNvbHV0aW9uO1xuXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVGdWxsU2NyZWVuIHx8IG1pbldpZHRoICE9PSB0aGlzLl9waXhlbHNXaWR0aCB8fCBtaW5IZWlnaHQgIT09IHRoaXMuX3BpeGVsc0hlaWdodClcbiAgICAgICAge1xuICAgICAgICAgICAgbWluV2lkdGggPSBuZXh0UG93MihtaW5XaWR0aCk7XG4gICAgICAgICAgICBtaW5IZWlnaHQgPSBuZXh0UG93MihtaW5IZWlnaHQpO1xuICAgICAgICAgICAga2V5ID0gKChtaW5XaWR0aCAmIDB4RkZGRikgPDwgMTYpIHwgKG1pbkhlaWdodCAmIDB4RkZGRik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMudGV4dHVyZVBvb2xba2V5XSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlUG9vbFtrZXldID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVuZGVyVGV4dHVyZSA9IHRoaXMudGV4dHVyZVBvb2xba2V5XS5wb3AoKTtcblxuICAgICAgICBpZiAoIXJlbmRlclRleHR1cmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlbmRlclRleHR1cmUgPSB0aGlzLmNyZWF0ZVRleHR1cmUobWluV2lkdGgsIG1pbkhlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXJUZXh0dXJlLmZpbHRlclBvb2xLZXkgPSBrZXk7XG4gICAgICAgIHJlbmRlclRleHR1cmUuc2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcblxuICAgICAgICByZXR1cm4gcmVuZGVyVGV4dHVyZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGV4dHJhIHRleHR1cmUgb2YgdGhlIHNhbWUgc2l6ZSBhcyBpbnB1dCByZW5kZXJUZXh0dXJlXG4gICAgICpcbiAgICAgKiBgZ2V0RmlsdGVyVGV4dHVyZShpbnB1dCwgMC41KWAgb3IgYGdldEZpbHRlclRleHR1cmUoMC41LCBpbnB1dClgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gaW5wdXQgLSByZW5kZXJUZXh0dXJlIGZyb20gd2hpY2ggc2l6ZSBhbmQgcmVzb2x1dGlvbiB3aWxsIGJlIGNvcGllZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gLSBvdmVycmlkZSByZXNvbHV0aW9uIG9mIHRoZSByZW5kZXJUZXh0dXJlXG4gICAgICogIEl0IG92ZXJyaWRlcywgaXQgZG9lcyBub3QgbXVsdGlwbHlcbiAgICAgKiBAcmV0dXJucyB7UElYSS5SZW5kZXJUZXh0dXJlfVxuICAgICAqL1xuICAgIGdldEZpbHRlclRleHR1cmUoaW5wdXQ6IFJlbmRlclRleHR1cmUsIHJlc29sdXRpb246IG51bWJlcik6IFJlbmRlclRleHR1cmVcbiAgICB7XG4gICAgICAgIGNvbnN0IGZpbHRlclRleHR1cmUgPSB0aGlzLmdldE9wdGltYWxUZXh0dXJlKGlucHV0LndpZHRoLCBpbnB1dC5oZWlnaHQsIHJlc29sdXRpb24gfHwgaW5wdXQucmVzb2x1dGlvbik7XG5cbiAgICAgICAgZmlsdGVyVGV4dHVyZS5maWx0ZXJGcmFtZSA9IGlucHV0LmZpbHRlckZyYW1lO1xuXG4gICAgICAgIHJldHVybiBmaWx0ZXJUZXh0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYWNlIGEgcmVuZGVyIHRleHR1cmUgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJUZXh0dXJlfSByZW5kZXJUZXh0dXJlIC0gVGhlIHJlbmRlclRleHR1cmUgdG8gZnJlZVxuICAgICAqL1xuICAgIHJldHVyblRleHR1cmUocmVuZGVyVGV4dHVyZTogUmVuZGVyVGV4dHVyZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGtleSA9IHJlbmRlclRleHR1cmUuZmlsdGVyUG9vbEtleTtcblxuICAgICAgICByZW5kZXJUZXh0dXJlLmZpbHRlckZyYW1lID0gbnVsbDtcbiAgICAgICAgdGhpcy50ZXh0dXJlUG9vbFtrZXldLnB1c2gocmVuZGVyVGV4dHVyZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHJldHVyblRleHR1cmUsIHRvIGJlIGNvbXBsaWFudCB3aXRoIEZpbHRlclN5c3RlbSBpbnRlcmZhY2VcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gcmVuZGVyVGV4dHVyZSAtIFRoZSByZW5kZXJUZXh0dXJlIHRvIGZyZWVcbiAgICAgKi9cbiAgICByZXR1cm5GaWx0ZXJUZXh0dXJlKHJlbmRlclRleHR1cmU6IFJlbmRlclRleHR1cmUpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnJldHVyblRleHR1cmUocmVuZGVyVGV4dHVyZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHRoZSBwb29sXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtkZXN0cm95VGV4dHVyZXM9dHJ1ZV0gLSBkZXN0cm95IGFsbCBzdG9yZWQgdGV4dHVyZXNcbiAgICAgKi9cbiAgICBjbGVhcihkZXN0cm95VGV4dHVyZXM6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBkZXN0cm95VGV4dHVyZXMgPSBkZXN0cm95VGV4dHVyZXMgIT09IGZhbHNlO1xuICAgICAgICBpZiAoZGVzdHJveVRleHR1cmVzKVxuICAgICAgICB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgaW4gdGhpcy50ZXh0dXJlUG9vbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlcyA9IHRoaXMudGV4dHVyZVBvb2xbaV07XG5cbiAgICAgICAgICAgICAgICBpZiAodGV4dHVyZXMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRleHR1cmVzLmxlbmd0aDsgaisrKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlc1tqXS5kZXN0cm95KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50ZXh0dXJlUG9vbCA9IHt9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHNjcmVlbiBzaXplIHdhcyBjaGFuZ2VkLCBkcm9wcyBhbGwgc2NyZWVuLXNpemVkIHRleHR1cmVzLFxuICAgICAqIHNldHMgbmV3IHNjcmVlbiBzaXplLCBzZXRzIGBlbmFibGVGdWxsU2NyZWVuYCB0byB0cnVlXG4gICAgICpcbiAgICAgKiBTaXplIGlzIG1lYXN1cmVkIGluIHBpeGVscywgYHJlbmRlcmVyLnZpZXdgIGNhbiBiZSBwYXNzZWQgaGVyZSwgbm90IGByZW5kZXJlci5zY3JlZW5gXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVNpemV9IHNpemUgLSBJbml0aWFsIHNpemUgb2Ygc2NyZWVuXG4gICAgICovXG4gICAgc2V0U2NyZWVuU2l6ZShzaXplOiBJU2l6ZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmIChzaXplLndpZHRoID09PSB0aGlzLl9waXhlbHNXaWR0aFxuICAgICAgICAgICAgJiYgc2l6ZS5oZWlnaHQgPT09IHRoaXMuX3BpeGVsc0hlaWdodClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2NyZWVuS2V5ID0gUmVuZGVyVGV4dHVyZVBvb2wuU0NSRUVOX0tFWTtcbiAgICAgICAgY29uc3QgdGV4dHVyZXMgPSB0aGlzLnRleHR1cmVQb29sW3NjcmVlbktleV07XG5cbiAgICAgICAgdGhpcy5lbmFibGVGdWxsU2NyZWVuID0gc2l6ZS53aWR0aCA+IDAgJiYgc2l6ZS5oZWlnaHQgPiAwO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlcylcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0ZXh0dXJlcy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlc1tqXS5kZXN0cm95KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dHVyZVBvb2xbc2NyZWVuS2V5XSA9IFtdO1xuXG4gICAgICAgIHRoaXMuX3BpeGVsc1dpZHRoID0gc2l6ZS53aWR0aDtcbiAgICAgICAgdGhpcy5fcGl4ZWxzSGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2V5IHRoYXQgaXMgdXNlZCB0byBzdG9yZSBmdWxsc2NyZWVuIHJlbmRlclRleHR1cmVzIGluIGEgcG9vbFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBjb25zdCB7c3RyaW5nfVxuICAgICAqL1xuICAgIHN0YXRpYyBTQ1JFRU5fS0VZID0gJ3NjcmVlbic7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBUWVBFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cblxuLyoqXG4gKiBIb2xkcyB0aGUgaW5mb3JtYXRpb24gZm9yIGEgc2luZ2xlIGF0dHJpYnV0ZSBzdHJ1Y3R1cmUgcmVxdWlyZWQgdG8gcmVuZGVyIGdlb21ldHJ5LlxuICpcbiAqIFRoaXMgZG9lcyBub3QgY29udGFpbiB0aGUgYWN0dWFsIGRhdGEsIGJ1dCBpbnN0ZWFkIGhhcyBhIGJ1ZmZlciBpZCB0aGF0IG1hcHMgdG8gYSB7QGxpbmsgUElYSS5CdWZmZXJ9XG4gKiBUaGlzIGNhbiBpbmNsdWRlIGFueXRoaW5nIGZyb20gcG9zaXRpb25zLCB1dnMsIG5vcm1hbHMsIGNvbG9ycyBldGMuXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlXG57XG4gICAgcHVibGljIGJ1ZmZlcjogbnVtYmVyO1xuICAgIHB1YmxpYyBzaXplOiBudW1iZXI7XG4gICAgcHVibGljIG5vcm1hbGl6ZWQ6IGJvb2xlYW47XG4gICAgcHVibGljIHR5cGU6IFRZUEVTO1xuICAgIHB1YmxpYyBzdHJpZGU6IG51bWJlcjtcbiAgICBwdWJsaWMgc3RhcnQ6IG51bWJlcjtcbiAgICBwdWJsaWMgaW5zdGFuY2U6IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJ1ZmZlciAtIHRoZSBpZCBvZiB0aGUgYnVmZmVyIHRoYXQgdGhpcyBhdHRyaWJ1dGUgd2lsbCBsb29rIGZvclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbc2l6ZT0wXSAtIHRoZSBzaXplIG9mIHRoZSBhdHRyaWJ1dGUuIElmIHlvdSBoYXZlIDIgZmxvYXRzIHBlciB2ZXJ0ZXggKGVnIHBvc2l0aW9uIHggYW5kIHkpIHRoaXMgd291bGQgYmUgMi5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtub3JtYWxpemVkPWZhbHNlXSAtIHNob3VsZCB0aGUgZGF0YSBiZSBub3JtYWxpemVkLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbdHlwZT1QSVhJLlRZUEVTLkZMT0FUXSAtIHdoYXQgdHlwZSBvZiBudW1iZXIgaXMgdGhlIGF0dHJpYnV0ZS4gQ2hlY2sge0BsaW5rIFBJWEkuVFlQRVN9IHRvIHNlZSB0aGUgb25lcyBhdmFpbGFibGVcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3N0cmlkZT0wXSAtIEhvdyBmYXIgYXBhcnQgKGluIGZsb2F0cykgdGhlIHN0YXJ0IG9mIGVhY2ggdmFsdWUgaXMuICh1c2VkIGZvciBpbnRlcmxlYXZpbmcgZGF0YSlcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0PTBdIC0gSG93IGZhciBpbnRvIHRoZSBhcnJheSB0byBzdGFydCByZWFkaW5nIHZhbHVlcyAodXNlZCBmb3IgaW50ZXJsZWF2aW5nIGRhdGEpXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYnVmZmVyOiBudW1iZXIsIHNpemUgPSAwLCBub3JtYWxpemVkID0gZmFsc2UsIHR5cGUgPSA1MTI2LCBzdHJpZGU/OiBudW1iZXIsIHN0YXJ0PzogbnVtYmVyLCBpbnN0YW5jZT86IGJvb2xlYW4pXG4gICAge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy5ub3JtYWxpemVkID0gbm9ybWFsaXplZDtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5zdHJpZGUgPSBzdHJpZGU7XG4gICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoZSBBdHRyaWJ1dGUuXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBBdHRyaWJ1dGUgYmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIHByb3ZpZGVkXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJ1ZmZlciAtIHRoZSBpZCBvZiB0aGUgYnVmZmVyIHRoYXQgdGhpcyBhdHRyaWJ1dGUgd2lsbCBsb29rIGZvclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbc2l6ZT0wXSAtIHRoZSBzaXplIG9mIHRoZSBhdHRyaWJ1dGUuIElmIHlvdSBoYXZlIDIgZmxvYXRzIHBlciB2ZXJ0ZXggKGVnIHBvc2l0aW9uIHggYW5kIHkpIHRoaXMgd291bGQgYmUgMlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW25vcm1hbGl6ZWQ9ZmFsc2VdIC0gc2hvdWxkIHRoZSBkYXRhIGJlIG5vcm1hbGl6ZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt0eXBlPVBJWEkuVFlQRVMuRkxPQVRdIC0gd2hhdCB0eXBlIG9mIG51bWJlciBpcyB0aGUgYXR0cmlidXRlLiBDaGVjayB7QGxpbmsgUElYSS5UWVBFU30gdG8gc2VlIHRoZSBvbmVzIGF2YWlsYWJsZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbc3RyaWRlPTBdIC0gSG93IGZhciBhcGFydCAoaW4gZmxvYXRzKSB0aGUgc3RhcnQgb2YgZWFjaCB2YWx1ZSBpcy4gKHVzZWQgZm9yIGludGVybGVhdmluZyBkYXRhKVxuICAgICAqXG4gICAgICogQHJldHVybnMge1BJWEkuQXR0cmlidXRlfSBBIG5ldyB7QGxpbmsgUElYSS5BdHRyaWJ1dGV9IGJhc2VkIG9uIHRoZSBpbmZvcm1hdGlvbiBwcm92aWRlZFxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tKGJ1ZmZlcjogbnVtYmVyLCBzaXplPzogbnVtYmVyLCBub3JtYWxpemVkPzogYm9vbGVhbiwgdHlwZT86IFRZUEVTLCBzdHJpZGU/OiBudW1iZXIpOiBBdHRyaWJ1dGVcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlKGJ1ZmZlciwgc2l6ZSwgbm9ybWFsaXplZCwgdHlwZSwgc3RyaWRlKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUnVubmVyIH0gZnJvbSAnQHBpeGkvcnVubmVyJztcblxuaW1wb3J0IHR5cGUgeyBHTEJ1ZmZlciB9IGZyb20gJy4vR0xCdWZmZXInO1xuXG5sZXQgVUlEID0gMDtcbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cblxuLyoqXG4gKiBNYXJrcyBwbGFjZXMgaW4gUGl4aUpTIHdoZXJlIHlvdSBjYW4gcGFzcyBGbG9hdDMyQXJyYXksIFVJbnQzMkFycmF5LCBhbnkgdHlwZWQgYXJyYXlzLCBhbmQgQXJyYXlCdWZmZXJcbiAqXG4gKiBTYW1lIGFzIEFycmF5QnVmZmVyIGluIHR5cGVzY3JpcHQgbGliLCBkZWZpbmVkIGhlcmUganVzdCBmb3IgZG9jdW1lbnRhdGlvblxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWludGVyZmFjZVxuZXhwb3J0IGludGVyZmFjZSBJQXJyYXlCdWZmZXIgZXh0ZW5kcyBBcnJheUJ1ZmZlclxue1xufVxuXG4vKipcbiAqIFBpeGlKUyBjbGFzc2VzIHVzZSB0aGlzIHR5cGUgaW5zdGVhZCBvZiBBcnJheUJ1ZmZlciBhbmQgdHlwZWQgYXJyYXlzXG4gKiB0byBzdXBwb3J0IGV4cHJlc3Npb25zIGxpa2UgYGdlb21ldHJ5LmJ1ZmZlcnNbMF0uZGF0YVswXSA9IHBvc2l0aW9uLnhgLlxuICpcbiAqIEdpdmVzIGFjY2VzcyB0byBpbmRleGluZyBhbmQgYGxlbmd0aGAgZmllbGRcbiAqXG4gKiBAcG9wZWx5c2hldjogSWYgZGF0YSBpcyBhY3R1YWxseSBBcnJheUJ1ZmZlciBhbmQgdGhyb3dzIEV4Y2VwdGlvbiBvbiBpbmRleGluZyAtIGl0cyB1c2VyIHByb2JsZW0gOilcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJVHlwZWRBcnJheSBleHRlbmRzIElBcnJheUJ1ZmZlclxue1xuICAgIHJlYWRvbmx5IGxlbmd0aDogbnVtYmVyO1xuICAgIFtpbmRleDogbnVtYmVyXTogbnVtYmVyO1xuICAgIHJlYWRvbmx5IEJZVEVTX1BFUl9FTEVNRU5UOiBudW1iZXI7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGZvciBkYXRhIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQgYW5kIHVwbG9hZGVkIGJ5IFdlYkdMXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgQnVmZmVyXG57XG4gICAgcHVibGljIGRhdGE6IElUeXBlZEFycmF5O1xuICAgIHB1YmxpYyBpbmRleDogYm9vbGVhbjtcbiAgICBwdWJsaWMgc3RhdGljOiBib29sZWFuO1xuICAgIHB1YmxpYyBpZDogbnVtYmVyO1xuICAgICBkaXNwb3NlUnVubmVyOiBSdW5uZXI7XG4gICAgX2dsQnVmZmVyczoge1trZXk6IG51bWJlcl06IEdMQnVmZmVyfTtcbiAgICBfdXBkYXRlSUQ6IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfCBTaGFyZWRBcnJheUJ1ZmZlcnxBcnJheUJ1ZmZlclZpZXd9IGRhdGEgLSB0aGUgZGF0YSB0byBzdG9yZSBpbiB0aGUgYnVmZmVyLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW19zdGF0aWM9dHJ1ZV0gLSBgdHJ1ZWAgZm9yIHN0YXRpYyBidWZmZXJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpbmRleD1mYWxzZV0gLSBgdHJ1ZWAgZm9yIGluZGV4IGJ1ZmZlclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGE/OiBJQXJyYXlCdWZmZXIsIF9zdGF0aWMgPSB0cnVlLCBpbmRleCA9IGZhbHNlKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkYXRhIGluIHRoZSBidWZmZXIsIGFzIGEgdHlwZWQgYXJyYXlcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7QXJyYXlCdWZmZXJ8IFNoYXJlZEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kYXRhID0gKGRhdGEgfHwgbmV3IEZsb2F0MzJBcnJheSgxKSkgYXMgSVR5cGVkQXJyYXk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwIG9mIHJlbmRlcmVyIElEcyB0byB3ZWJnbCBidWZmZXJcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7b2JqZWN0PG51bWJlciwgR0xCdWZmZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fZ2xCdWZmZXJzID0ge307XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlSUQgPSAwO1xuXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcblxuICAgICAgICB0aGlzLnN0YXRpYyA9IF9zdGF0aWM7XG5cbiAgICAgICAgdGhpcy5pZCA9IFVJRCsrO1xuXG4gICAgICAgIHRoaXMuZGlzcG9zZVJ1bm5lciA9IG5ldyBSdW5uZXIoJ2Rpc3Bvc2VCdWZmZXInKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPIGNvdWxkIGV4cGxvcmUgZmxhZ2dpbmcgb25seSBhIHBhcnRpYWwgdXBsb2FkP1xuICAgIC8qKlxuICAgICAqIGZsYWdzIHRoaXMgYnVmZmVyIGFzIHJlcXVpcmluZyBhbiB1cGxvYWQgdG8gdGhlIEdQVVxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ8U2hhcmVkQXJyYXlCdWZmZXJ8QXJyYXlCdWZmZXJWaWV3fSBbZGF0YV0gLSB0aGUgZGF0YSB0byB1cGRhdGUgaW4gdGhlIGJ1ZmZlci5cbiAgICAgKi9cbiAgICB1cGRhdGUoZGF0YT86IElBcnJheUJ1ZmZlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuZGF0YSA9IChkYXRhIGFzIElUeXBlZEFycmF5KSB8fCB0aGlzLmRhdGE7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUlEKys7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGlzcG9zZXMgV2ViR0wgcmVzb3VyY2VzIHRoYXQgYXJlIGNvbm5lY3RlZCB0byB0aGlzIGdlb21ldHJ5XG4gICAgICovXG4gICAgZGlzcG9zZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmRpc3Bvc2VSdW5uZXIuZW1pdCh0aGlzLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIGJ1ZmZlclxuICAgICAqL1xuICAgIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG5cbiAgICAgICAgdGhpcy5kYXRhID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGEgYnVmZmVyIGJhc2VkIG9uIGFuIGFycmF5IG9yIFR5cGVkQXJyYXlcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyVmlldyB8IG51bWJlcltdfSBkYXRhIC0gdGhlIFR5cGVkQXJyYXkgdGhhdCB0aGUgYnVmZmVyIHdpbGwgc3RvcmUuIElmIHRoaXMgaXMgYSByZWd1bGFyIEFycmF5IGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgRmxvYXQzMkFycmF5LlxuICAgICAqIEByZXR1cm4ge1BJWEkuQnVmZmVyfSBBIG5ldyBCdWZmZXIgYmFzZWQgb24gdGhlIGRhdGEgcHJvdmlkZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb20oZGF0YTogSUFycmF5QnVmZmVyIHwgbnVtYmVyW10pOiBCdWZmZXJcbiAgICB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXIoZGF0YSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgSVR5cGVkQXJyYXkgfSBmcm9tICcuLi9CdWZmZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnVmZmVyVHlwZShhcnJheTogSVR5cGVkQXJyYXkpOiBzdHJpbmd8bnVsbFxue1xuICAgIGlmIChhcnJheS5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNClcbiAgICB7XG4gICAgICAgIGlmIChhcnJheSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuICdGbG9hdDMyQXJyYXknO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFycmF5IGluc3RhbmNlb2YgVWludDMyQXJyYXkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiAnVWludDMyQXJyYXknO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICdJbnQzMkFycmF5JztcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJyYXkuQllURVNfUEVSX0VMRU1FTlQgPT09IDIpXG4gICAge1xuICAgICAgICBpZiAoYXJyYXkgaW5zdGFuY2VvZiBVaW50MTZBcnJheSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuICdVaW50MTZBcnJheSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoYXJyYXkuQllURVNfUEVSX0VMRU1FTlQgPT09IDEpXG4gICAge1xuICAgICAgICBpZiAoYXJyYXkgaW5zdGFuY2VvZiBVaW50OEFycmF5KVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gJ1VpbnQ4QXJyYXknO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVE9ETyBtYXAgb3V0IHRoZSByZXN0IG9mIHRoZSBhcnJheSBlbGVtZW50cyFcbiAgICByZXR1cm4gbnVsbDtcbn1cbiIsICJpbXBvcnQgeyBnZXRCdWZmZXJUeXBlIH0gZnJvbSAnLi9nZXRCdWZmZXJUeXBlJztcblxuaW1wb3J0IHR5cGUgeyBJVHlwZWRBcnJheSB9IGZyb20gJy4uL0J1ZmZlcic7XG5pbXBvcnQgdHlwZSB7IERpY3QgfSBmcm9tICdAcGl4aS91dGlscyc7XG5cbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1zaG9ydGhhbmQgKi9cbmNvbnN0IG1hcDogRGljdDxhbnk+ID0ge1xuICAgIEZsb2F0MzJBcnJheTogRmxvYXQzMkFycmF5LFxuICAgIFVpbnQzMkFycmF5OiBVaW50MzJBcnJheSxcbiAgICBJbnQzMkFycmF5OiBJbnQzMkFycmF5LFxuICAgIFVpbnQ4QXJyYXk6IFVpbnQ4QXJyYXksXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJsZWF2ZVR5cGVkQXJyYXlzKGFycmF5czogQXJyYXk8SVR5cGVkQXJyYXk+LCBzaXplczogQXJyYXk8bnVtYmVyPik6IEZsb2F0MzJBcnJheVxue1xuICAgIGxldCBvdXRTaXplID0gMDtcbiAgICBsZXQgc3RyaWRlID0gMDtcbiAgICBjb25zdCB2aWV3czogRGljdDxhbnk+ID0ge307XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5cy5sZW5ndGg7IGkrKylcbiAgICB7XG4gICAgICAgIHN0cmlkZSArPSBzaXplc1tpXTtcbiAgICAgICAgb3V0U2l6ZSArPSBhcnJheXNbaV0ubGVuZ3RoO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihvdXRTaXplICogNCk7XG5cbiAgICBsZXQgb3V0ID0gbnVsbDtcbiAgICBsZXQgbGl0dGxlT2Zmc2V0ID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlzLmxlbmd0aDsgaSsrKVxuICAgIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IHNpemVzW2ldO1xuICAgICAgICBjb25zdCBhcnJheSA9IGFycmF5c1tpXTtcblxuICAgICAgICBjb25zdCB0eXBlID0gZ2V0QnVmZmVyVHlwZShhcnJheSk7XG5cbiAgICAgICAgaWYgKCF2aWV3c1t0eXBlXSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmlld3NbdHlwZV0gPSBuZXcgbWFwW3R5cGVdKGJ1ZmZlcik7XG4gICAgICAgIH1cblxuICAgICAgICBvdXQgPSB2aWV3c1t0eXBlXTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFycmF5Lmxlbmd0aDsgaisrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBpbmRleFN0YXJ0ID0gKChqIC8gc2l6ZSB8IDApICogc3RyaWRlKSArIGxpdHRsZU9mZnNldDtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gaiAlIHNpemU7XG5cbiAgICAgICAgICAgIG91dFtpbmRleFN0YXJ0ICsgaW5kZXhdID0gYXJyYXlbal07XG4gICAgICAgIH1cblxuICAgICAgICBsaXR0bGVPZmZzZXQgKz0gc2l6ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShidWZmZXIpO1xufVxuIiwgImltcG9ydCB7IEF0dHJpYnV0ZSB9IGZyb20gJy4vQXR0cmlidXRlJztcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJy4vQnVmZmVyJztcbmltcG9ydCB7IGludGVybGVhdmVUeXBlZEFycmF5cyB9IGZyb20gJy4vdXRpbHMvaW50ZXJsZWF2ZVR5cGVkQXJyYXlzJztcbmltcG9ydCB7IGdldEJ1ZmZlclR5cGUgfSBmcm9tICcuL3V0aWxzL2dldEJ1ZmZlclR5cGUnO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSAnQHBpeGkvcnVubmVyJztcblxuaW1wb3J0IHR5cGUgeyBUWVBFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgdHlwZSB7IElBcnJheUJ1ZmZlciB9IGZyb20gJy4vQnVmZmVyJztcbmltcG9ydCB0eXBlIHsgRGljdCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcblxuY29uc3QgYnl0ZVNpemVNYXA6IHtba2V5OiBudW1iZXJdOiBudW1iZXJ9ID0geyA1MTI2OiA0LCA1MTIzOiAyLCA1MTIxOiAxIH07XG5sZXQgVUlEID0gMDtcblxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LXNob3J0aGFuZCAqL1xuY29uc3QgbWFwOiBEaWN0PGFueT4gPSB7XG4gICAgRmxvYXQzMkFycmF5OiBGbG9hdDMyQXJyYXksXG4gICAgVWludDMyQXJyYXk6IFVpbnQzMkFycmF5LFxuICAgIEludDMyQXJyYXk6IEludDMyQXJyYXksXG4gICAgVWludDhBcnJheTogVWludDhBcnJheSxcbiAgICBVaW50MTZBcnJheTogVWludDE2QXJyYXksXG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5cbi8qKlxuICogVGhlIEdlb21ldHJ5IHJlcHJlc2VudHMgYSBtb2RlbC4gSXQgY29uc2lzdHMgb2YgdHdvIGNvbXBvbmVudHM6XG4gKiAtIEdlb21ldHJ5U3R5bGUgLSBUaGUgc3RydWN0dXJlIG9mIHRoZSBtb2RlbCBzdWNoIGFzIHRoZSBhdHRyaWJ1dGVzIGxheW91dFxuICogLSBHZW9tZXRyeURhdGEgLSB0aGUgZGF0YSBvZiB0aGUgbW9kZWwgLSB0aGlzIGNvbnNpc3RzIG9mIGJ1ZmZlcnMuXG4gKiBUaGlzIGNhbiBpbmNsdWRlIGFueXRoaW5nIGZyb20gcG9zaXRpb25zLCB1dnMsIG5vcm1hbHMsIGNvbG9ycyBldGMuXG4gKlxuICogR2VvbWV0cnkgY2FuIGJlIGRlZmluZWQgd2l0aG91dCBwYXNzaW5nIGluIGEgc3R5bGUgb3IgZGF0YSBpZiByZXF1aXJlZCAodGhhdHMgaG93IEkgcHJlZmVyISlcbiAqXG4gKiBgYGBqc1xuICogbGV0IGdlb21ldHJ5ID0gbmV3IFBJWEkuR2VvbWV0cnkoKTtcbiAqXG4gKiBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9ucycsIFswLCAwLCAxMDAsIDAsIDEwMCwgMTAwLCAwLCAxMDBdLCAyKTtcbiAqIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgndXZzJywgWzAsMCwxLDAsMSwxLDAsMV0sMilcbiAqIGdlb21ldHJ5LmFkZEluZGV4KFswLDEsMiwxLDMsMl0pXG4gKlxuICogYGBgXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBHZW9tZXRyeVxue1xuICAgIHB1YmxpYyBidWZmZXJzOiBBcnJheTxCdWZmZXI+O1xuICAgIHB1YmxpYyBpbmRleEJ1ZmZlcjogQnVmZmVyO1xuICAgIHB1YmxpYyBhdHRyaWJ1dGVzOiB7W2tleTogc3RyaW5nXTogQXR0cmlidXRlfTtcbiAgICBwdWJsaWMgaWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgaW5zdGFuY2VkOiBib29sZWFuO1xuICAgIHB1YmxpYyBpbnN0YW5jZUNvdW50OiBudW1iZXI7XG4gICAgZ2xWZXJ0ZXhBcnJheU9iamVjdHM6IHtba2V5OiBudW1iZXJdOiB7W2tleTogc3RyaW5nXTogV2ViR0xWZXJ0ZXhBcnJheU9iamVjdH19O1xuICAgIGRpc3Bvc2VSdW5uZXI6IFJ1bm5lcjtcbiAgICByZWZDb3VudDogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5CdWZmZXJbXX0gW2J1ZmZlcnNdIC0gYW4gYXJyYXkgb2YgYnVmZmVycy4gb3B0aW9uYWwuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFthdHRyaWJ1dGVzXSAtIG9mIHRoZSBnZW9tZXRyeSwgb3B0aW9uYWwgc3RydWN0dXJlIG9mIHRoZSBhdHRyaWJ1dGVzIGxheW91dFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJ1ZmZlcnM6IEFycmF5PEJ1ZmZlcj4gPSBbXSwgYXR0cmlidXRlczoge1trZXk6IHN0cmluZ106IEF0dHJpYnV0ZX0gPSB7fSlcbiAgICB7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IGJ1ZmZlcnM7XG5cbiAgICAgICAgdGhpcy5pbmRleEJ1ZmZlciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXAgb2YgcmVuZGVyZXIgSURzIHRvIHdlYmdsIFZBT3NcbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nbFZlcnRleEFycmF5T2JqZWN0cyA9IHt9O1xuXG4gICAgICAgIHRoaXMuaWQgPSBVSUQrKztcblxuICAgICAgICB0aGlzLmluc3RhbmNlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOdW1iZXIgb2YgaW5zdGFuY2VzIGluIHRoaXMgZ2VvbWV0cnksIHBhc3MgaXQgdG8gYEdlb21ldHJ5U3lzdGVtLmRyYXcoKWBcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAxXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluc3RhbmNlQ291bnQgPSAxO1xuXG4gICAgICAgIHRoaXMuZGlzcG9zZVJ1bm5lciA9IG5ldyBSdW5uZXIoJ2Rpc3Bvc2VHZW9tZXRyeScpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudCBvZiBleGlzdGluZyAobm90IGRlc3Ryb3llZCkgbWVzaGVzIHRoYXQgcmVmZXJlbmNlIHRoaXMgZ2VvbWV0cnlcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWZDb3VudCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKlxuICAgICogQWRkcyBhbiBhdHRyaWJ1dGUgdG8gdGhlIGdlb21ldHJ5XG4gICAgKiBOb3RlOiBgc3RyaWRlYCBhbmQgYHN0YXJ0YCBzaG91bGQgYmUgYHVuZGVmaW5lZGAgaWYgeW91IGRvbnQga25vdyB0aGVtLCBub3QgMCFcbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgLSB0aGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIChtYXRjaGluZyB1cCB0byBhIHNoYWRlcilcbiAgICAqIEBwYXJhbSB7UElYSS5CdWZmZXJ8bnVtYmVyW119IFtidWZmZXJdIC0gdGhlIGJ1ZmZlciB0aGF0IGhvbGRzIHRoZSBkYXRhIG9mIHRoZSBhdHRyaWJ1dGUgLiBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBBcnJheSBhbmQgYSBidWZmZXIgd2lsbCBiZSBjcmVhdGVkIGZyb20gaXQuXG4gICAgKiBAcGFyYW0ge051bWJlcn0gW3NpemU9MF0gLSB0aGUgc2l6ZSBvZiB0aGUgYXR0cmlidXRlLiBJZiB5b3UgaGF2ZSAyIGZsb2F0cyBwZXIgdmVydGV4IChlZyBwb3NpdGlvbiB4IGFuZCB5KSB0aGlzIHdvdWxkIGJlIDJcbiAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW25vcm1hbGl6ZWQ9ZmFsc2VdIC0gc2hvdWxkIHRoZSBkYXRhIGJlIG5vcm1hbGl6ZWQuXG4gICAgKiBAcGFyYW0ge051bWJlcn0gW3R5cGU9UElYSS5UWVBFUy5GTE9BVF0gLSB3aGF0IHR5cGUgb2YgbnVtYmVyIGlzIHRoZSBhdHRyaWJ1dGUuIENoZWNrIHtQSVhJLlRZUEVTfSB0byBzZWUgdGhlIG9uZXMgYXZhaWxhYmxlXG4gICAgKiBAcGFyYW0ge051bWJlcn0gW3N0cmlkZV0gLSBIb3cgZmFyIGFwYXJ0IChpbiBmbG9hdHMpIHRoZSBzdGFydCBvZiBlYWNoIHZhbHVlIGlzLiAodXNlZCBmb3IgaW50ZXJsZWF2aW5nIGRhdGEpXG4gICAgKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIEhvdyBmYXIgaW50byB0aGUgYXJyYXkgdG8gc3RhcnQgcmVhZGluZyB2YWx1ZXMgKHVzZWQgZm9yIGludGVybGVhdmluZyBkYXRhKVxuICAgICogQHBhcmFtIHtib29sZWFufSBbaW5zdGFuY2U9ZmFsc2VdIC0gSW5zdGFuY2luZyBmbGFnXG4gICAgKlxuICAgICogQHJldHVybiB7UElYSS5HZW9tZXRyeX0gcmV0dXJucyBzZWxmLCB1c2VmdWwgZm9yIGNoYWluaW5nLlxuICAgICovXG4gICAgYWRkQXR0cmlidXRlKGlkOiBzdHJpbmcsIGJ1ZmZlcjogQnVmZmVyfEZsb2F0MzJBcnJheXxVaW50MzJBcnJheXxBcnJheTxudW1iZXI+LCBzaXplID0gMCwgbm9ybWFsaXplZCA9IGZhbHNlLFxuICAgICAgICB0eXBlPzogVFlQRVMsIHN0cmlkZT86IG51bWJlciwgc3RhcnQ/OiBudW1iZXIsIGluc3RhbmNlID0gZmFsc2UpOiB0aGlzXG4gICAge1xuICAgICAgICBpZiAoIWJ1ZmZlcilcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBwYXNzIGEgYnVmZmVyIHdoZW4gY3JlYXRpbmcgYW4gYXR0cmlidXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgYnVmZmVyIVxuICAgICAgICBpZiAoIShidWZmZXIgaW5zdGFuY2VvZiBCdWZmZXIpKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBpdHMgYW4gYXJyYXkhXG4gICAgICAgICAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidWZmZXIgPSBuZXcgQnVmZmVyKGJ1ZmZlcik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpZHMgPSBpZC5zcGxpdCgnfCcpO1xuXG4gICAgICAgIGlmIChpZHMubGVuZ3RoID4gMSlcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoaWRzW2ldLCBidWZmZXIsIHNpemUsIG5vcm1hbGl6ZWQsIHR5cGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBidWZmZXJJbmRleCA9IHRoaXMuYnVmZmVycy5pbmRleE9mKGJ1ZmZlcik7XG5cbiAgICAgICAgaWYgKGJ1ZmZlckluZGV4ID09PSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goYnVmZmVyKTtcbiAgICAgICAgICAgIGJ1ZmZlckluZGV4ID0gdGhpcy5idWZmZXJzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmF0dHJpYnV0ZXNbaWRdID0gbmV3IEF0dHJpYnV0ZShidWZmZXJJbmRleCwgc2l6ZSwgbm9ybWFsaXplZCwgdHlwZSwgc3RyaWRlLCBzdGFydCwgaW5zdGFuY2UpO1xuXG4gICAgICAgIC8vIGFzc3VtaW5nIHRoYXQgaWYgdGhlcmUgaXMgaW5zdGFuY2VkIGRhdGEgdGhlbiB0aGlzIHdpbGwgYmUgZHJhd24gd2l0aCBpbnN0YW5jaW5nIVxuICAgICAgICB0aGlzLmluc3RhbmNlZCA9IHRoaXMuaW5zdGFuY2VkIHx8IGluc3RhbmNlO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIHJlcXVlc3RlZCBhdHRyaWJ1dGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIHRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgcmVxdWlyZWRcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkF0dHJpYnV0ZX0gdGhlIGF0dHJpYnV0ZSByZXF1ZXN0ZWQuXG4gICAgICovXG4gICAgZ2V0QXR0cmlidXRlKGlkOiBzdHJpbmcpOiBBdHRyaWJ1dGVcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbaWRdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIHJlcXVlc3RlZCBidWZmZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIHRoZSBuYW1lIG9mIHRoZSBidWZmZXIgcmVxdWlyZWRcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkJ1ZmZlcn0gdGhlIGJ1ZmZlciByZXF1ZXN0ZWQuXG4gICAgICovXG4gICAgZ2V0QnVmZmVyKGlkOiBzdHJpbmcpOiBCdWZmZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlcnNbdGhpcy5nZXRBdHRyaWJ1dGUoaWQpLmJ1ZmZlcl07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKlxuICAgICogQWRkcyBhbiBpbmRleCBidWZmZXIgdG8gdGhlIGdlb21ldHJ5XG4gICAgKiBUaGUgaW5kZXggYnVmZmVyIGNvbnRhaW5zIGludGVnZXJzLCB0aHJlZSBmb3IgZWFjaCB0cmlhbmdsZSBpbiB0aGUgZ2VvbWV0cnksIHdoaWNoIHJlZmVyZW5jZSB0aGUgdmFyaW91cyBhdHRyaWJ1dGUgYnVmZmVycyAocG9zaXRpb24sIGNvbG91ciwgVVYgY29vcmRpbmF0ZXMsIG90aGVyIFVWIGNvb3JkaW5hdGVzLCBub3JtYWwsIFx1MjAyNikuIFRoZXJlIGlzIG9ubHkgT05FIGluZGV4IGJ1ZmZlci5cbiAgICAqXG4gICAgKiBAcGFyYW0ge1BJWEkuQnVmZmVyfG51bWJlcltdfSBbYnVmZmVyXSAtIHRoZSBidWZmZXIgdGhhdCBob2xkcyB0aGUgZGF0YSBvZiB0aGUgaW5kZXggYnVmZmVyLiBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBBcnJheSBhbmQgYSBidWZmZXIgd2lsbCBiZSBjcmVhdGVkIGZyb20gaXQuXG4gICAgKiBAcmV0dXJuIHtQSVhJLkdlb21ldHJ5fSByZXR1cm5zIHNlbGYsIHVzZWZ1bCBmb3IgY2hhaW5pbmcuXG4gICAgKi9cbiAgICBhZGRJbmRleChidWZmZXI/OiBCdWZmZXIgfCBJQXJyYXlCdWZmZXIgfCBudW1iZXJbXSk6IEdlb21ldHJ5XG4gICAge1xuICAgICAgICBpZiAoIShidWZmZXIgaW5zdGFuY2VvZiBCdWZmZXIpKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBpdHMgYW4gYXJyYXkhXG4gICAgICAgICAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1ZmZlci5pbmRleCA9IHRydWU7XG4gICAgICAgIHRoaXMuaW5kZXhCdWZmZXIgPSBidWZmZXI7XG5cbiAgICAgICAgaWYgKHRoaXMuYnVmZmVycy5pbmRleE9mKGJ1ZmZlcikgPT09IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlcnMucHVzaChidWZmZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgaW5kZXggYnVmZmVyXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkJ1ZmZlcn0gdGhlIGluZGV4IGJ1ZmZlci5cbiAgICAgKi9cbiAgICBnZXRJbmRleCgpOiBCdWZmZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4QnVmZmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHRoaXMgZnVuY3Rpb24gbW9kaWZpZXMgdGhlIHN0cnVjdHVyZSBzbyB0aGF0IGFsbCBjdXJyZW50IGF0dHJpYnV0ZXMgYmVjb21lIGludGVybGVhdmVkIGludG8gYSBzaW5nbGUgYnVmZmVyXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZnVsIGlmIHlvdXIgbW9kZWwgcmVtYWlucyBzdGF0aWMgYXMgaXQgb2ZmZXJzIGEgbGl0dGxlIHBlcmZvcm1hbmNlIGJvb3N0XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdlb21ldHJ5fSByZXR1cm5zIHNlbGYsIHVzZWZ1bCBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgaW50ZXJsZWF2ZSgpOiBHZW9tZXRyeVxuICAgIHtcbiAgICAgICAgLy8gYSBzaW1wbGUgY2hlY2sgdG8gc2VlIGlmIGJ1ZmZlcnMgYXJlIGFscmVhZHkgaW50ZXJsZWF2ZWQuLlxuICAgICAgICBpZiAodGhpcy5idWZmZXJzLmxlbmd0aCA9PT0gMSB8fCAodGhpcy5idWZmZXJzLmxlbmd0aCA9PT0gMiAmJiB0aGlzLmluZGV4QnVmZmVyKSkgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgLy8gYXNzdW1lIGFscmVhZHkgdGhhdCBubyBidWZmZXJzIGFyZSBpbnRlcmxlYXZlZFxuICAgICAgICBjb25zdCBhcnJheXMgPSBbXTtcbiAgICAgICAgY29uc3Qgc2l6ZXMgPSBbXTtcbiAgICAgICAgY29uc3QgaW50ZXJsZWF2ZWRCdWZmZXIgPSBuZXcgQnVmZmVyKCk7XG4gICAgICAgIGxldCBpO1xuXG4gICAgICAgIGZvciAoaSBpbiB0aGlzLmF0dHJpYnV0ZXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IHRoaXMuYXR0cmlidXRlc1tpXTtcblxuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5idWZmZXJzW2F0dHJpYnV0ZS5idWZmZXJdO1xuXG4gICAgICAgICAgICBhcnJheXMucHVzaChidWZmZXIuZGF0YSk7XG5cbiAgICAgICAgICAgIHNpemVzLnB1c2goKGF0dHJpYnV0ZS5zaXplICogYnl0ZVNpemVNYXBbYXR0cmlidXRlLnR5cGVdKSAvIDQpO1xuXG4gICAgICAgICAgICBhdHRyaWJ1dGUuYnVmZmVyID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVybGVhdmVkQnVmZmVyLmRhdGEgPSBpbnRlcmxlYXZlVHlwZWRBcnJheXMoYXJyYXlzLCBzaXplcyk7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuYnVmZmVycy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVmZmVyc1tpXSAhPT0gdGhpcy5pbmRleEJ1ZmZlcilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcnNbaV0uZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5idWZmZXJzID0gW2ludGVybGVhdmVkQnVmZmVyXTtcblxuICAgICAgICBpZiAodGhpcy5pbmRleEJ1ZmZlcilcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5idWZmZXJzLnB1c2godGhpcy5pbmRleEJ1ZmZlcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBnZXRTaXplKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgZm9yIChjb25zdCBpIGluIHRoaXMuYXR0cmlidXRlcylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlID0gdGhpcy5hdHRyaWJ1dGVzW2ldO1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5idWZmZXJzW2F0dHJpYnV0ZS5idWZmZXJdO1xuXG4gICAgICAgICAgICByZXR1cm4gKGJ1ZmZlci5kYXRhIGFzIGFueSkubGVuZ3RoIC8gKChhdHRyaWJ1dGUuc3RyaWRlIC8gNCkgfHwgYXR0cmlidXRlLnNpemUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGlzcG9zZXMgV2ViR0wgcmVzb3VyY2VzIHRoYXQgYXJlIGNvbm5lY3RlZCB0byB0aGlzIGdlb21ldHJ5XG4gICAgICovXG4gICAgZGlzcG9zZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmRpc3Bvc2VSdW5uZXIuZW1pdCh0aGlzLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG5cbiAgICAgICAgdGhpcy5idWZmZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbmRleEJ1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBhIGNsb25lIG9mIHRoZSBnZW9tZXRyeVxuICAgICAqXG4gICAgICogQHJldHVybnMge1BJWEkuR2VvbWV0cnl9IGEgbmV3IGNsb25lIG9mIHRoaXMgZ2VvbWV0cnlcbiAgICAgKi9cbiAgICBjbG9uZSgpOiBHZW9tZXRyeVxuICAgIHtcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgR2VvbWV0cnkoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnVmZmVycy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgZ2VvbWV0cnkuYnVmZmVyc1tpXSA9IG5ldyBCdWZmZXIodGhpcy5idWZmZXJzW2ldLmRhdGEuc2xpY2UoMCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBpIGluIHRoaXMuYXR0cmlidXRlcylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgYXR0cmliID0gdGhpcy5hdHRyaWJ1dGVzW2ldO1xuXG4gICAgICAgICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzW2ldID0gbmV3IEF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICBhdHRyaWIuYnVmZmVyLFxuICAgICAgICAgICAgICAgIGF0dHJpYi5zaXplLFxuICAgICAgICAgICAgICAgIGF0dHJpYi5ub3JtYWxpemVkLFxuICAgICAgICAgICAgICAgIGF0dHJpYi50eXBlLFxuICAgICAgICAgICAgICAgIGF0dHJpYi5zdHJpZGUsXG4gICAgICAgICAgICAgICAgYXR0cmliLnN0YXJ0LFxuICAgICAgICAgICAgICAgIGF0dHJpYi5pbnN0YW5jZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmluZGV4QnVmZmVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBnZW9tZXRyeS5pbmRleEJ1ZmZlciA9IGdlb21ldHJ5LmJ1ZmZlcnNbdGhpcy5idWZmZXJzLmluZGV4T2YodGhpcy5pbmRleEJ1ZmZlcildO1xuICAgICAgICAgICAgZ2VvbWV0cnkuaW5kZXhCdWZmZXIuaW5kZXggPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdlb21ldHJ5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG1lcmdlcyBhbiBhcnJheSBvZiBnZW9tZXRyaWVzIGludG8gYSBuZXcgc2luZ2xlIG9uZVxuICAgICAqIGdlb21ldHJ5IGF0dHJpYnV0ZSBzdHlsZXMgbXVzdCBtYXRjaCBmb3IgdGhpcyBvcGVyYXRpb24gdG8gd29ya1xuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkdlb21ldHJ5W119IGdlb21ldHJpZXMgLSBhcnJheSBvZiBnZW9tZXRyaWVzIHRvIG1lcmdlXG4gICAgICogQHJldHVybnMge1BJWEkuR2VvbWV0cnl9IHNoaW55IG5ldyBnZW9tZXRyeSFcbiAgICAgKi9cbiAgICBzdGF0aWMgbWVyZ2UoZ2VvbWV0cmllczogQXJyYXk8R2VvbWV0cnk+KTogR2VvbWV0cnlcbiAgICB7XG4gICAgICAgIC8vIHRvZG8gYWRkIGEgZ2VvbWV0cnkgY2hlY2shXG4gICAgICAgIC8vIGFsc28gYSBzaXplIGNoZWNrLi4gY2FudCBiZSB0b28gYmlnIV1cblxuICAgICAgICBjb25zdCBnZW9tZXRyeU91dCA9IG5ldyBHZW9tZXRyeSgpO1xuXG4gICAgICAgIGNvbnN0IGFycmF5cyA9IFtdO1xuICAgICAgICBjb25zdCBzaXplczogQXJyYXk8bnVtYmVyPiA9IFtdO1xuICAgICAgICBjb25zdCBvZmZzZXRzID0gW107XG5cbiAgICAgICAgbGV0IGdlb21ldHJ5O1xuXG4gICAgICAgIC8vIHBhc3Mgb25lLi4gZ2V0IHNpemVzLi5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW9tZXRyaWVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJpZXNbaV07XG5cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2VvbWV0cnkuYnVmZmVycy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzaXplc1tqXSA9IHNpemVzW2pdIHx8IDA7XG4gICAgICAgICAgICAgICAgc2l6ZXNbal0gKz0gZ2VvbWV0cnkuYnVmZmVyc1tqXS5kYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBvZmZzZXRzW2pdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGJ1aWxkIHRoZSBjb3JyZWN0IHNpemUgYXJyYXlzLi5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW9tZXRyeS5idWZmZXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBUT0RPIHR5cGVzIVxuICAgICAgICAgICAgYXJyYXlzW2ldID0gbmV3IG1hcFtnZXRCdWZmZXJUeXBlKGdlb21ldHJ5LmJ1ZmZlcnNbaV0uZGF0YSldKHNpemVzW2ldKTtcbiAgICAgICAgICAgIGdlb21ldHJ5T3V0LmJ1ZmZlcnNbaV0gPSBuZXcgQnVmZmVyKGFycmF5c1tpXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYXNzIHRvIHNldCBkYXRhLi5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW9tZXRyaWVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJpZXNbaV07XG5cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2VvbWV0cnkuYnVmZmVycy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhcnJheXNbal0uc2V0KGdlb21ldHJ5LmJ1ZmZlcnNbal0uZGF0YSwgb2Zmc2V0c1tqXSk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0c1tqXSArPSBnZW9tZXRyeS5idWZmZXJzW2pdLmRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZ2VvbWV0cnlPdXQuYXR0cmlidXRlcyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXM7XG5cbiAgICAgICAgaWYgKGdlb21ldHJ5LmluZGV4QnVmZmVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBnZW9tZXRyeU91dC5pbmRleEJ1ZmZlciA9IGdlb21ldHJ5T3V0LmJ1ZmZlcnNbZ2VvbWV0cnkuYnVmZmVycy5pbmRleE9mKGdlb21ldHJ5LmluZGV4QnVmZmVyKV07XG4gICAgICAgICAgICBnZW9tZXRyeU91dC5pbmRleEJ1ZmZlci5pbmRleCA9IHRydWU7XG5cbiAgICAgICAgICAgIGxldCBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgbGV0IHN0cmlkZSA9IDA7XG4gICAgICAgICAgICBsZXQgb2Zmc2V0MiA9IDA7XG4gICAgICAgICAgICBsZXQgYnVmZmVySW5kZXhUb0NvdW50ID0gMDtcblxuICAgICAgICAgICAgLy8gZ2V0IGEgYnVmZmVyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdlb21ldHJ5LmJ1ZmZlcnMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGdlb21ldHJ5LmJ1ZmZlcnNbaV0gIT09IGdlb21ldHJ5LmluZGV4QnVmZmVyKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVySW5kZXhUb0NvdW50ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBmaWd1cmUgb3V0IHRoZSBzdHJpZGUgb2Ygb25lIGJ1ZmZlci4uXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgaW4gZ2VvbWV0cnkuYXR0cmlidXRlcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKChhdHRyaWJ1dGUuYnVmZmVyIHwgMCkgPT09IGJ1ZmZlckluZGV4VG9Db3VudClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmlkZSArPSAoKGF0dHJpYnV0ZS5zaXplICogYnl0ZVNpemVNYXBbYXR0cmlidXRlLnR5cGVdKSAvIDQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGltZSB0byBvZmYgc2V0IGFsbCBpbmRleGVzLi5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2VvbWV0cmllcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleEJ1ZmZlckRhdGEgPSBnZW9tZXRyaWVzW2ldLmluZGV4QnVmZmVyLmRhdGE7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZGV4QnVmZmVyRGF0YS5sZW5ndGg7IGorKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5T3V0LmluZGV4QnVmZmVyLmRhdGFbaiArIG9mZnNldDJdICs9IG9mZnNldDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gZ2VvbWV0cnkuYnVmZmVyc1tidWZmZXJJbmRleFRvQ291bnRdLmRhdGEubGVuZ3RoIC8gKHN0cmlkZSk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0MiArPSBpbmRleEJ1ZmZlckRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdlb21ldHJ5T3V0O1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gJy4uL2dlb21ldHJ5L0dlb21ldHJ5JztcblxuLyoqXG4gKiBIZWxwZXIgY2xhc3MgdG8gY3JlYXRlIGEgcXVhZFxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIFF1YWQgZXh0ZW5kcyBHZW9tZXRyeVxue1xuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoJ2FWZXJ0ZXhQb3NpdGlvbicsIG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgICAgICAgMCwgMCxcbiAgICAgICAgICAgIDEsIDAsXG4gICAgICAgICAgICAxLCAxLFxuICAgICAgICAgICAgMCwgMSxcbiAgICAgICAgXSkpXG4gICAgICAgICAgICAuYWRkSW5kZXgoWzAsIDEsIDMsIDJdKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tICcuLi9nZW9tZXRyeS9HZW9tZXRyeSc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICcuLi9nZW9tZXRyeS9CdWZmZXInO1xuXG5pbXBvcnQgdHlwZSB7IFJlY3RhbmdsZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG4vKipcbiAqIEhlbHBlciBjbGFzcyB0byBjcmVhdGUgYSBxdWFkIHdpdGggdXZzIGxpa2UgaW4gdjRcbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAZXh0ZW5kcyBQSVhJLkdlb21ldHJ5XG4gKi9cbmV4cG9ydCBjbGFzcyBRdWFkVXYgZXh0ZW5kcyBHZW9tZXRyeVxue1xuICAgIHZlcnRleEJ1ZmZlcjogQnVmZmVyO1xuICAgIHV2QnVmZmVyOiBCdWZmZXI7XG4gICAgdmVydGljZXM6IEZsb2F0MzJBcnJheTtcbiAgICB1dnM6IEZsb2F0MzJBcnJheTtcblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGFycmF5IG9mIHZlcnRpY2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge0Zsb2F0MzJBcnJheX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgICAgICAgIC0xLCAtMSxcbiAgICAgICAgICAgIDEsIC0xLFxuICAgICAgICAgICAgMSwgMSxcbiAgICAgICAgICAgIC0xLCAxLFxuICAgICAgICBdKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFV2cyBvZiB0aGUgcXVhZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtGbG9hdDMyQXJyYXl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgICAgICAgMCwgMCxcbiAgICAgICAgICAgIDEsIDAsXG4gICAgICAgICAgICAxLCAxLFxuICAgICAgICAgICAgMCwgMSxcbiAgICAgICAgXSk7XG5cbiAgICAgICAgdGhpcy52ZXJ0ZXhCdWZmZXIgPSBuZXcgQnVmZmVyKHRoaXMudmVydGljZXMpO1xuICAgICAgICB0aGlzLnV2QnVmZmVyID0gbmV3IEJ1ZmZlcih0aGlzLnV2cyk7XG5cbiAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoJ2FWZXJ0ZXhQb3NpdGlvbicsIHRoaXMudmVydGV4QnVmZmVyKVxuICAgICAgICAgICAgLmFkZEF0dHJpYnV0ZSgnYVRleHR1cmVDb29yZCcsIHRoaXMudXZCdWZmZXIpXG4gICAgICAgICAgICAuYWRkSW5kZXgoWzAsIDEsIDIsIDAsIDIsIDNdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXBzIHR3byBSZWN0YW5nbGUgdG8gdGhlIHF1YWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSB0YXJnZXRUZXh0dXJlRnJhbWUgLSB0aGUgZmlyc3QgcmVjdGFuZ2xlXG4gICAgICogQHBhcmFtIHtQSVhJLlJlY3RhbmdsZX0gZGVzdGluYXRpb25GcmFtZSAtIHRoZSBzZWNvbmQgcmVjdGFuZ2xlXG4gICAgICogQHJldHVybiB7UElYSS5RdWFkfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBtYXAodGFyZ2V0VGV4dHVyZUZyYW1lOiBSZWN0YW5nbGUsIGRlc3RpbmF0aW9uRnJhbWU6IFJlY3RhbmdsZSk6IHRoaXNcbiAgICB7XG4gICAgICAgIGxldCB4ID0gMDsgLy8gZGVzdGluYXRpb25GcmFtZS54IC8gdGFyZ2V0VGV4dHVyZUZyYW1lLndpZHRoO1xuICAgICAgICBsZXQgeSA9IDA7IC8vIGRlc3RpbmF0aW9uRnJhbWUueSAvIHRhcmdldFRleHR1cmVGcmFtZS5oZWlnaHQ7XG5cbiAgICAgICAgdGhpcy51dnNbMF0gPSB4O1xuICAgICAgICB0aGlzLnV2c1sxXSA9IHk7XG5cbiAgICAgICAgdGhpcy51dnNbMl0gPSB4ICsgKGRlc3RpbmF0aW9uRnJhbWUud2lkdGggLyB0YXJnZXRUZXh0dXJlRnJhbWUud2lkdGgpO1xuICAgICAgICB0aGlzLnV2c1szXSA9IHk7XG5cbiAgICAgICAgdGhpcy51dnNbNF0gPSB4ICsgKGRlc3RpbmF0aW9uRnJhbWUud2lkdGggLyB0YXJnZXRUZXh0dXJlRnJhbWUud2lkdGgpO1xuICAgICAgICB0aGlzLnV2c1s1XSA9IHkgKyAoZGVzdGluYXRpb25GcmFtZS5oZWlnaHQgLyB0YXJnZXRUZXh0dXJlRnJhbWUuaGVpZ2h0KTtcblxuICAgICAgICB0aGlzLnV2c1s2XSA9IHg7XG4gICAgICAgIHRoaXMudXZzWzddID0geSArIChkZXN0aW5hdGlvbkZyYW1lLmhlaWdodCAvIHRhcmdldFRleHR1cmVGcmFtZS5oZWlnaHQpO1xuXG4gICAgICAgIHggPSBkZXN0aW5hdGlvbkZyYW1lLng7XG4gICAgICAgIHkgPSBkZXN0aW5hdGlvbkZyYW1lLnk7XG5cbiAgICAgICAgdGhpcy52ZXJ0aWNlc1swXSA9IHg7XG4gICAgICAgIHRoaXMudmVydGljZXNbMV0gPSB5O1xuXG4gICAgICAgIHRoaXMudmVydGljZXNbMl0gPSB4ICsgZGVzdGluYXRpb25GcmFtZS53aWR0aDtcbiAgICAgICAgdGhpcy52ZXJ0aWNlc1szXSA9IHk7XG5cbiAgICAgICAgdGhpcy52ZXJ0aWNlc1s0XSA9IHggKyBkZXN0aW5hdGlvbkZyYW1lLndpZHRoO1xuICAgICAgICB0aGlzLnZlcnRpY2VzWzVdID0geSArIGRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMudmVydGljZXNbNl0gPSB4O1xuICAgICAgICB0aGlzLnZlcnRpY2VzWzddID0geSArIGRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGxlZ2FjeSB1cGxvYWQgbWV0aG9kLCBqdXN0IG1hcmtzIGJ1ZmZlcnMgZGlydHlcbiAgICAgKiBAcmV0dXJucyB7UElYSS5RdWFkVXZ9IFJldHVybnMgaXRzZWxmLlxuICAgICAqL1xuICAgIGludmFsaWRhdGUoKTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy52ZXJ0ZXhCdWZmZXIuX3VwZGF0ZUlEKys7XG4gICAgICAgIHRoaXMudXZCdWZmZXIuX3VwZGF0ZUlEKys7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgRGljdCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB0eXBlIHsgVW5pZm9ybXNTeW5jQ2FsbGJhY2sgfSBmcm9tICcuL3V0aWxzJztcblxubGV0IFVJRCA9IDA7XG5cbi8qKlxuICogVW5pZm9ybSBncm91cCBob2xkcyB1bmlmb3JtIG1hcCBhbmQgc29tZSBJRCdzIGZvciB3b3JrXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgVW5pZm9ybUdyb3VwXG57XG4gICAgcHVibGljIHJlYWRvbmx5IHVuaWZvcm1zOiBEaWN0PGFueT47XG4gICAgcHVibGljIHJlYWRvbmx5IGdyb3VwOiBib29sZWFuO1xuICAgIHB1YmxpYyBpZDogbnVtYmVyO1xuICAgIHN5bmNVbmlmb3JtczogRGljdDxVbmlmb3Jtc1N5bmNDYWxsYmFjaz47XG4gICAgZGlydHlJZDogbnVtYmVyO1xuICAgIHN0YXRpYzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbdW5pZm9ybXNdIC0gQ3VzdG9tIHVuaWZvcm1zIHRvIHVzZSB0byBhdWdtZW50IHRoZSBidWlsdC1pbiBvbmVzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW19zdGF0aWNdIC0gVW5pZm9ybXMgd29udCBiZSBjaGFuZ2VkIGFmdGVyIGNyZWF0aW9uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodW5pZm9ybXM6IERpY3Q8YW55PiwgX3N0YXRpYz86IGJvb2xlYW4pXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogdW5pZm9ybSB2YWx1ZXNcbiAgICAgICAgICogQG1lbWJlciB7b2JqZWN0fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudW5pZm9ybXMgPSB1bmlmb3JtcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogSXRzIGEgZ3JvdXAgYW5kIG5vdCBhIHNpbmdsZSB1bmlmb3Jtc1xuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ncm91cCA9IHRydWU7XG5cbiAgICAgICAgLy8gbGV0cyBnZW5lcmF0ZSB0aGlzIHdoZW4gdGhlIHNoYWRlciA/XG4gICAgICAgIHRoaXMuc3luY1VuaWZvcm1zID0ge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRpcnR5IHZlcnNpb25cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpcnR5SWQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB1bmlxdWUgaWRcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlkID0gVUlEKys7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuaWZvcm1zIHdvbnQgYmUgY2hhbmdlZCBhZnRlciBjcmVhdGlvblxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0aWMgPSAhIV9zdGF0aWM7XG4gICAgfVxuXG4gICAgdXBkYXRlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgIH1cblxuICAgIGFkZChuYW1lOiBzdHJpbmcsIHVuaWZvcm1zOiBEaWN0PGFueT4sIF9zdGF0aWM6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnVuaWZvcm1zW25hbWVdID0gbmV3IFVuaWZvcm1Hcm91cCh1bmlmb3JtcywgX3N0YXRpYyk7XG4gICAgfVxuXG4gICAgc3RhdGljIGZyb20odW5pZm9ybXM6IERpY3Q8YW55PiwgX3N0YXRpYzogYm9vbGVhbik6IFVuaWZvcm1Hcm91cFxuICAgIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVbmlmb3JtR3JvdXAodW5pZm9ybXMsIF9zdGF0aWMpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tICdAcGl4aS9tYXRoJztcblxuaW1wb3J0IHR5cGUgeyBGaWx0ZXIgfSBmcm9tICcuL0ZpbHRlcic7XG5pbXBvcnQgdHlwZSB7IElGaWx0ZXJUYXJnZXQgfSBmcm9tICcuL0lGaWx0ZXJUYXJnZXQnO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJUZXh0dXJlIH0gZnJvbSAnLi4vcmVuZGVyVGV4dHVyZS9SZW5kZXJUZXh0dXJlJztcblxuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgZmlsdGVyIHN0YXRlcy5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWx0ZXJTdGF0ZVxue1xuICAgIHJlbmRlclRleHR1cmU6IFJlbmRlclRleHR1cmU7XG4gICAgdGFyZ2V0OiBJRmlsdGVyVGFyZ2V0O1xuICAgIGxlZ2FjeTogYm9vbGVhbjtcbiAgICByZXNvbHV0aW9uOiBudW1iZXI7XG4gICAgc291cmNlRnJhbWU6IFJlY3RhbmdsZTtcbiAgICBkZXN0aW5hdGlvbkZyYW1lOiBSZWN0YW5nbGU7XG4gICAgZmlsdGVyczogQXJyYXk8RmlsdGVyPjtcblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIHRoaXMucmVuZGVyVGV4dHVyZSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRhcmdldCBvZiB0aGUgZmlsdGVyc1xuICAgICAgICAgKiBXZSBzdG9yZSBmb3IgY2FzZSB3aGVuIGN1c3RvbSBmaWx0ZXIgd2FudHMgdG8ga25vdyB0aGUgZWxlbWVudCBpdCB3YXMgYXBwbGllZCBvblxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkRpc3BsYXlPYmplY3R9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbXBhdGliaWxpdHkgd2l0aCBQaXhpSlMgdjQgZmlsdGVyc1xuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sZWdhY3kgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzb2x1dGlvbiBvZiBmaWx0ZXJzXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gMTtcblxuICAgICAgICAvLyBuZXh0IHRocmVlIGZpZWxkcyBhcmUgY3JlYXRlZCBvbmx5IGZvciByb290XG4gICAgICAgIC8vIHJlLWFzc2lnbmVkIGZvciBldmVyeXRoaW5nIGVsc2VcblxuICAgICAgICAvKipcbiAgICAgICAgICogU291cmNlIGZyYW1lXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuUmVjdGFuZ2xlfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3VyY2VGcmFtZSA9IG5ldyBSZWN0YW5nbGUoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVzdGluYXRpb24gZnJhbWVcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5SZWN0YW5nbGV9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uRnJhbWUgPSBuZXcgUmVjdGFuZ2xlKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbGxlY3Rpb24gb2YgZmlsdGVyc1xuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkZpbHRlcltdfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJzID0gW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY2xlYXJzIHRoZSBzdGF0ZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgY2xlYXIoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICB0aGlzLmZpbHRlcnMgPSBudWxsO1xuICAgICAgICB0aGlzLnJlbmRlclRleHR1cmUgPSBudWxsO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tICcuLi9TeXN0ZW0nO1xuaW1wb3J0IHsgUmVuZGVyVGV4dHVyZVBvb2wgfSBmcm9tICcuLi9yZW5kZXJUZXh0dXJlL1JlbmRlclRleHR1cmVQb29sJztcbmltcG9ydCB7IFF1YWQgfSBmcm9tICcuLi91dGlscy9RdWFkJztcbmltcG9ydCB7IFF1YWRVdiB9IGZyb20gJy4uL3V0aWxzL1F1YWRVdic7XG5pbXBvcnQgeyBSZWN0YW5nbGUsIE1hdHJpeCB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHsgVW5pZm9ybUdyb3VwIH0gZnJvbSAnLi4vc2hhZGVyL1VuaWZvcm1Hcm91cCc7XG5pbXBvcnQgeyBEUkFXX01PREVTLCBDTEVBUl9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBkZXByZWNhdGlvbiB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IEZpbHRlclN0YXRlIH0gZnJvbSAnLi9GaWx0ZXJTdGF0ZSc7XG5cbmltcG9ydCB0eXBlIHsgRmlsdGVyIH0gZnJvbSAnLi9GaWx0ZXInO1xuaW1wb3J0IHR5cGUgeyBJRmlsdGVyVGFyZ2V0IH0gZnJvbSAnLi9JRmlsdGVyVGFyZ2V0JztcbmltcG9ydCB0eXBlIHsgSVNwcml0ZU1hc2tUYXJnZXQgfSBmcm9tICcuL3Nwcml0ZU1hc2svU3ByaXRlTWFza0ZpbHRlcic7XG5pbXBvcnQgdHlwZSB7IFJlbmRlclRleHR1cmUgfSBmcm9tICcuLi9yZW5kZXJUZXh0dXJlL1JlbmRlclRleHR1cmUnO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uL1JlbmRlcmVyJztcbi8qKlxuICogU3lzdGVtIHBsdWdpbiB0byB0aGUgcmVuZGVyZXIgdG8gbWFuYWdlIHRoZSBmaWx0ZXJzLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWEkuc3lzdGVtc1xuICogQGV4dGVuZHMgUElYSS5TeXN0ZW1cbiAqL1xuZXhwb3J0IGNsYXNzIEZpbHRlclN5c3RlbSBleHRlbmRzIFN5c3RlbVxue1xuICAgIHB1YmxpYyByZWFkb25seSBkZWZhdWx0RmlsdGVyU3RhY2s6IEFycmF5PEZpbHRlclN0YXRlPjtcbiAgICBwdWJsaWMgc3RhdGVQb29sOiBBcnJheTxGaWx0ZXJTdGF0ZT47XG4gICAgcHVibGljIHRleHR1cmVQb29sOiBSZW5kZXJUZXh0dXJlUG9vbDtcbiAgICBwdWJsaWMgZm9yY2VDbGVhcjogYm9vbGVhbjtcbiAgICBwdWJsaWMgdXNlTWF4UGFkZGluZzogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgcXVhZDogUXVhZDtcbiAgICBwcm90ZWN0ZWQgcXVhZFV2OiBRdWFkVXY7XG4gICAgcHJvdGVjdGVkIGFjdGl2ZVN0YXRlOiBGaWx0ZXJTdGF0ZTtcbiAgICBwcm90ZWN0ZWQgZ2xvYmFsVW5pZm9ybXM6IFVuaWZvcm1Hcm91cDtcbiAgICBwcml2YXRlIHRlbXBSZWN0OiBSZWN0YW5nbGU7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgU3lzdGVtIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogUmVuZGVyZXIpXG4gICAge1xuICAgICAgICBzdXBlcihyZW5kZXJlcik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExpc3Qgb2YgZmlsdGVycyBmb3IgdGhlIEZpbHRlclN5c3RlbVxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlZmF1bHRGaWx0ZXJTdGFjayA9IFt7fV0gYXMgYW55O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzdG9yZXMgYSBidW5jaCBvZiBQTzIgdGV4dHVyZXMgdXNlZCBmb3IgZmlsdGVyaW5nXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGV4dHVyZVBvb2wgPSBuZXcgUmVuZGVyVGV4dHVyZVBvb2woKTtcblxuICAgICAgICB0aGlzLnRleHR1cmVQb29sLnNldFNjcmVlblNpemUocmVuZGVyZXIudmlldyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgcG9vbCBmb3Igc3RvcmluZyBmaWx0ZXIgc3RhdGVzLCBzYXZlIHVzIGNyZWF0aW5nIG5ldyBvbmVzIGVhY2ggdGlja1xuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdGVQb29sID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdmVyeSBzaW1wbGUgZ2VvbWV0cnkgdXNlZCB3aGVuIGRyYXdpbmcgYSBmaWx0ZXIgZWZmZWN0IHRvIHRoZSBzY3JlZW5cbiAgICAgICAgICogQG1lbWJlciB7UElYSS5RdWFkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5xdWFkID0gbmV3IFF1YWQoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUXVhZCBVVnNcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5RdWFkVXZ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnF1YWRVdiA9IG5ldyBRdWFkVXYoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGVtcG9yYXJ5IHJlY3QgZm9yIG1hdGhzXG4gICAgICAgICAqIEB0eXBlIHtQSVhJLlJlY3RhbmdsZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGVtcFJlY3QgPSBuZXcgUmVjdGFuZ2xlKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFjdGl2ZSBzdGF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtvYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFjdGl2ZVN0YXRlID0ge30gYXMgYW55O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIHVuaWZvcm0gZ3JvdXAgaXMgYXR0YWNoZWQgdG8gZmlsdGVyIHVuaWZvcm1zIHdoZW4gdXNlZFxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlVuaWZvcm1Hcm91cH1cbiAgICAgICAgICogQHByb3BlcnR5IHtQSVhJLlJlY3RhbmdsZX0gb3V0cHV0RnJhbWVcbiAgICAgICAgICogQHByb3BlcnR5IHtGbG9hdDMyQXJyYXl9IGlucHV0U2l6ZVxuICAgICAgICAgKiBAcHJvcGVydHkge0Zsb2F0MzJBcnJheX0gaW5wdXRQaXhlbFxuICAgICAgICAgKiBAcHJvcGVydHkge0Zsb2F0MzJBcnJheX0gaW5wdXRDbGFtcFxuICAgICAgICAgKiBAcHJvcGVydHkge051bWJlcn0gcmVzb2x1dGlvblxuICAgICAgICAgKiBAcHJvcGVydHkge0Zsb2F0MzJBcnJheX0gZmlsdGVyQXJlYVxuICAgICAgICAgKiBAcHJvcGVydHkge0Zsb2FkMzJBcnJheX0gZmlsdGVyQ2xhbXBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2xvYmFsVW5pZm9ybXMgPSBuZXcgVW5pZm9ybUdyb3VwKHtcbiAgICAgICAgICAgIG91dHB1dEZyYW1lOiB0aGlzLnRlbXBSZWN0LFxuICAgICAgICAgICAgaW5wdXRTaXplOiBuZXcgRmxvYXQzMkFycmF5KDQpLFxuICAgICAgICAgICAgaW5wdXRQaXhlbDogbmV3IEZsb2F0MzJBcnJheSg0KSxcbiAgICAgICAgICAgIGlucHV0Q2xhbXA6IG5ldyBGbG9hdDMyQXJyYXkoNCksXG4gICAgICAgICAgICByZXNvbHV0aW9uOiAxLFxuXG4gICAgICAgICAgICAvLyBsZWdhY3kgdmFyaWFibGVzXG4gICAgICAgICAgICBmaWx0ZXJBcmVhOiBuZXcgRmxvYXQzMkFycmF5KDQpLFxuICAgICAgICAgICAgZmlsdGVyQ2xhbXA6IG5ldyBGbG9hdDMyQXJyYXkoNCksXG4gICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIGNsZWFyIG91dHB1dCByZW5kZXJUZXh0dXJlIGluIEFVVE8vQkxJVCBtb2RlLiBTZWUge0BsaW5rIFBJWEkuQ0xFQVJfTU9ERVN9XG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvcmNlQ2xlYXIgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogT2xkIHBhZGRpbmcgYmVoYXZpb3IgaXMgdG8gdXNlIHRoZSBtYXggYW1vdW50IGluc3RlYWQgb2Ygc3VtIHBhZGRpbmcuXG4gICAgICAgICAqIFVzZSB0aGlzIGZsYWcgaWYgeW91IG5lZWQgdGhlIG9sZCBiZWhhdmlvci5cbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXNlTWF4UGFkZGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZmlsdGVyIHRvIHRoZSBTeXN0ZW0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gdGFyZ2V0IC0gVGhlIHRhcmdldCBvZiB0aGUgZmlsdGVyIHRvIHJlbmRlci5cbiAgICAgKiBAcGFyYW0ge1BJWEkuRmlsdGVyW119IGZpbHRlcnMgLSBUaGUgZmlsdGVycyB0byBhcHBseS5cbiAgICAgKi9cbiAgICBwdXNoKHRhcmdldDogSUZpbHRlclRhcmdldCwgZmlsdGVyczogQXJyYXk8RmlsdGVyPik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcbiAgICAgICAgY29uc3QgZmlsdGVyU3RhY2sgPSB0aGlzLmRlZmF1bHRGaWx0ZXJTdGFjaztcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlUG9vbC5wb3AoKSB8fCBuZXcgRmlsdGVyU3RhdGUoKTtcblxuICAgICAgICBsZXQgcmVzb2x1dGlvbiA9IGZpbHRlcnNbMF0ucmVzb2x1dGlvbjtcbiAgICAgICAgbGV0IHBhZGRpbmcgPSBmaWx0ZXJzWzBdLnBhZGRpbmc7XG4gICAgICAgIGxldCBhdXRvRml0ID0gZmlsdGVyc1swXS5hdXRvRml0O1xuICAgICAgICBsZXQgbGVnYWN5ID0gZmlsdGVyc1swXS5sZWdhY3k7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBmaWx0ZXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSAgZmlsdGVyc1tpXTtcblxuICAgICAgICAgICAgLy8gbGV0cyB1c2UgdGhlIGxvd2VzdCByZXNvbHV0aW9uLi5cbiAgICAgICAgICAgIHJlc29sdXRpb24gPSBNYXRoLm1pbihyZXNvbHV0aW9uLCBmaWx0ZXIucmVzb2x1dGlvbik7XG4gICAgICAgICAgICAvLyBmaWd1cmUgb3V0IHRoZSBwYWRkaW5nIHJlcXVpcmVkIGZvciBmaWx0ZXJzXG4gICAgICAgICAgICBwYWRkaW5nID0gdGhpcy51c2VNYXhQYWRkaW5nXG4gICAgICAgICAgICAgICAgLy8gb2xkIGJlaGF2aW9yOiB1c2UgbGFyZ2VzdCBhbW91bnQgb2YgcGFkZGluZyFcbiAgICAgICAgICAgICAgICA/IE1hdGgubWF4KHBhZGRpbmcsIGZpbHRlci5wYWRkaW5nKVxuICAgICAgICAgICAgICAgIC8vIG5ldyBiZWhhdmlvcjogc3VtIHRoZSBwYWRkaW5nXG4gICAgICAgICAgICAgICAgOiBwYWRkaW5nICsgZmlsdGVyLnBhZGRpbmc7XG4gICAgICAgICAgICAvLyBvbmx5IGF1dG8gZml0IGlmIGFsbCBmaWx0ZXJzIGFyZSBhdXRvZml0XG4gICAgICAgICAgICBhdXRvRml0ID0gYXV0b0ZpdCAmJiBmaWx0ZXIuYXV0b0ZpdDtcblxuICAgICAgICAgICAgbGVnYWN5ID0gbGVnYWN5IHx8IGZpbHRlci5sZWdhY3k7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsdGVyU3RhY2subGVuZ3RoID09PSAxKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRGaWx0ZXJTdGFja1swXS5yZW5kZXJUZXh0dXJlID0gcmVuZGVyZXIucmVuZGVyVGV4dHVyZS5jdXJyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZmlsdGVyU3RhY2sucHVzaChzdGF0ZSk7XG5cbiAgICAgICAgc3RhdGUucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG5cbiAgICAgICAgc3RhdGUubGVnYWN5ID0gbGVnYWN5O1xuXG4gICAgICAgIHN0YXRlLnRhcmdldCA9IHRhcmdldDtcblxuICAgICAgICBzdGF0ZS5zb3VyY2VGcmFtZS5jb3B5RnJvbSh0YXJnZXQuZmlsdGVyQXJlYSB8fCB0YXJnZXQuZ2V0Qm91bmRzKHRydWUpKTtcblxuICAgICAgICBzdGF0ZS5zb3VyY2VGcmFtZS5wYWQocGFkZGluZyk7XG4gICAgICAgIGlmIChhdXRvRml0KVxuICAgICAgICB7XG4gICAgICAgICAgICBzdGF0ZS5zb3VyY2VGcmFtZS5maXQodGhpcy5yZW5kZXJlci5yZW5kZXJUZXh0dXJlLnNvdXJjZUZyYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJvdW5kIHRvIHdob2xlIG51bWJlciBiYXNlZCBvbiByZXNvbHV0aW9uXG4gICAgICAgIHN0YXRlLnNvdXJjZUZyYW1lLmNlaWwocmVzb2x1dGlvbik7XG5cbiAgICAgICAgc3RhdGUucmVuZGVyVGV4dHVyZSA9IHRoaXMuZ2V0T3B0aW1hbEZpbHRlclRleHR1cmUoc3RhdGUuc291cmNlRnJhbWUud2lkdGgsIHN0YXRlLnNvdXJjZUZyYW1lLmhlaWdodCwgcmVzb2x1dGlvbik7XG4gICAgICAgIHN0YXRlLmZpbHRlcnMgPSBmaWx0ZXJzO1xuXG4gICAgICAgIHN0YXRlLmRlc3RpbmF0aW9uRnJhbWUud2lkdGggPSBzdGF0ZS5yZW5kZXJUZXh0dXJlLndpZHRoO1xuICAgICAgICBzdGF0ZS5kZXN0aW5hdGlvbkZyYW1lLmhlaWdodCA9IHN0YXRlLnJlbmRlclRleHR1cmUuaGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uRnJhbWUgPSB0aGlzLnRlbXBSZWN0O1xuXG4gICAgICAgIGRlc3RpbmF0aW9uRnJhbWUud2lkdGggPSBzdGF0ZS5zb3VyY2VGcmFtZS53aWR0aDtcbiAgICAgICAgZGVzdGluYXRpb25GcmFtZS5oZWlnaHQgPSBzdGF0ZS5zb3VyY2VGcmFtZS5oZWlnaHQ7XG5cbiAgICAgICAgc3RhdGUucmVuZGVyVGV4dHVyZS5maWx0ZXJGcmFtZSA9IHN0YXRlLnNvdXJjZUZyYW1lO1xuXG4gICAgICAgIHJlbmRlcmVyLnJlbmRlclRleHR1cmUuYmluZChzdGF0ZS5yZW5kZXJUZXh0dXJlLCBzdGF0ZS5zb3VyY2VGcmFtZSwgZGVzdGluYXRpb25GcmFtZSk7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlclRleHR1cmUuY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQb3BzIG9mZiB0aGUgZmlsdGVyIGFuZCBhcHBsaWVzIGl0LlxuICAgICAqXG4gICAgICovXG4gICAgcG9wKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGZpbHRlclN0YWNrID0gdGhpcy5kZWZhdWx0RmlsdGVyU3RhY2s7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gZmlsdGVyU3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IGZpbHRlcnMgPSBzdGF0ZS5maWx0ZXJzO1xuXG4gICAgICAgIHRoaXMuYWN0aXZlU3RhdGUgPSBzdGF0ZTtcblxuICAgICAgICBjb25zdCBnbG9iYWxVbmlmb3JtcyA9IHRoaXMuZ2xvYmFsVW5pZm9ybXMudW5pZm9ybXM7XG5cbiAgICAgICAgZ2xvYmFsVW5pZm9ybXMub3V0cHV0RnJhbWUgPSBzdGF0ZS5zb3VyY2VGcmFtZTtcbiAgICAgICAgZ2xvYmFsVW5pZm9ybXMucmVzb2x1dGlvbiA9IHN0YXRlLnJlc29sdXRpb247XG5cbiAgICAgICAgY29uc3QgaW5wdXRTaXplID0gZ2xvYmFsVW5pZm9ybXMuaW5wdXRTaXplO1xuICAgICAgICBjb25zdCBpbnB1dFBpeGVsID0gZ2xvYmFsVW5pZm9ybXMuaW5wdXRQaXhlbDtcbiAgICAgICAgY29uc3QgaW5wdXRDbGFtcCA9IGdsb2JhbFVuaWZvcm1zLmlucHV0Q2xhbXA7XG5cbiAgICAgICAgaW5wdXRTaXplWzBdID0gc3RhdGUuZGVzdGluYXRpb25GcmFtZS53aWR0aDtcbiAgICAgICAgaW5wdXRTaXplWzFdID0gc3RhdGUuZGVzdGluYXRpb25GcmFtZS5oZWlnaHQ7XG4gICAgICAgIGlucHV0U2l6ZVsyXSA9IDEuMCAvIGlucHV0U2l6ZVswXTtcbiAgICAgICAgaW5wdXRTaXplWzNdID0gMS4wIC8gaW5wdXRTaXplWzFdO1xuXG4gICAgICAgIGlucHV0UGl4ZWxbMF0gPSBpbnB1dFNpemVbMF0gKiBzdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICBpbnB1dFBpeGVsWzFdID0gaW5wdXRTaXplWzFdICogc3RhdGUucmVzb2x1dGlvbjtcbiAgICAgICAgaW5wdXRQaXhlbFsyXSA9IDEuMCAvIGlucHV0UGl4ZWxbMF07XG4gICAgICAgIGlucHV0UGl4ZWxbM10gPSAxLjAgLyBpbnB1dFBpeGVsWzFdO1xuXG4gICAgICAgIGlucHV0Q2xhbXBbMF0gPSAwLjUgKiBpbnB1dFBpeGVsWzJdO1xuICAgICAgICBpbnB1dENsYW1wWzFdID0gMC41ICogaW5wdXRQaXhlbFszXTtcbiAgICAgICAgaW5wdXRDbGFtcFsyXSA9IChzdGF0ZS5zb3VyY2VGcmFtZS53aWR0aCAqIGlucHV0U2l6ZVsyXSkgLSAoMC41ICogaW5wdXRQaXhlbFsyXSk7XG4gICAgICAgIGlucHV0Q2xhbXBbM10gPSAoc3RhdGUuc291cmNlRnJhbWUuaGVpZ2h0ICogaW5wdXRTaXplWzNdKSAtICgwLjUgKiBpbnB1dFBpeGVsWzNdKTtcblxuICAgICAgICAvLyBvbmx5IHVwZGF0ZSB0aGUgcmVjdCBpZiBpdHMgbGVnYWN5Li5cbiAgICAgICAgaWYgKHN0YXRlLmxlZ2FjeSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyQXJlYSA9IGdsb2JhbFVuaWZvcm1zLmZpbHRlckFyZWE7XG5cbiAgICAgICAgICAgIGZpbHRlckFyZWFbMF0gPSBzdGF0ZS5kZXN0aW5hdGlvbkZyYW1lLndpZHRoO1xuICAgICAgICAgICAgZmlsdGVyQXJlYVsxXSA9IHN0YXRlLmRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0O1xuICAgICAgICAgICAgZmlsdGVyQXJlYVsyXSA9IHN0YXRlLnNvdXJjZUZyYW1lLng7XG4gICAgICAgICAgICBmaWx0ZXJBcmVhWzNdID0gc3RhdGUuc291cmNlRnJhbWUueTtcblxuICAgICAgICAgICAgZ2xvYmFsVW5pZm9ybXMuZmlsdGVyQ2xhbXAgPSBnbG9iYWxVbmlmb3Jtcy5pbnB1dENsYW1wO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nbG9iYWxVbmlmb3Jtcy51cGRhdGUoKTtcblxuICAgICAgICBjb25zdCBsYXN0U3RhdGUgPSBmaWx0ZXJTdGFja1tmaWx0ZXJTdGFjay5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZiAoc3RhdGUucmVuZGVyVGV4dHVyZS5mcmFtZWJ1ZmZlci5tdWx0aXNhbXBsZSA+IDEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuZnJhbWVidWZmZXIuYmxpdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbHRlcnMubGVuZ3RoID09PSAxKVxuICAgICAgICB7XG4gICAgICAgICAgICBmaWx0ZXJzWzBdLmFwcGx5KHRoaXMsIHN0YXRlLnJlbmRlclRleHR1cmUsIGxhc3RTdGF0ZS5yZW5kZXJUZXh0dXJlLCBDTEVBUl9NT0RFUy5CTEVORCwgc3RhdGUpO1xuXG4gICAgICAgICAgICB0aGlzLnJldHVybkZpbHRlclRleHR1cmUoc3RhdGUucmVuZGVyVGV4dHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgZmxpcCA9IHN0YXRlLnJlbmRlclRleHR1cmU7XG4gICAgICAgICAgICBsZXQgZmxvcCA9IHRoaXMuZ2V0T3B0aW1hbEZpbHRlclRleHR1cmUoXG4gICAgICAgICAgICAgICAgZmxpcC53aWR0aCxcbiAgICAgICAgICAgICAgICBmbGlwLmhlaWdodCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5yZXNvbHV0aW9uXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBmbG9wLmZpbHRlckZyYW1lID0gZmxpcC5maWx0ZXJGcmFtZTtcblxuICAgICAgICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZmlsdGVycy5sZW5ndGggLSAxOyArK2kpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZmlsdGVyc1tpXS5hcHBseSh0aGlzLCBmbGlwLCBmbG9wLCBDTEVBUl9NT0RFUy5DTEVBUiwgc3RhdGUpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGZsaXA7XG5cbiAgICAgICAgICAgICAgICBmbGlwID0gZmxvcDtcbiAgICAgICAgICAgICAgICBmbG9wID0gdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlsdGVyc1tpXS5hcHBseSh0aGlzLCBmbGlwLCBsYXN0U3RhdGUucmVuZGVyVGV4dHVyZSwgQ0xFQVJfTU9ERVMuQkxFTkQsIHN0YXRlKTtcblxuICAgICAgICAgICAgdGhpcy5yZXR1cm5GaWx0ZXJUZXh0dXJlKGZsaXApO1xuICAgICAgICAgICAgdGhpcy5yZXR1cm5GaWx0ZXJUZXh0dXJlKGZsb3ApO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZVBvb2wucHVzaChzdGF0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmluZHMgYSByZW5kZXJUZXh0dXJlIHdpdGggY29ycmVzcG9uZGluZyBgZmlsdGVyRnJhbWVgLCBjbGVhcnMgaXQgaWYgbW9kZSBjb3JyZXNwb25kcy5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gZmlsdGVyVGV4dHVyZSAtIHJlbmRlclRleHR1cmUgdG8gYmluZCwgc2hvdWxkIGJlbG9uZyB0byBmaWx0ZXIgcG9vbCBvciBmaWx0ZXIgc3RhY2tcbiAgICAgKiBAcGFyYW0ge1BJWEkuQ0xFQVJfTU9ERVN9IFtjbGVhck1vZGVdIC0gY2xlYXJNb2RlLCBieSBkZWZhdWx0IGl0cyBDTEVBUi9ZRVMuIFNlZSB7QGxpbmsgUElYSS5DTEVBUl9NT0RFU31cbiAgICAgKi9cbiAgICBiaW5kQW5kQ2xlYXIoZmlsdGVyVGV4dHVyZTogUmVuZGVyVGV4dHVyZSwgY2xlYXJNb2RlID0gQ0xFQVJfTU9ERVMuQ0xFQVIpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoZmlsdGVyVGV4dHVyZSAmJiBmaWx0ZXJUZXh0dXJlLmZpbHRlckZyYW1lKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvbkZyYW1lID0gdGhpcy50ZW1wUmVjdDtcblxuICAgICAgICAgICAgZGVzdGluYXRpb25GcmFtZS53aWR0aCA9IGZpbHRlclRleHR1cmUuZmlsdGVyRnJhbWUud2lkdGg7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbkZyYW1lLmhlaWdodCA9IGZpbHRlclRleHR1cmUuZmlsdGVyRnJhbWUuaGVpZ2h0O1xuXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlclRleHR1cmUuYmluZChmaWx0ZXJUZXh0dXJlLCBmaWx0ZXJUZXh0dXJlLmZpbHRlckZyYW1lLCBkZXN0aW5hdGlvbkZyYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyVGV4dHVyZS5iaW5kKGZpbHRlclRleHR1cmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvblxuICAgICAgICBpZiAodHlwZW9mIGNsZWFyTW9kZSA9PT0gJ2Jvb2xlYW4nKVxuICAgICAgICB7XG4gICAgICAgICAgICBjbGVhck1vZGUgPSBjbGVhck1vZGUgPyBDTEVBUl9NT0RFUy5DTEVBUiA6IENMRUFSX01PREVTLkJMRU5EO1xuICAgICAgICAgICAgLy8gZ2V0IGRlcHJlY2F0aW9uIGZ1bmN0aW9uIGZyb20gdXRpbHNcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uKCc1LjIuMScsICdVc2UgQ0xFQVJfTU9ERVMgd2hlbiB1c2luZyBjbGVhciBhcHBseUZpbHRlciBvcHRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xlYXJNb2RlID09PSBDTEVBUl9NT0RFUy5DTEVBUlxuICAgICAgICAgICAgfHwgKGNsZWFyTW9kZSA9PT0gQ0xFQVJfTU9ERVMuQkxJVCAmJiB0aGlzLmZvcmNlQ2xlYXIpKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlclRleHR1cmUuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXdzIGEgZmlsdGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkZpbHRlcn0gZmlsdGVyIC0gVGhlIGZpbHRlciB0byBkcmF3LlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJUZXh0dXJlfSBpbnB1dCAtIFRoZSBpbnB1dCByZW5kZXIgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJUZXh0dXJlfSBvdXRwdXQgLSBUaGUgdGFyZ2V0IHRvIG91dHB1dCB0by5cbiAgICAgKiBAcGFyYW0ge1BJWEkuQ0xFQVJfTU9ERVN9IFtjbGVhck1vZGVdIC0gU2hvdWxkIHRoZSBvdXRwdXQgYmUgY2xlYXJlZCBiZWZvcmUgcmVuZGVyaW5nIHRvIGl0XG4gICAgICovXG4gICAgYXBwbHlGaWx0ZXIoZmlsdGVyOiBGaWx0ZXIsIGlucHV0OiBSZW5kZXJUZXh0dXJlLCBvdXRwdXQ6IFJlbmRlclRleHR1cmUsIGNsZWFyTW9kZTogQ0xFQVJfTU9ERVMpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG5cbiAgICAgICAgdGhpcy5iaW5kQW5kQ2xlYXIob3V0cHV0LCBjbGVhck1vZGUpO1xuXG4gICAgICAgIC8vIHNldCB0aGUgdW5pZm9ybXMuLlxuICAgICAgICBmaWx0ZXIudW5pZm9ybXMudVNhbXBsZXIgPSBpbnB1dDtcbiAgICAgICAgZmlsdGVyLnVuaWZvcm1zLmZpbHRlckdsb2JhbHMgPSB0aGlzLmdsb2JhbFVuaWZvcm1zO1xuXG4gICAgICAgIC8vIFRPRE8gbWFrZSBpdCBzbyB0aGF0IHRoZSBvcmRlciBvZiB0aGlzIGRvZXMgbm90IG1hdHRlci4uXG4gICAgICAgIC8vIGJlY2F1c2UgaXQgZG9lcyBhdCB0aGUgbW9tZW50IGNvcyBvZiBnbG9iYWwgdW5pZm9ybXMuXG4gICAgICAgIC8vIHRoZXkgbmVlZCB0byBnZXQgcmVzeW5jZWRcblxuICAgICAgICByZW5kZXJlci5zdGF0ZS5zZXQoZmlsdGVyLnN0YXRlKTtcbiAgICAgICAgcmVuZGVyZXIuc2hhZGVyLmJpbmQoZmlsdGVyKTtcblxuICAgICAgICBpZiAoZmlsdGVyLmxlZ2FjeSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5xdWFkVXYubWFwKGlucHV0Ll9mcmFtZSwgaW5wdXQuZmlsdGVyRnJhbWUpO1xuXG4gICAgICAgICAgICByZW5kZXJlci5nZW9tZXRyeS5iaW5kKHRoaXMucXVhZFV2KTtcbiAgICAgICAgICAgIHJlbmRlcmVyLmdlb21ldHJ5LmRyYXcoRFJBV19NT0RFUy5UUklBTkdMRVMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgcmVuZGVyZXIuZ2VvbWV0cnkuYmluZCh0aGlzLnF1YWQpO1xuICAgICAgICAgICAgcmVuZGVyZXIuZ2VvbWV0cnkuZHJhdyhEUkFXX01PREVTLlRSSUFOR0xFX1NUUklQKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IF9pbnB1dCBub3JtYWxpemVkIGNvb3JkaW5hdGVzXyB0byB0aGlzIG1hdHJpeCB0byBnZXQgX3Nwcml0ZSB0ZXh0dXJlIG5vcm1hbGl6ZWQgY29vcmRpbmF0ZXNfLlxuICAgICAqXG4gICAgICogVXNlIGBvdXRwdXRNYXRyaXggKiB2VGV4dHVyZUNvb3JkYCBpbiB0aGUgc2hhZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gb3V0cHV0TWF0cml4IC0gVGhlIG1hdHJpeCB0byBvdXRwdXQgdG8uXG4gICAgICogQHBhcmFtIHtQSVhJLlNwcml0ZX0gc3ByaXRlIC0gVGhlIHNwcml0ZSB0byBtYXAgdG8uXG4gICAgICogQHJldHVybiB7UElYSS5NYXRyaXh9IFRoZSBtYXBwZWQgbWF0cml4LlxuICAgICAqL1xuICAgIGNhbGN1bGF0ZVNwcml0ZU1hdHJpeChvdXRwdXRNYXRyaXg6IE1hdHJpeCwgc3ByaXRlOiBJU3ByaXRlTWFza1RhcmdldCk6IE1hdHJpeFxuICAgIHtcbiAgICAgICAgY29uc3QgeyBzb3VyY2VGcmFtZSwgZGVzdGluYXRpb25GcmFtZSB9ID0gdGhpcy5hY3RpdmVTdGF0ZTtcbiAgICAgICAgY29uc3QgeyBvcmlnIH0gPSBzcHJpdGUuX3RleHR1cmU7XG4gICAgICAgIGNvbnN0IG1hcHBlZE1hdHJpeCA9IG91dHB1dE1hdHJpeC5zZXQoZGVzdGluYXRpb25GcmFtZS53aWR0aCwgMCwgMCxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0LCBzb3VyY2VGcmFtZS54LCBzb3VyY2VGcmFtZS55KTtcbiAgICAgICAgY29uc3Qgd29ybGRUcmFuc2Zvcm0gPSBzcHJpdGUud29ybGRUcmFuc2Zvcm0uY29weVRvKE1hdHJpeC5URU1QX01BVFJJWCk7XG5cbiAgICAgICAgd29ybGRUcmFuc2Zvcm0uaW52ZXJ0KCk7XG4gICAgICAgIG1hcHBlZE1hdHJpeC5wcmVwZW5kKHdvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgbWFwcGVkTWF0cml4LnNjYWxlKDEuMCAvIG9yaWcud2lkdGgsIDEuMCAvIG9yaWcuaGVpZ2h0KTtcbiAgICAgICAgbWFwcGVkTWF0cml4LnRyYW5zbGF0ZShzcHJpdGUuYW5jaG9yLngsIHNwcml0ZS5hbmNob3IueSk7XG5cbiAgICAgICAgcmV0dXJuIG1hcHBlZE1hdHJpeDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIEZpbHRlciBTeXN0ZW0uXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICAvLyBUaG9zZSB0ZXh0dXJlcyBoYXMgdG8gYmUgZGVzdHJveWVkIGJ5IFJlbmRlclRleHR1cmVTeXN0ZW0gb3IgRnJhbWVidWZmZXJTeXN0ZW1cbiAgICAgICAgdGhpcy50ZXh0dXJlUG9vbC5jbGVhcihmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIFBvd2VyLW9mLVR3byByZW5kZXIgdGV4dHVyZSBvciBmdWxsU2NyZWVuIHRleHR1cmVcbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluV2lkdGggLSBUaGUgbWluaW11bSB3aWR0aCBvZiB0aGUgcmVuZGVyIHRleHR1cmUgaW4gcmVhbCBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pbkhlaWdodCAtIFRoZSBtaW5pbXVtIGhlaWdodCBvZiB0aGUgcmVuZGVyIHRleHR1cmUgaW4gcmVhbCBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyZXNvbHV0aW9uPTFdIC0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHJlbmRlciB0ZXh0dXJlLlxuICAgICAqIEByZXR1cm4ge1BJWEkuUmVuZGVyVGV4dHVyZX0gVGhlIG5ldyByZW5kZXIgdGV4dHVyZS5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgZ2V0T3B0aW1hbEZpbHRlclRleHR1cmUobWluV2lkdGg6IG51bWJlciwgbWluSGVpZ2h0OiBudW1iZXIsIHJlc29sdXRpb24gPSAxKTogUmVuZGVyVGV4dHVyZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dHVyZVBvb2wuZ2V0T3B0aW1hbFRleHR1cmUobWluV2lkdGgsIG1pbkhlaWdodCwgcmVzb2x1dGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBleHRyYSByZW5kZXIgdGV4dHVyZSB0byB1c2UgaW5zaWRlIGN1cnJlbnQgZmlsdGVyXG4gICAgICogVG8gYmUgY29tcGxpYW50IHdpdGggb2xkZXIgZmlsdGVycywgeW91IGNhbiB1c2UgcGFyYW1zIGluIGFueSBvcmRlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlclRleHR1cmV9IFtpbnB1dF0gLSByZW5kZXJUZXh0dXJlIGZyb20gd2hpY2ggc2l6ZSBhbmQgcmVzb2x1dGlvbiB3aWxsIGJlIGNvcGllZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gLSBvdmVycmlkZSByZXNvbHV0aW9uIG9mIHRoZSByZW5kZXJUZXh0dXJlXG4gICAgICogQHJldHVybnMge1BJWEkuUmVuZGVyVGV4dHVyZX1cbiAgICAgKi9cbiAgICBnZXRGaWx0ZXJUZXh0dXJlKGlucHV0PzogUmVuZGVyVGV4dHVyZSwgcmVzb2x1dGlvbj86IG51bWJlcik6IFJlbmRlclRleHR1cmVcbiAgICB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzd2FwID0gaW5wdXQ7XG5cbiAgICAgICAgICAgIGlucHV0ID0gcmVzb2x1dGlvbiBhcyBhbnk7XG4gICAgICAgICAgICByZXNvbHV0aW9uID0gc3dhcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0ID0gaW5wdXQgfHwgdGhpcy5hY3RpdmVTdGF0ZS5yZW5kZXJUZXh0dXJlO1xuXG4gICAgICAgIGNvbnN0IGZpbHRlclRleHR1cmUgPSB0aGlzLnRleHR1cmVQb29sLmdldE9wdGltYWxUZXh0dXJlKGlucHV0LndpZHRoLCBpbnB1dC5oZWlnaHQsIHJlc29sdXRpb24gfHwgaW5wdXQucmVzb2x1dGlvbik7XG5cbiAgICAgICAgZmlsdGVyVGV4dHVyZS5maWx0ZXJGcmFtZSA9IGlucHV0LmZpbHRlckZyYW1lO1xuXG4gICAgICAgIHJldHVybiBmaWx0ZXJUZXh0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZyZWVzIGEgcmVuZGVyIHRleHR1cmUgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlclRleHR1cmV9IHJlbmRlclRleHR1cmUgLSBUaGUgcmVuZGVyVGFyZ2V0IHRvIGZyZWVcbiAgICAgKi9cbiAgICByZXR1cm5GaWx0ZXJUZXh0dXJlKHJlbmRlclRleHR1cmU6IFJlbmRlclRleHR1cmUpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnRleHR1cmVQb29sLnJldHVyblRleHR1cmUocmVuZGVyVGV4dHVyZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW1wdGllcyB0aGUgdGV4dHVyZSBwb29sLlxuICAgICAqL1xuICAgIGVtcHR5UG9vbCgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnRleHR1cmVQb29sLmNsZWFyKHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNhbGxzIGB0ZXh0dXJlUG9vbC5yZXNpemUoKWAsIGFmZmVjdHMgZnVsbFNjcmVlbiByZW5kZXJUZXh0dXJlc1xuICAgICAqL1xuICAgIHJlc2l6ZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnRleHR1cmVQb29sLnNldFNjcmVlblNpemUodGhpcy5yZW5kZXJlci52aWV3KTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uL1JlbmRlcmVyJztcblxuLyoqXG4gKiBCYXNlIGZvciBhIGNvbW1vbiBvYmplY3QgcmVuZGVyZXIgdGhhdCBjYW4gYmUgdXNlZCBhcyBhXG4gKiBzeXN0ZW0gcmVuZGVyZXIgcGx1Z2luLlxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5TeXN0ZW1cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBPYmplY3RSZW5kZXJlclxue1xuICAgIHByb3RlY3RlZCByZW5kZXJlcjogUmVuZGVyZXI7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIG1hbmFnZXIgd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBSZW5kZXJlcilcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVuZGVyZXIgdGhpcyBtYW5hZ2VyIHdvcmtzIGZvci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5SZW5kZXJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdHViIG1ldGhvZCB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIGVtcHR5IHRoZSBjdXJyZW50XG4gICAgICogYmF0Y2ggYnkgcmVuZGVyaW5nIG9iamVjdHMgbm93LlxuICAgICAqL1xuICAgIGZsdXNoKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIGZsdXNoIVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyaWMgZGVzdHJ1Y3Rpb24gbWV0aG9kIHRoYXQgZnJlZXMgYWxsIHJlc291cmNlcy4gVGhpc1xuICAgICAqIHNob3VsZCBiZSBjYWxsZWQgYnkgc3ViY2xhc3Nlcy5cbiAgICAgKi9cbiAgICBkZXN0cm95KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0dWIgbWV0aG9kIHRoYXQgaW5pdGlhbGl6ZXMgYW55IHN0YXRlIHJlcXVpcmVkIGJlZm9yZVxuICAgICAqIHJlbmRlcmluZyBzdGFydHMuIEl0IGlzIGRpZmZlcmVudCBmcm9tIHRoZSBgcHJlcmVuZGVyYFxuICAgICAqIHNpZ25hbCwgd2hpY2ggb2NjdXJzIGV2ZXJ5IGZyYW1lLCBpbiB0aGF0IGl0IGlzIGNhbGxlZFxuICAgICAqIHdoZW5ldmVyIGFuIG9iamVjdCByZXF1ZXN0cyBfdGhpc18gcmVuZGVyZXIgc3BlY2lmaWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXJ0KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIHNldCB0aGUgc2hhZGVyLi5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgcmVuZGVyZXIuIEl0IHNob3VsZCBmcmVlIHVwIGFueSBzdGF0ZSBhbmRcbiAgICAgKiBiZWNvbWUgZG9ybWFudC5cbiAgICAgKi9cbiAgICBzdG9wKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLZWVwcyB0aGUgb2JqZWN0IHRvIHJlbmRlci4gSXQgZG9lc24ndCBoYXZlIHRvIGJlXG4gICAgICogcmVuZGVyZWQgaW1tZWRpYXRlbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gb2JqZWN0IC0gVGhlIG9iamVjdCB0byByZW5kZXIuXG4gICAgICovXG4gICAgcmVuZGVyKF9vYmplY3Q6IGFueSk6IHZvaWQgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzXG4gICAge1xuICAgICAgICAvLyByZW5kZXIgdGhlIG9iamVjdFxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tICcuLi9TeXN0ZW0nO1xuaW1wb3J0IHsgT2JqZWN0UmVuZGVyZXIgfSBmcm9tICcuL09iamVjdFJlbmRlcmVyJztcblxuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uL1JlbmRlcmVyJztcbmltcG9ydCB0eXBlIHsgQmFzZVRleHR1cmUgfSBmcm9tICcuLi90ZXh0dXJlcy9CYXNlVGV4dHVyZSc7XG5pbXBvcnQgdHlwZSB7IEJhdGNoVGV4dHVyZUFycmF5IH0gZnJvbSAnLi9CYXRjaFRleHR1cmVBcnJheSc7XG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSBiYXRjaGluZy5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuU3lzdGVtXG4gKiBAbWVtYmVyb2YgUElYSS5zeXN0ZW1zXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXRjaFN5c3RlbSBleHRlbmRzIFN5c3RlbVxue1xuICAgIHB1YmxpYyByZWFkb25seSBlbXB0eVJlbmRlcmVyOiBPYmplY3RSZW5kZXJlcjtcbiAgICBwdWJsaWMgY3VycmVudFJlbmRlcmVyOiBPYmplY3RSZW5kZXJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBSZW5kZXJlcilcbiAgICB7XG4gICAgICAgIHN1cGVyKHJlbmRlcmVyKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gZW1wdHkgcmVuZGVyZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuT2JqZWN0UmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVtcHR5UmVuZGVyZXIgPSBuZXcgT2JqZWN0UmVuZGVyZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudGx5IGFjdGl2ZSBPYmplY3RSZW5kZXJlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5PYmplY3RSZW5kZXJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudFJlbmRlcmVyID0gdGhpcy5lbXB0eVJlbmRlcmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGN1cnJlbnQgcmVuZGVyZXIgdG8gdGhlIG9uZSBnaXZlbiBpbiBwYXJhbWV0ZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5PYmplY3RSZW5kZXJlcn0gb2JqZWN0UmVuZGVyZXIgLSBUaGUgb2JqZWN0IHJlbmRlcmVyIHRvIHVzZS5cbiAgICAgKi9cbiAgICBzZXRPYmplY3RSZW5kZXJlcihvYmplY3RSZW5kZXJlcjogT2JqZWN0UmVuZGVyZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50UmVuZGVyZXIgPT09IG9iamVjdFJlbmRlcmVyKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmN1cnJlbnRSZW5kZXJlci5zdG9wKCk7XG4gICAgICAgIHRoaXMuY3VycmVudFJlbmRlcmVyID0gb2JqZWN0UmVuZGVyZXI7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50UmVuZGVyZXIuc3RhcnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgaWYgeW91IHdpc2ggdG8gZG8gc29tZSBjdXN0b20gcmVuZGVyaW5nXG4gICAgICogSXQgd2lsbCBiYXNpY2FsbHkgcmVuZGVyIGFueXRoaW5nIHRoYXQgbWF5IGJlIGJhdGNoZWQgdXAgc3VjaCBhcyBzcHJpdGVzXG4gICAgICovXG4gICAgZmx1c2goKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5zZXRPYmplY3RSZW5kZXJlcih0aGlzLmVtcHR5UmVuZGVyZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBzeXN0ZW0gdG8gYW4gZW1wdHkgcmVuZGVyZXJcbiAgICAgKi9cbiAgICByZXNldCgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnNldE9iamVjdFJlbmRlcmVyKHRoaXMuZW1wdHlSZW5kZXJlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZHkgZnVuY3Rpb24gZm9yIGJhdGNoIHJlbmRlcmVyczogY29waWVzIGJvdW5kIHRleHR1cmVzIGluIGZpcnN0IG1heFRleHR1cmVzIGxvY2F0aW9ucyB0byBhcnJheVxuICAgICAqIHNldHMgYWN0dWFsIF9iYXRjaExvY2F0aW9uIGZvciB0aGVtXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmVbXX0gLSBhcnIgY29weSBkZXN0aW5hdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUZXh0dXJlcyAtIG51bWJlciBvZiBjb3BpZWQgZWxlbWVudHNcbiAgICAgKi9cbiAgICBjb3B5Qm91bmRUZXh0dXJlcyhhcnI6IEJhc2VUZXh0dXJlW10sIG1heFRleHR1cmVzOiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB7IGJvdW5kVGV4dHVyZXMgfSA9IHRoaXMucmVuZGVyZXIudGV4dHVyZTtcblxuICAgICAgICBmb3IgKGxldCBpID0gbWF4VGV4dHVyZXMgLSAxOyBpID49IDA7IC0taSlcbiAgICAgICAge1xuICAgICAgICAgICAgYXJyW2ldID0gYm91bmRUZXh0dXJlc1tpXSB8fCBudWxsO1xuICAgICAgICAgICAgaWYgKGFycltpXSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhcnJbaV0uX2JhdGNoTG9jYXRpb24gPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXNzaWducyBiYXRjaCBsb2NhdGlvbnMgdG8gdGV4dHVyZXMgaW4gYXJyYXkgYmFzZWQgb24gYm91bmRUZXh0dXJlcyBzdGF0ZS5cbiAgICAgKiBBbGwgdGV4dHVyZXMgaW4gdGV4QXJyYXkgc2hvdWxkIGhhdmUgYF9iYXRjaEVuYWJsZWQgPSBfYmF0Y2hJZGAsXG4gICAgICogYW5kIHRoZWlyIGNvdW50IHNob3VsZCBiZSBsZXNzIHRoYW4gYG1heFRleHR1cmVzYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5CYXRjaFRleHR1cmVBcnJheX0gdGV4QXJyYXkgLSB0ZXh0dXJlcyB0byBib3VuZFxuICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZVtdfSBib3VuZFRleHR1cmVzIC0gY3VycmVudCBzdGF0ZSBvZiBib3VuZCB0ZXh0dXJlc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiYXRjaElkIC0gbWFya2VyIGZvciBfYmF0Y2hFbmFibGVkIHBhcmFtIG9mIHRleHR1cmVzIGluIHRleEFycmF5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFRleHR1cmVzIC0gbnVtYmVyIG9mIHRleHR1cmUgbG9jYXRpb25zIHRvIG1hbmlwdWxhdGVcbiAgICAgKi9cbiAgICBib3VuZEFycmF5KHRleEFycmF5OiBCYXRjaFRleHR1cmVBcnJheSwgYm91bmRUZXh0dXJlczogQXJyYXk8QmFzZVRleHR1cmU+LFxuICAgICAgICBiYXRjaElkOiBudW1iZXIsIG1heFRleHR1cmVzOiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB7IGVsZW1lbnRzLCBpZHMsIGNvdW50IH0gPSB0ZXhBcnJheTtcbiAgICAgICAgbGV0IGogPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdGV4ID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgICBjb25zdCBsb2MgPSB0ZXguX2JhdGNoTG9jYXRpb247XG5cbiAgICAgICAgICAgIGlmIChsb2MgPj0gMCAmJiBsb2MgPCBtYXhUZXh0dXJlc1xuICAgICAgICAgICAgICAgICYmIGJvdW5kVGV4dHVyZXNbbG9jXSA9PT0gdGV4KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkc1tpXSA9IGxvYztcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhUZXh0dXJlcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBib3VuZCA9IGJvdW5kVGV4dHVyZXNbal07XG5cbiAgICAgICAgICAgICAgICBpZiAoYm91bmQgJiYgYm91bmQuX2JhdGNoRW5hYmxlZCA9PT0gYmF0Y2hJZFxuICAgICAgICAgICAgICAgICAgICAmJiBib3VuZC5fYmF0Y2hMb2NhdGlvbiA9PT0gailcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWRzW2ldID0gajtcbiAgICAgICAgICAgICAgICB0ZXguX2JhdGNoTG9jYXRpb24gPSBqO1xuICAgICAgICAgICAgICAgIGJvdW5kVGV4dHVyZXNbal0gPSB0ZXg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgRU5WIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB7IFN5c3RlbSB9IGZyb20gJy4uL1N5c3RlbSc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJy4uL3NldHRpbmdzJztcblxuaW1wb3J0IHR5cGUgeyBJUmVuZGVyaW5nQ29udGV4dCB9IGZyb20gJy4uL0lSZW5kZXJpbmdDb250ZXh0JztcbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi9SZW5kZXJlcic7XG5cbmxldCBDT05URVhUX1VJRF9DT1VOVEVSID0gMDtcblxuZXhwb3J0IGludGVyZmFjZSBJU3VwcG9ydERpY3Qge1xuICAgIHVpbnQzMkluZGljZXM6IGJvb2xlYW47XG59XG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSB0aGUgY29udGV4dC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuU3lzdGVtXG4gKiBAbWVtYmVyb2YgUElYSS5zeXN0ZW1zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb250ZXh0U3lzdGVtIGV4dGVuZHMgU3lzdGVtXG57XG4gICAgcHVibGljIHdlYkdMVmVyc2lvbjogbnVtYmVyO1xuICAgIHJlYWRvbmx5IHN1cHBvcnRzOiBJU3VwcG9ydERpY3Q7XG5cbiAgICBwcm90ZWN0ZWQgQ09OVEVYVF9VSUQ6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgZ2w6IElSZW5kZXJpbmdDb250ZXh0O1xuICAgIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuICAgIGV4dGVuc2lvbnM6XG4gICAge1xuICAgICAgICBkcmF3QnVmZmVycz86IFdFQkdMX2RyYXdfYnVmZmVycztcbiAgICAgICAgZGVwdGhUZXh0dXJlPzogT0VTX3RleHR1cmVfZmxvYXQ7XG4gICAgICAgIGxvc2VDb250ZXh0PzogV0VCR0xfbG9zZV9jb250ZXh0O1xuICAgICAgICB2ZXJ0ZXhBcnJheU9iamVjdD86IE9FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0O1xuICAgICAgICBhbmlzb3Ryb3BpY0ZpbHRlcmluZz86IEVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYztcbiAgICAgICAgdWludDMyRWxlbWVudEluZGV4PzogT0VTX2VsZW1lbnRfaW5kZXhfdWludDtcbiAgICAgICAgZmxvYXRUZXh0dXJlPzogT0VTX3RleHR1cmVfZmxvYXQ7XG4gICAgICAgIGZsb2F0VGV4dHVyZUxpbmVhcj86IE9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhcjtcbiAgICAgICAgdGV4dHVyZUhhbGZGbG9hdD86IE9FU190ZXh0dXJlX2hhbGZfZmxvYXQ7XG4gICAgICAgIHRleHR1cmVIYWxmRmxvYXRMaW5lYXI/OiBPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcjtcbiAgICAgICAgY29sb3JCdWZmZXJGbG9hdD86IFdFQkdMX2NvbG9yX2J1ZmZlcl9mbG9hdDtcbiAgICB9O1xuICAgIC8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgU3lzdGVtIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogUmVuZGVyZXIpXG4gICAge1xuICAgICAgICBzdXBlcihyZW5kZXJlcik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVpdGhlciAxIG9yIDIgdG8gcmVmbGVjdCB0aGUgV2ViR0wgdmVyc2lvbiBiZWluZyB1c2VkXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndlYkdMVmVyc2lvbiA9IDE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4dGVuc2lvbnMgYmVpbmcgdXNlZFxuICAgICAgICAgKiBAbWVtYmVyIHtvYmplY3R9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAcHJvcGVydHkge1dFQkdMX2RyYXdfYnVmZmVyc30gZHJhd0J1ZmZlcnMgLSBXZWJHTCB2MSBleHRlbnNpb25cbiAgICAgICAgICogQHByb3BlcnR5IHtXRUJHTF9kZXB0aF90ZXh0dXJlfSBkZXB0aFRleHR1cmUgLSBXZWJHTCB2MSBleHRlbnNpb25cbiAgICAgICAgICogQHByb3BlcnR5IHtPRVNfdGV4dHVyZV9mbG9hdH0gZmxvYXRUZXh0dXJlIC0gV2ViR0wgdjEgZXh0ZW5zaW9uXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7V0VCR0xfbG9zZV9jb250ZXh0fSBsb3NlQ29udGV4dCAtIFdlYkdMIHYxIGV4dGVuc2lvblxuICAgICAgICAgKiBAcHJvcGVydHkge09FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0fSB2ZXJ0ZXhBcnJheU9iamVjdCAtIFdlYkdMIHYxIGV4dGVuc2lvblxuICAgICAgICAgKiBAcHJvcGVydHkge0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY30gYW5pc290cm9waWNGaWx0ZXJpbmcgLSBXZWJHTCB2MSBhbmQgdjIgZXh0ZW5zaW9uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSB7fTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRmVhdHVyZXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgY29udGV4dFxuICAgICAgICAgKiBAbWVtYmVyIHtvYmplY3R9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IHVpbnQzMkluZGljZXMgLSBTdXBwb3J0cyBvZiAzMi1iaXQgaW5kaWNlcyBidWZmZXJcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3VwcG9ydHMgPSB7XG4gICAgICAgICAgICB1aW50MzJJbmRpY2VzOiBmYWxzZSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBCaW5kIGZ1bmN0aW9uc1xuICAgICAgICB0aGlzLmhhbmRsZUNvbnRleHRMb3N0ID0gdGhpcy5oYW5kbGVDb250ZXh0TG9zdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUNvbnRleHRSZXN0b3JlZCA9IHRoaXMuaGFuZGxlQ29udGV4dFJlc3RvcmVkLmJpbmQodGhpcyk7XG5cbiAgICAgICAgKHJlbmRlcmVyLnZpZXcgYXMgYW55KS5hZGRFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRsb3N0JywgdGhpcy5oYW5kbGVDb250ZXh0TG9zdCwgZmFsc2UpO1xuICAgICAgICByZW5kZXJlci52aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgdGhpcy5oYW5kbGVDb250ZXh0UmVzdG9yZWQsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIGNvbnRleHQgaXMgbG9zdFxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IGlzTG9zdCgpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gKCF0aGlzLmdsIHx8IHRoaXMuZ2wuaXNDb250ZXh0TG9zdCgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGhlIGNvbnRleHQgY2hhbmdlIGV2ZW50XG4gICAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIC0gbmV3IHdlYmdsIGNvbnRleHRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY29udGV4dENoYW5nZShnbDogSVJlbmRlcmluZ0NvbnRleHQpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmdsID0gZ2w7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZ2wgPSBnbDtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5DT05URVhUX1VJRCA9IENPTlRFWFRfVUlEX0NPVU5URVIrKztcblxuICAgICAgICAvLyByZXN0b3JlIGEgY29udGV4dCBpZiBpdCB3YXMgcHJldmlvdXNseSBsb3N0XG4gICAgICAgIGlmIChnbC5pc0NvbnRleHRMb3N0KCkgJiYgZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9sb3NlX2NvbnRleHQnKSlcbiAgICAgICAge1xuICAgICAgICAgICAgZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9sb3NlX2NvbnRleHQnKS5yZXN0b3JlQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgY29udGV4dFxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCAtIFdlYkdMIGNvbnRleHRcbiAgICAgKi9cbiAgICBpbml0RnJvbUNvbnRleHQoZ2w6IElSZW5kZXJpbmdDb250ZXh0KTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5nbCA9IGdsO1xuICAgICAgICB0aGlzLnZhbGlkYXRlQ29udGV4dChnbCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZ2wgPSBnbDtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5DT05URVhUX1VJRCA9IENPTlRFWFRfVUlEX0NPVU5URVIrKztcbiAgICAgICAgdGhpcy5yZW5kZXJlci5ydW5uZXJzLmNvbnRleHRDaGFuZ2UuZW1pdChnbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBmcm9tIGNvbnRleHQgb3B0aW9uc1xuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hUTUxDYW52YXNFbGVtZW50L2dldENvbnRleHRcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIGNvbnRleHQgYXR0cmlidXRlc1xuICAgICAqL1xuICAgIGluaXRGcm9tT3B0aW9ucyhvcHRpb25zOiBXZWJHTENvbnRleHRBdHRyaWJ1dGVzKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLmNyZWF0ZUNvbnRleHQodGhpcy5yZW5kZXJlci52aWV3LCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLmluaXRGcm9tQ29udGV4dChnbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGNsYXNzIHRvIGNyZWF0ZSBhIFdlYkdMIENvbnRleHRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYW52YXMge0hUTUxDYW52YXNFbGVtZW50fSB0aGUgY2FudmFzIGVsZW1lbnQgdGhhdCB3ZSB3aWxsIGdldCB0aGUgY29udGV4dCBmcm9tXG4gICAgICogQHBhcmFtIG9wdGlvbnMge29iamVjdH0gQW4gb3B0aW9ucyBvYmplY3QgdGhhdCBnZXRzIHBhc3NlZCBpbiB0byB0aGUgY2FudmFzIGVsZW1lbnQgY29udGFpbmluZyB0aGUgY29udGV4dCBhdHRyaWJ1dGVzXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9BUEkvSFRNTENhbnZhc0VsZW1lbnQvZ2V0Q29udGV4dFxuICAgICAqIEByZXR1cm4ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gdGhlIFdlYkdMIGNvbnRleHRcbiAgICAgKi9cbiAgICBjcmVhdGVDb250ZXh0KGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIG9wdGlvbnM6IFdlYkdMQ29udGV4dEF0dHJpYnV0ZXMpOiBJUmVuZGVyaW5nQ29udGV4dFxuICAgIHtcbiAgICAgICAgbGV0IGdsO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5QUkVGRVJfRU5WID49IEVOVi5XRUJHTDIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsMicsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdsKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLndlYkdMVmVyc2lvbiA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLndlYkdMVmVyc2lvbiA9IDE7XG5cbiAgICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJywgb3B0aW9ucylcbiAgICAgICAgICAgIHx8IGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgaWYgKCFnbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBmYWlsLCBub3QgYWJsZSB0byBnZXQgYSBjb250ZXh0XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJHTC4gVHJ5IHVzaW5nIHRoZSBjYW52YXMgcmVuZGVyZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2wgPSBnbCBhcyBJUmVuZGVyaW5nQ29udGV4dDtcblxuICAgICAgICB0aGlzLmdldEV4dGVuc2lvbnMoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5nbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBdXRvLXBvcHVsYXRlIHRoZSBleHRlbnNpb25zXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGdldEV4dGVuc2lvbnMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gdGltZSB0byBzZXQgdXAgZGVmYXVsdCBleHRlbnNpb25zIHRoYXQgUGl4aSB1c2VzLlxuICAgICAgICBjb25zdCB7IGdsIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLndlYkdMVmVyc2lvbiA9PT0gMSlcbiAgICAgICAge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmV4dGVuc2lvbnMsIHtcbiAgICAgICAgICAgICAgICBkcmF3QnVmZmVyczogZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kcmF3X2J1ZmZlcnMnKSxcbiAgICAgICAgICAgICAgICBkZXB0aFRleHR1cmU6IGdsLmdldEV4dGVuc2lvbignV0VCR0xfZGVwdGhfdGV4dHVyZScpLFxuICAgICAgICAgICAgICAgIGxvc2VDb250ZXh0OiBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2xvc2VfY29udGV4dCcpLFxuICAgICAgICAgICAgICAgIHZlcnRleEFycmF5T2JqZWN0OiBnbC5nZXRFeHRlbnNpb24oJ09FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0JylcbiAgICAgICAgICAgICAgICAgICAgfHwgZ2wuZ2V0RXh0ZW5zaW9uKCdNT1pfT0VTX3ZlcnRleF9hcnJheV9vYmplY3QnKVxuICAgICAgICAgICAgICAgICAgICB8fCBnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9PRVNfdmVydGV4X2FycmF5X29iamVjdCcpLFxuICAgICAgICAgICAgICAgIGFuaXNvdHJvcGljRmlsdGVyaW5nOiBnbC5nZXRFeHRlbnNpb24oJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpLFxuICAgICAgICAgICAgICAgIHVpbnQzMkVsZW1lbnRJbmRleDogZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfZWxlbWVudF9pbmRleF91aW50JyksXG4gICAgICAgICAgICAgICAgLy8gRmxvYXRzIGFuZCBoYWxmLWZsb2F0c1xuICAgICAgICAgICAgICAgIGZsb2F0VGV4dHVyZTogZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdCcpLFxuICAgICAgICAgICAgICAgIGZsb2F0VGV4dHVyZUxpbmVhcjogZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInKSxcbiAgICAgICAgICAgICAgICB0ZXh0dXJlSGFsZkZsb2F0OiBnbC5nZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnKSxcbiAgICAgICAgICAgICAgICB0ZXh0dXJlSGFsZkZsb2F0TGluZWFyOiBnbC5nZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyJyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLndlYkdMVmVyc2lvbiA9PT0gMilcbiAgICAgICAge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmV4dGVuc2lvbnMsIHtcbiAgICAgICAgICAgICAgICBhbmlzb3Ryb3BpY0ZpbHRlcmluZzogZ2wuZ2V0RXh0ZW5zaW9uKCdFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKSxcbiAgICAgICAgICAgICAgICAvLyBGbG9hdHMgYW5kIGhhbGYtZmxvYXRzXG4gICAgICAgICAgICAgICAgY29sb3JCdWZmZXJGbG9hdDogZ2wuZ2V0RXh0ZW5zaW9uKCdFWFRfY29sb3JfYnVmZmVyX2Zsb2F0JyksXG4gICAgICAgICAgICAgICAgZmxvYXRUZXh0dXJlTGluZWFyOiBnbC5nZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2Zsb2F0X2xpbmVhcicpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGEgbG9zdCB3ZWJnbCBjb250ZXh0XG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtXZWJHTENvbnRleHRFdmVudH0gZXZlbnQgLSBUaGUgY29udGV4dCBsb3N0IGV2ZW50LlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBoYW5kbGVDb250ZXh0TG9zdChldmVudDogV2ViR0xDb250ZXh0RXZlbnQpOiB2b2lkXG4gICAge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgYSByZXN0b3JlZCB3ZWJnbCBjb250ZXh0XG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGhhbmRsZUNvbnRleHRSZXN0b3JlZCgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJ1bm5lcnMuY29udGV4dENoYW5nZS5lbWl0KHRoaXMuZ2wpO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMucmVuZGVyZXIudmlldztcblxuICAgICAgICAvLyByZW1vdmUgbGlzdGVuZXJzXG4gICAgICAgICh2aWV3IGFzIGFueSkucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2ViZ2xjb250ZXh0bG9zdCcsIHRoaXMuaGFuZGxlQ29udGV4dExvc3QpO1xuICAgICAgICB2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgdGhpcy5oYW5kbGVDb250ZXh0UmVzdG9yZWQpO1xuXG4gICAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbShudWxsKTtcblxuICAgICAgICBpZiAodGhpcy5leHRlbnNpb25zLmxvc2VDb250ZXh0KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmV4dGVuc2lvbnMubG9zZUNvbnRleHQubG9zZUNvbnRleHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSB0aGUgcG9zdC1yZW5kZXIgcnVubmVyIGV2ZW50XG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHBvc3RyZW5kZXIoKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZXIucmVuZGVyaW5nVG9TY3JlZW4pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZ2wuZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIGNvbnRleHRcbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgLSBSZW5kZXIgY29udGV4dFxuICAgICAqL1xuICAgIHByb3RlY3RlZCB2YWxpZGF0ZUNvbnRleHQoZ2w6IElSZW5kZXJpbmdDb250ZXh0KTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IGdsLmdldENvbnRleHRBdHRyaWJ1dGVzKCk7XG5cbiAgICAgICAgY29uc3QgaXNXZWJHbDIgPSAnV2ViR0wyUmVuZGVyaW5nQ29udGV4dCcgaW4gd2luZG93ICYmIGdsIGluc3RhbmNlb2Ygd2luZG93LldlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XG5cbiAgICAgICAgaWYgKGlzV2ViR2wyKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLndlYkdMVmVyc2lvbiA9IDI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGlzIGlzIGdvaW5nIHRvIGJlIGZhaXJseSBzaW1wbGUgZm9yIG5vdy4uIGJ1dCBhdCBsZWFzdCB3ZSBoYXZlIHJvb20gdG8gZ3JvdyFcbiAgICAgICAgaWYgKCFhdHRyaWJ1dGVzLnN0ZW5jaWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4sIG5vLWNvbnNvbGUgKi9cbiAgICAgICAgICAgIGNvbnNvbGUud2FybignUHJvdmlkZWQgV2ViR0wgY29udGV4dCBkb2VzIG5vdCBoYXZlIGEgc3RlbmNpbCBidWZmZXIsIG1hc2tzIG1heSBub3QgcmVuZGVyIGNvcnJlY3RseScpO1xuICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBtYXgtbGVuLCBuby1jb25zb2xlICovXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoYXN1aW50MzIgPSBpc1dlYkdsMiB8fCAhIShnbCBhcyBXZWJHTFJlbmRlcmluZ0NvbnRleHQpLmdldEV4dGVuc2lvbignT0VTX2VsZW1lbnRfaW5kZXhfdWludCcpO1xuXG4gICAgICAgIHRoaXMuc3VwcG9ydHMudWludDMySW5kaWNlcyA9IGhhc3VpbnQzMjtcblxuICAgICAgICBpZiAoIWhhc3VpbnQzMilcbiAgICAgICAge1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiwgbm8tY29uc29sZSAqL1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdQcm92aWRlZCBXZWJHTCBjb250ZXh0IGRvZXMgbm90IHN1cHBvcnQgMzIgaW5kZXggYnVmZmVyLCBjb21wbGV4IGdyYXBoaWNzIG1heSBub3QgcmVuZGVyIGNvcnJlY3RseScpO1xuICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBtYXgtbGVuLCBuby1jb25zb2xlICovXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTVNBQV9RVUFMSVRZIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcblxuaW1wb3J0IHR5cGUgeyBGcmFtZWJ1ZmZlciB9IGZyb20gJy4vRnJhbWVidWZmZXInO1xuXG4vKipcbiAqIEludGVybmFsIGZyYW1lYnVmZmVyIGZvciBXZWJHTCBjb250ZXh0XG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBHTEZyYW1lYnVmZmVyXG57XG4gICAgcHVibGljIGZyYW1lYnVmZmVyOiBXZWJHTEZyYW1lYnVmZmVyO1xuICAgIHB1YmxpYyBzdGVuY2lsOiBXZWJHTFJlbmRlcmJ1ZmZlcjtcbiAgICBwdWJsaWMgbXVsdGlzYW1wbGU6IE1TQUFfUVVBTElUWTtcbiAgICBwdWJsaWMgbXNhYUJ1ZmZlcjogV2ViR0xSZW5kZXJidWZmZXI7XG4gICAgcHVibGljIGJsaXRGcmFtZWJ1ZmZlcjogRnJhbWVidWZmZXI7XG4gICAgZGlydHlJZDogbnVtYmVyO1xuICAgIGRpcnR5Rm9ybWF0OiBudW1iZXI7XG4gICAgZGlydHlTaXplOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihmcmFtZWJ1ZmZlcjogV2ViR0xUZXh0dXJlKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBXZWJHTCBmcmFtZWJ1ZmZlclxuICAgICAgICAgKiBAbWVtYmVyIHtXZWJHTEZyYW1lYnVmZmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mcmFtZWJ1ZmZlciA9IGZyYW1lYnVmZmVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogc3RlbmNpbCtkZXB0aCAsIHVzdWFsbHkgY29zdHMgMzJiaXRzIHBlciBwaXhlbFxuICAgICAgICAgKiBAbWVtYmVyIHtXZWJHTFJlbmRlcmJ1ZmZlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RlbmNpbCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBsYXRlc3Qga25vd24gdmVyc2lvbiBvZiBmcmFtZWJ1ZmZlclxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlydHlJZCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBsYXRlc3Qga25vd24gdmVyc2lvbiBvZiBmcmFtZWJ1ZmZlciBmb3JtYXRcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpcnR5Rm9ybWF0ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGxhdGVzdCBrbm93biB2ZXJzaW9uIG9mIGZyYW1lYnVmZmVyIHNpemVcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpcnR5U2l6ZSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVjdGVkIEFBIHNhbXBsZXMgbnVtYmVyXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuTVNBQV9RVUFMSVRZfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdWx0aXNhbXBsZSA9IE1TQUFfUVVBTElUWS5OT05FO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbiBjYXNlIE1TQUEsIHdlIHVzZSB0aGlzIFJlbmRlcmJ1ZmZlciBpbnN0ZWFkIG9mIGNvbG9yVGV4dHVyZXNbMF0gd2hlbiB3ZSB3cml0ZSBpbmZvXG4gICAgICAgICAqIEBtZW1iZXIge1dlYkdMUmVuZGVyYnVmZmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tc2FhQnVmZmVyID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW4gY2FzZSB3ZSB1c2UgTVNBQSwgdGhpcyBpcyBhY3R1YWwgZnJhbWVidWZmZXIgdGhhdCBoYXMgY29sb3JUZXh0dXJlc1swXVxuICAgICAgICAgKiBUaGUgY29udGVudHMgb2YgdGhhdCBmcmFtZWJ1ZmZlciBhcmUgcmVhZCB3aGVuIHdlIHVzZSB0aGF0IHJlbmRlclRleHR1cmUgaW4gc3ByaXRlc1xuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkZyYW1lYnVmZmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ibGl0RnJhbWVidWZmZXIgPSBudWxsO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tICcuLi9TeXN0ZW0nO1xuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgeyBFTlYsIEJVRkZFUl9CSVRTLCBNU0FBX1FVQUxJVFkgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tICcuLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBGcmFtZWJ1ZmZlciB9IGZyb20gJy4vRnJhbWVidWZmZXInO1xuaW1wb3J0IHsgR0xGcmFtZWJ1ZmZlciB9IGZyb20gJy4vR0xGcmFtZWJ1ZmZlcic7XG5cbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi9SZW5kZXJlcic7XG5pbXBvcnQgdHlwZSB7IElSZW5kZXJpbmdDb250ZXh0IH0gZnJvbSAnLi4vSVJlbmRlcmluZ0NvbnRleHQnO1xuXG5jb25zdCB0ZW1wUmVjdGFuZ2xlID0gbmV3IFJlY3RhbmdsZSgpO1xuXG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSBmcmFtZWJ1ZmZlcnMuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLlN5c3RlbVxuICogQG1lbWJlcm9mIFBJWEkuc3lzdGVtc1xuICovXG5leHBvcnQgY2xhc3MgRnJhbWVidWZmZXJTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW1cbntcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWFuYWdlZEZyYW1lYnVmZmVyczogQXJyYXk8RnJhbWVidWZmZXI+O1xuICAgIHB1YmxpYyBjdXJyZW50OiBGcmFtZWJ1ZmZlcjtcbiAgICBwdWJsaWMgdmlld3BvcnQ6IFJlY3RhbmdsZTtcbiAgICBwdWJsaWMgaGFzTVJUOiBib29sZWFuO1xuICAgIHB1YmxpYyB3cml0ZURlcHRoVGV4dHVyZTogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgQ09OVEVYVF9VSUQ6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgZ2w6IElSZW5kZXJpbmdDb250ZXh0O1xuICAgIHByb3RlY3RlZCB1bmtub3duRnJhbWVidWZmZXI6IEZyYW1lYnVmZmVyO1xuICAgIHByb3RlY3RlZCBtc2FhU2FtcGxlczogQXJyYXk8bnVtYmVyPjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBSZW5kZXJlcilcbiAgICB7XG4gICAgICAgIHN1cGVyKHJlbmRlcmVyKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIG1hbmFnZWQgZnJhbWVidWZmZXJzXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuRnJhbWVidWZmZXJbXX1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1hbmFnZWRGcmFtZWJ1ZmZlcnMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRnJhbWVidWZmZXIgdmFsdWUgdGhhdCBzaG93cyB0aGF0IHdlIGRvbid0IGtub3cgd2hhdCBpcyBib3VuZFxuICAgICAgICAgKiBAbWVtYmVyIHtGcmFtZWJ1ZmZlcn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVua25vd25GcmFtZWJ1ZmZlciA9IG5ldyBGcmFtZWJ1ZmZlcigxMCwgMTApO1xuXG4gICAgICAgIHRoaXMubXNhYVNhbXBsZXMgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIHJlbmRlcmVyIGNvbnRleHQgYW5kIG5lY2Vzc2FyeSBidWZmZXJzLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjb250ZXh0Q2hhbmdlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5nbCA9IHRoaXMucmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgdGhpcy5DT05URVhUX1VJRCA9IHRoaXMucmVuZGVyZXIuQ09OVEVYVF9VSUQ7XG4gICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMudW5rbm93bkZyYW1lYnVmZmVyO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gbmV3IFJlY3RhbmdsZSgpO1xuICAgICAgICB0aGlzLmhhc01SVCA9IHRydWU7XG4gICAgICAgIHRoaXMud3JpdGVEZXB0aFRleHR1cmUgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuZGlzcG9zZUFsbCh0cnVlKTtcblxuICAgICAgICAvLyB3ZWJnbDJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZXIuY29udGV4dC53ZWJHTFZlcnNpb24gPT09IDEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIHdlYmdsIDEhXG4gICAgICAgICAgICBsZXQgbmF0aXZlRHJhd0J1ZmZlcnNFeHRlbnNpb24gPSB0aGlzLnJlbmRlcmVyLmNvbnRleHQuZXh0ZW5zaW9ucy5kcmF3QnVmZmVycztcbiAgICAgICAgICAgIGxldCBuYXRpdmVEZXB0aFRleHR1cmVFeHRlbnNpb24gPSB0aGlzLnJlbmRlcmVyLmNvbnRleHQuZXh0ZW5zaW9ucy5kZXB0aFRleHR1cmU7XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5QUkVGRVJfRU5WID09PSBFTlYuV0VCR0xfTEVHQUNZKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hdGl2ZURyYXdCdWZmZXJzRXh0ZW5zaW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICBuYXRpdmVEZXB0aFRleHR1cmVFeHRlbnNpb24gPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmF0aXZlRHJhd0J1ZmZlcnNFeHRlbnNpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2wuZHJhd0J1ZmZlcnMgPSAoYWN0aXZlVGV4dHVyZXM6IG51bWJlcltdKTogdm9pZCA9PlxuICAgICAgICAgICAgICAgICAgICBuYXRpdmVEcmF3QnVmZmVyc0V4dGVuc2lvbi5kcmF3QnVmZmVyc1dFQkdMKGFjdGl2ZVRleHR1cmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc01SVCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGdsLmRyYXdCdWZmZXJzID0gKCk6IHZvaWQgPT5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVtcHR5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFuYXRpdmVEZXB0aFRleHR1cmVFeHRlbnNpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZURlcHRoVGV4dHVyZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gV2ViR0wyXG4gICAgICAgICAgICAvLyBjYWNoZSBwb3NzaWJsZSBNU0FBIHNhbXBsZXNcbiAgICAgICAgICAgIHRoaXMubXNhYVNhbXBsZXMgPSBnbC5nZXRJbnRlcm5hbGZvcm1hdFBhcmFtZXRlcihnbC5SRU5ERVJCVUZGRVIsIGdsLlJHQkE4LCBnbC5TQU1QTEVTKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJpbmQgYSBmcmFtZWJ1ZmZlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkZyYW1lYnVmZmVyfSBmcmFtZWJ1ZmZlclxuICAgICAqIEBwYXJhbSB7UElYSS5SZWN0YW5nbGV9IFtmcmFtZV0gZnJhbWUsIGRlZmF1bHQgaXMgZnJhbWVidWZmZXIgc2l6ZVxuICAgICAqL1xuICAgIGJpbmQoZnJhbWVidWZmZXI/OiBGcmFtZWJ1ZmZlciwgZnJhbWU/OiBSZWN0YW5nbGUpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB7IGdsIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmIChmcmFtZWJ1ZmZlcilcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gVE9ETyBjYWNoaW5nIGxheWVyIVxuXG4gICAgICAgICAgICBjb25zdCBmYm8gPSBmcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyc1t0aGlzLkNPTlRFWFRfVUlEXSB8fCB0aGlzLmluaXRGcmFtZWJ1ZmZlcihmcmFtZWJ1ZmZlcik7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnQgIT09IGZyYW1lYnVmZmVyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IGZyYW1lYnVmZmVyO1xuICAgICAgICAgICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZmJvLmZyYW1lYnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBhbGwgdGV4dHVyZXMgYXJlIHVuYm91bmQuLlxuXG4gICAgICAgICAgICAvLyBub3cgY2hlY2sgZm9yIHVwZGF0ZXMuLi5cbiAgICAgICAgICAgIGlmIChmYm8uZGlydHlJZCAhPT0gZnJhbWVidWZmZXIuZGlydHlJZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmYm8uZGlydHlJZCA9IGZyYW1lYnVmZmVyLmRpcnR5SWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoZmJvLmRpcnR5Rm9ybWF0ICE9PSBmcmFtZWJ1ZmZlci5kaXJ0eUZvcm1hdClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGZiby5kaXJ0eUZvcm1hdCA9IGZyYW1lYnVmZmVyLmRpcnR5Rm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZyYW1lYnVmZmVyKGZyYW1lYnVmZmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZmJvLmRpcnR5U2l6ZSAhPT0gZnJhbWVidWZmZXIuZGlydHlTaXplKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZmJvLmRpcnR5U2l6ZSA9IGZyYW1lYnVmZmVyLmRpcnR5U2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemVGcmFtZWJ1ZmZlcihmcmFtZWJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYW1lYnVmZmVyLmNvbG9yVGV4dHVyZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4ID0gZnJhbWVidWZmZXIuY29sb3JUZXh0dXJlc1tpXTtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudGV4dHVyZS51bmJpbmQodGV4LnBhcmVudFRleHR1cmVBcnJheSB8fCB0ZXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZnJhbWVidWZmZXIuZGVwdGhUZXh0dXJlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudGV4dHVyZS51bmJpbmQoZnJhbWVidWZmZXIuZGVwdGhUZXh0dXJlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZyYW1lKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Vmlld3BvcnQoZnJhbWUueCwgZnJhbWUueSwgZnJhbWUud2lkdGgsIGZyYW1lLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaWV3cG9ydCgwLCAwLCBmcmFtZWJ1ZmZlci53aWR0aCwgZnJhbWVidWZmZXIuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZnJhbWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaWV3cG9ydChmcmFtZS54LCBmcmFtZS55LCBmcmFtZS53aWR0aCwgZnJhbWUuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZpZXdwb3J0KDAsIDAsIHRoaXMucmVuZGVyZXIud2lkdGgsIHRoaXMucmVuZGVyZXIuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0J3Mgdmlld3BvcnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0geCAtIFggcG9zaXRpb24gb2Ygdmlld3BvcnRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0geSAtIFkgcG9zaXRpb24gb2Ygdmlld3BvcnRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGggLSBXaWR0aCBvZiB2aWV3cG9ydFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBoZWlnaHQgLSBIZWlnaHQgb2Ygdmlld3BvcnRcbiAgICAgKi9cbiAgICBzZXRWaWV3cG9ydCh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB2ID0gdGhpcy52aWV3cG9ydDtcblxuICAgICAgICBpZiAodi53aWR0aCAhPT0gd2lkdGggfHwgdi5oZWlnaHQgIT09IGhlaWdodCB8fCB2LnggIT09IHggfHwgdi55ICE9PSB5KVxuICAgICAgICB7XG4gICAgICAgICAgICB2LnggPSB4O1xuICAgICAgICAgICAgdi55ID0geTtcbiAgICAgICAgICAgIHYud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHYuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgICAgICB0aGlzLmdsLnZpZXdwb3J0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzaXplIG9mIHRoZSBjdXJyZW50IHdpZHRoIGFuZCBoZWlnaHQuIFJldHVybnMgb2JqZWN0IHdpdGggYHdpZHRoYCBhbmQgYGhlaWdodGAgdmFsdWVzLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7b2JqZWN0fVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIGdldCBzaXplKCk6IHsgeDogbnVtYmVyOyB5OiBudW1iZXI7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH1cbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFRPRE8gc3RvcmUgdGVtcFxuICAgICAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCwgd2lkdGg6IHRoaXMuY3VycmVudC53aWR0aCwgaGVpZ2h0OiB0aGlzLmN1cnJlbnQuaGVpZ2h0IH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyB4OiAwLCB5OiAwLCB3aWR0aDogdGhpcy5yZW5kZXJlci53aWR0aCwgaGVpZ2h0OiB0aGlzLnJlbmRlcmVyLmhlaWdodCB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBjb2xvciBvZiB0aGUgY29udGV4dFxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHIgLSBSZWQgdmFsdWUgZnJvbSAwIHRvIDFcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZyAtIEdyZWVuIHZhbHVlIGZyb20gMCB0byAxXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGIgLSBCbHVlIHZhbHVlIGZyb20gMCB0byAxXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGEgLSBBbHBoYSB2YWx1ZSBmcm9tIDAgdG8gMVxuICAgICAqIEBwYXJhbSB7UElYSS5CVUZGRVJfQklUU30gW21hc2s9QlVGRkVSX0JJVFMuQ09MT1IgfCBCVUZGRVJfQklUUy5ERVBUSF0gLSBCaXR3aXNlIE9SIG9mIG1hc2tzXG4gICAgICogIHRoYXQgaW5kaWNhdGUgdGhlIGJ1ZmZlcnMgdG8gYmUgY2xlYXJlZCwgYnkgZGVmYXVsdCBDT0xPUiBhbmQgREVQVEggYnVmZmVycy5cbiAgICAgKi9cbiAgICBjbGVhcihyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIsIG1hc2s6IEJVRkZFUl9CSVRTID0gQlVGRkVSX0JJVFMuQ09MT1IgfCBCVUZGRVJfQklUUy5ERVBUSCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgZ2wgfSA9IHRoaXM7XG5cbiAgICAgICAgLy8gVE9ETyBjbGVhciBjb2xvciBjYW4gYmUgc2V0IG9ubHkgb25lIHJpZ2h0P1xuICAgICAgICBnbC5jbGVhckNvbG9yKHIsIGcsIGIsIGEpO1xuICAgICAgICBnbC5jbGVhcihtYXNrKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGZyYW1lYnVmZmVyIGZvciB0aGlzIGNvbnRleHRcbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1BJWEkuRnJhbWVidWZmZXJ9IGZyYW1lYnVmZmVyXG4gICAgICogQHJldHVybnMge1BJWEkuR0xGcmFtZWJ1ZmZlcn0gY3JlYXRlZCBHTEZyYW1lYnVmZmVyXG4gICAgICovXG4gICAgaW5pdEZyYW1lYnVmZmVyKGZyYW1lYnVmZmVyOiBGcmFtZWJ1ZmZlcik6IEdMRnJhbWVidWZmZXJcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgZ2wgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGZibyA9IG5ldyBHTEZyYW1lYnVmZmVyKGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCkpO1xuXG4gICAgICAgIGZiby5tdWx0aXNhbXBsZSA9IHRoaXMuZGV0ZWN0U2FtcGxlcyhmcmFtZWJ1ZmZlci5tdWx0aXNhbXBsZSk7XG4gICAgICAgIGZyYW1lYnVmZmVyLmdsRnJhbWVidWZmZXJzW3RoaXMuQ09OVEVYVF9VSURdID0gZmJvO1xuXG4gICAgICAgIHRoaXMubWFuYWdlZEZyYW1lYnVmZmVycy5wdXNoKGZyYW1lYnVmZmVyKTtcbiAgICAgICAgZnJhbWVidWZmZXIuZGlzcG9zZVJ1bm5lci5hZGQodGhpcyk7XG5cbiAgICAgICAgcmV0dXJuIGZibztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNpemUgdGhlIGZyYW1lYnVmZmVyXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtQSVhJLkZyYW1lYnVmZmVyfSBmcmFtZWJ1ZmZlclxuICAgICAqL1xuICAgIHJlc2l6ZUZyYW1lYnVmZmVyKGZyYW1lYnVmZmVyOiBGcmFtZWJ1ZmZlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgZ2wgfSA9IHRoaXM7XG5cbiAgICAgICAgY29uc3QgZmJvID0gZnJhbWVidWZmZXIuZ2xGcmFtZWJ1ZmZlcnNbdGhpcy5DT05URVhUX1VJRF07XG5cbiAgICAgICAgaWYgKGZiby5zdGVuY2lsKVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgZmJvLnN0ZW5jaWwpO1xuICAgICAgICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShnbC5SRU5ERVJCVUZGRVIsIGdsLkRFUFRIX1NURU5DSUwsIGZyYW1lYnVmZmVyLndpZHRoLCBmcmFtZWJ1ZmZlci5oZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29sb3JUZXh0dXJlcyA9IGZyYW1lYnVmZmVyLmNvbG9yVGV4dHVyZXM7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvclRleHR1cmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnRleHR1cmUuYmluZChjb2xvclRleHR1cmVzW2ldLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmcmFtZWJ1ZmZlci5kZXB0aFRleHR1cmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudGV4dHVyZS5iaW5kKGZyYW1lYnVmZmVyLmRlcHRoVGV4dHVyZSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGZyYW1lYnVmZmVyXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtQSVhJLkZyYW1lYnVmZmVyfSBmcmFtZWJ1ZmZlclxuICAgICAqL1xuICAgIHVwZGF0ZUZyYW1lYnVmZmVyKGZyYW1lYnVmZmVyOiBGcmFtZWJ1ZmZlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgZ2wgfSA9IHRoaXM7XG5cbiAgICAgICAgY29uc3QgZmJvID0gZnJhbWVidWZmZXIuZ2xGcmFtZWJ1ZmZlcnNbdGhpcy5DT05URVhUX1VJRF07XG5cbiAgICAgICAgLy8gYmluZCB0aGUgY29sb3IgdGV4dHVyZVxuICAgICAgICBjb25zdCBjb2xvclRleHR1cmVzID0gZnJhbWVidWZmZXIuY29sb3JUZXh0dXJlcztcblxuICAgICAgICBsZXQgY291bnQgPSBjb2xvclRleHR1cmVzLmxlbmd0aDtcblxuICAgICAgICBpZiAoIWdsLmRyYXdCdWZmZXJzKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb3VudCA9IE1hdGgubWluKGNvdW50LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmYm8ubXVsdGlzYW1wbGUgPiAxKVxuICAgICAgICB7XG4gICAgICAgICAgICBmYm8ubXNhYUJ1ZmZlciA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xuICAgICAgICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIGZiby5tc2FhQnVmZmVyKTtcbiAgICAgICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZShnbC5SRU5ERVJCVUZGRVIsIGZiby5tdWx0aXNhbXBsZSxcbiAgICAgICAgICAgICAgICBnbC5SR0JBOCwgZnJhbWVidWZmZXIud2lkdGgsIGZyYW1lYnVmZmVyLmhlaWdodCk7XG4gICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlJFTkRFUkJVRkZFUiwgZmJvLm1zYWFCdWZmZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWN0aXZlVGV4dHVyZXMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChpID09PSAwICYmIGZiby5tdWx0aXNhbXBsZSA+IDEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBmcmFtZWJ1ZmZlci5jb2xvclRleHR1cmVzW2ldO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50VGV4dHVyZSA9IHRleHR1cmUucGFyZW50VGV4dHVyZUFycmF5IHx8IHRleHR1cmU7XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudGV4dHVyZS5iaW5kKHBhcmVudFRleHR1cmUsIDApO1xuXG4gICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUixcbiAgICAgICAgICAgICAgICBnbC5DT0xPUl9BVFRBQ0hNRU5UMCArIGksXG4gICAgICAgICAgICAgICAgdGV4dHVyZS50YXJnZXQsXG4gICAgICAgICAgICAgICAgcGFyZW50VGV4dHVyZS5fZ2xUZXh0dXJlc1t0aGlzLkNPTlRFWFRfVUlEXS50ZXh0dXJlLFxuICAgICAgICAgICAgICAgIDApO1xuXG4gICAgICAgICAgICBhY3RpdmVUZXh0dXJlcy5wdXNoKGdsLkNPTE9SX0FUVEFDSE1FTlQwICsgaSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWN0aXZlVGV4dHVyZXMubGVuZ3RoID4gMSlcbiAgICAgICAge1xuICAgICAgICAgICAgZ2wuZHJhd0J1ZmZlcnMoYWN0aXZlVGV4dHVyZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZyYW1lYnVmZmVyLmRlcHRoVGV4dHVyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgd3JpdGVEZXB0aFRleHR1cmUgPSB0aGlzLndyaXRlRGVwdGhUZXh0dXJlO1xuXG4gICAgICAgICAgICBpZiAod3JpdGVEZXB0aFRleHR1cmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVwdGhUZXh0dXJlID0gZnJhbWVidWZmZXIuZGVwdGhUZXh0dXJlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci50ZXh0dXJlLmJpbmQoZGVwdGhUZXh0dXJlLCAwKTtcblxuICAgICAgICAgICAgICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGdsLkZSQU1FQlVGRkVSLFxuICAgICAgICAgICAgICAgICAgICBnbC5ERVBUSF9BVFRBQ0hNRU5ULFxuICAgICAgICAgICAgICAgICAgICBnbC5URVhUVVJFXzJELFxuICAgICAgICAgICAgICAgICAgICBkZXB0aFRleHR1cmUuX2dsVGV4dHVyZXNbdGhpcy5DT05URVhUX1VJRF0udGV4dHVyZSxcbiAgICAgICAgICAgICAgICAgICAgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZiby5zdGVuY2lsICYmIChmcmFtZWJ1ZmZlci5zdGVuY2lsIHx8IGZyYW1lYnVmZmVyLmRlcHRoKSlcbiAgICAgICAge1xuICAgICAgICAgICAgZmJvLnN0ZW5jaWwgPSBnbC5jcmVhdGVSZW5kZXJidWZmZXIoKTtcblxuICAgICAgICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIGZiby5zdGVuY2lsKTtcblxuICAgICAgICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShnbC5SRU5ERVJCVUZGRVIsIGdsLkRFUFRIX1NURU5DSUwsIGZyYW1lYnVmZmVyLndpZHRoLCBmcmFtZWJ1ZmZlci5oZWlnaHQpO1xuICAgICAgICAgICAgLy8gVE9ETy4uIHRoaXMgaXMgZGVwdGggQU5EIHN0ZW5jaWw/XG4gICAgICAgICAgICBpZiAoIWZyYW1lYnVmZmVyLmRlcHRoVGV4dHVyZSlcbiAgICAgICAgICAgIHsgLy8geW91IGNhbid0IGhhdmUgYm90aCwgc28gb25lIHNob3VsZCB0YWtlIHByaW9yaXR5IGlmIGVuYWJsZWRcbiAgICAgICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULCBnbC5SRU5ERVJCVUZGRVIsIGZiby5zdGVuY2lsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVjdHMgbnVtYmVyIG9mIHNhbXBsZXMgdGhhdCBpcyBub3QgbW9yZSB0aGFuIGEgcGFyYW0gYnV0IGFzIGNsb3NlIHRvIGl0IGFzIHBvc3NpYmxlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuTVNBQV9RVUFMSVRZfSBzYW1wbGVzIC0gbnVtYmVyIG9mIHNhbXBsZXNcbiAgICAgKiBAcmV0dXJucyB7UElYSS5NU0FBX1FVQUxJVFl9IC0gcmVjb21tZW5kZWQgbnVtYmVyIG9mIHNhbXBsZXNcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgZGV0ZWN0U2FtcGxlcyhzYW1wbGVzOiBNU0FBX1FVQUxJVFkpOiBNU0FBX1FVQUxJVFlcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgbXNhYVNhbXBsZXMgfSA9IHRoaXM7XG4gICAgICAgIGxldCByZXMgPSBNU0FBX1FVQUxJVFkuTk9ORTtcblxuICAgICAgICBpZiAoc2FtcGxlcyA8PSAxIHx8IG1zYWFTYW1wbGVzID09PSBudWxsKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXNhYVNhbXBsZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChtc2FhU2FtcGxlc1tpXSA8PSBzYW1wbGVzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlcyA9IG1zYWFTYW1wbGVzW2ldO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlcyA9PT0gMSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmVzID0gTVNBQV9RVUFMSVRZLk5PTkU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9ubHkgd29ya3Mgd2l0aCBXZWJHTDJcbiAgICAgKlxuICAgICAqIGJsaXRzIGZyYW1lYnVmZmVyIHRvIGFub3RoZXIgb2YgdGhlIHNhbWUgb3IgYmlnZ2VyIHNpemVcbiAgICAgKiBhZnRlciB0aGF0IHRhcmdldCBmcmFtZWJ1ZmZlciBpcyBib3VuZFxuICAgICAqXG4gICAgICogRmFpbHMgd2l0aCBXZWJHTCB3YXJuaW5nIGlmIGJsaXRzIG11bHRpc2FtcGxlIGZyYW1lYnVmZmVyIHRvIGRpZmZlcmVudCBzaXplXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRnJhbWVidWZmZXJ9IFtmcmFtZWJ1ZmZlcl0gLSBieSBkZWZhdWx0IGl0IGJsaXRzIFwiaW50byBpdHNlbGZcIiwgZnJvbSByZW5kZXJCdWZmZXIgdG8gdGV4dHVyZS5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSBbc291cmNlUGl4ZWxzXSAtIHNvdXJjZSByZWN0YW5nbGUgaW4gcGl4ZWxzXG4gICAgICogQHBhcmFtIHtQSVhJLlJlY3RhbmdsZX0gW2Rlc3RQaXhlbHNdIC0gZGVzdCByZWN0YW5nbGUgaW4gcGl4ZWxzLCBhc3N1bWVkIHRvIGJlIHRoZSBzYW1lIGFzIHNvdXJjZVBpeGVsc1xuICAgICAqL1xuICAgIHB1YmxpYyBibGl0KGZyYW1lYnVmZmVyPzogRnJhbWVidWZmZXIsIHNvdXJjZVBpeGVscz86IFJlY3RhbmdsZSwgZGVzdFBpeGVscz86IFJlY3RhbmdsZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgY3VycmVudCwgcmVuZGVyZXIsIGdsLCBDT05URVhUX1VJRCB9ID0gdGhpcztcblxuICAgICAgICBpZiAocmVuZGVyZXIuY29udGV4dC53ZWJHTFZlcnNpb24gIT09IDIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY3VycmVudClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZibyA9IGN1cnJlbnQuZ2xGcmFtZWJ1ZmZlcnNbQ09OVEVYVF9VSURdO1xuXG4gICAgICAgIGlmICghZmJvKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmcmFtZWJ1ZmZlcilcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGZiby5tdWx0aXNhbXBsZSA8PSAxKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZmJvLmJsaXRGcmFtZWJ1ZmZlcilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmYm8uYmxpdEZyYW1lYnVmZmVyID0gbmV3IEZyYW1lYnVmZmVyKGN1cnJlbnQud2lkdGgsIGN1cnJlbnQuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBmYm8uYmxpdEZyYW1lYnVmZmVyLmFkZENvbG9yVGV4dHVyZSgwLCBjdXJyZW50LmNvbG9yVGV4dHVyZXNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnJhbWVidWZmZXIgPSBmYm8uYmxpdEZyYW1lYnVmZmVyO1xuICAgICAgICAgICAgZnJhbWVidWZmZXIud2lkdGggPSBjdXJyZW50LndpZHRoO1xuICAgICAgICAgICAgZnJhbWVidWZmZXIuaGVpZ2h0ID0gY3VycmVudC5oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNvdXJjZVBpeGVscylcbiAgICAgICAge1xuICAgICAgICAgICAgc291cmNlUGl4ZWxzID0gdGVtcFJlY3RhbmdsZTtcbiAgICAgICAgICAgIHNvdXJjZVBpeGVscy53aWR0aCA9IGN1cnJlbnQud2lkdGg7XG4gICAgICAgICAgICBzb3VyY2VQaXhlbHMuaGVpZ2h0ID0gY3VycmVudC5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZXN0UGl4ZWxzKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZXN0UGl4ZWxzID0gc291cmNlUGl4ZWxzO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2FtZVNpemUgPSBzb3VyY2VQaXhlbHMud2lkdGggPT09IGRlc3RQaXhlbHMud2lkdGggJiYgc291cmNlUGl4ZWxzLmhlaWdodCA9PT0gZGVzdFBpeGVscy5oZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5iaW5kKGZyYW1lYnVmZmVyKTtcbiAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLlJFQURfRlJBTUVCVUZGRVIsIGZiby5mcmFtZWJ1ZmZlcik7XG4gICAgICAgIGdsLmJsaXRGcmFtZWJ1ZmZlcihzb3VyY2VQaXhlbHMueCwgc291cmNlUGl4ZWxzLnksIHNvdXJjZVBpeGVscy53aWR0aCwgc291cmNlUGl4ZWxzLmhlaWdodCxcbiAgICAgICAgICAgIGRlc3RQaXhlbHMueCwgZGVzdFBpeGVscy55LCBkZXN0UGl4ZWxzLndpZHRoLCBkZXN0UGl4ZWxzLmhlaWdodCxcbiAgICAgICAgICAgIGdsLkNPTE9SX0JVRkZFUl9CSVQsIHNhbWVTaXplID8gZ2wuTkVBUkVTVCA6IGdsLkxJTkVBUlxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIGZyYW1lYnVmZmVyXG4gICAgICogQHBhcmFtIHtQSVhJLkZyYW1lYnVmZmVyfSBmcmFtZWJ1ZmZlciAtIGZyYW1lYnVmZmVyIHRoYXQgaGFzIHRvIGJlIGRpc3Bvc2VkIG9mXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbY29udGV4dExvc3Q9ZmFsc2VdIC0gSWYgY29udGV4dCB3YXMgbG9zdCwgd2Ugc3VwcHJlc3MgYWxsIGRlbGV0ZSBmdW5jdGlvbiBjYWxsc1xuICAgICAqL1xuICAgIGRpc3Bvc2VGcmFtZWJ1ZmZlcihmcmFtZWJ1ZmZlcjogRnJhbWVidWZmZXIsIGNvbnRleHRMb3N0PzogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGZibyA9IGZyYW1lYnVmZmVyLmdsRnJhbWVidWZmZXJzW3RoaXMuQ09OVEVYVF9VSURdO1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XG5cbiAgICAgICAgaWYgKCFmYm8pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBmcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyc1t0aGlzLkNPTlRFWFRfVUlEXTtcblxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMubWFuYWdlZEZyYW1lYnVmZmVycy5pbmRleE9mKGZyYW1lYnVmZmVyKTtcblxuICAgICAgICBpZiAoaW5kZXggPj0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VkRnJhbWVidWZmZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICBmcmFtZWJ1ZmZlci5kaXNwb3NlUnVubmVyLnJlbW92ZSh0aGlzKTtcblxuICAgICAgICBpZiAoIWNvbnRleHRMb3N0KVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC5kZWxldGVGcmFtZWJ1ZmZlcihmYm8uZnJhbWVidWZmZXIpO1xuXG4gICAgICAgICAgICBpZiAoZmJvLnN0ZW5jaWwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKGZiby5zdGVuY2lsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIGFsbCBmcmFtZWJ1ZmZlcnMsIGJ1dCBub3QgdGV4dHVyZXMgYm91bmQgdG8gdGhlbVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbnRleHRMb3N0PWZhbHNlXSAtIElmIGNvbnRleHQgd2FzIGxvc3QsIHdlIHN1cHByZXNzIGFsbCBkZWxldGUgZnVuY3Rpb24gY2FsbHNcbiAgICAgKi9cbiAgICBkaXNwb3NlQWxsKGNvbnRleHRMb3N0PzogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLm1hbmFnZWRGcmFtZWJ1ZmZlcnM7XG5cbiAgICAgICAgKHRoaXMubWFuYWdlZEZyYW1lYnVmZmVycyBhcyBhbnkpID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VGcmFtZWJ1ZmZlcihsaXN0W2ldLCBjb250ZXh0TG9zdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JjaW5nIGNyZWF0aW9uIG9mIHN0ZW5jaWwgYnVmZmVyIGZvciBjdXJyZW50IGZyYW1lYnVmZmVyLCBpZiBpdCB3YXNuJ3QgZG9uZSBiZWZvcmUuXG4gICAgICogVXNlZCBieSBNYXNrU3lzdGVtLCB3aGVuIGl0cyB0aW1lIHRvIHVzZSBzdGVuY2lsIG1hc2sgZm9yIEdyYXBoaWNzIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJdHMgYW4gYWx0ZXJuYXRpdmUgZm9yIHB1YmxpYyBsYXp5IGBmcmFtZWJ1ZmZlci5lbmFibGVTdGVuY2lsYCwgaW4gY2FzZSB3ZSBuZWVkIHN0ZW5jaWwgd2l0aG91dCByZWJpbmQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGZvcmNlU3RlbmNpbCgpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBmcmFtZWJ1ZmZlciA9IHRoaXMuY3VycmVudDtcblxuICAgICAgICBpZiAoIWZyYW1lYnVmZmVyKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmYm8gPSBmcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyc1t0aGlzLkNPTlRFWFRfVUlEXTtcblxuICAgICAgICBpZiAoIWZibyB8fCBmYm8uc3RlbmNpbClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZyYW1lYnVmZmVyLmVuYWJsZVN0ZW5jaWwoKTtcblxuICAgICAgICBjb25zdCB3ID0gZnJhbWVidWZmZXIud2lkdGg7XG4gICAgICAgIGNvbnN0IGggPSBmcmFtZWJ1ZmZlci5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcbiAgICAgICAgY29uc3Qgc3RlbmNpbCA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xuXG4gICAgICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBzdGVuY2lsKTtcbiAgICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShnbC5SRU5ERVJCVUZGRVIsIGdsLkRFUFRIX1NURU5DSUwsIHcsIGgpO1xuXG4gICAgICAgIGZiby5zdGVuY2lsID0gc3RlbmNpbDtcbiAgICAgICAgZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGdsLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCwgZ2wuUkVOREVSQlVGRkVSLCBzdGVuY2lsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXNldHMgZnJhbWVidWZmZXIgc3RvcmVkIHN0YXRlLCBiaW5kcyBzY3JlZW4gZnJhbWVidWZmZXJcbiAgICAgKlxuICAgICAqIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIHJlbmRlclRleHR1cmUgcmVzZXQoKVxuICAgICAqL1xuICAgIHJlc2V0KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMudW5rbm93bkZyYW1lYnVmZmVyO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gbmV3IFJlY3RhbmdsZSgpO1xuICAgIH1cbn1cbiIsICJleHBvcnQgY2xhc3MgR0xCdWZmZXJcbntcbiAgICBidWZmZXI6IFdlYkdMQnVmZmVyO1xuICAgIHVwZGF0ZUlEOiBudW1iZXI7XG4gICAgYnl0ZUxlbmd0aDogbnVtYmVyO1xuICAgIHJlZkNvdW50OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihidWZmZXI/OiBXZWJHTEJ1ZmZlcilcbiAgICB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyIHx8IG51bGw7XG4gICAgICAgIHRoaXMudXBkYXRlSUQgPSAtMTtcbiAgICAgICAgdGhpcy5ieXRlTGVuZ3RoID0gLTE7XG4gICAgICAgIHRoaXMucmVmQ291bnQgPSAwO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tICcuLi9TeXN0ZW0nO1xuaW1wb3J0IHsgR0xCdWZmZXIgfSBmcm9tICcuL0dMQnVmZmVyJztcbmltcG9ydCB7IEVOViB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJy4uL3NldHRpbmdzJztcblxuaW1wb3J0IHR5cGUgeyBEUkFXX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi9SZW5kZXJlcic7XG5pbXBvcnQgdHlwZSB7IElSZW5kZXJpbmdDb250ZXh0IH0gZnJvbSAnLi4vSVJlbmRlcmluZ0NvbnRleHQnO1xuaW1wb3J0IHR5cGUgeyBHZW9tZXRyeSB9IGZyb20gJy4vR2VvbWV0cnknO1xuaW1wb3J0IHR5cGUgeyBTaGFkZXIgfSBmcm9tICcuLi9zaGFkZXIvU2hhZGVyJztcbmltcG9ydCB0eXBlIHsgUHJvZ3JhbSB9IGZyb20gJy4uL3NoYWRlci9Qcm9ncmFtJztcbmltcG9ydCB0eXBlIHsgQnVmZmVyIH0gZnJvbSAnLi9CdWZmZXInO1xuaW1wb3J0IHR5cGUgeyBEaWN0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuXG5jb25zdCBieXRlU2l6ZU1hcDoge1trZXk6IG51bWJlcl06IG51bWJlcn0gPSB7IDUxMjY6IDQsIDUxMjM6IDIsIDUxMjE6IDEgfTtcblxuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgZ2VvbWV0cnkuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLlN5c3RlbVxuICogQG1lbWJlcm9mIFBJWEkuc3lzdGVtc1xuICovXG5leHBvcnQgY2xhc3MgR2VvbWV0cnlTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW1cbntcbiAgICBwdWJsaWMgaGFzVmFvOiBib29sZWFuO1xuICAgIHB1YmxpYyBoYXNJbnN0YW5jZTogYm9vbGVhbjtcbiAgICBwdWJsaWMgY2FuVXNlVUludDMyRWxlbWVudEluZGV4OiBib29sZWFuO1xuICAgIHByb3RlY3RlZCBDT05URVhUX1VJRDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBnbDogSVJlbmRlcmluZ0NvbnRleHQ7XG4gICAgcHJvdGVjdGVkIF9hY3RpdmVHZW9tZXRyeTogR2VvbWV0cnk7XG4gICAgcHJvdGVjdGVkIF9hY3RpdmVWYW86IFdlYkdMVmVydGV4QXJyYXlPYmplY3Q7XG4gICAgcHJvdGVjdGVkIF9ib3VuZEJ1ZmZlcjogR0xCdWZmZXI7XG4gICAgcmVhZG9ubHkgbWFuYWdlZEdlb21ldHJpZXM6IHtba2V5OiBudW1iZXJdOiBHZW9tZXRyeX07XG4gICAgcmVhZG9ubHkgbWFuYWdlZEJ1ZmZlcnM6IHtba2V5OiBudW1iZXJdOiBCdWZmZXJ9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgIHtcbiAgICAgICAgc3VwZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMuX2FjdGl2ZUdlb21ldHJ5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYWN0aXZlVmFvID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogYHRydWVgIGlmIHdlIGhhcyBgKl92ZXJ0ZXhfYXJyYXlfb2JqZWN0YCBleHRlbnNpb25cbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhc1ZhbyA9IHRydWU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGB0cnVlYCBpZiBoYXMgYEFOR0xFX2luc3RhbmNlZF9hcnJheXNgIGV4dGVuc2lvblxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFzSW5zdGFuY2UgPSB0cnVlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgdHJ1ZWAgaWYgc3VwcG9ydCBgZ2wuVU5TSUdORURfSU5UYCBpbiBgZ2wuZHJhd0VsZW1lbnRzYCBvciBgZ2wuZHJhd0VsZW1lbnRzSW5zdGFuY2VkYFxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FuVXNlVUludDMyRWxlbWVudEluZGV4ID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlIGZvciBhbGwgZ2VvbWV0cmllcyBieSBpZCwgdXNlZCBpbiBjYXNlIHJlbmRlcmVyIGdldHMgZGVzdHJveWVkIG9yIGZvciBwcm9maWxpbmdcbiAgICAgICAgICogQG1lbWJlciB7b2JqZWN0fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWFuYWdlZEdlb21ldHJpZXMgPSB7fTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGUgZm9yIGFsbCBidWZmZXJzIGJ5IGlkLCB1c2VkIGluIGNhc2UgcmVuZGVyZXIgZ2V0cyBkZXN0cm95ZWQgb3IgZm9yIHByb2ZpbGluZ1xuICAgICAgICAgKiBAbWVtYmVyIHtvYmplY3R9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYW5hZ2VkQnVmZmVycyA9IHt9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIHJlbmRlcmVyIGNvbnRleHQgYW5kIG5lY2Vzc2FyeSBidWZmZXJzLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjb250ZXh0Q2hhbmdlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuZGlzcG9zZUFsbCh0cnVlKTtcblxuICAgICAgICBjb25zdCBnbCA9IHRoaXMuZ2wgPSB0aGlzLnJlbmRlcmVyLmdsO1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5yZW5kZXJlci5jb250ZXh0O1xuXG4gICAgICAgIHRoaXMuQ09OVEVYVF9VSUQgPSB0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEO1xuXG4gICAgICAgIC8vIHdlYmdsMlxuICAgICAgICBpZiAoY29udGV4dC53ZWJHTFZlcnNpb24gIT09IDIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIHdlYmdsIDEhXG4gICAgICAgICAgICBsZXQgbmF0aXZlVmFvRXh0ZW5zaW9uID0gdGhpcy5yZW5kZXJlci5jb250ZXh0LmV4dGVuc2lvbnMudmVydGV4QXJyYXlPYmplY3Q7XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5QUkVGRVJfRU5WID09PSBFTlYuV0VCR0xfTEVHQUNZKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hdGl2ZVZhb0V4dGVuc2lvbiA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuYXRpdmVWYW9FeHRlbnNpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2wuY3JlYXRlVmVydGV4QXJyYXkgPSAoKTogV2ViR0xWZXJ0ZXhBcnJheU9iamVjdCA9PlxuICAgICAgICAgICAgICAgICAgICBuYXRpdmVWYW9FeHRlbnNpb24uY3JlYXRlVmVydGV4QXJyYXlPRVMoKTtcblxuICAgICAgICAgICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSA9ICh2YW8pOiB2b2lkID0+XG4gICAgICAgICAgICAgICAgICAgIG5hdGl2ZVZhb0V4dGVuc2lvbi5iaW5kVmVydGV4QXJyYXlPRVModmFvKTtcblxuICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVZlcnRleEFycmF5ID0gKHZhbyk6IHZvaWQgPT5cbiAgICAgICAgICAgICAgICAgICAgbmF0aXZlVmFvRXh0ZW5zaW9uLmRlbGV0ZVZlcnRleEFycmF5T0VTKHZhbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYXNWYW8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBnbC5jcmVhdGVWZXJ0ZXhBcnJheSA9ICgpOiBXZWJHTFZlcnRleEFycmF5T2JqZWN0ID0+XG4gICAgICAgICAgICAgICAgICAgIG51bGw7XG5cbiAgICAgICAgICAgICAgICBnbC5iaW5kVmVydGV4QXJyYXkgPSAoKTogdm9pZCA9PlxuICAgICAgICAgICAgICAgICAgICBudWxsO1xuXG4gICAgICAgICAgICAgICAgZ2wuZGVsZXRlVmVydGV4QXJyYXkgPSAoKTogdm9pZCA9PlxuICAgICAgICAgICAgICAgICAgICBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQud2ViR0xWZXJzaW9uICE9PSAyKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZUV4dCA9IGdsLmdldEV4dGVuc2lvbignQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpO1xuXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2VFeHQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliRGl2aXNvciA9IChhLCBiKTogdm9pZCA9PlxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUV4dC52ZXJ0ZXhBdHRyaWJEaXZpc29yQU5HTEUoYSwgYik7XG5cbiAgICAgICAgICAgICAgICBnbC5kcmF3RWxlbWVudHNJbnN0YW5jZWQgPSAoYSwgYiwgYywgZCwgZSk6IHZvaWQgPT5cbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VFeHQuZHJhd0VsZW1lbnRzSW5zdGFuY2VkQU5HTEUoYSwgYiwgYywgZCwgZSk7XG5cbiAgICAgICAgICAgICAgICBnbC5kcmF3QXJyYXlzSW5zdGFuY2VkID0gKGEsIGIsIGMsIGQpOiB2b2lkID0+XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlRXh0LmRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRShhLCBiLCBjLCBkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc0luc3RhbmNlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhblVzZVVJbnQzMkVsZW1lbnRJbmRleCA9IGNvbnRleHQud2ViR0xWZXJzaW9uID09PSAyIHx8ICEhY29udGV4dC5leHRlbnNpb25zLnVpbnQzMkVsZW1lbnRJbmRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCaW5kcyBnZW9tZXRyeSBzbyB0aGF0IGlzIGNhbiBiZSBkcmF3bi4gQ3JlYXRpbmcgYSBWYW8gaWYgcmVxdWlyZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5HZW9tZXRyeX0gZ2VvbWV0cnkgLSBpbnN0YW5jZSBvZiBnZW9tZXRyeSB0byBiaW5kXG4gICAgICogQHBhcmFtIHtQSVhJLlNoYWRlcn0gW3NoYWRlcl0gLSBpbnN0YW5jZSBvZiBzaGFkZXIgdG8gdXNlIHZhbyBmb3JcbiAgICAgKi9cbiAgICBiaW5kKGdlb21ldHJ5PzogR2VvbWV0cnksIHNoYWRlcj86IFNoYWRlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHNoYWRlciA9IHNoYWRlciB8fCB0aGlzLnJlbmRlcmVyLnNoYWRlci5zaGFkZXI7XG5cbiAgICAgICAgY29uc3QgeyBnbCB9ID0gdGhpcztcblxuICAgICAgICAvLyBub3Qgc3VyZSB0aGUgYmVzdCB3YXkgdG8gYWRkcmVzcyB0aGlzLi5cbiAgICAgICAgLy8gY3VycmVudGx5IGRpZmZlcmVudCBzaGFkZXJzIHJlcXVpcmUgZGlmZmVyZW50IFZBT3MgZm9yIHRoZSBzYW1lIGdlb21ldHJ5XG4gICAgICAgIC8vIFN0aWxsIG11bGxpbmcgb3ZlciB0aGUgYmVzdCB3YXkgdG8gc29sdmUgdGhpcyBvbmUuLlxuICAgICAgICAvLyB3aWxsIGxpa2VseSBuZWVkIHRvIG1vZGlmeSB0aGUgc2hhZGVyIGF0dHJpYnV0ZSBsb2NhdGlvbnMgYXQgcnVuIHRpbWUhXG4gICAgICAgIGxldCB2YW9zID0gZ2VvbWV0cnkuZ2xWZXJ0ZXhBcnJheU9iamVjdHNbdGhpcy5DT05URVhUX1VJRF07XG4gICAgICAgIGxldCBpbmNSZWZDb3VudCA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghdmFvcylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VkR2VvbWV0cmllc1tnZW9tZXRyeS5pZF0gPSBnZW9tZXRyeTtcbiAgICAgICAgICAgIGdlb21ldHJ5LmRpc3Bvc2VSdW5uZXIuYWRkKHRoaXMpO1xuICAgICAgICAgICAgZ2VvbWV0cnkuZ2xWZXJ0ZXhBcnJheU9iamVjdHNbdGhpcy5DT05URVhUX1VJRF0gPSB2YW9zID0ge307XG4gICAgICAgICAgICBpbmNSZWZDb3VudCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YW8gPSB2YW9zW3NoYWRlci5wcm9ncmFtLmlkXSB8fCB0aGlzLmluaXRHZW9tZXRyeVZhbyhnZW9tZXRyeSwgc2hhZGVyLnByb2dyYW0sIGluY1JlZkNvdW50KTtcblxuICAgICAgICB0aGlzLl9hY3RpdmVHZW9tZXRyeSA9IGdlb21ldHJ5O1xuXG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVWYW8gIT09IHZhbylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fYWN0aXZlVmFvID0gdmFvO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNWYW8pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2wuYmluZFZlcnRleEFycmF5KHZhbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZVZhbyhnZW9tZXRyeSwgc2hhZGVyLnByb2dyYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETyAtIG9wdGltaXNlIGxhdGVyIVxuICAgICAgICAvLyBkb24ndCBuZWVkIHRvIGxvb3AgdGhyb3VnaCBpZiBub3RoaW5nIGNoYW5nZWQhXG4gICAgICAgIC8vIG1heWJlIGxvb2sgdG8gYWRkIGFuICdhdXRvdXBkYXRlJyB0byBnZW9tZXRyeT9cbiAgICAgICAgdGhpcy51cGRhdGVCdWZmZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgYW5kIHVuYmluZCBhbnkgYWN0aXZlIFZBTyBhbmQgZ2VvbWV0cnlcbiAgICAgKi9cbiAgICByZXNldCgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnVuYmluZCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBidWZmZXJzXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHVwZGF0ZUJ1ZmZlcnMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLl9hY3RpdmVHZW9tZXRyeTtcbiAgICAgICAgY29uc3QgeyBnbCB9ID0gdGhpcztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdlb21ldHJ5LmJ1ZmZlcnMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGdlb21ldHJ5LmJ1ZmZlcnNbaV07XG5cbiAgICAgICAgICAgIGNvbnN0IGdsQnVmZmVyID0gYnVmZmVyLl9nbEJ1ZmZlcnNbdGhpcy5DT05URVhUX1VJRF07XG5cbiAgICAgICAgICAgIGlmIChidWZmZXIuX3VwZGF0ZUlEICE9PSBnbEJ1ZmZlci51cGRhdGVJRClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBnbEJ1ZmZlci51cGRhdGVJRCA9IGJ1ZmZlci5fdXBkYXRlSUQ7XG5cbiAgICAgICAgICAgICAgICAvLyBUT0RPIGNhbiBjYWNoZSB0aGlzIG9uIGJ1ZmZlciEgbWF5YmUgYWRkZWQgYSBnZXR0ZXIgLyBzZXR0ZXI/XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGJ1ZmZlci5pbmRleCA/IGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSIDogZ2wuQVJSQVlfQlVGRkVSO1xuXG4gICAgICAgICAgICAgICAgLy8gVE9ETyB0aGlzIGNvdWxkIGNoYW5nZSBpZiB0aGUgVkFPIGNoYW5nZXMuLi5cbiAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIGNvbWUgdXAgd2l0aCBhIGJldHRlciB3YXkgdG8gY2FjaGUuLlxuICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLmJvdW5kQnVmZmVyc1t0eXBlXSAhPT0gZ2xCdWZmZXIpXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMuYm91bmRCdWZmZXJzW3R5cGVdID0gZ2xCdWZmZXI7XG4gICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcih0eXBlLCBnbEJ1ZmZlci5idWZmZXIpO1xuICAgICAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX2JvdW5kQnVmZmVyID0gZ2xCdWZmZXI7XG5cbiAgICAgICAgICAgICAgICBpZiAoZ2xCdWZmZXIuYnl0ZUxlbmd0aCA+PSBidWZmZXIuZGF0YS5ieXRlTGVuZ3RoKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gb2Zmc2V0IGlzIGFsd2F5cyB6ZXJvIGZvciBub3chXG4gICAgICAgICAgICAgICAgICAgIGdsLmJ1ZmZlclN1YkRhdGEodHlwZSwgMCwgYnVmZmVyLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3VHlwZSA9IGJ1ZmZlci5zdGF0aWMgPyBnbC5TVEFUSUNfRFJBVyA6IGdsLkRZTkFNSUNfRFJBVztcblxuICAgICAgICAgICAgICAgICAgICBnbEJ1ZmZlci5ieXRlTGVuZ3RoID0gYnVmZmVyLmRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YSh0eXBlLCBidWZmZXIuZGF0YSwgZHJhd1R5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGNvbXBhYmlsaXR5IGJldHdlZW4gYSBnZW9tZXRyeSBhbmQgYSBwcm9ncmFtXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UElYSS5HZW9tZXRyeX0gZ2VvbWV0cnkgLSBHZW9tZXRyeSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7UElYSS5Qcm9ncmFtfSBwcm9ncmFtIC0gUHJvZ3JhbSBpbnN0YW5jZVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjaGVja0NvbXBhdGliaWxpdHkoZ2VvbWV0cnk6IEdlb21ldHJ5LCBwcm9ncmFtOiBQcm9ncmFtKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gZ2VvbWV0cnkgbXVzdCBoYXZlIGF0IGxlYXN0IGFsbCB0aGUgYXR0cmlidXRlcyB0aGF0IHRoZSBzaGFkZXIgcmVxdWlyZXMuXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5QXR0cmlidXRlcyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXM7XG4gICAgICAgIGNvbnN0IHNoYWRlckF0dHJpYnV0ZXMgPSBwcm9ncmFtLmF0dHJpYnV0ZURhdGE7XG5cbiAgICAgICAgZm9yIChjb25zdCBqIGluIHNoYWRlckF0dHJpYnV0ZXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghZ2VvbWV0cnlBdHRyaWJ1dGVzW2pdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc2hhZGVyIGFuZCBnZW9tZXRyeSBpbmNvbXBhdGlibGUsIGdlb21ldHJ5IG1pc3NpbmcgdGhlIFwiJHtqfVwiIGF0dHJpYnV0ZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBnZW9tZXRyeSBhbmQgcHJvZ3JhbSBhbmQgZ2VuZXJhdGVzIGEgdW5pcXVlIHNpZ25hdHVyZSBmb3IgdGhlbS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5HZW9tZXRyeX0gZ2VvbWV0cnkgLSB0byBnZXQgc2lnbmF0dXJlIGZyb21cbiAgICAgKiBAcGFyYW0ge1BJWEkuUHJvZ3JhbX0gcHJvZ3JhbSAtIHRvIHRlc3QgZ2VvbWV0cnkgYWdhaW5zdFxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IFVuaXF1ZSBzaWduYXR1cmUgb2YgdGhlIGdlb21ldHJ5IGFuZCBwcm9ncmFtXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBnZXRTaWduYXR1cmUoZ2VvbWV0cnk6IEdlb21ldHJ5LCBwcm9ncmFtOiBQcm9ncmFtKTogc3RyaW5nXG4gICAge1xuICAgICAgICBjb25zdCBhdHRyaWJzID0gZ2VvbWV0cnkuYXR0cmlidXRlcztcbiAgICAgICAgY29uc3Qgc2hhZGVyQXR0cmlidXRlcyA9IHByb2dyYW0uYXR0cmlidXRlRGF0YTtcblxuICAgICAgICBjb25zdCBzdHJpbmdzID0gWydnJywgZ2VvbWV0cnkuaWRdO1xuXG4gICAgICAgIGZvciAoY29uc3QgaSBpbiBhdHRyaWJzKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoc2hhZGVyQXR0cmlidXRlc1tpXSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzdHJpbmdzLnB1c2goaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3RyaW5ncy5qb2luKCctJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBvciBnZXRzIFZhbyB3aXRoIHRoZSBzYW1lIHN0cnVjdHVyZSBhcyB0aGUgZ2VvbWV0cnkgYW5kIHN0b3JlcyBpdCBvbiB0aGUgZ2VvbWV0cnkuXG4gICAgICogSWYgdmFvIGlzIGNyZWF0ZWQsIGl0IGlzIGJvdW5kIGF1dG9tYXRpY2FsbHkuXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtQSVhJLkdlb21ldHJ5fSBnZW9tZXRyeSAtIEluc3RhbmNlIG9mIGdlb21ldHJ5IHRvIHRvIGdlbmVyYXRlIFZhbyBmb3JcbiAgICAgKiBAcGFyYW0ge1BJWEkuUHJvZ3JhbX0gcHJvZ3JhbSAtIEluc3RhbmNlIG9mIHByb2dyYW1cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpbmNSZWZDb3VudD1mYWxzZV0gLSBJbmNyZW1lbnQgcmVmQ291bnQgb2YgYWxsIGdlb21ldHJ5IGJ1ZmZlcnNcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgaW5pdEdlb21ldHJ5VmFvKGdlb21ldHJ5OiBHZW9tZXRyeSwgcHJvZ3JhbTogUHJvZ3JhbSwgaW5jUmVmQ291bnQgPSB0cnVlKTogV2ViR0xWZXJ0ZXhBcnJheU9iamVjdFxuICAgIHtcbiAgICAgICAgdGhpcy5jaGVja0NvbXBhdGliaWxpdHkoZ2VvbWV0cnksIHByb2dyYW0pO1xuXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcbiAgICAgICAgY29uc3QgQ09OVEVYVF9VSUQgPSB0aGlzLkNPTlRFWFRfVUlEO1xuXG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IHRoaXMuZ2V0U2lnbmF0dXJlKGdlb21ldHJ5LCBwcm9ncmFtKTtcblxuICAgICAgICBjb25zdCB2YW9PYmplY3RIYXNoID0gZ2VvbWV0cnkuZ2xWZXJ0ZXhBcnJheU9iamVjdHNbdGhpcy5DT05URVhUX1VJRF07XG5cbiAgICAgICAgbGV0IHZhbyA9IHZhb09iamVjdEhhc2hbc2lnbmF0dXJlXTtcblxuICAgICAgICBpZiAodmFvKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyB0aGlzIHdpbGwgZ2l2ZSB1cyBlYXN5IGFjY2VzcyB0byB0aGUgdmFvXG4gICAgICAgICAgICB2YW9PYmplY3RIYXNoW3Byb2dyYW0uaWRdID0gdmFvO1xuXG4gICAgICAgICAgICByZXR1cm4gdmFvO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnVmZmVycyA9IGdlb21ldHJ5LmJ1ZmZlcnM7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzO1xuICAgICAgICBjb25zdCB0ZW1wU3RyaWRlOiBEaWN0PG51bWJlcj4gPSB7fTtcbiAgICAgICAgY29uc3QgdGVtcFN0YXJ0OiBEaWN0PG51bWJlcj4gPSB7fTtcblxuICAgICAgICBmb3IgKGNvbnN0IGogaW4gYnVmZmVycylcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcFN0cmlkZVtqXSA9IDA7XG4gICAgICAgICAgICB0ZW1wU3RhcnRbal0gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBqIGluIGF0dHJpYnV0ZXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghYXR0cmlidXRlc1tqXS5zaXplICYmIHByb2dyYW0uYXR0cmlidXRlRGF0YVtqXSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzW2pdLnNpemUgPSBwcm9ncmFtLmF0dHJpYnV0ZURhdGFbal0uc2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFhdHRyaWJ1dGVzW2pdLnNpemUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBQSVhJIEdlb21ldHJ5IGF0dHJpYnV0ZSAnJHtqfScgc2l6ZSBjYW5ub3QgYmUgZGV0ZXJtaW5lZCAobGlrZWx5IHRoZSBib3VuZCBzaGFkZXIgZG9lcyBub3QgaGF2ZSB0aGUgYXR0cmlidXRlKWApOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZW1wU3RyaWRlW2F0dHJpYnV0ZXNbal0uYnVmZmVyXSArPSBhdHRyaWJ1dGVzW2pdLnNpemUgKiBieXRlU2l6ZU1hcFthdHRyaWJ1dGVzW2pdLnR5cGVdO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBqIGluIGF0dHJpYnV0ZXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbal07XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJTaXplID0gYXR0cmlidXRlLnNpemU7XG5cbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUuc3RyaWRlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHRlbXBTdHJpZGVbYXR0cmlidXRlLmJ1ZmZlcl0gPT09IGF0dHJpYlNpemUgKiBieXRlU2l6ZU1hcFthdHRyaWJ1dGUudHlwZV0pXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuc3RyaWRlID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLnN0cmlkZSA9IHRlbXBTdHJpZGVbYXR0cmlidXRlLmJ1ZmZlcl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlLnN0YXJ0ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlLnN0YXJ0ID0gdGVtcFN0YXJ0W2F0dHJpYnV0ZS5idWZmZXJdO1xuXG4gICAgICAgICAgICAgICAgdGVtcFN0YXJ0W2F0dHJpYnV0ZS5idWZmZXJdICs9IGF0dHJpYlNpemUgKiBieXRlU2l6ZU1hcFthdHRyaWJ1dGUudHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YW8gPSBnbC5jcmVhdGVWZXJ0ZXhBcnJheSgpO1xuXG4gICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh2YW8pO1xuXG4gICAgICAgIC8vIGZpcnN0IHVwZGF0ZSAtIGFuZCBjcmVhdGUgdGhlIGJ1ZmZlcnMhXG4gICAgICAgIC8vIG9ubHkgY3JlYXRlIGEgZ2wgYnVmZmVyIGlmIGl0IGFjdHVhbGx5IGdldHNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBidWZmZXJzW2ldO1xuXG4gICAgICAgICAgICBpZiAoIWJ1ZmZlci5fZ2xCdWZmZXJzW0NPTlRFWFRfVUlEXSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBidWZmZXIuX2dsQnVmZmVyc1tDT05URVhUX1VJRF0gPSBuZXcgR0xCdWZmZXIoZ2wuY3JlYXRlQnVmZmVyKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFuYWdlZEJ1ZmZlcnNbYnVmZmVyLmlkXSA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICBidWZmZXIuZGlzcG9zZVJ1bm5lci5hZGQodGhpcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbmNSZWZDb3VudClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBidWZmZXIuX2dsQnVmZmVyc1tDT05URVhUX1VJRF0ucmVmQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPRE8gLSBtYXliZSBtYWtlIHRoaXMgYSBkYXRhIG9iamVjdD9cbiAgICAgICAgLy8gbGV0cyB3YWl0IHRvIHNlZSBpZiB3ZSBuZWVkIHRvIGZpcnN0IVxuXG4gICAgICAgIHRoaXMuYWN0aXZhdGVWYW8oZ2VvbWV0cnksIHByb2dyYW0pO1xuXG4gICAgICAgIHRoaXMuX2FjdGl2ZVZhbyA9IHZhbztcblxuICAgICAgICAvLyBhZGQgaXQgdG8gdGhlIGNhY2hlIVxuICAgICAgICB2YW9PYmplY3RIYXNoW3Byb2dyYW0uaWRdID0gdmFvO1xuICAgICAgICB2YW9PYmplY3RIYXNoW3NpZ25hdHVyZV0gPSB2YW87XG5cbiAgICAgICAgcmV0dXJuIHZhbztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyBidWZmZXJcbiAgICAgKiBAcGFyYW0ge1BJWEkuQnVmZmVyfSBidWZmZXIgLSBidWZmZXIgd2l0aCBkYXRhXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbY29udGV4dExvc3Q9ZmFsc2VdIC0gSWYgY29udGV4dCB3YXMgbG9zdCwgd2Ugc3VwcHJlc3MgZGVsZXRlVmVydGV4QXJyYXlcbiAgICAgKi9cbiAgICBkaXNwb3NlQnVmZmVyKGJ1ZmZlcjogQnVmZmVyLCBjb250ZXh0TG9zdD86IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMubWFuYWdlZEJ1ZmZlcnNbYnVmZmVyLmlkXSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHRoaXMubWFuYWdlZEJ1ZmZlcnNbYnVmZmVyLmlkXTtcblxuICAgICAgICBjb25zdCBnbEJ1ZmZlciA9IGJ1ZmZlci5fZ2xCdWZmZXJzW3RoaXMuQ09OVEVYVF9VSURdO1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XG5cbiAgICAgICAgYnVmZmVyLmRpc3Bvc2VSdW5uZXIucmVtb3ZlKHRoaXMpO1xuXG4gICAgICAgIGlmICghZ2xCdWZmZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGV4dExvc3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcihnbEJ1ZmZlci5idWZmZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIGJ1ZmZlci5fZ2xCdWZmZXJzW3RoaXMuQ09OVEVYVF9VSURdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIGdlb21ldHJ5XG4gICAgICogQHBhcmFtIHtQSVhJLkdlb21ldHJ5fSBnZW9tZXRyeSAtIEdlb21ldHJ5IHdpdGggYnVmZmVycy4gT25seSBWQU8gd2lsbCBiZSBkaXNwb3NlZFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbnRleHRMb3N0PWZhbHNlXSAtIElmIGNvbnRleHQgd2FzIGxvc3QsIHdlIHN1cHByZXNzIGRlbGV0ZVZlcnRleEFycmF5XG4gICAgICovXG4gICAgZGlzcG9zZUdlb21ldHJ5KGdlb21ldHJ5OiBHZW9tZXRyeSwgY29udGV4dExvc3Q/OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLm1hbmFnZWRHZW9tZXRyaWVzW2dlb21ldHJ5LmlkXSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHRoaXMubWFuYWdlZEdlb21ldHJpZXNbZ2VvbWV0cnkuaWRdO1xuXG4gICAgICAgIGNvbnN0IHZhb3MgPSBnZW9tZXRyeS5nbFZlcnRleEFycmF5T2JqZWN0c1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xuICAgICAgICBjb25zdCBidWZmZXJzID0gZ2VvbWV0cnkuYnVmZmVycztcblxuICAgICAgICBnZW9tZXRyeS5kaXNwb3NlUnVubmVyLnJlbW92ZSh0aGlzKTtcblxuICAgICAgICBpZiAoIXZhb3MpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVycy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgYnVmID0gYnVmZmVyc1tpXS5fZ2xCdWZmZXJzW3RoaXMuQ09OVEVYVF9VSURdO1xuXG4gICAgICAgICAgICBidWYucmVmQ291bnQtLTtcbiAgICAgICAgICAgIGlmIChidWYucmVmQ291bnQgPT09IDAgJiYgIWNvbnRleHRMb3N0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZUJ1ZmZlcihidWZmZXJzW2ldLCBjb250ZXh0TG9zdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRleHRMb3N0KVxuICAgICAgICB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHZhb0lkIGluIHZhb3MpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIG9ubHkgc2lnbmF0dXJlcywgZXZlcnl0aGluZyBlbHNlIGFyZSBjb3BpZXNcbiAgICAgICAgICAgICAgICBpZiAodmFvSWRbMF0gPT09ICdnJylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbyA9IHZhb3NbdmFvSWRdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVWYW8gPT09IHZhbylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBnbC5kZWxldGVWZXJ0ZXhBcnJheSh2YW8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBnZW9tZXRyeS5nbFZlcnRleEFycmF5T2JqZWN0c1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBkaXNwb3NlIGFsbCBXZWJHTCByZXNvdXJjZXMgb2YgYWxsIG1hbmFnZWQgZ2VvbWV0cmllcyBhbmQgYnVmZmVyc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbnRleHRMb3N0PWZhbHNlXSAtIElmIGNvbnRleHQgd2FzIGxvc3QsIHdlIHN1cHByZXNzIGBnbC5kZWxldGVgIGNhbGxzXG4gICAgICovXG4gICAgZGlzcG9zZUFsbChjb250ZXh0TG9zdD86IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBsZXQgYWxsOiBBcnJheTxhbnk+ID0gT2JqZWN0LmtleXModGhpcy5tYW5hZ2VkR2VvbWV0cmllcyk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGwubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUdlb21ldHJ5KHRoaXMubWFuYWdlZEdlb21ldHJpZXNbYWxsW2ldXSwgY29udGV4dExvc3QpO1xuICAgICAgICB9XG4gICAgICAgIGFsbCA9IE9iamVjdC5rZXlzKHRoaXMubWFuYWdlZEJ1ZmZlcnMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbC5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlQnVmZmVyKHRoaXMubWFuYWdlZEJ1ZmZlcnNbYWxsW2ldXSwgY29udGV4dExvc3QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWN0aXZhdGUgdmVydGV4IGFycmF5IG9iamVjdFxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UElYSS5HZW9tZXRyeX0gZ2VvbWV0cnkgLSBHZW9tZXRyeSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7UElYSS5Qcm9ncmFtfSBwcm9ncmFtIC0gU2hhZGVyIHByb2dyYW0gaW5zdGFuY2VcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYWN0aXZhdGVWYW8oZ2VvbWV0cnk6IEdlb21ldHJ5LCBwcm9ncmFtOiBQcm9ncmFtKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xuICAgICAgICBjb25zdCBDT05URVhUX1VJRCA9IHRoaXMuQ09OVEVYVF9VSUQ7XG4gICAgICAgIGNvbnN0IGJ1ZmZlcnMgPSBnZW9tZXRyeS5idWZmZXJzO1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gZ2VvbWV0cnkuYXR0cmlidXRlcztcblxuICAgICAgICBpZiAoZ2VvbWV0cnkuaW5kZXhCdWZmZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGZpcnN0IHVwZGF0ZSB0aGUgaW5kZXggYnVmZmVyIGlmIHdlIGhhdmUgb25lLi5cbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGdlb21ldHJ5LmluZGV4QnVmZmVyLl9nbEJ1ZmZlcnNbQ09OVEVYVF9VSURdLmJ1ZmZlcik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGFzdEJ1ZmZlciA9IG51bGw7XG5cbiAgICAgICAgLy8gYWRkIGEgbmV3IG9uZSFcbiAgICAgICAgZm9yIChjb25zdCBqIGluIGF0dHJpYnV0ZXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbal07XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBidWZmZXJzW2F0dHJpYnV0ZS5idWZmZXJdO1xuICAgICAgICAgICAgY29uc3QgZ2xCdWZmZXIgPSBidWZmZXIuX2dsQnVmZmVyc1tDT05URVhUX1VJRF07XG5cbiAgICAgICAgICAgIGlmIChwcm9ncmFtLmF0dHJpYnV0ZURhdGFbal0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RCdWZmZXIgIT09IGdsQnVmZmVyKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGdsQnVmZmVyLmJ1ZmZlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgbGFzdEJ1ZmZlciA9IGdsQnVmZmVyO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gcHJvZ3JhbS5hdHRyaWJ1dGVEYXRhW2pdLmxvY2F0aW9uO1xuXG4gICAgICAgICAgICAgICAgLy8gVE9ETyBpbnRyb2R1Y2Ugc3RhdGUgYWdhaW5cbiAgICAgICAgICAgICAgICAvLyB3ZSBjYW4gb3B0aW1pc2UgdGhpcyBmb3Igb2xkZXIgZGV2aWNlcyB0aGF0IGhhdmUgbm8gVkFPc1xuICAgICAgICAgICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIobG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5zaXplLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUudHlwZSB8fCBnbC5GTE9BVCxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLm5vcm1hbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5zdHJpZGUsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5zdGFydCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlLmluc3RhbmNlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBjYWxjdWxhdGUgaW5zdGFuY2UgY291bnQgYmFzZWQgb2YgdGhpcy4uLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNJbnN0YW5jZSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihsb2NhdGlvbiwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJ5IGVycm9yLCBHUFUgSW5zdGFuY2luZyBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgZGV2aWNlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3IHRoZSBnZW9tZXRyeVxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgLSB0aGUgdHlwZSBwcmltaXRpdmUgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtzaXplXSAtIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gYmUgcmVuZGVyZWRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIFN0YXJ0aW5nIGluZGV4XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtpbnN0YW5jZUNvdW50XSAtIHRoZSBudW1iZXIgb2YgaW5zdGFuY2VzIG9mIHRoZSBzZXQgb2YgZWxlbWVudHMgdG8gZXhlY3V0ZVxuICAgICAqL1xuICAgIGRyYXcodHlwZTogRFJBV19NT0RFUywgc2l6ZT86IG51bWJlciwgc3RhcnQ/OiBudW1iZXIsIGluc3RhbmNlQ291bnQ/OiBudW1iZXIpOiB0aGlzXG4gICAge1xuICAgICAgICBjb25zdCB7IGdsIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuX2FjdGl2ZUdlb21ldHJ5O1xuXG4gICAgICAgIC8vIFRPRE8uLiB0aGlzIHNob3VsZCBub3QgY2hhbmdlIHNvIG1heWJlIGNhY2hlIHRoZSBmdW5jdGlvbj9cblxuICAgICAgICBpZiAoZ2VvbWV0cnkuaW5kZXhCdWZmZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVTaXplID0gZ2VvbWV0cnkuaW5kZXhCdWZmZXIuZGF0YS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICAgICAgICAgIGNvbnN0IGdsVHlwZSA9IGJ5dGVTaXplID09PSAyID8gZ2wuVU5TSUdORURfU0hPUlQgOiBnbC5VTlNJR05FRF9JTlQ7XG5cbiAgICAgICAgICAgIGlmIChieXRlU2l6ZSA9PT0gMiB8fCAoYnl0ZVNpemUgPT09IDQgJiYgdGhpcy5jYW5Vc2VVSW50MzJFbGVtZW50SW5kZXgpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChnZW9tZXRyeS5pbnN0YW5jZWQpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG4gICAgICAgICAgICAgICAgICAgIGdsLmRyYXdFbGVtZW50c0luc3RhbmNlZCh0eXBlLCBzaXplIHx8IGdlb21ldHJ5LmluZGV4QnVmZmVyLmRhdGEubGVuZ3RoLCBnbFR5cGUsIChzdGFydCB8fCAwKSAqIGJ5dGVTaXplLCBpbnN0YW5jZUNvdW50IHx8IDEpO1xuICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG1heC1sZW4gKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICAgICAgICAgICAgICAgICAgICBnbC5kcmF3RWxlbWVudHModHlwZSwgc2l6ZSB8fCBnZW9tZXRyeS5pbmRleEJ1ZmZlci5kYXRhLmxlbmd0aCwgZ2xUeXBlLCAoc3RhcnQgfHwgMCkgKiBieXRlU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiAqL1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3Vuc3VwcG9ydGVkIGluZGV4IGJ1ZmZlciB0eXBlOiB1aW50MzInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnZW9tZXRyeS5pbnN0YW5jZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFRPRE8gbmVlZCBhIGJldHRlciB3YXkgdG8gY2FsY3VsYXRlIHNpemUuLlxuICAgICAgICAgICAgZ2wuZHJhd0FycmF5c0luc3RhbmNlZCh0eXBlLCBzdGFydCwgc2l6ZSB8fCBnZW9tZXRyeS5nZXRTaXplKCksIGluc3RhbmNlQ291bnQgfHwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC5kcmF3QXJyYXlzKHR5cGUsIHN0YXJ0LCBzaXplIHx8IGdlb21ldHJ5LmdldFNpemUoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbmJpbmQvcmVzZXQgZXZlcnl0aGluZ1xuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdW5iaW5kKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuZ2wuYmluZFZlcnRleEFycmF5KG51bGwpO1xuICAgICAgICB0aGlzLl9hY3RpdmVWYW8gPSBudWxsO1xuICAgICAgICB0aGlzLl9hY3RpdmVHZW9tZXRyeSA9IG51bGw7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IE1BU0tfVFlQRVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuXG5pbXBvcnQgdHlwZSB7IFJlY3RhbmdsZSwgTWF0cml4IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgdHlwZSB7IElGaWx0ZXJUYXJnZXQgfSBmcm9tICcuLi9maWx0ZXJzL0lGaWx0ZXJUYXJnZXQnO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uL1JlbmRlcmVyJztcblxuZXhwb3J0IGludGVyZmFjZSBJTWFza1RhcmdldCBleHRlbmRzIElGaWx0ZXJUYXJnZXRcbntcbiAgICByZW5kZXJhYmxlOiBib29sZWFuO1xuICAgIGlzU3ByaXRlPzogYm9vbGVhbjtcbiAgICB3b3JsZFRyYW5zZm9ybTogTWF0cml4O1xuICAgIGlzRmFzdFJlY3Q/KCk6IGJvb2xlYW47XG4gICAgZ2V0Qm91bmRzKHNraXBVcGRhdGU/OiBib29sZWFuKTogUmVjdGFuZ2xlO1xuICAgIHJlbmRlcihyZW5kZXJlcjogUmVuZGVyZXIpOiB2b2lkO1xufVxuLyoqXG4gKiBDb21wb25lbnQgZm9yIG1hc2tlZCBlbGVtZW50c1xuICpcbiAqIEhvbGRzIG1hc2sgbW9kZSBhbmQgdGVtcG9yYXJ5IGRhdGEgYWJvdXQgY3VycmVudCBtYXNrXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgTWFza0RhdGFcbntcbiAgICBwdWJsaWMgdHlwZTogTUFTS19UWVBFUztcbiAgICBwdWJsaWMgYXV0b0RldGVjdDogYm9vbGVhbjtcbiAgICBwdWJsaWMgbWFza09iamVjdDogSU1hc2tUYXJnZXQ7XG4gICAgcHVibGljIHBvb2xlZDogYm9vbGVhbjtcbiAgICBwdWJsaWMgaXNNYXNrRGF0YTogdHJ1ZTtcbiAgICBfc3RlbmNpbENvdW50ZXI6IG51bWJlcjtcbiAgICBfc2Npc3NvckNvdW50ZXI6IG51bWJlcjtcbiAgICBfc2Npc3NvclJlY3Q6IFJlY3RhbmdsZTtcbiAgICBfdGFyZ2V0OiBJTWFza1RhcmdldDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBNYXNrRGF0YVxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IFttYXNrT2JqZWN0PW51bGxdIC0gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIHRoZSBtYXNrXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobWFza09iamVjdDogSU1hc2tUYXJnZXQgPSBudWxsKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hc2sgdHlwZVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLk1BU0tfVFlQRVN9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBNQVNLX1RZUEVTLk5PTkU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgd2Uga25vdyB0aGUgbWFzayB0eXBlIGJlZm9yZWhhbmRcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hdXRvRGV0ZWN0ID0gdHJ1ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hpY2ggZWxlbWVudCB3ZSB1c2UgdG8gbWFza1xuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkRpc3BsYXlPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1hc2tPYmplY3QgPSBtYXNrT2JqZWN0IHx8IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQgYmVsb25ncyB0byBNYXNrU3lzdGVtIHBvb2xcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9vbGVkID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRvciBvZiB0aGUgdHlwZVxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc01hc2tEYXRhID0gdHJ1ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RlbmNpbCBjb3VudGVyIGFib3ZlIHRoZSBtYXNrIGluIHN0YWNrXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3N0ZW5jaWxDb3VudGVyID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNjaXNzb3IgY291bnRlciBhYm92ZSB0aGUgbWFzayBpbiBzdGFja1xuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9zY2lzc29yQ291bnRlciA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNjaXNzb3Igb3BlcmF0aW9uIGFib3ZlIHRoZSBtYXNrIGluIHN0YWNrLlxuICAgICAgICAgKiBOdWxsIGlmIF9zY2lzc29yQ291bnRlciBpcyB6ZXJvLCByZWN0YW5nbGUgaW5zdGFuY2UgaWYgcG9zaXRpdmUuXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuUmVjdGFuZ2xlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fc2Npc3NvclJlY3QgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYXJnZXRlZCBlbGVtZW50LiBUZW1wb3JhcnkgdmFyaWFibGUgc2V0IGJ5IE1hc2tTeXN0ZW1cbiAgICAgICAgICogQG1lbWJlciB7UElYSS5EaXNwbGF5T2JqZWN0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGFyZ2V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXNldHMgdGhlIG1hc2sgZGF0YSBhZnRlciBwb3BNYXNrKClcbiAgICAgKi9cbiAgICByZXNldCgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5wb29sZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubWFza09iamVjdCA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMudHlwZSA9IE1BU0tfVFlQRVMuTk9ORTtcblxuICAgICAgICAgICAgdGhpcy5hdXRvRGV0ZWN0ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3RhcmdldCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY29waWVzIGNvdW50ZXJzIGZyb20gbWFza0RhdGEgYWJvdmUsIGNhbGxlZCBmcm9tIHB1c2hNYXNrKClcbiAgICAgKiBAcGFyYW0ge1BJWEkuTWFza0RhdGF8bnVsbH0gbWFza0Fib3ZlXG4gICAgICovXG4gICAgY29weUNvdW50ZXJzT3JSZXNldChtYXNrQWJvdmU/OiBNYXNrRGF0YSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmIChtYXNrQWJvdmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N0ZW5jaWxDb3VudGVyID0gbWFza0Fib3ZlLl9zdGVuY2lsQ291bnRlcjtcbiAgICAgICAgICAgIHRoaXMuX3NjaXNzb3JDb3VudGVyID0gbWFza0Fib3ZlLl9zY2lzc29yQ291bnRlcjtcbiAgICAgICAgICAgIHRoaXMuX3NjaXNzb3JSZWN0ID0gbWFza0Fib3ZlLl9zY2lzc29yUmVjdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N0ZW5jaWxDb3VudGVyID0gMDtcbiAgICAgICAgICAgIHRoaXMuX3NjaXNzb3JDb3VudGVyID0gMDtcbiAgICAgICAgICAgIHRoaXMuX3NjaXNzb3JSZWN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgdHlwZSB7IERpY3QgfSBmcm9tICdAcGl4aS91dGlscyc7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSBnbCB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBUaGUgY3VycmVudCBXZWJHTCBjb250ZXh0IHtXZWJHTFByb2dyYW19XG4gKiBAcGFyYW0gdHlwZSB7TnVtYmVyfSB0aGUgdHlwZSwgY2FuIGJlIGVpdGhlciBWRVJURVhfU0hBREVSIG9yIEZSQUdNRU5UX1NIQURFUlxuICogQHBhcmFtIHNyYyB7c3RyaW5nfSBUaGUgdmVydGV4IHNoYWRlciBzb3VyY2UgYXMgYW4gYXJyYXkgb2Ygc3RyaW5ncy5cbiAqIEByZXR1cm4ge1dlYkdMU2hhZGVyfSB0aGUgc2hhZGVyXG4gKi9cbmZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dEJhc2UsIHR5cGU6IG51bWJlciwgc3JjOiBzdHJpbmcpOiBXZWJHTFNoYWRlclxue1xuICAgIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcblxuICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNyYyk7XG4gICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cblxuLyoqXG4gKiBAbWV0aG9kIGNvbXBpbGVQcm9ncmFtXG4gKiBAcHJpdmF0ZVxuICogQG1lbWJlcm9mIFBJWEkuZ2xDb3JlLnNoYWRlclxuICogQHBhcmFtIGdsIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IFRoZSBjdXJyZW50IFdlYkdMIGNvbnRleHQge1dlYkdMUHJvZ3JhbX1cbiAqIEBwYXJhbSB2ZXJ0ZXhTcmMge3N0cmluZ3xzdHJpbmdbXX0gVGhlIHZlcnRleCBzaGFkZXIgc291cmNlIGFzIGFuIGFycmF5IG9mIHN0cmluZ3MuXG4gKiBAcGFyYW0gZnJhZ21lbnRTcmMge3N0cmluZ3xzdHJpbmdbXX0gVGhlIGZyYWdtZW50IHNoYWRlciBzb3VyY2UgYXMgYW4gYXJyYXkgb2Ygc3RyaW5ncy5cbiAqIEBwYXJhbSBhdHRyaWJ1dGVMb2NhdGlvbnMge09iamVjdH0gQW4gYXR0cmlidXRlIGxvY2F0aW9uIG1hcCB0aGF0IGxldHMgeW91IG1hbnVhbGx5IHNldCB0aGUgYXR0cmlidXRlIGxvY2F0aW9uc1xuICogQHJldHVybiB7V2ViR0xQcm9ncmFtfSB0aGUgc2hhZGVyIHByb2dyYW1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBpbGVQcm9ncmFtKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHRCYXNlLCB2ZXJ0ZXhTcmM6IHN0cmluZywgZnJhZ21lbnRTcmM6IHN0cmluZyxcbiAgICBhdHRyaWJ1dGVMb2NhdGlvbnM/OiBEaWN0PG51bWJlcj4pOiBXZWJHTFByb2dyYW1cbntcbiAgICBjb25zdCBnbFZlcnRTaGFkZXIgPSBjb21waWxlU2hhZGVyKGdsLCBnbC5WRVJURVhfU0hBREVSLCB2ZXJ0ZXhTcmMpO1xuICAgIGNvbnN0IGdsRnJhZ1NoYWRlciA9IGNvbXBpbGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgZnJhZ21lbnRTcmMpO1xuXG4gICAgbGV0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG5cbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZ2xWZXJ0U2hhZGVyKTtcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZ2xGcmFnU2hhZGVyKTtcblxuICAgIC8vIG9wdGlvbmFsbHksIHNldCB0aGUgYXR0cmlidXRlcyBtYW51YWxseSBmb3IgdGhlIHByb2dyYW0gcmF0aGVyIHRoYW4gbGV0dGluZyBXZWJHTCBkZWNpZGUuLlxuICAgIGlmIChhdHRyaWJ1dGVMb2NhdGlvbnMpXG4gICAge1xuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gYXR0cmlidXRlTG9jYXRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC5iaW5kQXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgYXR0cmlidXRlTG9jYXRpb25zW2ldLCBpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuXG4gICAgLy8gaWYgbGlua2luZyBmYWlscywgdGhlbiBsb2cgYW5kIGNsZWFudXBcbiAgICBpZiAoIWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKVxuICAgIHtcbiAgICAgICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoZ2xWZXJ0U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybih2ZXJ0ZXhTcmMpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihnbC5nZXRTaGFkZXJJbmZvTG9nKGdsVmVydFNoYWRlcikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoZ2xGcmFnU2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihmcmFnbWVudFNyYyk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGdsLmdldFNoYWRlckluZm9Mb2coZ2xGcmFnU2hhZGVyKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmVycm9yKCdQaXhpLmpzIEVycm9yOiBDb3VsZCBub3QgaW5pdGlhbGl6ZSBzaGFkZXIuJyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2dsLlZBTElEQVRFX1NUQVRVUycsIGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuVkFMSURBVEVfU1RBVFVTKSk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2dsLmdldEVycm9yKCknLCBnbC5nZXRFcnJvcigpKTtcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIHByb2dyYW0gaW5mbyBsb2csIGxvZyBpdFxuICAgICAgICBpZiAoZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkgIT09ICcnKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BpeGkuanMgV2FybmluZzogZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coKScsIGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgIHByb2dyYW0gPSBudWxsO1xuICAgIH1cblxuICAgIC8vIGNsZWFuIHVwIHNvbWUgc2hhZGVyc1xuICAgIGdsLmRlbGV0ZVNoYWRlcihnbFZlcnRTaGFkZXIpO1xuICAgIGdsLmRlbGV0ZVNoYWRlcihnbEZyYWdTaGFkZXIpO1xuXG4gICAgcmV0dXJuIHByb2dyYW07XG59XG4iLCAiZnVuY3Rpb24gYm9vbGVhbkFycmF5KHNpemU6IG51bWJlcik6IEFycmF5PGJvb2xlYW4+XG57XG4gICAgY29uc3QgYXJyYXkgPSBuZXcgQXJyYXkoc2l6ZSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKVxuICAgIHtcbiAgICAgICAgYXJyYXlbaV0gPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJyYXk7XG59XG5cbi8qKlxuICogQG1ldGhvZCBkZWZhdWx0VmFsdWVcbiAqIEBtZW1iZXJvZiBQSVhJLmdsQ29yZS5zaGFkZXJcbiAqIEBwYXJhbSB0eXBlIHtTdHJpbmd9IFR5cGUgb2YgdmFsdWVcbiAqIEBwYXJhbSBzaXplIHtOdW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFZhbHVlKHR5cGU6IHN0cmluZywgc2l6ZTogbnVtYmVyKTogbnVtYmVyfEZsb2F0MzJBcnJheXxJbnQzMkFycmF5fGJvb2xlYW58Ym9vbGVhbltdXG57XG4gICAgc3dpdGNoICh0eXBlKVxuICAgIHtcbiAgICAgICAgY2FzZSAnZmxvYXQnOlxuICAgICAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgICAgY2FzZSAndmVjMic6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSgyICogc2l6ZSk7XG5cbiAgICAgICAgY2FzZSAndmVjMyc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSgzICogc2l6ZSk7XG5cbiAgICAgICAgY2FzZSAndmVjNCc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSg0ICogc2l6ZSk7XG5cbiAgICAgICAgY2FzZSAnaW50JzpcbiAgICAgICAgY2FzZSAnc2FtcGxlcjJEJzpcbiAgICAgICAgY2FzZSAnc2FtcGxlcjJEQXJyYXknOlxuICAgICAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgICAgY2FzZSAnaXZlYzInOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KDIgKiBzaXplKTtcblxuICAgICAgICBjYXNlICdpdmVjMyc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEludDMyQXJyYXkoMyAqIHNpemUpO1xuXG4gICAgICAgIGNhc2UgJ2l2ZWM0JzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheSg0ICogc2l6ZSk7XG5cbiAgICAgICAgY2FzZSAnYm9vbCc6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY2FzZSAnYnZlYzInOlxuXG4gICAgICAgICAgICByZXR1cm4gYm9vbGVhbkFycmF5KDIgKiBzaXplKTtcblxuICAgICAgICBjYXNlICdidmVjMyc6XG4gICAgICAgICAgICByZXR1cm4gYm9vbGVhbkFycmF5KDMgKiBzaXplKTtcblxuICAgICAgICBjYXNlICdidmVjNCc6XG4gICAgICAgICAgICByZXR1cm4gYm9vbGVhbkFycmF5KDQgKiBzaXplKTtcblxuICAgICAgICBjYXNlICdtYXQyJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFsxLCAwLFxuICAgICAgICAgICAgICAgIDAsIDFdKTtcblxuICAgICAgICBjYXNlICdtYXQzJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFsxLCAwLCAwLFxuICAgICAgICAgICAgICAgIDAsIDEsIDAsXG4gICAgICAgICAgICAgICAgMCwgMCwgMV0pO1xuXG4gICAgICAgIGNhc2UgJ21hdDQnOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDAsIDAsIDAsXG4gICAgICAgICAgICAgICAgMCwgMSwgMCwgMCxcbiAgICAgICAgICAgICAgICAwLCAwLCAxLCAwLFxuICAgICAgICAgICAgICAgIDAsIDAsIDAsIDFdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cbiIsICJpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJy4uLy4uL3NldHRpbmdzJztcbmltcG9ydCB7IEVOViB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbmNvbnN0IHVua25vd25Db250ZXh0ID0ge307XG5sZXQgY29udGV4dDogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IHVua25vd25Db250ZXh0IGFzIGFueTtcblxuLyoqXG4gKiByZXR1cm5zIGEgbGl0dGxlIFdlYkdMIGNvbnRleHQgdG8gdXNlIGZvciBwcm9ncmFtIGluc3BlY3Rpb24uXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGEgZ2wgY29udGV4dCB0byB0ZXN0IHdpdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRlc3RDb250ZXh0KCk6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRcbntcbiAgICBpZiAoY29udGV4dCA9PT0gdW5rbm93bkNvbnRleHQgfHwgKGNvbnRleHQgJiYgY29udGV4dC5pc0NvbnRleHRMb3N0KCkpKVxuICAgIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cbiAgICAgICAgbGV0IGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5QUkVGRVJfRU5WID49IEVOVi5XRUJHTDIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsMicsIHt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2wpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJywge30pXG4gICAgICAgICAgICB8fCAoY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcsIHt9KSBhcyBXZWJHTFJlbmRlcmluZ0NvbnRleHQpO1xuXG4gICAgICAgICAgICBpZiAoIWdsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGZhaWwsIG5vdCBhYmxlIHRvIGdldCBhIGNvbnRleHRcbiAgICAgICAgICAgICAgICBnbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gZm9yIHNoYWRlciB0ZXN0aW5nLi5cbiAgICAgICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2RyYXdfYnVmZmVycycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dCA9IGdsO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZXh0O1xufVxuIiwgImltcG9ydCB7IGdldFRlc3RDb250ZXh0IH0gZnJvbSAnLi9nZXRUZXN0Q29udGV4dCc7XG5pbXBvcnQgeyBQUkVDSVNJT04gfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuXG5sZXQgbWF4RnJhZ21lbnRQcmVjaXNpb246IHN0cmluZztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1heEZyYWdtZW50UHJlY2lzaW9uKCk6IHN0cmluZ1xue1xuICAgIGlmICghbWF4RnJhZ21lbnRQcmVjaXNpb24pXG4gICAge1xuICAgICAgICBtYXhGcmFnbWVudFByZWNpc2lvbiA9IFBSRUNJU0lPTi5NRURJVU07XG4gICAgICAgIGNvbnN0IGdsID0gZ2V0VGVzdENvbnRleHQoKTtcblxuICAgICAgICBpZiAoZ2wpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hhZGVyRnJhZ21lbnQgPSBnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuRlJBR01FTlRfU0hBREVSLCBnbC5ISUdIX0ZMT0FUKTtcblxuICAgICAgICAgICAgICAgIG1heEZyYWdtZW50UHJlY2lzaW9uID0gc2hhZGVyRnJhZ21lbnQucHJlY2lzaW9uID8gUFJFQ0lTSU9OLkhJR0ggOiBQUkVDSVNJT04uTUVESVVNO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1heEZyYWdtZW50UHJlY2lzaW9uO1xufVxuIiwgImltcG9ydCB7IFBSRUNJU0lPTiB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbi8qKlxuICogU2V0cyB0aGUgZmxvYXQgcHJlY2lzaW9uIG9uIHRoZSBzaGFkZXIsIGVuc3VyaW5nIHRoZSBkZXZpY2Ugc3VwcG9ydHMgdGhlIHJlcXVlc3QgcHJlY2lzaW9uLlxuICogSWYgdGhlIHByZWNpc2lvbiBpcyBhbHJlYWR5IHByZXNlbnQsIGl0IGp1c3QgZW5zdXJlcyB0aGF0IHRoZSBkZXZpY2UgaXMgYWJsZSB0byBoYW5kbGUgaXQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgLSBUaGUgc2hhZGVyIHNvdXJjZVxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RlZFByZWNpc2lvbiAtIFRoZSByZXF1ZXN0IGZsb2F0IHByZWNpc2lvbiBvZiB0aGUgc2hhZGVyLiBPcHRpb25zIGFyZSAnbG93cCcsICdtZWRpdW1wJyBvciAnaGlnaHAnLlxuICogQHBhcmFtIHtzdHJpbmd9IG1heFN1cHBvcnRlZFByZWNpc2lvbiAtIFRoZSBtYXhpbXVtIHByZWNpc2lvbiB0aGUgc2hhZGVyIHN1cHBvcnRzLlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gbW9kaWZpZWQgc2hhZGVyIHNvdXJjZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0UHJlY2lzaW9uKHNyYzogc3RyaW5nLCByZXF1ZXN0ZWRQcmVjaXNpb246IHN0cmluZywgbWF4U3VwcG9ydGVkUHJlY2lzaW9uOiBzdHJpbmcpOiBzdHJpbmdcbntcbiAgICBpZiAoc3JjLnN1YnN0cmluZygwLCA5KSAhPT0gJ3ByZWNpc2lvbicpXG4gICAge1xuICAgICAgICAvLyBubyBwcmVjaXNpb24gc3VwcGxpZWQsIHNvIFBpeGlKUyB3aWxsIGFkZCB0aGUgcmVxdWVzdGVkIGxldmVsLlxuICAgICAgICBsZXQgcHJlY2lzaW9uID0gcmVxdWVzdGVkUHJlY2lzaW9uO1xuXG4gICAgICAgIC8vIElmIGhpZ2hwIGlzIHJlcXVlc3RlZCBidXQgbm90IHN1cHBvcnRlZCwgZG93bmdyYWRlIHByZWNpc2lvbiB0byBhIGxldmVsIGFsbCBkZXZpY2VzIHN1cHBvcnQuXG4gICAgICAgIGlmIChyZXF1ZXN0ZWRQcmVjaXNpb24gPT09IFBSRUNJU0lPTi5ISUdIICYmIG1heFN1cHBvcnRlZFByZWNpc2lvbiAhPT0gUFJFQ0lTSU9OLkhJR0gpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHByZWNpc2lvbiA9IFBSRUNJU0lPTi5NRURJVU07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYHByZWNpc2lvbiAke3ByZWNpc2lvbn0gZmxvYXQ7XFxuJHtzcmN9YDtcbiAgICB9XG4gICAgZWxzZSBpZiAobWF4U3VwcG9ydGVkUHJlY2lzaW9uICE9PSBQUkVDSVNJT04uSElHSCAmJiBzcmMuc3Vic3RyaW5nKDAsIDE1KSA9PT0gJ3ByZWNpc2lvbiBoaWdocCcpXG4gICAge1xuICAgICAgICAvLyBwcmVjaXNpb24gd2FzIHN1cHBsaWVkLCBidXQgYXQgYSBsZXZlbCB0aGlzIGRldmljZSBkb2VzIG5vdCBzdXBwb3J0LCBzbyBkb3duZ3JhZGluZyB0byBtZWRpdW1wLlxuICAgICAgICByZXR1cm4gc3JjLnJlcGxhY2UoJ3ByZWNpc2lvbiBoaWdocCcsICdwcmVjaXNpb24gbWVkaXVtcCcpO1xuICAgIH1cblxuICAgIHJldHVybiBzcmM7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBEaWN0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuXG5jb25zdCBHTFNMX1RPX1NJWkU6IERpY3Q8bnVtYmVyPiA9IHtcbiAgICBmbG9hdDogICAgMSxcbiAgICB2ZWMyOiAgICAgMixcbiAgICB2ZWMzOiAgICAgMyxcbiAgICB2ZWM0OiAgICAgNCxcblxuICAgIGludDogICAgICAxLFxuICAgIGl2ZWMyOiAgICAyLFxuICAgIGl2ZWMzOiAgICAzLFxuICAgIGl2ZWM0OiAgICA0LFxuXG4gICAgYm9vbDogICAgIDEsXG4gICAgYnZlYzI6ICAgIDIsXG4gICAgYnZlYzM6ICAgIDMsXG4gICAgYnZlYzQ6ICAgIDQsXG5cbiAgICBtYXQyOiAgICAgNCxcbiAgICBtYXQzOiAgICAgOSxcbiAgICBtYXQ0OiAgICAgMTYsXG5cbiAgICBzYW1wbGVyMkQ6ICAxLFxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCBtYXBTaXplXG4gKiBAbWVtYmVyb2YgUElYSS5nbENvcmUuc2hhZGVyXG4gKiBAcGFyYW0gdHlwZSB7U3RyaW5nfVxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwU2l6ZSh0eXBlOiBzdHJpbmcpOiBudW1iZXJcbntcbiAgICByZXR1cm4gR0xTTF9UT19TSVpFW3R5cGVdO1xufVxuIiwgImltcG9ydCB0eXBlIHsgRGljdCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcblxubGV0IEdMX1RBQkxFOiBEaWN0PHN0cmluZz4gPSBudWxsO1xuXG5jb25zdCBHTF9UT19HTFNMX1RZUEVTOiBEaWN0PHN0cmluZz4gPSB7XG4gICAgRkxPQVQ6ICAgICAgICdmbG9hdCcsXG4gICAgRkxPQVRfVkVDMjogICd2ZWMyJyxcbiAgICBGTE9BVF9WRUMzOiAgJ3ZlYzMnLFxuICAgIEZMT0FUX1ZFQzQ6ICAndmVjNCcsXG5cbiAgICBJTlQ6ICAgICAgICAgJ2ludCcsXG4gICAgSU5UX1ZFQzI6ICAgICdpdmVjMicsXG4gICAgSU5UX1ZFQzM6ICAgICdpdmVjMycsXG4gICAgSU5UX1ZFQzQ6ICAgICdpdmVjNCcsXG5cbiAgICBCT09MOiAgICAgICAgJ2Jvb2wnLFxuICAgIEJPT0xfVkVDMjogICAnYnZlYzInLFxuICAgIEJPT0xfVkVDMzogICAnYnZlYzMnLFxuICAgIEJPT0xfVkVDNDogICAnYnZlYzQnLFxuXG4gICAgRkxPQVRfTUFUMjogICdtYXQyJyxcbiAgICBGTE9BVF9NQVQzOiAgJ21hdDMnLFxuICAgIEZMT0FUX01BVDQ6ICAnbWF0NCcsXG5cbiAgICBTQU1QTEVSXzJEOiAgICAgICAgICAgICAgJ3NhbXBsZXIyRCcsXG4gICAgSU5UX1NBTVBMRVJfMkQ6ICAgICAgICAgICdzYW1wbGVyMkQnLFxuICAgIFVOU0lHTkVEX0lOVF9TQU1QTEVSXzJEOiAnc2FtcGxlcjJEJyxcbiAgICBTQU1QTEVSX0NVQkU6ICAgICAgICAgICAgICAnc2FtcGxlckN1YmUnLFxuICAgIElOVF9TQU1QTEVSX0NVQkU6ICAgICAgICAgICdzYW1wbGVyQ3ViZScsXG4gICAgVU5TSUdORURfSU5UX1NBTVBMRVJfQ1VCRTogJ3NhbXBsZXJDdWJlJyxcbiAgICBTQU1QTEVSXzJEX0FSUkFZOiAgICAgICAgICAgICAgJ3NhbXBsZXIyREFycmF5JyxcbiAgICBJTlRfU0FNUExFUl8yRF9BUlJBWTogICAgICAgICAgJ3NhbXBsZXIyREFycmF5JyxcbiAgICBVTlNJR05FRF9JTlRfU0FNUExFUl8yRF9BUlJBWTogJ3NhbXBsZXIyREFycmF5Jyxcbn07XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzXG5leHBvcnQgZnVuY3Rpb24gbWFwVHlwZShnbDogYW55LCB0eXBlOiBudW1iZXIpOiBzdHJpbmdcbntcbiAgICBpZiAoIUdMX1RBQkxFKVxuICAgIHtcbiAgICAgICAgY29uc3QgdHlwZU5hbWVzID0gT2JqZWN0LmtleXMoR0xfVE9fR0xTTF9UWVBFUyk7XG5cbiAgICAgICAgR0xfVEFCTEUgPSB7fTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVOYW1lcy5sZW5ndGg7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdG4gPSB0eXBlTmFtZXNbaV07XG5cbiAgICAgICAgICAgIEdMX1RBQkxFW2dsW3RuXV0gPSBHTF9UT19HTFNMX1RZUEVTW3RuXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBHTF9UQUJMRVt0eXBlXTtcbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzICovXG4vLyBQYXJzZXJzLCBlYWNoIG9uZSBvZiB0aGVzZSB3aWxsIHRha2UgYSBsb29rIGF0IHRoZSB0eXBlIG9mIHNoYWRlciBwcm9wZXJ0eSBhbmQgdW5pZm9ybS5cbi8vIGlmIHRoZXkgcGFzcyB0aGUgdGVzdCBmdW5jdGlvbiB0aGVuIHRoZSBjb2RlIGZ1bmN0aW9uIGlzIGNhbGxlZCB0aGF0IHJldHVybnMgYSB0aGUgc2hhZGVyIHVwbG9hZCBjb2RlIGZvciB0aGF0IHVuaWZvcm0uXG4vLyBTaGFkZXIgdXBsb2FkIGNvZGUgaXMgYXV0b21hZ2ljYWxseSBnZW5lcmF0ZWQgd2l0aCB0aGVzZSBwYXJzZXJzLlxuLy8gSWYgbm8gcGFyc2VyIGlzIHZhbGlkIHRoZW4gdGhlIGRlZmF1bHQgdXBsb2FkIGZ1bmN0aW9ucyBhcmUgdXNlZC5cbi8vIGV4cG9zaW5nIFBhcnNlcnMgbWVhbnMgdGhhdCBjdXN0b20gdXBsb2FkIGxvZ2ljIGNhbiBiZSBhZGRlZCB0byBwaXhpJ3Mgc2hhZGVycy5cbi8vIEEgZ29vZCBleGFtcGxlIHdvdWxkIGJlIGEgcGl4aSByZWN0YW5nbGUgY2FuIGJlIGRpcmVjdGx5IHNldCBvbiBhIHVuaWZvcm0uXG4vLyBJZiB0aGUgc2hhZGVyIHNlZXMgaXQgaXQga25vd3MgaG93IHRvIHVwbG9hZCB0aGUgcmVjdGFuZ2xlIHN0cnVjdHVyZSBhcyBhIHZlYzRcbi8vIGZvcm1hdCBpcyBhcyBmb2xsb3dzOlxuLy9cbi8vIHtcbi8vICAgICB0ZXN0OiAoZGF0YSwgdW5pZm9ybSkgPT4ge30gPC0tLSB0ZXN0IGlzIHRoaXMgY29kZSBzaG91bGQgYmUgdXNlZCBmb3IgdGhpcyB1bmlmb3JtXG4vLyAgICAgY29kZTogKG5hbWUsIHVuaWZvcm0pID0+IHt9IDwtLS0gcmV0dXJucyB0aGUgc3RyaW5nIG9mIHRoZSBwaWVjZSBvZiBjb2RlIHRoYXQgdXBsb2FkcyB0aGUgdW5pZm9ybVxuLy8gfVxuXG5leHBvcnQgaW50ZXJmYWNlIElVbmlmb3JtUGFyc2VyXG57XG4gICAgdGVzdChkYXRhOiB1bmtub3duLCB1bmlmb3JtOiBhbnkpOiBib29sZWFuO1xuICAgIGNvZGUobmFtZTogc3RyaW5nLCB1bmlmb3JtOiBhbnkpOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCB1bmlmb3JtUGFyc2VyczogSVVuaWZvcm1QYXJzZXJbXSA9IFtcblxuICAgIC8vIGEgZmxvYXQgY2FjaGUgbGF5ZXJcbiAgICB7XG4gICAgICAgIHRlc3Q6IChkYXRhOiBhbnkpOiBib29sZWFuID0+XG4gICAgICAgICAgICBkYXRhLnR5cGUgPT09ICdmbG9hdCcgJiYgZGF0YS5zaXplID09PSAxLFxuICAgICAgICBjb2RlOiAobmFtZTogc3RyaW5nKTogc3RyaW5nID0+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICBpZih1dltcIiR7bmFtZX1cIl0gIT09IHVkW1wiJHtuYW1lfVwiXS52YWx1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB1ZFtcIiR7bmFtZX1cIl0udmFsdWUgPSB1dltcIiR7bmFtZX1cIl1cbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtMWYodWRbXCIke25hbWV9XCJdLmxvY2F0aW9uLCB1dltcIiR7bmFtZX1cIl0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBgLFxuICAgIH0sXG4gICAgLy8gaGFuZGxpbmcgc2FtcGxlcnNcbiAgICB7XG4gICAgICAgIHRlc3Q6IChkYXRhOiBhbnkpOiBib29sZWFuID0+XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuICAgICAgICAgICAgKGRhdGEudHlwZSA9PT0gJ3NhbXBsZXIyRCcgfHwgZGF0YS50eXBlID09PSAnc2FtcGxlckN1YmUnIHx8IGRhdGEudHlwZSA9PT0gJ3NhbXBsZXIyREFycmF5JykgJiYgZGF0YS5zaXplID09PSAxICYmICFkYXRhLmlzQXJyYXksXG4gICAgICAgIGNvZGU6IChuYW1lOiBzdHJpbmcpOiBzdHJpbmcgPT4gYHQgPSBzeW5jRGF0YS50ZXh0dXJlQ291bnQrKztcblxuICAgICAgICAgICAgcmVuZGVyZXIudGV4dHVyZS5iaW5kKHV2W1wiJHtuYW1lfVwiXSwgdCk7XG5cbiAgICAgICAgICAgIGlmKHVkW1wiJHtuYW1lfVwiXS52YWx1ZSAhPT0gdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB1ZFtcIiR7bmFtZX1cIl0udmFsdWUgPSB0O1xuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0xaSh1ZFtcIiR7bmFtZX1cIl0ubG9jYXRpb24sIHQpO1xcbjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBtYXgtbGVuXG4gICAgICAgICAgICB9YCxcbiAgICB9LFxuICAgIC8vIHVwbG9hZGluZyBwaXhpIG1hdHJpeCBvYmplY3QgdG8gbWF0M1xuICAgIHtcbiAgICAgICAgdGVzdDogKGRhdGE6IGFueSwgdW5pZm9ybTogYW55KTogYm9vbGVhbiA9PlxuICAgICAgICAgICAgZGF0YS50eXBlID09PSAnbWF0MycgJiYgZGF0YS5zaXplID09PSAxICYmIHVuaWZvcm0uYSAhPT0gdW5kZWZpbmVkLFxuICAgICAgICBjb2RlOiAobmFtZTogc3RyaW5nKTogc3RyaW5nID0+XG5cbiAgICAgICAgICAgIC8vIFRPRE8gYW5kIHNvbWUgc21hcnQgY2FjaGluZyBkaXJ0eSBpZHMgaGVyZSFcbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYodWRbXCIke25hbWV9XCJdLmxvY2F0aW9uLCBmYWxzZSwgdXZbXCIke25hbWV9XCJdLnRvQXJyYXkodHJ1ZSkpO1xuICAgICAgICAgICAgYFxuICAgICAgICAsXG5cbiAgICB9LFxuICAgIC8vIHVwbG9hZGluZyBhIHBpeGkgcG9pbnQgYXMgYSB2ZWMyIHdpdGggY2FjaGluZyBsYXllclxuICAgIHtcbiAgICAgICAgdGVzdDogKGRhdGE6IGFueSwgdW5pZm9ybTogYW55KTogYm9vbGVhbiA9PlxuICAgICAgICAgICAgZGF0YS50eXBlID09PSAndmVjMicgJiYgZGF0YS5zaXplID09PSAxICYmIHVuaWZvcm0ueCAhPT0gdW5kZWZpbmVkLFxuICAgICAgICBjb2RlOiAobmFtZTogc3RyaW5nKTogc3RyaW5nID0+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgY3YgPSB1ZFtcIiR7bmFtZX1cIl0udmFsdWU7XG4gICAgICAgICAgICAgICAgdiA9IHV2W1wiJHtuYW1lfVwiXTtcblxuICAgICAgICAgICAgICAgIGlmKGN2WzBdICE9PSB2LnggfHwgY3ZbMV0gIT09IHYueSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGN2WzBdID0gdi54O1xuICAgICAgICAgICAgICAgICAgICBjdlsxXSA9IHYueTtcbiAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTJmKHVkW1wiJHtuYW1lfVwiXS5sb2NhdGlvbiwgdi54LCB2LnkpO1xuICAgICAgICAgICAgICAgIH1gLFxuICAgIH0sXG4gICAgLy8gY2FjaGluZyBsYXllciBmb3IgYSB2ZWMyXG4gICAge1xuICAgICAgICB0ZXN0OiAoZGF0YTogYW55KTogYm9vbGVhbiA9PlxuICAgICAgICAgICAgZGF0YS50eXBlID09PSAndmVjMicgJiYgZGF0YS5zaXplID09PSAxLFxuICAgICAgICBjb2RlOiAobmFtZTogc3RyaW5nKTogc3RyaW5nID0+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgY3YgPSB1ZFtcIiR7bmFtZX1cIl0udmFsdWU7XG4gICAgICAgICAgICAgICAgdiA9IHV2W1wiJHtuYW1lfVwiXTtcblxuICAgICAgICAgICAgICAgIGlmKGN2WzBdICE9PSB2WzBdIHx8IGN2WzFdICE9PSB2WzFdKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY3ZbMF0gPSB2WzBdO1xuICAgICAgICAgICAgICAgICAgICBjdlsxXSA9IHZbMV07XG4gICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0yZih1ZFtcIiR7bmFtZX1cIl0ubG9jYXRpb24sIHZbMF0sIHZbMV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGAsXG4gICAgfSxcbiAgICAvLyB1cGxvYWQgYSBwaXhpIHJlY3RhbmdsZSBhcyBhIHZlYzQgd2l0aCBjYWNoaW5nIGxheWVyXG4gICAge1xuICAgICAgICB0ZXN0OiAoZGF0YTogYW55LCB1bmlmb3JtOiBhbnkpOiBib29sZWFuID0+XG4gICAgICAgICAgICBkYXRhLnR5cGUgPT09ICd2ZWM0JyAmJiBkYXRhLnNpemUgPT09IDEgJiYgdW5pZm9ybS53aWR0aCAhPT0gdW5kZWZpbmVkLFxuXG4gICAgICAgIGNvZGU6IChuYW1lOiBzdHJpbmcpOiBzdHJpbmcgPT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICBjdiA9IHVkW1wiJHtuYW1lfVwiXS52YWx1ZTtcbiAgICAgICAgICAgICAgICB2ID0gdXZbXCIke25hbWV9XCJdO1xuXG4gICAgICAgICAgICAgICAgaWYoY3ZbMF0gIT09IHYueCB8fCBjdlsxXSAhPT0gdi55IHx8IGN2WzJdICE9PSB2LndpZHRoIHx8IGN2WzNdICE9PSB2LmhlaWdodClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGN2WzBdID0gdi54O1xuICAgICAgICAgICAgICAgICAgICBjdlsxXSA9IHYueTtcbiAgICAgICAgICAgICAgICAgICAgY3ZbMl0gPSB2LndpZHRoO1xuICAgICAgICAgICAgICAgICAgICBjdlszXSA9IHYuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtNGYodWRbXCIke25hbWV9XCJdLmxvY2F0aW9uLCB2LngsIHYueSwgdi53aWR0aCwgdi5oZWlnaHQpXG4gICAgICAgICAgICAgICAgfWAsXG4gICAgfSxcbiAgICAvLyBhIGNhY2hpbmcgbGF5ZXIgZm9yIHZlYzQgdXBsb2FkaW5nXG4gICAge1xuICAgICAgICB0ZXN0OiAoZGF0YTogYW55KTogYm9vbGVhbiA9PlxuICAgICAgICAgICAgZGF0YS50eXBlID09PSAndmVjNCcgJiYgZGF0YS5zaXplID09PSAxLFxuICAgICAgICBjb2RlOiAobmFtZTogc3RyaW5nKTogc3RyaW5nID0+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgY3YgPSB1ZFtcIiR7bmFtZX1cIl0udmFsdWU7XG4gICAgICAgICAgICAgICAgdiA9IHV2W1wiJHtuYW1lfVwiXTtcblxuICAgICAgICAgICAgICAgIGlmKGN2WzBdICE9PSB2WzBdIHx8IGN2WzFdICE9PSB2WzFdIHx8IGN2WzJdICE9PSB2WzJdIHx8IGN2WzNdICE9PSB2WzNdKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY3ZbMF0gPSB2WzBdO1xuICAgICAgICAgICAgICAgICAgICBjdlsxXSA9IHZbMV07XG4gICAgICAgICAgICAgICAgICAgIGN2WzJdID0gdlsyXTtcbiAgICAgICAgICAgICAgICAgICAgY3ZbM10gPSB2WzNdO1xuXG4gICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00Zih1ZFtcIiR7bmFtZX1cIl0ubG9jYXRpb24sIHZbMF0sIHZbMV0sIHZbMl0sIHZbM10pXG4gICAgICAgICAgICAgICAgfWAsXG4gICAgfSxcbl07XG5cbiIsICJpbXBvcnQgeyB1bmlmb3JtUGFyc2VycyB9IGZyb20gJy4vdW5pZm9ybVBhcnNlcnMnO1xuXG5pbXBvcnQgdHlwZSB7IFVuaWZvcm1Hcm91cCB9IGZyb20gJy4uL1VuaWZvcm1Hcm91cCc7XG5pbXBvcnQgdHlwZSB7IERpY3QgfSBmcm9tICdAcGl4aS91dGlscyc7XG5cbmV4cG9ydCB0eXBlIFVuaWZvcm1zU3luY0NhbGxiYWNrID0gKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xuXG4vLyBjdiA9IENhY2hlZFZhbHVlXG4vLyB2ID0gdmFsdWVcbi8vIHVkID0gdW5pZm9ybURhdGFcbi8vIHV2ID0gdW5pZm9ybVZhbHVlXG4vLyBsID0gbG9jYXRpb25cbmNvbnN0IEdMU0xfVE9fU0lOR0xFX1NFVFRFUlNfQ0FDSEVEOiBEaWN0PHN0cmluZz4gPSB7XG5cbiAgICBmbG9hdDogYFxuICAgIGlmKGN2ICE9PSB2KVxuICAgIHtcbiAgICAgICAgY3YudiA9IHY7XG4gICAgICAgIGdsLnVuaWZvcm0xZihsb2NhdGlvbiwgdilcbiAgICB9YCxcblxuICAgIHZlYzI6IGBcbiAgICBpZihjdlswXSAhPT0gdlswXSB8fCBjdlsxXSAhPT0gdlsxXSlcbiAgICB7XG4gICAgICAgIGN2WzBdID0gdlswXTtcbiAgICAgICAgY3ZbMV0gPSB2WzFdO1xuICAgICAgICBnbC51bmlmb3JtMmYobG9jYXRpb24sIHZbMF0sIHZbMV0pXG4gICAgfWAsXG5cbiAgICB2ZWMzOiBgXG4gICAgaWYoY3ZbMF0gIT09IHZbMF0gfHwgY3ZbMV0gIT09IHZbMV0gfHwgY3ZbMl0gIT09IHZbMl0pXG4gICAge1xuICAgICAgICBjdlswXSA9IHZbMF07XG4gICAgICAgIGN2WzFdID0gdlsxXTtcbiAgICAgICAgY3ZbMl0gPSB2WzJdO1xuXG4gICAgICAgIGdsLnVuaWZvcm0zZihsb2NhdGlvbiwgdlswXSwgdlsxXSwgdlsyXSlcbiAgICB9YCxcblxuICAgIHZlYzQ6ICAgICAnZ2wudW5pZm9ybTRmKGxvY2F0aW9uLCB2WzBdLCB2WzFdLCB2WzJdLCB2WzNdKScsXG5cbiAgICBpbnQ6ICAgICAgJ2dsLnVuaWZvcm0xaShsb2NhdGlvbiwgdiknLFxuICAgIGl2ZWMyOiAgICAnZ2wudW5pZm9ybTJpKGxvY2F0aW9uLCB2WzBdLCB2WzFdKScsXG4gICAgaXZlYzM6ICAgICdnbC51bmlmb3JtM2kobG9jYXRpb24sIHZbMF0sIHZbMV0sIHZbMl0pJyxcbiAgICBpdmVjNDogICAgJ2dsLnVuaWZvcm00aShsb2NhdGlvbiwgdlswXSwgdlsxXSwgdlsyXSwgdlszXSknLFxuXG4gICAgYm9vbDogICAgICdnbC51bmlmb3JtMWkobG9jYXRpb24sIHYpJyxcbiAgICBidmVjMjogICAgJ2dsLnVuaWZvcm0yaShsb2NhdGlvbiwgdlswXSwgdlsxXSknLFxuICAgIGJ2ZWMzOiAgICAnZ2wudW5pZm9ybTNpKGxvY2F0aW9uLCB2WzBdLCB2WzFdLCB2WzJdKScsXG4gICAgYnZlYzQ6ICAgICdnbC51bmlmb3JtNGkobG9jYXRpb24sIHZbMF0sIHZbMV0sIHZbMl0sIHZbM10pJyxcblxuICAgIG1hdDI6ICAgICAnZ2wudW5pZm9ybU1hdHJpeDJmdihsb2NhdGlvbiwgZmFsc2UsIHYpJyxcbiAgICBtYXQzOiAgICAgJ2dsLnVuaWZvcm1NYXRyaXgzZnYobG9jYXRpb24sIGZhbHNlLCB2KScsXG4gICAgbWF0NDogICAgICdnbC51bmlmb3JtTWF0cml4NGZ2KGxvY2F0aW9uLCBmYWxzZSwgdiknLFxuXG4gICAgc2FtcGxlcjJEOiAgICAgICdnbC51bmlmb3JtMWkobG9jYXRpb24sIHYpJyxcbiAgICBzYW1wbGVyQ3ViZTogICAgJ2dsLnVuaWZvcm0xaShsb2NhdGlvbiwgdiknLFxuICAgIHNhbXBsZXIyREFycmF5OiAnZ2wudW5pZm9ybTFpKGxvY2F0aW9uLCB2KScsXG59O1xuXG5jb25zdCBHTFNMX1RPX0FSUkFZX1NFVFRFUlM6IERpY3Q8c3RyaW5nPiA9IHtcblxuICAgIGZsb2F0OiAgICBgZ2wudW5pZm9ybTFmdihsb2NhdGlvbiwgdilgLFxuXG4gICAgdmVjMjogICAgIGBnbC51bmlmb3JtMmZ2KGxvY2F0aW9uLCB2KWAsXG4gICAgdmVjMzogICAgIGBnbC51bmlmb3JtM2Z2KGxvY2F0aW9uLCB2KWAsXG4gICAgdmVjNDogICAgICdnbC51bmlmb3JtNGZ2KGxvY2F0aW9uLCB2KScsXG5cbiAgICBtYXQ0OiAgICAgJ2dsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb24sIGZhbHNlLCB2KScsXG4gICAgbWF0MzogICAgICdnbC51bmlmb3JtTWF0cml4M2Z2KGxvY2F0aW9uLCBmYWxzZSwgdiknLFxuICAgIG1hdDI6ICAgICAnZ2wudW5pZm9ybU1hdHJpeDJmdihsb2NhdGlvbiwgZmFsc2UsIHYpJyxcblxuICAgIGludDogICAgICAnZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdiknLFxuICAgIGl2ZWMyOiAgICAnZ2wudW5pZm9ybTJpdihsb2NhdGlvbiwgdiknLFxuICAgIGl2ZWMzOiAgICAnZ2wudW5pZm9ybTNpdihsb2NhdGlvbiwgdiknLFxuICAgIGl2ZWM0OiAgICAnZ2wudW5pZm9ybTRpdihsb2NhdGlvbiwgdiknLFxuXG4gICAgYm9vbDogICAgICdnbC51bmlmb3JtMWl2KGxvY2F0aW9uLCB2KScsXG4gICAgYnZlYzI6ICAgICdnbC51bmlmb3JtMml2KGxvY2F0aW9uLCB2KScsXG4gICAgYnZlYzM6ICAgICdnbC51bmlmb3JtM2l2KGxvY2F0aW9uLCB2KScsXG4gICAgYnZlYzQ6ICAgICdnbC51bmlmb3JtNGl2KGxvY2F0aW9uLCB2KScsXG5cbiAgICBzYW1wbGVyMkQ6ICAgICAgJ2dsLnVuaWZvcm0xaXYobG9jYXRpb24sIHYpJyxcbiAgICBzYW1wbGVyQ3ViZTogICAgJ2dsLnVuaWZvcm0xaXYobG9jYXRpb24sIHYpJyxcbiAgICBzYW1wbGVyMkRBcnJheTogJ2dsLnVuaWZvcm0xaXYobG9jYXRpb24sIHYpJyxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVVuaWZvcm1zU3luYyhncm91cDogVW5pZm9ybUdyb3VwLCB1bmlmb3JtRGF0YTogRGljdDxhbnk+KTogVW5pZm9ybXNTeW5jQ2FsbGJhY2tcbntcbiAgICBjb25zdCBmdW5jRnJhZ21lbnRzID0gW2BcbiAgICAgICAgdmFyIHYgPSBudWxsO1xuICAgICAgICB2YXIgY3YgPSBudWxsXG4gICAgICAgIHZhciB0ID0gMDtcbiAgICAgICAgdmFyIGdsID0gcmVuZGVyZXIuZ2xcbiAgICBgXTtcblxuICAgIGZvciAoY29uc3QgaSBpbiBncm91cC51bmlmb3JtcylcbiAgICB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB1bmlmb3JtRGF0YVtpXTtcblxuICAgICAgICBpZiAoIWRhdGEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChncm91cC51bmlmb3Jtc1tpXS5ncm91cClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmdW5jRnJhZ21lbnRzLnB1c2goYFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5zaGFkZXIuc3luY1VuaWZvcm1Hcm91cCh1dltcIiR7aX1cIl0sIHN5bmNEYXRhKTtcbiAgICAgICAgICAgICAgICBgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1bmlmb3JtID0gZ3JvdXAudW5pZm9ybXNbaV07XG5cbiAgICAgICAgbGV0IHBhcnNlZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdW5pZm9ybVBhcnNlcnMubGVuZ3RoOyBqKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh1bmlmb3JtUGFyc2Vyc1tqXS50ZXN0KGRhdGEsIHVuaWZvcm0pKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZ1bmNGcmFnbWVudHMucHVzaCh1bmlmb3JtUGFyc2Vyc1tqXS5jb2RlKGksIHVuaWZvcm0pKTtcbiAgICAgICAgICAgICAgICBwYXJzZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBhcnNlZClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVUeXBlID0gKGRhdGEuc2l6ZSA9PT0gMSkgPyBHTFNMX1RPX1NJTkdMRV9TRVRURVJTX0NBQ0hFRCA6IEdMU0xfVE9fQVJSQVlfU0VUVEVSUztcblxuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSAgdGVtcGxhdGVUeXBlW2RhdGEudHlwZV0ucmVwbGFjZSgnbG9jYXRpb24nLCBgdWRbXCIke2l9XCJdLmxvY2F0aW9uYCk7XG5cbiAgICAgICAgICAgIGZ1bmNGcmFnbWVudHMucHVzaChgXG4gICAgICAgICAgICBjdiA9IHVkW1wiJHtpfVwiXS52YWx1ZTtcbiAgICAgICAgICAgIHYgPSB1dltcIiR7aX1cIl07XG4gICAgICAgICAgICAke3RlbXBsYXRlfTtgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHRoZSBpbnRyb2R1Y3Rpb24gb2Ygc3luY0RhdGEgaXMgdG8gc29sdmUgYW4gaXNzdWUgd2hlcmUgdGV4dHVyZXMgaW4gdW5pZm9ybSBncm91cHMgYXJlIG5vdCBzZXQgY29ycmVjdGx5XG4gICAgICogdGhlIHRleHR1cmUgY291bnQgd2FzIGFsd2F5cyBzdGFydGluZyBmcm9tIDAgaW4gZWFjaCBncm91cC4gVGhpcyBuZWVkcyB0byBpbmNyZW1lbnQgZWFjaCB0aW1lIGEgdGV4dHVyZSBpcyB1c2VkXG4gICAgICogbm8gbWF0dGVyIHdoaWNoIGdyb3VwIGlzIGJlaW5nIHVzZWRcbiAgICAgKlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuY1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3VkJywgJ3V2JywgJ3JlbmRlcmVyJywgJ3N5bmNEYXRhJywgZnVuY0ZyYWdtZW50cy5qb2luKCdcXG4nKSkgYXMgVW5pZm9ybXNTeW5jQ2FsbGJhY2s7XG59XG5cbiIsICJpbXBvcnQgdHlwZSB7IElSZW5kZXJpbmdDb250ZXh0IH0gZnJvbSAnLi4vLi4vSVJlbmRlcmluZ0NvbnRleHQnO1xuXG5jb25zdCBmcmFnVGVtcGxhdGUgPSBbXG4gICAgJ3ByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OycsXG4gICAgJ3ZvaWQgbWFpbih2b2lkKXsnLFxuICAgICdmbG9hdCB0ZXN0ID0gMC4xOycsXG4gICAgJyVmb3Jsb29wJScsXG4gICAgJ2dsX0ZyYWdDb2xvciA9IHZlYzQoMC4wKTsnLFxuICAgICd9Jyxcbl0uam9pbignXFxuJyk7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlSWZUZXN0U3JjKG1heElmczogbnVtYmVyKTogc3RyaW5nXG57XG4gICAgbGV0IHNyYyA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhJZnM7ICsraSlcbiAgICB7XG4gICAgICAgIGlmIChpID4gMClcbiAgICAgICAge1xuICAgICAgICAgICAgc3JjICs9ICdcXG5lbHNlICc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaSA8IG1heElmcyAtIDEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNyYyArPSBgaWYodGVzdCA9PSAke2l9LjApe31gO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNyYztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrTWF4SWZTdGF0ZW1lbnRzSW5TaGFkZXIobWF4SWZzOiBudW1iZXIsIGdsOiBJUmVuZGVyaW5nQ29udGV4dCk6IG51bWJlclxue1xuICAgIGlmIChtYXhJZnMgPT09IDApXG4gICAge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsdWUgb2YgYDBgIHBhc3NlZCB0byBgY2hlY2tNYXhJZlN0YXRlbWVudHNJblNoYWRlcmAnKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcblxuICAgIHdoaWxlICh0cnVlKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICAgIHtcbiAgICAgICAgY29uc3QgZnJhZ21lbnRTcmMgPSBmcmFnVGVtcGxhdGUucmVwbGFjZSgvJWZvcmxvb3AlL2dpLCBnZW5lcmF0ZUlmVGVzdFNyYyhtYXhJZnMpKTtcblxuICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBmcmFnbWVudFNyYyk7XG4gICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcblxuICAgICAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSlcbiAgICAgICAge1xuICAgICAgICAgICAgbWF4SWZzID0gKG1heElmcyAvIDIpIHwgMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIHZhbGlkIVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWF4SWZzO1xufVxuIiwgIi8vIENhY2hlIHRoZSByZXN1bHQgdG8gcHJldmVudCBydW5uaW5nIHRoaXMgb3ZlciBhbmQgb3ZlclxubGV0IHVuc2FmZUV2YWw6IGJvb2xlYW47XG5cbi8qKlxuICogTm90IGFsbCBwbGF0Zm9ybXMgYWxsb3cgdG8gZ2VuZXJhdGUgZnVuY3Rpb24gY29kZSAoZS5nLiwgYG5ldyBGdW5jdGlvbmApLlxuICogdGhpcyBwcm92aWRlcyB0aGUgcGxhdGZvcm0tbGV2ZWwgZGV0ZWN0aW9uLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuc2FmZUV2YWxTdXBwb3J0ZWQoKTogYm9vbGVhblxue1xuICAgIGlmICh0eXBlb2YgdW5zYWZlRXZhbCA9PT0gJ2Jvb2xlYW4nKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHVuc2FmZUV2YWw7XG4gICAgfVxuXG4gICAgdHJ5XG4gICAge1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuICAgICAgICBjb25zdCBmdW5jID0gbmV3IEZ1bmN0aW9uKCdwYXJhbTEnLCAncGFyYW0yJywgJ3BhcmFtMycsICdyZXR1cm4gcGFyYW0xW3BhcmFtMl0gPT09IHBhcmFtMzsnKTtcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuXG4gICAgICAgIHVuc2FmZUV2YWwgPSBmdW5jKHsgYTogJ2InIH0sICdhJywgJ2InKSA9PT0gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpXG4gICAge1xuICAgICAgICB1bnNhZmVFdmFsID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuc2FmZUV2YWw7XG59XG4iLCAiaW1wb3J0IHsgc2V0UHJlY2lzaW9uLFxuICAgIGRlZmF1bHRWYWx1ZSxcbiAgICBjb21waWxlUHJvZ3JhbSxcbiAgICBtYXBTaXplLFxuICAgIG1hcFR5cGUsXG4gICAgZ2V0VGVzdENvbnRleHQsXG4gICAgZ2V0TWF4RnJhZ21lbnRQcmVjaXNpb24gfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IFByb2dyYW1DYWNoZSB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCBkZWZhdWx0RnJhZ21lbnQgZnJvbSAnLi9kZWZhdWx0UHJvZ3JhbS5mcmFnJztcbmltcG9ydCBkZWZhdWx0VmVydGV4IGZyb20gJy4vZGVmYXVsdFByb2dyYW0udmVydCc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcbmltcG9ydCB7IFBSRUNJU0lPTiB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbmltcG9ydCB0eXBlIHsgR0xQcm9ncmFtIH0gZnJvbSAnLi9HTFByb2dyYW0nO1xuXG5sZXQgVUlEID0gMDtcblxuY29uc3QgbmFtZUNhY2hlOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUF0dHJpYnV0ZURhdGFcbntcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgc2l6ZTogbnVtYmVyO1xuICAgIGxvY2F0aW9uOiBudW1iZXI7XG4gICAgbmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElVbmlmb3JtRGF0YVxue1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBzaXplOiBudW1iZXI7XG4gICAgaXNBcnJheTogUmVnRXhwTWF0Y2hBcnJheTtcbiAgICB2YWx1ZTogYW55O1xufVxuXG4vKipcbiAqIEhlbHBlciBjbGFzcyB0byBjcmVhdGUgYSBzaGFkZXIgcHJvZ3JhbS5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9ncmFtXG57XG4gICAgcHVibGljIGlkOiBudW1iZXI7XG4gICAgcHVibGljIHZlcnRleFNyYzogc3RyaW5nO1xuICAgIHB1YmxpYyBmcmFnbWVudFNyYzogc3RyaW5nO1xuICAgIG5hbWVDYWNoZTogYW55O1xuICAgIGdsUHJvZ3JhbXM6IHsgWyBrZXk6IG51bWJlciBdOiBHTFByb2dyYW19O1xuICAgIHN5bmNVbmlmb3JtczogYW55O1xuICAgIGF0dHJpYnV0ZURhdGE6IHsgW2tleTogc3RyaW5nXTogSUF0dHJpYnV0ZURhdGF9O1xuICAgIHVuaWZvcm1EYXRhOiB7W2tleTogc3RyaW5nXTogSVVuaWZvcm1EYXRhfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3ZlcnRleFNyY10gLSBUaGUgc291cmNlIG9mIHRoZSB2ZXJ0ZXggc2hhZGVyLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZnJhZ21lbnRTcmNdIC0gVGhlIHNvdXJjZSBvZiB0aGUgZnJhZ21lbnQgc2hhZGVyLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV0gLSBOYW1lIGZvciBzaGFkZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih2ZXJ0ZXhTcmM/OiBzdHJpbmcsIGZyYWdtZW50U3JjPzogc3RyaW5nLCBuYW1lID0gJ3BpeGktc2hhZGVyJylcbiAgICB7XG4gICAgICAgIHRoaXMuaWQgPSBVSUQrKztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHZlcnRleCBzaGFkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmVydGV4U3JjID0gdmVydGV4U3JjIHx8IFByb2dyYW0uZGVmYXVsdFZlcnRleFNyYztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGZyYWdtZW50IHNoYWRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mcmFnbWVudFNyYyA9IGZyYWdtZW50U3JjIHx8IFByb2dyYW0uZGVmYXVsdEZyYWdtZW50U3JjO1xuXG4gICAgICAgIHRoaXMudmVydGV4U3JjID0gdGhpcy52ZXJ0ZXhTcmMudHJpbSgpO1xuICAgICAgICB0aGlzLmZyYWdtZW50U3JjID0gdGhpcy5mcmFnbWVudFNyYy50cmltKCk7XG5cbiAgICAgICAgaWYgKHRoaXMudmVydGV4U3JjLnN1YnN0cmluZygwLCA4KSAhPT0gJyN2ZXJzaW9uJylcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xuXG4gICAgICAgICAgICBpZiAobmFtZUNhY2hlW25hbWVdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWVDYWNoZVtuYW1lXSsrO1xuICAgICAgICAgICAgICAgIG5hbWUgKz0gYC0ke25hbWVDYWNoZVtuYW1lXX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWVDYWNoZVtuYW1lXSA9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudmVydGV4U3JjID0gYCNkZWZpbmUgU0hBREVSX05BTUUgJHtuYW1lfVxcbiR7dGhpcy52ZXJ0ZXhTcmN9YDtcbiAgICAgICAgICAgIHRoaXMuZnJhZ21lbnRTcmMgPSBgI2RlZmluZSBTSEFERVJfTkFNRSAke25hbWV9XFxuJHt0aGlzLmZyYWdtZW50U3JjfWA7XG5cbiAgICAgICAgICAgIHRoaXMudmVydGV4U3JjID0gc2V0UHJlY2lzaW9uKHRoaXMudmVydGV4U3JjLCBzZXR0aW5ncy5QUkVDSVNJT05fVkVSVEVYLCBQUkVDSVNJT04uSElHSCk7XG4gICAgICAgICAgICB0aGlzLmZyYWdtZW50U3JjID0gc2V0UHJlY2lzaW9uKHRoaXMuZnJhZ21lbnRTcmMsIHNldHRpbmdzLlBSRUNJU0lPTl9GUkFHTUVOVCwgZ2V0TWF4RnJhZ21lbnRQcmVjaXNpb24oKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjdXJyZW50bHkgdGhpcyBkb2VzIG5vdCBleHRyYWN0IHN0cnVjdHMgb25seSBkZWZhdWx0IHR5cGVzXG4gICAgICAgIHRoaXMuZXh0cmFjdERhdGEodGhpcy52ZXJ0ZXhTcmMsIHRoaXMuZnJhZ21lbnRTcmMpO1xuXG4gICAgICAgIC8vIHRoaXMgaXMgd2hlcmUgd2Ugc3RvcmUgc2hhZGVyIHJlZmVyZW5jZXMuLlxuICAgICAgICB0aGlzLmdsUHJvZ3JhbXMgPSB7fTtcblxuICAgICAgICB0aGlzLnN5bmNVbmlmb3JtcyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdHMgdGhlIGRhdGEgZm9yIGEgYnV5IGNyZWF0aW5nIGEgc21hbGwgdGVzdCBwcm9ncmFtXG4gICAgICogb3IgcmVhZGluZyB0aGUgc3JjIGRpcmVjdGx5LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdmVydGV4U3JjXSAtIFRoZSBzb3VyY2Ugb2YgdGhlIHZlcnRleCBzaGFkZXIuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtmcmFnbWVudFNyY10gLSBUaGUgc291cmNlIG9mIHRoZSBmcmFnbWVudCBzaGFkZXIuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGV4dHJhY3REYXRhKHZlcnRleFNyYzogc3RyaW5nLCBmcmFnbWVudFNyYzogc3RyaW5nKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZ2wgPSBnZXRUZXN0Q29udGV4dCgpO1xuXG4gICAgICAgIGlmIChnbClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcHJvZ3JhbSA9IGNvbXBpbGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTcmMsIGZyYWdtZW50U3JjKTtcblxuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVEYXRhID0gdGhpcy5nZXRBdHRyaWJ1dGVEYXRhKHByb2dyYW0sIGdsKTtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybURhdGEgPSB0aGlzLmdldFVuaWZvcm1EYXRhKHByb2dyYW0sIGdsKTtcblxuICAgICAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybURhdGEgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlRGF0YSA9IHt9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgYXR0cmlidXRlIGRhdGEgZnJvbSB0aGUgcHJvZ3JhbVxuICAgICAqIEBwcml2YXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbX0gW3Byb2dyYW1dIC0gdGhlIFdlYkdMIHByb2dyYW1cbiAgICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gW2dsXSAtIHRoZSBXZWJHTCBjb250ZXh0XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSB0aGUgYXR0cmlidXRlIGRhdGEgZm9yIHRoaXMgcHJvZ3JhbVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBnZXRBdHRyaWJ1dGVEYXRhKHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dEJhc2UpOiB7W2tleTogc3RyaW5nXTogSUF0dHJpYnV0ZURhdGF9XG4gICAge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzOiB7W2tleTogc3RyaW5nXTogSUF0dHJpYnV0ZURhdGF9ID0ge307XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXNBcnJheTogQXJyYXk8SUF0dHJpYnV0ZURhdGE+ID0gW107XG5cbiAgICAgICAgY29uc3QgdG90YWxBdHRyaWJ1dGVzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5BQ1RJVkVfQVRUUklCVVRFUyk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbEF0dHJpYnV0ZXM7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgYXR0cmliRGF0YSA9IGdsLmdldEFjdGl2ZUF0dHJpYihwcm9ncmFtLCBpKTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBtYXBUeXBlKGdsLCBhdHRyaWJEYXRhLnR5cGUpO1xuXG4gICAgICAgICAgICAvKmVzbGludC1kaXNhYmxlICovXG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgbmFtZTogYXR0cmliRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIHNpemU6IG1hcFNpemUodHlwZSksXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSAqL1xuXG4gICAgICAgICAgICBhdHRyaWJ1dGVzW2F0dHJpYkRhdGEubmFtZV0gPSBkYXRhO1xuICAgICAgICAgICAgYXR0cmlidXRlc0FycmF5LnB1c2goZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGVzQXJyYXkuc29ydCgoYSwgYikgPT4gKGEubmFtZSA+IGIubmFtZSkgPyAxIDogLTEpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXR0cmlidXRlc0FycmF5Lmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzQXJyYXlbaV0ubG9jYXRpb24gPSBpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgdW5pZm9ybSBkYXRhIGZyb20gdGhlIHByb2dyYW1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHt3ZWJHTC1wcm9ncmFtfSBbcHJvZ3JhbV0gLSB0aGUgd2ViZ2wgcHJvZ3JhbVxuICAgICAqIEBwYXJhbSB7Y29udGV4dH0gW2dsXSAtIHRoZSBXZWJHTCBjb250ZXh0XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSB0aGUgdW5pZm9ybSBkYXRhIGZvciB0aGlzIHByb2dyYW1cbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFVuaWZvcm1EYXRhKHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dEJhc2UpOiB7W2tleTogc3RyaW5nXTogSVVuaWZvcm1EYXRhfVxuICAgIHtcbiAgICAgICAgY29uc3QgdW5pZm9ybXM6IHtba2V5OiBzdHJpbmddOiBJVW5pZm9ybURhdGF9ID0ge307XG5cbiAgICAgICAgY29uc3QgdG90YWxVbmlmb3JtcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuQUNUSVZFX1VOSUZPUk1TKTtcblxuICAgICAgICAvLyBUT0RPIGV4cG9zZSB0aGlzIGFzIGEgcHJvcD9cbiAgICAgICAgLy8gY29uc3QgbWFza1JlZ2V4ID0gbmV3IFJlZ0V4cCgnXihwcm9qZWN0aW9uTWF0cml4fHVTYW1wbGVyfHRyYW5zbGF0aW9uTWF0cml4KSQnKTtcbiAgICAgICAgLy8gY29uc3QgbWFza1JlZ2V4ID0gbmV3IFJlZ0V4cCgnXihwcm9qZWN0aW9uTWF0cml4fHVTYW1wbGVyfHRyYW5zbGF0aW9uTWF0cml4KSQnKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsVW5pZm9ybXM7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdW5pZm9ybURhdGEgPSBnbC5nZXRBY3RpdmVVbmlmb3JtKHByb2dyYW0sIGkpO1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHVuaWZvcm1EYXRhLm5hbWUucmVwbGFjZSgvXFxbLio/XFxdJC8sICcnKTtcblxuICAgICAgICAgICAgY29uc3QgaXNBcnJheSA9IHVuaWZvcm1EYXRhLm5hbWUubWF0Y2goL1xcWy4qP1xcXSQvKTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBtYXBUeXBlKGdsLCB1bmlmb3JtRGF0YS50eXBlKTtcblxuICAgICAgICAgICAgLyplc2xpbnQtZGlzYWJsZSAqL1xuICAgICAgICAgICAgdW5pZm9ybXNbbmFtZV0gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICBzaXplOiB1bmlmb3JtRGF0YS5zaXplLFxuICAgICAgICAgICAgICAgIGlzQXJyYXk6aXNBcnJheSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZGVmYXVsdFZhbHVlKHR5cGUsIHVuaWZvcm1EYXRhLnNpemUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmlmb3JtcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCB2ZXJ0ZXggc2hhZGVyIHNvdXJjZVxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBjb25zdGFudFxuICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IGRlZmF1bHRWZXJ0ZXhTcmMoKTogc3RyaW5nXG4gICAge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZlcnRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCBmcmFnbWVudCBzaGFkZXIgc291cmNlXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQGNvbnN0YW50XG4gICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgZGVmYXVsdEZyYWdtZW50U3JjKCk6IHN0cmluZ1xuICAgIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRGcmFnbWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNob3J0IGhhbmQgZnVuY3Rpb24gdG8gY3JlYXRlIGEgcHJvZ3JhbSBiYXNlZCBvZiBhIHZlcnRleCBhbmQgZnJhZ21lbnQgc2hhZGVyXG4gICAgICogdGhpcyBtZXRob2Qgd2lsbCBhbHNvIGNoZWNrIHRvIHNlZSBpZiB0aGVyZSBpcyBhIGNhY2hlZCBwcm9ncmFtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt2ZXJ0ZXhTcmNdIC0gVGhlIHNvdXJjZSBvZiB0aGUgdmVydGV4IHNoYWRlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2ZyYWdtZW50U3JjXSAtIFRoZSBzb3VyY2Ugb2YgdGhlIGZyYWdtZW50IHNoYWRlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWU9cGl4aS1zaGFkZXJdIC0gTmFtZSBmb3Igc2hhZGVyXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UElYSS5Qcm9ncmFtfSBhbiBzaGlueSBuZXcgUGl4aSBzaGFkZXIhXG4gICAgICovXG4gICAgc3RhdGljIGZyb20odmVydGV4U3JjPzogc3RyaW5nLCBmcmFnbWVudFNyYz86IHN0cmluZywgbmFtZT86IHN0cmluZyk6IFByb2dyYW1cbiAgICB7XG4gICAgICAgIGNvbnN0IGtleSA9IHZlcnRleFNyYyArIGZyYWdtZW50U3JjO1xuXG4gICAgICAgIGxldCBwcm9ncmFtID0gUHJvZ3JhbUNhY2hlW2tleV07XG5cbiAgICAgICAgaWYgKCFwcm9ncmFtKVxuICAgICAgICB7XG4gICAgICAgICAgICBQcm9ncmFtQ2FjaGVba2V5XSA9IHByb2dyYW0gPSBuZXcgUHJvZ3JhbSh2ZXJ0ZXhTcmMsIGZyYWdtZW50U3JjLCBuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwcm9ncmFtO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQcm9ncmFtIH0gZnJvbSAnLi9Qcm9ncmFtJztcbmltcG9ydCB7IFVuaWZvcm1Hcm91cCB9IGZyb20gJy4vVW5pZm9ybUdyb3VwJztcblxuaW1wb3J0IHR5cGUgeyBEaWN0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIGZvciBzaGFkZXJzXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgU2hhZGVyXG57XG4gICAgcHVibGljIHByb2dyYW06IFByb2dyYW07XG4gICAgcHVibGljIHVuaWZvcm1Hcm91cDogVW5pZm9ybUdyb3VwO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5Qcm9ncmFtfSBbcHJvZ3JhbV0gLSBUaGUgcHJvZ3JhbSB0aGUgc2hhZGVyIHdpbGwgdXNlLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbdW5pZm9ybXNdIC0gQ3VzdG9tIHVuaWZvcm1zIHRvIHVzZSB0byBhdWdtZW50IHRoZSBidWlsdC1pbiBvbmVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb2dyYW06IFByb2dyYW0sIHVuaWZvcm1zOiBEaWN0PGFueT4pXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogUHJvZ3JhbSB0aGF0IHRoZSBzaGFkZXIgdXNlc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlByb2dyYW19XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xuXG4gICAgICAgIC8vIGxldHMgc2VlIHdoYXRzIGJlZW4gcGFzc2VkIGluXG4gICAgICAgIC8vIHVuaWZvcm1zIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSB1bmlmb3JtIGdyb3VwXG4gICAgICAgIGlmICh1bmlmb3JtcylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHVuaWZvcm1zIGluc3RhbmNlb2YgVW5pZm9ybUdyb3VwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybUdyb3VwID0gdW5pZm9ybXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmlmb3JtR3JvdXAgPSBuZXcgVW5pZm9ybUdyb3VwKHVuaWZvcm1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybUdyb3VwID0gbmV3IFVuaWZvcm1Hcm91cCh7fSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aW1lIHRvIGJ1aWxkIHNvbWUgZ2V0dGVycyBhbmQgc2V0dGVycyFcbiAgICAgICAgLy8gSSBndWVzcyBkb3duIHRoZSBsaW5lIHRoaXMgY291bGQgc29ydCBvZiBnZW5lcmF0ZSBhbiBpbnN0cnVjdGlvbiBsaXN0IHJhdGhlciB0aGFuIHVzZSBkaXJ0eSBpZHM/XG4gICAgICAgIC8vIGRvZXMgdGhlIHRyaWNrIGZvciBub3cgdGhvdWdoIVxuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gcHJvZ3JhbS51bmlmb3JtRGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMudW5pZm9ybUdyb3VwLnVuaWZvcm1zW2ldIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmlmb3JtR3JvdXAudW5pZm9ybXNbaV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMudW5pZm9ybUdyb3VwLnVuaWZvcm1zW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRPRE8gbW92ZSB0byBzaGFkZXIgc3lzdGVtLi5cbiAgICBjaGVja1VuaWZvcm1FeGlzdHMobmFtZTogc3RyaW5nLCBncm91cDogVW5pZm9ybUdyb3VwKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgaWYgKGdyb3VwLnVuaWZvcm1zW25hbWVdKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgaSBpbiBncm91cC51bmlmb3JtcylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdW5pZm9ybSA9IGdyb3VwLnVuaWZvcm1zW2ldO1xuXG4gICAgICAgICAgICBpZiAodW5pZm9ybS5ncm91cClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1VuaWZvcm1FeGlzdHMobmFtZSwgdW5pZm9ybSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICAvLyB1c2FnZSBjb3VudCBvbiBwcm9ncmFtcz9cbiAgICAgICAgLy8gcmVtb3ZlIGlmIG5vdCB1c2VkIVxuICAgICAgICB0aGlzLnVuaWZvcm1Hcm91cCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hhZGVyIHVuaWZvcm0gdmFsdWVzLCBzaG9ydGN1dCBmb3IgYHVuaWZvcm1Hcm91cC51bmlmb3Jtc2BcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAbWVtYmVyIHtvYmplY3R9XG4gICAgICovXG4gICAgZ2V0IHVuaWZvcm1zKCk6IERpY3Q8YW55PlxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybUdyb3VwLnVuaWZvcm1zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc2hvcnQgaGFuZCBmdW5jdGlvbiB0byBjcmVhdGUgYSBzaGFkZXIgYmFzZWQgb2YgYSB2ZXJ0ZXggYW5kIGZyYWdtZW50IHNoYWRlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt2ZXJ0ZXhTcmNdIC0gVGhlIHNvdXJjZSBvZiB0aGUgdmVydGV4IHNoYWRlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2ZyYWdtZW50U3JjXSAtIFRoZSBzb3VyY2Ugb2YgdGhlIGZyYWdtZW50IHNoYWRlci5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW3VuaWZvcm1zXSAtIEN1c3RvbSB1bmlmb3JtcyB0byB1c2UgdG8gYXVnbWVudCB0aGUgYnVpbHQtaW4gb25lcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQSVhJLlNoYWRlcn0gYW4gc2hpbnkgbmV3IFBpeGkgc2hhZGVyIVxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tKHZlcnRleFNyYz86IHN0cmluZywgZnJhZ21lbnRTcmM/OiBzdHJpbmcsIHVuaWZvcm1zPzogRGljdDxhbnk+KTogU2hhZGVyXG4gICAge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gUHJvZ3JhbS5mcm9tKHZlcnRleFNyYywgZnJhZ21lbnRTcmMpO1xuXG4gICAgICAgIHJldHVybiBuZXcgU2hhZGVyKHByb2dyYW0sIHVuaWZvcm1zKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQkxFTkRfTU9ERVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5cbmNvbnN0IEJMRU5EID0gMDtcbmNvbnN0IE9GRlNFVCA9IDE7XG5jb25zdCBDVUxMSU5HID0gMjtcbmNvbnN0IERFUFRIX1RFU1QgPSAzO1xuY29uc3QgV0lORElORyA9IDQ7XG5cbi8qKlxuICogVGhpcyBpcyBhIFdlYkdMIHN0YXRlLCBhbmQgaXMgaXMgcGFzc2VkIFRoZSBXZWJHTCBTdGF0ZU1hbmFnZXIuXG4gKlxuICogRWFjaCBtZXNoIHJlbmRlcmVkIG1heSByZXF1aXJlIFdlYkdMIHRvIGJlIGluIGEgZGlmZmVyZW50IHN0YXRlLlxuICogRm9yIGV4YW1wbGUgeW91IG1heSB3YW50IGRpZmZlcmVudCBibGVuZCBtb2RlIG9yIHRvIGVuYWJsZSBwb2x5Z29uIG9mZnNldHNcbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGF0ZVxue1xuICAgIGRhdGE6IG51bWJlcjtcbiAgICBfYmxlbmRNb2RlOiBCTEVORF9NT0RFUztcbiAgICBfcG9seWdvbk9mZnNldDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgdGhpcy5kYXRhID0gMDtcblxuICAgICAgICB0aGlzLmJsZW5kTW9kZSA9IEJMRU5EX01PREVTLk5PUk1BTDtcbiAgICAgICAgdGhpcy5wb2x5Z29uT2Zmc2V0ID0gMDtcblxuICAgICAgICB0aGlzLmJsZW5kID0gdHJ1ZTtcbiAgICAgICAgLy8gIHRoaXMuZGVwdGhUZXN0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZXMgYmxlbmRpbmcgb2YgdGhlIGNvbXB1dGVkIGZyYWdtZW50IGNvbG9yIHZhbHVlc1xuICAgICAqXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgYmxlbmQoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMuZGF0YSAmICgxIDw8IEJMRU5EKSk7XG4gICAgfVxuXG4gICAgc2V0IGJsZW5kKHZhbHVlOiBib29sZWFuKVxuICAgIHtcbiAgICAgICAgaWYgKCEhKHRoaXMuZGF0YSAmICgxIDw8IEJMRU5EKSkgIT09IHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgXj0gKDEgPDwgQkxFTkQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWN0aXZhdGVzIGFkZGluZyBhbiBvZmZzZXQgdG8gZGVwdGggdmFsdWVzIG9mIHBvbHlnb24ncyBmcmFnbWVudHNcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBnZXQgb2Zmc2V0cygpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gISEodGhpcy5kYXRhICYgKDEgPDwgT0ZGU0VUKSk7XG4gICAgfVxuXG4gICAgc2V0IG9mZnNldHModmFsdWU6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICBpZiAoISEodGhpcy5kYXRhICYgKDEgPDwgT0ZGU0VUKSkgIT09IHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgXj0gKDEgPDwgT0ZGU0VUKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlcyBjdWxsaW5nIG9mIHBvbHlnb25zLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgIGdldCBjdWxsaW5nKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLmRhdGEgJiAoMSA8PCBDVUxMSU5HKSk7XG4gICAgfVxuXG4gICAgc2V0IGN1bGxpbmcodmFsdWU6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICBpZiAoISEodGhpcy5kYXRhICYgKDEgPDwgQ1VMTElORykpICE9PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kYXRhIF49ICgxIDw8IENVTExJTkcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWN0aXZhdGVzIGRlcHRoIGNvbXBhcmlzb25zIGFuZCB1cGRhdGVzIHRvIHRoZSBkZXB0aCBidWZmZXIuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgZ2V0IGRlcHRoVGVzdCgpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gISEodGhpcy5kYXRhICYgKDEgPDwgREVQVEhfVEVTVCkpO1xuICAgIH1cblxuICAgIHNldCBkZXB0aFRlc3QodmFsdWU6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICBpZiAoISEodGhpcy5kYXRhICYgKDEgPDwgREVQVEhfVEVTVCkpICE9PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kYXRhIF49ICgxIDw8IERFUFRIX1RFU1QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IGZyb250IG9yIGJhY2stZmFjaW5nIHBvbHlnb25zIGNhbiBiZSBjdWxsZWQuXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgIGdldCBjbG9ja3dpc2VGcm9udEZhY2UoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMuZGF0YSAmICgxIDw8IFdJTkRJTkcpKTtcbiAgICB9XG5cbiAgICBzZXQgY2xvY2t3aXNlRnJvbnRGYWNlKHZhbHVlOiBib29sZWFuKVxuICAgIHtcbiAgICAgICAgaWYgKCEhKHRoaXMuZGF0YSAmICgxIDw8IFdJTkRJTkcpKSAhPT0gdmFsdWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSBePSAoMSA8PCBXSU5ESU5HKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBibGVuZCBtb2RlIHRvIGJlIGFwcGxpZWQgd2hlbiB0aGlzIHN0YXRlIGlzIHNldC4gQXBwbHkgYSB2YWx1ZSBvZiBgUElYSS5CTEVORF9NT0RFUy5OT1JNQUxgIHRvIHJlc2V0IHRoZSBibGVuZCBtb2RlLlxuICAgICAqIFNldHRpbmcgdGhpcyBtb2RlIHRvIGFueXRoaW5nIG90aGVyIHRoYW4gTk9fQkxFTkQgd2lsbCBhdXRvbWF0aWNhbGx5IHN3aXRjaCBibGVuZGluZyBvbi5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCBQSVhJLkJMRU5EX01PREVTLk5PUk1BTFxuICAgICAqIEBzZWUgUElYSS5CTEVORF9NT0RFU1xuICAgICAqL1xuICAgIGdldCBibGVuZE1vZGUoKTogQkxFTkRfTU9ERVNcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ibGVuZE1vZGU7XG4gICAgfVxuXG4gICAgc2V0IGJsZW5kTW9kZSh2YWx1ZTogQkxFTkRfTU9ERVMpXG4gICAge1xuICAgICAgICB0aGlzLmJsZW5kID0gKHZhbHVlICE9PSBCTEVORF9NT0RFUy5OT05FKTtcbiAgICAgICAgdGhpcy5fYmxlbmRNb2RlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHBvbHlnb24gb2Zmc2V0LiBTZXR0aW5nIHRoaXMgcHJvcGVydHkgdG8gYW55dGhpbmcgb3RoZXIgdGhhbiAwIHdpbGwgYXV0b21hdGljYWxseSBlbmFibGUgcG9seWdvbiBvZmZzZXQgZmlsbC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICovXG4gICAgZ2V0IHBvbHlnb25PZmZzZXQoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9seWdvbk9mZnNldDtcbiAgICB9XG5cbiAgICBzZXQgcG9seWdvbk9mZnNldCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5vZmZzZXRzID0gISF2YWx1ZTtcbiAgICAgICAgdGhpcy5fcG9seWdvbk9mZnNldCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHN0YXRpYyBmb3IyZCgpOiBTdGF0ZVxuICAgIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBuZXcgU3RhdGUoKTtcblxuICAgICAgICBzdGF0ZS5kZXB0aFRlc3QgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUuYmxlbmQgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59XG5cbiIsICJpbXBvcnQgeyBTaGFkZXIgfSBmcm9tICcuLi9zaGFkZXIvU2hhZGVyJztcbmltcG9ydCB7IFByb2dyYW0gfSBmcm9tICcuLi9zaGFkZXIvUHJvZ3JhbSc7XG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL1N0YXRlJztcbmltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSAnQHBpeGkvc2V0dGluZ3MnO1xuaW1wb3J0IGRlZmF1bHRWZXJ0ZXggZnJvbSAnLi9kZWZhdWx0RmlsdGVyLnZlcnQnO1xuaW1wb3J0IGRlZmF1bHRGcmFnbWVudCBmcm9tICcuL2RlZmF1bHRGaWx0ZXIuZnJhZyc7XG5cbmltcG9ydCB0eXBlIHsgUmVuZGVyVGV4dHVyZSB9IGZyb20gJy4uL3JlbmRlclRleHR1cmUvUmVuZGVyVGV4dHVyZSc7XG5pbXBvcnQgdHlwZSB7IEZpbHRlclN5c3RlbSB9IGZyb20gJy4vRmlsdGVyU3lzdGVtJztcbmltcG9ydCB0eXBlIHsgRmlsdGVyU3RhdGUgfSBmcm9tICcuL0ZpbHRlclN0YXRlJztcbmltcG9ydCB0eXBlIHsgQkxFTkRfTU9ERVMsIENMRUFSX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB0eXBlIHsgRGljdCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcblxuLyoqXG4gKiBGaWx0ZXIgaXMgYSBzcGVjaWFsIHR5cGUgb2YgV2ViR0wgc2hhZGVyIHRoYXQgaXMgYXBwbGllZCB0byB0aGUgc2NyZWVuLlxuICpcbiAqIHtAbGluayBodHRwOi8vcGl4aWpzLmlvL2V4YW1wbGVzLyMvZmlsdGVycy9ibHVyLWZpbHRlci5qcyBFeGFtcGxlfSBvZiB0aGVcbiAqIHtAbGluayBQSVhJLmZpbHRlcnMuQmx1ckZpbHRlciBCbHVyRmlsdGVyfS5cbiAqXG4gKiAjIyMgVXNhZ2VcbiAqIEZpbHRlcnMgY2FuIGJlIGFwcGxpZWQgdG8gYW55IERpc3BsYXlPYmplY3Qgb3IgQ29udGFpbmVyLlxuICogUGl4aUpTJyBgRmlsdGVyU3lzdGVtYCByZW5kZXJzIHRoZSBjb250YWluZXIgaW50byB0ZW1wb3JhcnkgRnJhbWVidWZmZXIsXG4gKiB0aGVuIGZpbHRlciByZW5kZXJzIGl0IHRvIHRoZSBzY3JlZW4uXG4gKiBNdWx0aXBsZSBmaWx0ZXJzIGNhbiBiZSBhZGRlZCB0byB0aGUgYGZpbHRlcnNgIGFycmF5IHByb3BlcnR5IGFuZCBzdGFja2VkIG9uIGVhY2ggb3RoZXIuXG4gKlxuICogYGBgXG4gKiBjb25zdCBmaWx0ZXIgPSBuZXcgUElYSS5GaWx0ZXIobXlTaGFkZXJWZXJ0LCBteVNoYWRlckZyYWcsIHsgbXlVbmlmb3JtOiAwLjUgfSk7XG4gKiBjb25zdCBjb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcbiAqIGNvbnRhaW5lci5maWx0ZXJzID0gW2ZpbHRlcl07XG4gKiBgYGBcbiAqXG4gKiAjIyMgUHJldmlvdXMgVmVyc2lvbiBEaWZmZXJlbmNlc1xuICpcbiAqIEluIFBpeGlKUyAqKnYzKiosIGEgZmlsdGVyIHdhcyBhbHdheXMgYXBwbGllZCB0byBfd2hvbGUgc2NyZWVuXy5cbiAqXG4gKiBJbiBQaXhpSlMgKip2NCoqLCBhIGZpbHRlciBjYW4gYmUgYXBwbGllZCBfb25seSBwYXJ0IG9mIHRoZSBzY3JlZW5fLlxuICogRGV2ZWxvcGVycyBoYWQgdG8gY3JlYXRlIGEgc2V0IG9mIHVuaWZvcm1zIHRvIGRlYWwgd2l0aCBjb29yZGluYXRlcy5cbiAqXG4gKiBJbiBQaXhpSlMgKip2NSoqIGNvbWJpbmVzIF9ib3RoIGFwcHJvYWNoZXNfLlxuICogRGV2ZWxvcGVycyBjYW4gdXNlIG5vcm1hbCBjb29yZGluYXRlcyBvZiB2MyBhbmQgdGhlbiBhbGxvdyBmaWx0ZXIgdG8gdXNlIHBhcnRpYWwgRnJhbWVidWZmZXJzLFxuICogYnJpbmdpbmcgdGhvc2UgZXh0cmEgdW5pZm9ybXMgaW50byBhY2NvdW50LlxuICpcbiAqIEFsc28gYmUgYXdhcmUgdGhhdCB3ZSBoYXZlIGNoYW5nZWQgZGVmYXVsdCB2ZXJ0ZXggc2hhZGVyLCBwbGVhc2UgY29uc3VsdFxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9waXhpanMvcGl4aS5qcy93aWtpL3Y1LUNyZWF0aW5nLWZpbHRlcnMgV2lraX0uXG4gKlxuICogIyMjIEJ1aWx0LWluIFVuaWZvcm1zXG4gKlxuICogUGl4aUpTIHZpZXdwb3J0IHVzZXMgc2NyZWVuIChDU1MpIGNvb3JkaW5hdGVzLCBgKDAsIDAsIHJlbmRlcmVyLnNjcmVlbi53aWR0aCwgcmVuZGVyZXIuc2NyZWVuLmhlaWdodClgLFxuICogYW5kIGBwcm9qZWN0aW9uTWF0cml4YCB1bmlmb3JtIG1hcHMgaXQgdG8gdGhlIGdsIHZpZXdwb3J0LlxuICpcbiAqICoqdVNhbXBsZXIqKlxuICpcbiAqIFRoZSBtb3N0IGltcG9ydGFudCB1bmlmb3JtIGlzIHRoZSBpbnB1dCB0ZXh0dXJlIHRoYXQgY29udGFpbmVyIHdhcyByZW5kZXJlZCBpbnRvLlxuICogX0ltcG9ydGFudCBub3RlOiBhcyB3aXRoIGFsbCBGcmFtZWJ1ZmZlcnMgaW4gUGl4aUpTLCBib3RoIGlucHV0IGFuZCBvdXRwdXQgYXJlXG4gKiBwcmVtdWx0aXBsaWVkIGJ5IGFscGhhLl9cbiAqXG4gKiBCeSBkZWZhdWx0LCBpbnB1dCBub3JtYWxpemVkIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWQgdG8gZnJhZ21lbnQgc2hhZGVyIHdpdGggYHZUZXh0dXJlQ29vcmRgLlxuICogVXNlIGl0IHRvIHNhbXBsZSB0aGUgaW5wdXQuXG4gKlxuICogYGBgXG4gKiBjb25zdCBmcmFnbWVudCA9IGBcbiAqIHZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xuICogdW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XG4gKiB2b2lkIG1haW4odm9pZClcbiAqIHtcbiAqICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XG4gKiB9XG4gKiBgO1xuICpcbiAqIGNvbnN0IG15RmlsdGVyID0gbmV3IFBJWEkuRmlsdGVyKG51bGwsIGZyYWdtZW50KTtcbiAqIGBgYFxuICpcbiAqIFRoaXMgZmlsdGVyIGlzIGp1c3Qgb25lIHVuaWZvcm0gbGVzcyB0aGFuIHtAbGluayBQSVhJLmZpbHRlcnMuQWxwaGFGaWx0ZXIgQWxwaGFGaWx0ZXJ9LlxuICpcbiAqICoqb3V0cHV0RnJhbWUqKlxuICpcbiAqIFRoZSBgb3V0cHV0RnJhbWVgIGhvbGRzIHRoZSByZWN0YW5nbGUgd2hlcmUgZmlsdGVyIGlzIGFwcGxpZWQgaW4gc2NyZWVuIChDU1MpIGNvb3JkaW5hdGVzLlxuICogSXQncyB0aGUgc2FtZSBhcyBgcmVuZGVyZXIuc2NyZWVuYCBmb3IgYSBmdWxsc2NyZWVuIGZpbHRlci5cbiAqIE9ubHkgYSBwYXJ0IG9mICBgb3V0cHV0RnJhbWUuendgIHNpemUgb2YgdGVtcG9yYXJ5IEZyYW1lYnVmZmVyIGlzIHVzZWQsXG4gKiBgKDAsIDAsIG91dHB1dEZyYW1lLndpZHRoLCBvdXRwdXRGcmFtZS5oZWlnaHQpYCxcbiAqXG4gKiBGaWx0ZXJzIHVzZXMgdGhpcyBxdWFkIHRvIG5vcm1hbGl6ZWQgKDAtMSkgc3BhY2UsIGl0cyBwYXNzZWQgaW50byBgYVZlcnRleFBvc2l0aW9uYCBhdHRyaWJ1dGUuXG4gKiBUbyBjYWxjdWxhdGUgdmVydGV4IHBvc2l0aW9uIGluIHNjcmVlbiBzcGFjZSB1c2luZyBub3JtYWxpemVkICgwLTEpIHNwYWNlOlxuICpcbiAqIGBgYFxuICogdmVjNCBmaWx0ZXJWZXJ0ZXhQb3NpdGlvbiggdm9pZCApXG4gKiB7XG4gKiAgICAgdmVjMiBwb3NpdGlvbiA9IGFWZXJ0ZXhQb3NpdGlvbiAqIG1heChvdXRwdXRGcmFtZS56dywgdmVjMigwLikpICsgb3V0cHV0RnJhbWUueHk7XG4gKiAgICAgcmV0dXJuIHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB2ZWMzKHBvc2l0aW9uLCAxLjApKS54eSwgMC4wLCAxLjApO1xuICogfVxuICogYGBgXG4gKlxuICogKippbnB1dFNpemUqKlxuICpcbiAqIFRlbXBvcmFyeSBmcmFtZWJ1ZmZlciBpcyBkaWZmZXJlbnQsIGl0IGNhbiBiZSBlaXRoZXIgdGhlIHNpemUgb2Ygc2NyZWVuLCBlaXRoZXIgcG93ZXItb2YtdHdvLlxuICogVGhlIGBpbnB1dFNpemUueHlgIGFyZSBzaXplIG9mIHRlbXBvcmFyeSBmcmFtZWJ1ZmZlciB0aGF0IGhvbGRzIGlucHV0LlxuICogVGhlIGBpbnB1dFNpemUuendgIGlzIGludmVydGVkLCBpdCdzIGEgc2hvcnRjdXQgdG8gZXZhZGUgZGl2aXNpb24gaW5zaWRlIHRoZSBzaGFkZXIuXG4gKlxuICogU2V0IGBpbnB1dFNpemUueHkgPSBvdXRwdXRGcmFtZS56d2AgZm9yIGEgZnVsbHNjcmVlbiBmaWx0ZXIuXG4gKlxuICogVG8gY2FsY3VsYXRlIGlucHV0IG5vcm1hbGl6ZWQgY29vcmRpbmF0ZSwgeW91IGhhdmUgdG8gbWFwIGl0IHRvIGZpbHRlciBub3JtYWxpemVkIHNwYWNlLlxuICogTXVsdGlwbHkgYnkgYG91dHB1dEZyYW1lLnp3YCB0byBnZXQgaW5wdXQgY29vcmRpbmF0ZS5cbiAqIERpdmlkZSBieSBgaW5wdXRTaXplLnh5YCB0byBnZXQgaW5wdXQgbm9ybWFsaXplZCBjb29yZGluYXRlLlxuICpcbiAqIGBgYFxuICogdmVjMiBmaWx0ZXJUZXh0dXJlQ29vcmQoIHZvaWQgKVxuICoge1xuICogICAgIHJldHVybiBhVmVydGV4UG9zaXRpb24gKiAob3V0cHV0RnJhbWUuencgKiBpbnB1dFNpemUuencpOyAvLyBzYW1lIGFzIC9pbnB1dFNpemUueHlcbiAqIH1cbiAqIGBgYFxuICogKipyZXNvbHV0aW9uKipcbiAqXG4gKiBUaGUgYHJlc29sdXRpb25gIGlzIHRoZSByYXRpbyBvZiBzY3JlZW4gKENTUykgcGl4ZWxzIHRvIHJlYWwgcGl4ZWxzLlxuICpcbiAqICoqaW5wdXRQaXhlbCoqXG4gKlxuICogYGlucHV0UGl4ZWwueHlgIGlzIHRoZSBzaXplIG9mIGZyYW1lYnVmZmVyIGluIHJlYWwgcGl4ZWxzLCBzYW1lIGFzIGBpbnB1dFNpemUueHkgKiByZXNvbHV0aW9uYFxuICogYGlucHV0UGl4ZWwuendgIGlzIGludmVydGVkIGBpbnB1dFBpeGVsLnh5YC5cbiAqXG4gKiBJdCdzIGhhbmR5IGZvciBmaWx0ZXJzIHRoYXQgdXNlIG5laWdoYm91ciBwaXhlbHMsIGxpa2Uge0BsaW5rIFBJWEkuZmlsdGVycy5GWEFBRmlsdGVyIEZYQUFGaWx0ZXJ9LlxuICpcbiAqICoqaW5wdXRDbGFtcCoqXG4gKlxuICogSWYgeW91IHRyeSB0byBnZXQgaW5mbyBmcm9tIG91dHNpZGUgb2YgdXNlZCBwYXJ0IG9mIEZyYW1lYnVmZmVyIC0geW91J2xsIGdldCB1bmRlZmluZWQgYmVoYXZpb3VyLlxuICogRm9yIGRpc3BsYWNlbWVudHMsIGNvb3JkaW5hdGVzIGhhcyB0byBiZSBjbGFtcGVkLlxuICpcbiAqIFRoZSBgaW5wdXRDbGFtcC54eWAgaXMgbGVmdC10b3AgcGl4ZWwgY2VudGVyLCB5b3UgbWF5IGlnbm9yZSBpdCwgYmVjYXVzZSB3ZSB1c2UgbGVmdC10b3AgcGFydCBvZiBGcmFtZWJ1ZmZlclxuICogYGlucHV0Q2xhbXAuendgIGlzIGJvdHRvbS1yaWdodCBwaXhlbCBjZW50ZXIuXG4gKlxuICogYGBgXG4gKiB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCBjbGFtcChtb2RpZmlnZWRUZXh0dXJlQ29vcmQsIGlucHV0Q2xhbXAueHksIGlucHV0Q2xhbXAuencpKVxuICogYGBgXG4gKiBPUlxuICogYGBgXG4gKiB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCBtaW4obW9kaWZpZ2VkVGV4dHVyZUNvb3JkLCBpbnB1dENsYW1wLnp3KSlcbiAqIGBgYFxuICpcbiAqICMjIyBBZGRpdGlvbmFsIEluZm9ybWF0aW9uXG4gKlxuICogQ29tcGxldGUgZG9jdW1lbnRhdGlvbiBvbiBGaWx0ZXIgdXNhZ2UgaXMgbG9jYXRlZCBpbiB0aGVcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vcGl4aWpzL3BpeGkuanMvd2lraS92NS1DcmVhdGluZy1maWx0ZXJzIFdpa2l9LlxuICpcbiAqIFNpbmNlIFBpeGlKUyBvbmx5IGhhZCBhIGhhbmRmdWwgb2YgYnVpbHQtaW4gZmlsdGVycywgYWRkaXRpb25hbCBmaWx0ZXJzIGNhbiBiZSBkb3dubG9hZGVkXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3BpeGlqcy9waXhpLWZpbHRlcnMgaGVyZX0gZnJvbSB0aGUgUGl4aUpTIEZpbHRlcnMgcmVwb3NpdG9yeS5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAZXh0ZW5kcyBQSVhJLlNoYWRlclxuICovXG5leHBvcnQgY2xhc3MgRmlsdGVyIGV4dGVuZHMgU2hhZGVyXG57XG4gICAgcHVibGljIHBhZGRpbmc6IG51bWJlcjtcbiAgICBwdWJsaWMgcmVzb2x1dGlvbjogbnVtYmVyO1xuICAgIHB1YmxpYyBlbmFibGVkOiBib29sZWFuO1xuICAgIHB1YmxpYyBhdXRvRml0OiBib29sZWFuO1xuICAgIHB1YmxpYyBsZWdhY3k6IGJvb2xlYW47XG4gICAgc3RhdGU6IFN0YXRlO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdmVydGV4U3JjXSAtIFRoZSBzb3VyY2Ugb2YgdGhlIHZlcnRleCBzaGFkZXIuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtmcmFnbWVudFNyY10gLSBUaGUgc291cmNlIG9mIHRoZSBmcmFnbWVudCBzaGFkZXIuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFt1bmlmb3Jtc10gLSBDdXN0b20gdW5pZm9ybXMgdG8gdXNlIHRvIGF1Z21lbnQgdGhlIGJ1aWx0LWluIG9uZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmVydGV4U3JjPzogc3RyaW5nLCBmcmFnbWVudFNyYz86IHN0cmluZywgdW5pZm9ybXM/OiBEaWN0PGFueT4pXG4gICAge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gUHJvZ3JhbS5mcm9tKHZlcnRleFNyYyB8fCBGaWx0ZXIuZGVmYXVsdFZlcnRleFNyYyxcbiAgICAgICAgICAgIGZyYWdtZW50U3JjIHx8IEZpbHRlci5kZWZhdWx0RnJhZ21lbnRTcmMpO1xuXG4gICAgICAgIHN1cGVyKHByb2dyYW0sIHVuaWZvcm1zKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBhZGRpbmcgb2YgdGhlIGZpbHRlci4gU29tZSBmaWx0ZXJzIHJlcXVpcmUgZXh0cmEgc3BhY2UgdG8gYnJlYXRoIHN1Y2ggYXMgYSBibHVyLlxuICAgICAgICAgKiBJbmNyZWFzaW5nIHRoaXMgd2lsbCBhZGQgZXh0cmEgd2lkdGggYW5kIGhlaWdodCB0byB0aGUgYm91bmRzIG9mIHRoZSBvYmplY3QgdGhhdCB0aGVcbiAgICAgICAgICogZmlsdGVyIGlzIGFwcGxpZWQgdG8uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFkZGluZyA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZXNvbHV0aW9uIG9mIHRoZSBmaWx0ZXIuIFNldHRpbmcgdGhpcyB0byBiZSBsb3dlciB3aWxsIGxvd2VyIHRoZSBxdWFsaXR5IGJ1dFxuICAgICAgICAgKiBpbmNyZWFzZSB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIGZpbHRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gc2V0dGluZ3MuRklMVEVSX1JFU09MVVRJT047XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGVuYWJsZWQgaXMgdHJ1ZSB0aGUgZmlsdGVyIGlzIGFwcGxpZWQsIGlmIGZhbHNlIGl0IHdpbGwgbm90LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW5hYmxlZCwgUGl4aUpTIHdpbGwgZml0IHRoZSBmaWx0ZXIgYXJlYSBpbnRvIGJvdW5kYXJpZXMgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5cbiAgICAgICAgICogU3dpdGNoIGl0IG9mZiBpZiBpdCBkb2VzIG5vdCB3b3JrIGZvciBzcGVjaWZpYyBzaGFkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmF1dG9GaXQgPSB0cnVlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMZWdhY3kgZmlsdGVycyB1c2UgcG9zaXRpb24gYW5kIHV2cyBmcm9tIGF0dHJpYnV0ZXNcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxlZ2FjeSA9ICEhdGhpcy5wcm9ncmFtLmF0dHJpYnV0ZURhdGEuYVRleHR1cmVDb29yZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFdlYkdMIHN0YXRlIHRoZSBmaWx0ZXIgcmVxdWlyZXMgdG8gcmVuZGVyXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuU3RhdGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXRlID0gbmV3IFN0YXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgZmlsdGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuc3lzdGVtcy5GaWx0ZXJTeXN0ZW19IGZpbHRlck1hbmFnZXIgLSBUaGUgcmVuZGVyZXIgdG8gcmV0cmlldmUgdGhlIGZpbHRlciBmcm9tXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlclRleHR1cmV9IGlucHV0IC0gVGhlIGlucHV0IHJlbmRlciB0YXJnZXQuXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlclRleHR1cmV9IG91dHB1dCAtIFRoZSB0YXJnZXQgdG8gb3V0cHV0IHRvLlxuICAgICAqIEBwYXJhbSB7UElYSS5DTEVBUl9NT0RFU30gY2xlYXJNb2RlIC0gU2hvdWxkIHRoZSBvdXRwdXQgYmUgY2xlYXJlZCBiZWZvcmUgcmVuZGVyaW5nIHRvIGl0LlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbY3VycmVudFN0YXRlXSAtIEl0J3MgY3VycmVudCBzdGF0ZSBvZiBmaWx0ZXIuXG4gICAgICogICAgICAgIFRoZXJlIGFyZSBzb21lIHVzZWZ1bCBwcm9wZXJ0aWVzIGluIHRoZSBjdXJyZW50U3RhdGUgOlxuICAgICAqICAgICAgICB0YXJnZXQsIGZpbHRlcnMsIHNvdXJjZUZyYW1lLCBkZXN0aW5hdGlvbkZyYW1lLCByZW5kZXJUYXJnZXQsIHJlc29sdXRpb25cbiAgICAgKi9cbiAgICBhcHBseShmaWx0ZXJNYW5hZ2VyOiBGaWx0ZXJTeXN0ZW0sIGlucHV0OiBSZW5kZXJUZXh0dXJlLCBvdXRwdXQ6IFJlbmRlclRleHR1cmUsIGNsZWFyTW9kZTogQ0xFQVJfTU9ERVMsXG4gICAgICAgIF9jdXJyZW50U3RhdGU/OiBGaWx0ZXJTdGF0ZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIGRvIGFzIHlvdSBwbGVhc2UhXG5cbiAgICAgICAgZmlsdGVyTWFuYWdlci5hcHBseUZpbHRlcih0aGlzLCBpbnB1dCwgb3V0cHV0LCBjbGVhck1vZGUpO1xuXG4gICAgICAgIC8vIG9yIGp1c3QgZG8gYSByZWd1bGFyIHJlbmRlci4uXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYmxlbmRtb2RlIG9mIHRoZSBmaWx0ZXJcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCBQSVhJLkJMRU5EX01PREVTLk5PUk1BTFxuICAgICAqL1xuICAgIGdldCBibGVuZE1vZGUoKTogQkxFTkRfTU9ERVNcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmJsZW5kTW9kZTtcbiAgICB9XG5cbiAgICBzZXQgYmxlbmRNb2RlKHZhbHVlOiBCTEVORF9NT0RFUylcbiAgICB7XG4gICAgICAgIHRoaXMuc3RhdGUuYmxlbmRNb2RlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgdmVydGV4IHNoYWRlciBzb3VyY2VcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBjb25zdGFudFxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgZGVmYXVsdFZlcnRleFNyYygpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmVydGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IGZyYWdtZW50IHNoYWRlciBzb3VyY2VcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBjb25zdGFudFxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgZGVmYXVsdEZyYWdtZW50U3JjKCk6IHN0cmluZ1xuICAgIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRGcmFnbWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIGZvciBjYWNoaW5nIHNoYWRlciBJRHNcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBzdGF0aWMgU09VUkNFX0tFWV9NQVA6IERpY3Q8c3RyaW5nPjtcbn1cbiIsICJpbXBvcnQgeyBNYXRyaXggfSBmcm9tICdAcGl4aS9tYXRoJztcblxuaW1wb3J0IHR5cGUgeyBUZXh0dXJlIH0gZnJvbSAnLi9UZXh0dXJlJztcblxuY29uc3QgdGVtcE1hdCA9IG5ldyBNYXRyaXgoKTtcblxuLyoqXG4gKiBDbGFzcyBjb250cm9scyB1diBtYXBwaW5nIGZyb20gVGV4dHVyZSBub3JtYWwgc3BhY2UgdG8gQmFzZVRleHR1cmUgbm9ybWFsIHNwYWNlLlxuICpcbiAqIFRha2VzIGB0cmltYCBhbmQgYHJvdGF0ZWAgaW50byBhY2NvdW50LiBNYXkgY29udGFpbiBjbGFtcCBzZXR0aW5ncyBmb3IgTWVzaGVzIGFuZCBUaWxpbmdTcHJpdGUuXG4gKlxuICogQ2FuIGJlIHVzZWQgaW4gVGV4dHVyZSBgdXZNYXRyaXhgIGZpZWxkLCBvciBzZXBhcmF0ZWx5LCB5b3UgY2FuIHVzZSBkaWZmZXJlbnQgY2xhbXAgc2V0dGluZ3Mgb24gdGhlIHNhbWUgdGV4dHVyZS5cbiAqIElmIHlvdSB3YW50IHRvIGFkZCBzdXBwb3J0IGZvciB0ZXh0dXJlIHJlZ2lvbiBvZiBjZXJ0YWluIGZlYXR1cmUgb3IgZmlsdGVyLCB0aGF0J3Mgd2hhdCB5b3UncmUgbG9va2luZyBmb3IuXG4gKlxuICogVGFrZXMgdHJhY2sgb2YgVGV4dHVyZSBjaGFuZ2VzIHRocm91Z2ggYF9sYXN0VGV4dHVyZUlEYCBwcml2YXRlIGZpZWxkLlxuICogVXNlIGB1cGRhdGUoKWAgbWV0aG9kIGNhbGwgdG8gdHJhY2sgaXQgZnJvbSBvdXRzaWRlLlxuICpcbiAqIEBzZWUgUElYSS5UZXh0dXJlXG4gKiBAc2VlIFBJWEkuTWVzaFxuICogQHNlZSBQSVhJLlRpbGluZ1Nwcml0ZVxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZU1hdHJpeFxue1xuICAgIHB1YmxpYyBtYXBDb29yZDogTWF0cml4O1xuICAgIHB1YmxpYyBjbGFtcE9mZnNldDogbnVtYmVyO1xuICAgIHB1YmxpYyBjbGFtcE1hcmdpbjogbnVtYmVyO1xuICAgIHJlYWRvbmx5IHVDbGFtcEZyYW1lOiBGbG9hdDMyQXJyYXk7XG4gICAgcmVhZG9ubHkgdUNsYW1wT2Zmc2V0OiBGbG9hdDMyQXJyYXk7XG4gICAgX3RleHR1cmVJRDogbnVtYmVyO1xuICAgIF91cGRhdGVJRDogbnVtYmVyO1xuICAgIF90ZXh0dXJlOiBUZXh0dXJlO1xuICAgIGlzU2ltcGxlOiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlRleHR1cmV9IHRleHR1cmUgLSBvYnNlcnZlZCB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjbGFtcE1hcmdpbl0gLSBDaGFuZ2VzIGZyYW1lIGNsYW1waW5nLCAwLjUgYnkgZGVmYXVsdC4gVXNlIC0wLjUgZm9yIGV4dHJhIGJvcmRlci5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0dXJlOiBUZXh0dXJlLCBjbGFtcE1hcmdpbj86IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMuX3RleHR1cmUgPSB0ZXh0dXJlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXRyaXggb3BlcmF0aW9uIHRoYXQgY29udmVydHMgdGV4dHVyZSByZWdpb24gY29vcmRzIHRvIHRleHR1cmUgY29vcmRzXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuTWF0cml4fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWFwQ29vcmQgPSBuZXcgTWF0cml4KCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsYW1wIHJlZ2lvbiBmb3Igbm9ybWFsaXplZCBjb29yZHMsIGxlZnQtdG9wIHBpeGVsIGNlbnRlciBpbiB4eSAsIGJvdHRvbS1yaWdodCBpbiB6dy5cbiAgICAgICAgICogQ2FsY3VsYXRlZCBiYXNlZCBvbiBjbGFtcE9mZnNldC5cbiAgICAgICAgICogQG1lbWJlciB7RmxvYXQzMkFycmF5fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudUNsYW1wRnJhbWUgPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOb3JtYWxpemVkIGNsYW1wIG9mZnNldC5cbiAgICAgICAgICogQ2FsY3VsYXRlZCBiYXNlZCBvbiBjbGFtcE9mZnNldC5cbiAgICAgICAgICogQG1lbWJlciB7RmxvYXQzMkFycmF5fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudUNsYW1wT2Zmc2V0ID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJhY2tzIFRleHR1cmUgZnJhbWUgY2hhbmdlc1xuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3RleHR1cmVJRCA9IC0xO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFja3MgVGV4dHVyZSBmcmFtZSBjaGFuZ2VzXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdXBkYXRlSUQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGFuZ2VzIGZyYW1lIGNsYW1waW5nXG4gICAgICAgICAqIFdvcmtzIHdpdGggVGlsaW5nU3ByaXRlIGFuZCBNZXNoXG4gICAgICAgICAqIENoYW5nZSB0byAxLjUgaWYgeW91IHRleHR1cmUgaGFzIHJlcGVhdGVkIHJpZ2h0IGFuZCBib3R0b20gbGluZXMsIHRoYXQgbGVhZHMgdG8gc21vb3RoZXIgYm9yZGVyc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xhbXBPZmZzZXQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGFuZ2VzIGZyYW1lIGNsYW1waW5nXG4gICAgICAgICAqIFdvcmtzIHdpdGggVGlsaW5nU3ByaXRlIGFuZCBNZXNoXG4gICAgICAgICAqIENoYW5nZSB0byAtMC41IHRvIGFkZCBhIHBpeGVsIHRvIHRoZSBlZGdlLCByZWNvbW1lbmRlZCBmb3IgdHJhbnNwYXJlbnQgdHJpbW1lZCB0ZXh0dXJlcyBpbiBhdGxhc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCAwLjVcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGFtcE1hcmdpbiA9ICh0eXBlb2YgY2xhbXBNYXJnaW4gPT09ICd1bmRlZmluZWQnKSA/IDAuNSA6IGNsYW1wTWFyZ2luO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0ZXh0dXJlIHNpemUgaXMgdGhlIHNhbWUgYXMgYmFzZVRleHR1cmVcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzU2ltcGxlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdGV4dHVyZSBwcm9wZXJ0eVxuICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZX1cbiAgICAgKi9cbiAgICBnZXQgdGV4dHVyZSgpOiBUZXh0dXJlXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZTtcbiAgICB9XG5cbiAgICBzZXQgdGV4dHVyZSh2YWx1ZTogVGV4dHVyZSlcbiAgICB7XG4gICAgICAgIHRoaXMuX3RleHR1cmUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZUlEID0gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbGllcyB1dnMgYXJyYXkgdG8gdHJhbnNmb3JtXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHV2cyAtIG1lc2ggdXZzXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IFtvdXQ9dXZzXSBvdXRwdXRcbiAgICAgKiBAcmV0dXJucyB7RmxvYXQzMkFycmF5fSBvdXRwdXRcbiAgICAgKi9cbiAgICBtdWx0aXBseVV2cyh1dnM6IEZsb2F0MzJBcnJheSwgb3V0PzogRmxvYXQzMkFycmF5KTogRmxvYXQzMkFycmF5XG4gICAge1xuICAgICAgICBpZiAob3V0ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIG91dCA9IHV2cztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1hdCA9IHRoaXMubWFwQ29vcmQ7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1dnMubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSB1dnNbaV07XG4gICAgICAgICAgICBjb25zdCB5ID0gdXZzW2kgKyAxXTtcblxuICAgICAgICAgICAgb3V0W2ldID0gKHggKiBtYXQuYSkgKyAoeSAqIG1hdC5jKSArIG1hdC50eDtcbiAgICAgICAgICAgIG91dFtpICsgMV0gPSAoeCAqIG1hdC5iKSArICh5ICogbWF0LmQpICsgbWF0LnR5O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB1cGRhdGVzIG1hdHJpY2VzIGlmIHRleHR1cmUgd2FzIGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZVVwZGF0ZT1mYWxzZV0gLSBpZiB0cnVlLCBtYXRyaWNlcyB3aWxsIGJlIHVwZGF0ZWQgYW55IGNhc2VcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciBvciBub3QgaXQgd2FzIHVwZGF0ZWRcbiAgICAgKi9cbiAgICB1cGRhdGUoZm9yY2VVcGRhdGU/OiBib29sZWFuKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgY29uc3QgdGV4ID0gdGhpcy5fdGV4dHVyZTtcblxuICAgICAgICBpZiAoIXRleCB8fCAhdGV4LnZhbGlkKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZvcmNlVXBkYXRlXG4gICAgICAgICAgICAmJiB0aGlzLl90ZXh0dXJlSUQgPT09IHRleC5fdXBkYXRlSUQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3RleHR1cmVJRCA9IHRleC5fdXBkYXRlSUQ7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUlEKys7XG5cbiAgICAgICAgY29uc3QgdXZzID0gdGV4Ll91dnM7XG5cbiAgICAgICAgdGhpcy5tYXBDb29yZC5zZXQodXZzLngxIC0gdXZzLngwLCB1dnMueTEgLSB1dnMueTAsIHV2cy54MyAtIHV2cy54MCwgdXZzLnkzIC0gdXZzLnkwLCB1dnMueDAsIHV2cy55MCk7XG5cbiAgICAgICAgY29uc3Qgb3JpZyA9IHRleC5vcmlnO1xuICAgICAgICBjb25zdCB0cmltID0gdGV4LnRyaW07XG5cbiAgICAgICAgaWYgKHRyaW0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBNYXQuc2V0KG9yaWcud2lkdGggLyB0cmltLndpZHRoLCAwLCAwLCBvcmlnLmhlaWdodCAvIHRyaW0uaGVpZ2h0LFxuICAgICAgICAgICAgICAgIC10cmltLnggLyB0cmltLndpZHRoLCAtdHJpbS55IC8gdHJpbS5oZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5tYXBDb29yZC5hcHBlbmQodGVtcE1hdCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0ZXhCYXNlID0gdGV4LmJhc2VUZXh0dXJlO1xuICAgICAgICBjb25zdCBmcmFtZSA9IHRoaXMudUNsYW1wRnJhbWU7XG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IHRoaXMuY2xhbXBNYXJnaW4gLyB0ZXhCYXNlLnJlc29sdXRpb247XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuY2xhbXBPZmZzZXQ7XG5cbiAgICAgICAgZnJhbWVbMF0gPSAodGV4Ll9mcmFtZS54ICsgbWFyZ2luICsgb2Zmc2V0KSAvIHRleEJhc2Uud2lkdGg7XG4gICAgICAgIGZyYW1lWzFdID0gKHRleC5fZnJhbWUueSArIG1hcmdpbiArIG9mZnNldCkgLyB0ZXhCYXNlLmhlaWdodDtcbiAgICAgICAgZnJhbWVbMl0gPSAodGV4Ll9mcmFtZS54ICsgdGV4Ll9mcmFtZS53aWR0aCAtIG1hcmdpbiArIG9mZnNldCkgLyB0ZXhCYXNlLndpZHRoO1xuICAgICAgICBmcmFtZVszXSA9ICh0ZXguX2ZyYW1lLnkgKyB0ZXguX2ZyYW1lLmhlaWdodCAtIG1hcmdpbiArIG9mZnNldCkgLyB0ZXhCYXNlLmhlaWdodDtcbiAgICAgICAgdGhpcy51Q2xhbXBPZmZzZXRbMF0gPSBvZmZzZXQgLyB0ZXhCYXNlLnJlYWxXaWR0aDtcbiAgICAgICAgdGhpcy51Q2xhbXBPZmZzZXRbMV0gPSBvZmZzZXQgLyB0ZXhCYXNlLnJlYWxIZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5pc1NpbXBsZSA9IHRleC5fZnJhbWUud2lkdGggPT09IHRleEJhc2Uud2lkdGhcbiAgICAgICAgICAgICYmIHRleC5fZnJhbWUuaGVpZ2h0ID09PSB0ZXhCYXNlLmhlaWdodFxuICAgICAgICAgICAgJiYgdGV4LnJvdGF0ZSA9PT0gMDtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgRmlsdGVyIH0gZnJvbSAnLi4vRmlsdGVyJztcbmltcG9ydCB7IE1hdHJpeCwgUG9pbnQgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB7IENMRUFSX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB2ZXJ0ZXggZnJvbSAnLi9zcHJpdGVNYXNrRmlsdGVyLnZlcnQnO1xuaW1wb3J0IGZyYWdtZW50IGZyb20gJy4vc3ByaXRlTWFza0ZpbHRlci5mcmFnJztcbmltcG9ydCB7IFRleHR1cmVNYXRyaXggfSBmcm9tICcuLi8uLi90ZXh0dXJlcy9UZXh0dXJlTWF0cml4JztcblxuaW1wb3J0IHR5cGUgeyBGaWx0ZXJTeXN0ZW0gfSBmcm9tICcuLi9GaWx0ZXJTeXN0ZW0nO1xuaW1wb3J0IHR5cGUgeyBJTWFza1RhcmdldCB9IGZyb20gJy4uLy4uL21hc2svTWFza0RhdGEnO1xuaW1wb3J0IHR5cGUgeyBUZXh0dXJlIH0gZnJvbSAnLi4vLi4vdGV4dHVyZXMvVGV4dHVyZSc7XG5pbXBvcnQgdHlwZSB7IFJlbmRlclRleHR1cmUgfSBmcm9tICcuLi8uLi9yZW5kZXJUZXh0dXJlL1JlbmRlclRleHR1cmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTcHJpdGVNYXNrVGFyZ2V0IGV4dGVuZHMgSU1hc2tUYXJnZXRcbntcbiAgICBfdGV4dHVyZTogVGV4dHVyZTtcbiAgICB3b3JsZEFscGhhOiBudW1iZXI7XG4gICAgYW5jaG9yOiBQb2ludDtcbn1cblxuLyoqXG4gKiBUaGlzIGhhbmRsZXMgYSBTcHJpdGUgYWN0aW5nIGFzIGEgbWFzaywgYXMgb3Bwb3NlZCB0byBhIEdyYXBoaWMuXG4gKlxuICogV2ViR0wgb25seS5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuRmlsdGVyXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgU3ByaXRlTWFza0ZpbHRlciBleHRlbmRzIEZpbHRlclxue1xuICAgIG1hc2tTcHJpdGU6IElNYXNrVGFyZ2V0O1xuICAgIG1hc2tNYXRyaXg6IE1hdHJpeDtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuU3ByaXRlfSBzcHJpdGUgLSB0aGUgdGFyZ2V0IHNwcml0ZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNwcml0ZTogSU1hc2tUYXJnZXQpXG4gICAge1xuICAgICAgICBjb25zdCBtYXNrTWF0cml4ID0gbmV3IE1hdHJpeCgpO1xuXG4gICAgICAgIHN1cGVyKHZlcnRleCwgZnJhZ21lbnQpO1xuXG4gICAgICAgIHNwcml0ZS5yZW5kZXJhYmxlID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwcml0ZSBtYXNrXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuU3ByaXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXNrU3ByaXRlID0gc3ByaXRlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXNrIG1hdHJpeFxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLk1hdHJpeH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWFza01hdHJpeCA9IG1hc2tNYXRyaXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgZmlsdGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuc3lzdGVtcy5GaWx0ZXJTeXN0ZW19IGZpbHRlck1hbmFnZXIgLSBUaGUgcmVuZGVyZXIgdG8gcmV0cmlldmUgdGhlIGZpbHRlciBmcm9tXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlclRleHR1cmV9IGlucHV0IC0gVGhlIGlucHV0IHJlbmRlciB0YXJnZXQuXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlclRleHR1cmV9IG91dHB1dCAtIFRoZSB0YXJnZXQgdG8gb3V0cHV0IHRvLlxuICAgICAqIEBwYXJhbSB7UElYSS5DTEVBUl9NT0RFU30gY2xlYXJNb2RlIC0gU2hvdWxkIHRoZSBvdXRwdXQgYmUgY2xlYXJlZCBiZWZvcmUgcmVuZGVyaW5nIHRvIGl0LlxuICAgICAqL1xuICAgIGFwcGx5KGZpbHRlck1hbmFnZXI6IEZpbHRlclN5c3RlbSwgaW5wdXQ6IFJlbmRlclRleHR1cmUsIG91dHB1dDogUmVuZGVyVGV4dHVyZSwgY2xlYXJNb2RlOiBDTEVBUl9NT0RFUyk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IG1hc2tTcHJpdGUgPSB0aGlzLm1hc2tTcHJpdGUgYXMgSVNwcml0ZU1hc2tUYXJnZXQ7XG4gICAgICAgIGNvbnN0IHRleCA9IG1hc2tTcHJpdGUuX3RleHR1cmU7XG5cbiAgICAgICAgaWYgKCF0ZXgudmFsaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRleC51dk1hdHJpeClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gbWFyZ2luID0gMC4wLCBsZXQgaXQgYmxlZWQgYSBiaXQsIHNoYWRlciBjb2RlIGJlY29tZXMgZWFzaWVyXG4gICAgICAgICAgICAvLyBhc3N1bWluZyB0aGF0IGF0bGFzIHRleHR1cmVzIHdlcmUgbWFkZSB3aXRoIDEtcGl4ZWwgcGFkZGluZ1xuICAgICAgICAgICAgdGV4LnV2TWF0cml4ID0gbmV3IFRleHR1cmVNYXRyaXgodGV4LCAwLjApO1xuICAgICAgICB9XG4gICAgICAgIHRleC51dk1hdHJpeC51cGRhdGUoKTtcblxuICAgICAgICB0aGlzLnVuaWZvcm1zLm5wbUFscGhhID0gdGV4LmJhc2VUZXh0dXJlLmFscGhhTW9kZSA/IDAuMCA6IDEuMDtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy5tYXNrID0gdGV4O1xuICAgICAgICAvLyBnZXQgX25vcm1hbGl6ZWQgc3ByaXRlIHRleHR1cmUgY29vcmRzXyBhbmQgY29udmVydCB0aGVtIHRvIF9ub3JtYWxpemVkIGF0bGFzIHRleHR1cmUgY29vcmRzXyB3aXRoIGBwcmVwZW5kYFxuICAgICAgICB0aGlzLnVuaWZvcm1zLm90aGVyTWF0cml4ID0gZmlsdGVyTWFuYWdlci5jYWxjdWxhdGVTcHJpdGVNYXRyaXgodGhpcy5tYXNrTWF0cml4LCBtYXNrU3ByaXRlKVxuICAgICAgICAgICAgLnByZXBlbmQodGV4LnV2TWF0cml4Lm1hcENvb3JkKTtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy5hbHBoYSA9IG1hc2tTcHJpdGUud29ybGRBbHBoYTtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy5tYXNrQ2xhbXAgPSB0ZXgudXZNYXRyaXgudUNsYW1wRnJhbWU7XG5cbiAgICAgICAgZmlsdGVyTWFuYWdlci5hcHBseUZpbHRlcih0aGlzLCBpbnB1dCwgb3V0cHV0LCBjbGVhck1vZGUpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tICcuLi9TeXN0ZW0nO1xuaW1wb3J0IHsgTWFza0RhdGEgfSBmcm9tICcuL01hc2tEYXRhJztcbmltcG9ydCB7IFNwcml0ZU1hc2tGaWx0ZXIgfSBmcm9tICcuLi9maWx0ZXJzL3Nwcml0ZU1hc2svU3ByaXRlTWFza0ZpbHRlcic7XG5pbXBvcnQgeyBNQVNLX1RZUEVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcblxuaW1wb3J0IHR5cGUgeyBJTWFza1RhcmdldCB9IGZyb20gJy4vTWFza0RhdGEnO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uL1JlbmRlcmVyJztcblxuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgbWFza3MuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLlN5c3RlbVxuICogQG1lbWJlcm9mIFBJWEkuc3lzdGVtc1xuICovXG5leHBvcnQgY2xhc3MgTWFza1N5c3RlbSBleHRlbmRzIFN5c3RlbVxue1xuICAgIHB1YmxpYyBlbmFibGVTY2lzc29yOiBib29sZWFuO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBhbHBoYU1hc2tQb29sOiBBcnJheTxTcHJpdGVNYXNrRmlsdGVyW10+O1xuICAgIHByb3RlY3RlZCBhbHBoYU1hc2tJbmRleDogbnVtYmVyO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbWFza0RhdGFQb29sOiBBcnJheTxNYXNrRGF0YT47XG4gICAgcHJpdmF0ZSBtYXNrU3RhY2s6IEFycmF5PE1hc2tEYXRhPjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBSZW5kZXJlcilcbiAgICB7XG4gICAgICAgIHN1cGVyKHJlbmRlcmVyKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5hYmxlIHNjaXNzb3JcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVuYWJsZVNjaXNzb3IgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUG9vbCBvZiB1c2VkIHNwcml0ZSBtYXNrIGZpbHRlcnNcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5TcHJpdGVNYXNrRmlsdGVyW119XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbHBoYU1hc2tQb29sID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvb2wgb2YgbWFzayBkYXRhXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuTWFza0RhdGFbXX1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1hc2tEYXRhUG9vbCA9IFtdO1xuXG4gICAgICAgIHRoaXMubWFza1N0YWNrID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1cnJlbnQgaW5kZXggb2YgYWxwaGEgbWFzayBwb29sXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWxwaGFNYXNrSW5kZXggPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIG1hc2sgc3RhY2sgdGhhdCBpcyB1c2VkIGJ5IHRoaXMgU3lzdGVtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLk1hc2tEYXRhW119IG1hc2tTdGFjayAtIFRoZSBtYXNrIHN0YWNrXG4gICAgICovXG4gICAgc2V0TWFza1N0YWNrKG1hc2tTdGFjazogQXJyYXk8TWFza0RhdGE+KTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5tYXNrU3RhY2sgPSBtYXNrU3RhY2s7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2Npc3Nvci5zZXRNYXNrU3RhY2sobWFza1N0YWNrKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zdGVuY2lsLnNldE1hc2tTdGFjayhtYXNrU3RhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIE1hc2sgYW5kIGFkZHMgaXQgdG8gdGhlIGN1cnJlbnQgZmlsdGVyIHN0YWNrLlxuICAgICAqIFJlbmRlcmVyIGJhdGNoIG11c3QgYmUgZmx1c2hlZCBiZWZvcmVoYW5kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IHRhcmdldCAtIERpc3BsYXkgT2JqZWN0IHRvIHB1c2ggdGhlIG1hc2sgdG9cbiAgICAgKiBAcGFyYW0ge1BJWEkuTWFza0RhdGF8UElYSS5TcHJpdGV8UElYSS5HcmFwaGljc3xQSVhJLkRpc3BsYXlPYmplY3R9IG1hc2tEYXRhIC0gVGhlIG1hc2tpbmcgZGF0YS5cbiAgICAgKi9cbiAgICBwdXNoKHRhcmdldDogSU1hc2tUYXJnZXQsIG1hc2tEYXRhT3JUYXJnZXQ6IE1hc2tEYXRhfElNYXNrVGFyZ2V0KTogdm9pZFxuICAgIHtcbiAgICAgICAgbGV0IG1hc2tEYXRhID0gbWFza0RhdGFPclRhcmdldCBhcyBNYXNrRGF0YTtcblxuICAgICAgICBpZiAoIW1hc2tEYXRhLmlzTWFza0RhdGEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLm1hc2tEYXRhUG9vbC5wb3AoKSB8fCBuZXcgTWFza0RhdGEoKTtcblxuICAgICAgICAgICAgZC5wb29sZWQgPSB0cnVlO1xuICAgICAgICAgICAgZC5tYXNrT2JqZWN0ID0gbWFza0RhdGFPclRhcmdldCBhcyBJTWFza1RhcmdldDtcbiAgICAgICAgICAgIG1hc2tEYXRhID0gZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtYXNrRGF0YS5hdXRvRGV0ZWN0KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmRldGVjdChtYXNrRGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBtYXNrRGF0YS5jb3B5Q291bnRlcnNPclJlc2V0KHRoaXMubWFza1N0YWNrW3RoaXMubWFza1N0YWNrLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgbWFza0RhdGEuX3RhcmdldCA9IHRhcmdldDtcblxuICAgICAgICBzd2l0Y2ggKG1hc2tEYXRhLnR5cGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhc2UgTUFTS19UWVBFUy5TQ0lTU09SOlxuICAgICAgICAgICAgICAgIHRoaXMubWFza1N0YWNrLnB1c2gobWFza0RhdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Npc3Nvci5wdXNoKG1hc2tEYXRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTUFTS19UWVBFUy5TVEVOQ0lMOlxuICAgICAgICAgICAgICAgIHRoaXMubWFza1N0YWNrLnB1c2gobWFza0RhdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc3RlbmNpbC5wdXNoKG1hc2tEYXRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTUFTS19UWVBFUy5TUFJJVEU6XG4gICAgICAgICAgICAgICAgbWFza0RhdGEuY29weUNvdW50ZXJzT3JSZXNldChudWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2hTcHJpdGVNYXNrKG1hc2tEYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hc2tTdGFjay5wdXNoKG1hc2tEYXRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBsYXN0IG1hc2sgZnJvbSB0aGUgbWFzayBzdGFjayBhbmQgZG9lc24ndCByZXR1cm4gaXQuXG4gICAgICogUmVuZGVyZXIgYmF0Y2ggbXVzdCBiZSBmbHVzaGVkIGJlZm9yZWhhbmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gdGFyZ2V0IC0gRGlzcGxheSBPYmplY3QgdG8gcG9wIHRoZSBtYXNrIGZyb21cbiAgICAgKi9cbiAgICBwb3AodGFyZ2V0OiBJTWFza1RhcmdldCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IG1hc2tEYXRhID0gdGhpcy5tYXNrU3RhY2sucG9wKCk7XG5cbiAgICAgICAgaWYgKCFtYXNrRGF0YSB8fCBtYXNrRGF0YS5fdGFyZ2V0ICE9PSB0YXJnZXQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBhbiBhc3NlcnQgd2hlbiB3ZSBoYXZlIGl0XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAobWFza0RhdGEudHlwZSlcbiAgICAgICAge1xuICAgICAgICAgICAgY2FzZSBNQVNLX1RZUEVTLlNDSVNTT1I6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zY2lzc29yLnBvcCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBNQVNLX1RZUEVTLlNURU5DSUw6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zdGVuY2lsLnBvcChtYXNrRGF0YS5tYXNrT2JqZWN0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTUFTS19UWVBFUy5TUFJJVEU6XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BTcHJpdGVNYXNrKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFza0RhdGEucmVzZXQoKTtcblxuICAgICAgICBpZiAobWFza0RhdGEucG9vbGVkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm1hc2tEYXRhUG9vbC5wdXNoKG1hc2tEYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdHlwZSBvZiBNYXNrRGF0YSBiYXNlZCBvbiBpdHMgbWFza09iamVjdFxuICAgICAqIEBwYXJhbSB7UElYSS5NYXNrRGF0YX0gbWFza0RhdGFcbiAgICAgKi9cbiAgICBkZXRlY3QobWFza0RhdGE6IE1hc2tEYXRhKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbWFza09iamVjdCA9IG1hc2tEYXRhLm1hc2tPYmplY3Q7XG5cbiAgICAgICAgaWYgKG1hc2tPYmplY3QuaXNTcHJpdGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1hc2tEYXRhLnR5cGUgPSBNQVNLX1RZUEVTLlNQUklURTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG1hc2tEYXRhLnR5cGUgPSBNQVNLX1RZUEVTLlNURU5DSUw7XG4gICAgICAgIC8vIGRldGVjdCBzY2lzc29yIGluIGdyYXBoaWNzXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVNjaXNzb3JcbiAgICAgICAgICAgICYmIG1hc2tPYmplY3QuaXNGYXN0UmVjdFxuICAgICAgICAgICAgJiYgbWFza09iamVjdC5pc0Zhc3RSZWN0KCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IG1hc2tPYmplY3Qud29ybGRUcmFuc2Zvcm07XG5cbiAgICAgICAgICAgIC8vIFRPRE86IG1vdmUgdGhlIGNoZWNrIHRvIHRoZSBtYXRyaXggaXRzZWxmXG4gICAgICAgICAgICAvLyB3ZSBhcmUgY2hlY2tpbmcgdGhhdCBpdHMgb3J0aG9nb25hbCBhbmQgeCByb3RhdGlvbiBpcyAwIDkwIDE4MCBvciAyNzBcblxuICAgICAgICAgICAgbGV0IHJvdFggPSBNYXRoLmF0YW4yKG1hdHJpeC5iLCBtYXRyaXguYSk7XG4gICAgICAgICAgICBsZXQgcm90WFkgPSBNYXRoLmF0YW4yKG1hdHJpeC5kLCBtYXRyaXguYyk7XG5cbiAgICAgICAgICAgIC8vIHVzZSB0aGUgbmVhcmVzdCBkZWdyZWUgdG8gMC4wMVxuICAgICAgICAgICAgcm90WCA9IE1hdGgucm91bmQocm90WCAqICgxODAgLyBNYXRoLlBJKSAqIDEwMCk7XG4gICAgICAgICAgICByb3RYWSA9IE1hdGgucm91bmQocm90WFkgKiAoMTgwIC8gTWF0aC5QSSkgKiAxMDApIC0gcm90WDtcblxuICAgICAgICAgICAgcm90WCA9ICgocm90WCAlIDkwMDApICsgOTAwMCkgJSA5MDAwO1xuICAgICAgICAgICAgcm90WFkgPSAoKHJvdFhZICUgMTgwMDApICsgMTgwMDApICUgMTgwMDA7XG5cbiAgICAgICAgICAgIGlmIChyb3RYID09PSAwICYmIHJvdFhZID09PSA5MDAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1hc2tEYXRhLnR5cGUgPSBNQVNLX1RZUEVTLlNDSVNTT1I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBNYXNrIGFuZCBhZGRzIGl0IHRvIHRoZSBjdXJyZW50IGZpbHRlciBzdGFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5NYXNrRGF0YX0gbWFza0RhdGEgLSBTcHJpdGUgdG8gYmUgdXNlZCBhcyB0aGUgbWFza1xuICAgICAqL1xuICAgIHB1c2hTcHJpdGVNYXNrKG1hc2tEYXRhOiBNYXNrRGF0YSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgbWFza09iamVjdCB9ID0gbWFza0RhdGE7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IG1hc2tEYXRhLl90YXJnZXQ7XG4gICAgICAgIGxldCBhbHBoYU1hc2tGaWx0ZXIgPSB0aGlzLmFscGhhTWFza1Bvb2xbdGhpcy5hbHBoYU1hc2tJbmRleF07XG5cbiAgICAgICAgaWYgKCFhbHBoYU1hc2tGaWx0ZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGFscGhhTWFza0ZpbHRlciA9IHRoaXMuYWxwaGFNYXNrUG9vbFt0aGlzLmFscGhhTWFza0luZGV4XSA9IFtuZXcgU3ByaXRlTWFza0ZpbHRlcihtYXNrT2JqZWN0KV07XG4gICAgICAgIH1cblxuICAgICAgICBhbHBoYU1hc2tGaWx0ZXJbMF0ucmVzb2x1dGlvbiA9IHRoaXMucmVuZGVyZXIucmVzb2x1dGlvbjtcbiAgICAgICAgYWxwaGFNYXNrRmlsdGVyWzBdLm1hc2tTcHJpdGUgPSBtYXNrT2JqZWN0O1xuXG4gICAgICAgIGNvbnN0IHN0YXNoRmlsdGVyQXJlYSA9IHRhcmdldC5maWx0ZXJBcmVhO1xuXG4gICAgICAgIHRhcmdldC5maWx0ZXJBcmVhID0gbWFza09iamVjdC5nZXRCb3VuZHModHJ1ZSk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZmlsdGVyLnB1c2godGFyZ2V0LCBhbHBoYU1hc2tGaWx0ZXIpO1xuICAgICAgICB0YXJnZXQuZmlsdGVyQXJlYSA9IHN0YXNoRmlsdGVyQXJlYTtcblxuICAgICAgICB0aGlzLmFscGhhTWFza0luZGV4Kys7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgbGFzdCBmaWx0ZXIgZnJvbSB0aGUgZmlsdGVyIHN0YWNrIGFuZCBkb2Vzbid0IHJldHVybiBpdC5cbiAgICAgKi9cbiAgICBwb3BTcHJpdGVNYXNrKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZmlsdGVyLnBvcCgpO1xuICAgICAgICB0aGlzLmFscGhhTWFza0luZGV4LS07XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFN5c3RlbSB9IGZyb20gJy4uL1N5c3RlbSc7XG5cbmltcG9ydCB0eXBlIHsgTWFza0RhdGEgfSBmcm9tICcuL01hc2tEYXRhJztcbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi9SZW5kZXJlcic7XG5cbi8qKlxuICogU3lzdGVtIHBsdWdpbiB0byB0aGUgcmVuZGVyZXIgdG8gbWFuYWdlIG1hc2tzIG9mIGNlcnRhaW4gdHlwZVxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5TeXN0ZW1cbiAqIEBtZW1iZXJvZiBQSVhJLnN5c3RlbXNcbiAqL1xuZXhwb3J0IGNsYXNzIEFic3RyYWN0TWFza1N5c3RlbSBleHRlbmRzIFN5c3RlbVxue1xuICAgIHByb3RlY3RlZCBtYXNrU3RhY2s6IEFycmF5PE1hc2tEYXRhPjtcbiAgICBwcm90ZWN0ZWQgZ2xDb25zdDogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBSZW5kZXJlcilcbiAgICB7XG4gICAgICAgIHN1cGVyKHJlbmRlcmVyKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1hc2sgc3RhY2tcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5NYXNrRGF0YVtdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXNrU3RhY2sgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RhbnQgZm9yIGdsLmVuYWJsZVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdsQ29uc3QgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldHMgY291bnQgb2YgbWFza3Mgb2YgY2VydGFpbiB0eXBlXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXRTdGFja0xlbmd0aCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hc2tTdGFjay5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgbWFzayBzdGFjayB0aGF0IGlzIHVzZWQgYnkgdGhpcyBTeXN0ZW0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuTWFza0RhdGFbXX0gbWFza1N0YWNrIC0gVGhlIG1hc2sgc3RhY2tcbiAgICAgKi9cbiAgICBzZXRNYXNrU3RhY2sobWFza1N0YWNrOiBBcnJheTxNYXNrRGF0YT4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB7IGdsIH0gPSB0aGlzLnJlbmRlcmVyO1xuICAgICAgICBjb25zdCBjdXJTdGFja0xlbiA9IHRoaXMuZ2V0U3RhY2tMZW5ndGgoKTtcblxuICAgICAgICB0aGlzLm1hc2tTdGFjayA9IG1hc2tTdGFjaztcblxuICAgICAgICBjb25zdCBuZXdTdGFja0xlbiA9IHRoaXMuZ2V0U3RhY2tMZW5ndGgoKTtcblxuICAgICAgICBpZiAobmV3U3RhY2tMZW4gIT09IGN1clN0YWNrTGVuKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAobmV3U3RhY2tMZW4gPT09IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2wuZGlzYWJsZSh0aGlzLmdsQ29uc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGdsLmVuYWJsZSh0aGlzLmdsQ29uc3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3VzZUN1cnJlbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHVwIHJlbmRlcmVyIHRvIHVzZSB0aGUgY3VycmVudCBtYXNrIGRhdGEuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX3VzZUN1cnJlbnQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gT1ZFUldSSVRFO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoZSBtYXNrIHN0YWNrLlxuICAgICAqXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG5cbiAgICAgICAgdGhpcy5tYXNrU3RhY2sgPSBudWxsO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBYnN0cmFjdE1hc2tTeXN0ZW0gfSBmcm9tICcuL0Fic3RyYWN0TWFza1N5c3RlbSc7XG5cbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi9SZW5kZXJlcic7XG5pbXBvcnQgdHlwZSB7IE1hc2tEYXRhIH0gZnJvbSAnLi9NYXNrRGF0YSc7XG5cbi8qKlxuICogU3lzdGVtIHBsdWdpbiB0byB0aGUgcmVuZGVyZXIgdG8gbWFuYWdlIHNjaXNzb3IgcmVjdHMgKHVzZWQgZm9yIG1hc2tzKS5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuU3lzdGVtXG4gKiBAbWVtYmVyb2YgUElYSS5zeXN0ZW1zXG4gKi9cbmV4cG9ydCBjbGFzcyBTY2lzc29yU3lzdGVtIGV4dGVuZHMgQWJzdHJhY3RNYXNrU3lzdGVtXG57XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgIHtcbiAgICAgICAgc3VwZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMuZ2xDb25zdCA9IFdlYkdMUmVuZGVyaW5nQ29udGV4dC5TQ0lTU09SX1RFU1Q7XG4gICAgfVxuXG4gICAgZ2V0U3RhY2tMZW5ndGgoKTogbnVtYmVyXG4gICAge1xuICAgICAgICBjb25zdCBtYXNrRGF0YSA9IHRoaXMubWFza1N0YWNrW3RoaXMubWFza1N0YWNrLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGlmIChtYXNrRGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIG1hc2tEYXRhLl9zY2lzc29yQ291bnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIE1hc2sgYW5kIGFkZHMgaXQgdG8gdGhlIGN1cnJlbnQgc3RlbmNpbCBzdGFjay4gQGFsdmluXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuTWFza0RhdGF9IG1hc2tEYXRhIC0gVGhlIG1hc2sgZGF0YVxuICAgICAqL1xuICAgIHB1c2gobWFza0RhdGE6IE1hc2tEYXRhKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbWFza09iamVjdCA9IG1hc2tEYXRhLm1hc2tPYmplY3Q7XG5cbiAgICAgICAgbWFza09iamVjdC5yZW5kZXJhYmxlID0gdHJ1ZTtcblxuICAgICAgICBjb25zdCBwcmV2RGF0YSA9IG1hc2tEYXRhLl9zY2lzc29yUmVjdDtcbiAgICAgICAgY29uc3QgYm91bmRzID0gbWFza09iamVjdC5nZXRCb3VuZHModHJ1ZSk7XG4gICAgICAgIGNvbnN0IHsgZ2wgfSA9IHRoaXMucmVuZGVyZXI7XG5cbiAgICAgICAgbWFza09iamVjdC5yZW5kZXJhYmxlID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHByZXZEYXRhKVxuICAgICAgICB7XG4gICAgICAgICAgICBib3VuZHMuZml0KHByZXZEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsLmVuYWJsZShnbC5TQ0lTU09SX1RFU1QpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFza0RhdGEuX3NjaXNzb3JDb3VudGVyKys7XG4gICAgICAgIG1hc2tEYXRhLl9zY2lzc29yUmVjdCA9IGJvdW5kcztcbiAgICAgICAgdGhpcy5fdXNlQ3VycmVudCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvcHMgc2Npc3NvciBtYXNrLiBNYXNrRGF0YSBpcyBhbHJlYWR5IHJlbW92ZWQgZnJvbSBzdGFja1xuICAgICAqL1xuICAgIHBvcCgpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB7IGdsIH0gPSB0aGlzLnJlbmRlcmVyO1xuXG4gICAgICAgIGlmICh0aGlzLmdldFN0YWNrTGVuZ3RoKCkgPiAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl91c2VDdXJyZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC5kaXNhYmxlKGdsLlNDSVNTT1JfVEVTVCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCByZW5kZXJlciB0byB1c2UgdGhlIGN1cnJlbnQgc2Npc3NvciBkYXRhLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3VzZUN1cnJlbnQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMubWFza1N0YWNrW3RoaXMubWFza1N0YWNrLmxlbmd0aCAtIDFdLl9zY2lzc29yUmVjdDtcbiAgICAgICAgY29uc3QgcnQgPSB0aGlzLnJlbmRlcmVyLnJlbmRlclRleHR1cmUuY3VycmVudDtcbiAgICAgICAgY29uc3QgeyB0cmFuc2Zvcm0sIHNvdXJjZUZyYW1lLCBkZXN0aW5hdGlvbkZyYW1lIH0gPSB0aGlzLnJlbmRlcmVyLnByb2plY3Rpb247XG4gICAgICAgIGNvbnN0IHJlc29sdXRpb24gPSBydCA/IHJ0LnJlc29sdXRpb24gOiB0aGlzLnJlbmRlcmVyLnJlc29sdXRpb247XG4gICAgICAgIGxldCB4ID0gKChyZWN0LnggLSBzb3VyY2VGcmFtZS54KSAqIHJlc29sdXRpb24pICsgZGVzdGluYXRpb25GcmFtZS54O1xuICAgICAgICBsZXQgeSA9ICgocmVjdC55IC0gc291cmNlRnJhbWUueSkgKiByZXNvbHV0aW9uKSArIGRlc3RpbmF0aW9uRnJhbWUueTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSByZWN0LndpZHRoICogcmVzb2x1dGlvbjtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKiByZXNvbHV0aW9uO1xuXG4gICAgICAgIGlmICh0cmFuc2Zvcm0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHggKz0gdHJhbnNmb3JtLnR4ICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHkgKz0gdHJhbnNmb3JtLnR5ICogcmVzb2x1dGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJ0KVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBmbGlwWS4gSW4gZnV0dXJlIHdlJ2xsIGhhdmUgaXQgb3ZlciByZW5kZXJUZXh0dXJlcyBhcyBhbiBvcHRpb25cbiAgICAgICAgICAgIHkgPSB0aGlzLnJlbmRlcmVyLmhlaWdodCAtIGhlaWdodCAtIHk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlcmVyLmdsLnNjaXNzb3IoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFic3RyYWN0TWFza1N5c3RlbSB9IGZyb20gJy4vQWJzdHJhY3RNYXNrU3lzdGVtJztcblxuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uL1JlbmRlcmVyJztcbmltcG9ydCB0eXBlIHsgSU1hc2tUYXJnZXQsIE1hc2tEYXRhIH0gZnJvbSAnLi9NYXNrRGF0YSc7XG5cbi8qKlxuICogU3lzdGVtIHBsdWdpbiB0byB0aGUgcmVuZGVyZXIgdG8gbWFuYWdlIHN0ZW5jaWxzICh1c2VkIGZvciBtYXNrcykuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLlN5c3RlbVxuICogQG1lbWJlcm9mIFBJWEkuc3lzdGVtc1xuICovXG5leHBvcnQgY2xhc3MgU3RlbmNpbFN5c3RlbSBleHRlbmRzIEFic3RyYWN0TWFza1N5c3RlbVxue1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBSZW5kZXJlcilcbiAgICB7XG4gICAgICAgIHN1cGVyKHJlbmRlcmVyKTtcblxuICAgICAgICB0aGlzLmdsQ29uc3QgPSBXZWJHTFJlbmRlcmluZ0NvbnRleHQuU1RFTkNJTF9URVNUO1xuICAgIH1cblxuICAgIGdldFN0YWNrTGVuZ3RoKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgY29uc3QgbWFza0RhdGEgPSB0aGlzLm1hc2tTdGFja1t0aGlzLm1hc2tTdGFjay5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZiAobWFza0RhdGEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBtYXNrRGF0YS5fc3RlbmNpbENvdW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBNYXNrIGFuZCBhZGRzIGl0IHRvIHRoZSBjdXJyZW50IHN0ZW5jaWwgc3RhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuTWFza0RhdGF9IG1hc2tEYXRhIC0gVGhlIG1hc2sgZGF0YVxuICAgICAqL1xuICAgIHB1c2gobWFza0RhdGE6IE1hc2tEYXRhKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbWFza09iamVjdCA9IG1hc2tEYXRhLm1hc2tPYmplY3Q7XG4gICAgICAgIGNvbnN0IHsgZ2wgfSA9IHRoaXMucmVuZGVyZXI7XG4gICAgICAgIGNvbnN0IHByZXZNYXNrQ291bnQgPSBtYXNrRGF0YS5fc3RlbmNpbENvdW50ZXI7XG5cbiAgICAgICAgaWYgKHByZXZNYXNrQ291bnQgPT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGZvcmNlIHVzZSBzdGVuY2lsIHRleHR1cmUgaW4gY3VycmVudCBmcmFtZWJ1ZmZlclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5mcmFtZWJ1ZmZlci5mb3JjZVN0ZW5jaWwoKTtcbiAgICAgICAgICAgIGdsLmVuYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFza0RhdGEuX3N0ZW5jaWxDb3VudGVyKys7XG5cbiAgICAgICAgLy8gSW5jcmVtZW50IHRoZSByZWZlcmVuY2Ugc3RlbmNpbCB2YWx1ZSB3aGVyZSB0aGUgbmV3IG1hc2sgb3ZlcmxhcHMgd2l0aCB0aGUgb2xkIG9uZXMuXG4gICAgICAgIGdsLmNvbG9yTWFzayhmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgIGdsLnN0ZW5jaWxGdW5jKGdsLkVRVUFMLCBwcmV2TWFza0NvdW50LCB0aGlzLl9nZXRCaXR3aXNlTWFzaygpKTtcbiAgICAgICAgZ2wuc3RlbmNpbE9wKGdsLktFRVAsIGdsLktFRVAsIGdsLklOQ1IpO1xuXG4gICAgICAgIG1hc2tPYmplY3QucmVuZGVyYWJsZSA9IHRydWU7XG4gICAgICAgIG1hc2tPYmplY3QucmVuZGVyKHRoaXMucmVuZGVyZXIpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmJhdGNoLmZsdXNoKCk7XG4gICAgICAgIG1hc2tPYmplY3QucmVuZGVyYWJsZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX3VzZUN1cnJlbnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQb3BzIHN0ZW5jaWwgbWFzay4gTWFza0RhdGEgaXMgYWxyZWFkeSByZW1vdmVkIGZyb20gc3RhY2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBtYXNrT2JqZWN0IC0gb2JqZWN0IG9mIHBvcHBlZCBtYXNrIGRhdGFcbiAgICAgKi9cbiAgICBwb3AobWFza09iamVjdDogSU1hc2tUYXJnZXQpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMucmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgaWYgKHRoaXMuZ2V0U3RhY2tMZW5ndGgoKSA9PT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gdGhlIHN0YWNrIGlzIGVtcHR5IVxuICAgICAgICAgICAgZ2wuZGlzYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xuICAgICAgICAgICAgZ2wuY2xlYXIoZ2wuU1RFTkNJTF9CVUZGRVJfQklUKTtcbiAgICAgICAgICAgIGdsLmNsZWFyU3RlbmNpbCgwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIERlY3JlbWVudCB0aGUgcmVmZXJlbmNlIHN0ZW5jaWwgdmFsdWUgd2hlcmUgdGhlIHBvcHBlZCBtYXNrIG92ZXJsYXBzIHdpdGggdGhlIG90aGVyIG9uZXNcbiAgICAgICAgICAgIGdsLmNvbG9yTWFzayhmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICBnbC5zdGVuY2lsT3AoZ2wuS0VFUCwgZ2wuS0VFUCwgZ2wuREVDUik7XG5cbiAgICAgICAgICAgIG1hc2tPYmplY3QucmVuZGVyYWJsZSA9IHRydWU7XG4gICAgICAgICAgICBtYXNrT2JqZWN0LnJlbmRlcih0aGlzLnJlbmRlcmVyKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYmF0Y2guZmx1c2goKTtcbiAgICAgICAgICAgIG1hc2tPYmplY3QucmVuZGVyYWJsZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLl91c2VDdXJyZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCByZW5kZXJlciB0byB1c2UgdGhlIGN1cnJlbnQgc3RlbmNpbCBkYXRhLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3VzZUN1cnJlbnQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdsO1xuXG4gICAgICAgIGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgZ2wuc3RlbmNpbEZ1bmMoZ2wuRVFVQUwsIHRoaXMuZ2V0U3RhY2tMZW5ndGgoKSwgdGhpcy5fZ2V0Qml0d2lzZU1hc2soKSk7XG4gICAgICAgIGdsLnN0ZW5jaWxPcChnbC5LRUVQLCBnbC5LRUVQLCBnbC5LRUVQKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWxsIDFzIGVxdWFsIHRvIHRoZSBudW1iZXIgb2YgYWNpdHZlIHN0ZW5jaWwgbWFza3MuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBiaXR3aXNlIG1hc2suXG4gICAgICovXG4gICAgX2dldEJpdHdpc2VNYXNrKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuICgxIDw8IHRoaXMuZ2V0U3RhY2tMZW5ndGgoKSkgLSAxO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tICcuLi9TeXN0ZW0nO1xuaW1wb3J0IHsgTWF0cml4IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbmltcG9ydCB0eXBlIHsgUmVjdGFuZ2xlIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgdHlwZSB7IFJlbmRlcmVyIH0gZnJvbSAnLi4vUmVuZGVyZXInO1xuXG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSB0aGUgcHJvamVjdGlvbiBtYXRyaXguXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLlN5c3RlbVxuICogQG1lbWJlcm9mIFBJWEkuc3lzdGVtc1xuICovXG5cbmV4cG9ydCBjbGFzcyBQcm9qZWN0aW9uU3lzdGVtIGV4dGVuZHMgU3lzdGVtXG57XG4gICAgcHVibGljIGRlc3RpbmF0aW9uRnJhbWU6IFJlY3RhbmdsZTtcbiAgICBwdWJsaWMgc291cmNlRnJhbWU6IFJlY3RhbmdsZTtcbiAgICBwdWJsaWMgZGVmYXVsdEZyYW1lOiBSZWN0YW5nbGU7XG4gICAgcHVibGljIHByb2plY3Rpb25NYXRyaXg6IE1hdHJpeDtcbiAgICBwdWJsaWMgdHJhbnNmb3JtOiBNYXRyaXg7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgU3lzdGVtIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogUmVuZGVyZXIpXG4gICAge1xuICAgICAgICBzdXBlcihyZW5kZXJlcik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlc3RpbmF0aW9uIGZyYW1lXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuUmVjdGFuZ2xlfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25GcmFtZSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNvdXJjZSBmcmFtZVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlJlY3RhbmdsZX1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNvdXJjZUZyYW1lID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVmYXVsdCBkZXN0aW5hdGlvbiBmcmFtZVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlJlY3RhbmdsZX1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlZmF1bHRGcmFtZSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb2plY3QgbWF0cml4XG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuTWF0cml4fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJvamVjdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXgoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSB0cmFuc2Zvcm0gdGhhdCB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSBwcm9qZWN0aW9uIG1hdHJpeFxuICAgICAgICAgKiBpZiBudWxsLCBub3RoaW5nIHdpbGwgYmUgYXBwbGllZFxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLk1hdHJpeH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBwcm9qZWN0aW9uIG1hdHJpeCBiYXNlZCBvbiBhIHByb2plY3Rpb24gZnJhbWUgKHdoaWNoIGlzIGEgcmVjdGFuZ2xlKS5cbiAgICAgKlxuICAgICAqIE1ha2Ugc3VyZSB0byBydW4gYHJlbmRlcmVyLmZyYW1lYnVmZmVyLnNldFZpZXdwb3J0KGRlc3RpbmF0aW9uRnJhbWUpYCBhZnRlciBjYWxsaW5nIHRoaXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSBkZXN0aW5hdGlvbkZyYW1lIC0gVGhlIGRlc3RpbmF0aW9uIGZyYW1lLlxuICAgICAqIEBwYXJhbSB7UElYSS5SZWN0YW5nbGV9IHNvdXJjZUZyYW1lIC0gVGhlIHNvdXJjZSBmcmFtZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcmVzb2x1dGlvbiAtIFJlc29sdXRpb25cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJvb3QgLSBJZiBpcyByb290XG4gICAgICovXG4gICAgdXBkYXRlKGRlc3RpbmF0aW9uRnJhbWU6IFJlY3RhbmdsZSwgc291cmNlRnJhbWU6IFJlY3RhbmdsZSwgcmVzb2x1dGlvbjogbnVtYmVyLCByb290OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbkZyYW1lID0gZGVzdGluYXRpb25GcmFtZSB8fCB0aGlzLmRlc3RpbmF0aW9uRnJhbWUgfHwgdGhpcy5kZWZhdWx0RnJhbWU7XG4gICAgICAgIHRoaXMuc291cmNlRnJhbWUgPSBzb3VyY2VGcmFtZSB8fCB0aGlzLnNvdXJjZUZyYW1lIHx8IGRlc3RpbmF0aW9uRnJhbWU7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIG9iamVjdC1zcGFjZSB0byBjbGlwLXNwYWNlIHByb2plY3Rpb25cbiAgICAgICAgdGhpcy5jYWxjdWxhdGVQcm9qZWN0aW9uKHRoaXMuZGVzdGluYXRpb25GcmFtZSwgdGhpcy5zb3VyY2VGcmFtZSwgcmVzb2x1dGlvbiwgcm9vdCk7XG5cbiAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnByb2plY3Rpb25NYXRyaXguYXBwZW5kKHRoaXMudHJhbnNmb3JtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gIHRoaXMucmVuZGVyZXI7XG5cbiAgICAgICAgcmVuZGVyZXIuZ2xvYmFsVW5pZm9ybXMudW5pZm9ybXMucHJvamVjdGlvbk1hdHJpeCA9IHRoaXMucHJvamVjdGlvbk1hdHJpeDtcbiAgICAgICAgcmVuZGVyZXIuZ2xvYmFsVW5pZm9ybXMudXBkYXRlKCk7XG5cbiAgICAgICAgLy8gdGhpcyB3aWxsIHdvcmsgZm9yIG5vd1xuICAgICAgICAvLyBidXQgd291bGQgYmUgc3dlZXQgdG8gc3RpY2sgYW5kIGV2ZW4gb24gdGhlIGdsb2JhbCB1bmlmb3Jtcy4uXG4gICAgICAgIGlmIChyZW5kZXJlci5zaGFkZXIuc2hhZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICByZW5kZXJlci5zaGFkZXIuc3luY1VuaWZvcm1Hcm91cChyZW5kZXJlci5zaGFkZXIuc2hhZGVyLnVuaWZvcm1zLmdsb2JhbHMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgcHJvamVjdGlvbiBtYXRyaXggYmFzZWQgb24gYSBwcm9qZWN0aW9uIGZyYW1lICh3aGljaCBpcyBhIHJlY3RhbmdsZSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZWN0YW5nbGV9IGRlc3RpbmF0aW9uRnJhbWUgLSBUaGUgZGVzdGluYXRpb24gZnJhbWUuXG4gICAgICogQHBhcmFtIHtQSVhJLlJlY3RhbmdsZX0gc291cmNlRnJhbWUgLSBUaGUgc291cmNlIGZyYW1lLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByZXNvbHV0aW9uIC0gUmVzb2x1dGlvblxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcm9vdCAtIElmIGlzIHJvb3RcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVQcm9qZWN0aW9uKF9kZXN0aW5hdGlvbkZyYW1lOiBSZWN0YW5nbGUsIHNvdXJjZUZyYW1lOiBSZWN0YW5nbGUsIF9yZXNvbHV0aW9uOiBudW1iZXIsIHJvb3Q6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBwbSA9IHRoaXMucHJvamVjdGlvbk1hdHJpeDtcbiAgICAgICAgY29uc3Qgc2lnbiA9ICFyb290ID8gMSA6IC0xO1xuXG4gICAgICAgIHBtLmlkZW50aXR5KCk7XG5cbiAgICAgICAgcG0uYSA9ICgxIC8gc291cmNlRnJhbWUud2lkdGggKiAyKTtcbiAgICAgICAgcG0uZCA9IHNpZ24gKiAoMSAvIHNvdXJjZUZyYW1lLmhlaWdodCAqIDIpO1xuXG4gICAgICAgIHBtLnR4ID0gLTEgLSAoc291cmNlRnJhbWUueCAqIHBtLmEpO1xuICAgICAgICBwbS50eSA9IC1zaWduIC0gKHNvdXJjZUZyYW1lLnkgKiBwbS5kKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIGFjdGl2ZSByZW5kZXIgdGFyZ2V0IHRvIHRoZSBnaXZlbiBtYXRyaXhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5NYXRyaXh9IG1hdHJpeCAtIFRoZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXhcbiAgICAgKi9cbiAgICBzZXRUcmFuc2Zvcm0oX21hdHJpeDogTWF0cml4KTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gdGhpcy5fYWN0aXZlUmVuZGVyVGFyZ2V0LnRyYW5zZm9ybSA9IG1hdHJpeDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSAnLi4vU3lzdGVtJztcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHsgQlVGRkVSX0JJVFMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuXG5pbXBvcnQgdHlwZSB7IFJlbmRlcmVyIH0gZnJvbSAnLi4vUmVuZGVyZXInO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJUZXh0dXJlIH0gZnJvbSAnLi9SZW5kZXJUZXh0dXJlJztcbmltcG9ydCB0eXBlIHsgQmFzZVJlbmRlclRleHR1cmUgfSBmcm9tICcuL0Jhc2VSZW5kZXJUZXh0dXJlJztcbmltcG9ydCB0eXBlIHsgTWFza0RhdGEgfSBmcm9tICcuLi9tYXNrL01hc2tEYXRhJztcblxuLy8gVGVtcG9yYXJ5IHJlY3RhbmdsZSBmb3IgYXNzaWduZWQgc291cmNlRnJhbWUgb3IgZGVzdGluYXRpb25GcmFtZVxuY29uc3QgdGVtcFJlY3QgPSBuZXcgUmVjdGFuZ2xlKCk7XG5cbi8vIFRlbXBvcmFyeSByZWN0YW5nbGUgZm9yIHJlbmRlclRleHR1cmUgZGVzdGluYXRpb25GcmFtZVxuY29uc3QgdGVtcFJlY3QyID0gbmV3IFJlY3RhbmdsZSgpO1xuXG4vLyBUZW1wb3JhcnkgcmVjdGFuZ2xlIGZvciBwYXNzaW5nIHRoZSBmcmFtZWJ1ZmZlciB2aWV3cG9ydFxuY29uc3Qgdmlld3BvcnRGcmFtZSA9IG5ldyBSZWN0YW5nbGUoKTtcblxuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgcmVuZGVyIHRleHR1cmVzLlxuICpcbiAqIFNob3VsZCBiZSBhZGRlZCBhZnRlciBGcmFtZWJ1ZmZlclN5c3RlbVxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5TeXN0ZW1cbiAqIEBtZW1iZXJvZiBQSVhJLnN5c3RlbXNcbiAqL1xuZXhwb3J0IGNsYXNzIFJlbmRlclRleHR1cmVTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW1cbntcbiAgICBwdWJsaWMgY2xlYXJDb2xvcjogbnVtYmVyW107XG4gICAgcHVibGljIGRlZmF1bHRNYXNrU3RhY2s6IEFycmF5PE1hc2tEYXRhPjtcbiAgICBwdWJsaWMgY3VycmVudDogUmVuZGVyVGV4dHVyZTtcbiAgICBwdWJsaWMgcmVhZG9ubHkgc291cmNlRnJhbWU6IFJlY3RhbmdsZTtcbiAgICBwdWJsaWMgcmVhZG9ubHkgZGVzdGluYXRpb25GcmFtZTogUmVjdGFuZ2xlO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgIHtcbiAgICAgICAgc3VwZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY2xlYXIgYmFja2dyb3VuZCBjb2xvciBhcyByZ2JhXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcltdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGVhckNvbG9yID0gcmVuZGVyZXIuX2JhY2tncm91bmRDb2xvclJnYmE7XG5cbiAgICAgICAgLy8gVE9ETyBtb3ZlIHRoaXMgcHJvcGVydHkgc29tZXdoZXJlIGVsc2UhXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMaXN0IG9mIG1hc2tzIGZvciB0aGUgU3RlbmNpbFN5c3RlbVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkdyYXBoaWNzW119XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0TWFza1N0YWNrID0gW107XG5cbiAgICAgICAgLy8gZW1wdHkgcmVuZGVyIHRleHR1cmU/XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXIgdGV4dHVyZVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlJlbmRlclRleHR1cmV9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU291cmNlIGZyYW1lXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuUmVjdGFuZ2xlfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc291cmNlRnJhbWUgPSBuZXcgUmVjdGFuZ2xlKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlc3RpbmF0aW9uIGZyYW1lXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuUmVjdGFuZ2xlfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25GcmFtZSA9IG5ldyBSZWN0YW5nbGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCaW5kIHRoZSBjdXJyZW50IHJlbmRlciB0ZXh0dXJlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gW3JlbmRlclRleHR1cmVdIC0gUmVuZGVyVGV4dHVyZSB0byBiaW5kLCBieSBkZWZhdWx0IGl0cyBgbnVsbGAsIHRoZSBzY3JlZW5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSBbc291cmNlRnJhbWVdIC0gcGFydCBvZiBzY3JlZW4gdGhhdCBpcyBtYXBwZWQgdG8gdGhlIHJlbmRlclRleHR1cmVcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSBbZGVzdGluYXRpb25GcmFtZV0gLSBwYXJ0IG9mIHJlbmRlclRleHR1cmUsIGJ5IGRlZmF1bHQgaXQgaGFzIHRoZSBzYW1lIHNpemUgYXMgc291cmNlRnJhbWVcbiAgICAgKi9cbiAgICBiaW5kKHJlbmRlclRleHR1cmU6IFJlbmRlclRleHR1cmUgPSBudWxsLCBzb3VyY2VGcmFtZT86IFJlY3RhbmdsZSwgZGVzdGluYXRpb25GcmFtZT86IFJlY3RhbmdsZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcblxuICAgICAgICB0aGlzLmN1cnJlbnQgPSByZW5kZXJUZXh0dXJlO1xuXG4gICAgICAgIGxldCBiYXNlVGV4dHVyZTogQmFzZVJlbmRlclRleHR1cmU7XG4gICAgICAgIGxldCBmcmFtZWJ1ZmZlcjtcbiAgICAgICAgbGV0IHJlc29sdXRpb247XG5cbiAgICAgICAgaWYgKHJlbmRlclRleHR1cmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJhc2VUZXh0dXJlID0gcmVuZGVyVGV4dHVyZS5iYXNlVGV4dHVyZSBhcyBCYXNlUmVuZGVyVGV4dHVyZTtcblxuICAgICAgICAgICAgcmVzb2x1dGlvbiA9IGJhc2VUZXh0dXJlLnJlc29sdXRpb247XG5cbiAgICAgICAgICAgIGlmICghc291cmNlRnJhbWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVtcFJlY3Qud2lkdGggPSByZW5kZXJUZXh0dXJlLmZyYW1lLndpZHRoO1xuICAgICAgICAgICAgICAgIHRlbXBSZWN0LmhlaWdodCA9IHJlbmRlclRleHR1cmUuZnJhbWUuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgc291cmNlRnJhbWUgPSB0ZW1wUmVjdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFkZXN0aW5hdGlvbkZyYW1lKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlbXBSZWN0Mi54ID0gcmVuZGVyVGV4dHVyZS5mcmFtZS54O1xuICAgICAgICAgICAgICAgIHRlbXBSZWN0Mi55ID0gcmVuZGVyVGV4dHVyZS5mcmFtZS55O1xuICAgICAgICAgICAgICAgIHRlbXBSZWN0Mi53aWR0aCA9IHNvdXJjZUZyYW1lLndpZHRoO1xuICAgICAgICAgICAgICAgIHRlbXBSZWN0Mi5oZWlnaHQgPSBzb3VyY2VGcmFtZS5oZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbkZyYW1lID0gdGVtcFJlY3QyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmcmFtZWJ1ZmZlciA9IGJhc2VUZXh0dXJlLmZyYW1lYnVmZmVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgcmVzb2x1dGlvbiA9IHJlbmRlcmVyLnJlc29sdXRpb247XG5cbiAgICAgICAgICAgIGlmICghc291cmNlRnJhbWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVtcFJlY3Qud2lkdGggPSByZW5kZXJlci5zY3JlZW4ud2lkdGg7XG4gICAgICAgICAgICAgICAgdGVtcFJlY3QuaGVpZ2h0ID0gcmVuZGVyZXIuc2NyZWVuLmhlaWdodDtcblxuICAgICAgICAgICAgICAgIHNvdXJjZUZyYW1lID0gdGVtcFJlY3Q7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZGVzdGluYXRpb25GcmFtZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbkZyYW1lID0gdGVtcFJlY3Q7XG5cbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbkZyYW1lLndpZHRoID0gc291cmNlRnJhbWUud2lkdGg7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25GcmFtZS5oZWlnaHQgPSBzb3VyY2VGcmFtZS5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2aWV3cG9ydEZyYW1lLnggPSBkZXN0aW5hdGlvbkZyYW1lLnggKiByZXNvbHV0aW9uO1xuICAgICAgICB2aWV3cG9ydEZyYW1lLnkgPSBkZXN0aW5hdGlvbkZyYW1lLnkgKiByZXNvbHV0aW9uO1xuICAgICAgICB2aWV3cG9ydEZyYW1lLndpZHRoID0gZGVzdGluYXRpb25GcmFtZS53aWR0aCAqIHJlc29sdXRpb247XG4gICAgICAgIHZpZXdwb3J0RnJhbWUuaGVpZ2h0ID0gZGVzdGluYXRpb25GcmFtZS5oZWlnaHQgKiByZXNvbHV0aW9uO1xuXG4gICAgICAgIHRoaXMucmVuZGVyZXIuZnJhbWVidWZmZXIuYmluZChmcmFtZWJ1ZmZlciwgdmlld3BvcnRGcmFtZSk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucHJvamVjdGlvbi51cGRhdGUoZGVzdGluYXRpb25GcmFtZSwgc291cmNlRnJhbWUsIHJlc29sdXRpb24sICFmcmFtZWJ1ZmZlcik7XG5cbiAgICAgICAgaWYgKHJlbmRlclRleHR1cmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIubWFzay5zZXRNYXNrU3RhY2soYmFzZVRleHR1cmUubWFza1N0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIubWFzay5zZXRNYXNrU3RhY2sodGhpcy5kZWZhdWx0TWFza1N0YWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc291cmNlRnJhbWUuY29weUZyb20oc291cmNlRnJhbWUpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uRnJhbWUuY29weUZyb20oZGVzdGluYXRpb25GcmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXJhc2VzIHRoZSByZW5kZXIgdGV4dHVyZSBhbmQgZmlsbHMgdGhlIGRyYXdpbmcgYXJlYSB3aXRoIGEgY29sb3VyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBbY2xlYXJDb2xvcl0gLSBUaGUgY29sb3IgYXMgcmdiYSwgZGVmYXVsdCB0byB1c2UgdGhlIHJlbmRlcmVyIGJhY2tncm91bmRDb2xvclxuICAgICAqIEBwYXJhbSB7UElYSS5CVUZGRVJfQklUU30gW21hc2s9QlVGRkVSX0JJVFMuQ09MT1IgfCBCVUZGRVJfQklUUy5ERVBUSF0gLSBCaXR3aXNlIE9SIG9mIG1hc2tzXG4gICAgICogIHRoYXQgaW5kaWNhdGUgdGhlIGJ1ZmZlcnMgdG8gYmUgY2xlYXJlZCwgYnkgZGVmYXVsdCBDT0xPUiBhbmQgREVQVEggYnVmZmVycy5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlJlbmRlcmVyfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBjbGVhcihjbGVhckNvbG9yPzogbnVtYmVyW10sIG1hc2s/OiBCVUZGRVJfQklUUyk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNsZWFyQ29sb3IgPSBjbGVhckNvbG9yIHx8ICh0aGlzLmN1cnJlbnQuYmFzZVRleHR1cmUgYXMgQmFzZVJlbmRlclRleHR1cmUpLmNsZWFyQ29sb3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBjbGVhckNvbG9yID0gY2xlYXJDb2xvciB8fCB0aGlzLmNsZWFyQ29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlcmVyLmZyYW1lYnVmZmVyLmNsZWFyKGNsZWFyQ29sb3JbMF0sIGNsZWFyQ29sb3JbMV0sIGNsZWFyQ29sb3JbMl0sIGNsZWFyQ29sb3JbM10sIG1hc2spO1xuICAgIH1cblxuICAgIHJlc2l6ZSgpOiB2b2lkIC8vIHNjcmVlbldpZHRoLCBzY3JlZW5IZWlnaHQpXG4gICAge1xuICAgICAgICAvLyByZXNpemUgdGhlIHJvb3Qgb25seSFcbiAgICAgICAgdGhpcy5iaW5kKG51bGwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0cyByZW5kZXJUZXh0dXJlIHN0YXRlXG4gICAgICovXG4gICAgcmVzZXQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5iaW5kKG51bGwpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgdHlwZSB7IERpY3QgfSBmcm9tICdAcGl4aS91dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBJR0xVbmlmb3JtRGF0YVxue1xuICAgIGxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjtcbiAgICB2YWx1ZTogbnVtYmVyIHwgYm9vbGVhbiB8IEZsb2F0MzJBcnJheSB8IEludDMyQXJyYXkgfCBib29sZWFuW107XG59XG5cbi8qKlxuICogSGVscGVyIGNsYXNzIHRvIGNyZWF0ZSBhIFdlYkdMIFByb2dyYW1cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBHTFByb2dyYW1cbntcbiAgICBwdWJsaWMgcHJvZ3JhbTogV2ViR0xQcm9ncmFtO1xuICAgIHB1YmxpYyB1bmlmb3JtRGF0YTogRGljdDxhbnk+O1xuICAgIHB1YmxpYyB1bmlmb3JtR3JvdXBzOiBEaWN0PGFueT47XG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBuZXcgUGl4aSBwcm9ncmFtXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvZ3JhbSB7V2ViR0xQcm9ncmFtfSB3ZWJnbCBwcm9ncmFtXG4gICAgICogQHBhcmFtIHVuaWZvcm1EYXRhIHtPYmplY3R9IHVuaWZvcm1zXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvZ3JhbTogV2ViR0xQcm9ncmFtLCB1bmlmb3JtRGF0YToge1trZXk6IHN0cmluZ106IElHTFVuaWZvcm1EYXRhfSlcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2hhZGVyIHByb2dyYW1cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7V2ViR0xQcm9ncmFtfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogaG9sZHMgdGhlIHVuaWZvcm0gZGF0YSB3aGljaCBjb250YWlucyB1bmlmb3JtIGxvY2F0aW9uc1xuICAgICAgICAgKiBhbmQgY3VycmVudCB1bmlmb3JtIHZhbHVlcyB1c2VkIGZvciBjYWNoaW5nIGFuZCBwcmV2ZW50aW5nIHVubmVlZGVkIEdQVSBjb21tYW5kc1xuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVuaWZvcm1EYXRhID0gdW5pZm9ybURhdGE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHVuaWZvcm1Hcm91cHMgaG9sZHMgdGhlIHZhcmlvdXMgdXBsb2FkIGZ1bmN0aW9ucyBmb3IgdGhlIHNoYWRlci4gRWFjaCB1bmlmb3JtIGdyb3VwXG4gICAgICAgICAqIGFuZCBwcm9ncmFtIGhhdmUgYSB1bmlxdWUgdXBsb2FkIGZ1bmN0aW9uIGdlbmVyYXRlZC5cbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51bmlmb3JtR3JvdXBzID0ge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhpcyBwcm9ncmFtXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnVuaWZvcm1EYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy51bmlmb3JtR3JvdXBzID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gbnVsbDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSAnLi4vU3lzdGVtJztcbmltcG9ydCB7IEdMUHJvZ3JhbSB9IGZyb20gJy4vR0xQcm9ncmFtJztcbmltcG9ydCB7IGdlbmVyYXRlVW5pZm9ybXNTeW5jLCB1bnNhZmVFdmFsU3VwcG9ydGVkLCBkZWZhdWx0VmFsdWUsIGNvbXBpbGVQcm9ncmFtIH0gZnJvbSAnLi91dGlscyc7XG5cbmltcG9ydCB0eXBlIHsgSUdMVW5pZm9ybURhdGEgfSBmcm9tICcuL0dMUHJvZ3JhbSc7XG5pbXBvcnQgdHlwZSB7IFJlbmRlcmVyIH0gZnJvbSAnLi4vUmVuZGVyZXInO1xuaW1wb3J0IHR5cGUgeyBJUmVuZGVyaW5nQ29udGV4dCB9IGZyb20gJy4uL0lSZW5kZXJpbmdDb250ZXh0JztcbmltcG9ydCB0eXBlIHsgU2hhZGVyIH0gZnJvbSAnLi9TaGFkZXInO1xuaW1wb3J0IHR5cGUgeyBQcm9ncmFtIH0gZnJvbSAnLi9Qcm9ncmFtJztcbmltcG9ydCB0eXBlIHsgVW5pZm9ybUdyb3VwIH0gZnJvbSAnLi9Vbmlmb3JtR3JvdXAnO1xuaW1wb3J0IHR5cGUgeyBEaWN0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBVbmlmb3Jtc1N5bmNDYWxsYmFjayB9IGZyb20gJy4vdXRpbHMnO1xuXG5sZXQgVUlEID0gMDtcbi8vIGRlZnVhbHQgc3luYyBkYXRhIHNvIHdlIGRvbid0IGNyZWF0ZSBhIG5ldyBvbmUgZWFjaCB0aW1lIVxuY29uc3QgZGVmYXVsdFN5bmNEYXRhID0geyB0ZXh0dXJlQ291bnQ6IDAgfTtcblxuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2Ugc2hhZGVycy5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJLnN5c3RlbXNcbiAqIEBleHRlbmRzIFBJWEkuU3lzdGVtXG4gKi9cbmV4cG9ydCBjbGFzcyBTaGFkZXJTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW1cbntcbiAgICBwcm90ZWN0ZWQgZ2w6IElSZW5kZXJpbmdDb250ZXh0O1xuICAgIHB1YmxpYyBzaGFkZXI6IFNoYWRlcjtcbiAgICBwdWJsaWMgcHJvZ3JhbTogUHJvZ3JhbTtcbiAgICBwdWJsaWMgaWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgZGVzdHJveWVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBjYWNoZTogRGljdDxVbmlmb3Jtc1N5bmNDYWxsYmFjaz47XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgIHtcbiAgICAgICAgc3VwZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIC8vIFZhbGlkYXRpb24gY2hlY2sgdGhhdCB0aGlzIGVudmlyb25tZW50IHN1cHBvcnQgYG5ldyBGdW5jdGlvbmBcbiAgICAgICAgdGhpcy5zeXN0ZW1DaGVjaygpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCBXZWJHTCByZW5kZXJpbmcgY29udGV4dFxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdsID0gbnVsbDtcblxuICAgICAgICB0aGlzLnNoYWRlciA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlIHRvIGhvbGRzIHRoZSBnZW5lcmF0ZWQgZnVuY3Rpb25zLiBTdG9yZWQgYWdhaW5zdCBVbmlmb3JtT2JqZWN0cyB1bmlxdWUgc2lnbmF0dXJlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhY2hlID0ge307XG5cbiAgICAgICAgdGhpcy5pZCA9IFVJRCsrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlYWJsZSBmdW5jdGlvbiBieSBgQHBpeGkvdW5zYWZlLWV2YWxgIHRvIHNpbGVuY2VcbiAgICAgKiB0aHJvd2luZyBhbiBlcnJvciBpZiBwbGF0Zm9ybSBkb2Vzbid0IHN1cHBvcnQgdW5zYWZlLWV2YWxzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBzeXN0ZW1DaGVjaygpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXVuc2FmZUV2YWxTdXBwb3J0ZWQoKSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDdXJyZW50IGVudmlyb25tZW50IGRvZXMgbm90IGFsbG93IHVuc2FmZS1ldmFsLCAnXG4gICAgICAgICAgICAgICAgKyAncGxlYXNlIHVzZSBAcGl4aS91bnNhZmUtZXZhbCBtb2R1bGUgdG8gZW5hYmxlIHN1cHBvcnQuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY29udGV4dENoYW5nZShnbDogSVJlbmRlcmluZ0NvbnRleHQpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmdsID0gZ2w7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBjdXJyZW50IHNoYWRlciB0byB0aGUgb25lIGdpdmVuIGluIHBhcmFtZXRlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlNoYWRlcn0gc2hhZGVyIC0gdGhlIG5ldyBzaGFkZXJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtkb250U3luY10gLSBmYWxzZSBpZiB0aGUgc2hhZGVyIHNob3VsZCBhdXRvbWF0aWNhbGx5IHN5bmMgaXRzIHVuaWZvcm1zLlxuICAgICAqIEByZXR1cm5zIHtQSVhJLkdMUHJvZ3JhbX0gdGhlIGdsUHJvZ3JhbSB0aGF0IGJlbG9uZ3MgdG8gdGhlIHNoYWRlci5cbiAgICAgKi9cbiAgICBiaW5kKHNoYWRlcjogU2hhZGVyLCBkb250U3luYz86IGJvb2xlYW4pOiBHTFByb2dyYW1cbiAgICB7XG4gICAgICAgIHNoYWRlci51bmlmb3Jtcy5nbG9iYWxzID0gdGhpcy5yZW5kZXJlci5nbG9iYWxVbmlmb3JtcztcblxuICAgICAgICBjb25zdCBwcm9ncmFtID0gc2hhZGVyLnByb2dyYW07XG4gICAgICAgIGNvbnN0IGdsUHJvZ3JhbSA9IHByb2dyYW0uZ2xQcm9ncmFtc1t0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEXSB8fCB0aGlzLmdlbmVyYXRlU2hhZGVyKHNoYWRlcik7XG5cbiAgICAgICAgdGhpcy5zaGFkZXIgPSBzaGFkZXI7XG5cbiAgICAgICAgLy8gVE9ETyAtIHNvbWUgY3VycmVudCBQaXhpIHBsdWdpbnMgYnlwYXNzIHRoaXMuLiBzbyBpdCBub3Qgc2FmZSB0byB1c2UgeWV0Li5cbiAgICAgICAgaWYgKHRoaXMucHJvZ3JhbSAhPT0gcHJvZ3JhbSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICAgICAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbShnbFByb2dyYW0ucHJvZ3JhbSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRvbnRTeW5jKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZWZhdWx0U3luY0RhdGEudGV4dHVyZUNvdW50ID0gMDtcblxuICAgICAgICAgICAgdGhpcy5zeW5jVW5pZm9ybUdyb3VwKHNoYWRlci51bmlmb3JtR3JvdXAsIGRlZmF1bHRTeW5jRGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2xQcm9ncmFtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHVuaWZvcm1zIHZhbHVlcyB0byB0aGUgY3VycmVudGx5IGJvdW5kIHNoYWRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB1bmlmb3JtcyAtIHRoZSB1bmlmb3JtcyB2YWx1ZXMgdGhhdCBiZSBhcHBsaWVkIHRvIHRoZSBjdXJyZW50IHNoYWRlclxuICAgICAqL1xuICAgIHNldFVuaWZvcm1zKHVuaWZvcm1zOiBEaWN0PGFueT4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBzaGFkZXIgPSB0aGlzLnNoYWRlci5wcm9ncmFtO1xuICAgICAgICBjb25zdCBnbFByb2dyYW0gPSBzaGFkZXIuZ2xQcm9ncmFtc1t0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEXTtcblxuICAgICAgICBzaGFkZXIuc3luY1VuaWZvcm1zKGdsUHJvZ3JhbS51bmlmb3JtRGF0YSwgdW5pZm9ybXMsIHRoaXMucmVuZGVyZXIpO1xuICAgIH1cblxuICAgIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXMgKi9cbiAgICAvKipcbiAgICAgKlxuICAgICAqIHN5bmNzIHVuaWZvcm1zIG9uIHRoZSBncm91cFxuICAgICAqIEBwYXJhbSB7Kn0gZ3JvdXAgLSB0aGUgdW5pZm9ybSBncm91cCB0byBzeW5jXG4gICAgICogQHBhcmFtIHsqfSBbc3luY0RhdGFdIC0gdGhpcyBpcyBkYXRhIHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBzeW5jIGZ1bmN0aW9uIGFuZCBhbnkgbmVzdGVkIHN5bmMgZnVuY3Rpb25zXG4gICAgICovXG4gICAgc3luY1VuaWZvcm1Hcm91cChncm91cDogVW5pZm9ybUdyb3VwLCBzeW5jRGF0YT86IGFueSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGdsUHJvZ3JhbSA9IHRoaXMuZ2V0Z2xQcm9ncmFtKCk7XG5cbiAgICAgICAgaWYgKCFncm91cC5zdGF0aWMgfHwgZ3JvdXAuZGlydHlJZCAhPT0gZ2xQcm9ncmFtLnVuaWZvcm1Hcm91cHNbZ3JvdXAuaWRdKVxuICAgICAgICB7XG4gICAgICAgICAgICBnbFByb2dyYW0udW5pZm9ybUdyb3Vwc1tncm91cC5pZF0gPSBncm91cC5kaXJ0eUlkO1xuXG4gICAgICAgICAgICB0aGlzLnN5bmNVbmlmb3Jtcyhncm91cCwgZ2xQcm9ncmFtLCBzeW5jRGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZWFibGUgYnkgdGhlIEBwaXhpL3Vuc2FmZS1ldmFsIHBhY2thZ2UgdG8gdXNlIHN0YXRpY1xuICAgICAqIHN5bmNVbmZvcm1zIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN5bmNVbmlmb3Jtcyhncm91cDogVW5pZm9ybUdyb3VwLCBnbFByb2dyYW06IEdMUHJvZ3JhbSwgc3luY0RhdGE6IGFueSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHN5bmNGdW5jID0gZ3JvdXAuc3luY1VuaWZvcm1zW3RoaXMuc2hhZGVyLnByb2dyYW0uaWRdIHx8IHRoaXMuY3JlYXRlU3luY0dyb3Vwcyhncm91cCk7XG5cbiAgICAgICAgc3luY0Z1bmMoZ2xQcm9ncmFtLnVuaWZvcm1EYXRhLCBncm91cC51bmlmb3JtcywgdGhpcy5yZW5kZXJlciwgc3luY0RhdGEpO1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXMgKi9cblxuICAgIGNyZWF0ZVN5bmNHcm91cHMoZ3JvdXA6IFVuaWZvcm1Hcm91cCk6IFVuaWZvcm1zU3luY0NhbGxiYWNrXG4gICAge1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0U2lnbmF0dXJlKGdyb3VwLCB0aGlzLnNoYWRlci5wcm9ncmFtLnVuaWZvcm1EYXRhKTtcblxuICAgICAgICBpZiAoIXRoaXMuY2FjaGVbaWRdKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlW2lkXSA9IGdlbmVyYXRlVW5pZm9ybXNTeW5jKGdyb3VwLCB0aGlzLnNoYWRlci5wcm9ncmFtLnVuaWZvcm1EYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdyb3VwLnN5bmNVbmlmb3Jtc1t0aGlzLnNoYWRlci5wcm9ncmFtLmlkXSA9IHRoaXMuY2FjaGVbaWRdO1xuXG4gICAgICAgIHJldHVybiBncm91cC5zeW5jVW5pZm9ybXNbdGhpcy5zaGFkZXIucHJvZ3JhbS5pZF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSB1bmlmb3JtIGdyb3VwIGFuZCBkYXRhIGFuZCBnZW5lcmF0ZXMgYSB1bmlxdWUgc2lnbmF0dXJlIGZvciB0aGVtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlVuaWZvcm1Hcm91cH0gZ3JvdXAgLSB0aGUgdW5pZm9ybSBncm91cCB0byBnZXQgc2lnbmF0dXJlIG9mXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHVuaWZvcm1EYXRhIC0gdW5pZm9ybSBpbmZvcm1hdGlvbiBnZW5lcmF0ZWQgYnkgdGhlIHNoYWRlclxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IFVuaXF1ZSBzaWduYXR1cmUgb2YgdGhlIHVuaWZvcm0gZ3JvdXBcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0U2lnbmF0dXJlKGdyb3VwOiBVbmlmb3JtR3JvdXAsIHVuaWZvcm1EYXRhOiBEaWN0PGFueT4pOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0gZ3JvdXAudW5pZm9ybXM7XG5cbiAgICAgICAgY29uc3Qgc3RyaW5ncyA9IFtdO1xuXG4gICAgICAgIGZvciAoY29uc3QgaSBpbiB1bmlmb3JtcylcbiAgICAgICAge1xuICAgICAgICAgICAgc3RyaW5ncy5wdXNoKGkpO1xuXG4gICAgICAgICAgICBpZiAodW5pZm9ybURhdGFbaV0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3RyaW5ncy5wdXNoKHVuaWZvcm1EYXRhW2ldLnR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0cmluZ3Muam9pbignLScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgR0xTaGFkZSByb2YgdGhlIGN1cnJlbnRseSBib3VuZCBzaGFkZXIuXG4gICAgICogVGhpcyBjYW4gYmUgaGFuZHkgZm9yIHdoZW4geW91IHRvIGhhdmUgYSBsaXR0bGUgbW9yZSBjb250cm9sIG92ZXIgdGhlIHNldHRpbmcgb2YgeW91ciB1bmlmb3Jtcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1BJWEkuR0xQcm9ncmFtfSB0aGUgZ2xQcm9ncmFtIGZvciB0aGUgY3VycmVudGx5IGJvdW5kIFNoYWRlciBmb3IgdGhpcyBjb250ZXh0XG4gICAgICovXG4gICAgZ2V0Z2xQcm9ncmFtKCk6IEdMUHJvZ3JhbVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuc2hhZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGFkZXIucHJvZ3JhbS5nbFByb2dyYW1zW3RoaXMucmVuZGVyZXIuQ09OVEVYVF9VSURdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgZ2xQcm9ncmFtIHZlcnNpb24gb2YgdGhlIFNoYWRlciBwcm92aWRlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLlNoYWRlcn0gc2hhZGVyIC0gdGhlIHNoYWRlciB0aGF0IHRoZSBnbFByb2dyYW0gd2lsbCBiZSBiYXNlZCBvbi5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdMUHJvZ3JhbX0gQSBzaGlueSBuZXcgZ2xQcm9ncmFtIVxuICAgICAqL1xuICAgIGdlbmVyYXRlU2hhZGVyKHNoYWRlcjogU2hhZGVyKTogR0xQcm9ncmFtXG4gICAge1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XG5cbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHNoYWRlci5wcm9ncmFtO1xuXG4gICAgICAgIGNvbnN0IGF0dHJpYk1hcDogRGljdDxudW1iZXI+ID0ge307XG5cbiAgICAgICAgZm9yIChjb25zdCBpIGluIHByb2dyYW0uYXR0cmlidXRlRGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgYXR0cmliTWFwW2ldID0gcHJvZ3JhbS5hdHRyaWJ1dGVEYXRhW2ldLmxvY2F0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2hhZGVyUHJvZ3JhbSA9IGNvbXBpbGVQcm9ncmFtKGdsLCBwcm9ncmFtLnZlcnRleFNyYywgcHJvZ3JhbS5mcmFnbWVudFNyYywgYXR0cmliTWFwKTtcbiAgICAgICAgY29uc3QgdW5pZm9ybURhdGE6IHtba2V5OiBzdHJpbmddOiBJR0xVbmlmb3JtRGF0YX0gPSB7fTtcblxuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gcHJvZ3JhbS51bmlmb3JtRGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHByb2dyYW0udW5pZm9ybURhdGFbaV07XG5cbiAgICAgICAgICAgIHVuaWZvcm1EYXRhW2ldID0ge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgaSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IGRlZmF1bHRWYWx1ZShkYXRhLnR5cGUsIGRhdGEuc2l6ZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZ2xQcm9ncmFtID0gbmV3IEdMUHJvZ3JhbShzaGFkZXJQcm9ncmFtLCB1bmlmb3JtRGF0YSk7XG5cbiAgICAgICAgcHJvZ3JhbS5nbFByb2dyYW1zW3RoaXMucmVuZGVyZXIuQ09OVEVYVF9VSURdID0gZ2xQcm9ncmFtO1xuXG4gICAgICAgIHJldHVybiBnbFByb2dyYW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIFNoYWRlclN5c3RlbSBzdGF0ZSwgZG9lcyBub3QgYWZmZWN0IFdlYkdMIHN0YXRlXG4gICAgICovXG4gICAgcmVzZXQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgdGhpcy5zaGFkZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoaXMgU3lzdGVtIGFuZCByZW1vdmVzIGFsbCBpdHMgdGV4dHVyZXNcbiAgICAgKi9cbiAgICBkZXN0cm95KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIFRPRE8gaW1wbGVtZW50IGRlc3Ryb3kgbWV0aG9kIGZvciBTaGFkZXJTeXN0ZW1cbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBCTEVORF9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbi8qKlxuICogTWFwcyBnbCBibGVuZCBjb21iaW5hdGlvbnMgdG8gV2ViR0wuXG4gKlxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBmdW5jdGlvbiBtYXBXZWJHTEJsZW5kTW9kZXNUb1BpeGlcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgLSBUaGUgcmVuZGVyaW5nIGNvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcltdW119IFthcnJheT1bXV0gLSBUaGUgYXJyYXkgdG8gb3V0cHV0IGludG8uXG4gKiBAcmV0dXJuIHtudW1iZXJbXVtdfSBNYXBwZWQgbW9kZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXBXZWJHTEJsZW5kTW9kZXNUb1BpeGkoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dEJhc2UsIGFycmF5OiBudW1iZXJbXVtdID0gW10pOiBudW1iZXJbXVtdXG57XG4gICAgLy8gVE9ETyAtIHByZW11bHRpcGx5IGFscGhhIHdvdWxkIGJlIGRpZmZlcmVudC5cbiAgICAvLyBhZGQgYSBib29sZWFuIGZvciB0aGF0IVxuICAgIGFycmF5W0JMRU5EX01PREVTLk5PUk1BTF0gPSBbZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcbiAgICBhcnJheVtCTEVORF9NT0RFUy5BRERdID0gW2dsLk9ORSwgZ2wuT05FXTtcbiAgICBhcnJheVtCTEVORF9NT0RFUy5NVUxUSVBMWV0gPSBbZ2wuRFNUX0NPTE9SLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBLCBnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W0JMRU5EX01PREVTLlNDUkVFTl0gPSBbZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0NPTE9SLCBnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W0JMRU5EX01PREVTLk9WRVJMQVldID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuREFSS0VOXSA9IFtnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W0JMRU5EX01PREVTLkxJR0hURU5dID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuQ09MT1JfRE9ER0VdID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuQ09MT1JfQlVSTl0gPSBbZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcbiAgICBhcnJheVtCTEVORF9NT0RFUy5IQVJEX0xJR0hUXSA9IFtnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W0JMRU5EX01PREVTLlNPRlRfTElHSFRdID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuRElGRkVSRU5DRV0gPSBbZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcbiAgICBhcnJheVtCTEVORF9NT0RFUy5FWENMVVNJT05dID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuSFVFXSA9IFtnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W0JMRU5EX01PREVTLlNBVFVSQVRJT05dID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuQ09MT1JdID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuTFVNSU5PU0lUWV0gPSBbZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcbiAgICBhcnJheVtCTEVORF9NT0RFUy5OT05FXSA9IFswLCAwXTtcblxuICAgIC8vIG5vdC1wcmVtdWx0aXBsaWVkIGJsZW5kIG1vZGVzXG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuTk9STUFMX05QTV0gPSBbZ2wuU1JDX0FMUEhBLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBLCBnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W0JMRU5EX01PREVTLkFERF9OUE1dID0gW2dsLlNSQ19BTFBIQSwgZ2wuT05FLCBnbC5PTkUsIGdsLk9ORV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuU0NSRUVOX05QTV0gPSBbZ2wuU1JDX0FMUEhBLCBnbC5PTkVfTUlOVVNfU1JDX0NPTE9SLCBnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuXG4gICAgLy8gY29tcG9zaXRlIG9wZXJhdGlvbnNcbiAgICBhcnJheVtCTEVORF9NT0RFUy5TUkNfSU5dID0gW2dsLkRTVF9BTFBIQSwgZ2wuWkVST107XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuU1JDX09VVF0gPSBbZ2wuT05FX01JTlVTX0RTVF9BTFBIQSwgZ2wuWkVST107XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuU1JDX0FUT1BdID0gW2dsLkRTVF9BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuRFNUX09WRVJdID0gW2dsLk9ORV9NSU5VU19EU1RfQUxQSEEsIGdsLk9ORV07XG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuRFNUX0lOXSA9IFtnbC5aRVJPLCBnbC5TUkNfQUxQSEFdO1xuICAgIGFycmF5W0JMRU5EX01PREVTLkRTVF9PVVRdID0gW2dsLlpFUk8sIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W0JMRU5EX01PREVTLkRTVF9BVE9QXSA9IFtnbC5PTkVfTUlOVVNfRFNUX0FMUEhBLCBnbC5TUkNfQUxQSEFdO1xuICAgIGFycmF5W0JMRU5EX01PREVTLlhPUl0gPSBbZ2wuT05FX01JTlVTX0RTVF9BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG5cbiAgICAvLyBTVUJUUkFDVCBmcm9tIGZsYXNoXG4gICAgYXJyYXlbQkxFTkRfTU9ERVMuU1VCVFJBQ1RdID0gW2dsLk9ORSwgZ2wuT05FLCBnbC5PTkUsIGdsLk9ORSwgZ2wuRlVOQ19SRVZFUlNFX1NVQlRSQUNULCBnbC5GVU5DX0FERF07XG5cbiAgICByZXR1cm4gYXJyYXk7XG59XG4iLCAiaW1wb3J0IHsgbWFwV2ViR0xCbGVuZE1vZGVzVG9QaXhpIH0gZnJvbSAnLi91dGlscy9tYXBXZWJHTEJsZW5kTW9kZXNUb1BpeGknO1xuaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSAnLi4vU3lzdGVtJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9TdGF0ZSc7XG5pbXBvcnQgeyBCTEVORF9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbmltcG9ydCB0eXBlIHsgSVJlbmRlcmluZ0NvbnRleHQgfSBmcm9tICcuLi9JUmVuZGVyaW5nQ29udGV4dCc7XG5pbXBvcnQgdHlwZSB7IFJlbmRlcmVyIH0gZnJvbSAnLi4vUmVuZGVyZXInO1xuXG5jb25zdCBCTEVORCA9IDA7XG5jb25zdCBPRkZTRVQgPSAxO1xuY29uc3QgQ1VMTElORyA9IDI7XG5jb25zdCBERVBUSF9URVNUID0gMztcbmNvbnN0IFdJTkRJTkcgPSA0O1xuXG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSBXZWJHTCBzdGF0ZSBtYWNoaW5lcy5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuU3lzdGVtXG4gKiBAbWVtYmVyb2YgUElYSS5zeXN0ZW1zXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGF0ZVN5c3RlbSBleHRlbmRzIFN5c3RlbVxue1xuICAgIHB1YmxpYyBzdGF0ZUlkOiBudW1iZXI7XG4gICAgcHVibGljIHBvbHlnb25PZmZzZXQ6IG51bWJlcjtcbiAgICBwdWJsaWMgYmxlbmRNb2RlOiBCTEVORF9NT0RFUztcbiAgICBwcm90ZWN0ZWQgX2JsZW5kRXE6IGJvb2xlYW47XG4gICAgcHJvdGVjdGVkIGdsOiBJUmVuZGVyaW5nQ29udGV4dDtcbiAgICBwcm90ZWN0ZWQgYmxlbmRNb2RlczogbnVtYmVyW11bXTtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgbWFwOiBBcnJheTwodmFsdWU6IGJvb2xlYW4pID0+IHZvaWQ+O1xuICAgIHByb3RlY3RlZCByZWFkb25seSBjaGVja3M6IEFycmF5PChzeXN0ZW06IHRoaXMsIHN0YXRlOiBTdGF0ZSkgPT4gdm9pZD47XG4gICAgcHJvdGVjdGVkIGRlZmF1bHRTdGF0ZTogU3RhdGU7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgIHtcbiAgICAgICAgc3VwZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHTCBjb250ZXh0XG4gICAgICAgICAqIEBtZW1iZXIge1dlYkdMUmVuZGVyaW5nQ29udGV4dH1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdsID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RhdGUgSURcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdGVJZCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvbHlnb24gb2Zmc2V0XG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvbHlnb25PZmZzZXQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCbGVuZCBtb2RlXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgUElYSS5CTEVORF9NT0RFUy5OT05FXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ibGVuZE1vZGUgPSBCTEVORF9NT0RFUy5OT05FO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGN1cnJlbnQgYmxlbmQgZXF1YXRpb24gaXMgZGlmZmVyZW50XG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JsZW5kRXEgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29sbGVjdGlvbiBvZiBjYWxsc1xuICAgICAgICAgKiBAbWVtYmVyIHtmdW5jdGlvbltdfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWFwID0gW107XG5cbiAgICAgICAgLy8gbWFwIGZ1bmN0aW9ucyBmb3Igd2hlbiB3ZSBzZXQgc3RhdGUuLlxuICAgICAgICB0aGlzLm1hcFtCTEVORF0gPSB0aGlzLnNldEJsZW5kO1xuICAgICAgICB0aGlzLm1hcFtPRkZTRVRdID0gdGhpcy5zZXRPZmZzZXQ7XG4gICAgICAgIHRoaXMubWFwW0NVTExJTkddID0gdGhpcy5zZXRDdWxsRmFjZTtcbiAgICAgICAgdGhpcy5tYXBbREVQVEhfVEVTVF0gPSB0aGlzLnNldERlcHRoVGVzdDtcbiAgICAgICAgdGhpcy5tYXBbV0lORElOR10gPSB0aGlzLnNldEZyb250RmFjZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29sbGVjdGlvbiBvZiBjaGVjayBjYWxsc1xuICAgICAgICAgKiBAbWVtYmVyIHtmdW5jdGlvbltdfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hlY2tzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmF1bHQgV2ViR0wgU3RhdGVcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5TdGF0ZX1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlZmF1bHRTdGF0ZSA9IG5ldyBTdGF0ZSgpO1xuICAgICAgICB0aGlzLmRlZmF1bHRTdGF0ZS5ibGVuZCA9IHRydWU7XG4gICAgfVxuXG4gICAgY29udGV4dENoYW5nZShnbDogSVJlbmRlcmluZ0NvbnRleHQpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmdsID0gZ2w7XG5cbiAgICAgICAgdGhpcy5ibGVuZE1vZGVzID0gbWFwV2ViR0xCbGVuZE1vZGVzVG9QaXhpKGdsKTtcblxuICAgICAgICB0aGlzLnNldCh0aGlzLmRlZmF1bHRTdGF0ZSk7XG5cbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gc3RhdGUgLSBUaGUgc3RhdGUgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldChzdGF0ZTogU3RhdGUpOiB2b2lkXG4gICAge1xuICAgICAgICBzdGF0ZSA9IHN0YXRlIHx8IHRoaXMuZGVmYXVsdFN0YXRlO1xuXG4gICAgICAgIC8vIFRPRE8gbWF5YmUgdG8gYW4gb2JqZWN0IGNoZWNrPyAoIHRoaXMuc3RhdGUgPT09IHN0YXRlICk/XG4gICAgICAgIGlmICh0aGlzLnN0YXRlSWQgIT09IHN0YXRlLmRhdGEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBkaWZmID0gdGhpcy5zdGF0ZUlkIF4gc3RhdGUuZGF0YTtcbiAgICAgICAgICAgIGxldCBpID0gMDtcblxuICAgICAgICAgICAgLy8gb3JkZXIgZnJvbSBsZWFzdCB0byBtb3N0IGNvbW1vblxuICAgICAgICAgICAgd2hpbGUgKGRpZmYpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGRpZmYgJiAxKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RhdGUgY2hhbmdlIVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcFtpXS5jYWxsKHRoaXMsICEhKHN0YXRlLmRhdGEgJiAoMSA8PCBpKSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRpZmYgPSBkaWZmID4+IDE7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnN0YXRlSWQgPSBzdGF0ZS5kYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYmFzZWQgb24gdGhlIGFib3ZlIHNldHRpbmdzIHdlIGNoZWNrIGZvciBzcGVjaWZpYyBtb2Rlcy4uXG4gICAgICAgIC8vIGZvciBleGFtcGxlIGlmIGJsZW5kIGlzIGFjdGl2ZSB3ZSBjaGVjayBhbmQgc2V0IHRoZSBibGVuZCBtb2Rlc1xuICAgICAgICAvLyBvciBvZiBwb2x5Z29uIG9mZnNldCBpcyBhY3RpdmUgd2UgY2hlY2sgdGhlIHBvbHkgZGVwdGguXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGVja3MubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tzW2ldKHRoaXMsIHN0YXRlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHN0YXRlLCB3aGVuIHByZXZpb3VzIHN0YXRlIGlzIHVua25vd25cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gc3RhdGUgLSBUaGUgc3RhdGUgdG8gc2V0XG4gICAgICovXG4gICAgZm9yY2VTdGF0ZShzdGF0ZTogU3RhdGUpOiB2b2lkXG4gICAge1xuICAgICAgICBzdGF0ZSA9IHN0YXRlIHx8IHRoaXMuZGVmYXVsdFN0YXRlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWFwLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm1hcFtpXS5jYWxsKHRoaXMsICEhKHN0YXRlLmRhdGEgJiAoMSA8PCBpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGVja3MubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tzW2ldKHRoaXMsIHN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGVJZCA9IHN0YXRlLmRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlcyBvciBkaXNhYmxlZCBibGVuZGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUgLSBUdXJuIG9uIG9yIG9mZiB3ZWJnbCBibGVuZGluZy5cbiAgICAgKi9cbiAgICBzZXRCbGVuZCh2YWx1ZTogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMudXBkYXRlQ2hlY2soU3RhdGVTeXN0ZW0uY2hlY2tCbGVuZE1vZGUsIHZhbHVlKTtcblxuICAgICAgICB0aGlzLmdsW3ZhbHVlID8gJ2VuYWJsZScgOiAnZGlzYWJsZSddKHRoaXMuZ2wuQkxFTkQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgb3IgZGlzYWJsZSBwb2x5Z29uIG9mZnNldCBmaWxsXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlIC0gVHVybiBvbiBvciBvZmYgd2ViZ2wgcG9seWdvbiBvZmZzZXQgdGVzdGluZy5cbiAgICAgKi9cbiAgICBzZXRPZmZzZXQodmFsdWU6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrKFN0YXRlU3lzdGVtLmNoZWNrUG9seWdvbk9mZnNldCwgdmFsdWUpO1xuXG4gICAgICAgIHRoaXMuZ2xbdmFsdWUgPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10odGhpcy5nbC5QT0xZR09OX09GRlNFVF9GSUxMKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHdoZXRoZXIgdG8gZW5hYmxlIG9yIGRpc2FibGUgZGVwdGggdGVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUgLSBUdXJuIG9uIG9yIG9mZiB3ZWJnbCBkZXB0aCB0ZXN0aW5nLlxuICAgICAqL1xuICAgIHNldERlcHRoVGVzdCh2YWx1ZTogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuZ2xbdmFsdWUgPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10odGhpcy5nbC5ERVBUSF9URVNUKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHdoZXRoZXIgdG8gZW5hYmxlIG9yIGRpc2FibGUgY3VsbCBmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZSAtIFR1cm4gb24gb3Igb2ZmIHdlYmdsIGN1bGwgZmFjZS5cbiAgICAgKi9cbiAgICBzZXRDdWxsRmFjZSh2YWx1ZTogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuZ2xbdmFsdWUgPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10odGhpcy5nbC5DVUxMX0ZBQ0UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGdsIGZyb250IGZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlIC0gdHJ1ZSBpcyBjbG9ja3dpc2UgYW5kIGZhbHNlIGlzIGNvdW50ZXItY2xvY2t3aXNlXG4gICAgICovXG4gICAgc2V0RnJvbnRGYWNlKHZhbHVlOiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5nbC5mcm9udEZhY2UodGhpcy5nbFt2YWx1ZSA/ICdDVycgOiAnQ0NXJ10pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJsZW5kIG1vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBUaGUgYmxlbmQgbW9kZSB0byBzZXQgdG8uXG4gICAgICovXG4gICAgc2V0QmxlbmRNb2RlKHZhbHVlOiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMuYmxlbmRNb2RlKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJsZW5kTW9kZSA9IHZhbHVlO1xuXG4gICAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLmJsZW5kTW9kZXNbdmFsdWVdO1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XG5cbiAgICAgICAgaWYgKG1vZGUubGVuZ3RoID09PSAyKVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC5ibGVuZEZ1bmMobW9kZVswXSwgbW9kZVsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC5ibGVuZEZ1bmNTZXBhcmF0ZShtb2RlWzBdLCBtb2RlWzFdLCBtb2RlWzJdLCBtb2RlWzNdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW9kZS5sZW5ndGggPT09IDYpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2JsZW5kRXEgPSB0cnVlO1xuICAgICAgICAgICAgZ2wuYmxlbmRFcXVhdGlvblNlcGFyYXRlKG1vZGVbNF0sIG1vZGVbNV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2JsZW5kRXEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2JsZW5kRXEgPSBmYWxzZTtcbiAgICAgICAgICAgIGdsLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShnbC5GVU5DX0FERCwgZ2wuRlVOQ19BREQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcG9seWdvbiBvZmZzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSB0aGUgcG9seWdvbiBvZmZzZXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgLSB0aGUgcG9seWdvbiBvZmZzZXQgc2NhbGVcbiAgICAgKi9cbiAgICBzZXRQb2x5Z29uT2Zmc2V0KHZhbHVlOiBudW1iZXIsIHNjYWxlOiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmdsLnBvbHlnb25PZmZzZXQodmFsdWUsIHNjYWxlKTtcbiAgICB9XG5cbiAgICAvLyB1c2VkXG4gICAgLyoqXG4gICAgICogUmVzZXRzIGFsbCB0aGUgbG9naWMgYW5kIGRpc2FibGVzIHRoZSB2YW9zXG4gICAgICovXG4gICAgcmVzZXQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5nbC5waXhlbFN0b3JlaSh0aGlzLmdsLlVOUEFDS19GTElQX1lfV0VCR0wsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLmZvcmNlU3RhdGUodGhpcy5kZWZhdWx0U3RhdGUpO1xuXG4gICAgICAgIHRoaXMuX2JsZW5kRXEgPSB0cnVlO1xuICAgICAgICB0aGlzLmJsZW5kTW9kZSA9IC0xO1xuICAgICAgICB0aGlzLnNldEJsZW5kTW9kZSgwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjaGVja3MgdG8gc2VlIHdoaWNoIHVwZGF0ZXMgc2hvdWxkIGJlIGNoZWNrZWQgYmFzZWQgb24gd2hpY2ggc2V0dGluZ3MgaGF2ZSBiZWVuIGFjdGl2YXRlZC5cbiAgICAgKiBGb3IgZXhhbXBsZSwgaWYgYmxlbmQgaXMgZW5hYmxlZCB0aGVuIHdlIHNob3VsZCBjaGVjayB0aGUgYmxlbmQgbW9kZXMgZWFjaCB0aW1lIHRoZSBzdGF0ZSBpcyBjaGFuZ2VkXG4gICAgICogb3IgaWYgcG9seWdvbiBmaWxsIGlzIGFjdGl2YXRlZCB0aGVuIHdlIG5lZWQgdG8gY2hlY2sgaWYgdGhlIHBvbHlnb24gb2Zmc2V0IGNoYW5nZXMuXG4gICAgICogVGhlIGlkZWEgaXMgdGhhdCB3ZSBvbmx5IGNoZWNrIHdoYXQgd2UgaGF2ZSB0b28uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIC0gdGhlIGNoZWNraW5nIGZ1bmN0aW9uIHRvIGFkZCBvciByZW1vdmVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlIC0gc2hvdWxkIHRoZSBjaGVjayBmdW5jdGlvbiBiZSBhZGRlZCBvciByZW1vdmVkLlxuICAgICAqL1xuICAgIHVwZGF0ZUNoZWNrKGZ1bmM6IChzeXN0ZW06IHRoaXMsIHN0YXRlOiBTdGF0ZSkgPT4gdm9pZCwgdmFsdWU6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuY2hlY2tzLmluZGV4T2YoZnVuYyk7XG5cbiAgICAgICAgaWYgKHZhbHVlICYmIGluZGV4ID09PSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5jaGVja3MucHVzaChmdW5jKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdmFsdWUgJiYgaW5kZXggIT09IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBwcml2YXRlIGxpdHRsZSB3cmFwcGVyIGZ1bmN0aW9uIHRoYXQgd2UgY2FsbCB0byBjaGVjayB0aGUgYmxlbmQgbW9kZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UElYSS5TdGF0ZVN5c3RlbX0gU3lzdGVtIC0gdGhlIFN5c3RlbSB0byBwZXJmb3JtIHRoZSBzdGF0ZSBjaGVjayBvblxuICAgICAqIEBwYXJhbSB7UElYSS5TdGF0ZX0gc3RhdGUgLSB0aGUgc3RhdGUgdGhhdCB0aGUgYmxlbmRNb2RlIHdpbGwgcHVsbGVkIGZyb21cbiAgICAgKi9cbiAgICBzdGF0aWMgY2hlY2tCbGVuZE1vZGUoc3lzdGVtOiBTdGF0ZVN5c3RlbSwgc3RhdGU6IFN0YXRlKTogdm9pZFxuICAgIHtcbiAgICAgICAgc3lzdGVtLnNldEJsZW5kTW9kZShzdGF0ZS5ibGVuZE1vZGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgcHJpdmF0ZSBsaXR0bGUgd3JhcHBlciBmdW5jdGlvbiB0aGF0IHdlIGNhbGwgdG8gY2hlY2sgdGhlIHBvbHlnb24gb2Zmc2V0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLlN0YXRlU3lzdGVtfSBTeXN0ZW0gLSB0aGUgU3lzdGVtIHRvIHBlcmZvcm0gdGhlIHN0YXRlIGNoZWNrIG9uXG4gICAgICogQHBhcmFtIHtQSVhJLlN0YXRlfSBzdGF0ZSAtIHRoZSBzdGF0ZSB0aGF0IHRoZSBibGVuZE1vZGUgd2lsbCBwdWxsZWQgZnJvbVxuICAgICAqL1xuICAgIHN0YXRpYyBjaGVja1BvbHlnb25PZmZzZXQoc3lzdGVtOiBTdGF0ZVN5c3RlbSwgc3RhdGU6IFN0YXRlKTogdm9pZFxuICAgIHtcbiAgICAgICAgc3lzdGVtLnNldFBvbHlnb25PZmZzZXQoMSwgc3RhdGUucG9seWdvbk9mZnNldCk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFN5c3RlbSB9IGZyb20gJy4uL1N5c3RlbSc7XG5pbXBvcnQgeyBHQ19NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcblxuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uL1JlbmRlcmVyJztcbmltcG9ydCB0eXBlIHsgVGV4dHVyZSB9IGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgdHlwZSB7IFJlbmRlclRleHR1cmUgfSBmcm9tICcuLi9yZW5kZXJUZXh0dXJlL1JlbmRlclRleHR1cmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElVbmxvYWRhYmxlVGV4dHVyZSB7XG4gICAgX3RleHR1cmU6IFRleHR1cmUgfCBSZW5kZXJUZXh0dXJlO1xuICAgIGNoaWxkcmVuOiBJVW5sb2FkYWJsZVRleHR1cmVbXTtcbn1cblxuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgdGV4dHVyZSBnYXJiYWdlIGNvbGxlY3Rpb24gb24gdGhlIEdQVSxcbiAqIGVuc3VyaW5nIHRoYXQgaXQgZG9lcyBub3QgZ2V0IGNsb2dnZWQgdXAgd2l0aCB0ZXh0dXJlcyB0aGF0IGFyZSBubyBsb25nZXIgYmVpbmcgdXNlZC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJLnN5c3RlbXNcbiAqIEBleHRlbmRzIFBJWEkuU3lzdGVtXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXh0dXJlR0NTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW1cbntcbiAgICBwdWJsaWMgY291bnQ6IG51bWJlcjtcbiAgICBwdWJsaWMgY2hlY2tDb3VudDogbnVtYmVyO1xuICAgIHB1YmxpYyBtYXhJZGxlOiBudW1iZXI7XG4gICAgcHVibGljIGNoZWNrQ291bnRNYXg6IG51bWJlcjtcbiAgICBwdWJsaWMgbW9kZTogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBSZW5kZXJlcilcbiAgICB7XG4gICAgICAgIHN1cGVyKHJlbmRlcmVyKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVjayBjb3VudFxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGVja0NvdW50ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWF4aW11bSBpZGxlIHRpbWUsIGluIHNlY29uZHNcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAc2VlIFBJWEkuc2V0dGluZ3MuR0NfTUFYX0lETEVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4SWRsZSA9IHNldHRpbmdzLkdDX01BWF9JRExFO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXhpbXVtIG51bWJlciBvZiBpdGVtIHRvIGNoZWNrXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHNlZSBQSVhJLnNldHRpbmdzLkdDX01BWF9DSEVDS19DT1VOVFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGVja0NvdW50TWF4ID0gc2V0dGluZ3MuR0NfTUFYX0NIRUNLX0NPVU5UO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDdXJyZW50IGdhcmFiYWdlIGNvbGxlY3Rpb24gbW9kZVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkdDX01PREVTfVxuICAgICAgICAgKiBAc2VlIFBJWEkuc2V0dGluZ3MuR0NfTU9ERVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tb2RlID0gc2V0dGluZ3MuR0NfTU9ERTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdG8gc2VlIHdoZW4gdGhlIGxhc3QgdGltZSBhIHRleHR1cmUgd2FzIHVzZWRcbiAgICAgKiBpZiB0aGUgdGV4dHVyZSBoYXMgbm90IGJlZW4gdXNlZCBmb3IgYSBzcGVjaWZpZWQgYW1vdW50IG9mIHRpbWUgaXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIEdQVVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBwb3N0cmVuZGVyKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlci5yZW5kZXJpbmdUb1NjcmVlbilcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb3VudCsrO1xuXG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09IEdDX01PREVTLk1BTlVBTClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jaGVja0NvdW50Kys7XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tDb3VudCA+IHRoaXMuY2hlY2tDb3VudE1heClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5jaGVja0NvdW50ID0gMDtcblxuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgd2hlbiB0aGUgbGFzdCB0aW1lIGEgdGV4dHVyZSB3YXMgdXNlZFxuICAgICAqIGlmIHRoZSB0ZXh0dXJlIGhhcyBub3QgYmVlbiB1c2VkIGZvciBhIHNwZWNpZmllZCBhbW91bnQgb2YgdGltZSBpdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgR1BVXG4gICAgICovXG4gICAgcnVuKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHRtID0gdGhpcy5yZW5kZXJlci50ZXh0dXJlO1xuICAgICAgICBjb25zdCBtYW5hZ2VkVGV4dHVyZXMgPSAgdG0ubWFuYWdlZFRleHR1cmVzO1xuICAgICAgICBsZXQgd2FzUmVtb3ZlZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFuYWdlZFRleHR1cmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gbWFuYWdlZFRleHR1cmVzW2ldO1xuXG4gICAgICAgICAgICAvLyBvbmx5IHN1cHBvcnRzIG5vbiBnZW5lcmF0ZWQgdGV4dHVyZXMgYXQgdGhlIG1vbWVudCFcbiAgICAgICAgICAgIGlmICghKHRleHR1cmUgYXMgYW55KS5mcmFtZWJ1ZmZlciAmJiB0aGlzLmNvdW50IC0gdGV4dHVyZS50b3VjaGVkID4gdGhpcy5tYXhJZGxlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRtLmRlc3Ryb3lUZXh0dXJlKHRleHR1cmUsIHRydWUpO1xuICAgICAgICAgICAgICAgIG1hbmFnZWRUZXh0dXJlc1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgd2FzUmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2FzUmVtb3ZlZClcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGogPSAwO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hbmFnZWRUZXh0dXJlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAobWFuYWdlZFRleHR1cmVzW2ldICE9PSBudWxsKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWFuYWdlZFRleHR1cmVzW2orK10gPSBtYW5hZ2VkVGV4dHVyZXNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYW5hZ2VkVGV4dHVyZXMubGVuZ3RoID0gajtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHRoZSB0ZXh0dXJlcyB3aXRoaW4gdGhlIHNwZWNpZmllZCBkaXNwbGF5T2JqZWN0IGFuZCBpdHMgY2hpbGRyZW4gZnJvbSB0aGUgR1BVXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gZGlzcGxheU9iamVjdCAtIHRoZSBkaXNwbGF5T2JqZWN0IHRvIHJlbW92ZSB0aGUgdGV4dHVyZXMgZnJvbS5cbiAgICAgKi9cbiAgICB1bmxvYWQoZGlzcGxheU9iamVjdDogSVVubG9hZGFibGVUZXh0dXJlKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgdG0gPSB0aGlzLnJlbmRlcmVyLnRleHR1cmU7XG5cbiAgICAgICAgLy8gb25seSBkZXN0cm95IG5vbiBnZW5lcmF0ZWQgdGV4dHVyZXNcbiAgICAgICAgaWYgKChkaXNwbGF5T2JqZWN0Ll90ZXh0dXJlIGFzIFJlbmRlclRleHR1cmUpPy5mcmFtZWJ1ZmZlcilcbiAgICAgICAge1xuICAgICAgICAgICAgdG0uZGVzdHJveVRleHR1cmUoZGlzcGxheU9iamVjdC5fdGV4dHVyZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy51bmxvYWQoZGlzcGxheU9iamVjdC5jaGlsZHJlbltpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLyoqXG4gKiBJbnRlcm5hbCB0ZXh0dXJlIGZvciBXZWJHTCBjb250ZXh0XG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBHTFRleHR1cmVcbntcbiAgICBwdWJsaWMgdGV4dHVyZTogV2ViR0xUZXh0dXJlO1xuICAgIHB1YmxpYyB3aWR0aDogbnVtYmVyO1xuICAgIHB1YmxpYyBoZWlnaHQ6IG51bWJlcjtcbiAgICBwdWJsaWMgbWlwbWFwOiBib29sZWFuO1xuICAgIHB1YmxpYyB3cmFwTW9kZTogbnVtYmVyO1xuICAgIHB1YmxpYyB0eXBlOiBudW1iZXI7XG4gICAgcHVibGljIGludGVybmFsRm9ybWF0OiBudW1iZXI7XG4gICAgZGlydHlJZDogbnVtYmVyO1xuICAgIGRpcnR5U3R5bGVJZDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IodGV4dHVyZTogV2ViR0xUZXh0dXJlKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBXZWJHTCB0ZXh0dXJlXG4gICAgICAgICAqIEBtZW1iZXIge1dlYkdMVGV4dHVyZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdpZHRoIG9mIHRleHR1cmUgdGhhdCB3YXMgdXNlZCBpbiB0ZXhJbWFnZTJEXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2lkdGggPSAtMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSGVpZ2h0IG9mIHRleHR1cmUgdGhhdCB3YXMgdXNlZCBpbiB0ZXhJbWFnZTJEXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gLTE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRleHR1cmUgY29udGVudHMgZGlydHkgZmxhZ1xuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpcnR5SWQgPSAtMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGV4dHVyZSBzdHlsZSBkaXJ0eSBmbGFnXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlydHlTdHlsZUlkID0gLTE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgbWlwIGxldmVscyBoYXMgdG8gYmUgZ2VuZXJhdGVkXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pcG1hcCA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwTW9kZSBjb3BpZWQgZnJvbSBiYXNlVGV4dHVyZVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndyYXBNb2RlID0gMzMwNzE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFR5cGUgY29waWVkIGZyb20gYmFzZVRleHR1cmVcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gNjQwODtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVHlwZSBjb3BpZWQgZnJvbSBiYXNlVGV4dHVyZVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmludGVybmFsRm9ybWF0ID0gNTEyMTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSAnLi4vU3lzdGVtJztcbmltcG9ydCB7IEJhc2VUZXh0dXJlIH0gZnJvbSAnLi9CYXNlVGV4dHVyZSc7XG5pbXBvcnQgeyBHTFRleHR1cmUgfSBmcm9tICcuL0dMVGV4dHVyZSc7XG5pbXBvcnQgeyByZW1vdmVJdGVtcyB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IE1JUE1BUF9NT0RFUywgV1JBUF9NT0RFUywgU0NBTEVfTU9ERVMsIFRZUEVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcblxuaW1wb3J0IHR5cGUgeyBUZXh0dXJlIH0gZnJvbSAnLi9UZXh0dXJlJztcbmltcG9ydCB0eXBlIHsgSVJlbmRlcmluZ0NvbnRleHQgfSBmcm9tICcuLi9JUmVuZGVyaW5nQ29udGV4dCc7XG5pbXBvcnQgdHlwZSB7IFJlbmRlcmVyIH0gZnJvbSAnLi4vUmVuZGVyZXInO1xuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgdGV4dHVyZXMuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLlN5c3RlbVxuICogQG1lbWJlcm9mIFBJWEkuc3lzdGVtc1xuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZVN5c3RlbSBleHRlbmRzIFN5c3RlbVxue1xuICAgIHB1YmxpYyBib3VuZFRleHR1cmVzOiBCYXNlVGV4dHVyZVtdO1xuICAgIHB1YmxpYyBtYW5hZ2VkVGV4dHVyZXM6IEFycmF5PEJhc2VUZXh0dXJlPjtcbiAgICBwcm90ZWN0ZWQgQ09OVEVYVF9VSUQ6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgZ2w6IElSZW5kZXJpbmdDb250ZXh0O1xuICAgIHByb3RlY3RlZCB3ZWJHTFZlcnNpb246IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgdW5rbm93blRleHR1cmU6IEJhc2VUZXh0dXJlO1xuICAgIHByb3RlY3RlZCBfdW5rbm93bkJvdW5kVGV4dHVyZXM6IGJvb2xlYW47XG4gICAgY3VycmVudExvY2F0aW9uOiBudW1iZXI7XG4gICAgZW1wdHlUZXh0dXJlczoge1trZXk6IG51bWJlcl06IEdMVGV4dHVyZX07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgU3lzdGVtIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogUmVuZGVyZXIpXG4gICAge1xuICAgICAgICBzdXBlcihyZW5kZXJlcik7XG5cbiAgICAgICAgLy8gVE9ETyBzZXQgdG8gbWF4IHRleHR1cmVzLi4uXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCb3VuZCB0ZXh0dXJlc1xuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkJhc2VUZXh0dXJlW119XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ib3VuZFRleHR1cmVzID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDdXJyZW50IGxvY2F0aW9uXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IC0xO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMaXN0IG9mIG1hbmFnZWQgdGV4dHVyZXNcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5CYXNlVGV4dHVyZVtdfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWFuYWdlZFRleHR1cmVzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpZCBzb21lb25lIHRlbXBlciB3aXRoIHRleHR1cmVzIHN0YXRlPyBXZSdsbCBvdmVyd3JpdGUgdGhlbSB3aGVuIHdlIG5lZWQgdG8gdW5iaW5kIHNvbWV0aGluZy5cbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3Vua25vd25Cb3VuZFRleHR1cmVzID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJhc2VUZXh0dXJlIHZhbHVlIHRoYXQgc2hvd3MgdGhhdCB3ZSBkb24ndCBrbm93IHdoYXQgaXMgYm91bmRcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5CYXNlVGV4dHVyZX1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVua25vd25UZXh0dXJlID0gbmV3IEJhc2VUZXh0dXJlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgcmVuZGVyZXIgY29udGV4dCBhbmQgbmVjZXNzYXJ5IGJ1ZmZlcnMuXG4gICAgICovXG4gICAgY29udGV4dENoYW5nZSgpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMuZ2wgPSB0aGlzLnJlbmRlcmVyLmdsO1xuXG4gICAgICAgIHRoaXMuQ09OVEVYVF9VSUQgPSB0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEO1xuXG4gICAgICAgIHRoaXMud2ViR0xWZXJzaW9uID0gdGhpcy5yZW5kZXJlci5jb250ZXh0LndlYkdMVmVyc2lvbjtcblxuICAgICAgICBjb25zdCBtYXhUZXh0dXJlcyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7XG5cbiAgICAgICAgdGhpcy5ib3VuZFRleHR1cmVzLmxlbmd0aCA9IG1heFRleHR1cmVzO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4VGV4dHVyZXM7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5ib3VuZFRleHR1cmVzW2ldID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPRE8gbW92ZSB0aGlzLi4gdG8gYSBuaWNlIG1ha2UgZW1wdHkgdGV4dHVyZXMgY2xhc3MuLlxuICAgICAgICB0aGlzLmVtcHR5VGV4dHVyZXMgPSB7fTtcblxuICAgICAgICBjb25zdCBlbXB0eVRleHR1cmUyRCA9IG5ldyBHTFRleHR1cmUoZ2wuY3JlYXRlVGV4dHVyZSgpKTtcblxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBlbXB0eVRleHR1cmUyRC50ZXh0dXJlKTtcbiAgICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCAxLCAxLCAwLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBuZXcgVWludDhBcnJheSg0KSk7XG5cbiAgICAgICAgdGhpcy5lbXB0eVRleHR1cmVzW2dsLlRFWFRVUkVfMkRdID0gZW1wdHlUZXh0dXJlMkQ7XG4gICAgICAgIHRoaXMuZW1wdHlUZXh0dXJlc1tnbC5URVhUVVJFX0NVQkVfTUFQXSA9IG5ldyBHTFRleHR1cmUoZ2wuY3JlYXRlVGV4dHVyZSgpKTtcblxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFX0NVQkVfTUFQLCB0aGlzLmVtcHR5VGV4dHVyZXNbZ2wuVEVYVFVSRV9DVUJFX01BUF0udGV4dHVyZSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YICsgaSwgMCwgZ2wuUkdCQSwgMSwgMSwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfQ1VCRV9NQVAsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFX0NVQkVfTUFQLCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLkxJTkVBUik7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvdW5kVGV4dHVyZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuYmluZChudWxsLCBpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJpbmQgYSB0ZXh0dXJlIHRvIGEgc3BlY2lmaWMgbG9jYXRpb25cbiAgICAgKlxuICAgICAqIElmIHlvdSB3YW50IHRvIHVuYmluZCBzb21ldGhpbmcsIHBsZWFzZSB1c2UgYHVuYmluZCh0ZXh0dXJlKWAgaW5zdGVhZCBvZiBgYmluZChudWxsLCB0ZXh0dXJlTG9jYXRpb24pYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlRleHR1cmV8UElYSS5CYXNlVGV4dHVyZX0gdGV4dHVyZV8gLSBUZXh0dXJlIHRvIGJpbmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xvY2F0aW9uPTBdIC0gTG9jYXRpb24gdG8gYmluZCBhdFxuICAgICAqL1xuICAgIGJpbmQodGV4dHVyZTogVGV4dHVyZXxCYXNlVGV4dHVyZSwgbG9jYXRpb24gPSAwKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgeyBnbCB9ID0gdGhpcztcblxuICAgICAgICBpZiAodGV4dHVyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGV4dHVyZSA9IHRleHR1cmUuY2FzdFRvQmFzZVRleHR1cmUoKTtcblxuICAgICAgICAgICAgaWYgKHRleHR1cmUucGFyZW50VGV4dHVyZUFycmF5KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGNhbm5vdCBiaW5kIHBhcnRpYWwgdGV4dHVyZVxuICAgICAgICAgICAgICAgIC8vIFRPRE86IHJlcG9ydCBhIHdhcm5pbmdcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0ZXh0dXJlLnZhbGlkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRleHR1cmUudG91Y2hlZCA9IHRoaXMucmVuZGVyZXIudGV4dHVyZUdDLmNvdW50O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xUZXh0dXJlID0gdGV4dHVyZS5fZ2xUZXh0dXJlc1t0aGlzLkNPTlRFWFRfVUlEXSB8fCB0aGlzLmluaXRUZXh0dXJlKHRleHR1cmUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRUZXh0dXJlc1tsb2NhdGlvbl0gIT09IHRleHR1cmUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50TG9jYXRpb24gIT09IGxvY2F0aW9uKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCArIGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBnbC5iaW5kVGV4dHVyZSh0ZXh0dXJlLnRhcmdldCwgZ2xUZXh0dXJlLnRleHR1cmUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChnbFRleHR1cmUuZGlydHlJZCAhPT0gdGV4dHVyZS5kaXJ0eUlkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudExvY2F0aW9uICE9PSBsb2NhdGlvbilcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyBsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXh0dXJlKHRleHR1cmUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuYm91bmRUZXh0dXJlc1tsb2NhdGlvbl0gPSB0ZXh0dXJlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudExvY2F0aW9uICE9PSBsb2NhdGlvbilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyBsb2NhdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuZW1wdHlUZXh0dXJlc1tnbC5URVhUVVJFXzJEXS50ZXh0dXJlKTtcbiAgICAgICAgICAgIHRoaXMuYm91bmRUZXh0dXJlc1tsb2NhdGlvbl0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRleHR1cmUgbG9jYXRpb24gYW5kIGJvdW5kIHRleHR1cmVzXG4gICAgICpcbiAgICAgKiBBY3R1YWwgYGJpbmQobnVsbCwgaSlgIGNhbGxzIHdpbGwgYmUgcGVyZm9ybWVkIGF0IG5leHQgYHVuYmluZCgpYCBjYWxsXG4gICAgICovXG4gICAgcmVzZXQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fdW5rbm93bkJvdW5kVGV4dHVyZXMgPSB0cnVlO1xuICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IC0xO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ib3VuZFRleHR1cmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmJvdW5kVGV4dHVyZXNbaV0gPSB0aGlzLnVua25vd25UZXh0dXJlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5iaW5kIGEgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gdGV4dHVyZSAtIFRleHR1cmUgdG8gYmluZFxuICAgICAqL1xuICAgIHVuYmluZCh0ZXh0dXJlPzogQmFzZVRleHR1cmUpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB7IGdsLCBib3VuZFRleHR1cmVzIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLl91bmtub3duQm91bmRUZXh0dXJlcylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fdW5rbm93bkJvdW5kVGV4dHVyZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIHNvbWVvbmUgY2hhbmdlZCB3ZWJHTCBzdGF0ZSxcbiAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gYmUgc3VyZSB0aGF0IG91ciB0ZXh0dXJlIGRvZXMgbm90IGFwcGVhciBpbiBtdWx0aS10ZXh0dXJlIHJlbmRlcmVyIHNhbXBsZXJzXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvdW5kVGV4dHVyZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGJvdW5kVGV4dHVyZXNbaV0gPT09IHRoaXMudW5rbm93blRleHR1cmUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmQobnVsbCwgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib3VuZFRleHR1cmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoYm91bmRUZXh0dXJlc1tpXSA9PT0gdGV4dHVyZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50TG9jYXRpb24gIT09IGkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgaSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gaTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBnbC5iaW5kVGV4dHVyZSh0ZXh0dXJlLnRhcmdldCwgdGhpcy5lbXB0eVRleHR1cmVzW3RleHR1cmUudGFyZ2V0XS50ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICBib3VuZFRleHR1cmVzW2ldID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSB0ZXh0dXJlXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gdGV4dHVyZSAtIFRleHR1cmUgdG8gaW5pdGlhbGl6ZVxuICAgICAqL1xuICAgIGluaXRUZXh0dXJlKHRleHR1cmU6IEJhc2VUZXh0dXJlKTogR0xUZXh0dXJlXG4gICAge1xuICAgICAgICBjb25zdCBnbFRleHR1cmUgPSBuZXcgR0xUZXh0dXJlKHRoaXMuZ2wuY3JlYXRlVGV4dHVyZSgpKTtcblxuICAgICAgICAvLyBndWFyYW50ZWUgYW4gdXBkYXRlLi5cbiAgICAgICAgZ2xUZXh0dXJlLmRpcnR5SWQgPSAtMTtcblxuICAgICAgICB0ZXh0dXJlLl9nbFRleHR1cmVzW3RoaXMuQ09OVEVYVF9VSURdID0gZ2xUZXh0dXJlO1xuXG4gICAgICAgIHRoaXMubWFuYWdlZFRleHR1cmVzLnB1c2godGV4dHVyZSk7XG4gICAgICAgIHRleHR1cmUub24oJ2Rpc3Bvc2UnLCB0aGlzLmRlc3Ryb3lUZXh0dXJlLCB0aGlzKTtcblxuICAgICAgICByZXR1cm4gZ2xUZXh0dXJlO1xuICAgIH1cblxuICAgIGluaXRUZXh0dXJlVHlwZSh0ZXh0dXJlOiBCYXNlVGV4dHVyZSwgZ2xUZXh0dXJlOiBHTFRleHR1cmUpOiB2b2lkXG4gICAge1xuICAgICAgICBnbFRleHR1cmUuaW50ZXJuYWxGb3JtYXQgPSB0ZXh0dXJlLmZvcm1hdDtcbiAgICAgICAgZ2xUZXh0dXJlLnR5cGUgPSB0ZXh0dXJlLnR5cGU7XG4gICAgICAgIGlmICh0aGlzLndlYkdMVmVyc2lvbiAhPT0gMilcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nbDtcblxuICAgICAgICBpZiAodGV4dHVyZS50eXBlID09PSBnbC5GTE9BVFxuICAgICAgICAgICAgJiYgdGV4dHVyZS5mb3JtYXQgPT09IGdsLlJHQkEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsVGV4dHVyZS5pbnRlcm5hbEZvcm1hdCA9IGdsLlJHQkEzMkY7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhhdCdzIFdlYkdMMSBIQUxGX0ZMT0FUX09FU1xuICAgICAgICAvLyB3ZSBoYXZlIHRvIGNvbnZlcnQgaXQgdG8gV2ViR0wgSEFMRl9GTE9BVFxuICAgICAgICBpZiAodGV4dHVyZS50eXBlID09PSBUWVBFUy5IQUxGX0ZMT0FUKVxuICAgICAgICB7XG4gICAgICAgICAgICBnbFRleHR1cmUudHlwZSA9IGdsLkhBTEZfRkxPQVQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdsVGV4dHVyZS50eXBlID09PSBnbC5IQUxGX0ZMT0FUXG4gICAgICAgICAgICAmJiB0ZXh0dXJlLmZvcm1hdCA9PT0gZ2wuUkdCQSlcbiAgICAgICAge1xuICAgICAgICAgICAgZ2xUZXh0dXJlLmludGVybmFsRm9ybWF0ID0gZ2wuUkdCQTE2RjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhIHRleHR1cmVcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSB0ZXh0dXJlIC0gVGV4dHVyZSB0byBpbml0aWFsaXplXG4gICAgICovXG4gICAgdXBkYXRlVGV4dHVyZSh0ZXh0dXJlOiBCYXNlVGV4dHVyZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGdsVGV4dHVyZSA9IHRleHR1cmUuX2dsVGV4dHVyZXNbdGhpcy5DT05URVhUX1VJRF07XG5cbiAgICAgICAgaWYgKCFnbFRleHR1cmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcblxuICAgICAgICB0aGlzLmluaXRUZXh0dXJlVHlwZSh0ZXh0dXJlLCBnbFRleHR1cmUpO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlLnJlc291cmNlICYmIHRleHR1cmUucmVzb3VyY2UudXBsb2FkKHJlbmRlcmVyLCB0ZXh0dXJlLCBnbFRleHR1cmUpKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyB0ZXh0dXJlIGlzIHVwbG9hZGVkLCBkb250IGRvIGFueXRoaW5nIVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gZGVmYXVsdCwgcmVuZGVyVGV4dHVyZS1saWtlIGxvZ2ljXG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHRleHR1cmUucmVhbFdpZHRoO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGV4dHVyZS5yZWFsSGVpZ2h0O1xuICAgICAgICAgICAgY29uc3QgZ2wgPSByZW5kZXJlci5nbDtcblxuICAgICAgICAgICAgaWYgKGdsVGV4dHVyZS53aWR0aCAhPT0gd2lkdGhcbiAgICAgICAgICAgICAgICB8fCBnbFRleHR1cmUuaGVpZ2h0ICE9PSBoZWlnaHRcbiAgICAgICAgICAgICAgICB8fCBnbFRleHR1cmUuZGlydHlJZCA8IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2xUZXh0dXJlLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICAgICAgZ2xUZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAgICAgICAgIGdsLnRleEltYWdlMkQodGV4dHVyZS50YXJnZXQsIDAsXG4gICAgICAgICAgICAgICAgICAgIGdsVGV4dHVyZS5pbnRlcm5hbEZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgIGdsVGV4dHVyZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxldHMgb25seSB1cGRhdGUgd2hhdCBjaGFuZ2VzLi5cbiAgICAgICAgaWYgKHRleHR1cmUuZGlydHlTdHlsZUlkICE9PSBnbFRleHR1cmUuZGlydHlTdHlsZUlkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmVTdHlsZSh0ZXh0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBnbFRleHR1cmUuZGlydHlJZCA9IHRleHR1cmUuZGlydHlJZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSB0ZXh0dXJlIGZyb20gV2ViR0xcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfFBJWEkuVGV4dHVyZX0gdGV4dHVyZV8gLSB0aGUgdGV4dHVyZSB0byBkZXN0cm95XG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFJlbW92ZT1mYWxzZV0gLSBXaGV0aGVyIHRvIHNraXAgcmVtb3ZpbmcgdGhlIHRleHR1cmUgZnJvbSB0aGUgVGV4dHVyZU1hbmFnZXIuXG4gICAgICovXG4gICAgZGVzdHJveVRleHR1cmUodGV4dHVyZTogQmFzZVRleHR1cmV8VGV4dHVyZSwgc2tpcFJlbW92ZT86IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB7IGdsIH0gPSB0aGlzO1xuXG4gICAgICAgIHRleHR1cmUgPSB0ZXh0dXJlLmNhc3RUb0Jhc2VUZXh0dXJlKCk7XG5cbiAgICAgICAgaWYgKHRleHR1cmUuX2dsVGV4dHVyZXNbdGhpcy5DT05URVhUX1VJRF0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kKHRleHR1cmUpO1xuXG4gICAgICAgICAgICBnbC5kZWxldGVUZXh0dXJlKHRleHR1cmUuX2dsVGV4dHVyZXNbdGhpcy5DT05URVhUX1VJRF0udGV4dHVyZSk7XG4gICAgICAgICAgICB0ZXh0dXJlLm9mZignZGlzcG9zZScsIHRoaXMuZGVzdHJveVRleHR1cmUsIHRoaXMpO1xuXG4gICAgICAgICAgICBkZWxldGUgdGV4dHVyZS5fZ2xUZXh0dXJlc1t0aGlzLkNPTlRFWFRfVUlEXTtcblxuICAgICAgICAgICAgaWYgKCFza2lwUmVtb3ZlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLm1hbmFnZWRUZXh0dXJlcy5pbmRleE9mKHRleHR1cmUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IC0xKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSXRlbXModGhpcy5tYW5hZ2VkVGV4dHVyZXMsIGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0ZXh0dXJlIHN0eWxlIHN1Y2ggYXMgbWlwbWFwIGZsYWdcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSB0ZXh0dXJlIC0gVGV4dHVyZSB0byB1cGRhdGVcbiAgICAgKi9cbiAgICB1cGRhdGVUZXh0dXJlU3R5bGUodGV4dHVyZTogQmFzZVRleHR1cmUpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBnbFRleHR1cmUgPSB0ZXh0dXJlLl9nbFRleHR1cmVzW3RoaXMuQ09OVEVYVF9VSURdO1xuXG4gICAgICAgIGlmICghZ2xUZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKHRleHR1cmUubWlwbWFwID09PSBNSVBNQVBfTU9ERVMuUE9XMiB8fCB0aGlzLndlYkdMVmVyc2lvbiAhPT0gMikgJiYgIXRleHR1cmUuaXNQb3dlck9mVHdvKVxuICAgICAgICB7XG4gICAgICAgICAgICBnbFRleHR1cmUubWlwbWFwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBnbFRleHR1cmUubWlwbWFwID0gdGV4dHVyZS5taXBtYXAgPj0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLndlYkdMVmVyc2lvbiAhPT0gMiAmJiAhdGV4dHVyZS5pc1Bvd2VyT2ZUd28pXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdsVGV4dHVyZS53cmFwTW9kZSA9IFdSQVBfTU9ERVMuQ0xBTVA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBnbFRleHR1cmUud3JhcE1vZGUgPSB0ZXh0dXJlLndyYXBNb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRleHR1cmUucmVzb3VyY2UgJiYgdGV4dHVyZS5yZXNvdXJjZS5zdHlsZSh0aGlzLnJlbmRlcmVyLCB0ZXh0dXJlLCBnbFRleHR1cmUpKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBzdHlsZSBpcyBzZXQsIGRvbnQgZG8gYW55dGhpbmchXG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNldFN0eWxlKHRleHR1cmUsIGdsVGV4dHVyZSk7XG4gICAgICAgIH1cblxuICAgICAgICBnbFRleHR1cmUuZGlydHlTdHlsZUlkID0gdGV4dHVyZS5kaXJ0eVN0eWxlSWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHN0eWxlIGZvciB0ZXh0dXJlXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gdGV4dHVyZSAtIFRleHR1cmUgdG8gdXBkYXRlXG4gICAgICogQHBhcmFtIHtQSVhJLkdMVGV4dHVyZX0gZ2xUZXh0dXJlXG4gICAgICovXG4gICAgc2V0U3R5bGUodGV4dHVyZTogQmFzZVRleHR1cmUsIGdsVGV4dHVyZTogR0xUZXh0dXJlKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xuXG4gICAgICAgIGlmIChnbFRleHR1cmUubWlwbWFwKVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC5nZW5lcmF0ZU1pcG1hcCh0ZXh0dXJlLnRhcmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmUudGFyZ2V0LCBnbC5URVhUVVJFX1dSQVBfUywgZ2xUZXh0dXJlLndyYXBNb2RlKTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlLnRhcmdldCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsVGV4dHVyZS53cmFwTW9kZSk7XG5cbiAgICAgICAgaWYgKGdsVGV4dHVyZS5taXBtYXApXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbiAgICAgICAgICAgIGdsLnRleFBhcmFtZXRlcmkodGV4dHVyZS50YXJnZXQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgdGV4dHVyZS5zY2FsZU1vZGUgPT09IFNDQUxFX01PREVTLkxJTkVBUiA/IGdsLkxJTkVBUl9NSVBNQVBfTElORUFSIDogZ2wuTkVBUkVTVF9NSVBNQVBfTkVBUkVTVCk7XG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5cbiAgICAgICAgICAgIGNvbnN0IGFuaXNvdHJvcGljRXh0ID0gdGhpcy5yZW5kZXJlci5jb250ZXh0LmV4dGVuc2lvbnMuYW5pc290cm9waWNGaWx0ZXJpbmc7XG5cbiAgICAgICAgICAgIGlmIChhbmlzb3Ryb3BpY0V4dCAmJiB0ZXh0dXJlLmFuaXNvdHJvcGljTGV2ZWwgPiAwICYmIHRleHR1cmUuc2NhbGVNb2RlID09PSBTQ0FMRV9NT0RFUy5MSU5FQVIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGV2ZWwgPSBNYXRoLm1pbih0ZXh0dXJlLmFuaXNvdHJvcGljTGV2ZWwsIGdsLmdldFBhcmFtZXRlcihhbmlzb3Ryb3BpY0V4dC5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpKTtcblxuICAgICAgICAgICAgICAgIGdsLnRleFBhcmFtZXRlcmYodGV4dHVyZS50YXJnZXQsIGFuaXNvdHJvcGljRXh0LlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULCBsZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmUudGFyZ2V0LCBnbC5URVhUVVJFX01JTl9GSUxURVIsIHRleHR1cmUuc2NhbGVNb2RlID09PSBTQ0FMRV9NT0RFUy5MSU5FQVIgPyBnbC5MSU5FQVIgOiBnbC5ORUFSRVNUKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkodGV4dHVyZS50YXJnZXQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgdGV4dHVyZS5zY2FsZU1vZGUgPT09IFNDQUxFX01PREVTLkxJTkVBUiA/IGdsLkxJTkVBUiA6IGdsLk5FQVJFU1QpO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIFN5c3RlbXMgYXJlIGluZGl2aWR1YWwgY29tcG9uZW50cyB0byB0aGUgUmVuZGVyZXIgcGlwZWxpbmUuXG4gKiBAbmFtZXNwYWNlIFBJWEkuc3lzdGVtc1xuICovXG5leHBvcnQgKiBmcm9tICcuL2ZpbHRlcnMvRmlsdGVyU3lzdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vYmF0Y2gvQmF0Y2hTeXN0ZW0nO1xuZXhwb3J0ICogZnJvbSAnLi9jb250ZXh0L0NvbnRleHRTeXN0ZW0nO1xuZXhwb3J0ICogZnJvbSAnLi9mcmFtZWJ1ZmZlci9GcmFtZWJ1ZmZlclN5c3RlbSc7XG5leHBvcnQgKiBmcm9tICcuL2dlb21ldHJ5L0dlb21ldHJ5U3lzdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vbWFzay9NYXNrU3lzdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vbWFzay9TY2lzc29yU3lzdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vbWFzay9TdGVuY2lsU3lzdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vcHJvamVjdGlvbi9Qcm9qZWN0aW9uU3lzdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vcmVuZGVyVGV4dHVyZS9SZW5kZXJUZXh0dXJlU3lzdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vc2hhZGVyL1NoYWRlclN5c3RlbSc7XG5leHBvcnQgKiBmcm9tICcuL3N0YXRlL1N0YXRlU3lzdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vdGV4dHVyZXMvVGV4dHVyZUdDU3lzdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vdGV4dHVyZXMvVGV4dHVyZVN5c3RlbSc7XG4iLCAiaW1wb3J0IHsgaGV4MnN0cmluZywgaGV4MnJnYiwgZGVwcmVjYXRpb24sIEV2ZW50RW1pdHRlciB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IE1hdHJpeCwgUmVjdGFuZ2xlIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgeyBSRU5ERVJFUl9UWVBFIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSAnQHBpeGkvc2V0dGluZ3MnO1xuaW1wb3J0IHsgRGlzcGxheU9iamVjdCB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuaW1wb3J0IHsgUmVuZGVyVGV4dHVyZSB9IGZyb20gJy4vcmVuZGVyVGV4dHVyZS9SZW5kZXJUZXh0dXJlJztcblxuaW1wb3J0IHR5cGUgeyBTQ0FMRV9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgdHlwZSB7IElSZW5kZXJpbmdDb250ZXh0IH0gZnJvbSAnLi9JUmVuZGVyaW5nQ29udGV4dCc7XG5pbXBvcnQgdHlwZSB7IENvbnRhaW5lciB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuXG5jb25zdCB0ZW1wTWF0cml4ID0gbmV3IE1hdHJpeCgpO1xuXG5leHBvcnQgaW50ZXJmYWNlIElSZW5kZXJlck9wdGlvbnMgZXh0ZW5kcyBHbG9iYWxNaXhpbnMuSVJlbmRlcmVyT3B0aW9uc1xue1xuICAgIHdpZHRoPzogbnVtYmVyO1xuICAgIGhlaWdodD86IG51bWJlcjtcbiAgICB2aWV3PzogSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgdHJhbnNwYXJlbnQ/OiBib29sZWFuIHwgJ25vdE11bHRpcGxpZWQnO1xuICAgIGF1dG9EZW5zaXR5PzogYm9vbGVhbjtcbiAgICBhbnRpYWxpYXM/OiBib29sZWFuO1xuICAgIHJlc29sdXRpb24/OiBudW1iZXI7XG4gICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyPzogYm9vbGVhbjtcbiAgICBjbGVhckJlZm9yZVJlbmRlcj86IGJvb2xlYW47XG4gICAgYmFja2dyb3VuZENvbG9yPzogbnVtYmVyO1xuICAgIHBvd2VyUHJlZmVyZW5jZT86IFdlYkdMUG93ZXJQcmVmZXJlbmNlO1xuICAgIGNvbnRleHQ/OiBJUmVuZGVyaW5nQ29udGV4dDtcbn1cblxuaW50ZXJmYWNlIElSZW5kZXJlck9wdGlvbnNMZWdhY3kgZXh0ZW5kcyBJUmVuZGVyZXJPcHRpb25zXG57XG4gICAgYXV0b1Jlc2l6ZT86IGJvb2xlYW47XG4gICAgcm91bmRQaXhlbHM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElSZW5kZXJlclBsdWdpbnNcbntcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbi8qKlxuICogVGhlIEFic3RyYWN0UmVuZGVyZXIgaXMgdGhlIGJhc2UgZm9yIGEgUGl4aUpTIFJlbmRlcmVyLiBJdCBpcyBleHRlbmRlZCBieSB0aGUge0BsaW5rIFBJWEkuQ2FudmFzUmVuZGVyZXJ9XG4gKiBhbmQge0BsaW5rIFBJWEkuUmVuZGVyZXJ9IHdoaWNoIGNhbiBiZSB1c2VkIGZvciByZW5kZXJpbmcgYSBQaXhpSlMgc2NlbmUuXG4gKlxuICogQGFic3RyYWN0XG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkudXRpbHMuRXZlbnRFbWl0dGVyXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RSZW5kZXJlciBleHRlbmRzIEV2ZW50RW1pdHRlclxue1xuICAgIHB1YmxpYyByZXNvbHV0aW9uOiBudW1iZXI7XG4gICAgcHVibGljIGNsZWFyQmVmb3JlUmVuZGVyPzogYm9vbGVhbjtcbiAgICBwdWJsaWMgcmVhZG9ubHkgb3B0aW9uczogSVJlbmRlcmVyT3B0aW9ucztcbiAgICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogUkVOREVSRVJfVFlQRTtcbiAgICBwdWJsaWMgcmVhZG9ubHkgc2NyZWVuOiBSZWN0YW5nbGU7XG4gICAgcHVibGljIHJlYWRvbmx5IHZpZXc6IEhUTUxDYW52YXNFbGVtZW50O1xuICAgIHB1YmxpYyByZWFkb25seSBwbHVnaW5zOiBJUmVuZGVyZXJQbHVnaW5zO1xuICAgIHB1YmxpYyByZWFkb25seSB0cmFuc3BhcmVudDogYm9vbGVhbiB8ICdub3RNdWx0aXBsaWVkJztcbiAgICBwdWJsaWMgcmVhZG9ubHkgYXV0b0RlbnNpdHk6IGJvb2xlYW47XG4gICAgcHVibGljIHJlYWRvbmx5IHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogYm9vbGVhbjtcblxuICAgIHByb3RlY3RlZCBfYmFja2dyb3VuZENvbG9yOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9iYWNrZ3JvdW5kQ29sb3JTdHJpbmc6IHN0cmluZztcbiAgICBfYmFja2dyb3VuZENvbG9yUmdiYTogbnVtYmVyW107XG4gICAgX2xhc3RPYmplY3RSZW5kZXJlZDogRGlzcGxheU9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzeXN0ZW0gLSBUaGUgbmFtZSBvZiB0aGUgc3lzdGVtIHRoaXMgcmVuZGVyZXIgaXMgZm9yLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBUaGUgb3B0aW9uYWwgcmVuZGVyZXIgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGg9ODAwXSAtIFRoZSB3aWR0aCBvZiB0aGUgc2NyZWVuLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5oZWlnaHQ9NjAwXSAtIFRoZSBoZWlnaHQgb2YgdGhlIHNjcmVlbi5cbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBbb3B0aW9ucy52aWV3XSAtIFRoZSBjYW52YXMgdG8gdXNlIGFzIGEgdmlldywgb3B0aW9uYWwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFuc3BhcmVudD1mYWxzZV0gLSBJZiB0aGUgcmVuZGVyIHZpZXcgaXMgdHJhbnNwYXJlbnQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hdXRvRGVuc2l0eT1mYWxzZV0gLSBSZXNpemVzIHJlbmRlcmVyIHZpZXcgaW4gQ1NTIHBpeGVscyB0byBhbGxvdyBmb3JcbiAgICAgKiAgIHJlc29sdXRpb25zIG90aGVyIHRoYW4gMS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmFudGlhbGlhcz1mYWxzZV0gLSBTZXRzIGFudGlhbGlhc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5yZXNvbHV0aW9uPTFdIC0gVGhlIHJlc29sdXRpb24gLyBkZXZpY2UgcGl4ZWwgcmF0aW8gb2YgdGhlIHJlbmRlcmVyLiBUaGVcbiAgICAgKiAgcmVzb2x1dGlvbiBvZiB0aGUgcmVuZGVyZXIgcmV0aW5hIHdvdWxkIGJlIDIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI9ZmFsc2VdIC0gRW5hYmxlcyBkcmF3aW5nIGJ1ZmZlciBwcmVzZXJ2YXRpb24sXG4gICAgICogIGVuYWJsZSB0aGlzIGlmIHlvdSBuZWVkIHRvIGNhbGwgdG9EYXRhVXJsIG9uIHRoZSBXZWJHTCBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2xlYXJCZWZvcmVSZW5kZXI9dHJ1ZV0gLSBUaGlzIHNldHMgaWYgdGhlIHJlbmRlcmVyIHdpbGwgY2xlYXIgdGhlIGNhbnZhcyBvclxuICAgICAqICAgICAgbm90IGJlZm9yZSB0aGUgbmV3IHJlbmRlciBwYXNzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3I9MHgwMDAwMDBdIC0gVGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHJlbmRlcmVkIGFyZWFcbiAgICAgKiAgKHNob3duIGlmIG5vdCB0cmFuc3BhcmVudCkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodHlwZTogUkVOREVSRVJfVFlQRSA9IFJFTkRFUkVSX1RZUEUuVU5LTk9XTiwgb3B0aW9ucz86IElSZW5kZXJlck9wdGlvbnMpXG4gICAge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgZGVmYXVsdCByZW5kZXIgb3B0aW9uc1xuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgc2V0dGluZ3MuUkVOREVSX09QVElPTlMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIERlcHJlY2F0aW9uIG5vdGljZSBmb3IgcmVuZGVyZXIgcm91bmRQaXhlbHMgb3B0aW9uXG4gICAgICAgIGlmICgob3B0aW9ucyBhcyBJUmVuZGVyZXJPcHRpb25zTGVnYWN5KS5yb3VuZFBpeGVscylcbiAgICAgICAge1xuICAgICAgICAgICAgc2V0dGluZ3MuUk9VTkRfUElYRUxTID0gKG9wdGlvbnMgYXMgSVJlbmRlcmVyT3B0aW9uc0xlZ2FjeSkucm91bmRQaXhlbHM7XG4gICAgICAgICAgICBkZXByZWNhdGlvbignNS4wLjAnLCAnUmVuZGVyZXIgcm91bmRQaXhlbHMgb3B0aW9uIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUElYSS5zZXR0aW5ncy5ST1VORF9QSVhFTFMnLCAyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc3VwcGxpZWQgY29uc3RydWN0b3Igb3B0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fVxuICAgICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0eXBlIG9mIHRoZSByZW5kZXJlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLlJFTkRFUkVSX1RZUEUuVU5LTk9XTlxuICAgICAgICAgKiBAc2VlIFBJWEkuUkVOREVSRVJfVFlQRVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWVhc3VyZW1lbnRzIG9mIHRoZSBzY3JlZW4uICgwLCAwLCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KS5cbiAgICAgICAgICpcbiAgICAgICAgICogSXRzIHNhZmUgdG8gdXNlIGFzIGZpbHRlckFyZWEgb3IgaGl0QXJlYSBmb3IgdGhlIHdob2xlIHN0YWdlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlJlY3RhbmdsZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2NyZWVuID0gbmV3IFJlY3RhbmdsZSgwLCAwLCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjYW52YXMgZWxlbWVudCB0aGF0IGV2ZXJ5dGhpbmcgaXMgZHJhd24gdG8uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52aWV3ID0gb3B0aW9ucy52aWV3IHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVzb2x1dGlvbiAvIGRldmljZSBwaXhlbCByYXRpbyBvZiB0aGUgcmVuZGVyZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gb3B0aW9ucy5yZXNvbHV0aW9uIHx8IHNldHRpbmdzLlJFU09MVVRJT047XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIHJlbmRlciB2aWV3IGlzIHRyYW5zcGFyZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmFuc3BhcmVudCA9IG9wdGlvbnMudHJhbnNwYXJlbnQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgQ1NTIGRpbWVuc2lvbnMgb2YgY2FudmFzIHZpZXcgc2hvdWxkIGJlIHJlc2l6ZWQgdG8gc2NyZWVuIGRpbWVuc2lvbnMgYXV0b21hdGljYWxseS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXV0b0RlbnNpdHkgPSBvcHRpb25zLmF1dG9EZW5zaXR5IHx8IChvcHRpb25zIGFzIElSZW5kZXJlck9wdGlvbnNMZWdhY3kpLmF1dG9SZXNpemUgfHwgZmFsc2U7XG4gICAgICAgIC8vIGF1dG9SZXNpemUgaXMgZGVwcmVjYXRlZCwgcHJvdmlkZXMgZmFsbGJhY2sgc3VwcG9ydFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdmFsdWUgb2YgdGhlIHByZXNlcnZlRHJhd2luZ0J1ZmZlciBmbGFnIGFmZmVjdHMgd2hldGhlciBvciBub3QgdGhlIGNvbnRlbnRzIG9mXG4gICAgICAgICAqIHRoZSBzdGVuY2lsIGJ1ZmZlciBpcyByZXRhaW5lZCBhZnRlciByZW5kZXJpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByZXNlcnZlRHJhd2luZ0J1ZmZlciA9IG9wdGlvbnMucHJlc2VydmVEcmF3aW5nQnVmZmVyO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIHNldHMgaWYgdGhlIENhbnZhc1JlbmRlcmVyIHdpbGwgY2xlYXIgdGhlIGNhbnZhcyBvciBub3QgYmVmb3JlIHRoZSBuZXcgcmVuZGVyIHBhc3MuXG4gICAgICAgICAqIElmIHRoZSBzY2VuZSBpcyBOT1QgdHJhbnNwYXJlbnQgUGl4aUpTIHdpbGwgdXNlIGEgY2FudmFzIHNpemVkIGZpbGxSZWN0IG9wZXJhdGlvbiBldmVyeVxuICAgICAgICAgKiBmcmFtZSB0byBzZXQgdGhlIGNhbnZhcyBiYWNrZ3JvdW5kIGNvbG9yLiBJZiB0aGUgc2NlbmUgaXMgdHJhbnNwYXJlbnQgUGl4aUpTIHdpbGwgdXNlIGNsZWFyUmVjdFxuICAgICAgICAgKiB0byBjbGVhciB0aGUgY2FudmFzIGV2ZXJ5IGZyYW1lLiBEaXNhYmxlIHRoaXMgYnkgc2V0dGluZyB0aGlzIHRvIGZhbHNlLiBGb3IgZXhhbXBsZSwgaWZcbiAgICAgICAgICogeW91ciBnYW1lIGhhcyBhIGNhbnZhcyBmaWxsaW5nIGJhY2tncm91bmQgaW1hZ2UgeW91IG9mdGVuIGRvbid0IG5lZWQgdGhpcyBzZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsZWFyQmVmb3JlUmVuZGVyID0gb3B0aW9ucy5jbGVhckJlZm9yZVJlbmRlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJhY2tncm91bmQgY29sb3IgYXMgYSBudW1iZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYmFja2dyb3VuZENvbG9yID0gMHgwMDAwMDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIGFzIGFuIFtSLCBHLCBCXSBhcnJheS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyW119XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JhY2tncm91bmRDb2xvclJnYmEgPSBbMCwgMCwgMCwgMF07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIGFzIGEgc3RyaW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JhY2tncm91bmRDb2xvclN0cmluZyA9ICcjMDAwMDAwJztcblxuICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yIHx8IHRoaXMuX2JhY2tncm91bmRDb2xvcjsgLy8gcnVuIGJnIGNvbG9yIHNldHRlclxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbGFzdCByb290IG9iamVjdCB0aGF0IHRoZSByZW5kZXJlciB0cmllZCB0byByZW5kZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuRGlzcGxheU9iamVjdH1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fbGFzdE9iamVjdFJlbmRlcmVkID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29sbGVjdGlvbiBvZiBwbHVnaW5zLlxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQG1lbWJlciB7b2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wbHVnaW5zID0ge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgcGx1Z2lucy5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gc3RhdGljTWFwIC0gVGhlIGRpY3Rpb25hcnkgb2Ygc3RhdGljYWxseSBzYXZlZCBwbHVnaW5zLlxuICAgICAqL1xuICAgIGluaXRQbHVnaW5zKHN0YXRpY01hcDogSVJlbmRlcmVyUGx1Z2lucyk6IHZvaWRcbiAgICB7XG4gICAgICAgIGZvciAoY29uc3QgbyBpbiBzdGF0aWNNYXApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luc1tvXSA9IG5ldyAoc3RhdGljTWFwW29dKSh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNhbWUgYXMgdmlldy53aWR0aCwgYWN0dWFsIG51bWJlciBvZiBwaXhlbHMgaW4gdGhlIGNhbnZhcyBieSBob3Jpem9udGFsLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBkZWZhdWx0IDgwMFxuICAgICAqL1xuICAgIGdldCB3aWR0aCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcud2lkdGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2FtZSBhcyB2aWV3LmhlaWdodCwgYWN0dWFsIG51bWJlciBvZiBwaXhlbHMgaW4gdGhlIGNhbnZhcyBieSB2ZXJ0aWNhbC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAZGVmYXVsdCA2MDBcbiAgICAgKi9cbiAgICBnZXQgaGVpZ2h0KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzaXplcyB0aGUgc2NyZWVuIGFuZCBjYW52YXMgdG8gdGhlIHNwZWNpZmllZCB3aWR0aCBhbmQgaGVpZ2h0LlxuICAgICAqIENhbnZhcyBkaW1lbnNpb25zIGFyZSBtdWx0aXBsaWVkIGJ5IHJlc29sdXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NyZWVuV2lkdGggLSBUaGUgbmV3IHdpZHRoIG9mIHRoZSBzY3JlZW4uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNjcmVlbkhlaWdodCAtIFRoZSBuZXcgaGVpZ2h0IG9mIHRoZSBzY3JlZW4uXG4gICAgICovXG4gICAgcmVzaXplKHNjcmVlbldpZHRoOiBudW1iZXIsIHNjcmVlbkhlaWdodDogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5zY3JlZW4ud2lkdGggPSBzY3JlZW5XaWR0aDtcbiAgICAgICAgdGhpcy5zY3JlZW4uaGVpZ2h0ID0gc2NyZWVuSGVpZ2h0O1xuXG4gICAgICAgIHRoaXMudmlldy53aWR0aCA9IHNjcmVlbldpZHRoICogdGhpcy5yZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLnZpZXcuaGVpZ2h0ID0gc2NyZWVuSGVpZ2h0ICogdGhpcy5yZXNvbHV0aW9uO1xuXG4gICAgICAgIGlmICh0aGlzLmF1dG9EZW5zaXR5KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuc3R5bGUud2lkdGggPSBgJHtzY3JlZW5XaWR0aH1weGA7XG4gICAgICAgICAgICB0aGlzLnZpZXcuc3R5bGUuaGVpZ2h0ID0gYCR7c2NyZWVuSGVpZ2h0fXB4YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCBhZnRlciB2aWV3IGhhcyBiZWVuIHJlc2l6ZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQSVhJLlJlbmRlcmVyI3Jlc2l6ZVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NyZWVuV2lkdGggLSBUaGUgbmV3IHdpZHRoIG9mIHRoZSBzY3JlZW4uXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY3JlZW5IZWlnaHQgLSBUaGUgbmV3IGhlaWdodCBvZiB0aGUgc2NyZWVuLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbWl0KCdyZXNpemUnLCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VmdWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdGV4dHVyZSBvZiB0aGUgZGlzcGxheSBvYmplY3QgdGhhdCBjYW4gdGhlbiBiZSB1c2VkIHRvIGNyZWF0ZSBzcHJpdGVzXG4gICAgICogVGhpcyBjYW4gYmUgcXVpdGUgdXNlZnVsIGlmIHlvdXIgZGlzcGxheU9iamVjdCBpcyBjb21wbGljYXRlZCBhbmQgbmVlZHMgdG8gYmUgcmV1c2VkIG11bHRpcGxlIHRpbWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IGRpc3BsYXlPYmplY3QgLSBUaGUgZGlzcGxheU9iamVjdCB0aGUgb2JqZWN0IHdpbGwgYmUgZ2VuZXJhdGVkIGZyb20uXG4gICAgICogQHBhcmFtIHtQSVhJLlNDQUxFX01PREVTfSBzY2FsZU1vZGUgLSBUaGUgc2NhbGUgbW9kZSBvZiB0aGUgdGV4dHVyZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiAtIFRoZSByZXNvbHV0aW9uIC8gZGV2aWNlIHBpeGVsIHJhdGlvIG9mIHRoZSB0ZXh0dXJlIGJlaW5nIGdlbmVyYXRlZC5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSBbcmVnaW9uXSAtIFRoZSByZWdpb24gb2YgdGhlIGRpc3BsYXlPYmplY3QsIHRoYXQgc2hhbGwgYmUgcmVuZGVyZWQsXG4gICAgICogICAgICAgIGlmIG5vIHJlZ2lvbiBpcyBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHRoZSBsb2NhbCBib3VuZHMgb2YgdGhlIGRpc3BsYXlPYmplY3QuXG4gICAgICogQHJldHVybiB7UElYSS5SZW5kZXJUZXh0dXJlfSBBIHRleHR1cmUgb2YgdGhlIGdyYXBoaWNzIG9iamVjdC5cbiAgICAgKi9cbiAgICBnZW5lcmF0ZVRleHR1cmUoZGlzcGxheU9iamVjdDogRGlzcGxheU9iamVjdCxcbiAgICAgICAgc2NhbGVNb2RlPzogU0NBTEVfTU9ERVMsIHJlc29sdXRpb24/OiBudW1iZXIsIHJlZ2lvbj86IFJlY3RhbmdsZSk6IFJlbmRlclRleHR1cmVcbiAgICB7XG4gICAgICAgIHJlZ2lvbiA9IHJlZ2lvbiB8fCAoZGlzcGxheU9iamVjdCBhcyBDb250YWluZXIpLmdldExvY2FsQm91bmRzKG51bGwsIHRydWUpO1xuXG4gICAgICAgIC8vIG1pbmltdW0gdGV4dHVyZSBzaXplIGlzIDF4MSwgMHgwIHdpbGwgdGhyb3cgYW4gZXJyb3JcbiAgICAgICAgaWYgKHJlZ2lvbi53aWR0aCA9PT0gMCkgcmVnaW9uLndpZHRoID0gMTtcbiAgICAgICAgaWYgKHJlZ2lvbi5oZWlnaHQgPT09IDApIHJlZ2lvbi5oZWlnaHQgPSAxO1xuXG4gICAgICAgIGNvbnN0IHJlbmRlclRleHR1cmUgPSBSZW5kZXJUZXh0dXJlLmNyZWF0ZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogcmVnaW9uLndpZHRoIHwgMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlZ2lvbi5oZWlnaHQgfCAwLFxuICAgICAgICAgICAgICAgIHNjYWxlTW9kZSxcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGVtcE1hdHJpeC50eCA9IC1yZWdpb24ueDtcbiAgICAgICAgdGVtcE1hdHJpeC50eSA9IC1yZWdpb24ueTtcblxuICAgICAgICB0aGlzLnJlbmRlcihkaXNwbGF5T2JqZWN0LCByZW5kZXJUZXh0dXJlLCBmYWxzZSwgdGVtcE1hdHJpeCwgISFkaXNwbGF5T2JqZWN0LnBhcmVudCk7XG5cbiAgICAgICAgcmV0dXJuIHJlbmRlclRleHR1cmU7XG4gICAgfVxuXG4gICAgYWJzdHJhY3QgcmVuZGVyKGRpc3BsYXlPYmplY3Q6IERpc3BsYXlPYmplY3QsIHJlbmRlclRleHR1cmU/OiBSZW5kZXJUZXh0dXJlLFxuICAgICAgICAgICAgICAgICAgICBjbGVhcj86IGJvb2xlYW4sIHRyYW5zZm9ybT86IE1hdHJpeCwgc2tpcFVwZGF0ZVRyYW5zZm9ybT86IGJvb2xlYW4pOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBldmVyeXRoaW5nIGZyb20gdGhlIHJlbmRlcmVyIGFuZCBvcHRpb25hbGx5IHJlbW92ZXMgdGhlIENhbnZhcyBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlbW92ZVZpZXc9ZmFsc2VdIC0gUmVtb3ZlcyB0aGUgQ2FudmFzIGVsZW1lbnQgZnJvbSB0aGUgRE9NLlxuICAgICAqL1xuICAgIGRlc3Ryb3kocmVtb3ZlVmlldz86IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBmb3IgKGNvbnN0IG8gaW4gdGhpcy5wbHVnaW5zKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbnNbb10uZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW5zW29dID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZW1vdmVWaWV3ICYmIHRoaXMudmlldy5wYXJlbnROb2RlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnZpZXcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZXcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGhpc0FueSA9IHRoaXMgYXMgYW55O1xuXG4gICAgICAgIC8vIG51bGwtaW5nIGFsbCBvYmplY3RzLCB0aGF0J3MgYSB0cmFkaXRpb24hXG5cbiAgICAgICAgdGhpc0FueS5wbHVnaW5zID0gbnVsbDtcbiAgICAgICAgdGhpc0FueS50eXBlID0gUkVOREVSRVJfVFlQRS5VTktOT1dOO1xuICAgICAgICB0aGlzQW55LnZpZXcgPSBudWxsO1xuICAgICAgICB0aGlzQW55LnNjcmVlbiA9IG51bGw7XG4gICAgICAgIHRoaXNBbnkuX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpc0FueS5vcHRpb25zID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYmFja2dyb3VuZENvbG9yUmdiYSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2JhY2tncm91bmRDb2xvclN0cmluZyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2xhc3RPYmplY3RSZW5kZXJlZCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhY2tncm91bmQgY29sb3IgdG8gZmlsbCBpZiBub3QgdHJhbnNwYXJlbnRcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgYmFja2dyb3VuZENvbG9yKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2tncm91bmRDb2xvcjtcbiAgICB9XG5cbiAgICBzZXQgYmFja2dyb3VuZENvbG9yKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLl9iYWNrZ3JvdW5kQ29sb3IgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fYmFja2dyb3VuZENvbG9yU3RyaW5nID0gaGV4MnN0cmluZyh2YWx1ZSk7XG4gICAgICAgIGhleDJyZ2IodmFsdWUsIHRoaXMuX2JhY2tncm91bmRDb2xvclJnYmEpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBYnN0cmFjdFJlbmRlcmVyIH0gZnJvbSAnLi9BYnN0cmFjdFJlbmRlcmVyJztcbmltcG9ydCB7IHNheUhlbGxvLCBpc1dlYkdMU3VwcG9ydGVkIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHsgTWFza1N5c3RlbSB9IGZyb20gJy4vbWFzay9NYXNrU3lzdGVtJztcbmltcG9ydCB7IFN0ZW5jaWxTeXN0ZW0gfSBmcm9tICcuL21hc2svU3RlbmNpbFN5c3RlbSc7XG5pbXBvcnQgeyBTY2lzc29yU3lzdGVtIH0gZnJvbSAnLi9tYXNrL1NjaXNzb3JTeXN0ZW0nO1xuaW1wb3J0IHsgRmlsdGVyU3lzdGVtIH0gZnJvbSAnLi9maWx0ZXJzL0ZpbHRlclN5c3RlbSc7XG5pbXBvcnQgeyBGcmFtZWJ1ZmZlclN5c3RlbSB9IGZyb20gJy4vZnJhbWVidWZmZXIvRnJhbWVidWZmZXJTeXN0ZW0nO1xuaW1wb3J0IHsgUmVuZGVyVGV4dHVyZVN5c3RlbSB9IGZyb20gJy4vcmVuZGVyVGV4dHVyZS9SZW5kZXJUZXh0dXJlU3lzdGVtJztcbmltcG9ydCB7IFRleHR1cmVTeXN0ZW0gfSBmcm9tICcuL3RleHR1cmVzL1RleHR1cmVTeXN0ZW0nO1xuaW1wb3J0IHsgUHJvamVjdGlvblN5c3RlbSB9IGZyb20gJy4vcHJvamVjdGlvbi9Qcm9qZWN0aW9uU3lzdGVtJztcbmltcG9ydCB7IFN0YXRlU3lzdGVtIH0gZnJvbSAnLi9zdGF0ZS9TdGF0ZVN5c3RlbSc7XG5pbXBvcnQgeyBHZW9tZXRyeVN5c3RlbSB9IGZyb20gJy4vZ2VvbWV0cnkvR2VvbWV0cnlTeXN0ZW0nO1xuaW1wb3J0IHsgU2hhZGVyU3lzdGVtIH0gZnJvbSAnLi9zaGFkZXIvU2hhZGVyU3lzdGVtJztcbmltcG9ydCB7IENvbnRleHRTeXN0ZW0gfSBmcm9tICcuL2NvbnRleHQvQ29udGV4dFN5c3RlbSc7XG5pbXBvcnQgeyBCYXRjaFN5c3RlbSB9IGZyb20gJy4vYmF0Y2gvQmF0Y2hTeXN0ZW0nO1xuaW1wb3J0IHsgVGV4dHVyZUdDU3lzdGVtIH0gZnJvbSAnLi90ZXh0dXJlcy9UZXh0dXJlR0NTeXN0ZW0nO1xuaW1wb3J0IHsgUkVOREVSRVJfVFlQRSB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBVbmlmb3JtR3JvdXAgfSBmcm9tICcuL3NoYWRlci9Vbmlmb3JtR3JvdXAnO1xuaW1wb3J0IHsgTWF0cml4IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgeyBSdW5uZXIgfSBmcm9tICdAcGl4aS9ydW5uZXInO1xuXG5pbXBvcnQgdHlwZSB7IElSZW5kZXJlck9wdGlvbnMsIElSZW5kZXJlclBsdWdpbnMgfSBmcm9tICcuL0Fic3RyYWN0UmVuZGVyZXInO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJUZXh0dXJlIH0gZnJvbSAnLi9yZW5kZXJUZXh0dXJlL1JlbmRlclRleHR1cmUnO1xuaW1wb3J0IHR5cGUgeyBEaXNwbGF5T2JqZWN0IH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5pbXBvcnQgdHlwZSB7IFN5c3RlbSB9IGZyb20gJy4vU3lzdGVtJztcbmltcG9ydCB0eXBlIHsgSVJlbmRlcmluZ0NvbnRleHQgfSBmcm9tICcuL0lSZW5kZXJpbmdDb250ZXh0JztcbmltcG9ydCB0eXBlIHsgRXh0cmFjdCB9IGZyb20gJ0BwaXhpL2V4dHJhY3QnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElSZW5kZXJlclBsdWdpbkNvbnN0cnVjdG9yIHtcbiAgICBuZXcgKHJlbmRlcmVyOiBSZW5kZXJlciwgb3B0aW9ucz86IGFueSk6IElSZW5kZXJlclBsdWdpbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVuZGVyZXJQbHVnaW4ge1xuICAgIGRlc3Ryb3koKTogdm9pZDtcbn1cblxuLyoqXG4gKiBUaGUgUmVuZGVyZXIgZHJhd3MgdGhlIHNjZW5lIGFuZCBhbGwgaXRzIGNvbnRlbnQgb250byBhIFdlYkdMIGVuYWJsZWQgY2FudmFzLlxuICpcbiAqIFRoaXMgcmVuZGVyZXIgc2hvdWxkIGJlIHVzZWQgZm9yIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBXZWJHTC5cbiAqXG4gKiBUaGlzIHJlbmRlcmVyIHdvcmtzIGJ5IGF1dG9tYXRpY2FsbHkgbWFuYWdpbmcgV2ViR0xCYXRjaGVzbSwgc28gbm8gbmVlZCBmb3IgU3ByaXRlIEJhdGNoZXMgb3IgU3ByaXRlIENsb3Vkcy5cbiAqIERvbid0IGZvcmdldCB0byBhZGQgdGhlIHZpZXcgdG8geW91ciBET00gb3IgeW91IHdpbGwgbm90IHNlZSBhbnl0aGluZyFcbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAZXh0ZW5kcyBQSVhJLkFic3RyYWN0UmVuZGVyZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFJlbmRlcmVyIGV4dGVuZHMgQWJzdHJhY3RSZW5kZXJlclxue1xuICAgIHB1YmxpYyBnbDogSVJlbmRlcmluZ0NvbnRleHQ7XG4gICAgcHVibGljIGdsb2JhbFVuaWZvcm1zOiBVbmlmb3JtR3JvdXA7XG4gICAgcHVibGljIENPTlRFWFRfVUlEOiBudW1iZXI7XG4gICAgcHVibGljIHJlbmRlcmluZ1RvU2NyZWVuOiBib29sZWFuO1xuICAgIHB1YmxpYyBleHRyYWN0OiBFeHRyYWN0O1xuICAgIC8vIHN5c3RlbXNcbiAgICBwdWJsaWMgbWFzazogTWFza1N5c3RlbTtcbiAgICBwdWJsaWMgY29udGV4dDogQ29udGV4dFN5c3RlbTtcbiAgICBwdWJsaWMgc3RhdGU6IFN0YXRlU3lzdGVtO1xuICAgIHB1YmxpYyBzaGFkZXI6IFNoYWRlclN5c3RlbTtcbiAgICBwdWJsaWMgdGV4dHVyZTogVGV4dHVyZVN5c3RlbTtcbiAgICBwdWJsaWMgZ2VvbWV0cnk6IEdlb21ldHJ5U3lzdGVtO1xuICAgIHB1YmxpYyBmcmFtZWJ1ZmZlcjogRnJhbWVidWZmZXJTeXN0ZW07XG4gICAgcHVibGljIHNjaXNzb3I6IFNjaXNzb3JTeXN0ZW07XG4gICAgcHVibGljIHN0ZW5jaWw6IFN0ZW5jaWxTeXN0ZW07XG4gICAgcHVibGljIHByb2plY3Rpb246IFByb2plY3Rpb25TeXN0ZW07XG4gICAgcHVibGljIHRleHR1cmVHQzogVGV4dHVyZUdDU3lzdGVtO1xuICAgIHB1YmxpYyBmaWx0ZXI6IEZpbHRlclN5c3RlbTtcbiAgICBwdWJsaWMgcmVuZGVyVGV4dHVyZTogUmVuZGVyVGV4dHVyZVN5c3RlbTtcbiAgICBwdWJsaWMgYmF0Y2g6IEJhdGNoU3lzdGVtO1xuXG4gICAgcnVubmVyczoge1trZXk6IHN0cmluZ106IFJ1bm5lcn07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcmVuZGVyZXIgaWYgV2ViR0wgaXMgYXZhaWxhYmxlLiBPdmVycmlkZWFibGVcbiAgICAgKiBieSB0aGUgKipAcGl4aS9jYW52YXMtcmVuZGVyZXIqKiBwYWNrYWdlIHRvIGFsbG93IGZhbGxiYWNrLlxuICAgICAqIHRocm93cyBlcnJvciBpZiBXZWJHTCBpcyBub3QgYXZhaWxhYmxlLlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUob3B0aW9uczogSVJlbmRlcmVyT3B0aW9ucyk6IEFic3RyYWN0UmVuZGVyZXJcbiAgICB7XG4gICAgICAgIGlmIChpc1dlYkdMU3VwcG9ydGVkKCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVuZGVyZXIob3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYkdMIHVuc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlciwgdXNlIFwicGl4aS5qcy1sZWdhY3lcIiBmb3IgZmFsbGJhY2sgY2FudmFzMmQgc3VwcG9ydC4nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gVGhlIG9wdGlvbmFsIHJlbmRlcmVyIHBhcmFtZXRlcnMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoPTgwMF0gLSBUaGUgd2lkdGggb2YgdGhlIHNjcmVlbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaGVpZ2h0PTYwMF0gLSBUaGUgaGVpZ2h0IG9mIHRoZSBzY3JlZW4uXG4gICAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gW29wdGlvbnMudmlld10gLSBUaGUgY2FudmFzIHRvIHVzZSBhcyBhIHZpZXcsIG9wdGlvbmFsLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhbnNwYXJlbnQ9ZmFsc2VdIC0gSWYgdGhlIHJlbmRlciB2aWV3IGlzIHRyYW5zcGFyZW50LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b0RlbnNpdHk9ZmFsc2VdIC0gUmVzaXplcyByZW5kZXJlciB2aWV3IGluIENTUyBwaXhlbHMgdG8gYWxsb3cgZm9yXG4gICAgICogICByZXNvbHV0aW9ucyBvdGhlciB0aGFuIDEuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hbnRpYWxpYXM9ZmFsc2VdIC0gU2V0cyBhbnRpYWxpYXMuIElmIG5vdCBhdmFpbGFibGUgbmF0aXZlbHkgdGhlbiBGWEFBXG4gICAgICogIGFudGlhbGlhc2luZyBpcyB1c2VkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5yZXNvbHV0aW9uPTFdIC0gVGhlIHJlc29sdXRpb24gLyBkZXZpY2UgcGl4ZWwgcmF0aW8gb2YgdGhlIHJlbmRlcmVyLlxuICAgICAqICBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgcmVuZGVyZXIgcmV0aW5hIHdvdWxkIGJlIDIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jbGVhckJlZm9yZVJlbmRlcj10cnVlXSAtIFRoaXMgc2V0cyBpZiB0aGUgcmVuZGVyZXIgd2lsbCBjbGVhclxuICAgICAqICB0aGUgY2FudmFzIG9yIG5vdCBiZWZvcmUgdGhlIG5ldyByZW5kZXIgcGFzcy4gSWYgeW91IHdpc2ggdG8gc2V0IHRoaXMgdG8gZmFsc2UsIHlvdSAqbXVzdCogc2V0XG4gICAgICogIHByZXNlcnZlRHJhd2luZ0J1ZmZlciB0byBgdHJ1ZWAuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI9ZmFsc2VdIC0gRW5hYmxlcyBkcmF3aW5nIGJ1ZmZlciBwcmVzZXJ2YXRpb24sXG4gICAgICogIGVuYWJsZSB0aGlzIGlmIHlvdSBuZWVkIHRvIGNhbGwgdG9EYXRhVXJsIG9uIHRoZSBXZWJHTCBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3I9MHgwMDAwMDBdIC0gVGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHJlbmRlcmVkIGFyZWFcbiAgICAgKiAgKHNob3duIGlmIG5vdCB0cmFuc3BhcmVudCkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBvd2VyUHJlZmVyZW5jZV0gLSBQYXJhbWV0ZXIgcGFzc2VkIHRvIFdlYkdMIGNvbnRleHQsIHNldCB0byBcImhpZ2gtcGVyZm9ybWFuY2VcIlxuICAgICAqICBmb3IgZGV2aWNlcyB3aXRoIGR1YWwgZ3JhcGhpY3MgY2FyZC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuY29udGV4dF0gLSBJZiBXZWJHTCBjb250ZXh0IGFscmVhZHkgZXhpc3RzLCBhbGwgcGFyYW1ldGVycyBtdXN0IGJlIHRha2VuIGZyb20gaXQuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/IDogSVJlbmRlcmVyT3B0aW9ucylcbiAgICB7XG4gICAgICAgIHN1cGVyKFJFTkRFUkVSX1RZUEUuV0VCR0wsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIHRoZSBvcHRpb25zIHdpbGwgaGF2ZSBiZWVuIG1vZGlmaWVkIGhlcmUgaW4gdGhlIHN1cGVyIGNvbnN0cnVjdG9yIHdpdGggcGl4aSdzIGRlZmF1bHQgc2V0dGluZ3MuLlxuICAgICAgICBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXZWJHTCBjb250ZXh0LCBzZXQgYnkgdGhlIGNvbnRleHRTeXN0ZW0gKHRoaXMuY29udGV4dClcbiAgICAgICAgICpcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge1dlYkdMUmVuZGVyaW5nQ29udGV4dH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2wgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuQ09OVEVYVF9VSUQgPSAwO1xuXG4gICAgICAgIC8vIFRPRE8gbGVnYWN5IVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCBzaWduYWwgaW5zdGFuY2VzIG9mICoqcnVubmVyKiosIHRoZXNlXG4gICAgICAgICAqIGFyZSBhc3NpZ25lZCB0byBlYWNoIHN5c3RlbSBjcmVhdGVkLlxuICAgICAgICAgKiBAc2VlIFBJWEkuUnVubmVyXG4gICAgICAgICAqIEBuYW1lIFBJWEkuUmVuZGVyZXIjcnVubmVyc1xuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQHByb3BlcnR5IHtQSVhJLlJ1bm5lcn0gZGVzdHJveSAtIERlc3Ryb3kgcnVubmVyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7UElYSS5SdW5uZXJ9IGNvbnRleHRDaGFuZ2UgLSBDb250ZXh0IGNoYW5nZSBydW5uZXJcbiAgICAgICAgICogQHByb3BlcnR5IHtQSVhJLlJ1bm5lcn0gcmVzZXQgLSBSZXNldCBydW5uZXJcbiAgICAgICAgICogQHByb3BlcnR5IHtQSVhJLlJ1bm5lcn0gdXBkYXRlIC0gVXBkYXRlIHJ1bm5lclxuICAgICAgICAgKiBAcHJvcGVydHkge1BJWEkuUnVubmVyfSBwb3N0cmVuZGVyIC0gUG9zdC1yZW5kZXIgcnVubmVyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7UElYSS5SdW5uZXJ9IHByZXJlbmRlciAtIFByZS1yZW5kZXIgcnVubmVyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7UElYSS5SdW5uZXJ9IHJlc2l6ZSAtIFJlc2l6ZSBydW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucnVubmVycyA9IHtcbiAgICAgICAgICAgIGRlc3Ryb3k6IG5ldyBSdW5uZXIoJ2Rlc3Ryb3knKSxcbiAgICAgICAgICAgIGNvbnRleHRDaGFuZ2U6IG5ldyBSdW5uZXIoJ2NvbnRleHRDaGFuZ2UnKSxcbiAgICAgICAgICAgIHJlc2V0OiBuZXcgUnVubmVyKCdyZXNldCcpLFxuICAgICAgICAgICAgdXBkYXRlOiBuZXcgUnVubmVyKCd1cGRhdGUnKSxcbiAgICAgICAgICAgIHBvc3RyZW5kZXI6IG5ldyBSdW5uZXIoJ3Bvc3RyZW5kZXInKSxcbiAgICAgICAgICAgIHByZXJlbmRlcjogbmV3IFJ1bm5lcigncHJlcmVuZGVyJyksXG4gICAgICAgICAgICByZXNpemU6IG5ldyBSdW5uZXIoJ3Jlc2l6ZScpLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHbG9iYWwgdW5pZm9ybXNcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5Vbmlmb3JtR3JvdXB9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdsb2JhbFVuaWZvcm1zID0gbmV3IFVuaWZvcm1Hcm91cCh7XG4gICAgICAgICAgICBwcm9qZWN0aW9uTWF0cml4OiBuZXcgTWF0cml4KCksXG4gICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXNrIHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLnN5c3RlbXMuTWFza1N5c3RlbX0gbWFza1xuICAgICAgICAgKiBAbWVtYmVyb2YgUElYSS5SZW5kZXJlciNcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFkZFN5c3RlbShNYXNrU3lzdGVtLCAnbWFzaycpXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnRleHQgc3lzdGVtIGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLnN5c3RlbXMuQ29udGV4dFN5c3RlbX0gY29udGV4dFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFBJWEkuUmVuZGVyZXIjXG4gICAgICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLmFkZFN5c3RlbShDb250ZXh0U3lzdGVtLCAnY29udGV4dCcpXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFN0YXRlIHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgICAgICogQG1lbWJlciB7UElYSS5zeXN0ZW1zLlN0YXRlU3lzdGVtfSBzdGF0ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFBJWEkuUmVuZGVyZXIjXG4gICAgICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLmFkZFN5c3RlbShTdGF0ZVN5c3RlbSwgJ3N0YXRlJylcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2hhZGVyIHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgICAgICogQG1lbWJlciB7UElYSS5zeXN0ZW1zLlNoYWRlclN5c3RlbX0gc2hhZGVyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgUElYSS5SZW5kZXJlciNcbiAgICAgICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAuYWRkU3lzdGVtKFNoYWRlclN5c3RlbSwgJ3NoYWRlcicpXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRleHR1cmUgc3lzdGVtIGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLnN5c3RlbXMuVGV4dHVyZVN5c3RlbX0gdGV4dHVyZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFBJWEkuUmVuZGVyZXIjXG4gICAgICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLmFkZFN5c3RlbShUZXh0dXJlU3lzdGVtLCAndGV4dHVyZScpXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdlb21ldHJ5IHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgICAgICogQG1lbWJlciB7UElYSS5zeXN0ZW1zLkdlb21ldHJ5U3lzdGVtfSBnZW9tZXRyeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFBJWEkuUmVuZGVyZXIjXG4gICAgICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLmFkZFN5c3RlbShHZW9tZXRyeVN5c3RlbSwgJ2dlb21ldHJ5JylcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRnJhbWVidWZmZXIgc3lzdGVtIGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLnN5c3RlbXMuRnJhbWVidWZmZXJTeXN0ZW19IGZyYW1lYnVmZmVyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgUElYSS5SZW5kZXJlciNcbiAgICAgICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAuYWRkU3lzdGVtKEZyYW1lYnVmZmVyU3lzdGVtLCAnZnJhbWVidWZmZXInKVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTY2lzc29yIHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgICAgICogQG1lbWJlciB7UElYSS5zeXN0ZW1zLlNjaXNzb3JTeXN0ZW19IHNjaXNzb3JcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBQSVhJLlJlbmRlcmVyI1xuICAgICAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIC5hZGRTeXN0ZW0oU2Npc3NvclN5c3RlbSwgJ3NjaXNzb3InKVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTdGVuY2lsIHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgICAgICogQG1lbWJlciB7UElYSS5zeXN0ZW1zLlN0ZW5jaWxTeXN0ZW19IHN0ZW5jaWxcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBQSVhJLlJlbmRlcmVyI1xuICAgICAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIC5hZGRTeXN0ZW0oU3RlbmNpbFN5c3RlbSwgJ3N0ZW5jaWwnKVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9qZWN0aW9uIHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgICAgICogQG1lbWJlciB7UElYSS5zeXN0ZW1zLlByb2plY3Rpb25TeXN0ZW19IHByb2plY3Rpb25cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBQSVhJLlJlbmRlcmVyI1xuICAgICAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIC5hZGRTeXN0ZW0oUHJvamVjdGlvblN5c3RlbSwgJ3Byb2plY3Rpb24nKVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUZXh0dXJlIGdhcmJhZ2UgY29sbGVjdG9yIHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgICAgICogQG1lbWJlciB7UElYSS5zeXN0ZW1zLlRleHR1cmVHQ1N5c3RlbX0gdGV4dHVyZUdDXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgUElYSS5SZW5kZXJlciNcbiAgICAgICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAuYWRkU3lzdGVtKFRleHR1cmVHQ1N5c3RlbSwgJ3RleHR1cmVHQycpXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZpbHRlciBzeXN0ZW0gaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEBtZW1iZXIge1BJWEkuc3lzdGVtcy5GaWx0ZXJTeXN0ZW19IGZpbHRlclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFBJWEkuUmVuZGVyZXIjXG4gICAgICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLmFkZFN5c3RlbShGaWx0ZXJTeXN0ZW0sICdmaWx0ZXInKVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZW5kZXJUZXh0dXJlIHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgICAgICogQG1lbWJlciB7UElYSS5zeXN0ZW1zLlJlbmRlclRleHR1cmVTeXN0ZW19IHJlbmRlclRleHR1cmVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBQSVhJLlJlbmRlcmVyI1xuICAgICAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIC5hZGRTeXN0ZW0oUmVuZGVyVGV4dHVyZVN5c3RlbSwgJ3JlbmRlclRleHR1cmUnKVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJhdGNoIHN5c3RlbSBpbnN0YW5jZVxuICAgICAgICAgICAgICogQG1lbWJlciB7UElYSS5zeXN0ZW1zLkJhdGNoU3lzdGVtfSBiYXRjaFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFBJWEkuUmVuZGVyZXIjXG4gICAgICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLmFkZFN5c3RlbShCYXRjaFN5c3RlbSwgJ2JhdGNoJyk7XG5cbiAgICAgICAgdGhpcy5pbml0UGx1Z2lucyhSZW5kZXJlci5fX3BsdWdpbnMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3B0aW9ucyBwYXNzZWQgaW4gdG8gY3JlYXRlIGEgbmV3IFdlYkdMIGNvbnRleHQuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAob3B0aW9ucy5jb250ZXh0KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuaW5pdEZyb21Db250ZXh0KG9wdGlvbnMuY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuaW5pdEZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICBhbHBoYTogISF0aGlzLnRyYW5zcGFyZW50LFxuICAgICAgICAgICAgICAgIGFudGlhbGlhczogb3B0aW9ucy5hbnRpYWxpYXMsXG4gICAgICAgICAgICAgICAgcHJlbXVsdGlwbGllZEFscGhhOiB0aGlzLnRyYW5zcGFyZW50ICYmIHRoaXMudHJhbnNwYXJlbnQgIT09ICdub3RNdWx0aXBsaWVkJyxcbiAgICAgICAgICAgICAgICBzdGVuY2lsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogb3B0aW9ucy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIsXG4gICAgICAgICAgICAgICAgcG93ZXJQcmVmZXJlbmNlOiB0aGlzLm9wdGlvbnMucG93ZXJQcmVmZXJlbmNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmxhZyBpZiB3ZSBhcmUgcmVuZGVyaW5nIHRvIHRoZSBzY3JlZW4gdnMgcmVuZGVyVGV4dHVyZVxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW5kZXJpbmdUb1NjcmVlbiA9IHRydWU7XG5cbiAgICAgICAgc2F5SGVsbG8odGhpcy5jb250ZXh0LndlYkdMVmVyc2lvbiA9PT0gMiA/ICdXZWJHTCAyJyA6ICdXZWJHTCAxJyk7XG5cbiAgICAgICAgdGhpcy5yZXNpemUodGhpcy5vcHRpb25zLndpZHRoLCB0aGlzLm9wdGlvbnMuaGVpZ2h0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBuZXcgc3lzdGVtIHRvIHRoZSByZW5kZXJlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBDbGFzc1JlZiAtIENsYXNzIHJlZmVyZW5jZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV0gLSBQcm9wZXJ0eSBuYW1lIGZvciBzeXN0ZW0sIGlmIG5vdCBzcGVjaWZpZWRcbiAgICAgKiAgICAgICAgd2lsbCB1c2UgYSBzdGF0aWMgYG5hbWVgIHByb3BlcnR5IG9uIHRoZSBjbGFzcyBpdHNlbGYuIFRoaXNcbiAgICAgKiAgICAgICAgbmFtZSB3aWxsIGJlIGFzc2lnbmVkIGFzIHMgcHJvcGVydHkgb24gdGhlIFJlbmRlcmVyIHNvIG1ha2VcbiAgICAgKiAgICAgICAgc3VyZSBpdCBkb2Vzbid0IGNvbGxpZGUgd2l0aCBwcm9wZXJ0aWVzIG9uIFJlbmRlcmVyLlxuICAgICAqIEByZXR1cm4ge1BJWEkuUmVuZGVyZXJ9IFJldHVybiBpbnN0YW5jZSBvZiByZW5kZXJlclxuICAgICAqL1xuICAgIGFkZFN5c3RlbTxUIGV4dGVuZHMgU3lzdGVtPihDbGFzc1JlZjogeyBuZXcocmVuZGVyZXI6IFJlbmRlcmVyKTogVH0sIG5hbWU6IHN0cmluZyk6IHRoaXNcbiAgICB7XG4gICAgICAgIGlmICghbmFtZSlcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZSA9IENsYXNzUmVmLm5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzeXN0ZW0gPSBuZXcgQ2xhc3NSZWYodGhpcyk7XG5cbiAgICAgICAgaWYgKCh0aGlzIGFzIGFueSlbbmFtZV0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgV2hvb3BzISBUaGUgbmFtZSBcIiR7bmFtZX1cIiBpcyBhbHJlYWR5IGluIHVzZWApO1xuICAgICAgICB9XG5cbiAgICAgICAgKHRoaXMgYXMgYW55KVtuYW1lXSA9IHN5c3RlbTtcblxuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gdGhpcy5ydW5uZXJzKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJ1bm5lcnNbaV0uYWRkKHN5c3RlbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgYWZ0ZXIgcmVuZGVyaW5nIGZpbmlzaGVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5SZW5kZXJlciNwb3N0cmVuZGVyXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCBiZWZvcmUgcmVuZGVyaW5nIHN0YXJ0cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuUmVuZGVyZXIjcHJlcmVuZGVyXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIHRoZSBXZWJHTCBjb250ZXh0IGlzIHNldC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFBJWEkuUmVuZGVyZXIjY29udGV4dFxuICAgICAgICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgLSBXZWJHTCBjb250ZXh0LlxuICAgICAgICAgKi9cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIHRoZSBvYmplY3QgdG8gaXRzIFdlYkdMIHZpZXdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBkaXNwbGF5T2JqZWN0IC0gVGhlIG9iamVjdCB0byBiZSByZW5kZXJlZC5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gW3JlbmRlclRleHR1cmVdIC0gVGhlIHJlbmRlciB0ZXh0dXJlIHRvIHJlbmRlciB0by5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjbGVhcj10cnVlXSAtIFNob3VsZCB0aGUgY2FudmFzIGJlIGNsZWFyZWQgYmVmb3JlIHRoZSBuZXcgcmVuZGVyLlxuICAgICAqIEBwYXJhbSB7UElYSS5NYXRyaXh9IFt0cmFuc2Zvcm1dIC0gQSB0cmFuc2Zvcm0gdG8gYXBwbHkgdG8gdGhlIHJlbmRlciB0ZXh0dXJlIGJlZm9yZSByZW5kZXJpbmcuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFVwZGF0ZVRyYW5zZm9ybT1mYWxzZV0gLSBTaG91bGQgd2Ugc2tpcCB0aGUgdXBkYXRlIHRyYW5zZm9ybSBwYXNzP1xuICAgICAqL1xuICAgIHJlbmRlcihkaXNwbGF5T2JqZWN0OiBEaXNwbGF5T2JqZWN0LCByZW5kZXJUZXh0dXJlPzogUmVuZGVyVGV4dHVyZSxcbiAgICAgICAgY2xlYXI/OiBib29sZWFuLCB0cmFuc2Zvcm0/OiBNYXRyaXgsIHNraXBVcGRhdGVUcmFuc2Zvcm0/OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gY2FuIGJlIGhhbmR5IHRvIGtub3chXG4gICAgICAgIHRoaXMucmVuZGVyaW5nVG9TY3JlZW4gPSAhcmVuZGVyVGV4dHVyZTtcblxuICAgICAgICB0aGlzLnJ1bm5lcnMucHJlcmVuZGVyLmVtaXQoKTtcbiAgICAgICAgdGhpcy5lbWl0KCdwcmVyZW5kZXInKTtcblxuICAgICAgICAvLyBhcHBseSBhIHRyYW5zZm9ybSBhdCBhIEdQVSBsZXZlbFxuICAgICAgICB0aGlzLnByb2plY3Rpb24udHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuXG4gICAgICAgIC8vIG5vIHBvaW50IHJlbmRlcmluZyBpZiBvdXIgY29udGV4dCBoYXMgYmVlbiBibG93biB1cCFcbiAgICAgICAgaWYgKHRoaXMuY29udGV4dC5pc0xvc3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcmVuZGVyVGV4dHVyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fbGFzdE9iamVjdFJlbmRlcmVkID0gZGlzcGxheU9iamVjdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2tpcFVwZGF0ZVRyYW5zZm9ybSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBzY2VuZSBncmFwaFxuICAgICAgICAgICAgY29uc3QgY2FjaGVQYXJlbnQgPSBkaXNwbGF5T2JqZWN0LmVuYWJsZVRlbXBQYXJlbnQoKTtcblxuICAgICAgICAgICAgZGlzcGxheU9iamVjdC51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIGRpc3BsYXlPYmplY3QuZGlzYWJsZVRlbXBQYXJlbnQoY2FjaGVQYXJlbnQpO1xuICAgICAgICAgICAgLy8gZGlzcGxheU9iamVjdC5oaXRBcmVhID0gLy9UT0RPIGFkZCBhIHRlbXAgaGl0IGFyZWFcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyVGV4dHVyZS5iaW5kKHJlbmRlclRleHR1cmUpO1xuICAgICAgICB0aGlzLmJhdGNoLmN1cnJlbnRSZW5kZXJlci5zdGFydCgpO1xuXG4gICAgICAgIGlmIChjbGVhciAhPT0gdW5kZWZpbmVkID8gY2xlYXIgOiB0aGlzLmNsZWFyQmVmb3JlUmVuZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRleHR1cmUuY2xlYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpc3BsYXlPYmplY3QucmVuZGVyKHRoaXMpO1xuXG4gICAgICAgIC8vIGFwcGx5IHRyYW5zZm9ybS4uXG4gICAgICAgIHRoaXMuYmF0Y2guY3VycmVudFJlbmRlcmVyLmZsdXNoKCk7XG5cbiAgICAgICAgaWYgKHJlbmRlclRleHR1cmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlbmRlclRleHR1cmUuYmFzZVRleHR1cmUudXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJ1bm5lcnMucG9zdHJlbmRlci5lbWl0KCk7XG5cbiAgICAgICAgLy8gcmVzZXQgdHJhbnNmb3JtIGFmdGVyIHJlbmRlclxuICAgICAgICB0aGlzLnByb2plY3Rpb24udHJhbnNmb3JtID0gbnVsbDtcblxuICAgICAgICB0aGlzLmVtaXQoJ3Bvc3RyZW5kZXInKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNpemVzIHRoZSBXZWJHTCB2aWV3IHRvIHRoZSBzcGVjaWZpZWQgd2lkdGggYW5kIGhlaWdodC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY3JlZW5XaWR0aCAtIFRoZSBuZXcgd2lkdGggb2YgdGhlIHNjcmVlbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NyZWVuSGVpZ2h0IC0gVGhlIG5ldyBoZWlnaHQgb2YgdGhlIHNjcmVlbi5cbiAgICAgKi9cbiAgICByZXNpemUoc2NyZWVuV2lkdGg6IG51bWJlciwgc2NyZWVuSGVpZ2h0OiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBzdXBlci5yZXNpemUoc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5ydW5uZXJzLnJlc2l6ZS5lbWl0KHNjcmVlbldpZHRoLCBzY3JlZW5IZWlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgV2ViR0wgc3RhdGUgc28geW91IGNhbiByZW5kZXIgdGhpbmdzIGhvd2V2ZXIgeW91IGZhbmN5IVxuICAgICAqXG4gICAgICogQHJldHVybiB7UElYSS5SZW5kZXJlcn0gUmV0dXJucyBpdHNlbGYuXG4gICAgICovXG4gICAgcmVzZXQoKTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy5ydW5uZXJzLnJlc2V0LmVtaXQoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhciB0aGUgZnJhbWUgYnVmZmVyXG4gICAgICovXG4gICAgY2xlYXIoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5yZW5kZXJUZXh0dXJlLmJpbmQoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJUZXh0dXJlLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBldmVyeXRoaW5nIGZyb20gdGhlIHJlbmRlcmVyIChldmVudCBsaXN0ZW5lcnMsIHNwcml0ZWJhdGNoLCBldGMuLi4pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyZW1vdmVWaWV3PWZhbHNlXSAtIFJlbW92ZXMgdGhlIENhbnZhcyBlbGVtZW50IGZyb20gdGhlIERPTS5cbiAgICAgKiAgU2VlOiBodHRwczovL2dpdGh1Yi5jb20vcGl4aWpzL3BpeGkuanMvaXNzdWVzLzIyMzNcbiAgICAgKi9cbiAgICBkZXN0cm95KHJlbW92ZVZpZXc/OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5ydW5uZXJzLmRlc3Ryb3kuZW1pdCgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgciBpbiB0aGlzLnJ1bm5lcnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucnVubmVyc1tyXS5kZXN0cm95KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjYWxsIGJhc2UgZGVzdHJveVxuICAgICAgICBzdXBlci5kZXN0cm95KHJlbW92ZVZpZXcpO1xuXG4gICAgICAgIC8vIFRPRE8gbnVsbGlmeSBhbGwgdGhlIG1hbmFnZXJzLi5cbiAgICAgICAgdGhpcy5nbCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29sbGVjdGlvbiBvZiBpbnN0YWxsZWQgcGx1Z2lucy4gVGhlc2UgYXJlIGluY2x1ZGVkIGJ5IGRlZmF1bHQgaW4gUElYSSwgYnV0IGNhbiBiZSBleGNsdWRlZFxuICAgICAqIGJ5IGNyZWF0aW5nIGEgY3VzdG9tIGJ1aWxkLiBDb25zdWx0IHRoZSBSRUFETUUgZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgY3JlYXRpbmcgY3VzdG9tXG4gICAgICogYnVpbGRzIGFuZCBleGNsdWRpbmcgcGx1Z2lucy5cbiAgICAgKiBAbmFtZSBQSVhJLlJlbmRlcmVyI3BsdWdpbnNcbiAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBwcm9wZXJ0eSB7UElYSS5BY2Nlc3NpYmlsaXR5TWFuYWdlcn0gYWNjZXNzaWJpbGl0eSBTdXBwb3J0IHRhYmJpbmcgaW50ZXJhY3RpdmUgZWxlbWVudHMuXG4gICAgICogQHByb3BlcnR5IHtQSVhJLkV4dHJhY3R9IGV4dHJhY3QgRXh0cmFjdCBpbWFnZSBkYXRhIGZyb20gcmVuZGVyZXIuXG4gICAgICogQHByb3BlcnR5IHtQSVhJLkludGVyYWN0aW9uTWFuYWdlcn0gaW50ZXJhY3Rpb24gSGFuZGxlcyBtb3VzZSwgdG91Y2ggYW5kIHBvaW50ZXIgZXZlbnRzLlxuICAgICAqIEBwcm9wZXJ0eSB7UElYSS5QcmVwYXJlfSBwcmVwYXJlIFByZS1yZW5kZXIgZGlzcGxheSBvYmplY3RzLlxuICAgICAqL1xuXG4gICAgc3RhdGljIF9fcGx1Z2luczogSVJlbmRlcmVyUGx1Z2lucztcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcGx1Z2luIHRvIHRoZSByZW5kZXJlci5cbiAgICAgKlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGx1Z2luTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBwbHVnaW4uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY3RvciAtIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBvciBjbGFzcyBmb3IgdGhlIHBsdWdpbi5cbiAgICAgKi9cbiAgICBzdGF0aWMgcmVnaXN0ZXJQbHVnaW4ocGx1Z2luTmFtZTogc3RyaW5nLCBjdG9yOiBJUmVuZGVyZXJQbHVnaW5Db25zdHJ1Y3Rvcik6IHZvaWRcbiAgICB7XG4gICAgICAgIFJlbmRlcmVyLl9fcGx1Z2lucyA9IFJlbmRlcmVyLl9fcGx1Z2lucyB8fCB7fTtcbiAgICAgICAgUmVuZGVyZXIuX19wbHVnaW5zW3BsdWdpbk5hbWVdID0gY3RvcjtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICcuL1JlbmRlcmVyJztcbmltcG9ydCB0eXBlIHsgQWJzdHJhY3RSZW5kZXJlciwgSVJlbmRlcmVyT3B0aW9ucyB9IGZyb20gJy4vQWJzdHJhY3RSZW5kZXJlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlbmRlcmVyT3B0aW9uc0F1dG8gZXh0ZW5kcyBJUmVuZGVyZXJPcHRpb25zXG57XG4gICAgZm9yY2VDYW52YXM/OiBib29sZWFuO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgZGV0ZWN0IHdoaWNoIHJlbmRlcmVyIHlvdSBzaG91bGQgYmUgdXNpbmcuXG4gKiBXZWJHTCBpcyB0aGUgcHJlZmVycmVkIHJlbmRlcmVyIGFzIGl0IGlzIGEgbG90IGZhc3Rlci4gSWYgV2ViR0wgaXMgbm90IHN1cHBvcnRlZCBieVxuICogdGhlIGJyb3dzZXIgdGhlbiB0aGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGEgY2FudmFzIHJlbmRlcmVyXG4gKlxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBmdW5jdGlvbiBhdXRvRGV0ZWN0UmVuZGVyZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBUaGUgb3B0aW9uYWwgcmVuZGVyZXIgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoPTgwMF0gLSB0aGUgd2lkdGggb2YgdGhlIHJlbmRlcmVycyB2aWV3XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaGVpZ2h0PTYwMF0gLSB0aGUgaGVpZ2h0IG9mIHRoZSByZW5kZXJlcnMgdmlld1xuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gW29wdGlvbnMudmlld10gLSB0aGUgY2FudmFzIHRvIHVzZSBhcyBhIHZpZXcsIG9wdGlvbmFsXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYW5zcGFyZW50PWZhbHNlXSAtIElmIHRoZSByZW5kZXIgdmlldyBpcyB0cmFuc3BhcmVudCwgZGVmYXVsdCBmYWxzZVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hdXRvRGVuc2l0eT1mYWxzZV0gLSBSZXNpemVzIHJlbmRlcmVyIHZpZXcgaW4gQ1NTIHBpeGVscyB0byBhbGxvdyBmb3JcbiAqICAgcmVzb2x1dGlvbnMgb3RoZXIgdGhhbiAxXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmFudGlhbGlhcz1mYWxzZV0gLSBzZXRzIGFudGlhbGlhc1xuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI9ZmFsc2VdIC0gZW5hYmxlcyBkcmF3aW5nIGJ1ZmZlciBwcmVzZXJ2YXRpb24sIGVuYWJsZSB0aGlzIGlmIHlvdVxuICogIG5lZWQgdG8gY2FsbCB0b0RhdGFVcmwgb24gdGhlIHdlYmdsIGNvbnRleHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3I9MHgwMDAwMDBdIC0gVGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHJlbmRlcmVkIGFyZWFcbiAqICAoc2hvd24gaWYgbm90IHRyYW5zcGFyZW50KS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2xlYXJCZWZvcmVSZW5kZXI9dHJ1ZV0gLSBUaGlzIHNldHMgaWYgdGhlIHJlbmRlcmVyIHdpbGwgY2xlYXIgdGhlIGNhbnZhcyBvclxuICogICBub3QgYmVmb3JlIHRoZSBuZXcgcmVuZGVyIHBhc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucmVzb2x1dGlvbj0xXSAtIFRoZSByZXNvbHV0aW9uIC8gZGV2aWNlIHBpeGVsIHJhdGlvIG9mIHRoZSByZW5kZXJlciwgcmV0aW5hIHdvdWxkIGJlIDJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZm9yY2VDYW52YXM9ZmFsc2VdIC0gcHJldmVudHMgc2VsZWN0aW9uIG9mIFdlYkdMIHJlbmRlcmVyLCBldmVuIGlmIHN1Y2ggaXMgcHJlc2VudCwgdGhpc1xuICogICBvcHRpb24gb25seSBpcyBhdmFpbGFibGUgd2hlbiB1c2luZyAqKnBpeGkuanMtbGVnYWN5Kiogb3IgKipAcGl4aS9jYW52YXMtcmVuZGVyZXIqKiBtb2R1bGVzLCBvdGhlcndpc2VcbiAqICAgaXQgaXMgaWdub3JlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wb3dlclByZWZlcmVuY2VdIC0gUGFyYW1ldGVyIHBhc3NlZCB0byB3ZWJnbCBjb250ZXh0LCBzZXQgdG8gXCJoaWdoLXBlcmZvcm1hbmNlXCJcbiAqICBmb3IgZGV2aWNlcyB3aXRoIGR1YWwgZ3JhcGhpY3MgY2FyZCAqKndlYmdsIG9ubHkqKlxuICogQHJldHVybiB7UElYSS5SZW5kZXJlcnxQSVhJLkNhbnZhc1JlbmRlcmVyfSBSZXR1cm5zIFdlYkdMIHJlbmRlcmVyIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIENhbnZhc1JlbmRlcmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhdXRvRGV0ZWN0UmVuZGVyZXIob3B0aW9uczogSVJlbmRlcmVyT3B0aW9uc0F1dG8pOiBBYnN0cmFjdFJlbmRlcmVyXG57XG4gICAgcmV0dXJuIFJlbmRlcmVyLmNyZWF0ZShvcHRpb25zKTtcbn1cbiIsICJpbXBvcnQgeyBEUkFXX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcblxuaW1wb3J0IHR5cGUgeyBCTEVORF9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgdHlwZSB7IEJhdGNoVGV4dHVyZUFycmF5IH0gZnJvbSAnLi9CYXRjaFRleHR1cmVBcnJheSc7XG5cbi8qKlxuICogVXNlZCBieSB0aGUgYmF0Y2hlciB0byBkcmF3IGJhdGNoZXMuXG4gKiBFYWNoIG9uZSBvZiB0aGVzZSBjb250YWlucyBhbGwgaW5mb3JtYXRpb24gcmVxdWlyZWQgdG8gZHJhdyBhIGJvdW5kIGdlb21ldHJ5LlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEJhdGNoRHJhd0NhbGxcbntcbiAgICB0ZXhBcnJheTogQmF0Y2hUZXh0dXJlQXJyYXk7XG4gICAgdHlwZTogRFJBV19NT0RFUztcbiAgICBibGVuZDogQkxFTkRfTU9ERVM7XG4gICAgc3RhcnQ6IG51bWJlcjtcbiAgICBzaXplOiBudW1iZXI7XG4gICAgZGF0YTogYW55O1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgdGhpcy50ZXhBcnJheSA9IG51bGw7XG4gICAgICAgIHRoaXMuYmxlbmQgPSAwO1xuICAgICAgICB0aGlzLnR5cGUgPSBEUkFXX01PREVTLlRSSUFOR0xFUztcblxuICAgICAgICB0aGlzLnN0YXJ0ID0gMDtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGF0YSBmb3IgdW5pZm9ybXMgb3IgY3VzdG9tIHdlYmdsIHN0YXRlXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgQmFzZVRleHR1cmUgfSBmcm9tICdAcGl4aS9jb3JlJztcblxuLyoqXG4gKiBVc2VkIGJ5IHRoZSBiYXRjaGVyIHRvIGJ1aWxkIHRleHR1cmUgYmF0Y2hlcy5cbiAqIEhvbGRzIGxpc3Qgb2YgdGV4dHVyZXMgYW5kIHRoZWlyIHJlc3BlY3RpdmUgbG9jYXRpb25zLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEJhdGNoVGV4dHVyZUFycmF5XG57XG4gICAgcHVibGljIGVsZW1lbnRzOiBCYXNlVGV4dHVyZVtdO1xuICAgIHB1YmxpYyBpZHM6IG51bWJlcltdO1xuICAgIHB1YmxpYyBjb3VudDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGluc2lkZSB0ZXh0dXJlcyBhcnJheVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkJhc2VUZXh0dXJlW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXNwZWN0aXZlIGxvY2F0aW9ucyBmb3IgdGV4dHVyZXNcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlkcyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogbnVtYmVyIG9mIGZpbGxlZCBlbGVtZW50c1xuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG5cbiAgICBjbGVhcigpOiB2b2lkXG4gICAge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY291bnQ7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgSVR5cGVkQXJyYXkgfSBmcm9tICcuL0J1ZmZlcic7XG5cbi8qKlxuICogRmxleGlibGUgd3JhcHBlciBhcm91bmQgYEFycmF5QnVmZmVyYCB0aGF0IGFsc28gcHJvdmlkZXNcbiAqIHR5cGVkIGFycmF5IHZpZXdzIG9uIGRlbWFuZC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWV3YWJsZUJ1ZmZlclxue1xuICAgIHB1YmxpYyBzaXplOiBudW1iZXI7XG4gICAgcHVibGljIHJhd0JpbmFyeURhdGE6IEFycmF5QnVmZmVyO1xuICAgIHB1YmxpYyB1aW50MzJWaWV3OiBVaW50MzJBcnJheTtcbiAgICBwdWJsaWMgZmxvYXQzMlZpZXc6IEZsb2F0MzJBcnJheTtcblxuICAgIHByaXZhdGUgX2ludDhWaWV3OiBJbnQ4QXJyYXk7XG4gICAgcHJpdmF0ZSBfdWludDhWaWV3OiBVaW50OEFycmF5O1xuICAgIHByaXZhdGUgX2ludDE2VmlldzogSW50MTZBcnJheTtcbiAgICBwcml2YXRlIF91aW50MTZWaWV3OiBVaW50MTZBcnJheTtcbiAgICBwcml2YXRlIF9pbnQzMlZpZXc6IEludDMyQXJyYXk7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSAtIFRoZSBzaXplIG9mIHRoZSBidWZmZXIgaW4gYnl0ZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2l6ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuZGVybHlpbmcgYEFycmF5QnVmZmVyYCB0aGF0IGhvbGRzIGFsbCB0aGUgZGF0YVxuICAgICAgICAgKiBhbmQgaXMgb2YgY2FwYWNpdHkgYHNpemVgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheUJ1ZmZlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmF3QmluYXJ5RGF0YSA9IG5ldyBBcnJheUJ1ZmZlcihzaXplKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmlldyBvbiB0aGUgcmF3IGJpbmFyeSBkYXRhIGFzIGEgYFVpbnQzMkFycmF5YC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7VWludDMyQXJyYXl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVpbnQzMlZpZXcgPSBuZXcgVWludDMyQXJyYXkodGhpcy5yYXdCaW5hcnlEYXRhKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmlldyBvbiB0aGUgcmF3IGJpbmFyeSBkYXRhIGFzIGEgYEZsb2F0MzJBcnJheWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge0Zsb2F0MzJBcnJheX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmxvYXQzMlZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMucmF3QmluYXJ5RGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmlldyBvbiB0aGUgcmF3IGJpbmFyeSBkYXRhIGFzIGEgYEludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtJbnQ4QXJyYXl9XG4gICAgICovXG4gICAgZ2V0IGludDhWaWV3KCk6IEludDhBcnJheVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbnQ4VmlldylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5faW50OFZpZXcgPSBuZXcgSW50OEFycmF5KHRoaXMucmF3QmluYXJ5RGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5faW50OFZpZXc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmlldyBvbiB0aGUgcmF3IGJpbmFyeSBkYXRhIGFzIGEgYFVpbnQ4QXJyYXlgLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7VWludDhBcnJheX1cbiAgICAgKi9cbiAgICBnZXQgdWludDhWaWV3KCk6IFVpbnQ4QXJyYXlcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5fdWludDhWaWV3KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl91aW50OFZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLnJhd0JpbmFyeURhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3VpbnQ4VmlldztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWaWV3IG9uIHRoZSByYXcgYmluYXJ5IGRhdGEgYXMgYSBgSW50MTZBcnJheWAuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtJbnQxNkFycmF5fVxuICAgICAqL1xuICAgIGdldCBpbnQxNlZpZXcoKTogSW50MTZBcnJheVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbnQxNlZpZXcpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2ludDE2VmlldyA9IG5ldyBJbnQxNkFycmF5KHRoaXMucmF3QmluYXJ5RGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5faW50MTZWaWV3O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZpZXcgb24gdGhlIHJhdyBiaW5hcnkgZGF0YSBhcyBhIGBVaW50MTZBcnJheWAuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtVaW50MTZBcnJheX1cbiAgICAgKi9cbiAgICBnZXQgdWludDE2VmlldygpOiBVaW50MTZBcnJheVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLl91aW50MTZWaWV3KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl91aW50MTZWaWV3ID0gbmV3IFVpbnQxNkFycmF5KHRoaXMucmF3QmluYXJ5RGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fdWludDE2VmlldztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWaWV3IG9uIHRoZSByYXcgYmluYXJ5IGRhdGEgYXMgYSBgSW50MzJBcnJheWAuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtJbnQzMkFycmF5fVxuICAgICAqL1xuICAgIGdldCBpbnQzMlZpZXcoKTogSW50MzJBcnJheVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbnQzMlZpZXcpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2ludDMyVmlldyA9IG5ldyBJbnQzMkFycmF5KHRoaXMucmF3QmluYXJ5RGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5faW50MzJWaWV3O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZpZXcgb2YgdGhlIGdpdmVuIHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIE9uZSBvZiBgaW50OGAsIGB1aW50OGAsIGBpbnQxNmAsXG4gICAgICogICAgYHVpbnQxNmAsIGBpbnQzMmAsIGB1aW50MzJgLCBhbmQgYGZsb2F0MzJgLlxuICAgICAqIEByZXR1cm4ge29iamVjdH0gdHlwZWQgYXJyYXkgb2YgZ2l2ZW4gdHlwZVxuICAgICAqL1xuICAgIHZpZXcodHlwZTogc3RyaW5nKTogSVR5cGVkQXJyYXlcbiAgICB7XG4gICAgICAgIHJldHVybiAodGhpcyBhcyBhbnkpW2Ake3R5cGV9Vmlld2BdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIGFsbCBidWZmZXIgcmVmZXJlbmNlcy4gRG8gbm90IHVzZSBhZnRlciBjYWxsaW5nXG4gICAgICogdGhpcy5cbiAgICAgKi9cbiAgICBkZXN0cm95KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMucmF3QmluYXJ5RGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2ludDhWaWV3ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdWludDhWaWV3ID0gbnVsbDtcbiAgICAgICAgdGhpcy5faW50MTZWaWV3ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdWludDE2VmlldyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2ludDMyVmlldyA9IG51bGw7XG4gICAgICAgIHRoaXMudWludDMyVmlldyA9IG51bGw7XG4gICAgICAgIHRoaXMuZmxvYXQzMlZpZXcgPSBudWxsO1xuICAgIH1cblxuICAgIHN0YXRpYyBzaXplT2YodHlwZTogc3RyaW5nKTogbnVtYmVyXG4gICAge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludDgnOlxuICAgICAgICAgICAgY2FzZSAndWludDgnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgY2FzZSAnaW50MTYnOlxuICAgICAgICAgICAgY2FzZSAndWludDE2JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgIGNhc2UgJ2ludDMyJzpcbiAgICAgICAgICAgIGNhc2UgJ3VpbnQzMic6XG4gICAgICAgICAgICBjYXNlICdmbG9hdDMyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3R5cGV9IGlzbid0IGEgdmFsaWQgdmlldyB0eXBlYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQmF0Y2hEcmF3Q2FsbCB9IGZyb20gJy4vQmF0Y2hEcmF3Q2FsbCc7XG5pbXBvcnQgeyBCYXRjaFRleHR1cmVBcnJheSB9IGZyb20gJy4vQmF0Y2hUZXh0dXJlQXJyYXknO1xuaW1wb3J0IHsgQmFzZVRleHR1cmUgfSBmcm9tICcuLi90ZXh0dXJlcy9CYXNlVGV4dHVyZSc7XG5pbXBvcnQgeyBPYmplY3RSZW5kZXJlciB9IGZyb20gJy4vT2JqZWN0UmVuZGVyZXInO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9TdGF0ZSc7XG5pbXBvcnQgeyBWaWV3YWJsZUJ1ZmZlciB9IGZyb20gJy4uL2dlb21ldHJ5L1ZpZXdhYmxlQnVmZmVyJztcblxuaW1wb3J0IHsgY2hlY2tNYXhJZlN0YXRlbWVudHNJblNoYWRlciB9IGZyb20gJy4uL3NoYWRlci91dGlscy9jaGVja01heElmU3RhdGVtZW50c0luU2hhZGVyJztcblxuaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tICdAcGl4aS9zZXR0aW5ncyc7XG5pbXBvcnQgeyBwcmVtdWx0aXBseUJsZW5kTW9kZSwgcHJlbXVsdGlwbHlUaW50LCBuZXh0UG93MiwgbG9nMiB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IEVOViB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICcuLi9SZW5kZXJlcic7XG5pbXBvcnQgdHlwZSB7IFNoYWRlciB9IGZyb20gJy4uL3NoYWRlci9TaGFkZXInO1xuaW1wb3J0IHR5cGUgeyBCYXRjaFNoYWRlckdlbmVyYXRvciB9IGZyb20gJy4vQmF0Y2hTaGFkZXJHZW5lcmF0b3InO1xuaW1wb3J0IHR5cGUgeyBCYXRjaEdlb21ldHJ5IH0gZnJvbSAnLi9CYXRjaEdlb21ldHJ5JztcbmltcG9ydCB0eXBlIHsgVGV4dHVyZSB9IGZyb20gJy4uL3RleHR1cmVzL1RleHR1cmUnO1xuaW1wb3J0IHR5cGUgeyBCTEVORF9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBlbGVtZW50cyBsaWtlIFNwcml0ZSwgTWVzaCBldGMuIGZvciBiYXRjaGluZy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQmF0Y2hhYmxlRWxlbWVudCB7XG4gICAgX3RleHR1cmU6IFRleHR1cmU7XG4gICAgdmVydGV4RGF0YTogRmxvYXQzMkFycmF5O1xuICAgIGluZGljZXM6IFVpbnQxNkFycmF5IHwgVWludDMyQXJyYXkgfCBBcnJheTxudW1iZXI+O1xuICAgIHV2czogRmxvYXQzMkFycmF5O1xuICAgIHdvcmxkQWxwaGE6IG51bWJlcjtcbiAgICBfdGludFJHQjogbnVtYmVyO1xuICAgIGJsZW5kTW9kZTogQkxFTkRfTU9ERVM7XG59XG5cbi8qKlxuICogUmVuZGVyZXIgZGVkaWNhdGVkIHRvIGRyYXdpbmcgYW5kIGJhdGNoaW5nIHNwcml0ZXMuXG4gKlxuICogVGhpcyBpcyB0aGUgZGVmYXVsdCBiYXRjaCByZW5kZXJlci4gSXQgYnVmZmVycyBvYmplY3RzXG4gKiB3aXRoIHRleHR1cmUtYmFzZWQgZ2VvbWV0cmllcyBhbmQgcmVuZGVycyB0aGVtIGluXG4gKiBiYXRjaGVzLiBJdCB1cGxvYWRzIG11bHRpcGxlIHRleHR1cmVzIHRvIHRoZSBHUFUgdG9cbiAqIHJlZHVjZSB0byB0aGUgbnVtYmVyIG9mIGRyYXcgY2FsbHMuXG4gKlxuICogQGNsYXNzXG4gKiBAcHJvdGVjdGVkXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQGV4dGVuZHMgUElYSS5PYmplY3RSZW5kZXJlclxuICovXG5leHBvcnQgY2xhc3MgQWJzdHJhY3RCYXRjaFJlbmRlcmVyIGV4dGVuZHMgT2JqZWN0UmVuZGVyZXJcbntcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3RhdGU6IFN0YXRlO1xuICAgIHB1YmxpYyBzaXplOiBudW1iZXI7XG4gICAgcHVibGljIE1BWF9URVhUVVJFUzogbnVtYmVyO1xuXG4gICAgcHJvdGVjdGVkIHNoYWRlckdlbmVyYXRvcjogQmF0Y2hTaGFkZXJHZW5lcmF0b3I7XG4gICAgcHJvdGVjdGVkIGdlb21ldHJ5Q2xhc3M6IHR5cGVvZiBCYXRjaEdlb21ldHJ5O1xuICAgIHByb3RlY3RlZCB2ZXJ0ZXhTaXplOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF92ZXJ0ZXhDb3VudDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfaW5kZXhDb3VudDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfYnVmZmVyZWRFbGVtZW50czogQXJyYXk8SUJhdGNoYWJsZUVsZW1lbnQ+O1xuICAgIHByb3RlY3RlZCBfYnVmZmVyZWRUZXh0dXJlczogQXJyYXk8QmFzZVRleHR1cmU+O1xuICAgIHByb3RlY3RlZCBfYnVmZmVyU2l6ZTogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfc2hhZGVyOiBTaGFkZXI7XG4gICAgcHJvdGVjdGVkIF9mbHVzaElkOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9hQnVmZmVyczogQXJyYXk8Vmlld2FibGVCdWZmZXI+O1xuICAgIHByb3RlY3RlZCBfaUJ1ZmZlcnM6IEFycmF5PFVpbnQxNkFycmF5PjtcbiAgICBwcm90ZWN0ZWQgX2RjSW5kZXg6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2FJbmRleDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfaUluZGV4OiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9hdHRyaWJ1dGVCdWZmZXI6IFZpZXdhYmxlQnVmZmVyO1xuICAgIHByb3RlY3RlZCBfaW5kZXhCdWZmZXI6IFVpbnQxNkFycmF5O1xuICAgIHByb3RlY3RlZCBfdGVtcEJvdW5kVGV4dHVyZXM6IEJhc2VUZXh0dXJlW107XG5cbiAgICBwcml2YXRlIF9wYWNrZWRHZW9tZXRyaWVzOiBBcnJheTxCYXRjaEdlb21ldHJ5PjtcbiAgICBwcml2YXRlIF9wYWNrZWRHZW9tZXRyeVBvb2xTaXplOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHdpbGwgaG9vayBvbnRvIHRoZSByZW5kZXJlcidzIGBjb250ZXh0Q2hhbmdlYFxuICAgICAqIGFuZCBgcHJlcmVuZGVyYCBzaWduYWxzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogUmVuZGVyZXIpXG4gICAge1xuICAgICAgICBzdXBlcihyZW5kZXJlcik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgdXNlZCB0byBnZW5lcmF0ZSBhIHNoYWRlciB0aGF0IGNhblxuICAgICAgICAgKiBjb2xvciBlYWNoIHZlcnRleCBiYXNlZCBvbiBhIGBhVGV4dHVyZUlkYFxuICAgICAgICAgKiBhdHRyaWJ1dGUgdGhhdCBwb2ludHMgdG8gYW4gdGV4dHVyZSBpbiBgdVNhbXBsZXJgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGVuYWJsZXMgdGhlIG9iamVjdHMgd2l0aCBkaWZmZXJlbnQgdGV4dHVyZXNcbiAgICAgICAgICogdG8gYmUgZHJhd24gaW4gdGhlIHNhbWUgZHJhdyBjYWxsLlxuICAgICAgICAgKlxuICAgICAgICAgKiBZb3UgY2FuIGN1c3RvbWl6ZSB5b3VyIHNoYWRlciBieSBjcmVhdGluZyB5b3VyXG4gICAgICAgICAqIGN1c3RvbSBzaGFkZXIgZ2VuZXJhdG9yLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkJhdGNoU2hhZGVyR2VuZXJhdG9yfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNoYWRlckdlbmVyYXRvciA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgdGhlIGdlb21ldHJ5IG9mIG9iamVjdHNcbiAgICAgICAgICogdGhhdCBhcmUgZ29pbmcgdG8gYmUgYmF0Y2hlZCB3aXRoIHRoaXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdH1cbiAgICAgICAgICogQGRlZmF1bHQgUElYSS5CYXRjaEdlb21ldHJ5XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2VvbWV0cnlDbGFzcyA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNpemUgb2YgZGF0YSBiZWluZyBidWZmZXJlZCBwZXIgdmVydGV4IGluIHRoZVxuICAgICAgICAgKiBhdHRyaWJ1dGUgYnVmZmVycyAoaW4gZmxvYXRzKS4gQnkgZGVmYXVsdCwgdGhlXG4gICAgICAgICAqIGJhdGNoLXJlbmRlcmVyIHBsdWdpbiB1c2VzIDY6XG4gICAgICAgICAqXG4gICAgICAgICAqIHwgYVZlcnRleFBvc2l0aW9uIHwgMiB8XG4gICAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLXwtLS18XG4gICAgICAgICAqIHwgYVRleHR1cmVDb29yZHMgIHwgMiB8XG4gICAgICAgICAqIHwgYUNvbG9yICAgICAgICAgIHwgMSB8XG4gICAgICAgICAqIHwgYVRleHR1cmVJZCAgICAgIHwgMSB8XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZlcnRleFNpemUgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgV2ViR0wgc3RhdGUgaW4gd2hpY2ggdGhpcyByZW5kZXJlciB3aWxsIHdvcmsuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuU3RhdGV9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLmZvcjJkKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgYnVmZmVyYWJsZSBvYmplY3RzIGJlZm9yZSBhIGZsdXNoXG4gICAgICAgICAqIG9jY3VycyBhdXRvbWF0aWNhbGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IHNldHRpbmdzLlNQUklURV9CQVRDSF9TSVpFICogNFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gc2V0dGluZ3MuU1BSSVRFX0JBVENIX1NJWkUgKiA0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUb3RhbCBjb3VudCBvZiBhbGwgdmVydGljZXMgdXNlZCBieSB0aGUgY3VycmVudGx5XG4gICAgICAgICAqIGJ1ZmZlcmVkIG9iamVjdHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3ZlcnRleENvdW50ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVG90YWwgY291bnQgb2YgYWxsIGluZGljZXMgdXNlZCBieSB0aGUgY3VycmVudGx5XG4gICAgICAgICAqIGJ1ZmZlcmVkIG9iamVjdHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2luZGV4Q291bnQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCdWZmZXIgb2Ygb2JqZWN0cyB0aGF0IGFyZSB5ZXQgdG8gYmUgcmVuZGVyZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuRGlzcGxheU9iamVjdFtdfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYnVmZmVyZWRFbGVtZW50cyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEYXRhIGZvciB0ZXh0dXJlIGJhdGNoIGJ1aWxkZXIsIGhlbHBzIHRvIHNhdmUgYSBiaXQgb2YgQ1BVIG9uIGEgcGFzcy5cbiAgICAgICAgICogQHR5cGUge1BJWEkuQmFzZVRleHR1cmVbXX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2J1ZmZlcmVkVGV4dHVyZXMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTnVtYmVyIG9mIGVsZW1lbnRzIHRoYXQgYXJlIGJ1ZmZlcmVkIGFuZCBhcmVcbiAgICAgICAgICogd2FpdGluZyB0byBiZSBmbHVzaGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9idWZmZXJTaXplID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBzaGFkZXIgaXMgZ2VuZXJhdGVkIGJ5IGB0aGlzLnNoYWRlckdlbmVyYXRvcmAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEl0IGlzIGdlbmVyYXRlZCBzcGVjaWZpY2FsbHkgdG8gaGFuZGxlIHRoZSByZXF1aXJlZFxuICAgICAgICAgKiBudW1iZXIgb2YgdGV4dHVyZXMgYmVpbmcgYmF0Y2hlZCB0b2dldGhlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5TaGFkZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3NoYWRlciA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvb2wgb2YgYHRoaXMuZ2VvbWV0cnlDbGFzc2AgZ2VvbWV0cnkgb2JqZWN0c1xuICAgICAgICAgKiB0aGF0IHN0b3JlIGJ1ZmZlcnMuIFRoZXkgYXJlIHVzZWQgdG8gcGFzcyBkYXRhXG4gICAgICAgICAqIHRvIHRoZSBzaGFkZXIgb24gZWFjaCBkcmF3IGNhbGwuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIGFyZSBuZXZlciByZS1hbGxvY2F0ZWQgYWdhaW4sIHVubGVzcyBhXG4gICAgICAgICAqIGNvbnRleHQgY2hhbmdlIG9jY3VyczsgaG93ZXZlciwgdGhlIHBvb2wgbWF5XG4gICAgICAgICAqIGJlIGV4cGFuZGVkIGlmIHJlcXVpcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkdlb21ldHJ5W119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBzZWUgUElYSS5BYnN0cmFjdEJhdGNoUmVuZGVyZXIuY29udGV4dENoYW5nZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcGFja2VkR2VvbWV0cmllcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaXplIG9mIGB0aGlzLl9wYWNrZWRHZW9tZXRyaWVzYC4gSXQgY2FuIGJlIGV4cGFuZGVkXG4gICAgICAgICAqIGlmIG1vcmUgdGhhbiBgdGhpcy5fcGFja2VkR2VvbWV0cnlQb29sU2l6ZWAgZmx1c2hlc1xuICAgICAgICAgKiBvY2N1ciBpbiBhIHNpbmdsZSBmcmFtZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcGFja2VkR2VvbWV0cnlQb29sU2l6ZSA9IDI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmx1c2ggbWF5IG9jY3VyIG11bHRpcGxlIHRpbWVzIGluIGEgc2luZ2xlXG4gICAgICAgICAqIGZyYW1lLiBPbiBpT1MgZGV2aWNlcyBvciB3aGVuXG4gICAgICAgICAqIGBzZXR0aW5ncy5DQU5fVVBMT0FEX1NBTUVfQlVGRkVSYCBpcyBmYWxzZSwgdGhlXG4gICAgICAgICAqIGJhdGNoIHJlbmRlcmVyIGRvZXMgbm90IHVwbG9hZCBkYXRhIHRvIHRoZSBzYW1lXG4gICAgICAgICAqIGBXZWJHTEJ1ZmZlcmAgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgdGhlIGluZGV4IGludG8gYHBhY2tlZEdlb21ldHJpZXNgIHRoYXQgcG9pbnRzIHRvXG4gICAgICAgICAqIGdlb21ldHJ5IGhvbGRpbmcgdGhlIG1vc3QgcmVjZW50IGJ1ZmZlcnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2ZsdXNoSWQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQb29sIG9mIGBWaWV3YWJsZUJ1ZmZlcmAgb2JqZWN0cyB0aGF0IGFyZSBzb3J0ZWQgaW5cbiAgICAgICAgICogb3JkZXIgb2YgaW5jcmVhc2luZyBzaXplLiBUaGUgZmx1c2ggbWV0aG9kIHVzZXNcbiAgICAgICAgICogdGhlIGJ1ZmZlciB3aXRoIHRoZSBsZWFzdCBzaXplIGFib3ZlIHRoZSBhbW91bnRcbiAgICAgICAgICogaXQgcmVxdWlyZXMuIFRoZXNlIGFyZSB1c2VkIGZvciBwYXNzaW5nIGF0dHJpYnV0ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBmaXJzdCBidWZmZXIgaGFzIGEgc2l6ZSBvZiA4OyBlYWNoIHN1YnNlcXVlbnRcbiAgICAgICAgICogYnVmZmVyIGhhcyBkb3VibGUgY2FwYWNpdHkgb2YgaXRzIHByZXZpb3VzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlZpZXdhYmxlQnVmZmVyW119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBzZWUgUElYSS5BYnN0cmFjdEJhdGNoUmVuZGVyZXIjZ2V0QXR0cmlidXRlQnVmZmVyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9hQnVmZmVycyA9IHt9IGFzIGFueTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUG9vbCBvZiBgVWludDE2QXJyYXlgIG9iamVjdHMgdGhhdCBhcmUgc29ydGVkIGluXG4gICAgICAgICAqIG9yZGVyIG9mIGluY3JlYXNpbmcgc2l6ZS4gVGhlIGZsdXNoIG1ldGhvZCB1c2VzXG4gICAgICAgICAqIHRoZSBidWZmZXIgd2l0aCB0aGUgbGVhc3Qgc2l6ZSBhYm92ZSB0aGUgYW1vdW50XG4gICAgICAgICAqIGl0IHJlcXVpcmVzLiBUaGVzZSBhcmUgdXNlZCBmb3IgcGFzc2luZyBpbmRpY2VzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgZmlyc3QgYnVmZmVyIGhhcyBhIHNpemUgb2YgMTI7IGVhY2ggc3Vic2VxdWVudFxuICAgICAgICAgKiBidWZmZXIgaGFzIGRvdWJsZSBjYXBhY2l0eSBvZiBpdHMgcHJldmlvdXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1VpbnQxNkFycmF5W119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBzZWUgUElYSS5BYnN0cmFjdEJhdGNoUmVuZGVyZXIjZ2V0SW5kZXhCdWZmZXJcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2lCdWZmZXJzID0ge30gYXMgYW55O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXhpbXVtIG51bWJlciBvZiB0ZXh0dXJlcyB0aGF0IGNhbiBiZSB1cGxvYWRlZCB0b1xuICAgICAgICAgKiB0aGUgR1BVIHVuZGVyIHRoZSBjdXJyZW50IGNvbnRleHQuIEl0IGlzIGluaXRpYWxpemVkXG4gICAgICAgICAqIHByb3Blcmx5IGluIGB0aGlzLmNvbnRleHRDaGFuZ2VgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBzZWUgUElYSS5BYnN0cmFjdEJhdGNoUmVuZGVyZXIjY29udGV4dENoYW5nZVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTUFYX1RFWFRVUkVTID0gMTtcblxuICAgICAgICB0aGlzLnJlbmRlcmVyLm9uKCdwcmVyZW5kZXInLCB0aGlzLm9uUHJlcmVuZGVyLCB0aGlzKTtcbiAgICAgICAgcmVuZGVyZXIucnVubmVycy5jb250ZXh0Q2hhbmdlLmFkZCh0aGlzKTtcblxuICAgICAgICB0aGlzLl9kY0luZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fYUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5faUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlQnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5faW5kZXhCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl90ZW1wQm91bmRUZXh0dXJlcyA9IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIGBjb250ZXh0Q2hhbmdlYCBzaWduYWwuXG4gICAgICpcbiAgICAgKiBJdCBjYWxjdWxhdGVzIGB0aGlzLk1BWF9URVhUVVJFU2AgYW5kIGFsbG9jYXRpbmcgdGhlXG4gICAgICogcGFja2VkLWdlb21ldHJ5IG9iamVjdCBwb29sLlxuICAgICAqL1xuICAgIGNvbnRleHRDaGFuZ2UoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdsO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5QUkVGRVJfRU5WID09PSBFTlYuV0VCR0xfTEVHQUNZKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLk1BWF9URVhUVVJFUyA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBzdGVwIDE6IGZpcnN0IGNoZWNrIG1heCB0ZXh0dXJlcyB0aGUgR1BVIGNhbiBoYW5kbGUuXG4gICAgICAgICAgICB0aGlzLk1BWF9URVhUVVJFUyA9IE1hdGgubWluKFxuICAgICAgICAgICAgICAgIGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyksXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuU1BSSVRFX01BWF9URVhUVVJFUyk7XG5cbiAgICAgICAgICAgIC8vIHN0ZXAgMjogY2hlY2sgdGhlIG1heGltdW0gbnVtYmVyIG9mIGlmIHN0YXRlbWVudHMgdGhlIHNoYWRlciBjYW4gaGF2ZSB0b28uLlxuICAgICAgICAgICAgdGhpcy5NQVhfVEVYVFVSRVMgPSBjaGVja01heElmU3RhdGVtZW50c0luU2hhZGVyKFxuICAgICAgICAgICAgICAgIHRoaXMuTUFYX1RFWFRVUkVTLCBnbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zaGFkZXIgPSB0aGlzLnNoYWRlckdlbmVyYXRvci5nZW5lcmF0ZVNoYWRlcih0aGlzLk1BWF9URVhUVVJFUyk7XG5cbiAgICAgICAgLy8gd2UgdXNlIHRoZSBzZWNvbmQgc2hhZGVyIGFzIHRoZSBmaXJzdCBvbmUgZGVwZW5kaW5nIG9uIHlvdXIgYnJvd3NlclxuICAgICAgICAvLyBtYXkgb21pdCBhVGV4dHVyZUlkIGFzIGl0IGlzIG5vdCB1c2VkIGJ5IHRoZSBzaGFkZXIgc28gaXMgb3B0aW1pemVkIG91dC5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9wYWNrZWRHZW9tZXRyeVBvb2xTaXplOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbiAgICAgICAgICAgIHRoaXMuX3BhY2tlZEdlb21ldHJpZXNbaV0gPSBuZXcgKHRoaXMuZ2VvbWV0cnlDbGFzcykoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5pdEZsdXNoQnVmZmVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2VzIHN1cmUgdGhhdCBzdGF0aWMgYW5kIGR5bmFtaWMgZmx1c2ggcG9vbGVkIG9iamVjdHMgaGF2ZSBjb3JyZWN0IGRpbWVuc2lvbnNcbiAgICAgKi9cbiAgICBpbml0Rmx1c2hCdWZmZXJzKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIF9kcmF3Q2FsbFBvb2wsXG4gICAgICAgICAgICBfdGV4dHVyZUFycmF5UG9vbCxcbiAgICAgICAgfSA9IEFic3RyYWN0QmF0Y2hSZW5kZXJlcjtcbiAgICAgICAgLy8gbWF4IGRyYXcgY2FsbHNcbiAgICAgICAgY29uc3QgTUFYX1NQUklURVMgPSB0aGlzLnNpemUgLyA0O1xuICAgICAgICAvLyBtYXggdGV4dHVyZSBhcnJheXNcbiAgICAgICAgY29uc3QgTUFYX1RBID0gTWF0aC5mbG9vcihNQVhfU1BSSVRFUyAvIHRoaXMuTUFYX1RFWFRVUkVTKSArIDE7XG5cbiAgICAgICAgd2hpbGUgKF9kcmF3Q2FsbFBvb2wubGVuZ3RoIDwgTUFYX1NQUklURVMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIF9kcmF3Q2FsbFBvb2wucHVzaChuZXcgQmF0Y2hEcmF3Q2FsbCgpKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoX3RleHR1cmVBcnJheVBvb2wubGVuZ3RoIDwgTUFYX1RBKVxuICAgICAgICB7XG4gICAgICAgICAgICBfdGV4dHVyZUFycmF5UG9vbC5wdXNoKG5ldyBCYXRjaFRleHR1cmVBcnJheSgpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuTUFYX1RFWFRVUkVTOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3RlbXBCb3VuZFRleHR1cmVzW2ldID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIGBwcmVyZW5kZXJgIHNpZ25hbC5cbiAgICAgKlxuICAgICAqIEl0IGVuc3VyZXMgdGhhdCBmbHVzaGVzIHN0YXJ0IGZyb20gdGhlIGZpcnN0IGdlb21ldHJ5XG4gICAgICogb2JqZWN0IGFnYWluLlxuICAgICAqL1xuICAgIG9uUHJlcmVuZGVyKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX2ZsdXNoSWQgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgdGhlIFwiYmF0Y2hhYmxlXCIgb2JqZWN0LiBJdCBuZWVkIG5vdCBiZSByZW5kZXJlZFxuICAgICAqIGltbWVkaWF0ZWx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IGVsZW1lbnQgLSB0aGUgZWxlbWVudCB0byByZW5kZXIgd2hlblxuICAgICAqICAgIHVzaW5nIHRoaXMgcmVuZGVyZXJcbiAgICAgKi9cbiAgICByZW5kZXIoZWxlbWVudDogSUJhdGNoYWJsZUVsZW1lbnQpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIWVsZW1lbnQuX3RleHR1cmUudmFsaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl92ZXJ0ZXhDb3VudCArIChlbGVtZW50LnZlcnRleERhdGEubGVuZ3RoIC8gMikgPiB0aGlzLnNpemUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3ZlcnRleENvdW50ICs9IGVsZW1lbnQudmVydGV4RGF0YS5sZW5ndGggLyAyO1xuICAgICAgICB0aGlzLl9pbmRleENvdW50ICs9IGVsZW1lbnQuaW5kaWNlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX2J1ZmZlcmVkVGV4dHVyZXNbdGhpcy5fYnVmZmVyU2l6ZV0gPSBlbGVtZW50Ll90ZXh0dXJlLmJhc2VUZXh0dXJlO1xuICAgICAgICB0aGlzLl9idWZmZXJlZEVsZW1lbnRzW3RoaXMuX2J1ZmZlclNpemUrK10gPSBlbGVtZW50O1xuICAgIH1cblxuICAgIGJ1aWxkVGV4dHVyZXNBbmREcmF3Q2FsbHMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgX2J1ZmZlcmVkVGV4dHVyZXM6IHRleHR1cmVzLFxuICAgICAgICAgICAgTUFYX1RFWFRVUkVTLFxuICAgICAgICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgdGV4dHVyZUFycmF5cyA9IEFic3RyYWN0QmF0Y2hSZW5kZXJlci5fdGV4dHVyZUFycmF5UG9vbDtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB0aGlzLnJlbmRlcmVyLmJhdGNoO1xuICAgICAgICBjb25zdCBib3VuZFRleHR1cmVzID0gdGhpcy5fdGVtcEJvdW5kVGV4dHVyZXM7XG4gICAgICAgIGNvbnN0IHRvdWNoID0gdGhpcy5yZW5kZXJlci50ZXh0dXJlR0MuY291bnQ7XG5cbiAgICAgICAgbGV0IFRJQ0sgPSArK0Jhc2VUZXh0dXJlLl9nbG9iYWxCYXRjaDtcbiAgICAgICAgbGV0IGNvdW50VGV4QXJyYXlzID0gMDtcbiAgICAgICAgbGV0IHRleEFycmF5ID0gdGV4dHVyZUFycmF5c1swXTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gMDtcblxuICAgICAgICBiYXRjaC5jb3B5Qm91bmRUZXh0dXJlcyhib3VuZFRleHR1cmVzLCBNQVhfVEVYVFVSRVMpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fYnVmZmVyU2l6ZTsgKytpKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ZXggPSB0ZXh0dXJlc1tpXTtcblxuICAgICAgICAgICAgdGV4dHVyZXNbaV0gPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRleC5fYmF0Y2hFbmFibGVkID09PSBUSUNLKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGV4QXJyYXkuY291bnQgPj0gTUFYX1RFWFRVUkVTKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJhdGNoLmJvdW5kQXJyYXkodGV4QXJyYXksIGJvdW5kVGV4dHVyZXMsIFRJQ0ssIE1BWF9URVhUVVJFUyk7XG4gICAgICAgICAgICAgICAgdGhpcy5idWlsZERyYXdDYWxscyh0ZXhBcnJheSwgc3RhcnQsIGkpO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gaTtcbiAgICAgICAgICAgICAgICB0ZXhBcnJheSA9IHRleHR1cmVBcnJheXNbKytjb3VudFRleEFycmF5c107XG4gICAgICAgICAgICAgICAgKytUSUNLO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZXguX2JhdGNoRW5hYmxlZCA9IFRJQ0s7XG4gICAgICAgICAgICB0ZXgudG91Y2hlZCA9IHRvdWNoO1xuICAgICAgICAgICAgdGV4QXJyYXkuZWxlbWVudHNbdGV4QXJyYXkuY291bnQrK10gPSB0ZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4QXJyYXkuY291bnQgPiAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBiYXRjaC5ib3VuZEFycmF5KHRleEFycmF5LCBib3VuZFRleHR1cmVzLCBUSUNLLCBNQVhfVEVYVFVSRVMpO1xuICAgICAgICAgICAgdGhpcy5idWlsZERyYXdDYWxscyh0ZXhBcnJheSwgc3RhcnQsIHRoaXMuX2J1ZmZlclNpemUpO1xuICAgICAgICAgICAgKytjb3VudFRleEFycmF5cztcbiAgICAgICAgICAgICsrVElDSztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsZWFuLXVwXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib3VuZFRleHR1cmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBib3VuZFRleHR1cmVzW2ldID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBCYXNlVGV4dHVyZS5fZ2xvYmFsQmF0Y2ggPSBUSUNLO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvcHVsYXRpbmcgZHJhd2NhbGxzIGZvciByZW5kZXJpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5CYXRjaFRleHR1cmVBcnJheX0gdGV4QXJyYXlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZmluaXNoXG4gICAgICovXG4gICAgYnVpbGREcmF3Q2FsbHModGV4QXJyYXk6IEJhdGNoVGV4dHVyZUFycmF5LCBzdGFydDogbnVtYmVyLCBmaW5pc2g6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIF9idWZmZXJlZEVsZW1lbnRzOiBlbGVtZW50cyxcbiAgICAgICAgICAgIF9hdHRyaWJ1dGVCdWZmZXIsXG4gICAgICAgICAgICBfaW5kZXhCdWZmZXIsXG4gICAgICAgICAgICB2ZXJ0ZXhTaXplLFxuICAgICAgICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgZHJhd0NhbGxzID0gQWJzdHJhY3RCYXRjaFJlbmRlcmVyLl9kcmF3Q2FsbFBvb2w7XG5cbiAgICAgICAgbGV0IGRjSW5kZXggPSB0aGlzLl9kY0luZGV4O1xuICAgICAgICBsZXQgYUluZGV4ID0gdGhpcy5fYUluZGV4O1xuICAgICAgICBsZXQgaUluZGV4ID0gdGhpcy5faUluZGV4O1xuXG4gICAgICAgIGxldCBkcmF3Q2FsbCA9IGRyYXdDYWxsc1tkY0luZGV4XTtcblxuICAgICAgICBkcmF3Q2FsbC5zdGFydCA9IHRoaXMuX2lJbmRleDtcbiAgICAgICAgZHJhd0NhbGwudGV4QXJyYXkgPSB0ZXhBcnJheTtcblxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBmaW5pc2g7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgICBjb25zdCB0ZXggPSBzcHJpdGUuX3RleHR1cmUuYmFzZVRleHR1cmU7XG4gICAgICAgICAgICBjb25zdCBzcHJpdGVCbGVuZE1vZGUgPSBwcmVtdWx0aXBseUJsZW5kTW9kZVtcbiAgICAgICAgICAgICAgICB0ZXguYWxwaGFNb2RlID8gMSA6IDBdW3Nwcml0ZS5ibGVuZE1vZGVdO1xuXG4gICAgICAgICAgICBlbGVtZW50c1tpXSA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChzdGFydCA8IGkgJiYgZHJhd0NhbGwuYmxlbmQgIT09IHNwcml0ZUJsZW5kTW9kZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkcmF3Q2FsbC5zaXplID0gaUluZGV4IC0gZHJhd0NhbGwuc3RhcnQ7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBpO1xuICAgICAgICAgICAgICAgIGRyYXdDYWxsID0gZHJhd0NhbGxzWysrZGNJbmRleF07XG4gICAgICAgICAgICAgICAgZHJhd0NhbGwudGV4QXJyYXkgPSB0ZXhBcnJheTtcbiAgICAgICAgICAgICAgICBkcmF3Q2FsbC5zdGFydCA9IGlJbmRleDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYWNrSW50ZXJsZWF2ZWRHZW9tZXRyeShzcHJpdGUsIF9hdHRyaWJ1dGVCdWZmZXIsIF9pbmRleEJ1ZmZlciwgYUluZGV4LCBpSW5kZXgpO1xuICAgICAgICAgICAgYUluZGV4ICs9IHNwcml0ZS52ZXJ0ZXhEYXRhLmxlbmd0aCAvIDIgKiB2ZXJ0ZXhTaXplO1xuICAgICAgICAgICAgaUluZGV4ICs9IHNwcml0ZS5pbmRpY2VzLmxlbmd0aDtcblxuICAgICAgICAgICAgZHJhd0NhbGwuYmxlbmQgPSBzcHJpdGVCbGVuZE1vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RhcnQgPCBmaW5pc2gpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRyYXdDYWxsLnNpemUgPSBpSW5kZXggLSBkcmF3Q2FsbC5zdGFydDtcbiAgICAgICAgICAgICsrZGNJbmRleDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2RjSW5kZXggPSBkY0luZGV4O1xuICAgICAgICB0aGlzLl9hSW5kZXggPSBhSW5kZXg7XG4gICAgICAgIHRoaXMuX2lJbmRleCA9IGlJbmRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCaW5kIHRleHR1cmVzIGZvciBjdXJyZW50IHJlbmRlcmluZ1xuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkJhdGNoVGV4dHVyZUFycmF5fSB0ZXhBcnJheVxuICAgICAqL1xuICAgIGJpbmRBbmRDbGVhclRleEFycmF5KHRleEFycmF5OiBCYXRjaFRleHR1cmVBcnJheSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHRleHR1cmVTeXN0ZW0gPSB0aGlzLnJlbmRlcmVyLnRleHR1cmU7XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0ZXhBcnJheS5jb3VudDsgaisrKVxuICAgICAgICB7XG4gICAgICAgICAgICB0ZXh0dXJlU3lzdGVtLmJpbmQodGV4QXJyYXkuZWxlbWVudHNbal0sIHRleEFycmF5Lmlkc1tqXSk7XG4gICAgICAgICAgICB0ZXhBcnJheS5lbGVtZW50c1tqXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGV4QXJyYXkuY291bnQgPSAwO1xuICAgIH1cblxuICAgIHVwZGF0ZUdlb21ldHJ5KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIF9wYWNrZWRHZW9tZXRyaWVzOiBwYWNrZWRHZW9tZXRyaWVzLFxuICAgICAgICAgICAgX2F0dHJpYnV0ZUJ1ZmZlcjogYXR0cmlidXRlQnVmZmVyLFxuICAgICAgICAgICAgX2luZGV4QnVmZmVyOiBpbmRleEJ1ZmZlcixcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFzZXR0aW5ncy5DQU5fVVBMT0FEX1NBTUVfQlVGRkVSKVxuICAgICAgICB7IC8qIFVzdWFsbHkgb24gaU9TIGRldmljZXMsIHdoZXJlIHRoZSBicm93c2VyIGRvZXNuJ3RcbiAgICAgICAgICAgIGxpa2UgdXBsb2FkcyB0byB0aGUgc2FtZSBidWZmZXIgaW4gYSBzaW5nbGUgZnJhbWUuICovXG4gICAgICAgICAgICBpZiAodGhpcy5fcGFja2VkR2VvbWV0cnlQb29sU2l6ZSA8PSB0aGlzLl9mbHVzaElkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhY2tlZEdlb21ldHJ5UG9vbFNpemUrKztcbiAgICAgICAgICAgICAgICBwYWNrZWRHZW9tZXRyaWVzW3RoaXMuX2ZsdXNoSWRdID0gbmV3ICh0aGlzLmdlb21ldHJ5Q2xhc3MpKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhY2tlZEdlb21ldHJpZXNbdGhpcy5fZmx1c2hJZF0uX2J1ZmZlci51cGRhdGUoYXR0cmlidXRlQnVmZmVyLnJhd0JpbmFyeURhdGEpO1xuICAgICAgICAgICAgcGFja2VkR2VvbWV0cmllc1t0aGlzLl9mbHVzaElkXS5faW5kZXhCdWZmZXIudXBkYXRlKGluZGV4QnVmZmVyKTtcblxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5nZW9tZXRyeS5iaW5kKHBhY2tlZEdlb21ldHJpZXNbdGhpcy5fZmx1c2hJZF0pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5nZW9tZXRyeS51cGRhdGVCdWZmZXJzKCk7XG4gICAgICAgICAgICB0aGlzLl9mbHVzaElkKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBsZXRzIHVzZSB0aGUgZmFzdGVyIG9wdGlvbiwgYWx3YXlzIHVzZSBidWZmZXIgbnVtYmVyIDBcbiAgICAgICAgICAgIHBhY2tlZEdlb21ldHJpZXNbdGhpcy5fZmx1c2hJZF0uX2J1ZmZlci51cGRhdGUoYXR0cmlidXRlQnVmZmVyLnJhd0JpbmFyeURhdGEpO1xuICAgICAgICAgICAgcGFja2VkR2VvbWV0cmllc1t0aGlzLl9mbHVzaElkXS5faW5kZXhCdWZmZXIudXBkYXRlKGluZGV4QnVmZmVyKTtcblxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5nZW9tZXRyeS51cGRhdGVCdWZmZXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkcmF3QmF0Y2hlcygpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBkY0NvdW50ID0gdGhpcy5fZGNJbmRleDtcbiAgICAgICAgY29uc3QgeyBnbCwgc3RhdGU6IHN0YXRlU3lzdGVtIH0gPSB0aGlzLnJlbmRlcmVyO1xuICAgICAgICBjb25zdCBkcmF3Q2FsbHMgPSBBYnN0cmFjdEJhdGNoUmVuZGVyZXIuX2RyYXdDYWxsUG9vbDtcblxuICAgICAgICBsZXQgY3VyVGV4QXJyYXkgPSBudWxsO1xuXG4gICAgICAgIC8vIFVwbG9hZCB0ZXh0dXJlcyBhbmQgZG8gdGhlIGRyYXcgY2FsbHNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkY0NvdW50OyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdGV4QXJyYXksIHR5cGUsIHNpemUsIHN0YXJ0LCBibGVuZCB9ID0gZHJhd0NhbGxzW2ldO1xuXG4gICAgICAgICAgICBpZiAoY3VyVGV4QXJyYXkgIT09IHRleEFycmF5KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGN1clRleEFycmF5ID0gdGV4QXJyYXk7XG4gICAgICAgICAgICAgICAgdGhpcy5iaW5kQW5kQ2xlYXJUZXhBcnJheSh0ZXhBcnJheSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYmxlbmRNb2RlID0gYmxlbmQ7XG4gICAgICAgICAgICBzdGF0ZVN5c3RlbS5zZXQodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICBnbC5kcmF3RWxlbWVudHModHlwZSwgc2l6ZSwgZ2wuVU5TSUdORURfU0hPUlQsIHN0YXJ0ICogMik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIHRoZSBjb250ZW50IF9ub3dfIGFuZCBlbXB0aWVzIHRoZSBjdXJyZW50IGJhdGNoLlxuICAgICAqL1xuICAgIGZsdXNoKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl92ZXJ0ZXhDb3VudCA9PT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYXR0cmlidXRlQnVmZmVyID0gdGhpcy5nZXRBdHRyaWJ1dGVCdWZmZXIodGhpcy5fdmVydGV4Q291bnQpO1xuICAgICAgICB0aGlzLl9pbmRleEJ1ZmZlciA9IHRoaXMuZ2V0SW5kZXhCdWZmZXIodGhpcy5faW5kZXhDb3VudCk7XG4gICAgICAgIHRoaXMuX2FJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX2lJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX2RjSW5kZXggPSAwO1xuXG4gICAgICAgIHRoaXMuYnVpbGRUZXh0dXJlc0FuZERyYXdDYWxscygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUdlb21ldHJ5KCk7XG4gICAgICAgIHRoaXMuZHJhd0JhdGNoZXMoKTtcblxuICAgICAgICAvLyByZXNldCBlbGVtZW50cyBidWZmZXIgZm9yIHRoZSBuZXh0IGZsdXNoXG4gICAgICAgIHRoaXMuX2J1ZmZlclNpemUgPSAwO1xuICAgICAgICB0aGlzLl92ZXJ0ZXhDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuX2luZGV4Q291bnQgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBhIG5ldyBzcHJpdGUgYmF0Y2guXG4gICAgICovXG4gICAgc3RhcnQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zdGF0ZS5zZXQodGhpcy5zdGF0ZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJlci5zaGFkZXIuYmluZCh0aGlzLl9zaGFkZXIpO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5DQU5fVVBMT0FEX1NBTUVfQlVGRkVSKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBiaW5kIGJ1ZmZlciAjMCwgd2UgZG9uJ3QgbmVlZCBvdGhlcnNcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuZ2VvbWV0cnkuYmluZCh0aGlzLl9wYWNrZWRHZW9tZXRyaWVzW3RoaXMuX2ZsdXNoSWRdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b3BzIGFuZCBmbHVzaGVzIHRoZSBjdXJyZW50IGJhdGNoLlxuICAgICAqL1xuICAgIHN0b3AoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoaXMgYEFic3RyYWN0QmF0Y2hSZW5kZXJlcmAuIEl0IGNhbm5vdCBiZSB1c2VkIGFnYWluLlxuICAgICAqL1xuICAgIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9wYWNrZWRHZW9tZXRyeVBvb2xTaXplOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9wYWNrZWRHZW9tZXRyaWVzW2ldKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhY2tlZEdlb21ldHJpZXNbaV0uZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJlci5vZmYoJ3ByZXJlbmRlcicsIHRoaXMub25QcmVyZW5kZXIsIHRoaXMpO1xuXG4gICAgICAgIHRoaXMuX2FCdWZmZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5faUJ1ZmZlcnMgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYWNrZWRHZW9tZXRyaWVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlQnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5faW5kZXhCdWZmZXIgPSBudWxsO1xuXG4gICAgICAgIGlmICh0aGlzLl9zaGFkZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3NoYWRlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLl9zaGFkZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgYW4gYXR0cmlidXRlIGJ1ZmZlciBmcm9tIGB0aGlzLl9hQnVmZmVyc2AgdGhhdFxuICAgICAqIGNhbiBob2xkIGF0bGVhc3QgYHNpemVgIGZsb2F0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIC0gbWluaW11bSBjYXBhY2l0eSByZXF1aXJlZFxuICAgICAqIEByZXR1cm4ge1ZpZXdhYmxlQnVmZmVyfSAtIGJ1ZmZlciB0aGFuIGNhbiBob2xkIGF0bGVhc3QgYHNpemVgIGZsb2F0c1xuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZ2V0QXR0cmlidXRlQnVmZmVyKHNpemU6IG51bWJlcik6IFZpZXdhYmxlQnVmZmVyXG4gICAge1xuICAgICAgICAvLyA4IHZlcnRpY2VzIGlzIGVub3VnaCBmb3IgMiBxdWFkc1xuICAgICAgICBjb25zdCByb3VuZGVkUDIgPSBuZXh0UG93MihNYXRoLmNlaWwoc2l6ZSAvIDgpKTtcbiAgICAgICAgY29uc3Qgcm91bmRlZFNpemVJbmRleCA9IGxvZzIocm91bmRlZFAyKTtcbiAgICAgICAgY29uc3Qgcm91bmRlZFNpemUgPSByb3VuZGVkUDIgKiA4O1xuXG4gICAgICAgIGlmICh0aGlzLl9hQnVmZmVycy5sZW5ndGggPD0gcm91bmRlZFNpemVJbmRleClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5faUJ1ZmZlcnMubGVuZ3RoID0gcm91bmRlZFNpemVJbmRleCArIDE7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYnVmZmVyID0gdGhpcy5fYUJ1ZmZlcnNbcm91bmRlZFNpemVdO1xuXG4gICAgICAgIGlmICghYnVmZmVyKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9hQnVmZmVyc1tyb3VuZGVkU2l6ZV0gPSBidWZmZXIgPSBuZXcgVmlld2FibGVCdWZmZXIocm91bmRlZFNpemUgKiB0aGlzLnZlcnRleFNpemUgKiA0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyBhbiBpbmRleCBidWZmZXIgZnJvbSBgdGhpcy5faUJ1ZmZlcnNgIHRoYXQgY2FuXG4gICAgICogaGF2ZSBhdCBsZWFzdCBgc2l6ZWAgY2FwYWNpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSAtIG1pbmltdW0gcmVxdWlyZWQgY2FwYWNpdHlcbiAgICAgKiBAcmV0dXJuIHtVaW50MTZBcnJheX0gLSBidWZmZXIgdGhhdCBjYW4gZml0IGBzaXplYFxuICAgICAqICAgIGluZGljZXMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBnZXRJbmRleEJ1ZmZlcihzaXplOiBudW1iZXIpOiBVaW50MTZBcnJheVxuICAgIHtcbiAgICAgICAgLy8gMTIgaW5kaWNlcyBpcyBlbm91Z2ggZm9yIDIgcXVhZHNcbiAgICAgICAgY29uc3Qgcm91bmRlZFAyID0gbmV4dFBvdzIoTWF0aC5jZWlsKHNpemUgLyAxMikpO1xuICAgICAgICBjb25zdCByb3VuZGVkU2l6ZUluZGV4ID0gbG9nMihyb3VuZGVkUDIpO1xuICAgICAgICBjb25zdCByb3VuZGVkU2l6ZSA9IHJvdW5kZWRQMiAqIDEyO1xuXG4gICAgICAgIGlmICh0aGlzLl9pQnVmZmVycy5sZW5ndGggPD0gcm91bmRlZFNpemVJbmRleClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5faUJ1ZmZlcnMubGVuZ3RoID0gcm91bmRlZFNpemVJbmRleCArIDE7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYnVmZmVyID0gdGhpcy5faUJ1ZmZlcnNbcm91bmRlZFNpemVJbmRleF07XG5cbiAgICAgICAgaWYgKCFidWZmZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2lCdWZmZXJzW3JvdW5kZWRTaXplSW5kZXhdID0gYnVmZmVyID0gbmV3IFVpbnQxNkFycmF5KHJvdW5kZWRTaXplKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFrZXMgdGhlIGZvdXIgYmF0Y2hpbmcgcGFyYW1ldGVycyBvZiBgZWxlbWVudGAsIGludGVybGVhdmVzXG4gICAgICogYW5kIHB1c2hlcyB0aGVtIGludG8gdGhlIGJhdGNoaW5nIGF0dHJpYnV0ZS9pbmRleCBidWZmZXJzIGdpdmVuLlxuICAgICAqXG4gICAgICogSXQgdXNlcyB0aGVzZSBwcm9wZXJ0aWVzOiBgdmVydGV4RGF0YWAgYHV2c2AsIGB0ZXh0dXJlSWRgIGFuZFxuICAgICAqIGBpbmRpY2llc2AuIEl0IGFsc28gdXNlcyB0aGUgXCJ0aW50XCIgb2YgdGhlIGJhc2UtdGV4dHVyZSwgaWZcbiAgICAgKiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlNwcml0ZX0gZWxlbWVudCAtIGVsZW1lbnQgYmVpbmcgcmVuZGVyZWRcbiAgICAgKiBAcGFyYW0ge1BJWEkuVmlld2FibGVCdWZmZXJ9IGF0dHJpYnV0ZUJ1ZmZlciAtIGF0dHJpYnV0ZSBidWZmZXIuXG4gICAgICogQHBhcmFtIHtVaW50MTZBcnJheX0gaW5kZXhCdWZmZXIgLSBpbmRleCBidWZmZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYUluZGV4IC0gbnVtYmVyIG9mIGZsb2F0cyBhbHJlYWR5IGluIHRoZSBhdHRyaWJ1dGUgYnVmZmVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlJbmRleCAtIG51bWJlciBvZiBpbmRpY2VzIGFscmVhZHkgaW4gYGluZGV4QnVmZmVyYFxuICAgICAqL1xuICAgIHBhY2tJbnRlcmxlYXZlZEdlb21ldHJ5KGVsZW1lbnQ6IElCYXRjaGFibGVFbGVtZW50LCBhdHRyaWJ1dGVCdWZmZXI6IFZpZXdhYmxlQnVmZmVyLCBpbmRleEJ1ZmZlcjogVWludDE2QXJyYXksXG4gICAgICAgIGFJbmRleDogbnVtYmVyLCBpSW5kZXg6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHVpbnQzMlZpZXcsXG4gICAgICAgICAgICBmbG9hdDMyVmlldyxcbiAgICAgICAgfSA9IGF0dHJpYnV0ZUJ1ZmZlcjtcblxuICAgICAgICBjb25zdCBwYWNrZWRWZXJ0aWNlcyA9IGFJbmRleCAvIHRoaXMudmVydGV4U2l6ZTtcbiAgICAgICAgY29uc3QgdXZzID0gZWxlbWVudC51dnM7XG4gICAgICAgIGNvbnN0IGluZGljaWVzID0gZWxlbWVudC5pbmRpY2VzO1xuICAgICAgICBjb25zdCB2ZXJ0ZXhEYXRhID0gZWxlbWVudC52ZXJ0ZXhEYXRhO1xuICAgICAgICBjb25zdCB0ZXh0dXJlSWQgPSBlbGVtZW50Ll90ZXh0dXJlLmJhc2VUZXh0dXJlLl9iYXRjaExvY2F0aW9uO1xuXG4gICAgICAgIGNvbnN0IGFscGhhID0gTWF0aC5taW4oZWxlbWVudC53b3JsZEFscGhhLCAxLjApO1xuICAgICAgICBjb25zdCBhcmdiID0gKGFscGhhIDwgMS4wXG4gICAgICAgICAgICAmJiBlbGVtZW50Ll90ZXh0dXJlLmJhc2VUZXh0dXJlLmFscGhhTW9kZSlcbiAgICAgICAgICAgID8gcHJlbXVsdGlwbHlUaW50KGVsZW1lbnQuX3RpbnRSR0IsIGFscGhhKVxuICAgICAgICAgICAgOiBlbGVtZW50Ll90aW50UkdCICsgKGFscGhhICogMjU1IDw8IDI0KTtcblxuICAgICAgICAvLyBsZXRzIG5vdCB3b3JyeSBhYm91dCB0aW50ISBmb3Igbm93Li5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXhEYXRhLmxlbmd0aDsgaSArPSAyKVxuICAgICAgICB7XG4gICAgICAgICAgICBmbG9hdDMyVmlld1thSW5kZXgrK10gPSB2ZXJ0ZXhEYXRhW2ldO1xuICAgICAgICAgICAgZmxvYXQzMlZpZXdbYUluZGV4KytdID0gdmVydGV4RGF0YVtpICsgMV07XG4gICAgICAgICAgICBmbG9hdDMyVmlld1thSW5kZXgrK10gPSB1dnNbaV07XG4gICAgICAgICAgICBmbG9hdDMyVmlld1thSW5kZXgrK10gPSB1dnNbaSArIDFdO1xuICAgICAgICAgICAgdWludDMyVmlld1thSW5kZXgrK10gPSBhcmdiO1xuICAgICAgICAgICAgZmxvYXQzMlZpZXdbYUluZGV4KytdID0gdGV4dHVyZUlkO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRpY2llcy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgaW5kZXhCdWZmZXJbaUluZGV4KytdID0gcGFja2VkVmVydGljZXMgKyBpbmRpY2llc1tpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvb2wgb2YgYEJhdGNoRHJhd0NhbGxgIG9iamVjdHMgdGhhdCBgZmx1c2hgIHVzZWRcbiAgICAgKiB0byBjcmVhdGUgXCJiYXRjaGVzXCIgb2YgdGhlIG9iamVjdHMgYmVpbmcgcmVuZGVyZWQuXG4gICAgICpcbiAgICAgKiBUaGVzZSBhcmUgbmV2ZXIgcmUtYWxsb2NhdGVkIGFnYWluLlxuICAgICAqIFNoYXJlZCBiZXR3ZWVuIGFsbCBiYXRjaCByZW5kZXJlcnMgYmVjYXVzZSBpdCBjYW4gYmUgb25seSBvbmUgXCJmbHVzaFwiIHdvcmtpbmcgYXQgdGhlIG1vbWVudC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyIHtQSVhJLkJhdGNoRHJhd0NhbGxbXX1cbiAgICAgKi9cbiAgICBzdGF0aWMgX2RyYXdDYWxsUG9vbDogQXJyYXk8QmF0Y2hEcmF3Q2FsbD4gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIFBvb2wgb2YgYEJhdGNoRHJhd0NhbGxgIG9iamVjdHMgdGhhdCBgZmx1c2hgIHVzZWRcbiAgICAgKiB0byBjcmVhdGUgXCJiYXRjaGVzXCIgb2YgdGhlIG9iamVjdHMgYmVpbmcgcmVuZGVyZWQuXG4gICAgICpcbiAgICAgKiBUaGVzZSBhcmUgbmV2ZXIgcmUtYWxsb2NhdGVkIGFnYWluLlxuICAgICAqIFNoYXJlZCBiZXR3ZWVuIGFsbCBiYXRjaCByZW5kZXJlcnMgYmVjYXVzZSBpdCBjYW4gYmUgb25seSBvbmUgXCJmbHVzaFwiIHdvcmtpbmcgYXQgdGhlIG1vbWVudC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyIHtQSVhJLkJhdGNoVGV4dHVyZUFycmF5W119XG4gICAgICovXG4gICAgc3RhdGljIF90ZXh0dXJlQXJyYXlQb29sOiBBcnJheTxCYXRjaFRleHR1cmVBcnJheT4gPSBbXTtcbn1cbiIsICJpbXBvcnQgeyBTaGFkZXIgfSBmcm9tICcuLi9zaGFkZXIvU2hhZGVyJztcbmltcG9ydCB7IFByb2dyYW0gfSBmcm9tICcuLi9zaGFkZXIvUHJvZ3JhbSc7XG5pbXBvcnQgeyBVbmlmb3JtR3JvdXAgfSBmcm9tICcuLi9zaGFkZXIvVW5pZm9ybUdyb3VwJztcbmltcG9ydCB7IE1hdHJpeCB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG4vKipcbiAqIEhlbHBlciB0aGF0IGdlbmVyYXRlcyBiYXRjaGluZyBtdWx0aS10ZXh0dXJlIHNoYWRlci4gVXNlIGl0IHdpdGggeW91ciBuZXcgQmF0Y2hSZW5kZXJlclxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEJhdGNoU2hhZGVyR2VuZXJhdG9yXG57XG4gICAgcHVibGljIHZlcnRleFNyYzogc3RyaW5nO1xuICAgIHB1YmxpYyBmcmFnVGVtcGxhdGU6IHN0cmluZztcbiAgICBwcm9ncmFtQ2FjaGU6IHtba2V5OiBudW1iZXJdOiBQcm9ncmFtfTtcbiAgICBkZWZhdWx0R3JvdXBDYWNoZToge1trZXk6IG51bWJlcl06IFVuaWZvcm1Hcm91cH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZlcnRleFNyYyAtIFZlcnRleCBzaGFkZXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZnJhZ1RlbXBsYXRlIC0gRnJhZ21lbnQgc2hhZGVyIHRlbXBsYXRlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmVydGV4U3JjOiBzdHJpbmcsIGZyYWdUZW1wbGF0ZTogc3RyaW5nKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZmVyZW5jZSB0byB0aGUgdmVydGV4IHNoYWRlciBzb3VyY2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmVydGV4U3JjID0gdmVydGV4U3JjO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIGZyYWdlbWVudCBzaGFkZXIgdGVtcGxhdGUuIE11c3QgY29udGFpbiBcIiVjb3VudCVcIiBhbmQgXCIlZm9ybG9vcCVcIi5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mcmFnVGVtcGxhdGUgPSBmcmFnVGVtcGxhdGU7XG5cbiAgICAgICAgdGhpcy5wcm9ncmFtQ2FjaGUgPSB7fTtcbiAgICAgICAgdGhpcy5kZWZhdWx0R3JvdXBDYWNoZSA9IHt9O1xuXG4gICAgICAgIGlmIChmcmFnVGVtcGxhdGUuaW5kZXhPZignJWNvdW50JScpIDwgMClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGcmFnbWVudCB0ZW1wbGF0ZSBtdXN0IGNvbnRhaW4gXCIlY291bnQlXCIuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJhZ1RlbXBsYXRlLmluZGV4T2YoJyVmb3Jsb29wJScpIDwgMClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGcmFnbWVudCB0ZW1wbGF0ZSBtdXN0IGNvbnRhaW4gXCIlZm9ybG9vcCVcIi4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdlbmVyYXRlU2hhZGVyKG1heFRleHR1cmVzOiBudW1iZXIpOiBTaGFkZXJcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5wcm9ncmFtQ2FjaGVbbWF4VGV4dHVyZXNdKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzYW1wbGVWYWx1ZXMgPSBuZXcgSW50MzJBcnJheShtYXhUZXh0dXJlcyk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4VGV4dHVyZXM7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzYW1wbGVWYWx1ZXNbaV0gPSBpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRHcm91cENhY2hlW21heFRleHR1cmVzXSA9IFVuaWZvcm1Hcm91cC5mcm9tKHsgdVNhbXBsZXJzOiBzYW1wbGVWYWx1ZXMgfSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIGxldCBmcmFnbWVudFNyYyA9IHRoaXMuZnJhZ1RlbXBsYXRlO1xuXG4gICAgICAgICAgICBmcmFnbWVudFNyYyA9IGZyYWdtZW50U3JjLnJlcGxhY2UoLyVjb3VudCUvZ2ksIGAke21heFRleHR1cmVzfWApO1xuICAgICAgICAgICAgZnJhZ21lbnRTcmMgPSBmcmFnbWVudFNyYy5yZXBsYWNlKC8lZm9ybG9vcCUvZ2ksIHRoaXMuZ2VuZXJhdGVTYW1wbGVTcmMobWF4VGV4dHVyZXMpKTtcblxuICAgICAgICAgICAgdGhpcy5wcm9ncmFtQ2FjaGVbbWF4VGV4dHVyZXNdID0gbmV3IFByb2dyYW0odGhpcy52ZXJ0ZXhTcmMsIGZyYWdtZW50U3JjKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0ge1xuICAgICAgICAgICAgdGludDogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgMSwgMV0pLFxuICAgICAgICAgICAgdHJhbnNsYXRpb25NYXRyaXg6IG5ldyBNYXRyaXgoKSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRoaXMuZGVmYXVsdEdyb3VwQ2FjaGVbbWF4VGV4dHVyZXNdLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXcgU2hhZGVyKHRoaXMucHJvZ3JhbUNhY2hlW21heFRleHR1cmVzXSwgdW5pZm9ybXMpO1xuICAgIH1cblxuICAgIGdlbmVyYXRlU2FtcGxlU3JjKG1heFRleHR1cmVzOiBudW1iZXIpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIGxldCBzcmMgPSAnJztcblxuICAgICAgICBzcmMgKz0gJ1xcbic7XG4gICAgICAgIHNyYyArPSAnXFxuJztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heFRleHR1cmVzOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChpID4gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzcmMgKz0gJ1xcbmVsc2UgJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGkgPCBtYXhUZXh0dXJlcyAtIDEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3JjICs9IGBpZih2VGV4dHVyZUlkIDwgJHtpfS41KWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNyYyArPSAnXFxueyc7XG4gICAgICAgICAgICBzcmMgKz0gYFxcblxcdGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyc1ske2l9XSwgdlRleHR1cmVDb29yZCk7YDtcbiAgICAgICAgICAgIHNyYyArPSAnXFxufSc7XG4gICAgICAgIH1cblxuICAgICAgICBzcmMgKz0gJ1xcbic7XG4gICAgICAgIHNyYyArPSAnXFxuJztcblxuICAgICAgICByZXR1cm4gc3JjO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBUWVBFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gJy4uL2dlb21ldHJ5L0dlb21ldHJ5JztcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJy4uL2dlb21ldHJ5L0J1ZmZlcic7XG5cbi8qKlxuICogR2VvbWV0cnkgdXNlZCB0byBiYXRjaCBzdGFuZGFyZCBQSVhJIGNvbnRlbnQgKGUuZy4gTWVzaCwgU3ByaXRlLCBHcmFwaGljcyBvYmplY3RzKS5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXRjaEdlb21ldHJ5IGV4dGVuZHMgR2VvbWV0cnlcbntcbiAgICBfYnVmZmVyOiBCdWZmZXI7XG4gICAgX2luZGV4QnVmZmVyOiBCdWZmZXI7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbX3N0YXRpYz1mYWxzZV0gLSBPcHRpbWl6YXRpb24gZmxhZywgd2hlcmUgYGZhbHNlYFxuICAgICAqICAgICAgICBpcyB1cGRhdGVkIGV2ZXJ5IGZyYW1lLCBgdHJ1ZWAgZG9lc24ndCBjaGFuZ2UgZnJhbWUtdG8tZnJhbWUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoX3N0YXRpYyA9IGZhbHNlKVxuICAgIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQnVmZmVyIHVzZWQgZm9yIHBvc2l0aW9uLCBjb2xvciwgdGV4dHVyZSBJRHNcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5CdWZmZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2J1ZmZlciA9IG5ldyBCdWZmZXIobnVsbCwgX3N0YXRpYywgZmFsc2UpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRleCBidWZmZXIgZGF0YVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkJ1ZmZlcn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5faW5kZXhCdWZmZXIgPSBuZXcgQnVmZmVyKG51bGwsIF9zdGF0aWMsIHRydWUpO1xuXG4gICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKCdhVmVydGV4UG9zaXRpb24nLCB0aGlzLl9idWZmZXIsIDIsIGZhbHNlLCBUWVBFUy5GTE9BVClcbiAgICAgICAgICAgIC5hZGRBdHRyaWJ1dGUoJ2FUZXh0dXJlQ29vcmQnLCB0aGlzLl9idWZmZXIsIDIsIGZhbHNlLCBUWVBFUy5GTE9BVClcbiAgICAgICAgICAgIC5hZGRBdHRyaWJ1dGUoJ2FDb2xvcicsIHRoaXMuX2J1ZmZlciwgNCwgdHJ1ZSwgVFlQRVMuVU5TSUdORURfQllURSlcbiAgICAgICAgICAgIC5hZGRBdHRyaWJ1dGUoJ2FUZXh0dXJlSWQnLCB0aGlzLl9idWZmZXIsIDEsIHRydWUsIFRZUEVTLkZMT0FUKVxuICAgICAgICAgICAgLmFkZEluZGV4KHRoaXMuX2luZGV4QnVmZmVyKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQmF0Y2hTaGFkZXJHZW5lcmF0b3IgfSBmcm9tICcuL0JhdGNoU2hhZGVyR2VuZXJhdG9yJztcbmltcG9ydCB7IEJhdGNoR2VvbWV0cnkgfSBmcm9tICcuL0JhdGNoR2VvbWV0cnknO1xuaW1wb3J0IHsgQWJzdHJhY3RCYXRjaFJlbmRlcmVyIH0gZnJvbSAnLi9BYnN0cmFjdEJhdGNoUmVuZGVyZXInO1xuXG5pbXBvcnQgZGVmYXVsdFZlcnRleCBmcm9tICcuL3RleHR1cmUudmVydCc7XG5pbXBvcnQgZGVmYXVsdEZyYWdtZW50IGZyb20gJy4vdGV4dHVyZS5mcmFnJztcblxuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJy4uL1JlbmRlcmVyJztcblxuZXhwb3J0IGludGVyZmFjZSBJQmF0Y2hGYWN0b3J5T3B0aW9uc1xue1xuICAgIHZlcnRleD86IHN0cmluZztcbiAgICBmcmFnbWVudD86IHN0cmluZztcbiAgICBnZW9tZXRyeUNsYXNzPzogdHlwZW9mIEJhdGNoR2VvbWV0cnk7XG4gICAgdmVydGV4U2l6ZT86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAaGlkZWNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXRjaFBsdWdpbkZhY3RvcnlcbntcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQmF0Y2hSZW5kZXJlciBwbHVnaW4gZm9yIFJlbmRlcmVyLiB0aGlzIGNvbnZlbmllbmNlIGNhbiBwcm92aWRlIGFuIGVhc3kgd2F5XG4gICAgICogdG8gZXh0ZW5kIEJhdGNoUmVuZGVyZXIgd2l0aCBhbGwgdGhlIG5lY2Vzc2FyeSBwaWVjZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBmcmFnbWVudCA9IGBcbiAgICAgKiB2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcbiAgICAgKiB2YXJ5aW5nIHZlYzQgdkNvbG9yO1xuICAgICAqIHZhcnlpbmcgZmxvYXQgdlRleHR1cmVJZDtcbiAgICAgKiB1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcnNbJWNvdW50JV07XG4gICAgICpcbiAgICAgKiB2b2lkIG1haW4odm9pZCl7XG4gICAgICogICAgIHZlYzQgY29sb3I7XG4gICAgICogICAgICVmb3Jsb29wJVxuICAgICAqICAgICBnbF9GcmFnQ29sb3IgPSB2Q29sb3IgKiB2ZWM0KGNvbG9yLmEgLSBjb2xvci5yZ2IsIGNvbG9yLmEpO1xuICAgICAqIH1cbiAgICAgKiBgO1xuICAgICAqIGNvbnN0IEludmVydEJhdGNoUmVuZGVyZXIgPSBQSVhJLkJhdGNoUGx1Z2luRmFjdG9yeS5jcmVhdGUoeyBmcmFnbWVudCB9KTtcbiAgICAgKiBQSVhJLlJlbmRlcmVyLnJlZ2lzdGVyUGx1Z2luKCdpbnZlcnQnLCBJbnZlcnRCYXRjaFJlbmRlcmVyKTtcbiAgICAgKiBjb25zdCBzcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUoKTtcbiAgICAgKiBzcHJpdGUucGx1Z2luTmFtZSA9ICdpbnZlcnQnO1xuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMudmVydGV4PVBJWEkuQmF0Y2hQbHVnaW5GYWN0b3J5LmRlZmF1bHRWZXJ0ZXhTcmNdIC0gVmVydGV4IHNoYWRlciBzb3VyY2VcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZnJhZ21lbnQ9UElYSS5CYXRjaFBsdWdpbkZhY3RvcnkuZGVmYXVsdEZyYWdtZW50VGVtcGxhdGVdIC0gRnJhZ21lbnQgc2hhZGVyIHRlbXBsYXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnZlcnRleFNpemU9Nl0gLSBWZXJ0ZXggc2l6ZVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5nZW9tZXRyeUNsYXNzPVBJWEkuQmF0Y2hHZW9tZXRyeV1cbiAgICAgKiBAcmV0dXJuIHsqfSBOZXcgYmF0Y2ggcmVuZGVyZXIgcGx1Z2luXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShvcHRpb25zPzogSUJhdGNoRmFjdG9yeU9wdGlvbnMpOiB0eXBlb2YgQWJzdHJhY3RCYXRjaFJlbmRlcmVyXG4gICAge1xuICAgICAgICBjb25zdCB7IHZlcnRleCwgZnJhZ21lbnQsIHZlcnRleFNpemUsIGdlb21ldHJ5Q2xhc3MgfSA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdmVydGV4OiBkZWZhdWx0VmVydGV4LFxuICAgICAgICAgICAgZnJhZ21lbnQ6IGRlZmF1bHRGcmFnbWVudCxcbiAgICAgICAgICAgIGdlb21ldHJ5Q2xhc3M6IEJhdGNoR2VvbWV0cnksXG4gICAgICAgICAgICB2ZXJ0ZXhTaXplOiA2LFxuICAgICAgICB9LCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gY2xhc3MgQmF0Y2hQbHVnaW4gZXh0ZW5kcyBBYnN0cmFjdEJhdGNoUmVuZGVyZXJcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN1cGVyKHJlbmRlcmVyKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2hhZGVyR2VuZXJhdG9yID0gbmV3IEJhdGNoU2hhZGVyR2VuZXJhdG9yKHZlcnRleCwgZnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlDbGFzcyA9IGdlb21ldHJ5Q2xhc3M7XG4gICAgICAgICAgICAgICAgdGhpcy52ZXJ0ZXhTaXplID0gdmVydGV4U2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCB2ZXJ0ZXggc2hhZGVyIHNvdXJjZVxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQGNvbnN0YW50XG4gICAgICovXG4gICAgc3RhdGljIGdldCBkZWZhdWx0VmVydGV4U3JjKCk6IHN0cmluZ1xuICAgIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWZXJ0ZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgZnJhZ21lbnQgc2hhZGVyIHNvdXJjZVxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQGNvbnN0YW50XG4gICAgICovXG4gICAgc3RhdGljIGdldCBkZWZhdWx0RnJhZ21lbnRUZW1wbGF0ZSgpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RnJhZ21lbnQ7XG4gICAgfVxufVxuXG4vLyBTZXR1cCB0aGUgZGVmYXVsdCBCYXRjaFJlbmRlcmVyIHBsdWdpbiwgdGhpcyBpcyB3aGF0XG4vLyB3ZSdsbCBhY3R1YWxseSBleHBvcnQgYXQgdGhlIHJvb3QgbGV2ZWxcbmV4cG9ydCBjb25zdCBCYXRjaFJlbmRlcmVyID0gQmF0Y2hQbHVnaW5GYWN0b3J5LmNyZWF0ZSgpO1xuIiwgImltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuaW1wb3J0IHsgYXV0b0RldGVjdFJlbmRlcmVyIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5cbmltcG9ydCB0eXBlIHsgUmVjdGFuZ2xlIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgdHlwZSB7IFJlbmRlcmVyLCBJUmVuZGVyZXJPcHRpb25zQXV0bywgQWJzdHJhY3RSZW5kZXJlciB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBJRGVzdHJveU9wdGlvbnMgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcblxuZXhwb3J0IGludGVyZmFjZSBJQXBwbGljYXRpb25QbHVnaW4ge1xuICAgIGluaXQ6ICguLi5wYXJhbXM6IGFueVtdKSA9PiBhbnk7XG4gICAgZGVzdHJveTogKC4uLnBhcmFtczogYW55W10pID0+IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQXBwbGljYXRpb25PcHRpb25zIGV4dGVuZHMgSVJlbmRlcmVyT3B0aW9uc0F1dG8ge1xuICAgIGF1dG9TdGFydD86IGJvb2xlYW47XG4gICAgc2hhcmVkVGlja2VyPzogYm9vbGVhbjtcbiAgICBzaGFyZWRMb2FkZXI/OiBib29sZWFuO1xuICAgIHJlc2l6ZVRvPzogV2luZG93IHwgSFRNTEVsZW1lbnQ7XG4gICAgcmVzaXplVGhyb3R0bGU/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQ29udmVuaWVuY2UgY2xhc3MgdG8gY3JlYXRlIGEgbmV3IFBJWEkgYXBwbGljYXRpb24uXG4gKlxuICogVGhpcyBjbGFzcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgdGhlIHJlbmRlcmVyLCB0aWNrZXIgYW5kIHJvb3QgY29udGFpbmVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDcmVhdGUgdGhlIGFwcGxpY2F0aW9uXG4gKiBjb25zdCBhcHAgPSBuZXcgUElYSS5BcHBsaWNhdGlvbigpO1xuICpcbiAqIC8vIEFkZCB0aGUgdmlldyB0byB0aGUgRE9NXG4gKiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFwcC52aWV3KTtcbiAqXG4gKiAvLyBleCwgYWRkIGRpc3BsYXkgb2JqZWN0c1xuICogYXBwLnN0YWdlLmFkZENoaWxkKFBJWEkuU3ByaXRlLmZyb20oJ3NvbWV0aGluZy5wbmcnKSk7XG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgQXBwbGljYXRpb25cbntcbiAgICBwdWJsaWMgc3RhdGljIF9wbHVnaW5zOiBJQXBwbGljYXRpb25QbHVnaW5bXTtcblxuICAgIHB1YmxpYyBzdGFnZTogQ29udGFpbmVyO1xuICAgIHB1YmxpYyByZW5kZXJlcjogUmVuZGVyZXJ8QWJzdHJhY3RSZW5kZXJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBUaGUgb3B0aW9uYWwgcmVuZGVyZXIgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmF1dG9TdGFydD10cnVlXSAtIEF1dG9tYXRpY2FsbHkgc3RhcnRzIHRoZSByZW5kZXJpbmcgYWZ0ZXIgdGhlIGNvbnN0cnVjdGlvbi5cbiAgICAgKiAgICAgKipOb3RlKio6IFNldHRpbmcgdGhpcyBwYXJhbWV0ZXIgdG8gZmFsc2UgZG9lcyBOT1Qgc3RvcCB0aGUgc2hhcmVkIHRpY2tlciBldmVuIGlmIHlvdSBzZXRcbiAgICAgKiAgICAgb3B0aW9ucy5zaGFyZWRUaWNrZXIgdG8gdHJ1ZSBpbiBjYXNlIHRoYXQgaXQgaXMgYWxyZWFkeSBzdGFydGVkLiBTdG9wIGl0IGJ5IHlvdXIgb3duLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy53aWR0aD04MDBdIC0gVGhlIHdpZHRoIG9mIHRoZSByZW5kZXJlcnMgdmlldy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaGVpZ2h0PTYwMF0gLSBUaGUgaGVpZ2h0IG9mIHRoZSByZW5kZXJlcnMgdmlldy5cbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBbb3B0aW9ucy52aWV3XSAtIFRoZSBjYW52YXMgdG8gdXNlIGFzIGEgdmlldywgb3B0aW9uYWwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFuc3BhcmVudD1mYWxzZV0gLSBJZiB0aGUgcmVuZGVyIHZpZXcgaXMgdHJhbnNwYXJlbnQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hdXRvRGVuc2l0eT1mYWxzZV0gLSBSZXNpemVzIHJlbmRlcmVyIHZpZXcgaW4gQ1NTIHBpeGVscyB0byBhbGxvdyBmb3JcbiAgICAgKiAgIHJlc29sdXRpb25zIG90aGVyIHRoYW4gMS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmFudGlhbGlhcz1mYWxzZV0gLSBTZXRzIGFudGlhbGlhc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucHJlc2VydmVEcmF3aW5nQnVmZmVyPWZhbHNlXSAtIEVuYWJsZXMgZHJhd2luZyBidWZmZXIgcHJlc2VydmF0aW9uLCBlbmFibGUgdGhpcyBpZiB5b3VcbiAgICAgKiAgbmVlZCB0byBjYWxsIHRvRGF0YVVybCBvbiB0aGUgV2ViR0wgY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucmVzb2x1dGlvbj0xXSAtIFRoZSByZXNvbHV0aW9uIC8gZGV2aWNlIHBpeGVsIHJhdGlvIG9mIHRoZSByZW5kZXJlciwgcmV0aW5hIHdvdWxkIGJlIDIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5mb3JjZUNhbnZhcz1mYWxzZV0gLSBwcmV2ZW50cyBzZWxlY3Rpb24gb2YgV2ViR0wgcmVuZGVyZXIsIGV2ZW4gaWYgc3VjaCBpcyBwcmVzZW50LCB0aGlzXG4gICAgICogICBvcHRpb24gb25seSBpcyBhdmFpbGFibGUgd2hlbiB1c2luZyAqKnBpeGkuanMtbGVnYWN5Kiogb3IgKipAcGl4aS9jYW52YXMtcmVuZGVyZXIqKiBtb2R1bGVzLCBvdGhlcndpc2VcbiAgICAgKiAgIGl0IGlzIGlnbm9yZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmJhY2tncm91bmRDb2xvcj0weDAwMDAwMF0gLSBUaGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgcmVuZGVyZWQgYXJlYVxuICAgICAqICAoc2hvd24gaWYgbm90IHRyYW5zcGFyZW50KS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNsZWFyQmVmb3JlUmVuZGVyPXRydWVdIC0gVGhpcyBzZXRzIGlmIHRoZSByZW5kZXJlciB3aWxsIGNsZWFyIHRoZSBjYW52YXMgb3JcbiAgICAgKiAgIG5vdCBiZWZvcmUgdGhlIG5ldyByZW5kZXIgcGFzcy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucG93ZXJQcmVmZXJlbmNlXSAtIFBhcmFtZXRlciBwYXNzZWQgdG8gd2ViZ2wgY29udGV4dCwgc2V0IHRvIFwiaGlnaC1wZXJmb3JtYW5jZVwiXG4gICAgICogIGZvciBkZXZpY2VzIHdpdGggZHVhbCBncmFwaGljcyBjYXJkLiAqKihXZWJHTCBvbmx5KSoqLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2hhcmVkVGlja2VyPWZhbHNlXSAtIGB0cnVlYCB0byB1c2UgUElYSS5UaWNrZXIuc2hhcmVkLCBgZmFsc2VgIHRvIGNyZWF0ZSBuZXcgdGlja2VyLlxuICAgICAqICBJZiBzZXQgdG8gZmFsc2UsIHlvdSBjYW5ub3QgcmVnaXN0ZXIgYSBoYW5kbGVyIHRvIG9jY3VyIGJlZm9yZSBhbnl0aGluZyB0aGF0IHJ1bnMgb24gdGhlIHNoYXJlZCB0aWNrZXIuXG4gICAgICogIFRoZSBzeXN0ZW0gdGlja2VyIHdpbGwgYWx3YXlzIHJ1biBiZWZvcmUgYm90aCB0aGUgc2hhcmVkIHRpY2tlciBhbmQgdGhlIGFwcCB0aWNrZXIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zaGFyZWRMb2FkZXI9ZmFsc2VdIC0gYHRydWVgIHRvIHVzZSBQSVhJLkxvYWRlci5zaGFyZWQsIGBmYWxzZWAgdG8gY3JlYXRlIG5ldyBMb2FkZXIuXG4gICAgICogQHBhcmFtIHtXaW5kb3d8SFRNTEVsZW1lbnR9IFtvcHRpb25zLnJlc2l6ZVRvXSAtIEVsZW1lbnQgdG8gYXV0b21hdGljYWxseSByZXNpemUgc3RhZ2UgdG8uXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucz86IElBcHBsaWNhdGlvbk9wdGlvbnMpXG4gICAge1xuICAgICAgICAvLyBUaGUgZGVmYXVsdCBvcHRpb25zXG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGZvcmNlQ2FudmFzOiBmYWxzZSxcbiAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdlYkdMIHJlbmRlcmVyIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIENhbnZhc1JlbmRlcmVyLlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlJlbmRlcmVyfFBJWEkuQ2FudmFzUmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gYXV0b0RldGVjdFJlbmRlcmVyKG9wdGlvbnMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcm9vdCBkaXNwbGF5IGNvbnRhaW5lciB0aGF0J3MgcmVuZGVyZWQuXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuQ29udGFpbmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFnZSA9IG5ldyBDb250YWluZXIoKTtcblxuICAgICAgICAvLyBpbnN0YWxsIHBsdWdpbnMgaGVyZVxuICAgICAgICBBcHBsaWNhdGlvbi5fcGx1Z2lucy5mb3JFYWNoKChwbHVnaW4pID0+XG4gICAgICAgIHtcbiAgICAgICAgICAgIHBsdWdpbi5pbml0LmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgbWlkZGxld2FyZSBwbHVnaW4gZm9yIHRoZSBhcHBsaWNhdGlvblxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge1BJWEkuQXBwbGljYXRpb24uUGx1Z2lufSBwbHVnaW4gLSBQbHVnaW4gYmVpbmcgaW5zdGFsbGVkXG4gICAgICovXG4gICAgc3RhdGljIHJlZ2lzdGVyUGx1Z2luKHBsdWdpbjogSUFwcGxpY2F0aW9uUGx1Z2luKTogdm9pZFxuICAgIHtcbiAgICAgICAgQXBwbGljYXRpb24uX3BsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlciB0aGUgY3VycmVudCBzdGFnZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVuZGVyKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIFRPRE86IFNpbmNlIENhbnZhc1JlbmRlcmVyIGhhcyBub3QgYmVlbiBjb252ZXJ0ZWQgdGhpcyBmdW5jdGlvbiB0aGlua3MgaXQgdGFrZXMgRGlzcGxheU9iamVjdCAmIFBJWEkuRGlzcGxheU9iamVjdFxuICAgICAgICAvLyBUaGlzIGNhbiBiZSBmaXhlZCB3aGVuIENhbnZhc1JlbmRlcmVyIGlzIGNvbnZlcnRlZC5cbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zdGFnZSBhcyBhbnkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZmVyZW5jZSB0byB0aGUgcmVuZGVyZXIncyBjYW52YXMgZWxlbWVudC5cbiAgICAgKiBAbWVtYmVyIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBnZXQgdmlldygpOiBIVE1MQ2FudmFzRWxlbWVudFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIudmlldztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHJlbmRlcmVyJ3Mgc2NyZWVuIHJlY3RhbmdsZS4gSXRzIHNhZmUgdG8gdXNlIGFzIGBmaWx0ZXJBcmVhYCBvciBgaGl0QXJlYWAgZm9yIHRoZSB3aG9sZSBzY3JlZW4uXG4gICAgICogQG1lbWJlciB7UElYSS5SZWN0YW5nbGV9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IHNjcmVlbigpOiBSZWN0YW5nbGVcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLnNjcmVlbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95IGFuZCBkb24ndCB1c2UgYWZ0ZXIgdGhpcy5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZW1vdmVWaWV3PWZhbHNlXSAtIEF1dG9tYXRpY2FsbHkgcmVtb3ZlIGNhbnZhcyBmcm9tIERPTS5cbiAgICAgKiBAcGFyYW0ge29iamVjdHxib29sZWFufSBbc3RhZ2VPcHRpb25zXSAtIE9wdGlvbnMgcGFyYW1ldGVyLiBBIGJvb2xlYW4gd2lsbCBhY3QgYXMgaWYgYWxsIG9wdGlvbnNcbiAgICAgKiAgaGF2ZSBiZWVuIHNldCB0byB0aGF0IHZhbHVlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc3RhZ2VPcHRpb25zLmNoaWxkcmVuPWZhbHNlXSAtIGlmIHNldCB0byB0cnVlLCBhbGwgdGhlIGNoaWxkcmVuIHdpbGwgaGF2ZSB0aGVpciBkZXN0cm95XG4gICAgICogIG1ldGhvZCBjYWxsZWQgYXMgd2VsbC4gJ3N0YWdlT3B0aW9ucycgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhvc2UgY2FsbHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc3RhZ2VPcHRpb25zLnRleHR1cmU9ZmFsc2VdIC0gT25seSB1c2VkIGZvciBjaGlsZCBTcHJpdGVzIGlmIHN0YWdlT3B0aW9ucy5jaGlsZHJlbiBpcyBzZXRcbiAgICAgKiAgdG8gdHJ1ZS4gU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIHRleHR1cmUgb2YgdGhlIGNoaWxkIHNwcml0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0YWdlT3B0aW9ucy5iYXNlVGV4dHVyZT1mYWxzZV0gLSBPbmx5IHVzZWQgZm9yIGNoaWxkIFNwcml0ZXMgaWYgc3RhZ2VPcHRpb25zLmNoaWxkcmVuIGlzIHNldFxuICAgICAqICB0byB0cnVlLiBTaG91bGQgaXQgZGVzdHJveSB0aGUgYmFzZSB0ZXh0dXJlIG9mIHRoZSBjaGlsZCBzcHJpdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgZGVzdHJveShyZW1vdmVWaWV3PzogYm9vbGVhbiwgc3RhZ2VPcHRpb25zPzogSURlc3Ryb3lPcHRpb25zfGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICAvLyBEZXN0cm95IHBsdWdpbnMgaW4gdGhlIG9wcG9zaXRlIG9yZGVyXG4gICAgICAgIC8vIHdoaWNoIHRoZXkgd2VyZSBjb25zdHJ1Y3RlZFxuICAgICAgICBjb25zdCBwbHVnaW5zID0gQXBwbGljYXRpb24uX3BsdWdpbnMuc2xpY2UoMCk7XG5cbiAgICAgICAgcGx1Z2lucy5yZXZlcnNlKCk7XG4gICAgICAgIHBsdWdpbnMuZm9yRWFjaCgocGx1Z2luKSA9PlxuICAgICAgICB7XG4gICAgICAgICAgICBwbHVnaW4uZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnN0YWdlLmRlc3Ryb3koc3RhZ2VPcHRpb25zKTtcbiAgICAgICAgdGhpcy5zdGFnZSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJlci5kZXN0cm95KHJlbW92ZVZpZXcpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogQG1lbWJlcm9mIFBJWEkuQXBwbGljYXRpb25cbiAqIEB0eXBlZGVmIHtvYmplY3R9IFBsdWdpblxuICogQHByb3BlcnR5IHtmdW5jdGlvbn0gaW5pdCAtIENhbGxlZCB3aGVuIEFwcGxpY2F0aW9uIGlzIGNvbnN0cnVjdGVkLCBzY29wZWQgdG8gQXBwbGljYXRpb24gaW5zdGFuY2UuXG4gKiAgUGFzc2VzIGluIGBvcHRpb25zYCBhcyB0aGUgb25seSBhcmd1bWVudCwgd2hpY2ggYXJlIEFwcGxpY2F0aW9uIGNvbnN0cnVjdG9yIG9wdGlvbnMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBkZXN0cm95IC0gQ2FsbGVkIHdoZW4gZGVzdHJveWluZyBBcHBsaWNhdGlvbiwgc2NvcGVkIHRvIEFwcGxpY2F0aW9uIGluc3RhbmNlXG4gKi9cblxuLyoqXG4gKiBDb2xsZWN0aW9uIG9mIGluc3RhbGxlZCBwbHVnaW5zLlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEB0eXBlIHtQSVhJLkFwcGxpY2F0aW9uLlBsdWdpbltdfVxuICovXG5BcHBsaWNhdGlvbi5fcGx1Z2lucyA9IFtdO1xuIiwgImltcG9ydCB0eXBlIHsgQ2FudmFzUmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jYW52YXMtcmVuZGVyZXInO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBJQXBwbGljYXRpb25PcHRpb25zIH0gZnJvbSAnLi9BcHBsaWNhdGlvbic7XG5cbi8qKlxuICogTWlkZGxld2FyZSBmb3IgZm9yIEFwcGxpY2F0aW9uJ3MgcmVzaXplIGZ1bmN0aW9uYWxpdHlcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIFJlc2l6ZVBsdWdpblxue1xuICAgIHB1YmxpYyBzdGF0aWMgcmVzaXplVG86IFdpbmRvd3xIVE1MRWxlbWVudDtcbiAgICBwdWJsaWMgc3RhdGljIHJlc2l6ZTogKCkgPT4gdm9pZDtcbiAgICBwdWJsaWMgc3RhdGljIHJlbmRlcmVyOiBSZW5kZXJlcnxDYW52YXNSZW5kZXJlcjtcbiAgICBwdWJsaWMgc3RhdGljIHF1ZXVlUmVzaXplOiAoKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgc3RhdGljIF9yZXNpemVJZDogbnVtYmVyO1xuICAgIHByaXZhdGUgc3RhdGljIF9yZXNpemVUbzogV2luZG93fEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc3RhdGljIGNhbmNlbFJlc2l6ZTogKCkgPT4gdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIHBsdWdpbiB3aXRoIHNjb3BlIG9mIGFwcGxpY2F0aW9uIGluc3RhbmNlXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIFNlZSBhcHBsaWNhdGlvbiBvcHRpb25zXG4gICAgICovXG4gICAgc3RhdGljIGluaXQob3B0aW9ucz86IElBcHBsaWNhdGlvbk9wdGlvbnMpOiB2b2lkXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIEhUTUwgZWxlbWVudCBvciB3aW5kb3cgdG8gYXV0b21hdGljYWxseSByZXNpemUgdGhlXG4gICAgICAgICAqIHJlbmRlcmVyJ3MgdmlldyBlbGVtZW50IHRvIG1hdGNoIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgICAgICAqIEB0eXBlIHtXaW5kb3d8SFRNTEVsZW1lbnR9XG4gICAgICAgICAqIEBuYW1lIHJlc2l6ZVRvXG4gICAgICAgICAqIEBtZW1iZXJvZiBQSVhJLkFwcGxpY2F0aW9uI1xuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyZXNpemVUbycsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2V0KGRvbTogV2luZG93fEhUTUxFbGVtZW50KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucXVldWVSZXNpemUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZXNpemVUbyA9IGRvbTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucXVldWVSZXNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0KClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXNpemVUbztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc2l6ZSBpcyB0aHJvdHRsZWQsIHNvIGl0J3NcbiAgICAgICAgICogc2FmZSB0byBjYWxsIHRoaXMgbXVsdGlwbGUgdGltZXMgcGVyIGZyYW1lIGFuZCBpdCdsbFxuICAgICAgICAgKiBvbmx5IGJlIGNhbGxlZCBvbmNlLlxuICAgICAgICAgKiBAbWV0aG9kIFBJWEkuQXBwbGljYXRpb24jcXVldWVSZXNpemVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucXVldWVSZXNpemUgPSAoKTogdm9pZCA9PlxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3Jlc2l6ZVRvKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jYW5jZWxSZXNpemUoKTtcblxuICAgICAgICAgICAgLy8gLy8gVGhyb3R0bGUgcmVzaXplIGV2ZW50cyBwZXIgcmFmXG4gICAgICAgICAgICB0aGlzLl9yZXNpemVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnJlc2l6ZSgpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FuY2VsIHRoZSByZXNpemUgcXVldWUuXG4gICAgICAgICAqIEBtZXRob2QgUElYSS5BcHBsaWNhdGlvbiNjYW5jZWxSZXNpemVcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FuY2VsUmVzaXplID0gKCk6IHZvaWQgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZUlkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX3Jlc2l6ZUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNpemVJZCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4ZWN1dGUgYW4gaW1tZWRpYXRlIHJlc2l6ZSBvbiB0aGUgcmVuZGVyZXIsIHRoaXMgaXMgbm90XG4gICAgICAgICAqIHRocm90dGxlZCBhbmQgY2FuIGJlIGV4cGVuc2l2ZSB0byBjYWxsIG1hbnkgdGltZXMgaW4gYSByb3cuXG4gICAgICAgICAqIFdpbGwgcmVzaXplIG9ubHkgaWYgYHJlc2l6ZVRvYCBwcm9wZXJ0eSBpcyBzZXQuXG4gICAgICAgICAqIEBtZXRob2QgUElYSS5BcHBsaWNhdGlvbiNyZXNpemVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzaXplID0gKCk6IHZvaWQgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9yZXNpemVUbylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNsZWFyIHF1ZXVlIHJlc2l6ZVxuICAgICAgICAgICAgdGhpcy5jYW5jZWxSZXNpemUoKTtcblxuICAgICAgICAgICAgbGV0IHdpZHRoOiBudW1iZXI7XG4gICAgICAgICAgICBsZXQgaGVpZ2h0OiBudW1iZXI7XG5cbiAgICAgICAgICAgIC8vIFJlc2l6ZSB0byB0aGUgd2luZG93XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVzaXplVG8gPT09IHdpbmRvdylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlc2l6ZSB0byBvdGhlciBIVE1MIGVudGl0aWVzXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjbGllbnRXaWR0aCwgY2xpZW50SGVpZ2h0IH0gPSB0aGlzLl9yZXNpemVUbyBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICAgICAgICAgIHdpZHRoID0gY2xpZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBPbiByZXNpemVcbiAgICAgICAgdGhpcy5fcmVzaXplSWQgPSBudWxsO1xuICAgICAgICB0aGlzLl9yZXNpemVUbyA9IG51bGw7XG4gICAgICAgIHRoaXMucmVzaXplVG8gPSBvcHRpb25zLnJlc2l6ZVRvIHx8IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAgdGhlIHRpY2tlciwgc2NvcGVkIHRvIGFwcGxpY2F0aW9uXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgc3RhdGljIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5jYW5jZWxSZXNpemUoKTtcbiAgICAgICAgdGhpcy5jYW5jZWxSZXNpemUgPSBudWxsO1xuICAgICAgICB0aGlzLnF1ZXVlUmVzaXplID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZXNpemVUbyA9IG51bGw7XG4gICAgICAgIHRoaXMucmVzaXplID0gbnVsbDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwbGljYXRpb24gfSBmcm9tICcuL0FwcGxpY2F0aW9uJztcbmltcG9ydCB7IFJlc2l6ZVBsdWdpbiB9IGZyb20gJy4vUmVzaXplUGx1Z2luJztcblxuQXBwbGljYXRpb24ucmVnaXN0ZXJQbHVnaW4oUmVzaXplUGx1Z2luKTtcblxuZXhwb3J0ICogZnJvbSAnLi9BcHBsaWNhdGlvbic7XG4iLCAiaW1wb3J0IHsgQ2FudmFzUmVuZGVyVGFyZ2V0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgeyBSZW5kZXJUZXh0dXJlIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5cbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIsIElSZW5kZXJlclBsdWdpbiB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBEaXNwbGF5T2JqZWN0IH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5cbmNvbnN0IFRFTVBfUkVDVCA9IG5ldyBSZWN0YW5nbGUoKTtcbmNvbnN0IEJZVEVTX1BFUl9QSVhFTCA9IDQ7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBwcm92aWRlcyByZW5kZXJlci1zcGVjaWZpYyBwbHVnaW5zIGZvciBleHBvcnRpbmcgY29udGVudCBmcm9tIGEgcmVuZGVyZXIuXG4gKiBGb3IgaW5zdGFuY2UsIHRoZXNlIHBsdWdpbnMgY2FuIGJlIHVzZWQgZm9yIHNhdmluZyBhbiBJbWFnZSwgQ2FudmFzIGVsZW1lbnQgb3IgZm9yIGV4cG9ydGluZyB0aGUgcmF3IGltYWdlIGRhdGEgKHBpeGVscykuXG4gKlxuICogRG8gbm90IGluc3RhbnRpYXRlIHRoZXNlIHBsdWdpbnMgZGlyZWN0bHkuIEl0IGlzIGF2YWlsYWJsZSBmcm9tIHRoZSBgcmVuZGVyZXIucGx1Z2luc2AgcHJvcGVydHkuXG4gKiBTZWUge0BsaW5rIFBJWEkuQ2FudmFzUmVuZGVyZXIjcGx1Z2luc30gb3Ige0BsaW5rIFBJWEkuUmVuZGVyZXIjcGx1Z2luc30uXG4gKiBAZXhhbXBsZVxuICogLy8gQ3JlYXRlIGEgbmV3IGFwcCAod2lsbCBhdXRvLWFkZCBleHRyYWN0IHBsdWdpbiB0byByZW5kZXJlcilcbiAqIGNvbnN0IGFwcCA9IG5ldyBQSVhJLkFwcGxpY2F0aW9uKCk7XG4gKlxuICogLy8gRHJhdyBhIHJlZCBjaXJjbGVcbiAqIGNvbnN0IGdyYXBoaWNzID0gbmV3IFBJWEkuR3JhcGhpY3MoKVxuICogICAgIC5iZWdpbkZpbGwoMHhGRjAwMDApXG4gKiAgICAgLmRyYXdDaXJjbGUoMCwgMCwgNTApO1xuICpcbiAqIC8vIFJlbmRlciB0aGUgZ3JhcGhpY3MgYXMgYW4gSFRNTEltYWdlRWxlbWVudFxuICogY29uc3QgaW1hZ2UgPSBhcHAucmVuZGVyZXIucGx1Z2lucy5leHRyYWN0LmltYWdlKGdyYXBoaWNzKTtcbiAqIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW1hZ2UpO1xuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgRXh0cmFjdCBpbXBsZW1lbnRzIElSZW5kZXJlclBsdWdpblxue1xuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHJlbmRlcmVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29sbGVjdGlvbiBvZiBtZXRob2RzIGZvciBleHRyYWN0aW5nIGRhdGEgKGltYWdlLCBwaXhlbHMsIGV0Yy4pIGZyb20gYSBkaXNwbGF5IG9iamVjdCBvciByZW5kZXIgdGV4dHVyZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkV4dHJhY3R9IGV4dHJhY3RcbiAgICAgICAgICogQG1lbWJlcm9mIFBJWEkuUmVuZGVyZXIjXG4gICAgICAgICAqIEBzZWUgUElYSS5FeHRyYWN0XG4gICAgICAgICAqL1xuICAgICAgICByZW5kZXJlci5leHRyYWN0ID0gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaWxsIHJldHVybiBhIEhUTUwgSW1hZ2Ugb2YgdGhlIHRhcmdldFxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R8UElYSS5SZW5kZXJUZXh0dXJlfSB0YXJnZXQgLSBBIGRpc3BsYXlPYmplY3Qgb3IgcmVuZGVyVGV4dHVyZVxuICAgICAqICB0byBjb252ZXJ0LiBJZiBsZWZ0IGVtcHR5IHdpbGwgdXNlIHRoZSBtYWluIHJlbmRlcmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtmb3JtYXRdIC0gSW1hZ2UgZm9ybWF0LCBlLmcuIFwiaW1hZ2UvanBlZ1wiIG9yIFwiaW1hZ2Uvd2VicFwiLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcXVhbGl0eV0gLSBKUEVHIG9yIFdlYnAgY29tcHJlc3Npb24gZnJvbSAwIHRvIDEuIERlZmF1bHQgaXMgMC45Mi5cbiAgICAgKiBAcmV0dXJuIHtIVE1MSW1hZ2VFbGVtZW50fSBIVE1MIEltYWdlIG9mIHRoZSB0YXJnZXRcbiAgICAgKi9cbiAgICBwdWJsaWMgaW1hZ2UodGFyZ2V0OiBEaXNwbGF5T2JqZWN0fFJlbmRlclRleHR1cmUsIGZvcm1hdD86IHN0cmluZywgcXVhbGl0eT86IG51bWJlcik6IEhUTUxJbWFnZUVsZW1lbnRcbiAgICB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG5cbiAgICAgICAgaW1hZ2Uuc3JjID0gdGhpcy5iYXNlNjQodGFyZ2V0LCBmb3JtYXQsIHF1YWxpdHkpO1xuXG4gICAgICAgIHJldHVybiBpbWFnZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaWxsIHJldHVybiBhIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nIG9mIHRoaXMgdGFyZ2V0LiBJdCB3b3JrcyBieSBjYWxsaW5nXG4gICAgICogIGBFeHRyYWN0LmdldENhbnZhc2AgYW5kIHRoZW4gcnVubmluZyB0b0RhdGFVUkwgb24gdGhhdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fFBJWEkuUmVuZGVyVGV4dHVyZX0gdGFyZ2V0IC0gQSBkaXNwbGF5T2JqZWN0IG9yIHJlbmRlclRleHR1cmVcbiAgICAgKiAgdG8gY29udmVydC4gSWYgbGVmdCBlbXB0eSB3aWxsIHVzZSB0aGUgbWFpbiByZW5kZXJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZm9ybWF0XSAtIEltYWdlIGZvcm1hdCwgZS5nLiBcImltYWdlL2pwZWdcIiBvciBcImltYWdlL3dlYnBcIi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3F1YWxpdHldIC0gSlBFRyBvciBXZWJwIGNvbXByZXNzaW9uIGZyb20gMCB0byAxLiBEZWZhdWx0IGlzIDAuOTIuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBBIGJhc2U2NCBlbmNvZGVkIHN0cmluZyBvZiB0aGUgdGV4dHVyZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgYmFzZTY0KHRhcmdldDogRGlzcGxheU9iamVjdHxSZW5kZXJUZXh0dXJlLCBmb3JtYXQ/OiBzdHJpbmcsIHF1YWxpdHk/OiBudW1iZXIpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcyh0YXJnZXQpLnRvRGF0YVVSTChmb3JtYXQsIHF1YWxpdHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBDYW52YXMgZWxlbWVudCwgcmVuZGVycyB0aGlzIHRhcmdldCB0byBpdCBhbmQgdGhlbiByZXR1cm5zIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R8UElYSS5SZW5kZXJUZXh0dXJlfSB0YXJnZXQgLSBBIGRpc3BsYXlPYmplY3Qgb3IgcmVuZGVyVGV4dHVyZVxuICAgICAqICB0byBjb252ZXJ0LiBJZiBsZWZ0IGVtcHR5IHdpbGwgdXNlIHRoZSBtYWluIHJlbmRlcmVyXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEEgQ2FudmFzIGVsZW1lbnQgd2l0aCB0aGUgdGV4dHVyZSByZW5kZXJlZCBvbi5cbiAgICAgKi9cbiAgICBwdWJsaWMgY2FudmFzKHRhcmdldDogRGlzcGxheU9iamVjdHxSZW5kZXJUZXh0dXJlKTogSFRNTENhbnZhc0VsZW1lbnRcbiAgICB7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcbiAgICAgICAgbGV0IHJlc29sdXRpb247XG4gICAgICAgIGxldCBmcmFtZTtcbiAgICAgICAgbGV0IGZsaXBZID0gZmFsc2U7XG4gICAgICAgIGxldCByZW5kZXJUZXh0dXJlO1xuICAgICAgICBsZXQgZ2VuZXJhdGVkID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRhcmdldClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFJlbmRlclRleHR1cmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVuZGVyVGV4dHVyZSA9IHRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZW5kZXJUZXh0dXJlID0gdGhpcy5yZW5kZXJlci5nZW5lcmF0ZVRleHR1cmUodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlbmRlclRleHR1cmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlc29sdXRpb24gPSByZW5kZXJUZXh0dXJlLmJhc2VUZXh0dXJlLnJlc29sdXRpb247XG4gICAgICAgICAgICBmcmFtZSA9IHJlbmRlclRleHR1cmUuZnJhbWU7XG4gICAgICAgICAgICBmbGlwWSA9IGZhbHNlO1xuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyVGV4dHVyZS5iaW5kKHJlbmRlclRleHR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgcmVzb2x1dGlvbiA9IHRoaXMucmVuZGVyZXIucmVzb2x1dGlvbjtcblxuICAgICAgICAgICAgZmxpcFkgPSB0cnVlO1xuXG4gICAgICAgICAgICBmcmFtZSA9IFRFTVBfUkVDVDtcbiAgICAgICAgICAgIGZyYW1lLndpZHRoID0gdGhpcy5yZW5kZXJlci53aWR0aDtcbiAgICAgICAgICAgIGZyYW1lLmhlaWdodCA9IHRoaXMucmVuZGVyZXIuaGVpZ2h0O1xuXG4gICAgICAgICAgICByZW5kZXJlci5yZW5kZXJUZXh0dXJlLmJpbmQobnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGguZmxvb3IoKGZyYW1lLndpZHRoICogcmVzb2x1dGlvbikgKyAxZS00KTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5mbG9vcigoZnJhbWUuaGVpZ2h0ICogcmVzb2x1dGlvbikgKyAxZS00KTtcblxuICAgICAgICBsZXQgY2FudmFzQnVmZmVyID0gbmV3IENhbnZhc1JlbmRlclRhcmdldCh3aWR0aCwgaGVpZ2h0LCAxKTtcblxuICAgICAgICBjb25zdCB3ZWJnbFBpeGVscyA9IG5ldyBVaW50OEFycmF5KEJZVEVTX1BFUl9QSVhFTCAqIHdpZHRoICogaGVpZ2h0KTtcblxuICAgICAgICAvLyByZWFkIHBpeGVscyB0byB0aGUgYXJyYXlcbiAgICAgICAgY29uc3QgZ2wgPSByZW5kZXJlci5nbDtcblxuICAgICAgICBnbC5yZWFkUGl4ZWxzKFxuICAgICAgICAgICAgZnJhbWUueCAqIHJlc29sdXRpb24sXG4gICAgICAgICAgICBmcmFtZS55ICogcmVzb2x1dGlvbixcbiAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgZ2wuUkdCQSxcbiAgICAgICAgICAgIGdsLlVOU0lHTkVEX0JZVEUsXG4gICAgICAgICAgICB3ZWJnbFBpeGVsc1xuICAgICAgICApO1xuXG4gICAgICAgIC8vIGFkZCB0aGUgcGl4ZWxzIHRvIHRoZSBjYW52YXNcbiAgICAgICAgY29uc3QgY2FudmFzRGF0YSA9IGNhbnZhc0J1ZmZlci5jb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICBFeHRyYWN0LmFycmF5UG9zdERpdmlkZSh3ZWJnbFBpeGVscywgY2FudmFzRGF0YS5kYXRhKTtcblxuICAgICAgICBjYW52YXNCdWZmZXIuY29udGV4dC5wdXRJbWFnZURhdGEoY2FudmFzRGF0YSwgMCwgMCk7XG5cbiAgICAgICAgLy8gcHVsbGluZyBwaXhlbHNcbiAgICAgICAgaWYgKGZsaXBZKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ2FudmFzUmVuZGVyVGFyZ2V0KGNhbnZhc0J1ZmZlci53aWR0aCwgY2FudmFzQnVmZmVyLmhlaWdodCwgMSk7XG5cbiAgICAgICAgICAgIHRhcmdldC5jb250ZXh0LnNjYWxlKDEsIC0xKTtcblxuICAgICAgICAgICAgLy8gd2UgY2FuJ3QgcmVuZGVyIHRvIGl0c2VsZiBiZWNhdXNlIHdlIHNob3VsZCBiZSBlbXB0eSBiZWZvcmUgcmVuZGVyLlxuICAgICAgICAgICAgdGFyZ2V0LmNvbnRleHQuZHJhd0ltYWdlKGNhbnZhc0J1ZmZlci5jYW52YXMsIDAsIC1oZWlnaHQpO1xuXG4gICAgICAgICAgICBjYW52YXNCdWZmZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgY2FudmFzQnVmZmVyID0gdGFyZ2V0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdlbmVyYXRlZClcbiAgICAgICAge1xuICAgICAgICAgICAgcmVuZGVyVGV4dHVyZS5kZXN0cm95KHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2VuZCB0aGUgY2FudmFzIGJhY2suLlxuICAgICAgICByZXR1cm4gY2FudmFzQnVmZmVyLmNhbnZhcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaWxsIHJldHVybiBhIG9uZS1kaW1lbnNpb25hbCBhcnJheSBjb250YWluaW5nIHRoZSBwaXhlbCBkYXRhIG9mIHRoZSBlbnRpcmUgdGV4dHVyZSBpbiBSR0JBXG4gICAgICogb3JkZXIsIHdpdGggaW50ZWdlciB2YWx1ZXMgYmV0d2VlbiAwIGFuZCAyNTUgKGluY2x1ZGVkKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fFBJWEkuUmVuZGVyVGV4dHVyZX0gdGFyZ2V0IC0gQSBkaXNwbGF5T2JqZWN0IG9yIHJlbmRlclRleHR1cmVcbiAgICAgKiAgdG8gY29udmVydC4gSWYgbGVmdCBlbXB0eSB3aWxsIHVzZSB0aGUgbWFpbiByZW5kZXJlclxuICAgICAqIEByZXR1cm4ge1VpbnQ4QXJyYXl9IE9uZS1kaW1lbnNpb25hbCBhcnJheSBjb250YWluaW5nIHRoZSBwaXhlbCBkYXRhIG9mIHRoZSBlbnRpcmUgdGV4dHVyZVxuICAgICAqL1xuICAgIHB1YmxpYyBwaXhlbHModGFyZ2V0OiBEaXNwbGF5T2JqZWN0fFJlbmRlclRleHR1cmUpOiBVaW50OEFycmF5XG4gICAge1xuICAgICAgICBjb25zdCByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgICAgIGxldCByZXNvbHV0aW9uO1xuICAgICAgICBsZXQgZnJhbWU7XG4gICAgICAgIGxldCByZW5kZXJUZXh0dXJlO1xuICAgICAgICBsZXQgZ2VuZXJhdGVkID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRhcmdldClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFJlbmRlclRleHR1cmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVuZGVyVGV4dHVyZSA9IHRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZW5kZXJUZXh0dXJlID0gdGhpcy5yZW5kZXJlci5nZW5lcmF0ZVRleHR1cmUodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlbmRlclRleHR1cmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlc29sdXRpb24gPSByZW5kZXJUZXh0dXJlLmJhc2VUZXh0dXJlLnJlc29sdXRpb247XG4gICAgICAgICAgICBmcmFtZSA9IHJlbmRlclRleHR1cmUuZnJhbWU7XG5cbiAgICAgICAgICAgIC8vIGJpbmQgdGhlIGJ1ZmZlclxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyVGV4dHVyZS5iaW5kKHJlbmRlclRleHR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgcmVzb2x1dGlvbiA9IHJlbmRlcmVyLnJlc29sdXRpb247XG5cbiAgICAgICAgICAgIGZyYW1lID0gVEVNUF9SRUNUO1xuICAgICAgICAgICAgZnJhbWUud2lkdGggPSByZW5kZXJlci53aWR0aDtcbiAgICAgICAgICAgIGZyYW1lLmhlaWdodCA9IHJlbmRlcmVyLmhlaWdodDtcblxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyVGV4dHVyZS5iaW5kKG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSBmcmFtZS53aWR0aCAqIHJlc29sdXRpb247XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGZyYW1lLmhlaWdodCAqIHJlc29sdXRpb247XG5cbiAgICAgICAgY29uc3Qgd2ViZ2xQaXhlbHMgPSBuZXcgVWludDhBcnJheShCWVRFU19QRVJfUElYRUwgKiB3aWR0aCAqIGhlaWdodCk7XG5cbiAgICAgICAgLy8gcmVhZCBwaXhlbHMgdG8gdGhlIGFycmF5XG4gICAgICAgIGNvbnN0IGdsID0gcmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgZ2wucmVhZFBpeGVscyhcbiAgICAgICAgICAgIGZyYW1lLnggKiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgZnJhbWUueSAqIHJlc29sdXRpb24sXG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgIGdsLlJHQkEsXG4gICAgICAgICAgICBnbC5VTlNJR05FRF9CWVRFLFxuICAgICAgICAgICAgd2ViZ2xQaXhlbHNcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoZ2VuZXJhdGVkKVxuICAgICAgICB7XG4gICAgICAgICAgICByZW5kZXJUZXh0dXJlLmRlc3Ryb3kodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBFeHRyYWN0LmFycmF5UG9zdERpdmlkZSh3ZWJnbFBpeGVscywgd2ViZ2xQaXhlbHMpO1xuXG4gICAgICAgIHJldHVybiB3ZWJnbFBpeGVscztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgZXh0cmFjdFxuICAgICAqXG4gICAgICovXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5leHRyYWN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFrZXMgcHJlbXVsdGlwbGllZCBwaXhlbCBkYXRhIGFuZCBwcm9kdWNlcyByZWd1bGFyIHBpeGVsIGRhdGFcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHBpeGVscyB7bnVtYmVyW10gfCBVaW50OEFycmF5IHwgVWludDhDbGFtcGVkQXJyYXl9IGFycmF5IG9mIHBpeGVsIGRhdGFcbiAgICAgKiBAcGFyYW0gb3V0IHtudW1iZXJbXSB8IFVpbnQ4QXJyYXkgfCBVaW50OENsYW1wZWRBcnJheX0gb3V0cHV0IGFycmF5XG4gICAgICovXG4gICAgc3RhdGljIGFycmF5UG9zdERpdmlkZShcbiAgICAgICAgcGl4ZWxzOiBudW1iZXJbXSB8IFVpbnQ4QXJyYXkgfCBVaW50OENsYW1wZWRBcnJheSwgb3V0OiBudW1iZXJbXSB8IFVpbnQ4QXJyYXkgfCBVaW50OENsYW1wZWRBcnJheVxuICAgICk6IHZvaWRcbiAgICB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGl4ZWxzLmxlbmd0aDsgaSArPSA0KVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBhbHBoYSA9IG91dFtpICsgM10gPSBwaXhlbHNbaSArIDNdO1xuXG4gICAgICAgICAgICBpZiAoYWxwaGEgIT09IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb3V0W2ldID0gTWF0aC5yb3VuZChNYXRoLm1pbihwaXhlbHNbaV0gKiAyNTUuMCAvIGFscGhhLCAyNTUuMCkpO1xuICAgICAgICAgICAgICAgIG91dFtpICsgMV0gPSBNYXRoLnJvdW5kKE1hdGgubWluKHBpeGVsc1tpICsgMV0gKiAyNTUuMCAvIGFscGhhLCAyNTUuMCkpO1xuICAgICAgICAgICAgICAgIG91dFtpICsgMl0gPSBNYXRoLnJvdW5kKE1hdGgubWluKHBpeGVsc1tpICsgMl0gKiAyNTUuMCAvIGFscGhhLCAyNTUuMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG91dFtpXSA9IHBpeGVsc1tpXTtcbiAgICAgICAgICAgICAgICBvdXRbaSArIDFdID0gcGl4ZWxzW2kgKyAxXTtcbiAgICAgICAgICAgICAgICBvdXRbaSArIDJdID0gcGl4ZWxzW2kgKyAyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICIvKipcbiAqIFNtYWxsZXIgdmVyc2lvbiBvZiB0aGUgYXN5bmMgbGlicmFyeSBjb25zdHJ1Y3RzLlxuICpcbiAqIEBuYW1lc3BhY2UgYXN5bmNcbiAqL1xuXG4vKipcbiAqIE5vb3AgZnVuY3Rpb25cbiAqXG4gKiBAaWdub3JlXG4gKiBAZnVuY3Rpb25cbiAqIEBtZW1iZXJvZiBhc3luY1xuICovXG5mdW5jdGlvbiBfbm9vcCgpIHsgLyogZW1wdHkgKi8gfVxuXG4vKipcbiAqIEl0ZXJhdGVzIGFuIGFycmF5IGluIHNlcmllcy5cbiAqXG4gKiBAbWVtYmVyb2YgYXN5bmNcbiAqIEBmdW5jdGlvbiBlYWNoU2VyaWVzXG4gKiBAcGFyYW0ge0FycmF5LjwqPn0gYXJyYXkgLSBBcnJheSB0byBpdGVyYXRlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gaXRlcmF0b3IgLSBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGVsZW1lbnQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBkb25lLCBvciBvbiBlcnJvci5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2RlZmVyTmV4dD1mYWxzZV0gLSBCcmVhayBzeW5jaHJvbm91cyBlYWNoIGxvb3AgYnkgY2FsbGluZyBuZXh0IHdpdGggYSBzZXRUaW1lb3V0IG9mIDEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYWNoU2VyaWVzKGFycmF5LCBpdGVyYXRvciwgY2FsbGJhY2ssIGRlZmVyTmV4dCkge1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCBsZW4gPSBhcnJheS5sZW5ndGg7XG5cbiAgICAoZnVuY3Rpb24gbmV4dChlcnIpIHtcbiAgICAgICAgaWYgKGVyciB8fCBpID09PSBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkZWZlck5leHQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZXJhdG9yKGFycmF5W2krK10sIG5leHQpO1xuICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpdGVyYXRvcihhcnJheVtpKytdLCBuZXh0KTtcbiAgICAgICAgfVxuICAgIH0pKCk7XG59XG5cbi8qKlxuICogRW5zdXJlcyBhIGZ1bmN0aW9uIGlzIG9ubHkgY2FsbGVkIG9uY2UuXG4gKlxuICogQGlnbm9yZVxuICogQG1lbWJlcm9mIGFzeW5jXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSB3cmFwcGluZyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb25seU9uY2UoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gb25jZVdyYXBwZXIoKSB7XG4gICAgICAgIGlmIChmbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYWxsYmFjayB3YXMgYWxyZWFkeSBjYWxsZWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYWxsRm4gPSBmbjtcblxuICAgICAgICBmbiA9IG51bGw7XG4gICAgICAgIGNhbGxGbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8qKlxuICogQXN5bmMgcXVldWUgaW1wbGVtZW50YXRpb24sXG4gKlxuICogQG1lbWJlcm9mIGFzeW5jXG4gKiBAZnVuY3Rpb24gcXVldWVcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHdvcmtlciAtIFRoZSB3b3JrZXIgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB0YXNrLlxuICogQHBhcmFtIHtudW1iZXJ9IGNvbmN1cnJlbmN5IC0gSG93IG1hbnkgd29ya2VycyB0byBydW4gaW4gcGFycmFsbGVsLlxuICogQHJldHVybiB7Kn0gVGhlIGFzeW5jIHF1ZXVlIG9iamVjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXVlKHdvcmtlciwgY29uY3VycmVuY3kpIHtcbiAgICBpZiAoY29uY3VycmVuY3kgPT0gbnVsbCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gICAgICAgIGNvbmN1cnJlbmN5ID0gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29uY3VycmVuY3kgPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb25jdXJyZW5jeSBtdXN0IG5vdCBiZSB6ZXJvJyk7XG4gICAgfVxuXG4gICAgbGV0IHdvcmtlcnMgPSAwO1xuICAgIGNvbnN0IHEgPSB7XG4gICAgICAgIF90YXNrczogW10sXG4gICAgICAgIGNvbmN1cnJlbmN5LFxuICAgICAgICBzYXR1cmF0ZWQ6IF9ub29wLFxuICAgICAgICB1bnNhdHVyYXRlZDogX25vb3AsXG4gICAgICAgIGJ1ZmZlcjogY29uY3VycmVuY3kgLyA0LFxuICAgICAgICBlbXB0eTogX25vb3AsXG4gICAgICAgIGRyYWluOiBfbm9vcCxcbiAgICAgICAgZXJyb3I6IF9ub29wLFxuICAgICAgICBzdGFydGVkOiBmYWxzZSxcbiAgICAgICAgcGF1c2VkOiBmYWxzZSxcbiAgICAgICAgcHVzaChkYXRhLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgX2luc2VydChkYXRhLCBmYWxzZSwgY2FsbGJhY2spO1xuICAgICAgICB9LFxuICAgICAgICBraWxsKCkge1xuICAgICAgICAgICAgd29ya2VycyA9IDA7XG4gICAgICAgICAgICBxLmRyYWluID0gX25vb3A7XG4gICAgICAgICAgICBxLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHEuX3Rhc2tzID0gW107XG4gICAgICAgIH0sXG4gICAgICAgIHVuc2hpZnQoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIF9pbnNlcnQoZGF0YSwgdHJ1ZSwgY2FsbGJhY2spO1xuICAgICAgICB9LFxuICAgICAgICBwcm9jZXNzKCkge1xuICAgICAgICAgICAgd2hpbGUgKCFxLnBhdXNlZCAmJiB3b3JrZXJzIDwgcS5jb25jdXJyZW5jeSAmJiBxLl90YXNrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrID0gcS5fdGFza3Muc2hpZnQoKTtcblxuICAgICAgICAgICAgICAgIGlmIChxLl90YXNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcS5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHdvcmtlcnMgKz0gMTtcblxuICAgICAgICAgICAgICAgIGlmICh3b3JrZXJzID09PSBxLmNvbmN1cnJlbmN5KSB7XG4gICAgICAgICAgICAgICAgICAgIHEuc2F0dXJhdGVkKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd29ya2VyKHRhc2suZGF0YSwgb25seU9uY2UoX25leHQodGFzaykpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbGVuZ3RoKCkge1xuICAgICAgICAgICAgcmV0dXJuIHEuX3Rhc2tzLmxlbmd0aDtcbiAgICAgICAgfSxcbiAgICAgICAgcnVubmluZygpIHtcbiAgICAgICAgICAgIHJldHVybiB3b3JrZXJzO1xuICAgICAgICB9LFxuICAgICAgICBpZGxlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHEuX3Rhc2tzLmxlbmd0aCArIHdvcmtlcnMgPT09IDA7XG4gICAgICAgIH0sXG4gICAgICAgIHBhdXNlKCkge1xuICAgICAgICAgICAgaWYgKHEucGF1c2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBxLnBhdXNlZCA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3VtZSgpIHtcbiAgICAgICAgICAgIGlmIChxLnBhdXNlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHEucGF1c2VkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIE5lZWQgdG8gY2FsbCBxLnByb2Nlc3Mgb25jZSBwZXIgY29uY3VycmVudFxuICAgICAgICAgICAgLy8gd29ya2VyIHRvIHByZXNlcnZlIGZ1bGwgY29uY3VycmVuY3kgYWZ0ZXIgcGF1c2VcbiAgICAgICAgICAgIGZvciAobGV0IHcgPSAxOyB3IDw9IHEuY29uY3VycmVuY3k7IHcrKykge1xuICAgICAgICAgICAgICAgIHEucHJvY2VzcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBfaW5zZXJ0KGRhdGEsIGluc2VydEF0RnJvbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayAhPSBudWxsICYmIHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Rhc2sgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBxLnN0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgICAgIGlmIChkYXRhID09IG51bGwgJiYgcS5pZGxlKCkpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lcS1udWxsLGVxZXFlcVxuICAgICAgICAgICAgLy8gY2FsbCBkcmFpbiBpbW1lZGlhdGVseSBpZiB0aGVyZSBhcmUgbm8gdGFza3NcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcS5kcmFpbigpLCAxKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBjYWxsYmFjazogdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gY2FsbGJhY2sgOiBfbm9vcCxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoaW5zZXJ0QXRGcm9udCkge1xuICAgICAgICAgICAgcS5fdGFza3MudW5zaGlmdChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHEuX3Rhc2tzLnB1c2goaXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHEucHJvY2VzcygpLCAxKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfbmV4dCh0YXNrKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgICAgd29ya2VycyAtPSAxO1xuXG4gICAgICAgICAgICB0YXNrLmNhbGxiYWNrLmFwcGx5KHRhc2ssIGFyZ3VtZW50cyk7XG5cbiAgICAgICAgICAgIGlmIChhcmd1bWVudHNbMF0gIT0gbnVsbCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gICAgICAgICAgICAgICAgcS5lcnJvcihhcmd1bWVudHNbMF0sIHRhc2suZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh3b3JrZXJzIDw9IChxLmNvbmN1cnJlbmN5IC0gcS5idWZmZXIpKSB7XG4gICAgICAgICAgICAgICAgcS51bnNhdHVyYXRlZCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocS5pZGxlKCkpIHtcbiAgICAgICAgICAgICAgICBxLmRyYWluKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHEucHJvY2VzcygpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBxO1xufVxuIiwgIi8vIGEgc2ltcGxlIGluLW1lbW9yeSBjYWNoZSBmb3IgcmVzb3VyY2VzXG5jb25zdCBjYWNoZSA9IHt9O1xuXG4vKipcbiAqIEEgc2ltcGxlIGluLW1lbW9yeSBjYWNoZSBmb3IgcmVzb3VyY2UuXG4gKlxuICogQG1lbWJlcm9mIG1pZGRsZXdhcmVcbiAqIEBmdW5jdGlvbiBjYWNoaW5nXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgTG9hZGVyLCBtaWRkbGV3YXJlIH0gZnJvbSAncmVzb3VyY2UtbG9hZGVyJztcbiAqIGNvbnN0IGxvYWRlciA9IG5ldyBMb2FkZXIoKTtcbiAqIGxvYWRlci51c2UobWlkZGxld2FyZS5jYWNoaW5nKTtcbiAqIEBwYXJhbSB7UmVzb3VyY2V9IHJlc291cmNlIC0gQ3VycmVudCBSZXNvdXJjZVxuICogQHBhcmFtIHtmdW5jdGlvbn0gbmV4dCAtIENhbGxiYWNrIHdoZW4gY29tcGxldGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhY2hpbmcocmVzb3VyY2UsIG5leHQpIHtcbiAgICAvLyBpZiBjYWNoZWQsIHRoZW4gc2V0IGRhdGEgYW5kIGNvbXBsZXRlIHRoZSByZXNvdXJjZVxuICAgIGlmIChjYWNoZVtyZXNvdXJjZS51cmxdKSB7XG4gICAgICAgIHJlc291cmNlLmRhdGEgPSBjYWNoZVtyZXNvdXJjZS51cmxdO1xuICAgICAgICByZXNvdXJjZS5jb21wbGV0ZSgpOyAvLyBtYXJrcyByZXNvdXJjZSBsb2FkIGNvbXBsZXRlIGFuZCBzdG9wcyBwcm9jZXNzaW5nIGJlZm9yZSBtaWRkbGV3YXJlc1xuICAgIH1cbiAgICAvLyBpZiBub3QgY2FjaGVkLCB3YWl0IGZvciBjb21wbGV0ZSBhbmQgc3RvcmUgaXQgaW4gdGhlIGNhY2hlLlxuICAgIGVsc2Uge1xuICAgICAgICByZXNvdXJjZS5vbkNvbXBsZXRlLm9uY2UoKCkgPT4gKGNhY2hlW3RoaXMudXJsXSA9IHRoaXMuZGF0YSkpO1xuICAgIH1cblxuICAgIG5leHQoKTtcbn1cbiIsICJpbXBvcnQgcGFyc2VVcmkgZnJvbSAncGFyc2UtdXJpJztcbmltcG9ydCBTaWduYWwgZnJvbSAnbWluaS1zaWduYWxzJztcblxuLy8gdGVzdHMgaWYgQ09SUyBpcyBzdXBwb3J0ZWQgaW4gWEhSLCBpZiBub3Qgd2UgbmVlZCB0byB1c2UgWERSXG5jb25zdCB1c2VYZHIgPSAhISh3aW5kb3cuWERvbWFpblJlcXVlc3QgJiYgISgnd2l0aENyZWRlbnRpYWxzJyBpbiAobmV3IFhNTEh0dHBSZXF1ZXN0KCkpKSk7XG5sZXQgdGVtcEFuY2hvciA9IG51bGw7XG5cbi8vIHNvbWUgc3RhdHVzIGNvbnN0YW50c1xuY29uc3QgU1RBVFVTX05PTkUgPSAwO1xuY29uc3QgU1RBVFVTX09LID0gMjAwO1xuY29uc3QgU1RBVFVTX0VNUFRZID0gMjA0O1xuY29uc3QgU1RBVFVTX0lFX0JVR19FTVBUWSA9IDEyMjM7XG5jb25zdCBTVEFUVVNfVFlQRV9PSyA9IDI7XG5cbi8vIG5vb3BcbmZ1bmN0aW9uIF9ub29wKCkgeyAvKiBlbXB0eSAqLyB9XG5cbi8qKlxuICogTWFuYWdlcyB0aGUgc3RhdGUgYW5kIGxvYWRpbmcgb2YgYSByZXNvdXJjZSBhbmQgYWxsIGNoaWxkIHJlc291cmNlcy5cbiAqXG4gKiBAY2xhc3NcbiAqL1xuY2xhc3MgUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGxvYWQgdHlwZSB0byBiZSB1c2VkIGZvciBhIHNwZWNpZmljIGV4dGVuc2lvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXh0bmFtZSAtIFRoZSBleHRlbnNpb24gdG8gc2V0IHRoZSB0eXBlIGZvciwgZS5nLiBcInBuZ1wiIG9yIFwiZm50XCJcbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlLkxPQURfVFlQRX0gbG9hZFR5cGUgLSBUaGUgbG9hZCB0eXBlIHRvIHNldCBpdCB0by5cbiAgICAgKi9cbiAgICBzdGF0aWMgc2V0RXh0ZW5zaW9uTG9hZFR5cGUoZXh0bmFtZSwgbG9hZFR5cGUpIHtcbiAgICAgICAgc2V0RXh0TWFwKFJlc291cmNlLl9sb2FkVHlwZU1hcCwgZXh0bmFtZSwgbG9hZFR5cGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGxvYWQgdHlwZSB0byBiZSB1c2VkIGZvciBhIHNwZWNpZmljIGV4dGVuc2lvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXh0bmFtZSAtIFRoZSBleHRlbnNpb24gdG8gc2V0IHRoZSB0eXBlIGZvciwgZS5nLiBcInBuZ1wiIG9yIFwiZm50XCJcbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFfSB4aHJUeXBlIC0gVGhlIHhociB0eXBlIHRvIHNldCBpdCB0by5cbiAgICAgKi9cbiAgICBzdGF0aWMgc2V0RXh0ZW5zaW9uWGhyVHlwZShleHRuYW1lLCB4aHJUeXBlKSB7XG4gICAgICAgIHNldEV4dE1hcChSZXNvdXJjZS5feGhyVHlwZU1hcCwgZXh0bmFtZSwgeGhyVHlwZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcmVzb3VyY2UgdG8gbG9hZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gdXJsIC0gVGhlIHVybCBmb3IgdGhpcyByZXNvdXJjZSwgZm9yIGF1ZGlvL3ZpZGVvIGxvYWRzIHlvdSBjYW4gcGFzc1xuICAgICAqICAgICAgYW4gYXJyYXkgb2Ygc291cmNlcy5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBsb2FkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfGJvb2xlYW59IFtvcHRpb25zLmNyb3NzT3JpZ2luXSAtIElzIHRoaXMgcmVxdWVzdCBjcm9zcy1vcmlnaW4/IERlZmF1bHQgaXMgdG9cbiAgICAgKiAgICAgIGRldGVybWluZSBhdXRvbWF0aWNhbGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy50aW1lb3V0PTBdIC0gQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIGxvYWQuIElmIHRoZSBsb2FkIHRha2VzXG4gICAgICogICAgICBsb25nZXIgdGhhbiB0aGlzIHRpbWUgaXQgaXMgY2FuY2VsbGVkIGFuZCB0aGUgbG9hZCBpcyBjb25zaWRlcmVkIGEgZmFpbHVyZS4gSWYgdGhpcyB2YWx1ZSBpc1xuICAgICAqICAgICAgc2V0IHRvIGAwYCB0aGVuIHRoZXJlIGlzIG5vIGV4cGxpY2l0IHRpbWVvdXQuXG4gICAgICogQHBhcmFtIHtSZXNvdXJjZS5MT0FEX1RZUEV9IFtvcHRpb25zLmxvYWRUeXBlPVJlc291cmNlLkxPQURfVFlQRS5YSFJdIC0gSG93IHNob3VsZCB0aGlzIHJlc291cmNlXG4gICAgICogICAgICBiZSBsb2FkZWQ/XG4gICAgICogQHBhcmFtIHtSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRX0gW29wdGlvbnMueGhyVHlwZT1SZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5ERUZBVUxUXSAtIEhvd1xuICAgICAqICAgICAgc2hvdWxkIHRoZSBkYXRhIGJlaW5nIGxvYWRlZCBiZSBpbnRlcnByZXRlZCB3aGVuIHVzaW5nIFhIUj9cbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlLklNZXRhZGF0YX0gW29wdGlvbnMubWV0YWRhdGFdIC0gRXh0cmEgY29uZmlndXJhdGlvbiBmb3IgbWlkZGxld2FyZSBhbmQgdGhlIFJlc291cmNlIG9iamVjdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCB1cmwsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCB0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb3RoIG5hbWUgYW5kIHVybCBhcmUgcmVxdWlyZWQgZm9yIGNvbnN0cnVjdGluZyBhIHJlc291cmNlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzdGF0ZSBmbGFncyBvZiB0aGlzIHJlc291cmNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9mbGFncyA9IDA7XG5cbiAgICAgICAgLy8gc2V0IGRhdGEgdXJsIGZsYWcsIG5lZWRzIHRvIGJlIHNldCBlYXJseSBmb3Igc29tZSBfZGV0ZXJtaW5lWCBjaGVja3MgdG8gd29yay5cbiAgICAgICAgdGhpcy5fc2V0RmxhZyhSZXNvdXJjZS5TVEFUVVNfRkxBR1MuREFUQV9VUkwsIHVybC5pbmRleE9mKCdkYXRhOicpID09PSAwKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhpcyByZXNvdXJjZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1cmwgdXNlZCB0byBsb2FkIHRoaXMgcmVzb3VyY2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV4dGVuc2lvbiB1c2VkIHRvIGxvYWQgdGhpcyByZXNvdXJjZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uID0gdGhpcy5fZ2V0RXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkYXRhIHRoYXQgd2FzIGxvYWRlZCBieSB0aGUgcmVzb3VyY2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2FueX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElzIHRoaXMgcmVxdWVzdCBjcm9zcy1vcmlnaW4/IElmIHVuc2V0LCBkZXRlcm1pbmVkIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3Jvc3NPcmlnaW4gPSBvcHRpb25zLmNyb3NzT3JpZ2luID09PSB0cnVlID8gJ2Fub255bW91cycgOiBvcHRpb25zLmNyb3NzT3JpZ2luO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgbG9hZC4gSWYgdGhlIGxvYWQgdGFrZXMgbG9uZ2VyIHRoYW4gdGhpcyB0aW1lXG4gICAgICAgICAqIGl0IGlzIGNhbmNlbGxlZCBhbmQgdGhlIGxvYWQgaXMgY29uc2lkZXJlZCBhIGZhaWx1cmUuIElmIHRoaXMgdmFsdWUgaXMgc2V0IHRvIGAwYFxuICAgICAgICAgKiB0aGVuIHRoZXJlIGlzIG5vIGV4cGxpY2l0IHRpbWVvdXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWV0aG9kIG9mIGxvYWRpbmcgdG8gdXNlIGZvciB0aGlzIHJlc291cmNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtSZXNvdXJjZS5MT0FEX1RZUEV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxvYWRUeXBlID0gb3B0aW9ucy5sb2FkVHlwZSB8fCB0aGlzLl9kZXRlcm1pbmVMb2FkVHlwZSgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHlwZSB1c2VkIHRvIGxvYWQgdGhlIHJlc291cmNlIHZpYSBYSFIuIElmIHVuc2V0LCBkZXRlcm1pbmVkIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueGhyVHlwZSA9IG9wdGlvbnMueGhyVHlwZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRXh0cmEgaW5mbyBmb3IgbWlkZGxld2FyZSwgYW5kIGNvbnRyb2xsaW5nIHNwZWNpZmljcyBhYm91dCBob3cgdGhlIHJlc291cmNlIGxvYWRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBOb3RlIHRoYXQgaWYgeW91IHBhc3MgaW4gYSBgbG9hZEVsZW1lbnRgLCB0aGUgUmVzb3VyY2UgY2xhc3MgdGFrZXMgb3duZXJzaGlwIG9mIGl0LlxuICAgICAgICAgKiBNZWFuaW5nIGl0IHdpbGwgbW9kaWZ5IGl0IGFzIGl0IHNlZXMgZml0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtSZXNvdXJjZS5JTWV0YWRhdGF9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gb3B0aW9ucy5tZXRhZGF0YSB8fCB7fTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVycm9yIHRoYXQgb2NjdXJyZWQgd2hpbGUgbG9hZGluZyAoaWYgYW55KS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge0Vycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBYSFIgb2JqZWN0IHRoYXQgd2FzIHVzZWQgdG8gbG9hZCB0aGlzIHJlc291cmNlLiBUaGlzIGlzIG9ubHkgc2V0XG4gICAgICAgICAqIHdoZW4gYGxvYWRUeXBlYCBpcyBgUmVzb3VyY2UuTE9BRF9UWVBFLlhIUmAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtYTUxIdHRwUmVxdWVzdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueGhyID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNoaWxkIHJlc291cmNlcyB0aGlzIHJlc291cmNlIG93bnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtSZXNvdXJjZVtdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVzb3VyY2UgdHlwZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge1Jlc291cmNlLlRZUEV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBSZXNvdXJjZS5UWVBFLlVOS05PV047XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBwcm9ncmVzcyBjaHVuayBvd25lZCBieSB0aGlzIHJlc291cmNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcm9ncmVzc0NodW5rID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGBkZXF1ZXVlYCBtZXRob2QgdGhhdCB3aWxsIGJlIHVzZWQgYSBzdG9yYWdlIHBsYWNlIGZvciB0aGUgYXN5bmMgcXVldWUgZGVxdWV1ZSBtZXRob2RcbiAgICAgICAgICogdXNlZCBwcml2YXRlbHkgYnkgdGhlIGxvYWRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7ZnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9kZXF1ZXVlID0gX25vb3A7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgYSBzdG9yYWdlIHBsYWNlIGZvciB0aGUgb24gbG9hZCBiaW5kaW5nIHVzZWQgcHJpdmF0ZWx5IGJ5IHRoZSBsb2FkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge2Z1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fb25Mb2FkQmluZGluZyA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0aW1lciBmb3IgZWxlbWVudCBsb2FkcyB0byBjaGVjayBpZiB0aGV5IHRpbWVvdXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2VsZW1lbnRUaW1lciA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBgY29tcGxldGVgIGZ1bmN0aW9uIGJvdW5kIHRvIHRoaXMgcmVzb3VyY2UncyBjb250ZXh0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtmdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JvdW5kQ29tcGxldGUgPSB0aGlzLmNvbXBsZXRlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBgX29uRXJyb3JgIGZ1bmN0aW9uIGJvdW5kIHRvIHRoaXMgcmVzb3VyY2UncyBjb250ZXh0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtmdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JvdW5kT25FcnJvciA9IHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGBfb25Qcm9ncmVzc2AgZnVuY3Rpb24gYm91bmQgdG8gdGhpcyByZXNvdXJjZSdzIGNvbnRleHQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge2Z1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYm91bmRPblByb2dyZXNzID0gdGhpcy5fb25Qcm9ncmVzcy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYF9vblRpbWVvdXRgIGZ1bmN0aW9uIGJvdW5kIHRvIHRoaXMgcmVzb3VyY2UncyBjb250ZXh0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtmdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JvdW5kT25UaW1lb3V0ID0gdGhpcy5fb25UaW1lb3V0LmJpbmQodGhpcyk7XG5cbiAgICAgICAgLy8geGhyIGNhbGxiYWNrc1xuICAgICAgICB0aGlzLl9ib3VuZFhock9uRXJyb3IgPSB0aGlzLl94aHJPbkVycm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2JvdW5kWGhyT25UaW1lb3V0ID0gdGhpcy5feGhyT25UaW1lb3V0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2JvdW5kWGhyT25BYm9ydCA9IHRoaXMuX3hock9uQWJvcnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fYm91bmRYaHJPbkxvYWQgPSB0aGlzLl94aHJPbkxvYWQuYmluZCh0aGlzKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzcGF0Y2hlZCB3aGVuIHRoZSByZXNvdXJjZSBiZWluZ3MgdG8gbG9hZC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGNhbGxiYWNrIGxvb2tzIGxpa2Uge0BsaW5rIFJlc291cmNlLk9uU3RhcnRTaWduYWx9LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtTaWduYWw8UmVzb3VyY2UuT25TdGFydFNpZ25hbD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uU3RhcnQgPSBuZXcgU2lnbmFsKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc3BhdGNoZWQgZWFjaCB0aW1lIHByb2dyZXNzIG9mIHRoaXMgcmVzb3VyY2UgbG9hZCB1cGRhdGVzLlxuICAgICAgICAgKiBOb3QgYWxsIHJlc291cmNlcyB0eXBlcyBhbmQgbG9hZGVyIHN5c3RlbXMgY2FuIHN1cHBvcnQgdGhpcyBldmVudFxuICAgICAgICAgKiBzbyBzb21ldGltZXMgaXQgbWF5IG5vdCBiZSBhdmFpbGFibGUuIElmIHRoZSByZXNvdXJjZVxuICAgICAgICAgKiBpcyBiZWluZyBsb2FkZWQgb24gYSBtb2Rlcm4gYnJvd3NlciwgdXNpbmcgWEhSLCBhbmQgdGhlIHJlbW90ZSBzZXJ2ZXJcbiAgICAgICAgICogcHJvcGVybHkgc2V0cyBDb250ZW50LUxlbmd0aCBoZWFkZXJzLCB0aGVuIHRoaXMgd2lsbCBiZSBhdmFpbGFibGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBjYWxsYmFjayBsb29rcyBsaWtlIHtAbGluayBSZXNvdXJjZS5PblByb2dyZXNzU2lnbmFsfS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7U2lnbmFsPFJlc291cmNlLk9uUHJvZ3Jlc3NTaWduYWw+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vblByb2dyZXNzID0gbmV3IFNpZ25hbCgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNwYXRjaGVkIG9uY2UgdGhpcyByZXNvdXJjZSBoYXMgbG9hZGVkLCBpZiB0aGVyZSB3YXMgYW4gZXJyb3IgaXQgd2lsbFxuICAgICAgICAgKiBiZSBpbiB0aGUgYGVycm9yYCBwcm9wZXJ0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGNhbGxiYWNrIGxvb2tzIGxpa2Uge0BsaW5rIFJlc291cmNlLk9uQ29tcGxldGVTaWduYWx9LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtTaWduYWw8UmVzb3VyY2UuT25Db21wbGV0ZVNpZ25hbD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQ29tcGxldGUgPSBuZXcgU2lnbmFsKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgdGhpcyByZXNvdXJjZSBoYXMgaGFkIGFsbCB0aGUgKmFmdGVyKiBtaWRkbGV3YXJlIHJ1biBvbiBpdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGNhbGxiYWNrIGxvb2tzIGxpa2Uge0BsaW5rIFJlc291cmNlLk9uQ29tcGxldGVTaWduYWx9LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtTaWduYWw8UmVzb3VyY2UuT25Db21wbGV0ZVNpZ25hbD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQWZ0ZXJNaWRkbGV3YXJlID0gbmV3IFNpZ25hbCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIHJlc291cmNlIHN0YXJ0cyB0byBsb2FkLlxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIFJlc291cmNlXG4gICAgICogQGNhbGxiYWNrIE9uU3RhcnRTaWduYWxcbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlfSByZXNvdXJjZSAtIFRoZSByZXNvdXJjZSB0aGF0IHRoZSBldmVudCBoYXBwZW5lZCBvbi5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIHJlc291cmNlIHJlcG9ydHMgbG9hZGluZyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBSZXNvdXJjZVxuICAgICAqIEBjYWxsYmFjayBPblByb2dyZXNzU2lnbmFsXG4gICAgICogQHBhcmFtIHtSZXNvdXJjZX0gcmVzb3VyY2UgLSBUaGUgcmVzb3VyY2UgdGhhdCB0aGUgZXZlbnQgaGFwcGVuZWQgb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBlcmNlbnRhZ2UgLSBUaGUgcHJvZ3Jlc3Mgb2YgdGhlIGxvYWQgaW4gdGhlIHJhbmdlIFswLCAxXS5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIHJlc291cmNlIGZpbmlzaGVzIGxvYWRpbmcuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgUmVzb3VyY2VcbiAgICAgKiBAY2FsbGJhY2sgT25Db21wbGV0ZVNpZ25hbFxuICAgICAqIEBwYXJhbSB7UmVzb3VyY2V9IHJlc291cmNlIC0gVGhlIHJlc291cmNlIHRoYXQgdGhlIGV2ZW50IGhhcHBlbmVkIG9uLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlc291cmNlXG4gICAgICogQHR5cGVkZWYge29iamVjdH0gSU1ldGFkYXRhXG4gICAgICogQHByb3BlcnR5IHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxBdWRpb0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gW2xvYWRFbGVtZW50PW51bGxdIC0gVGhlXG4gICAgICogICAgICBlbGVtZW50IHRvIHVzZSBmb3IgbG9hZGluZywgaW5zdGVhZCBvZiBjcmVhdGluZyBvbmUuXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2tpcFNvdXJjZT1mYWxzZV0gLSBTa2lwcyBhZGRpbmcgc291cmNlKHMpIHRvIHRoZSBsb2FkIGVsZW1lbnQuIFRoaXNcbiAgICAgKiAgICAgIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0byBwYXNzIGluIGEgYGxvYWRFbGVtZW50YCB0aGF0IHlvdSBhbHJlYWR5IGFkZGVkIGxvYWQgc291cmNlcyB0by5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xzdHJpbmdbXX0gW21pbWVUeXBlXSAtIFRoZSBtaW1lIHR5cGUgdG8gdXNlIGZvciB0aGUgc291cmNlIGVsZW1lbnRcbiAgICAgKiAgICAgIG9mIGEgdmlkZW8vYXVkaW8gZWxtZW50LiBJZiB0aGUgdXJscyBhcmUgYW4gYXJyYXksIHlvdSBjYW4gcGFzcyB0aGlzIGFzIGFuIGFycmF5IGFzIHdlbGxcbiAgICAgKiAgICAgIHdoZXJlIGVhY2ggaW5kZXggaXMgdGhlIG1pbWUgdHlwZSB0byB1c2UgZm9yIHRoZSBjb3JyZXNwb25kaW5nIHVybCBpbmRleC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIFN0b3JlcyB3aGV0aGVyIG9yIG5vdCB0aGlzIHVybCBpcyBhIGRhdGEgdXJsLlxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgaXNEYXRhVXJsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGFzRmxhZyhSZXNvdXJjZS5TVEFUVVNfRkxBR1MuREFUQV9VUkwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc2NyaWJlcyBpZiB0aGlzIHJlc291cmNlIGhhcyBmaW5pc2hlZCBsb2FkaW5nLiBJcyB0cnVlIHdoZW4gdGhlIHJlc291cmNlIGhhcyBjb21wbGV0ZWx5XG4gICAgICogbG9hZGVkLlxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgaXNDb21wbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0ZsYWcoUmVzb3VyY2UuU1RBVFVTX0ZMQUdTLkNPTVBMRVRFKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNjcmliZXMgaWYgdGhpcyByZXNvdXJjZSBpcyBjdXJyZW50bHkgbG9hZGluZy4gSXMgdHJ1ZSB3aGVuIHRoZSByZXNvdXJjZSBzdGFydHMgbG9hZGluZyxcbiAgICAgKiBhbmQgaXMgZmFsc2UgYWdhaW4gd2hlbiBjb21wbGV0ZS5cbiAgICAgKlxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGlzTG9hZGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0ZsYWcoUmVzb3VyY2UuU1RBVFVTX0ZMQUdTLkxPQURJTkcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoZSByZXNvdXJjZSBhcyBjb21wbGV0ZS5cbiAgICAgKlxuICAgICAqL1xuICAgIGNvbXBsZXRlKCkge1xuICAgICAgICB0aGlzLl9jbGVhckV2ZW50cygpO1xuICAgICAgICB0aGlzLl9maW5pc2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBYm9ydHMgdGhlIGxvYWRpbmcgb2YgdGhpcyByZXNvdXJjZSwgd2l0aCBhbiBvcHRpb25hbCBtZXNzYWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byB1c2UgZm9yIHRoZSBlcnJvclxuICAgICAqL1xuICAgIGFib3J0KG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYWJvcnQgY2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcywgaWdub3JlIHN1YnNlcXVlbnQgY2FsbHMuXG4gICAgICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzdG9yZSBlcnJvclxuICAgICAgICB0aGlzLmVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuXG4gICAgICAgIC8vIGNsZWFyIGV2ZW50cyBiZWZvcmUgY2FsbGluZyBhYm9ydHNcbiAgICAgICAgdGhpcy5fY2xlYXJFdmVudHMoKTtcblxuICAgICAgICAvLyBhYm9ydCB0aGUgYWN0dWFsIGxvYWRpbmdcbiAgICAgICAgaWYgKHRoaXMueGhyKSB7XG4gICAgICAgICAgICB0aGlzLnhoci5hYm9ydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMueGRyKSB7XG4gICAgICAgICAgICB0aGlzLnhkci5hYm9ydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGF0YSkge1xuICAgICAgICAgICAgLy8gc2luZ2xlIHNvdXJjZVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5zcmMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc3JjID0gUmVzb3VyY2UuRU1QVFlfR0lGO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbXVsdGktc291cmNlXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5kYXRhLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnJlbW92ZUNoaWxkKHRoaXMuZGF0YS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkb25lIG5vdy5cbiAgICAgICAgdGhpcy5fZmluaXNoKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2lja3Mgb2ZmIGxvYWRpbmcgb2YgdGhpcyByZXNvdXJjZS4gVGhpcyBtZXRob2QgaXMgYXN5bmNocm9ub3VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZXNvdXJjZS5PbkNvbXBsZXRlU2lnbmFsfSBbY2JdIC0gT3B0aW9uYWwgY2FsbGJhY2sgdG8gY2FsbCBvbmNlIHRoZSByZXNvdXJjZSBpcyBsb2FkZWQuXG4gICAgICovXG4gICAgbG9hZChjYikge1xuICAgICAgICBpZiAodGhpcy5pc0xvYWRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzQ29tcGxldGUpIHtcbiAgICAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gY2IodGhpcyksIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2IpIHtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZS5vbmNlKGNiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NldEZsYWcoUmVzb3VyY2UuU1RBVFVTX0ZMQUdTLkxPQURJTkcsIHRydWUpO1xuXG4gICAgICAgIHRoaXMub25TdGFydC5kaXNwYXRjaCh0aGlzKTtcblxuICAgICAgICAvLyBpZiB1bnNldCwgZGV0ZXJtaW5lIHRoZSB2YWx1ZVxuICAgICAgICBpZiAodGhpcy5jcm9zc09yaWdpbiA9PT0gZmFsc2UgfHwgdHlwZW9mIHRoaXMuY3Jvc3NPcmlnaW4gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLmNyb3NzT3JpZ2luID0gdGhpcy5fZGV0ZXJtaW5lQ3Jvc3NPcmlnaW4odGhpcy51cmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLmxvYWRUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIFJlc291cmNlLkxPQURfVFlQRS5JTUFHRTpcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBSZXNvdXJjZS5UWVBFLklNQUdFO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRFbGVtZW50KCdpbWFnZScpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFJlc291cmNlLkxPQURfVFlQRS5BVURJTzpcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBSZXNvdXJjZS5UWVBFLkFVRElPO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRTb3VyY2VFbGVtZW50KCdhdWRpbycpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFJlc291cmNlLkxPQURfVFlQRS5WSURFTzpcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBSZXNvdXJjZS5UWVBFLlZJREVPO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRTb3VyY2VFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFJlc291cmNlLkxPQURfVFlQRS5YSFI6XG4gICAgICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZiAodXNlWGRyICYmIHRoaXMuY3Jvc3NPcmlnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9hZFhkcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9hZFhocigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgZmxhZyBpcyBzZXQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmbGFnIC0gVGhlIGZsYWcgdG8gY2hlY2suXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZmxhZyBpcyBzZXQuXG4gICAgICovXG4gICAgX2hhc0ZsYWcoZmxhZykge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2ZsYWdzICYgZmxhZykgIT09IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogKFVuKVNldHMgdGhlIGZsYWcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmbGFnIC0gVGhlIGZsYWcgdG8gKHVuKXNldC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlIC0gV2hldGhlciB0byBzZXQgb3IgKHVuKXNldCB0aGUgZmxhZy5cbiAgICAgKi9cbiAgICBfc2V0RmxhZyhmbGFnLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9mbGFncyA9IHZhbHVlID8gKHRoaXMuX2ZsYWdzIHwgZmxhZykgOiAodGhpcy5fZmxhZ3MgJiB+ZmxhZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCB0aGUgZXZlbnRzIGZyb20gdGhlIHVuZGVybHlpbmcgbG9hZGluZyBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jbGVhckV2ZW50cygpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2VsZW1lbnRUaW1lcik7XG5cbiAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5kYXRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fYm91bmRPbkVycm9yLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmRhdGEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuX2JvdW5kQ29tcGxldGUsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5yZW1vdmVFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIHRoaXMuX2JvdW5kT25Qcm9ncmVzcywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5kYXRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgdGhpcy5fYm91bmRDb21wbGV0ZSwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMueGhyKSB7XG4gICAgICAgICAgICBpZiAodGhpcy54aHIucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHRoaXMueGhyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fYm91bmRYaHJPbkVycm9yLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy54aHIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGltZW91dCcsIHRoaXMuX2JvdW5kWGhyT25UaW1lb3V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy54aHIucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCB0aGlzLl9ib3VuZFhock9uQWJvcnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnhoci5yZW1vdmVFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIHRoaXMuX2JvdW5kT25Qcm9ncmVzcywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMueGhyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLl9ib3VuZFhock9uTG9hZCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy54aHIub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy54aHIub250aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnhoci5vbnByb2dyZXNzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnhoci5vbmxvYWQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluYWxpemVzIHRoZSBsb2FkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZmluaXNoKCkge1xuICAgICAgICBpZiAodGhpcy5pc0NvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBsZXRlIGNhbGxlZCBhZ2FpbiBmb3IgYW4gYWxyZWFkeSBjb21wbGV0ZWQgcmVzb3VyY2UuJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zZXRGbGFnKFJlc291cmNlLlNUQVRVU19GTEFHUy5DT01QTEVURSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuX3NldEZsYWcoUmVzb3VyY2UuU1RBVFVTX0ZMQUdTLkxPQURJTkcsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLm9uQ29tcGxldGUuZGlzcGF0Y2godGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhpcyByZXNvdXJjZXMgdXNpbmcgYW4gZWxlbWVudCB0aGF0IGhhcyBhIHNpbmdsZSBzb3VyY2UsXG4gICAgICogbGlrZSBhbiBIVE1MSW1hZ2VFbGVtZW50LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIGVsZW1lbnQgdG8gdXNlLlxuICAgICAqL1xuICAgIF9sb2FkRWxlbWVudCh0eXBlKSB7XG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhLmxvYWRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLm1ldGFkYXRhLmxvYWRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdpbWFnZScgJiYgdHlwZW9mIHdpbmRvdy5JbWFnZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNyb3NzT3JpZ2luKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEuY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm1ldGFkYXRhLnNraXBTb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5zcmMgPSB0aGlzLnVybDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGF0YS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX2JvdW5kT25FcnJvciwgZmFsc2UpO1xuICAgICAgICB0aGlzLmRhdGEuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuX2JvdW5kQ29tcGxldGUsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5kYXRhLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgdGhpcy5fYm91bmRPblByb2dyZXNzLCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKHRoaXMudGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudFRpbWVyID0gc2V0VGltZW91dCh0aGlzLl9ib3VuZE9uVGltZW91dCwgdGhpcy50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoaXMgcmVzb3VyY2VzIHVzaW5nIGFuIGVsZW1lbnQgdGhhdCBoYXMgbXVsdGlwbGUgc291cmNlcyxcbiAgICAgKiBsaWtlIGFuIEhUTUxBdWRpb0VsZW1lbnQgb3IgSFRNTFZpZGVvRWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBUaGUgdHlwZSBvZiBlbGVtZW50IHRvIHVzZS5cbiAgICAgKi9cbiAgICBfbG9hZFNvdXJjZUVsZW1lbnQodHlwZSkge1xuICAgICAgICBpZiAodGhpcy5tZXRhZGF0YS5sb2FkRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5tZXRhZGF0YS5sb2FkRWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnYXVkaW8nICYmIHR5cGVvZiB3aW5kb3cuQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgQXVkaW8oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmFib3J0KGBVbnN1cHBvcnRlZCBlbGVtZW50OiAke3R5cGV9YCk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNyb3NzT3JpZ2luKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEuY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm1ldGFkYXRhLnNraXBTb3VyY2UpIHtcbiAgICAgICAgICAgIC8vIHN1cHBvcnQgZm9yIENvY29vbkpTIENhbnZhcysgcnVudGltZSwgbGFja3MgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJylcbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IuaXNDb2Nvb25KUykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5zcmMgPSBBcnJheS5pc0FycmF5KHRoaXMudXJsKSA/IHRoaXMudXJsWzBdIDogdGhpcy51cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRoaXMudXJsKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlcyA9IHRoaXMubWV0YWRhdGEubWltZVR5cGU7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudXJsLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVNvdXJjZSh0eXBlLCB0aGlzLnVybFtpXSwgQXJyYXkuaXNBcnJheShtaW1lVHlwZXMpID8gbWltZVR5cGVzW2ldIDogbWltZVR5cGVzKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlcyA9IHRoaXMubWV0YWRhdGEubWltZVR5cGU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVNvdXJjZSh0eXBlLCB0aGlzLnVybCwgQXJyYXkuaXNBcnJheShtaW1lVHlwZXMpID8gbWltZVR5cGVzWzBdIDogbWltZVR5cGVzKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRhdGEuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLl9ib3VuZE9uRXJyb3IsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5kYXRhLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLl9ib3VuZENvbXBsZXRlLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuZGF0YS5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIHRoaXMuX2JvdW5kT25Qcm9ncmVzcywgZmFsc2UpO1xuICAgICAgICB0aGlzLmRhdGEuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCB0aGlzLl9ib3VuZENvbXBsZXRlLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5kYXRhLmxvYWQoKTtcblxuICAgICAgICBpZiAodGhpcy50aW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50VGltZXIgPSBzZXRUaW1lb3V0KHRoaXMuX2JvdW5kT25UaW1lb3V0LCB0aGlzLnRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhpcyByZXNvdXJjZXMgdXNpbmcgYW4gWE1MSHR0cFJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9sb2FkWGhyKCkge1xuICAgICAgICAvLyBpZiB1bnNldCwgZGV0ZXJtaW5lIHRoZSB2YWx1ZVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMueGhyVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMueGhyVHlwZSA9IHRoaXMuX2RldGVybWluZVhoclR5cGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHhociA9IHRoaXMueGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgLy8gc2V0IHRoZSByZXF1ZXN0IHR5cGUgYW5kIHVybFxuICAgICAgICB4aHIub3BlbignR0VUJywgdGhpcy51cmwsIHRydWUpO1xuXG4gICAgICAgIHhoci50aW1lb3V0ID0gdGhpcy50aW1lb3V0O1xuXG4gICAgICAgIC8vIGxvYWQganNvbiBhcyB0ZXh0IGFuZCBwYXJzZSBpdCBvdXJzZWx2ZXMuIFdlIGRvIHRoaXMgYmVjYXVzZSBzb21lIGJyb3dzZXJzXG4gICAgICAgIC8vICpjb3VnaCogc2FmYXJpICpjb3VnaCogY2FuJ3QgZGVhbCB3aXRoIGl0LlxuICAgICAgICBpZiAodGhpcy54aHJUeXBlID09PSBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5KU09OIHx8IHRoaXMueGhyVHlwZSA9PT0gUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQpIHtcbiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5URVhUO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IHRoaXMueGhyVHlwZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX2JvdW5kWGhyT25FcnJvciwgZmFsc2UpO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcigndGltZW91dCcsIHRoaXMuX2JvdW5kWGhyT25UaW1lb3V0LCBmYWxzZSk7XG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIHRoaXMuX2JvdW5kWGhyT25BYm9ydCwgZmFsc2UpO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCB0aGlzLl9ib3VuZE9uUHJvZ3Jlc3MsIGZhbHNlKTtcbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLl9ib3VuZFhock9uTG9hZCwgZmFsc2UpO1xuXG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhpcyByZXNvdXJjZXMgdXNpbmcgYW4gWERvbWFpblJlcXVlc3QuIFRoaXMgaXMgaGVyZSBiZWNhdXNlIHdlIG5lZWQgdG8gc3VwcG9ydCBJRTkgKGdyb3NzKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2xvYWRYZHIoKSB7XG4gICAgICAgIC8vIGlmIHVuc2V0LCBkZXRlcm1pbmUgdGhlIHZhbHVlXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy54aHJUeXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy54aHJUeXBlID0gdGhpcy5fZGV0ZXJtaW5lWGhyVHlwZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeGRyID0gdGhpcy54aHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG4gICAgICAgIC8vIFhEb21haW5SZXF1ZXN0IGhhcyBhIGZldyBxdWlya3MuIE9jY2FzaW9uYWxseSBpdCB3aWxsIGFib3J0IHJlcXVlc3RzXG4gICAgICAgIC8vIEEgd2F5IHRvIGF2b2lkIHRoaXMgaXMgdG8gbWFrZSBzdXJlIEFMTCBjYWxsYmFja3MgYXJlIHNldCBldmVuIGlmIG5vdCB1c2VkXG4gICAgICAgIC8vIE1vcmUgaW5mbyBoZXJlOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE1Nzg2OTY2L3hkb21haW5yZXF1ZXN0LWFib3J0cy1wb3N0LW9uLWllLTlcbiAgICAgICAgeGRyLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQgfHwgNTAwMDsgLy8gWERSIG5lZWRzIGEgdGltZW91dCB2YWx1ZSBvciBpdCBicmVha3MgaW4gSUU5XG5cbiAgICAgICAgeGRyLm9uZXJyb3IgPSB0aGlzLl9ib3VuZFhock9uRXJyb3I7XG4gICAgICAgIHhkci5vbnRpbWVvdXQgPSB0aGlzLl9ib3VuZFhock9uVGltZW91dDtcbiAgICAgICAgeGRyLm9ucHJvZ3Jlc3MgPSB0aGlzLl9ib3VuZE9uUHJvZ3Jlc3M7XG4gICAgICAgIHhkci5vbmxvYWQgPSB0aGlzLl9ib3VuZFhock9uTG9hZDtcblxuICAgICAgICB4ZHIub3BlbignR0VUJywgdGhpcy51cmwsIHRydWUpO1xuXG4gICAgICAgIC8vIE5vdGU6IFRoZSB4ZHIuc2VuZCgpIGNhbGwgaXMgd3JhcHBlZCBpbiBhIHRpbWVvdXQgdG8gcHJldmVudCBhblxuICAgICAgICAvLyBpc3N1ZSB3aXRoIHRoZSBpbnRlcmZhY2Ugd2hlcmUgc29tZSByZXF1ZXN0cyBhcmUgbG9zdCBpZiBtdWx0aXBsZVxuICAgICAgICAvLyBYRG9tYWluUmVxdWVzdHMgYXJlIGJlaW5nIHNlbnQgYXQgdGhlIHNhbWUgdGltZS5cbiAgICAgICAgLy8gU29tZSBpbmZvIGhlcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9waG90b25zdG9ybS9waGFzZXIvaXNzdWVzLzEyNDhcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB4ZHIuc2VuZCgpLCAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc291cmNlIHVzZWQgaW4gbG9hZGluZyB2aWEgYW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBUaGUgZWxlbWVudCB0eXBlICh2aWRlbyBvciBhdWRpbykuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSBzb3VyY2UgVVJMIHRvIGxvYWQgZnJvbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW21pbWVdIC0gVGhlIG1pbWUgdHlwZSBvZiB0aGUgdmlkZW9cbiAgICAgKiBAcmV0dXJuIHtIVE1MU291cmNlRWxlbWVudH0gVGhlIHNvdXJjZSBlbGVtZW50LlxuICAgICAqL1xuICAgIF9jcmVhdGVTb3VyY2UodHlwZSwgdXJsLCBtaW1lKSB7XG4gICAgICAgIGlmICghbWltZSkge1xuICAgICAgICAgICAgbWltZSA9IGAke3R5cGV9LyR7dGhpcy5fZ2V0RXh0ZW5zaW9uKHVybCl9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xuXG4gICAgICAgIHNvdXJjZS5zcmMgPSB1cmw7XG4gICAgICAgIHNvdXJjZS50eXBlID0gbWltZTtcblxuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBpZiBhIGxvYWQgZXJyb3JzIG91dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gVGhlIGVycm9yIGV2ZW50IGZyb20gdGhlIGVsZW1lbnQgdGhhdCBlbWl0cyBpdC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9vbkVycm9yKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuYWJvcnQoYEZhaWxlZCB0byBsb2FkIGVsZW1lbnQgdXNpbmc6ICR7ZXZlbnQudGFyZ2V0Lm5vZGVOYW1lfWApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBpZiBhIGxvYWQgcHJvZ3Jlc3MgZXZlbnQgZmlyZXMgZm9yIGFuIGVsZW1lbnQgb3IgeGhyL3hkci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtYTUxIdHRwUmVxdWVzdFByb2dyZXNzRXZlbnR8RXZlbnR9IGV2ZW50IC0gUHJvZ3Jlc3MgZXZlbnQuXG4gICAgICovXG4gICAgX29uUHJvZ3Jlc3MoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50Lmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMub25Qcm9ncmVzcy5kaXNwYXRjaCh0aGlzLCBldmVudC5sb2FkZWQgLyBldmVudC50b3RhbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgaWYgYSB0aW1lb3V0IGV2ZW50IGZpcmVzIGZvciBhbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfb25UaW1lb3V0KCkge1xuICAgICAgICB0aGlzLmFib3J0KGBMb2FkIHRpbWVkIG91dC5gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgaWYgYW4gZXJyb3IgZXZlbnQgZmlyZXMgZm9yIHhoci94ZHIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF94aHJPbkVycm9yKCkge1xuICAgICAgICBjb25zdCB4aHIgPSB0aGlzLnhocjtcblxuICAgICAgICB0aGlzLmFib3J0KGAke3JlcVR5cGUoeGhyKX0gUmVxdWVzdCBmYWlsZWQuIFN0YXR1czogJHt4aHIuc3RhdHVzfSwgdGV4dDogXCIke3hoci5zdGF0dXNUZXh0fVwiYCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGlmIGFuIGVycm9yIGV2ZW50IGZpcmVzIGZvciB4aHIveGRyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfeGhyT25UaW1lb3V0KCkge1xuICAgICAgICBjb25zdCB4aHIgPSB0aGlzLnhocjtcblxuICAgICAgICB0aGlzLmFib3J0KGAke3JlcVR5cGUoeGhyKX0gUmVxdWVzdCB0aW1lZCBvdXQuYCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGlmIGFuIGFib3J0IGV2ZW50IGZpcmVzIGZvciB4aHIveGRyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfeGhyT25BYm9ydCgpIHtcbiAgICAgICAgY29uc3QgeGhyID0gdGhpcy54aHI7XG5cbiAgICAgICAgdGhpcy5hYm9ydChgJHtyZXFUeXBlKHhocil9IFJlcXVlc3Qgd2FzIGFib3J0ZWQgYnkgdGhlIHVzZXIuYCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gZGF0YSBzdWNjZXNzZnVsbHkgbG9hZHMgZnJvbSBhbiB4aHIveGRyIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7WE1MSHR0cFJlcXVlc3RMb2FkRXZlbnR8RXZlbnR9IGV2ZW50IC0gTG9hZCBldmVudFxuICAgICAqL1xuICAgIF94aHJPbkxvYWQoKSB7XG4gICAgICAgIGNvbnN0IHhociA9IHRoaXMueGhyO1xuICAgICAgICBsZXQgdGV4dCA9ICcnO1xuICAgICAgICBsZXQgc3RhdHVzID0gdHlwZW9mIHhoci5zdGF0dXMgPT09ICd1bmRlZmluZWQnID8gU1RBVFVTX09LIDogeGhyLnN0YXR1czsgLy8gWERSIGhhcyBubyBgLnN0YXR1c2AsIGFzc3VtZSAyMDAuXG5cbiAgICAgICAgLy8gcmVzcG9uc2VUZXh0IGlzIGFjY2Vzc2libGUgb25seSBpZiByZXNwb25zZVR5cGUgaXMgJycgb3IgJ3RleHQnIGFuZCBvbiBvbGRlciBicm93c2Vyc1xuICAgICAgICBpZiAoeGhyLnJlc3BvbnNlVHlwZSA9PT0gJycgfHwgeGhyLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnIHx8IHR5cGVvZiB4aHIucmVzcG9uc2VUeXBlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGV4dCA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzdGF0dXMgY2FuIGJlIDAgd2hlbiB1c2luZyB0aGUgYGZpbGU6Ly9gIHByb3RvY29sIHNvIHdlIGFsc28gY2hlY2sgaWYgYSByZXNwb25zZSBpcyBzZXQuXG4gICAgICAgIC8vIElmIGl0IGhhcyBhIHJlc3BvbnNlLCB3ZSBhc3N1bWUgMjAwOyBvdGhlcndpc2UgYSAwIHN0YXR1cyBjb2RlIHdpdGggbm8gY29udGVudHMgaXMgYW4gYWJvcnRlZCByZXF1ZXN0LlxuICAgICAgICBpZiAoc3RhdHVzID09PSBTVEFUVVNfTk9ORSAmJiAodGV4dC5sZW5ndGggPiAwIHx8IHhoci5yZXNwb25zZVR5cGUgPT09IFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkJVRkZFUikpIHtcbiAgICAgICAgICAgIHN0YXR1cyA9IFNUQVRVU19PSztcbiAgICAgICAgfVxuICAgICAgICAvLyBoYW5kbGUgSUU5IGJ1ZzogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDA0Njk3Mi9tc2llLXJldHVybnMtc3RhdHVzLWNvZGUtb2YtMTIyMy1mb3ItYWpheC1yZXF1ZXN0XG4gICAgICAgIGVsc2UgaWYgKHN0YXR1cyA9PT0gU1RBVFVTX0lFX0JVR19FTVBUWSkge1xuICAgICAgICAgICAgc3RhdHVzID0gU1RBVFVTX0VNUFRZO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdHVzVHlwZSA9IChzdGF0dXMgLyAxMDApIHwgMDtcblxuICAgICAgICBpZiAoc3RhdHVzVHlwZSA9PT0gU1RBVFVTX1RZUEVfT0spIHtcbiAgICAgICAgICAgIC8vIGlmIHRleHQsIGp1c3QgcmV0dXJuIGl0XG4gICAgICAgICAgICBpZiAodGhpcy54aHJUeXBlID09PSBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5URVhUKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gdGV4dDtcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBSZXNvdXJjZS5UWVBFLlRFWFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiBqc29uLCBwYXJzZSBpbnRvIGpzb24gb2JqZWN0XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnhoclR5cGUgPT09IFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkpTT04pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBKU09OLnBhcnNlKHRleHQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBSZXNvdXJjZS5UWVBFLkpTT047XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWJvcnQoYEVycm9yIHRyeWluZyB0byBwYXJzZSBsb2FkZWQganNvbjogJHtlfWApO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiB4bWwsIHBhcnNlIGludG8gYW4geG1sIGRvY3VtZW50IG9yIGRpdiBlbGVtZW50XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnhoclR5cGUgPT09IFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkRPQ1VNRU5UKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5ET01QYXJzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvbXBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZG9tcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh0ZXh0LCAndGV4dC94bWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGV4dDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZGl2O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gUmVzb3VyY2UuVFlQRS5YTUw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWJvcnQoYEVycm9yIHRyeWluZyB0byBwYXJzZSBsb2FkZWQgeG1sOiAke2V9YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG90aGVyIHR5cGVzIGp1c3QgcmV0dXJuIHRoZSByZXNwb25zZVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0geGhyLnJlc3BvbnNlIHx8IHRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFib3J0KGBbJHt4aHIuc3RhdHVzfV0gJHt4aHIuc3RhdHVzVGV4dH06ICR7eGhyLnJlc3BvbnNlVVJMfWApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYGNyb3NzT3JpZ2luYCBwcm9wZXJ0eSBmb3IgdGhpcyByZXNvdXJjZSBiYXNlZCBvbiBpZiB0aGUgdXJsXG4gICAgICogZm9yIHRoaXMgcmVzb3VyY2UgaXMgY3Jvc3Mtb3JpZ2luLiBJZiBjcm9zc09yaWdpbiB3YXMgbWFudWFsbHkgc2V0LCB0aGlzXG4gICAgICogZnVuY3Rpb24gZG9lcyBub3RoaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIHVybCB0byB0ZXN0LlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbbG9jPXdpbmRvdy5sb2NhdGlvbl0gLSBUaGUgbG9jYXRpb24gb2JqZWN0IHRvIHRlc3QgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjcm9zc09yaWdpbiB2YWx1ZSB0byB1c2UgKG9yIGVtcHR5IHN0cmluZyBmb3Igbm9uZSkuXG4gICAgICovXG4gICAgX2RldGVybWluZUNyb3NzT3JpZ2luKHVybCwgbG9jKSB7XG4gICAgICAgIC8vIGRhdGE6IGFuZCBqYXZhc2NyaXB0OiB1cmxzIGFyZSBjb25zaWRlcmVkIHNhbWUtb3JpZ2luXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZignZGF0YTonKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQSBzYW5kYm94ZWQgaWZyYW1lIHdpdGhvdXQgdGhlICdhbGxvdy1zYW1lLW9yaWdpbicgYXR0cmlidXRlIHdpbGwgaGF2ZSBhIHNwZWNpYWxcbiAgICAgICAgLy8gb3JpZ2luIGRlc2lnbmVkIG5vdCB0byBtYXRjaCB3aW5kb3cubG9jYXRpb24ub3JpZ2luLCBhbmQgd2lsbCBhbHdheXMgcmVxdWlyZVxuICAgICAgICAvLyBjcm9zc09yaWdpbiByZXF1ZXN0cyByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGxvY2F0aW9uIG1hdGNoZXMuXG4gICAgICAgIGlmICh3aW5kb3cub3JpZ2luICE9PSB3aW5kb3cubG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2Fub255bW91cyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZWZhdWx0IGlzIHdpbmRvdy5sb2NhdGlvblxuICAgICAgICBsb2MgPSBsb2MgfHwgd2luZG93LmxvY2F0aW9uO1xuXG4gICAgICAgIGlmICghdGVtcEFuY2hvcikge1xuICAgICAgICAgICAgdGVtcEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxldCB0aGUgYnJvd3NlciBkZXRlcm1pbmUgdGhlIGZ1bGwgaHJlZiBmb3IgdGhlIHVybCBvZiB0aGlzIHJlc291cmNlIGFuZCB0aGVuXG4gICAgICAgIC8vIHBhcnNlIHdpdGggdGhlIG5vZGUgdXJsIGxpYiwgd2UgY2FuJ3QgdXNlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBhbmNob3IgZWxlbWVudFxuICAgICAgICAvLyBiZWNhdXNlIHRoZXkgZG9uJ3Qgd29yayBpbiBJRTkgOihcbiAgICAgICAgdGVtcEFuY2hvci5ocmVmID0gdXJsO1xuICAgICAgICB1cmwgPSBwYXJzZVVyaSh0ZW1wQW5jaG9yLmhyZWYsIHsgc3RyaWN0TW9kZTogdHJ1ZSB9KTtcblxuICAgICAgICBjb25zdCBzYW1lUG9ydCA9ICghdXJsLnBvcnQgJiYgbG9jLnBvcnQgPT09ICcnKSB8fCAodXJsLnBvcnQgPT09IGxvYy5wb3J0KTtcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSB1cmwucHJvdG9jb2wgPyBgJHt1cmwucHJvdG9jb2x9OmAgOiAnJztcblxuICAgICAgICAvLyBpZiBjcm9zcyBvcmlnaW5cbiAgICAgICAgaWYgKHVybC5ob3N0ICE9PSBsb2MuaG9zdG5hbWUgfHwgIXNhbWVQb3J0IHx8IHByb3RvY29sICE9PSBsb2MucHJvdG9jb2wpIHtcbiAgICAgICAgICAgIHJldHVybiAnYW5vbnltb3VzJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHRoZSByZXNwb25zZVR5cGUgb2YgYW4gWEhSIHJlcXVlc3QgYmFzZWQgb24gdGhlIGV4dGVuc2lvbiBvZiB0aGVcbiAgICAgKiByZXNvdXJjZSBiZWluZyBsb2FkZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm4ge1Jlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFfSBUaGUgcmVzcG9uc2VUeXBlIHRvIHVzZS5cbiAgICAgKi9cbiAgICBfZGV0ZXJtaW5lWGhyVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFJlc291cmNlLl94aHJUeXBlTWFwW3RoaXMuZXh0ZW5zaW9uXSB8fCBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5URVhUO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgdGhlIGxvYWRUeXBlIG9mIGEgcmVzb3VyY2UgYmFzZWQgb24gdGhlIGV4dGVuc2lvbiBvZiB0aGVcbiAgICAgKiByZXNvdXJjZSBiZWluZyBsb2FkZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm4ge1Jlc291cmNlLkxPQURfVFlQRX0gVGhlIGxvYWRUeXBlIHRvIHVzZS5cbiAgICAgKi9cbiAgICBfZGV0ZXJtaW5lTG9hZFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBSZXNvdXJjZS5fbG9hZFR5cGVNYXBbdGhpcy5leHRlbnNpb25dIHx8IFJlc291cmNlLkxPQURfVFlQRS5YSFI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdHMgdGhlIGV4dGVuc2lvbiAoc2FucyAnLicpIG9mIHRoZSBmaWxlIGJlaW5nIGxvYWRlZCBieSB0aGUgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGV4dGVuc2lvbi5cbiAgICAgKi9cbiAgICBfZ2V0RXh0ZW5zaW9uKCkge1xuICAgICAgICBsZXQgdXJsID0gdGhpcy51cmw7XG4gICAgICAgIGxldCBleHQgPSAnJztcblxuICAgICAgICBpZiAodGhpcy5pc0RhdGFVcmwpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsYXNoSW5kZXggPSB1cmwuaW5kZXhPZignLycpO1xuXG4gICAgICAgICAgICBleHQgPSB1cmwuc3Vic3RyaW5nKHNsYXNoSW5kZXggKyAxLCB1cmwuaW5kZXhPZignOycsIHNsYXNoSW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5U3RhcnQgPSB1cmwuaW5kZXhPZignPycpO1xuICAgICAgICAgICAgY29uc3QgaGFzaFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gTWF0aC5taW4oXG4gICAgICAgICAgICAgICAgcXVlcnlTdGFydCA+IC0xID8gcXVlcnlTdGFydCA6IHVybC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaGFzaFN0YXJ0ID4gLTEgPyBoYXNoU3RhcnQgOiB1cmwubGVuZ3RoXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgICAgICAgIGV4dCA9IHVybC5zdWJzdHJpbmcodXJsLmxhc3RJbmRleE9mKCcuJykgKyAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBleHQudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHRoZSBtaW1lIHR5cGUgb2YgYW4gWEhSIHJlcXVlc3QgYmFzZWQgb24gdGhlIHJlc3BvbnNlVHlwZSBvZlxuICAgICAqIHJlc291cmNlIGJlaW5nIGxvYWRlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRX0gdHlwZSAtIFRoZSB0eXBlIHRvIGdldCBhIG1pbWUgdHlwZSBmb3IuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgbWltZSB0eXBlIHRvIHVzZS5cbiAgICAgKi9cbiAgICBfZ2V0TWltZUZyb21YaHJUeXBlKHR5cGUpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkJVRkZFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL29jdGV0LWJpbmFyeSc7XG5cbiAgICAgICAgICAgIGNhc2UgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuQkxPQjpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL2Jsb2InO1xuXG4gICAgICAgICAgICBjYXNlIFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkRPQ1VNRU5UOlxuICAgICAgICAgICAgICAgIHJldHVybiAnYXBwbGljYXRpb24veG1sJztcblxuICAgICAgICAgICAgY2FzZSBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5KU09OOlxuICAgICAgICAgICAgICAgIHJldHVybiAnYXBwbGljYXRpb24vanNvbic7XG5cbiAgICAgICAgICAgIGNhc2UgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuREVGQVVMVDpcbiAgICAgICAgICAgIGNhc2UgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuVEVYVDpcbiAgICAgICAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAndGV4dC9wbGFpbic7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogVGhlIHR5cGVzIG9mIHJlc291cmNlcyBhIHJlc291cmNlIGNvdWxkIHJlcHJlc2VudC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcmVhZG9ubHlcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cblJlc291cmNlLlNUQVRVU19GTEFHUyA9IHtcbiAgICBOT05FOiAgICAgICAwLFxuICAgIERBVEFfVVJMOiAgICgxIDw8IDApLFxuICAgIENPTVBMRVRFOiAgICgxIDw8IDEpLFxuICAgIExPQURJTkc6ICAgICgxIDw8IDIpLFxufTtcblxuLyoqXG4gKiBUaGUgdHlwZXMgb2YgcmVzb3VyY2VzIGEgcmVzb3VyY2UgY291bGQgcmVwcmVzZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEByZWFkb25seVxuICogQGVudW0ge251bWJlcn1cbiAqL1xuUmVzb3VyY2UuVFlQRSA9IHtcbiAgICBVTktOT1dOOiAgICAwLFxuICAgIEpTT046ICAgICAgIDEsXG4gICAgWE1MOiAgICAgICAgMixcbiAgICBJTUFHRTogICAgICAzLFxuICAgIEFVRElPOiAgICAgIDQsXG4gICAgVklERU86ICAgICAgNSxcbiAgICBURVhUOiAgICAgICA2LFxufTtcblxuLyoqXG4gKiBUaGUgdHlwZXMgb2YgbG9hZGluZyBhIHJlc291cmNlIGNhbiB1c2UuXG4gKlxuICogQHN0YXRpY1xuICogQHJlYWRvbmx5XG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5SZXNvdXJjZS5MT0FEX1RZUEUgPSB7XG4gICAgLyoqIFVzZXMgWE1MSHR0cFJlcXVlc3QgdG8gbG9hZCB0aGUgcmVzb3VyY2UuICovXG4gICAgWEhSOiAgICAxLFxuICAgIC8qKiBVc2VzIGFuIGBJbWFnZWAgb2JqZWN0IHRvIGxvYWQgdGhlIHJlc291cmNlLiAqL1xuICAgIElNQUdFOiAgMixcbiAgICAvKiogVXNlcyBhbiBgQXVkaW9gIG9iamVjdCB0byBsb2FkIHRoZSByZXNvdXJjZS4gKi9cbiAgICBBVURJTzogIDMsXG4gICAgLyoqIFVzZXMgYSBgVmlkZW9gIG9iamVjdCB0byBsb2FkIHRoZSByZXNvdXJjZS4gKi9cbiAgICBWSURFTzogIDQsXG59O1xuXG4vKipcbiAqIFRoZSBYSFIgcmVhZHkgc3RhdGVzLCB1c2VkIGludGVybmFsbHkuXG4gKlxuICogQHN0YXRpY1xuICogQHJlYWRvbmx5XG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5SZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRSA9IHtcbiAgICAvKiogc3RyaW5nICovXG4gICAgREVGQVVMVDogICAgJ3RleHQnLFxuICAgIC8qKiBBcnJheUJ1ZmZlciAqL1xuICAgIEJVRkZFUjogICAgICdhcnJheWJ1ZmZlcicsXG4gICAgLyoqIEJsb2IgKi9cbiAgICBCTE9COiAgICAgICAnYmxvYicsXG4gICAgLyoqIERvY3VtZW50ICovXG4gICAgRE9DVU1FTlQ6ICAgJ2RvY3VtZW50JyxcbiAgICAvKiogT2JqZWN0ICovXG4gICAgSlNPTjogICAgICAgJ2pzb24nLFxuICAgIC8qKiBTdHJpbmcgKi9cbiAgICBURVhUOiAgICAgICAndGV4dCcsXG59O1xuXG5SZXNvdXJjZS5fbG9hZFR5cGVNYXAgPSB7XG4gICAgLy8gaW1hZ2VzXG4gICAgZ2lmOiAgICAgICAgUmVzb3VyY2UuTE9BRF9UWVBFLklNQUdFLFxuICAgIHBuZzogICAgICAgIFJlc291cmNlLkxPQURfVFlQRS5JTUFHRSxcbiAgICBibXA6ICAgICAgICBSZXNvdXJjZS5MT0FEX1RZUEUuSU1BR0UsXG4gICAganBnOiAgICAgICAgUmVzb3VyY2UuTE9BRF9UWVBFLklNQUdFLFxuICAgIGpwZWc6ICAgICAgIFJlc291cmNlLkxPQURfVFlQRS5JTUFHRSxcbiAgICB0aWY6ICAgICAgICBSZXNvdXJjZS5MT0FEX1RZUEUuSU1BR0UsXG4gICAgdGlmZjogICAgICAgUmVzb3VyY2UuTE9BRF9UWVBFLklNQUdFLFxuICAgIHdlYnA6ICAgICAgIFJlc291cmNlLkxPQURfVFlQRS5JTUFHRSxcbiAgICB0Z2E6ICAgICAgICBSZXNvdXJjZS5MT0FEX1RZUEUuSU1BR0UsXG4gICAgc3ZnOiAgICAgICAgUmVzb3VyY2UuTE9BRF9UWVBFLklNQUdFLFxuICAgICdzdmcreG1sJzogIFJlc291cmNlLkxPQURfVFlQRS5JTUFHRSwgLy8gZm9yIFNWRyBkYXRhIHVybHNcblxuICAgIC8vIGF1ZGlvXG4gICAgbXAzOiAgICAgICAgUmVzb3VyY2UuTE9BRF9UWVBFLkFVRElPLFxuICAgIG9nZzogICAgICAgIFJlc291cmNlLkxPQURfVFlQRS5BVURJTyxcbiAgICB3YXY6ICAgICAgICBSZXNvdXJjZS5MT0FEX1RZUEUuQVVESU8sXG5cbiAgICAvLyB2aWRlb3NcbiAgICBtcDQ6ICAgICAgICBSZXNvdXJjZS5MT0FEX1RZUEUuVklERU8sXG4gICAgd2VibTogICAgICAgUmVzb3VyY2UuTE9BRF9UWVBFLlZJREVPLFxufTtcblxuUmVzb3VyY2UuX3hoclR5cGVNYXAgPSB7XG4gICAgLy8geG1sXG4gICAgeGh0bWw6ICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsXG4gICAgaHRtbDogICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsXG4gICAgaHRtOiAgICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsXG4gICAgeG1sOiAgICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsXG4gICAgdG14OiAgICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsXG4gICAgc3ZnOiAgICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsXG5cbiAgICAvLyBUaGlzIHdhcyBhZGRlZCB0byBoYW5kbGUgVGlsZWQgVGlsZXNldCBYTUwsIGJ1dCAudHN4IGlzIGFsc28gYSBUeXBlU2NyaXB0IFJlYWN0IENvbXBvbmVudC5cbiAgICAvLyBTaW5jZSBpdCBpcyB3YXkgbGVzcyBsaWtlbHkgZm9yIHBlb3BsZSB0byBiZSBsb2FkaW5nIFR5cGVTY3JpcHQgZmlsZXMgaW5zdGVhZCBvZiBUaWxlZCBmaWxlcyxcbiAgICAvLyB0aGlzIHNob3VsZCBwcm9iYWJseSBiZSBmaW5lLlxuICAgIHRzeDogICAgICAgIFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkRPQ1VNRU5ULFxuXG4gICAgLy8gaW1hZ2VzXG4gICAgZ2lmOiAgICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuQkxPQixcbiAgICBwbmc6ICAgICAgICBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5CTE9CLFxuICAgIGJtcDogICAgICAgIFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkJMT0IsXG4gICAganBnOiAgICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuQkxPQixcbiAgICBqcGVnOiAgICAgICBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5CTE9CLFxuICAgIHRpZjogICAgICAgIFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkJMT0IsXG4gICAgdGlmZjogICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuQkxPQixcbiAgICB3ZWJwOiAgICAgICBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5CTE9CLFxuICAgIHRnYTogICAgICAgIFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkJMT0IsXG5cbiAgICAvLyBqc29uXG4gICAganNvbjogICAgICAgUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuSlNPTixcblxuICAgIC8vIHRleHRcbiAgICB0ZXh0OiAgICAgICBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5URVhULFxuICAgIHR4dDogICAgICAgIFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLlRFWFQsXG5cbiAgICAvLyBmb250c1xuICAgIHR0ZjogICAgICAgIFJlc291cmNlLlhIUl9SRVNQT05TRV9UWVBFLkJVRkZFUixcbiAgICBvdGY6ICAgICAgICBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5CVUZGRVIsXG59O1xuXG4vLyBXZSBjYW4ndCBzZXQgdGhlIGBzcmNgIGF0dHJpYnV0ZSB0byBlbXB0eSBzdHJpbmcsIHNvIG9uIGFib3J0IHdlIHNldCBpdCB0byB0aGlzIDFweCB0cmFuc3BhcmVudCBnaWZcblJlc291cmNlLkVNUFRZX0dJRiA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFQLy8vd0FBQUNINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQ1JBRUFPdz09JztcblxuLyoqXG4gKiBRdWljayBoZWxwZXIgdG8gc2V0IGEgdmFsdWUgb24gb25lIG9mIHRoZSBleHRlbnNpb24gbWFwcy4gRW5zdXJlcyB0aGVyZSBpcyBub1xuICogZG90IGF0IHRoZSBzdGFydCBvZiB0aGUgZXh0ZW5zaW9uLlxuICpcbiAqIEBpZ25vcmVcbiAqIEBwYXJhbSB7b2JqZWN0fSBtYXAgLSBUaGUgbWFwIHRvIHNldCBvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRuYW1lIC0gVGhlIGV4dGVuc2lvbiAob3Iga2V5KSB0byBzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0RXh0TWFwKG1hcCwgZXh0bmFtZSwgdmFsKSB7XG4gICAgaWYgKGV4dG5hbWUgJiYgZXh0bmFtZS5pbmRleE9mKCcuJykgPT09IDApIHtcbiAgICAgICAgZXh0bmFtZSA9IGV4dG5hbWUuc3Vic3RyaW5nKDEpO1xuICAgIH1cblxuICAgIGlmICghZXh0bmFtZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWFwW2V4dG5hbWVdID0gdmFsO1xufVxuXG4vKipcbiAqIFF1aWNrIGhlbHBlciB0byBnZXQgc3RyaW5nIHhociB0eXBlLlxuICpcbiAqIEBpZ25vcmVcbiAqIEBwYXJhbSB7WE1MSHR0cFJlcXVlc3R8WERvbWFpblJlcXVlc3R9IHhociAtIFRoZSByZXF1ZXN0IHRvIGNoZWNrLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdHlwZS5cbiAqL1xuZnVuY3Rpb24gcmVxVHlwZSh4aHIpIHtcbiAgICByZXR1cm4geGhyLnRvU3RyaW5nKCkucmVwbGFjZSgnb2JqZWN0ICcsICcnKTtcbn1cblxuZXhwb3J0IHsgUmVzb3VyY2UgfTtcbiIsICJjb25zdCBfa2V5U3RyID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcblxuLyoqXG4gKiBFbmNvZGVzIGJpbmFyeSBpbnRvIGJhc2U2NC5cbiAqXG4gKiBAZnVuY3Rpb24gZW5jb2RlQmluYXJ5XG4gKiBAcGFyYW0ge3N0cmluZ30gaW5wdXQgVGhlIGlucHV0IGRhdGEgdG8gZW5jb2RlLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGVuY29kZWQgYmFzZTY0IHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlQmluYXJ5KGlucHV0KSB7XG4gICAgbGV0IG91dHB1dCA9ICcnO1xuICAgIGxldCBpbnggPSAwO1xuXG4gICAgd2hpbGUgKGlueCA8IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAvLyBGaWxsIGJ5dGUgYnVmZmVyIGFycmF5XG4gICAgICAgIGNvbnN0IGJ5dGVidWZmZXIgPSBbMCwgMCwgMF07XG4gICAgICAgIGNvbnN0IGVuY29kZWRDaGFySW5kZXhlcyA9IFswLCAwLCAwLCAwXTtcblxuICAgICAgICBmb3IgKGxldCBqbnggPSAwOyBqbnggPCBieXRlYnVmZmVyLmxlbmd0aDsgKytqbngpIHtcbiAgICAgICAgICAgIGlmIChpbnggPCBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyB0aHJvdyBhd2F5IGhpZ2gtb3JkZXIgYnl0ZSwgYXMgZG9jdW1lbnRlZCBhdDpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9Fbi9Vc2luZ19YTUxIdHRwUmVxdWVzdCNIYW5kbGluZ19iaW5hcnlfZGF0YVxuICAgICAgICAgICAgICAgIGJ5dGVidWZmZXJbam54XSA9IGlucHV0LmNoYXJDb2RlQXQoaW54KyspICYgMHhmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ5dGVidWZmZXJbam54XSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgZWFjaCBlbmNvZGVkIGNoYXJhY3RlciwgNiBiaXRzIGF0IGEgdGltZVxuICAgICAgICAvLyBpbmRleCAxOiBmaXJzdCA2IGJpdHNcbiAgICAgICAgZW5jb2RlZENoYXJJbmRleGVzWzBdID0gYnl0ZWJ1ZmZlclswXSA+PiAyO1xuXG4gICAgICAgIC8vIGluZGV4IDI6IHNlY29uZCA2IGJpdHMgKDIgbGVhc3Qgc2lnbmlmaWNhbnQgYml0cyBmcm9tIGlucHV0IGJ5dGUgMSArIDQgbW9zdCBzaWduaWZpY2FudCBiaXRzIGZyb20gYnl0ZSAyKVxuICAgICAgICBlbmNvZGVkQ2hhckluZGV4ZXNbMV0gPSAoKGJ5dGVidWZmZXJbMF0gJiAweDMpIDw8IDQpIHwgKGJ5dGVidWZmZXJbMV0gPj4gNCk7XG5cbiAgICAgICAgLy8gaW5kZXggMzogdGhpcmQgNiBiaXRzICg0IGxlYXN0IHNpZ25pZmljYW50IGJpdHMgZnJvbSBpbnB1dCBieXRlIDIgKyAyIG1vc3Qgc2lnbmlmaWNhbnQgYml0cyBmcm9tIGJ5dGUgMylcbiAgICAgICAgZW5jb2RlZENoYXJJbmRleGVzWzJdID0gKChieXRlYnVmZmVyWzFdICYgMHgwZikgPDwgMikgfCAoYnl0ZWJ1ZmZlclsyXSA+PiA2KTtcblxuICAgICAgICAvLyBpbmRleCAzOiBmb3J0aCA2IGJpdHMgKDYgbGVhc3Qgc2lnbmlmaWNhbnQgYml0cyBmcm9tIGlucHV0IGJ5dGUgMylcbiAgICAgICAgZW5jb2RlZENoYXJJbmRleGVzWzNdID0gYnl0ZWJ1ZmZlclsyXSAmIDB4M2Y7XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgcGFkZGluZyBoYXBwZW5lZCwgYW5kIGFkanVzdCBhY2NvcmRpbmdseVxuICAgICAgICBjb25zdCBwYWRkaW5nQnl0ZXMgPSBpbnggLSAoaW5wdXQubGVuZ3RoIC0gMSk7XG5cbiAgICAgICAgc3dpdGNoIChwYWRkaW5nQnl0ZXMpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAvLyBTZXQgbGFzdCAyIGNoYXJhY3RlcnMgdG8gcGFkZGluZyBjaGFyXG4gICAgICAgICAgICAgICAgZW5jb2RlZENoYXJJbmRleGVzWzNdID0gNjQ7XG4gICAgICAgICAgICAgICAgZW5jb2RlZENoYXJJbmRleGVzWzJdID0gNjQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAvLyBTZXQgbGFzdCBjaGFyYWN0ZXIgdG8gcGFkZGluZyBjaGFyXG4gICAgICAgICAgICAgICAgZW5jb2RlZENoYXJJbmRleGVzWzNdID0gNjQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIE5vIHBhZGRpbmcgLSBwcm9jZWVkXG4gICAgICAgIH1cblxuICAgICAgICAvLyBOb3cgd2Ugd2lsbCBncmFiIGVhY2ggYXBwcm9wcmlhdGUgY2hhcmFjdGVyIG91dCBvZiBvdXIga2V5c3RyaW5nXG4gICAgICAgIC8vIGJhc2VkIG9uIG91ciBpbmRleCBhcnJheSBhbmQgYXBwZW5kIGl0IHRvIHRoZSBvdXRwdXQgc3RyaW5nXG4gICAgICAgIGZvciAobGV0IGpueCA9IDA7IGpueCA8IGVuY29kZWRDaGFySW5kZXhlcy5sZW5ndGg7ICsram54KSB7XG4gICAgICAgICAgICBvdXRwdXQgKz0gX2tleVN0ci5jaGFyQXQoZW5jb2RlZENoYXJJbmRleGVzW2pueF0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbiIsICJpbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gJy4uL1Jlc291cmNlJztcbmltcG9ydCB7IGVuY29kZUJpbmFyeSB9IGZyb20gJy4uL2VuY29kZUJpbmFyeSc7XG5cbmNvbnN0IFVybCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDtcblxuLyoqXG4gKiBBIG1pZGRsZXdhcmUgZm9yIHRyYW5zZm9ybWluZyBYSFIgbG9hZGVkIEJsb2JzIGludG8gbW9yZSB1c2VmdWwgb2JqZWN0c1xuICpcbiAqIEBtZW1iZXJvZiBtaWRkbGV3YXJlXG4gKiBAZnVuY3Rpb24gcGFyc2luZ1xuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IExvYWRlciwgbWlkZGxld2FyZSB9IGZyb20gJ3Jlc291cmNlLWxvYWRlcic7XG4gKiBjb25zdCBsb2FkZXIgPSBuZXcgTG9hZGVyKCk7XG4gKiBsb2FkZXIudXNlKG1pZGRsZXdhcmUucGFyc2luZyk7XG4gKiBAcGFyYW0ge1Jlc291cmNlfSByZXNvdXJjZSAtIEN1cnJlbnQgUmVzb3VyY2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG5leHQgLSBDYWxsYmFjayB3aGVuIGNvbXBsZXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzaW5nKHJlc291cmNlLCBuZXh0KSB7XG4gICAgaWYgKCFyZXNvdXJjZS5kYXRhKSB7XG4gICAgICAgIG5leHQoKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaWYgdGhpcyB3YXMgYW4gWEhSIGxvYWQgb2YgYSBibG9iXG4gICAgaWYgKHJlc291cmNlLnhociAmJiByZXNvdXJjZS54aHJUeXBlID09PSBSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5CTE9CKSB7XG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGJsb2Igc3VwcG9ydCB3ZSBwcm9iYWJseSBnb3QgYSBiaW5hcnkgc3RyaW5nIGJhY2tcbiAgICAgICAgaWYgKCF3aW5kb3cuQmxvYiB8fCB0eXBlb2YgcmVzb3VyY2UuZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSByZXNvdXJjZS54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ2NvbnRlbnQtdHlwZScpO1xuXG4gICAgICAgICAgICAvLyB0aGlzIGlzIGFuIGltYWdlLCBjb252ZXJ0IHRoZSBiaW5hcnkgc3RyaW5nIGludG8gYSBkYXRhIHVybFxuICAgICAgICAgICAgaWYgKHR5cGUgJiYgdHlwZS5pbmRleE9mKCdpbWFnZScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuZGF0YSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgIHJlc291cmNlLmRhdGEuc3JjID0gYGRhdGE6JHt0eXBlfTtiYXNlNjQsJHtlbmNvZGVCaW5hcnkocmVzb3VyY2UueGhyLnJlc3BvbnNlVGV4dCl9YDtcblxuICAgICAgICAgICAgICAgIHJlc291cmNlLnR5cGUgPSBSZXNvdXJjZS5UWVBFLklNQUdFO1xuXG4gICAgICAgICAgICAgICAgLy8gd2FpdCB1bnRpbCB0aGUgaW1hZ2UgbG9hZHMgYW5kIHRoZW4gY2FsbGJhY2tcbiAgICAgICAgICAgICAgICByZXNvdXJjZS5kYXRhLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2UuZGF0YS5vbmxvYWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gbmV4dCB3aWxsIGJlIGNhbGxlZCBvbiBsb2FkXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGNvbnRlbnQgdHlwZSBzYXlzIHRoaXMgaXMgYW4gaW1hZ2UsIHRoZW4gd2Ugc2hvdWxkIHRyYW5zZm9ybSB0aGUgYmxvYiBpbnRvIGFuIEltYWdlIG9iamVjdFxuICAgICAgICBlbHNlIGlmIChyZXNvdXJjZS5kYXRhLnR5cGUuaW5kZXhPZignaW1hZ2UnKSA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3Qgc3JjID0gVXJsLmNyZWF0ZU9iamVjdFVSTChyZXNvdXJjZS5kYXRhKTtcblxuICAgICAgICAgICAgcmVzb3VyY2UuYmxvYiA9IHJlc291cmNlLmRhdGE7XG4gICAgICAgICAgICByZXNvdXJjZS5kYXRhID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICByZXNvdXJjZS5kYXRhLnNyYyA9IHNyYztcblxuICAgICAgICAgICAgcmVzb3VyY2UudHlwZSA9IFJlc291cmNlLlRZUEUuSU1BR0U7XG5cbiAgICAgICAgICAgIC8vIGNsZWFudXAgdGhlIG5vIGxvbmdlciB1c2VkIGJsb2IgYWZ0ZXIgdGhlIGltYWdlIGxvYWRzXG4gICAgICAgICAgICAvLyBUT0RPOiBJcyB0aGlzIGNvcnJlY3Q/IFdpbGwgdGhlIGltYWdlIGJlIGludmFsaWQgYWZ0ZXIgcmV2b2tpbmc/XG4gICAgICAgICAgICByZXNvdXJjZS5kYXRhLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBVcmwucmV2b2tlT2JqZWN0VVJMKHNyYyk7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuZGF0YS5vbmxvYWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gbmV4dCB3aWxsIGJlIGNhbGxlZCBvbiBsb2FkLlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV4dCgpO1xufVxuIiwgIi8qKlxuICogQG5hbWVzcGFjZSBtaWRkbGV3YXJlXG4gKi9cbmV4cG9ydCAqIGZyb20gJy4vY2FjaGluZyc7XG5leHBvcnQgKiBmcm9tICcuL3BhcnNpbmcnO1xuIiwgImltcG9ydCBTaWduYWwgZnJvbSAnbWluaS1zaWduYWxzJztcbmltcG9ydCBwYXJzZVVyaSBmcm9tICdwYXJzZS11cmknO1xuaW1wb3J0ICogYXMgYXN5bmMgZnJvbSAnLi9hc3luYyc7XG5pbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gJy4vUmVzb3VyY2UnO1xuXG4vLyBzb21lIGNvbnN0YW50c1xuY29uc3QgTUFYX1BST0dSRVNTID0gMTAwO1xuY29uc3Qgcmd4RXh0cmFjdFVybEhhc2ggPSAvKCNbXFx3LV0rKT8kLztcblxuLyoqXG4gKiBNYW5hZ2VzIHRoZSBzdGF0ZSBhbmQgbG9hZGluZyBvZiBtdWx0aXBsZSByZXNvdXJjZXMgdG8gbG9hZC5cbiAqXG4gKiBAY2xhc3NcbiAqL1xuY2xhc3MgTG9hZGVyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2Jhc2VVcmw9JyddIC0gVGhlIGJhc2UgdXJsIGZvciBhbGwgcmVzb3VyY2VzIGxvYWRlZCBieSB0aGlzIGxvYWRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbmN5PTEwXSAtIFRoZSBudW1iZXIgb2YgcmVzb3VyY2VzIHRvIGxvYWQgY29uY3VycmVudGx5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJhc2VVcmwgPSAnJywgY29uY3VycmVuY3kgPSAxMCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJhc2UgdXJsIGZvciBhbGwgcmVzb3VyY2VzIGxvYWRlZCBieSB0aGlzIGxvYWRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHByb2dyZXNzIHBlcmNlbnQgb2YgdGhlIGxvYWRlciBnb2luZyB0aHJvdWdoIHRoZSBxdWV1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9hZGluZyBzdGF0ZSBvZiB0aGUgbG9hZGVyLCB0cnVlIGlmIGl0IGlzIGN1cnJlbnRseSBsb2FkaW5nIHJlc291cmNlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHF1ZXJ5c3RyaW5nIHRvIGFwcGVuZCB0byBldmVyeSBVUkwgYWRkZWQgdG8gdGhlIGxvYWRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBzaG91bGQgYmUgYSB2YWxpZCBxdWVyeSBzdHJpbmcgKndpdGhvdXQqIHRoZSBxdWVzdGlvbi1tYXJrIChgP2ApLiBUaGUgbG9hZGVyIHdpbGxcbiAgICAgICAgICogYWxzbyAqbm90KiBlc2NhcGUgdmFsdWVzIGZvciB5b3UuIE1ha2Ugc3VyZSB0byBlc2NhcGUgeW91ciBwYXJhbWV0ZXJzIHdpdGhcbiAgICAgICAgICogW2BlbmNvZGVVUklDb21wb25lbnRgXShodHRwczovL21kbi5pby9lbmNvZGVVUklDb21wb25lbnQpIGJlZm9yZSBhc3NpZ25pbmcgdGhpcyBwcm9wZXJ0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogY29uc3QgbG9hZGVyID0gbmV3IExvYWRlcigpO1xuICAgICAgICAgKlxuICAgICAgICAgKiBsb2FkZXIuZGVmYXVsdFF1ZXJ5U3RyaW5nID0gJ3VzZXI9bWUmcGFzc3dvcmQ9c2VjcmV0JztcbiAgICAgICAgICpcbiAgICAgICAgICogLy8gVGhpcyB3aWxsIHJlcXVlc3QgJ2ltYWdlLnBuZz91c2VyPW1lJnBhc3N3b3JkPXNlY3JldCdcbiAgICAgICAgICogbG9hZGVyLmFkZCgnaW1hZ2UucG5nJykubG9hZCgpO1xuICAgICAgICAgKlxuICAgICAgICAgKiBsb2FkZXIucmVzZXQoKTtcbiAgICAgICAgICpcbiAgICAgICAgICogLy8gVGhpcyB3aWxsIHJlcXVlc3QgJ2ltYWdlLnBuZz92PTEmdXNlcj1tZSZwYXNzd29yZD1zZWNyZXQnXG4gICAgICAgICAqIGxvYWRlci5hZGQoJ2lhbWdlLnBuZz92PTEnKS5sb2FkKCk7XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJydcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVmYXVsdFF1ZXJ5U3RyaW5nID0gJyc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtaWRkbGV3YXJlIHRvIHJ1biBiZWZvcmUgbG9hZGluZyBlYWNoIHJlc291cmNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtmdW5jdGlvbltdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYmVmb3JlTWlkZGxld2FyZSA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWlkZGxld2FyZSB0byBydW4gYWZ0ZXIgbG9hZGluZyBlYWNoIHJlc291cmNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtmdW5jdGlvbltdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYWZ0ZXJNaWRkbGV3YXJlID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0cmFja3MgdGhlIHJlc291cmNlcyB3ZSBhcmUgY3VycmVudGx5IGNvbXBsZXRpbmcgcGFyc2luZyBmb3IuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge1Jlc291cmNlW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9yZXNvdXJjZXNQYXJzaW5nID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBgX2xvYWRSZXNvdXJjZWAgZnVuY3Rpb24gYm91bmQgd2l0aCB0aGlzIG9iamVjdCBjb250ZXh0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtmdW5jdGlvbn1cbiAgICAgICAgICogQHBhcmFtIHtSZXNvdXJjZX0gciAtIFRoZSByZXNvdXJjZSB0byBsb2FkXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGQgLSBUaGUgZGVxdWV1ZSBmdW5jdGlvblxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9ib3VuZExvYWRSZXNvdXJjZSA9IChyLCBkKSA9PiB0aGlzLl9sb2FkUmVzb3VyY2UociwgZCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZXNvdXJjZXMgd2FpdGluZyB0byBiZSBsb2FkZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge1Jlc291cmNlW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9xdWV1ZSA9IGFzeW5jLnF1ZXVlKHRoaXMuX2JvdW5kTG9hZFJlc291cmNlLCBjb25jdXJyZW5jeSk7XG5cbiAgICAgICAgdGhpcy5fcXVldWUucGF1c2UoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIHRoZSByZXNvdXJjZXMgZm9yIHRoaXMgbG9hZGVyIGtleWVkIGJ5IG5hbWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdDxzdHJpbmcsIFJlc291cmNlPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb3VyY2VzID0ge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc3BhdGNoZWQgb25jZSBwZXIgbG9hZGVkIG9yIGVycm9yZWQgcmVzb3VyY2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBjYWxsYmFjayBsb29rcyBsaWtlIHtAbGluayBMb2FkZXIuT25Qcm9ncmVzc1NpZ25hbH0uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1NpZ25hbDxMb2FkZXIuT25Qcm9ncmVzc1NpZ25hbD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uUHJvZ3Jlc3MgPSBuZXcgU2lnbmFsKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc3BhdGNoZWQgb25jZSBwZXIgZXJyb3JlZCByZXNvdXJjZS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGNhbGxiYWNrIGxvb2tzIGxpa2Uge0BsaW5rIExvYWRlci5PbkVycm9yU2lnbmFsfS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7U2lnbmFsPExvYWRlci5PbkVycm9yU2lnbmFsPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25FcnJvciA9IG5ldyBTaWduYWwoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzcGF0Y2hlZCBvbmNlIHBlciBsb2FkZWQgcmVzb3VyY2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBjYWxsYmFjayBsb29rcyBsaWtlIHtAbGluayBMb2FkZXIuT25Mb2FkU2lnbmFsfS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7U2lnbmFsPExvYWRlci5PbkxvYWRTaWduYWw+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkxvYWQgPSBuZXcgU2lnbmFsKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc3BhdGNoZWQgd2hlbiB0aGUgbG9hZGVyIGJlZ2lucyB0byBwcm9jZXNzIHRoZSBxdWV1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGNhbGxiYWNrIGxvb2tzIGxpa2Uge0BsaW5rIExvYWRlci5PblN0YXJ0U2lnbmFsfS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7U2lnbmFsPExvYWRlci5PblN0YXJ0U2lnbmFsPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25TdGFydCA9IG5ldyBTaWduYWwoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzcGF0Y2hlZCB3aGVuIHRoZSBxdWV1ZWQgcmVzb3VyY2VzIGFsbCBsb2FkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgY2FsbGJhY2sgbG9va3MgbGlrZSB7QGxpbmsgTG9hZGVyLk9uQ29tcGxldGVTaWduYWx9LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtTaWduYWw8TG9hZGVyLk9uQ29tcGxldGVTaWduYWw+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlID0gbmV3IFNpZ25hbCgpO1xuXG4gICAgICAgIC8vIEFkZCBkZWZhdWx0IGJlZm9yZSBtaWRkbGV3YXJlXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTG9hZGVyLl9kZWZhdWx0QmVmb3JlTWlkZGxld2FyZS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5wcmUoTG9hZGVyLl9kZWZhdWx0QmVmb3JlTWlkZGxld2FyZVtpXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgZGVmYXVsdCBhZnRlciBtaWRkbGV3YXJlXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTG9hZGVyLl9kZWZhdWx0QWZ0ZXJNaWRkbGV3YXJlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLnVzZShMb2FkZXIuX2RlZmF1bHRBZnRlck1pZGRsZXdhcmVbaV0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgcHJvZ3Jlc3MgY2hhbmdlcyB0aGUgbG9hZGVyIGFuZCByZXNvdXJjZSBhcmUgZGlzYXB0Y2hlZC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBMb2FkZXJcbiAgICAgKiBAY2FsbGJhY2sgT25Qcm9ncmVzc1NpZ25hbFxuICAgICAqIEBwYXJhbSB7TG9hZGVyfSBsb2FkZXIgLSBUaGUgbG9hZGVyIHRoZSBwcm9ncmVzcyBpcyBhZHZhbmNpbmcgb24uXG4gICAgICogQHBhcmFtIHtSZXNvdXJjZX0gcmVzb3VyY2UgLSBUaGUgcmVzb3VyY2UgdGhhdCBoYXMgY29tcGxldGVkIG9yIGZhaWxlZCB0byBjYXVzZSB0aGUgcHJvZ3Jlc3MgdG8gYWR2YW5jZS5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIFdoZW4gYW4gZXJyb3Igb2NjdXJycyB0aGUgbG9hZGVyIGFuZCByZXNvdXJjZSBhcmUgZGlzYXB0Y2hlZC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBMb2FkZXJcbiAgICAgKiBAY2FsbGJhY2sgT25FcnJvclNpZ25hbFxuICAgICAqIEBwYXJhbSB7TG9hZGVyfSBsb2FkZXIgLSBUaGUgbG9hZGVyIHRoZSBlcnJvciBoYXBwZW5lZCBpbi5cbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlfSByZXNvdXJjZSAtIFRoZSByZXNvdXJjZSB0aGF0IGNhdXNlZCB0aGUgZXJyb3IuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIGEgbG9hZCBjb21wbGV0ZXMgdGhlIGxvYWRlciBhbmQgcmVzb3VyY2UgYXJlIGRpc2FwdGNoZWQuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgTG9hZGVyXG4gICAgICogQGNhbGxiYWNrIE9uTG9hZFNpZ25hbFxuICAgICAqIEBwYXJhbSB7TG9hZGVyfSBsb2FkZXIgLSBUaGUgbG9hZGVyIHRoYXQgbGFvZGVkIHRoZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlfSByZXNvdXJjZSAtIFRoZSByZXNvdXJjZSB0aGF0IGhhcyBjb21wbGV0ZWQgbG9hZGluZy5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGxvYWRlciBzdGFydHMgbG9hZGluZyByZXNvdXJjZXMgaXQgZGlzcGF0Y2hlcyB0aGlzIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIExvYWRlclxuICAgICAqIEBjYWxsYmFjayBPblN0YXJ0U2lnbmFsXG4gICAgICogQHBhcmFtIHtMb2FkZXJ9IGxvYWRlciAtIFRoZSBsb2FkZXIgdGhhdCBoYXMgc3RhcnRlZCBsb2FkaW5nIHJlc291cmNlcy5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGxvYWRlciBjb21wbGV0ZXMgbG9hZGluZyByZXNvdXJjZXMgaXQgZGlzcGF0Y2hlcyB0aGlzIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIExvYWRlclxuICAgICAqIEBjYWxsYmFjayBPbkNvbXBsZXRlU2lnbmFsXG4gICAgICogQHBhcmFtIHtMb2FkZXJ9IGxvYWRlciAtIFRoZSBsb2FkZXIgdGhhdCBoYXMgZmluaXNoZWQgbG9hZGluZyByZXNvdXJjZXMuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBPcHRpb25zIGZvciBhIGNhbGwgdG8gYC5hZGQoKWAuXG4gICAgICpcbiAgICAgKiBAc2VlIExvYWRlciNhZGRcbiAgICAgKlxuICAgICAqIEB0eXBlZGVmIHtvYmplY3R9IElBZGRPcHRpb25zXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtuYW1lXSAtIFRoZSBuYW1lIG9mIHRoZSByZXNvdXJjZSB0byBsb2FkLCBpZiBub3QgcGFzc2VkIHRoZSB1cmwgaXMgdXNlZC5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gLSBBbGlhcyBmb3IgYG5hbWVgLlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSAtIFRoZSB1cmwgZm9yIHRoaXMgcmVzb3VyY2UsIHJlbGF0aXZlIHRvIHRoZSBiYXNlVXJsIG9mIHRoaXMgbG9hZGVyLlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfGJvb2xlYW59IFtjcm9zc09yaWdpbl0gLSBJcyB0aGlzIHJlcXVlc3QgY3Jvc3Mtb3JpZ2luPyBEZWZhdWx0IGlzIHRvXG4gICAgICogICAgICBkZXRlcm1pbmUgYXV0b21hdGljYWxseS5cbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gW3RpbWVvdXQ9MF0gLSBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgbG9hZC4gSWYgdGhlIGxvYWQgdGFrZXNcbiAgICAgKiAgICAgIGxvbmdlciB0aGFuIHRoaXMgdGltZSBpdCBpcyBjYW5jZWxsZWQgYW5kIHRoZSBsb2FkIGlzIGNvbnNpZGVyZWQgYSBmYWlsdXJlLiBJZiB0aGlzIHZhbHVlIGlzXG4gICAgICogICAgICBzZXQgdG8gYDBgIHRoZW4gdGhlcmUgaXMgbm8gZXhwbGljaXQgdGltZW91dC5cbiAgICAgKiBAcHJvcGVydHkge1Jlc291cmNlLkxPQURfVFlQRX0gW2xvYWRUeXBlPVJlc291cmNlLkxPQURfVFlQRS5YSFJdIC0gSG93IHNob3VsZCB0aGlzIHJlc291cmNlXG4gICAgICogICAgICBiZSBsb2FkZWQ/XG4gICAgICogQHByb3BlcnR5IHtSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRX0gW3hoclR5cGU9UmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuREVGQVVMVF0gLSBIb3dcbiAgICAgKiAgICAgIHNob3VsZCB0aGUgZGF0YSBiZWluZyBsb2FkZWQgYmUgaW50ZXJwcmV0ZWQgd2hlbiB1c2luZyBYSFI/XG4gICAgICogQHByb3BlcnR5IHtSZXNvdXJjZS5PbkNvbXBsZXRlU2lnbmFsfSBbb25Db21wbGV0ZV0gLSBDYWxsYmFjayB0byBhZGQgYW4gYW4gb25Db21wbGV0ZSBzaWduYWwgaXN0ZW5lci5cbiAgICAgKiBAcHJvcGVydHkge1Jlc291cmNlLk9uQ29tcGxldGVTaWduYWx9IFtjYWxsYmFja10gLSBBbGlhcyBmb3IgYG9uQ29tcGxldGVgLlxuICAgICAqIEBwcm9wZXJ0eSB7UmVzb3VyY2UuSU1ldGFkYXRhfSBbbWV0YWRhdGFdIC0gRXh0cmEgY29uZmlndXJhdGlvbiBmb3IgbWlkZGxld2FyZSBhbmQgdGhlIFJlc291cmNlIG9iamVjdC5cbiAgICAgKi9cblxuICAgIC8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MsdmFsaWQtanNkb2MgKi9cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcmVzb3VyY2UgKG9yIG11bHRpcGxlIHJlc291cmNlcykgdG8gdGhlIGxvYWRlciBxdWV1ZS5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIHRha2UgYSB3aWRlIHZhcmlldHkgb2YgZGlmZmVyZW50IHBhcmFtZXRlcnMuIFRoZSBvbmx5IHRoaW5nIHRoYXQgaXMgYWx3YXlzXG4gICAgICogcmVxdWlyZWQgdGhlIHVybCB0byBsb2FkLiBBbGwgdGhlIGZvbGxvd2luZyB3aWxsIHdvcms6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGxvYWRlclxuICAgICAqICAgICAvLyBub3JtYWwgcGFyYW0gc3ludGF4XG4gICAgICogICAgIC5hZGQoJ2tleScsICdodHRwOi8vLi4uJywgZnVuY3Rpb24gKCkge30pXG4gICAgICogICAgIC5hZGQoJ2h0dHA6Ly8uLi4nLCBmdW5jdGlvbiAoKSB7fSlcbiAgICAgKiAgICAgLmFkZCgnaHR0cDovLy4uLicpXG4gICAgICpcbiAgICAgKiAgICAgLy8gb2JqZWN0IHN5bnRheFxuICAgICAqICAgICAuYWRkKHtcbiAgICAgKiAgICAgICAgIG5hbWU6ICdrZXkyJyxcbiAgICAgKiAgICAgICAgIHVybDogJ2h0dHA6Ly8uLi4nXG4gICAgICogICAgIH0sIGZ1bmN0aW9uICgpIHt9KVxuICAgICAqICAgICAuYWRkKHtcbiAgICAgKiAgICAgICAgIHVybDogJ2h0dHA6Ly8uLi4nXG4gICAgICogICAgIH0sIGZ1bmN0aW9uICgpIHt9KVxuICAgICAqICAgICAuYWRkKHtcbiAgICAgKiAgICAgICAgIG5hbWU6ICdrZXkzJyxcbiAgICAgKiAgICAgICAgIHVybDogJ2h0dHA6Ly8uLi4nXG4gICAgICogICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7fVxuICAgICAqICAgICB9KVxuICAgICAqICAgICAuYWRkKHtcbiAgICAgKiAgICAgICAgIHVybDogJ2h0dHBzOi8vLi4uJyxcbiAgICAgKiAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uICgpIHt9LFxuICAgICAqICAgICAgICAgY3Jvc3NPcmlnaW46IHRydWVcbiAgICAgKiAgICAgfSlcbiAgICAgKlxuICAgICAqICAgICAvLyB5b3UgY2FuIGFsc28gcGFzcyBhbiBhcnJheSBvZiBvYmplY3RzIG9yIHVybHMgb3IgYm90aFxuICAgICAqICAgICAuYWRkKFtcbiAgICAgKiAgICAgICAgIHsgbmFtZTogJ2tleTQnLCB1cmw6ICdodHRwOi8vLi4uJywgb25Db21wbGV0ZTogZnVuY3Rpb24gKCkge30gfSxcbiAgICAgKiAgICAgICAgIHsgdXJsOiAnaHR0cDovLy4uLicsIG9uQ29tcGxldGU6IGZ1bmN0aW9uICgpIHt9IH0sXG4gICAgICogICAgICAgICAnaHR0cDovLy4uLidcbiAgICAgKiAgICAgXSlcbiAgICAgKlxuICAgICAqICAgICAvLyBhbmQgeW91IGNhbiB1c2UgYm90aCBwYXJhbXMgYW5kIG9wdGlvbnNcbiAgICAgKiAgICAgLmFkZCgna2V5JywgJ2h0dHA6Ly8uLi4nLCB7IGNyb3NzT3JpZ2luOiB0cnVlIH0sIGZ1bmN0aW9uICgpIHt9KVxuICAgICAqICAgICAuYWRkKCdodHRwOi8vLi4uJywgeyBjcm9zc09yaWdpbjogdHJ1ZSB9LCBmdW5jdGlvbiAoKSB7fSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAdmFyaWF0aW9uIDFcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSByZXNvdXJjZSB0byBsb2FkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgdXJsIGZvciB0aGlzIHJlc291cmNlLCByZWxhdGl2ZSB0byB0aGUgYmFzZVVybCBvZiB0aGlzIGxvYWRlci5cbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlLk9uQ29tcGxldGVTaWduYWx9IFtjYWxsYmFja10gLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhpcyBzcGVjaWZpYyByZXNvdXJjZSBjb21wbGV0ZXMgbG9hZGluZy5cbiAgICAgKiBAcmV0dXJuIHt0aGlzfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi8vKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAdmFyaWF0aW9uIDJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSByZXNvdXJjZSB0byBsb2FkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgdXJsIGZvciB0aGlzIHJlc291cmNlLCByZWxhdGl2ZSB0byB0aGUgYmFzZVVybCBvZiB0aGlzIGxvYWRlci5cbiAgICAgKiBAcGFyYW0ge0lBZGRPcHRpb25zfSBbb3B0aW9uc10gLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGxvYWQuXG4gICAgICogQHBhcmFtIHtSZXNvdXJjZS5PbkNvbXBsZXRlU2lnbmFsfSBbY2FsbGJhY2tdIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoaXMgc3BlY2lmaWMgcmVzb3VyY2UgY29tcGxldGVzIGxvYWRpbmcuXG4gICAgICogQHJldHVybiB7dGhpc30gUmV0dXJucyBpdHNlbGYuXG4gICAgICovLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHZhcmlhdGlvbiAzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSB1cmwgZm9yIHRoaXMgcmVzb3VyY2UsIHJlbGF0aXZlIHRvIHRoZSBiYXNlVXJsIG9mIHRoaXMgbG9hZGVyLlxuICAgICAqIEBwYXJhbSB7UmVzb3VyY2UuT25Db21wbGV0ZVNpZ25hbH0gW2NhbGxiYWNrXSAtIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIHNwZWNpZmljIHJlc291cmNlIGNvbXBsZXRlcyBsb2FkaW5nLlxuICAgICAqIEByZXR1cm4ge3RoaXN9IFJldHVybnMgaXRzZWxmLlxuICAgICAqLy8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEB2YXJpYXRpb24gNFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgdXJsIGZvciB0aGlzIHJlc291cmNlLCByZWxhdGl2ZSB0byB0aGUgYmFzZVVybCBvZiB0aGlzIGxvYWRlci5cbiAgICAgKiBAcGFyYW0ge0lBZGRPcHRpb25zfSBbb3B0aW9uc10gLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGxvYWQuXG4gICAgICogQHBhcmFtIHtSZXNvdXJjZS5PbkNvbXBsZXRlU2lnbmFsfSBbY2FsbGJhY2tdIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoaXMgc3BlY2lmaWMgcmVzb3VyY2UgY29tcGxldGVzIGxvYWRpbmcuXG4gICAgICogQHJldHVybiB7dGhpc30gUmV0dXJucyBpdHNlbGYuXG4gICAgICovLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHZhcmlhdGlvbiA1XG4gICAgICogQHBhcmFtIHtJQWRkT3B0aW9uc30gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgbG9hZC4gVGhpcyBvYmplY3QgbXVzdCBjb250YWluIGEgYHVybGAgcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtSZXNvdXJjZS5PbkNvbXBsZXRlU2lnbmFsfSBbY2FsbGJhY2tdIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoaXMgc3BlY2lmaWMgcmVzb3VyY2UgY29tcGxldGVzIGxvYWRpbmcuXG4gICAgICogQHJldHVybiB7dGhpc30gUmV0dXJucyBpdHNlbGYuXG4gICAgICovLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHZhcmlhdGlvbiA2XG4gICAgICogQHBhcmFtIHtBcnJheTxJQWRkT3B0aW9uc3xzdHJpbmc+fSByZXNvdXJjZXMgLSBBbiBhcnJheSBvZiByZXNvdXJjZXMgdG8gbG9hZCwgd2hlcmUgZWFjaCBpc1xuICAgICAqICAgICAgZWl0aGVyIGFuIG9iamVjdCB3aXRoIHRoZSBvcHRpb25zIG9yIGEgc3RyaW5nIHVybC4gSWYgeW91IHBhc3MgYW4gb2JqZWN0LCBpdCBtdXN0IGNvbnRhaW4gYSBgdXJsYCBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlLk9uQ29tcGxldGVTaWduYWx9IFtjYWxsYmFja10gLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhpcyBzcGVjaWZpYyByZXNvdXJjZSBjb21wbGV0ZXMgbG9hZGluZy5cbiAgICAgKiBAcmV0dXJuIHt0aGlzfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBhZGQobmFtZSwgdXJsLCBvcHRpb25zLCBjYikge1xuICAgICAgICAvLyBzcGVjaWFsIGNhc2Ugb2YgYW4gYXJyYXkgb2Ygb2JqZWN0cyBvciB1cmxzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWUpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWUubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChuYW1lW2ldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiBhbiBvYmplY3QgaXMgcGFzc2VkIGluc3RlYWQgb2YgcGFyYW1zXG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNiID0gdXJsIHx8IG5hbWUuY2FsbGJhY2sgfHwgbmFtZS5vbkNvbXBsZXRlO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG5hbWU7XG4gICAgICAgICAgICB1cmwgPSBuYW1lLnVybDtcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lLm5hbWUgfHwgbmFtZS5rZXkgfHwgbmFtZS51cmw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjYXNlIHdoZXJlIG5vIG5hbWUgaXMgcGFzc2VkIHNoaWZ0IGFsbCBhcmdzIG92ZXIgYnkgb25lLlxuICAgICAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNiID0gb3B0aW9ucztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB1cmw7XG4gICAgICAgICAgICB1cmwgPSBuYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm93IHRoYXQgd2Ugc2hpZnRlZCBtYWtlIHN1cmUgd2UgaGF2ZSBhIHByb3BlciB1cmwuXG4gICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1cmwgcGFzc2VkIHRvIGFkZCByZXNvdXJjZSB0byBsb2FkZXIuJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvcHRpb25zIGFyZSBvcHRpb25hbCBzbyBwZW9wbGUgbWlnaHQgcGFzcyBhIGZ1bmN0aW9uIGFuZCBubyBvcHRpb25zXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2IgPSBvcHRpb25zO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiBsb2FkaW5nIGFscmVhZHkgeW91IGNhbiBvbmx5IGFkZCByZXNvdXJjZXMgdGhhdCBoYXZlIGEgcGFyZW50LlxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nICYmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5wYXJlbnRSZXNvdXJjZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGFkZCByZXNvdXJjZXMgd2hpbGUgdGhlIGxvYWRlciBpcyBydW5uaW5nLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgaWYgcmVzb3VyY2UgYWxyZWFkeSBleGlzdHMuXG4gICAgICAgIGlmICh0aGlzLnJlc291cmNlc1tuYW1lXSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXNvdXJjZSBuYW1lZCBcIiR7bmFtZX1cIiBhbHJlYWR5IGV4aXN0cy5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBiYXNlIHVybCBpZiB0aGlzIGlzbid0IGFuIGFic29sdXRlIHVybFxuICAgICAgICB1cmwgPSB0aGlzLl9wcmVwYXJlVXJsKHVybCk7XG5cbiAgICAgICAgLy8gY3JlYXRlIHRoZSBzdG9yZSB0aGUgcmVzb3VyY2VcbiAgICAgICAgdGhpcy5yZXNvdXJjZXNbbmFtZV0gPSBuZXcgUmVzb3VyY2UobmFtZSwgdXJsLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlc1tuYW1lXS5vbkFmdGVyTWlkZGxld2FyZS5vbmNlKGNiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIGFjdGl2ZWx5IGxvYWRpbmcsIG1ha2Ugc3VyZSB0byBhZGp1c3QgcHJvZ3Jlc3MgY2h1bmtzIGZvciB0aGF0IHBhcmVudCBhbmQgaXRzIGNoaWxkcmVuXG4gICAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG9wdGlvbnMucGFyZW50UmVzb3VyY2U7XG4gICAgICAgICAgICBjb25zdCBpbmNvbXBsZXRlQ2hpbGRyZW4gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcmVudC5jaGlsZHJlbltpXS5pc0NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGluY29tcGxldGVDaGlsZHJlbi5wdXNoKHBhcmVudC5jaGlsZHJlbltpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBmdWxsQ2h1bmsgPSBwYXJlbnQucHJvZ3Jlc3NDaHVuayAqIChpbmNvbXBsZXRlQ2hpbGRyZW4ubGVuZ3RoICsgMSk7IC8vICsxIGZvciBwYXJlbnRcbiAgICAgICAgICAgIGNvbnN0IGVhY2hDaHVuayA9IGZ1bGxDaHVuayAvIChpbmNvbXBsZXRlQ2hpbGRyZW4ubGVuZ3RoICsgMik7IC8vICsyIGZvciBwYXJlbnQgJiBuZXcgY2hpbGRcblxuICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2godGhpcy5yZXNvdXJjZXNbbmFtZV0pO1xuICAgICAgICAgICAgcGFyZW50LnByb2dyZXNzQ2h1bmsgPSBlYWNoQ2h1bms7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5jb21wbGV0ZUNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgaW5jb21wbGV0ZUNoaWxkcmVuW2ldLnByb2dyZXNzQ2h1bmsgPSBlYWNoQ2h1bms7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzW25hbWVdLnByb2dyZXNzQ2h1bmsgPSBlYWNoQ2h1bms7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgdGhlIHJlc291cmNlIHRvIHRoZSBxdWV1ZVxuICAgICAgICB0aGlzLl9xdWV1ZS5wdXNoKHRoaXMucmVzb3VyY2VzW25hbWVdKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSByZXF1aXJlLWpzZG9jLHZhbGlkLWpzZG9jICovXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIGEgbWlkZGxld2FyZSBmdW5jdGlvbiB0aGF0IHdpbGwgcnVuICpiZWZvcmUqIHRoZVxuICAgICAqIHJlc291cmNlIGlzIGxvYWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gVGhlIG1pZGRsZXdhcmUgZnVuY3Rpb24gdG8gcmVnaXN0ZXIuXG4gICAgICogQHJldHVybiB7dGhpc30gUmV0dXJucyBpdHNlbGYuXG4gICAgICovXG4gICAgcHJlKGZuKSB7XG4gICAgICAgIHRoaXMuX2JlZm9yZU1pZGRsZXdhcmUucHVzaChmbik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCBhIG1pZGRsZXdhcmUgZnVuY3Rpb24gdGhhdCB3aWxsIHJ1biAqYWZ0ZXIqIHRoZVxuICAgICAqIHJlc291cmNlIGlzIGxvYWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gVGhlIG1pZGRsZXdhcmUgZnVuY3Rpb24gdG8gcmVnaXN0ZXIuXG4gICAgICogQHJldHVybiB7dGhpc30gUmV0dXJucyBpdHNlbGYuXG4gICAgICovXG4gICAgdXNlKGZuKSB7XG4gICAgICAgIHRoaXMuX2FmdGVyTWlkZGxld2FyZS5wdXNoKGZuKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHF1ZXVlIG9mIHRoZSBsb2FkZXIgdG8gcHJlcGFyZSBmb3IgYSBuZXcgbG9hZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3RoaXN9IFJldHVybnMgaXRzZWxmLlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fcXVldWUua2lsbCgpO1xuICAgICAgICB0aGlzLl9xdWV1ZS5wYXVzZSgpO1xuXG4gICAgICAgIC8vIGFib3J0IGFsbCByZXNvdXJjZSBsb2Fkc1xuICAgICAgICBmb3IgKGNvbnN0IGsgaW4gdGhpcy5yZXNvdXJjZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IHRoaXMucmVzb3VyY2VzW2tdO1xuXG4gICAgICAgICAgICBpZiAocmVzLl9vbkxvYWRCaW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzLl9vbkxvYWRCaW5kaW5nLmRldGFjaCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVzLmlzTG9hZGluZykge1xuICAgICAgICAgICAgICAgIHJlcy5hYm9ydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXNvdXJjZXMgPSB7fTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFydHMgbG9hZGluZyB0aGUgcXVldWVkIHJlc291cmNlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtjYl0gLSBPcHRpb25hbCBjYWxsYmFjayB0aGF0IHdpbGwgYmUgYm91bmQgdG8gdGhlIGBjb21wbGV0ZWAgZXZlbnQuXG4gICAgICogQHJldHVybiB7dGhpc30gUmV0dXJucyBpdHNlbGYuXG4gICAgICovXG4gICAgbG9hZChjYikge1xuICAgICAgICAvLyByZWdpc3RlciBjb21wbGV0ZSBjYWxsYmFjayBpZiB0aGV5IHBhc3Mgb25lXG4gICAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZS5vbmNlKGNiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZSBxdWV1ZSBoYXMgYWxyZWFkeSBzdGFydGVkIHdlIGFyZSBkb25lIGhlcmVcbiAgICAgICAgaWYgKHRoaXMubG9hZGluZykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fcXVldWUuaWRsZSgpKSB7XG4gICAgICAgICAgICB0aGlzLl9vblN0YXJ0KCk7XG4gICAgICAgICAgICB0aGlzLl9vbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBkaXN0cmlidXRlIHByb2dyZXNzIGNodW5rc1xuICAgICAgICAgICAgY29uc3QgbnVtVGFza3MgPSB0aGlzLl9xdWV1ZS5fdGFza3MubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBNQVhfUFJPR1JFU1MgLyBudW1UYXNrcztcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9xdWV1ZS5fdGFza3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZS5fdGFza3NbaV0uZGF0YS5wcm9ncmVzc0NodW5rID0gY2h1bms7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG5vdGlmeSB3ZSBhcmUgc3RhcnRpbmdcbiAgICAgICAgICAgIHRoaXMuX29uU3RhcnQoKTtcblxuICAgICAgICAgICAgLy8gc3RhcnQgbG9hZGluZ1xuICAgICAgICAgICAgdGhpcy5fcXVldWUucmVzdW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHJlc291cmNlcyB0byBsb2FkIGNvbmN1cnJlbnRseS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCAxMFxuICAgICAqL1xuICAgIGdldCBjb25jdXJyZW5jeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXVlLmNvbmN1cnJlbmN5O1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1qc2RvY1xuICAgIHNldCBjb25jdXJyZW5jeShjb25jdXJyZW5jeSkge1xuICAgICAgICB0aGlzLl9xdWV1ZS5jb25jdXJyZW5jeSA9IGNvbmN1cnJlbmN5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByZXBhcmVzIGEgdXJsIGZvciB1c2FnZSBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvbiBvZiB0aGlzIG9iamVjdFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIHVybCB0byBwcmVwYXJlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHByZXBhcmVkIHVybC5cbiAgICAgKi9cbiAgICBfcHJlcGFyZVVybCh1cmwpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVXJsID0gcGFyc2VVcmkodXJsLCB7IHN0cmljdE1vZGU6IHRydWUgfSk7XG4gICAgICAgIGxldCByZXN1bHQ7XG5cbiAgICAgICAgLy8gYWJzb2x1dGUgdXJsLCBqdXN0IHVzZSBpdCBhcyBpcy5cbiAgICAgICAgaWYgKHBhcnNlZFVybC5wcm90b2NvbCB8fCAhcGFyc2VkVXJsLnBhdGggfHwgdXJsLmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHVybDtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBiYXNlVXJsIGRvZXNuJ3QgZW5kIGluIHNsYXNoIGFuZCB1cmwgZG9lc24ndCBzdGFydCB3aXRoIHNsYXNoLCB0aGVuIGFkZCBhIHNsYXNoIGluYmV0d2VlblxuICAgICAgICBlbHNlIGlmICh0aGlzLmJhc2VVcmwubGVuZ3RoXG4gICAgICAgICAgICAmJiB0aGlzLmJhc2VVcmwubGFzdEluZGV4T2YoJy8nKSAhPT0gdGhpcy5iYXNlVXJsLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICYmIHVybC5jaGFyQXQoMCkgIT09ICcvJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGAke3RoaXMuYmFzZVVybH0vJHt1cmx9YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuYmFzZVVybCArIHVybDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHdlIG5lZWQgdG8gYWRkIGEgZGVmYXVsdCBxdWVyeXN0cmluZywgdGhlcmUgaXMgYSBiaXQgbW9yZSB3b3JrXG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRRdWVyeVN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgaGFzaCA9IHJneEV4dHJhY3RVcmxIYXNoLmV4ZWMocmVzdWx0KVswXTtcblxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnN1YnN0cigwLCByZXN1bHQubGVuZ3RoIC0gaGFzaC5sZW5ndGgpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0LmluZGV4T2YoJz8nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gYCYke3RoaXMuZGVmYXVsdFF1ZXJ5U3RyaW5nfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gYD8ke3RoaXMuZGVmYXVsdFF1ZXJ5U3RyaW5nfWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3VsdCArPSBoYXNoO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIHNpbmdsZSByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtSZXNvdXJjZX0gcmVzb3VyY2UgLSBUaGUgcmVzb3VyY2UgdG8gbG9hZC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBkZXF1ZXVlIC0gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB3ZSBuZWVkIHRvIGRlcXVldWUgdGhpcyBpdGVtLlxuICAgICAqL1xuICAgIF9sb2FkUmVzb3VyY2UocmVzb3VyY2UsIGRlcXVldWUpIHtcbiAgICAgICAgcmVzb3VyY2UuX2RlcXVldWUgPSBkZXF1ZXVlO1xuXG4gICAgICAgIC8vIHJ1biBiZWZvcmUgbWlkZGxld2FyZVxuICAgICAgICBhc3luYy5lYWNoU2VyaWVzKFxuICAgICAgICAgICAgdGhpcy5fYmVmb3JlTWlkZGxld2FyZSxcbiAgICAgICAgICAgIChmbiwgbmV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIGZuLmNhbGwodGhpcywgcmVzb3VyY2UsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGJlZm9yZSBtaWRkbGV3YXJlIG1hcmtzIHRoZSByZXNvdXJjZSBhcyBjb21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWsgYW5kIGRvbid0IHByb2Nlc3MgYW55IG1vcmUgYmVmb3JlIG1pZGRsZXdhcmVcbiAgICAgICAgICAgICAgICAgICAgbmV4dChyZXNvdXJjZS5pc0NvbXBsZXRlID8ge30gOiBudWxsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc291cmNlLmlzQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25Mb2FkKHJlc291cmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlLl9vbkxvYWRCaW5kaW5nID0gcmVzb3VyY2Uub25Db21wbGV0ZS5vbmNlKHRoaXMuX29uTG9hZCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlLmxvYWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBvbmNlIGxvYWRpbmcgaGFzIHN0YXJ0ZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9vblN0YXJ0KCkge1xuICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vblN0YXJ0LmRpc3BhdGNoKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBvbmNlIGVhY2ggcmVzb3VyY2UgaGFzIGxvYWRlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX29uQ29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBNQVhfUFJPR1JFU1M7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9uQ29tcGxldGUuZGlzcGF0Y2godGhpcywgdGhpcy5yZXNvdXJjZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBlYWNoIHRpbWUgYSByZXNvdXJjZXMgaXMgbG9hZGVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlfSByZXNvdXJjZSAtIFRoZSByZXNvdXJjZSB0aGF0IHdhcyBsb2FkZWRcbiAgICAgKi9cbiAgICBfb25Mb2FkKHJlc291cmNlKSB7XG4gICAgICAgIHJlc291cmNlLl9vbkxvYWRCaW5kaW5nID0gbnVsbDtcblxuICAgICAgICAvLyByZW1vdmUgdGhpcyByZXNvdXJjZSBmcm9tIHRoZSBhc3luYyBxdWV1ZSwgYW5kIGFkZCBpdCB0byBvdXIgbGlzdCBvZiByZXNvdXJjZXMgdGhhdCBhcmUgYmVpbmcgcGFyc2VkXG4gICAgICAgIHRoaXMuX3Jlc291cmNlc1BhcnNpbmcucHVzaChyZXNvdXJjZSk7XG4gICAgICAgIHJlc291cmNlLl9kZXF1ZXVlKCk7XG5cbiAgICAgICAgLy8gcnVuIGFsbCB0aGUgYWZ0ZXIgbWlkZGxld2FyZSBmb3IgdGhpcyByZXNvdXJjZVxuICAgICAgICBhc3luYy5lYWNoU2VyaWVzKFxuICAgICAgICAgICAgdGhpcy5fYWZ0ZXJNaWRkbGV3YXJlLFxuICAgICAgICAgICAgKGZuLCBuZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCByZXNvdXJjZSwgbmV4dCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc291cmNlLm9uQWZ0ZXJNaWRkbGV3YXJlLmRpc3BhdGNoKHJlc291cmNlKTtcblxuICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBNYXRoLm1pbihNQVhfUFJPR1JFU1MsIHRoaXMucHJvZ3Jlc3MgKyByZXNvdXJjZS5wcm9ncmVzc0NodW5rKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUHJvZ3Jlc3MuZGlzcGF0Y2godGhpcywgcmVzb3VyY2UpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlc291cmNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvci5kaXNwYXRjaChyZXNvdXJjZS5lcnJvciwgdGhpcywgcmVzb3VyY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkxvYWQuZGlzcGF0Y2godGhpcywgcmVzb3VyY2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc291cmNlc1BhcnNpbmcuc3BsaWNlKHRoaXMuX3Jlc291cmNlc1BhcnNpbmcuaW5kZXhPZihyZXNvdXJjZSksIDEpO1xuXG4gICAgICAgICAgICAgICAgLy8gZG8gY29tcGxldGlvbiBjaGVja1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9xdWV1ZS5pZGxlKCkgJiYgdGhpcy5fcmVzb3VyY2VzUGFyc2luZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgZGVmYXVsdCBhcnJheSBvZiBtaWRkbGV3YXJlIHRvIHJ1biBiZWZvcmUgbG9hZGluZyBlYWNoIHJlc291cmNlLlxuICogRWFjaCBvZiB0aGVzZSBtaWRkbGV3YXJlcyBhcmUgYWRkZWQgdG8gYW55IG5ldyBMb2FkZXIgaW5zdGFuY2VzIHdoZW4gdGhleSBhcmUgY3JlYXRlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG1lbWJlciB7ZnVuY3Rpb25bXX1cbiAqL1xuTG9hZGVyLl9kZWZhdWx0QmVmb3JlTWlkZGxld2FyZSA9IFtdO1xuXG4vKipcbiAqIEEgZGVmYXVsdCBhcnJheSBvZiBtaWRkbGV3YXJlIHRvIHJ1biBhZnRlciBsb2FkaW5nIGVhY2ggcmVzb3VyY2UuXG4gKiBFYWNoIG9mIHRoZXNlIG1pZGRsZXdhcmVzIGFyZSBhZGRlZCB0byBhbnkgbmV3IExvYWRlciBpbnN0YW5jZXMgd2hlbiB0aGV5IGFyZSBjcmVhdGVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbWVtYmVyIHtmdW5jdGlvbltdfVxuICovXG5Mb2FkZXIuX2RlZmF1bHRBZnRlck1pZGRsZXdhcmUgPSBbXTtcblxuLyoqXG4gKiBTZXRzIHVwIGEgbWlkZGxld2FyZSBmdW5jdGlvbiB0aGF0IHdpbGwgcnVuICpiZWZvcmUqIHRoZVxuICogcmVzb3VyY2UgaXMgbG9hZGVkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gVGhlIG1pZGRsZXdhcmUgZnVuY3Rpb24gdG8gcmVnaXN0ZXIuXG4gKiBAcmV0dXJuIHtMb2FkZXJ9IFJldHVybnMgaXRzZWxmLlxuICovXG5Mb2FkZXIucHJlID0gZnVuY3Rpb24gTG9hZGVyUHJlU3RhdGljKGZuKSB7XG4gICAgTG9hZGVyLl9kZWZhdWx0QmVmb3JlTWlkZGxld2FyZS5wdXNoKGZuKTtcblxuICAgIHJldHVybiBMb2FkZXI7XG59O1xuXG4vKipcbiAqIFNldHMgdXAgYSBtaWRkbGV3YXJlIGZ1bmN0aW9uIHRoYXQgd2lsbCBydW4gKmFmdGVyKiB0aGVcbiAqIHJlc291cmNlIGlzIGxvYWRlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIFRoZSBtaWRkbGV3YXJlIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyLlxuICogQHJldHVybiB7TG9hZGVyfSBSZXR1cm5zIGl0c2VsZi5cbiAqL1xuTG9hZGVyLnVzZSA9IGZ1bmN0aW9uIExvYWRlclVzZVN0YXRpYyhmbikge1xuICAgIExvYWRlci5fZGVmYXVsdEFmdGVyTWlkZGxld2FyZS5wdXNoKGZuKTtcblxuICAgIHJldHVybiBMb2FkZXI7XG59O1xuXG5leHBvcnQgeyBMb2FkZXIgfTtcblxuIiwgImltcG9ydCB7IFJlc291cmNlIH0gZnJvbSAncmVzb3VyY2UtbG9hZGVyJztcblxuaW1wb3J0IHR5cGUgeyBTcHJpdGVzaGVldCB9IGZyb20gJ0BwaXhpL3Nwcml0ZXNoZWV0JztcbmltcG9ydCB0eXBlIHsgVGV4dHVyZSB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBEaWN0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNvdXJjZU1ldGFkYXRhIGV4dGVuZHMgR2xvYmFsTWl4aW5zLklSZXNvdXJjZU1ldGFkYXRhLCBSZXNvdXJjZS5JTWV0YWRhdGEge1xuICAgIGltYWdlTWV0YWRhdGE/OiBhbnk7XG59XG5leHBvcnQgaW50ZXJmYWNlIElMb2FkZXJSZXNvdXJjZSBleHRlbmRzIEdsb2JhbE1peGlucy5JTG9hZGVyUmVzb3VyY2UsIFJlc291cmNlXG57XG4gICAgdGV4dHVyZT86IFRleHR1cmU7XG4gICAgc3ByaXRlc2hlZXQ/OiBTcHJpdGVzaGVldDtcblxuICAgIC8vIHJlcXVpcmVkIGZvciBTcHJpdGVzaGVldFxuICAgIHRleHR1cmVzPzogRGljdDxUZXh0dXJlPjtcblxuICAgIC8vIHJlcXVpcmVkIHNwZWNpZmljIHR5cGUgZm9yIFNwcml0ZXNoZWV0XG4gICAgbWV0YWRhdGE6IElSZXNvdXJjZU1ldGFkYXRhO1xufVxuXG4vLyBNaXggY29uc3RydWN0b3IgYW5kIHR5cGVvZiBSZXNvdXJjZSAsIG90aGVyd2lzZSB3ZSBjYW4ndCBhY2Nlc3MgdG8gc3RhdGljcyBmaWVsZFxudHlwZSBUTG9hZGVyUmVzb3VyY2UgPSB7IG5ldyguLi5hcmdzOiBhbnlbXSk6IElMb2FkZXJSZXNvdXJjZSB9ICYgdHlwZW9mIFJlc291cmNlO1xuXG4vKipcbiogUmVmZXJlbmNlIHRvICoqe0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmdsZXJjai9yZXNvdXJjZS1sb2FkZXJcbiogcmVzb3VyY2UtbG9hZGVyfSoqJ3MgUmVzb3VyY2UgY2xhc3MuXG4qIEBzZWUgaHR0cDovL2VuZ2xlcmNqLmdpdGh1Yi5pby9yZXNvdXJjZS1sb2FkZXIvUmVzb3VyY2UuaHRtbFxuKiBAY2xhc3MgTG9hZGVyUmVzb3VyY2VcbiogQG1lbWJlcm9mIFBJWElcbiovXG5leHBvcnQgY29uc3QgTG9hZGVyUmVzb3VyY2U6IFRMb2FkZXJSZXNvdXJjZSA9IFJlc291cmNlO1xuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwgImltcG9ydCB7IFJlc291cmNlIH0gZnJvbSAncmVzb3VyY2UtbG9hZGVyJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICdAcGl4aS9jb3JlJztcblxuaW1wb3J0IHR5cGUgeyBJTG9hZGVyUmVzb3VyY2UgfSBmcm9tICcuL0xvYWRlclJlc291cmNlJztcblxuLyoqXG4gKiBMb2FkZXIgcGx1Z2luIGZvciBoYW5kbGluZyBUZXh0dXJlIHJlc291cmNlcy5cbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqIEBpbXBsZW1lbnRzIFBJWEkuSUxvYWRlclBsdWdpblxuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZUxvYWRlclxue1xuICAgIC8qKlxuICAgICAqIENhbGxlZCBhZnRlciBhIHJlc291cmNlIGlzIGxvYWRlZC5cbiAgICAgKiBAc2VlIFBJWEkuTG9hZGVyLmxvYWRlck1pZGRsZXdhcmVcbiAgICAgKiBAcGFyYW0ge1BJWEkuTG9hZGVyUmVzb3VyY2V9IHJlc291cmNlXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbmV4dFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdXNlKHJlc291cmNlOiBJTG9hZGVyUmVzb3VyY2UsIG5leHQ6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vIGNyZWF0ZSBhIG5ldyB0ZXh0dXJlIGlmIHRoZSBkYXRhIGlzIGFuIEltYWdlIG9iamVjdFxuICAgICAgICBpZiAocmVzb3VyY2UuZGF0YSAmJiByZXNvdXJjZS50eXBlID09PSBSZXNvdXJjZS5UWVBFLklNQUdFKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXNvdXJjZS50ZXh0dXJlID0gVGV4dHVyZS5mcm9tTG9hZGVyKFxuICAgICAgICAgICAgICAgIHJlc291cmNlLmRhdGEsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2UudXJsLFxuICAgICAgICAgICAgICAgIHJlc291cmNlLm5hbWVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCgpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBMb2FkZXIgYXMgUmVzb3VyY2VMb2FkZXIsIG1pZGRsZXdhcmUgfSBmcm9tICdyZXNvdXJjZS1sb2FkZXInO1xuaW1wb3J0IHsgVGV4dHVyZUxvYWRlciB9IGZyb20gJy4vVGV4dHVyZUxvYWRlcic7XG5cbmltcG9ydCB0eXBlIHsgUmVzb3VyY2UgfSBmcm9tICdyZXNvdXJjZS1sb2FkZXInO1xuXG4vKipcbiAqIFRoZSBuZXcgbG9hZGVyLCBleHRlbmRzIFJlc291cmNlIExvYWRlciBieSBDaGFkIEVuZ2xlcjogaHR0cHM6Ly9naXRodWIuY29tL2VuZ2xlcmNqL3Jlc291cmNlLWxvYWRlclxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBsb2FkZXIgPSBQSVhJLkxvYWRlci5zaGFyZWQ7IC8vIFBpeGlKUyBleHBvc2VzIGEgcHJlbWFkZSBpbnN0YW5jZSBmb3IgeW91IHRvIHVzZS5cbiAqIC8vb3JcbiAqIGNvbnN0IGxvYWRlciA9IG5ldyBQSVhJLkxvYWRlcigpOyAvLyB5b3UgY2FuIGFsc28gY3JlYXRlIHlvdXIgb3duIGlmIHlvdSB3YW50XG4gKlxuICogY29uc3Qgc3ByaXRlcyA9IHt9O1xuICpcbiAqIC8vIENoYWluYWJsZSBgYWRkYCB0byBlbnF1ZXVlIGEgcmVzb3VyY2VcbiAqIGxvYWRlci5hZGQoJ2J1bm55JywgJ2RhdGEvYnVubnkucG5nJylcbiAqICAgICAgIC5hZGQoJ3NwYWNlc2hpcCcsICdhc3NldHMvc3ByaXRlc2hlZXQuanNvbicpO1xuICogbG9hZGVyLmFkZCgnc2NvcmVGb250JywgJ2Fzc2V0cy9zY29yZS5mbnQnKTtcbiAqXG4gKiAvLyBDaGFpbmFibGUgYHByZWAgdG8gYWRkIGEgbWlkZGxld2FyZSB0aGF0IHJ1bnMgZm9yIGVhY2ggcmVzb3VyY2UsICpiZWZvcmUqIGxvYWRpbmcgdGhhdCByZXNvdXJjZS5cbiAqIC8vIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBjdXN0b20gY2FjaGluZyBtb2R1bGVzICh1c2luZyBmaWxlc3lzdGVtLCBpbmRleGVkZGIsIG1lbW9yeSwgZXRjKS5cbiAqIGxvYWRlci5wcmUoY2FjaGluZ01pZGRsZXdhcmUpO1xuICpcbiAqIC8vIENoYWluYWJsZSBgdXNlYCB0byBhZGQgYSBtaWRkbGV3YXJlIHRoYXQgcnVucyBmb3IgZWFjaCByZXNvdXJjZSwgKmFmdGVyKiBsb2FkaW5nIHRoYXQgcmVzb3VyY2UuXG4gKiAvLyBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgY3VzdG9tIHBhcnNpbmcgbW9kdWxlcyAobGlrZSBzcHJpdGVzaGVldCBwYXJzZXJzLCBzcGluZSBwYXJzZXIsIGV0YykuXG4gKiBsb2FkZXIudXNlKHBhcnNpbmdNaWRkbGV3YXJlKTtcbiAqXG4gKiAvLyBUaGUgYGxvYWRgIG1ldGhvZCBsb2FkcyB0aGUgcXVldWUgb2YgcmVzb3VyY2VzLCBhbmQgY2FsbHMgdGhlIHBhc3NlZCBpbiBjYWxsYmFjayBjYWxsZWQgb25jZSBhbGxcbiAqIC8vIHJlc291cmNlcyBoYXZlIGxvYWRlZC5cbiAqIGxvYWRlci5sb2FkKChsb2FkZXIsIHJlc291cmNlcykgPT4ge1xuICogICAgIC8vIHJlc291cmNlcyBpcyBhbiBvYmplY3Qgd2hlcmUgdGhlIGtleSBpcyB0aGUgbmFtZSBvZiB0aGUgcmVzb3VyY2UgbG9hZGVkIGFuZCB0aGUgdmFsdWUgaXMgdGhlIHJlc291cmNlIG9iamVjdC5cbiAqICAgICAvLyBUaGV5IGhhdmUgYSBjb3VwbGUgZGVmYXVsdCBwcm9wZXJ0aWVzOlxuICogICAgIC8vIC0gYHVybGA6IFRoZSBVUkwgdGhhdCB0aGUgcmVzb3VyY2Ugd2FzIGxvYWRlZCBmcm9tXG4gKiAgICAgLy8gLSBgZXJyb3JgOiBUaGUgZXJyb3IgdGhhdCBoYXBwZW5lZCB3aGVuIHRyeWluZyB0byBsb2FkIChpZiBhbnkpXG4gKiAgICAgLy8gLSBgZGF0YWA6IFRoZSByYXcgZGF0YSB0aGF0IHdhcyBsb2FkZWRcbiAqICAgICAvLyBhbHNvIG1heSBjb250YWluIG90aGVyIHByb3BlcnRpZXMgYmFzZWQgb24gdGhlIG1pZGRsZXdhcmUgdGhhdCBydW5zLlxuICogICAgIHNwcml0ZXMuYnVubnkgPSBuZXcgUElYSS5UaWxpbmdTcHJpdGUocmVzb3VyY2VzLmJ1bm55LnRleHR1cmUpO1xuICogICAgIHNwcml0ZXMuc3BhY2VzaGlwID0gbmV3IFBJWEkuVGlsaW5nU3ByaXRlKHJlc291cmNlcy5zcGFjZXNoaXAudGV4dHVyZSk7XG4gKiAgICAgc3ByaXRlcy5zY29yZUZvbnQgPSBuZXcgUElYSS5UaWxpbmdTcHJpdGUocmVzb3VyY2VzLnNjb3JlRm9udC50ZXh0dXJlKTtcbiAqIH0pO1xuICpcbiAqIC8vIHRocm91Z2hvdXQgdGhlIHByb2Nlc3MgbXVsdGlwbGUgc2lnbmFscyBjYW4gYmUgZGlzcGF0Y2hlZC5cbiAqIGxvYWRlci5vblByb2dyZXNzLmFkZCgoKSA9PiB7fSk7IC8vIGNhbGxlZCBvbmNlIHBlciBsb2FkZWQvZXJyb3JlZCBmaWxlXG4gKiBsb2FkZXIub25FcnJvci5hZGQoKCkgPT4ge30pOyAvLyBjYWxsZWQgb25jZSBwZXIgZXJyb3JlZCBmaWxlXG4gKiBsb2FkZXIub25Mb2FkLmFkZCgoKSA9PiB7fSk7IC8vIGNhbGxlZCBvbmNlIHBlciBsb2FkZWQgZmlsZVxuICogbG9hZGVyLm9uQ29tcGxldGUuYWRkKCgpID0+IHt9KTsgLy8gY2FsbGVkIG9uY2Ugd2hlbiB0aGUgcXVldWVkIHJlc291cmNlcyBhbGwgbG9hZC5cbiAqIGBgYFxuICpcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2VuZ2xlcmNqL3Jlc291cmNlLWxvYWRlclxuICpcbiAqIEBjbGFzcyBMb2FkZXJcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAcGFyYW0ge3N0cmluZ30gW2Jhc2VVcmw9JyddIC0gVGhlIGJhc2UgdXJsIGZvciBhbGwgcmVzb3VyY2VzIGxvYWRlZCBieSB0aGlzIGxvYWRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVuY3k9MTBdIC0gVGhlIG51bWJlciBvZiByZXNvdXJjZXMgdG8gbG9hZCBjb25jdXJyZW50bHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2FkZXIgZXh0ZW5kcyBSZXNvdXJjZUxvYWRlclxue1xuICAgIC8qKlxuICAgICAqIENvbGxlY3Rpb24gb2YgYWxsIGluc3RhbGxlZCBgdXNlYCBtaWRkbGV3YXJlIGZvciBMb2FkZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlciB7QXJyYXk8UElYSS5JTG9hZGVyUGx1Z2luPn0gX3BsdWdpbnNcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5Mb2FkZXJcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIF9wbHVnaW5zOiBBcnJheTxJTG9hZGVyUGx1Z2luPiA9IFtdO1xuICAgIHByaXZhdGUgc3RhdGljIF9zaGFyZWQ6IExvYWRlcjtcbiAgICBwcml2YXRlIF9wcm90ZWN0ZWQ6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihiYXNlVXJsPzogc3RyaW5nLCBjb25jdXJyZW5jeT86IG51bWJlcilcbiAgICB7XG4gICAgICAgIHN1cGVyKGJhc2VVcmwsIGNvbmN1cnJlbmN5KTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IExvYWRlci5fcGx1Z2lucy5sZW5ndGg7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcGx1Z2luID0gTG9hZGVyLl9wbHVnaW5zW2ldO1xuICAgICAgICAgICAgY29uc3QgeyBwcmUsIHVzZSB9ID0gcGx1Z2luO1xuXG4gICAgICAgICAgICBpZiAocHJlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMucHJlKHByZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh1c2UpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy51c2UodXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0aGlzIGxvYWRlciBjYW5ub3QgYmUgZGVzdHJveWVkLlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcHJvdGVjdGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveSB0aGUgbG9hZGVyLCByZW1vdmVzIHJlZmVyZW5jZXMuXG4gICAgICogQG1lbWJlcm9mIFBJWEkuTG9hZGVyI1xuICAgICAqIEBtZXRob2QgZGVzdHJveVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuX3Byb3RlY3RlZClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBwcmVtYWRlIGluc3RhbmNlIG9mIHRoZSBsb2FkZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBsb2FkIHJlc291cmNlcy5cbiAgICAgKiBAbmFtZSBzaGFyZWRcbiAgICAgKiBAdHlwZSB7UElYSS5Mb2FkZXJ9XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJvZiBQSVhJLkxvYWRlclxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHNoYXJlZCgpOiBMb2FkZXJcbiAgICB7XG4gICAgICAgIGxldCBzaGFyZWQgPSBMb2FkZXIuX3NoYXJlZDtcblxuICAgICAgICBpZiAoIXNoYXJlZClcbiAgICAgICAge1xuICAgICAgICAgICAgc2hhcmVkID0gbmV3IExvYWRlcigpO1xuICAgICAgICAgICAgc2hhcmVkLl9wcm90ZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgTG9hZGVyLl9zaGFyZWQgPSBzaGFyZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2hhcmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBMb2FkZXIgcGx1Z2luIGZvciB0aGUgZ2xvYmFsIHNoYXJlZCBsb2FkZXIgYW5kIGFsbFxuICAgICAqIG5ldyBMb2FkZXIgaW5zdGFuY2VzIGNyZWF0ZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1ldGhvZCByZWdpc3RlclBsdWdpblxuICAgICAqIEBtZW1iZXJvZiBQSVhJLkxvYWRlclxuICAgICAqIEBwYXJhbSB7UElYSS5JTG9hZGVyUGx1Z2lufSBwbHVnaW4gLSBUaGUgcGx1Z2luIHRvIGFkZFxuICAgICAqIEByZXR1cm4ge1BJWEkuTG9hZGVyfSBSZWZlcmVuY2UgdG8gUElYSS5Mb2FkZXIgZm9yIGNoYWluaW5nXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWdpc3RlclBsdWdpbihwbHVnaW46IElMb2FkZXJQbHVnaW4pOiB0eXBlb2YgTG9hZGVyXG4gICAge1xuICAgICAgICBMb2FkZXIuX3BsdWdpbnMucHVzaChwbHVnaW4pO1xuXG4gICAgICAgIGlmIChwbHVnaW4uYWRkKVxuICAgICAgICB7XG4gICAgICAgICAgICBwbHVnaW4uYWRkKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gTG9hZGVyO1xuICAgIH1cbn1cblxuLy8gcGFyc2UgYW55IGJsb2IgaW50byBtb3JlIHVzYWJsZSBvYmplY3RzIChlLmcuIEltYWdlKVxuTG9hZGVyLnJlZ2lzdGVyUGx1Z2luKHsgdXNlOiBtaWRkbGV3YXJlLnBhcnNpbmcgfSk7XG5cbi8vIHBhcnNlIGFueSBJbWFnZSBvYmplY3RzIGludG8gdGV4dHVyZXNcbkxvYWRlci5yZWdpc3RlclBsdWdpbihUZXh0dXJlTG9hZGVyKTtcblxuZXhwb3J0IGludGVyZmFjZSBJTG9hZGVyUGx1Z2luIHtcbiAgICBhZGQ/KCk6IHZvaWQ7XG4gICAgcHJlPyhyZXNvdXJjZTogUmVzb3VyY2UsIG5leHQ/OiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB2b2lkO1xuICAgIHVzZT8ocmVzb3VyY2U6IFJlc291cmNlLCBuZXh0PzogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuLyoqXG4gKiBQbHVnaW4gdG8gYmUgaW5zdGFsbGVkIGZvciBoYW5kbGluZyBzcGVjaWZpYyBMb2FkZXIgcmVzb3VyY2VzLlxuICpcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBJTG9hZGVyUGx1Z2luXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbYWRkXSAtIEZ1bmN0aW9uIHRvIGNhbGwgaW1tZWRpYXRlIGFmdGVyIHJlZ2lzdGVyaW5nIHBsdWdpbi5cbiAqIEBwcm9wZXJ0eSB7UElYSS5Mb2FkZXIubG9hZGVyTWlkZGxld2FyZX0gW3ByZV0gLSBNaWRkbGV3YXJlIGZ1bmN0aW9uIHRvIHJ1biBiZWZvcmUgbG9hZCwgdGhlXG4gKiAgICAgICAgICAgYXJndW1lbnRzIGZvciB0aGlzIGFyZSBgKHJlc291cmNlLCBuZXh0KWBcbiAqIEBwcm9wZXJ0eSB7UElYSS5Mb2FkZXIubG9hZGVyTWlkZGxld2FyZX0gW3VzZV0gLSBNaWRkbGV3YXJlIGZ1bmN0aW9uIHRvIHJ1biBhZnRlciBsb2FkLCB0aGVcbiAqICAgICAgICAgICBhcmd1bWVudHMgZm9yIHRoaXMgYXJlIGAocmVzb3VyY2UsIG5leHQpYFxuICovXG5cbi8qKlxuICogQG1lbWJlcm9mIFBJWEkuTG9hZGVyXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBJQ2FsbGJhY2tJRFxuICovXG5cbi8qKlxuICogQG1lbWJlcm9mIFBJWEkuTG9hZGVyXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb259IElTaWduYWxDYWxsYmFja1xuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHBhcmFtIHtvYmplY3R9IFtjb250ZXh0XSAtIENvbnRleHRcbiAqIEByZXR1cm5zIHtJQ2FsbGJhY2tJRH0gLSBDYWxsYmFja0lEXG4gKi9cblxuLyoqXG4gKiBAbWVtYmVyb2YgUElYSS5Mb2FkZXJcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbn0gSVNpZ25hbERldGFjaFxuICogQHBhcmFtIHtJQ2FsbGJhY2tJRH0gaWQgLSBDYWxsYmFja0lEIHJldHVybmVkIGJ5IGBhZGRgL2BvbmNlYCBtZXRob2RzXG4gKi9cblxuLyoqXG4gKiBAbWVtYmVyb2YgUElYSS5Mb2FkZXJcbiAqIEB0eXBlZGVmIElMb2FkZXJTaWduYWxcbiAqIEBwcm9wZXJ0eSB7SVNpZ25hbENhbGxiYWNrfSBhZGQgLSBSZWdpc3RlciBjYWxsYmFja1xuICogQHByb3BlcnR5IHtJU2lnbmFsQ2FsbGJhY2t9IG9uY2UgLSBSZWdpc3RlciBvbmVzaG90IGNhbGxiYWNrXG4gKiBAcHJvcGVydHkge0lTaWduYWxEZXRhY2h9IGRldGFjaCAtIERldGFjaCBzcGVjaWZpYyBjYWxsYmFjayBieSBJRFxuICovXG5cbi8qKlxuICogQG1lbWJlcm9mIFBJWEkuTG9hZGVyXG4gKiBAY2FsbGJhY2sgbG9hZGVyTWlkZGxld2FyZVxuICogQHBhcmFtIHtQSVhJLkxvYWRlclJlc291cmNlfSByZXNvdXJjZVxuICogQHBhcmFtIHtmdW5jdGlvbn0gbmV4dFxuICovXG5cbi8qKlxuICogQG1lbWJlcm9mIFBJWEkuTG9hZGVyI1xuICogQGRlc2NyaXB0aW9uIERpc3BhdGNoZWQgd2hlbiB0aGUgbG9hZGVyIGJlZ2lucyB0byBsb2FkaW5nIHByb2Nlc3MuXG4gKiBAbWVtYmVyIHtQSVhJLkxvYWRlci5JTG9hZGVyU2lnbmFsfSBvblN0YXJ0XG4gKi9cblxuLyoqXG4gKiBAbWVtYmVyb2YgUElYSS5Mb2FkZXIjXG4gKiBAZGVzY3JpcHRpb24gRGlzcGF0Y2hlZCBvbmNlIHBlciBsb2FkZWQgb3IgZXJyb3JlZCByZXNvdXJjZS5cbiAqIEBtZW1iZXIge1BJWEkuTG9hZGVyLklMb2FkZXJTaWduYWx9IG9uUHJvZ3Jlc3NcbiAqL1xuXG4vKipcbiAqIEBtZW1iZXJvZiBQSVhJLkxvYWRlciNcbiAqIEBkZXNjcmlwdGlvbiBEaXNwYXRjaGVkIG9uY2UgcGVyIGVycm9yZWQgcmVzb3VyY2UuXG4gKiBAbWVtYmVyIHtQSVhJLkxvYWRlci5JTG9hZGVyU2lnbmFsfSBvbkVycm9yXG4gKi9cblxuLyoqXG4gKiBAbWVtYmVyb2YgUElYSS5Mb2FkZXIjXG4gKiBAZGVzY3JpcHRpb24gRGlzcGF0Y2hlZCBvbmNlIHBlciBsb2FkZWQgcmVzb3VyY2UuXG4gKiBAbWVtYmVyIHtQSVhJLkxvYWRlci5JTG9hZGVyU2lnbmFsfSBvbkxvYWRcbiAqL1xuXG4vKipcbiAqIEBtZW1iZXJvZiBQSVhJLkxvYWRlciNcbiAqIEBkZXNjcmlwdGlvbiBEaXNwYXRjaGVkIHdoZW4gY29tcGxldGVseSBsb2FkZWQgYWxsIHJlc291cmNlcy5cbiAqIEBtZW1iZXIge1BJWEkuTG9hZGVyLklMb2FkZXJTaWduYWx9IG9uQ29tcGxldGVcbiAqL1xuIiwgImltcG9ydCB7IExvYWRlciB9IGZyb20gJy4vTG9hZGVyJztcblxuaW1wb3J0IHR5cGUgeyBJQXBwbGljYXRpb25PcHRpb25zIH0gZnJvbSAnQHBpeGkvYXBwJztcbi8qKlxuICogQXBwbGljYXRpb24gcGx1Z2luIGZvciBzdXBwb3J0aW5nIGxvYWRlciBvcHRpb24uIEluc3RhbGxpbmcgdGhlIExvYWRlclBsdWdpblxuICogaXMgbm90IG5lY2Vzc2FyeSBpZiB1c2luZyAqKnBpeGkuanMqKiBvciAqKnBpeGkuanMtbGVnYWN5KiouXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHtBcHBMb2FkZXJQbHVnaW59IGZyb20gJ0BwaXhpL2xvYWRlcnMnO1xuICogaW1wb3J0IHtBcHBsaWNhdGlvbn0gZnJvbSAnQHBpeGkvYXBwJztcbiAqIEFwcGxpY2F0aW9uLnJlZ2lzdGVyUGx1Z2luKEFwcExvYWRlclBsdWdpbik7XG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBBcHBMb2FkZXJQbHVnaW5cbntcbiAgICBwdWJsaWMgc3RhdGljIGxvYWRlcjogTG9hZGVyO1xuICAgIC8qKlxuICAgICAqIENhbGxlZCBvbiBhcHBsaWNhdGlvbiBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgaW5pdChvcHRpb25zPzogSUFwcGxpY2F0aW9uT3B0aW9ucyk6IHZvaWRcbiAgICB7XG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHNoYXJlZExvYWRlcjogZmFsc2UsXG4gICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2FkZXIgaW5zdGFuY2UgdG8gaGVscCB3aXRoIGFzc2V0IGxvYWRpbmcuXG4gICAgICAgICAqIEBuYW1lIFBJWEkuQXBwbGljYXRpb24jbG9hZGVyXG4gICAgICAgICAqIEB0eXBlIHtQSVhJLkxvYWRlcn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxvYWRlciA9IG9wdGlvbnMuc2hhcmVkTG9hZGVyID8gTG9hZGVyLnNoYXJlZCA6IG5ldyBMb2FkZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiBhcHBsaWNhdGlvbiBkZXN0cm95ZWRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN0YXRpYyBkZXN0cm95KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmxvYWRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5sb2FkZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5sb2FkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwgImltcG9ydCB7IEJMRU5EX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuaW1wb3J0IHsgaGV4MnJnYiB9IGZyb20gJ0BwaXhpL3V0aWxzJztcblxuaW1wb3J0IHR5cGUgeyBCYXNlVGV4dHVyZSwgUmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgUGFydGljbGVCdWZmZXIgfSBmcm9tICcuL1BhcnRpY2xlQnVmZmVyJztcbmltcG9ydCB0eXBlIHsgSURlc3Ryb3lPcHRpb25zIH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBhcnRpY2xlUHJvcGVydGllcyB7XG4gICAgdmVydGljZXM/OiBib29sZWFuO1xuICAgIHBvc2l0aW9uPzogYm9vbGVhbjtcbiAgICByb3RhdGlvbj86IGJvb2xlYW47XG4gICAgdXZzPzogYm9vbGVhbjtcbiAgICB0aW50PzogYm9vbGVhbjtcbiAgICBhbHBoYT86IGJvb2xlYW47XG4gICAgc2NhbGU/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBQYXJ0aWNsZUNvbnRhaW5lciBjbGFzcyBpcyBhIHJlYWxseSBmYXN0IHZlcnNpb24gb2YgdGhlIENvbnRhaW5lciBidWlsdCBzb2xlbHkgZm9yIHNwZWVkLFxuICogc28gdXNlIHdoZW4geW91IG5lZWQgYSBsb3Qgb2Ygc3ByaXRlcyBvciBwYXJ0aWNsZXMuXG4gKlxuICogVGhlIHRyYWRlb2ZmIG9mIHRoZSBQYXJ0aWNsZUNvbnRhaW5lciBpcyB0aGF0IG1vc3QgYWR2YW5jZWQgZnVuY3Rpb25hbGl0eSB3aWxsIG5vdCB3b3JrLlxuICogUGFydGljbGVDb250YWluZXIgaW1wbGVtZW50cyB0aGUgYmFzaWMgb2JqZWN0IHRyYW5zZm9ybSAocG9zaXRpb24sIHNjYWxlLCByb3RhdGlvbilcbiAqIGFuZCBzb21lIGFkdmFuY2VkIGZ1bmN0aW9uYWxpdHkgbGlrZSB0aW50IChhcyBvZiB2NC41LjYpLlxuICpcbiAqIE90aGVyIG1vcmUgYWR2YW5jZWQgZnVuY3Rpb25hbGl0eSBsaWtlIG1hc2tpbmcsIGNoaWxkcmVuLCBmaWx0ZXJzLCBldGMgd2lsbCBub3Qgd29yayBvbiBzcHJpdGVzIGluIHRoaXMgYmF0Y2guXG4gKlxuICogSXQncyBleHRyZW1lbHkgZWFzeSB0byB1c2U6XG4gKiBgYGBqc1xuICogbGV0IGNvbnRhaW5lciA9IG5ldyBQYXJ0aWNsZUNvbnRhaW5lcigpO1xuICpcbiAqIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyArK2kpXG4gKiB7XG4gKiAgICAgbGV0IHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb20oXCJteUltYWdlLnBuZ1wiKTtcbiAqICAgICBjb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEFuZCBoZXJlIHlvdSBoYXZlIGEgaHVuZHJlZCBzcHJpdGVzIHRoYXQgd2lsbCBiZSByZW5kZXJlZCBhdCB0aGUgc3BlZWQgb2YgbGlnaHQuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLkNvbnRhaW5lclxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIFBhcnRpY2xlQ29udGFpbmVyIGV4dGVuZHMgQ29udGFpbmVyXG57XG4gICAgcHVibGljIHJlYWRvbmx5IGJsZW5kTW9kZTogQkxFTkRfTU9ERVM7XG4gICAgcHVibGljIGF1dG9SZXNpemU6IGJvb2xlYW47XG4gICAgcHVibGljIHJvdW5kUGl4ZWxzOiBib29sZWFuO1xuICAgIHB1YmxpYyBiYXNlVGV4dHVyZTogQmFzZVRleHR1cmU7XG4gICAgcHVibGljIHRpbnRSZ2I6IEZsb2F0MzJBcnJheTtcblxuICAgIF9tYXhTaXplOiBudW1iZXI7XG4gICAgX2J1ZmZlcnM6IFBhcnRpY2xlQnVmZmVyW107XG4gICAgX2JhdGNoU2l6ZTogbnVtYmVyO1xuICAgIF9wcm9wZXJ0aWVzOiBib29sZWFuW107XG4gICAgX2J1ZmZlclVwZGF0ZUlEczogbnVtYmVyW107XG4gICAgX3VwZGF0ZUlEOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfdGludDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttYXhTaXplPTE1MDBdIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpY2xlcyB0aGF0IGNhbiBiZSByZW5kZXJlZCBieSB0aGUgY29udGFpbmVyLlxuICAgICAqICBBZmZlY3RzIHNpemUgb2YgYWxsb2NhdGVkIGJ1ZmZlcnMuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtwcm9wZXJ0aWVzXSAtIFRoZSBwcm9wZXJ0aWVzIG9mIGNoaWxkcmVuIHRoYXQgc2hvdWxkIGJlIHVwbG9hZGVkIHRvIHRoZSBncHUgYW5kIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvcGVydGllcy52ZXJ0aWNlcz1mYWxzZV0gLSBXaGVuIHRydWUsIHZlcnRpY2VzIGJlIHVwbG9hZGVkIGFuZCBhcHBsaWVkLlxuICAgICAqICAgICAgICAgICAgICAgICAgaWYgc3ByaXRlJ3MgYCBzY2FsZS9hbmNob3IvdHJpbS9mcmFtZS9vcmlnYCBpcyBkeW5hbWljLCBwbGVhc2Ugc2V0IGB0cnVlYC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wZXJ0aWVzLnBvc2l0aW9uPXRydWVdIC0gV2hlbiB0cnVlLCBwb3NpdGlvbiBiZSB1cGxvYWRlZCBhbmQgYXBwbGllZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wZXJ0aWVzLnJvdGF0aW9uPWZhbHNlXSAtIFdoZW4gdHJ1ZSwgcm90YXRpb24gYmUgdXBsb2FkZWQgYW5kIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvcGVydGllcy51dnM9ZmFsc2VdIC0gV2hlbiB0cnVlLCB1dnMgYmUgdXBsb2FkZWQgYW5kIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvcGVydGllcy50aW50PWZhbHNlXSAtIFdoZW4gdHJ1ZSwgYWxwaGEgYW5kIHRpbnQgYmUgdXBsb2FkZWQgYW5kIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtiYXRjaFNpemU9MTYzODRdIC0gTnVtYmVyIG9mIHBhcnRpY2xlcyBwZXIgYmF0Y2guIElmIGxlc3MgdGhhbiBtYXhTaXplLCBpdCB1c2VzIG1heFNpemUgaW5zdGVhZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFthdXRvUmVzaXplPWZhbHNlXSAtIElmIHRydWUsIGNvbnRhaW5lciBhbGxvY2F0ZXMgbW9yZSBiYXRjaGVzIGluIGNhc2VcbiAgICAgKiAgdGhlcmUgYXJlIG1vcmUgdGhhbiBgbWF4U2l6ZWAgcGFydGljbGVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1heFNpemUgPSAxNTAwLCBwcm9wZXJ0aWVzOiBJUGFydGljbGVQcm9wZXJ0aWVzLCBiYXRjaFNpemUgPSAxNjM4NCwgYXV0b1Jlc2l6ZSA9IGZhbHNlKVxuICAgIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICAvLyBNYWtpbmcgc3VyZSB0aGUgYmF0Y2ggc2l6ZSBpcyB2YWxpZFxuICAgICAgICAvLyA2NTUzNSBpcyBtYXggdmVydGV4IGluZGV4IGluIHRoZSBpbmRleCBidWZmZXIgKHNlZSBQYXJ0aWNsZVJlbmRlcmVyKVxuICAgICAgICAvLyBzbyBtYXggbnVtYmVyIG9mIHBhcnRpY2xlcyBpcyA2NTUzNiAvIDQgPSAxNjM4NFxuICAgICAgICBjb25zdCBtYXhCYXRjaFNpemUgPSAxNjM4NDtcblxuICAgICAgICBpZiAoYmF0Y2hTaXplID4gbWF4QmF0Y2hTaXplKVxuICAgICAgICB7XG4gICAgICAgICAgICBiYXRjaFNpemUgPSBtYXhCYXRjaFNpemU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHByb3BlcnRpZXMgdG8gYmUgZHluYW1pYyAodHJ1ZSkgLyBzdGF0aWMgKGZhbHNlKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFuW119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzID0gW2ZhbHNlLCB0cnVlLCBmYWxzZSwgZmFsc2UsIGZhbHNlXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fbWF4U2l6ZSA9IG1heFNpemU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JhdGNoU2l6ZSA9IGJhdGNoU2l6ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7QXJyYXk8UElYSS5CdWZmZXI+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYnVmZmVycyA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGZvciBldmVyeSBiYXRjaCBzdG9yZXMgX3VwZGF0ZUlEIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGxhc3QgY2hhbmdlIGluIHRoYXQgYmF0Y2hcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyW119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9idWZmZXJVcGRhdGVJRHMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogd2hlbiBjaGlsZCBpbnNlcnRlZCwgcmVtb3ZlZCBvciBjaGFuZ2VzIHBvc2l0aW9uIHRoaXMgbnVtYmVyIGdvZXMgdXBcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyW119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl91cGRhdGVJRCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmludGVyYWN0aXZlQ2hpbGRyZW4gPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJsZW5kIG1vZGUgdG8gYmUgYXBwbGllZCB0byB0aGUgc3ByaXRlLiBBcHBseSBhIHZhbHVlIG9mIGBQSVhJLkJMRU5EX01PREVTLk5PUk1BTGBcbiAgICAgICAgICogdG8gcmVzZXQgdGhlIGJsZW5kIG1vZGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgUElYSS5CTEVORF9NT0RFUy5OT1JNQUxcbiAgICAgICAgICogQHNlZSBQSVhJLkJMRU5EX01PREVTXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJsZW5kTW9kZSA9IEJMRU5EX01PREVTLk5PUk1BTDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgY29udGFpbmVyIGFsbG9jYXRlcyBtb3JlIGJhdGNoZXMgaW4gY2FzZSB0aGVyZSBhcmUgbW9yZSB0aGFuIGBtYXhTaXplYCBwYXJ0aWNsZXMuXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmF1dG9SZXNpemUgPSBhdXRvUmVzaXplO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlIFBpeGlKUyB3aWxsIE1hdGguZmxvb3IoKSB4L3kgdmFsdWVzIHdoZW4gcmVuZGVyaW5nLCBzdG9wcGluZyBwaXhlbCBpbnRlcnBvbGF0aW9uLlxuICAgICAgICAgKiBBZHZhbnRhZ2VzIGNhbiBpbmNsdWRlIHNoYXJwZXIgaW1hZ2UgcXVhbGl0eSAobGlrZSB0ZXh0KSBhbmQgZmFzdGVyIHJlbmRlcmluZyBvbiBjYW52YXMuXG4gICAgICAgICAqIFRoZSBtYWluIGRpc2FkdmFudGFnZSBpcyBtb3ZlbWVudCBvZiBvYmplY3RzIG1heSBhcHBlYXIgbGVzcyBzbW9vdGguXG4gICAgICAgICAqIERlZmF1bHQgdG8gdHJ1ZSBoZXJlIGFzIHBlcmZvcm1hbmNlIGlzIHVzdWFsbHkgdGhlIHByaW9yaXR5IGZvciBwYXJ0aWNsZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucm91bmRQaXhlbHMgPSB0cnVlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGV4dHVyZSB1c2VkIHRvIHJlbmRlciB0aGUgY2hpbGRyZW4uXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkJhc2VUZXh0dXJlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYXNlVGV4dHVyZSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGludCBhcHBsaWVkIHRvIHRoZSBjb250YWluZXIuXG4gICAgICAgICAqIFRoaXMgaXMgYSBoZXggdmFsdWUuIEEgdmFsdWUgb2YgMHhGRkZGRkYgd2lsbCByZW1vdmUgYW55IHRpbnQgZWZmZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDB4RkZGRkZGXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl90aW50ID0gMDtcbiAgICAgICAgdGhpcy50aW50UmdiID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbiAgICAgICAgdGhpcy50aW50ID0gMHhGRkZGRkY7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJpdmF0ZSBwcm9wZXJ0aWVzIGFycmF5IHRvIGR5bmFtaWMgLyBzdGF0aWMgYmFzZWQgb24gdGhlIHBhc3NlZCBwcm9wZXJ0aWVzIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHByb3BlcnRpZXMgLSBUaGUgcHJvcGVydGllcyB0byBiZSB1cGxvYWRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBzZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXM6IElQYXJ0aWNsZVByb3BlcnRpZXMpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllc1swXSA9ICd2ZXJ0aWNlcycgaW4gcHJvcGVydGllcyB8fCAnc2NhbGUnIGluIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICA/ICEhcHJvcGVydGllcy52ZXJ0aWNlcyB8fCAhIXByb3BlcnRpZXMuc2NhbGUgOiB0aGlzLl9wcm9wZXJ0aWVzWzBdO1xuICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllc1sxXSA9ICdwb3NpdGlvbicgaW4gcHJvcGVydGllcyA/ICEhcHJvcGVydGllcy5wb3NpdGlvbiA6IHRoaXMuX3Byb3BlcnRpZXNbMV07XG4gICAgICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzWzJdID0gJ3JvdGF0aW9uJyBpbiBwcm9wZXJ0aWVzID8gISFwcm9wZXJ0aWVzLnJvdGF0aW9uIDogdGhpcy5fcHJvcGVydGllc1syXTtcbiAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXNbM10gPSAndXZzJyBpbiBwcm9wZXJ0aWVzID8gISFwcm9wZXJ0aWVzLnV2cyA6IHRoaXMuX3Byb3BlcnRpZXNbM107XG4gICAgICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzWzRdID0gJ3RpbnQnIGluIHByb3BlcnRpZXMgfHwgJ2FscGhhJyBpbiBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgPyAhIXByb3BlcnRpZXMudGludCB8fCAhIXByb3BlcnRpZXMuYWxwaGEgOiB0aGlzLl9wcm9wZXJ0aWVzWzRdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHVwZGF0ZVRyYW5zZm9ybSgpOiB2b2lkXG4gICAge1xuICAgICAgICAvLyBUT0RPIGRvbid0IG5lZWQgdG8hXG4gICAgICAgIHRoaXMuZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSB0aW50IGFwcGxpZWQgdG8gdGhlIGNvbnRhaW5lci4gVGhpcyBpcyBhIGhleCB2YWx1ZS5cbiAgICAgKiBBIHZhbHVlIG9mIDB4RkZGRkZGIHdpbGwgcmVtb3ZlIGFueSB0aW50IGVmZmVjdC5cbiAgICAgKiogSU1QT1JUQU5UOiBUaGlzIGlzIGEgV2ViR0wgb25seSBmZWF0dXJlIGFuZCB3aWxsIGJlIGlnbm9yZWQgYnkgdGhlIGNhbnZhcyByZW5kZXJlci5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMHhGRkZGRkZcbiAgICAgKi9cbiAgICBnZXQgdGludCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aW50O1xuICAgIH1cblxuICAgIHNldCB0aW50KHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLl90aW50ID0gdmFsdWU7XG4gICAgICAgIGhleDJyZ2IodmFsdWUsIHRoaXMudGludFJnYik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgY29udGFpbmVyIHVzaW5nIHRoZSBXZWJHTCByZW5kZXJlclxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHdlYmdsIHJlbmRlcmVyXG4gICAgICovXG4gICAgcHVibGljIHJlbmRlcihyZW5kZXJlcjogUmVuZGVyZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMudmlzaWJsZSB8fCB0aGlzLndvcmxkQWxwaGEgPD0gMCB8fCAhdGhpcy5jaGlsZHJlbi5sZW5ndGggfHwgIXRoaXMucmVuZGVyYWJsZSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmJhc2VUZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmJhc2VUZXh0dXJlID0gKHRoaXMuY2hpbGRyZW5bMF0gYXMgYW55KS5fdGV4dHVyZS5iYXNlVGV4dHVyZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5iYXNlVGV4dHVyZS52YWxpZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhc2VUZXh0dXJlLm9uY2UoJ3VwZGF0ZScsICgpID0+IHRoaXMub25DaGlsZHJlbkNoYW5nZSgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXJlci5iYXRjaC5zZXRPYmplY3RSZW5kZXJlcihyZW5kZXJlci5wbHVnaW5zLnBhcnRpY2xlKTtcbiAgICAgICAgcmVuZGVyZXIucGx1Z2lucy5wYXJ0aWNsZS5yZW5kZXIodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBmbGFnIHRoYXQgc3RhdGljIGRhdGEgc2hvdWxkIGJlIHVwZGF0ZWQgdG8gdHJ1ZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc21hbGxlc3RDaGlsZEluZGV4IC0gVGhlIHNtYWxsZXN0IGNoaWxkIGluZGV4XG4gICAgICovXG4gICAgcHJvdGVjdGVkIG9uQ2hpbGRyZW5DaGFuZ2Uoc21hbGxlc3RDaGlsZEluZGV4OiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBidWZmZXJJbmRleCA9IE1hdGguZmxvb3Ioc21hbGxlc3RDaGlsZEluZGV4IC8gdGhpcy5fYmF0Y2hTaXplKTtcblxuICAgICAgICB3aGlsZSAodGhpcy5fYnVmZmVyVXBkYXRlSURzLmxlbmd0aCA8IGJ1ZmZlckluZGV4KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9idWZmZXJVcGRhdGVJRHMucHVzaCgwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9idWZmZXJVcGRhdGVJRHNbYnVmZmVySW5kZXhdID0gKyt0aGlzLl91cGRhdGVJRDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fYnVmZmVycylcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9idWZmZXJzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuX2J1ZmZlcnNbaV0uZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJzID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoZSBjb250YWluZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fGJvb2xlYW59IFtvcHRpb25zXSAtIE9wdGlvbnMgcGFyYW1ldGVyLiBBIGJvb2xlYW4gd2lsbCBhY3QgYXMgaWYgYWxsIG9wdGlvbnNcbiAgICAgKiAgaGF2ZSBiZWVuIHNldCB0byB0aGF0IHZhbHVlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jaGlsZHJlbj1mYWxzZV0gLSBpZiBzZXQgdG8gdHJ1ZSwgYWxsIHRoZSBjaGlsZHJlbiB3aWxsIGhhdmUgdGhlaXJcbiAgICAgKiAgZGVzdHJveSBtZXRob2QgY2FsbGVkIGFzIHdlbGwuICdvcHRpb25zJyB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aG9zZSBjYWxscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRleHR1cmU9ZmFsc2VdIC0gT25seSB1c2VkIGZvciBjaGlsZCBTcHJpdGVzIGlmIG9wdGlvbnMuY2hpbGRyZW4gaXMgc2V0IHRvIHRydWVcbiAgICAgKiAgU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIHRleHR1cmUgb2YgdGhlIGNoaWxkIHNwcml0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYmFzZVRleHR1cmU9ZmFsc2VdIC0gT25seSB1c2VkIGZvciBjaGlsZCBTcHJpdGVzIGlmIG9wdGlvbnMuY2hpbGRyZW4gaXMgc2V0IHRvIHRydWVcbiAgICAgKiAgU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIGJhc2UgdGV4dHVyZSBvZiB0aGUgY2hpbGQgc3ByaXRlXG4gICAgICovXG4gICAgcHVibGljIGRlc3Ryb3kob3B0aW9uczogSURlc3Ryb3lPcHRpb25zfGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBzdXBlci5kZXN0cm95KG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuXG4gICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBudWxsO1xuICAgICAgICB0aGlzLl9idWZmZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYnVmZmVyVXBkYXRlSURzID0gbnVsbDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgY3JlYXRlSW5kaWNlc0ZvclF1YWRzIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHsgR2VvbWV0cnksIEJ1ZmZlciB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHsgVFlQRVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuXG5pbXBvcnQgdHlwZSB7IERpc3BsYXlPYmplY3QgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmltcG9ydCB0eXBlIHsgSVBhcnRpY2xlUmVuZGVyZXJQcm9wZXJ0eSB9IGZyb20gJy4vUGFydGljbGVSZW5kZXJlcic7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzXG4gKlxuICogQmlnIHRoYW5rcyB0byB0aGUgdmVyeSBjbGV2ZXIgTWF0dCBEZXNMYXVyaWVycyA8bWF0dGRlc2w+IGh0dHBzOi8vZ2l0aHViLmNvbS9tYXR0ZGVzbC9cbiAqIGZvciBjcmVhdGluZyB0aGUgb3JpZ2luYWwgUGl4aUpTIHZlcnNpb24hXG4gKiBBbHNvIGEgdGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9iY2hldmFsaWVyIGZvciB0d2Vha2luZyB0aGUgdGludCBhbmQgYWxwaGEgc28gdGhhdFxuICogdGhleSBub3cgc2hhcmUgNCBieXRlcyBvbiB0aGUgdmVydGV4IGJ1ZmZlclxuICpcbiAqIEhlYXZpbHkgaW5zcGlyZWQgYnkgTGliR0RYJ3MgUGFydGljbGVCdWZmZXI6XG4gKiBodHRwczovL2dpdGh1Yi5jb20vbGliZ2R4L2xpYmdkeC9ibG9iL21hc3Rlci9nZHgvc3JjL2NvbS9iYWRsb2dpYy9nZHgvZ3JhcGhpY3MvZzJkL1BhcnRpY2xlQnVmZmVyLmphdmFcbiAqL1xuXG4vKipcbiAqIFRoZSBwYXJ0aWNsZSBidWZmZXIgbWFuYWdlcyB0aGUgc3RhdGljIGFuZCBkeW5hbWljIGJ1ZmZlcnMgZm9yIGEgcGFydGljbGUgY29udGFpbmVyLlxuICpcbiAqIEBjbGFzc1xuICogQHByaXZhdGVcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXJ0aWNsZUJ1ZmZlclxue1xuICAgIHB1YmxpYyBnZW9tZXRyeTogR2VvbWV0cnk7XG4gICAgcHVibGljIHN0YXRpY1N0cmlkZTogbnVtYmVyO1xuICAgIHB1YmxpYyBzdGF0aWNCdWZmZXI6IEJ1ZmZlcjtcbiAgICBwdWJsaWMgc3RhdGljRGF0YTogRmxvYXQzMkFycmF5O1xuICAgIHB1YmxpYyBzdGF0aWNEYXRhVWludDMyOiBVaW50MzJBcnJheTtcbiAgICBwdWJsaWMgZHluYW1pY1N0cmlkZTogbnVtYmVyO1xuICAgIHB1YmxpYyBkeW5hbWljQnVmZmVyOiBCdWZmZXI7XG4gICAgcHVibGljIGR5bmFtaWNEYXRhOiBGbG9hdDMyQXJyYXk7XG4gICAgcHVibGljIGR5bmFtaWNEYXRhVWludDMyOiBVaW50MzJBcnJheTtcbiAgICBwdWJsaWMgX3VwZGF0ZUlEOiBudW1iZXI7XG5cbiAgICBpbmRleEJ1ZmZlcjogQnVmZmVyO1xuICAgIHByaXZhdGUgc2l6ZTogbnVtYmVyO1xuICAgIHByaXZhdGUgZHluYW1pY1Byb3BlcnRpZXM6IElQYXJ0aWNsZVJlbmRlcmVyUHJvcGVydHlbXTtcbiAgICBwcml2YXRlIHN0YXRpY1Byb3BlcnRpZXM6IElQYXJ0aWNsZVJlbmRlcmVyUHJvcGVydHlbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHByb3BlcnRpZXMgLSBUaGUgcHJvcGVydGllcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHtib29sZWFuW119IGR5bmFtaWNQcm9wZXJ0eUZsYWdzIC0gRmxhZ3MgZm9yIHdoaWNoIHByb3BlcnRpZXMgYXJlIGR5bmFtaWMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgLSBUaGUgc2l6ZSBvZiB0aGUgYmF0Y2guXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcGVydGllczogSVBhcnRpY2xlUmVuZGVyZXJQcm9wZXJ0eVtdLCBkeW5hbWljUHJvcGVydHlGbGFnczogYm9vbGVhbltdLCBzaXplOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IEdlb21ldHJ5KCk7XG5cbiAgICAgICAgdGhpcy5pbmRleEJ1ZmZlciA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgcGFydGljbGVzIHRoZSBidWZmZXIgY2FuIGhvbGRcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIGR5bmFtaWMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdFtdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5keW5hbWljUHJvcGVydGllcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdGhlIHByb3BlcnRpZXMgdGhhdCBhcmUgc3RhdGljLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtvYmplY3RbXX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdGljUHJvcGVydGllcyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IHByb3BlcnR5ID0gcHJvcGVydGllc1tpXTtcblxuICAgICAgICAgICAgLy8gTWFrZSBjb3B5IG9mIHByb3BlcnRpZXMgb2JqZWN0IHNvIHRoYXQgd2hlbiB3ZSBlZGl0IHRoZSBvZmZzZXQgaXQgZG9lc24ndFxuICAgICAgICAgICAgLy8gY2hhbmdlIGFsbCBvdGhlciBpbnN0YW5jZXMgb2YgdGhlIG9iamVjdCBsaXRlcmFsXG4gICAgICAgICAgICBwcm9wZXJ0eSA9IHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lOiBwcm9wZXJ0eS5hdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgICAgICAgIHNpemU6IHByb3BlcnR5LnNpemUsXG4gICAgICAgICAgICAgICAgdXBsb2FkRnVuY3Rpb246IHByb3BlcnR5LnVwbG9hZEZ1bmN0aW9uLFxuICAgICAgICAgICAgICAgIHR5cGU6IHByb3BlcnR5LnR5cGUgfHwgVFlQRVMuRkxPQVQsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBwcm9wZXJ0eS5vZmZzZXQsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoZHluYW1pY1Byb3BlcnR5RmxhZ3NbaV0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5keW5hbWljUHJvcGVydGllcy5wdXNoKHByb3BlcnR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRpY1Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXRpY1N0cmlkZSA9IDA7XG4gICAgICAgIHRoaXMuc3RhdGljQnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0aWNEYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0aWNEYXRhVWludDMyID0gbnVsbDtcblxuICAgICAgICB0aGlzLmR5bmFtaWNTdHJpZGUgPSAwO1xuICAgICAgICB0aGlzLmR5bmFtaWNCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmR5bmFtaWNEYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5keW5hbWljRGF0YVVpbnQzMiA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlSUQgPSAwO1xuXG4gICAgICAgIHRoaXMuaW5pdEJ1ZmZlcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIHRoZSByZW5kZXJlciBjb250ZXh0IGFuZCBuZWNlc3NhcnkgYnVmZmVycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBpbml0QnVmZmVycygpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7XG5cbiAgICAgICAgbGV0IGR5bmFtaWNPZmZzZXQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIb2xkcyB0aGUgaW5kaWNlcyBvZiB0aGUgZ2VvbWV0cnkgKHF1YWRzKSB0byBkcmF3XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1VpbnQxNkFycmF5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbmRleEJ1ZmZlciA9IG5ldyBCdWZmZXIoY3JlYXRlSW5kaWNlc0ZvclF1YWRzKHRoaXMuc2l6ZSksIHRydWUsIHRydWUpO1xuICAgICAgICBnZW9tZXRyeS5hZGRJbmRleCh0aGlzLmluZGV4QnVmZmVyKTtcblxuICAgICAgICB0aGlzLmR5bmFtaWNTdHJpZGUgPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5keW5hbWljUHJvcGVydGllcy5sZW5ndGg7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSB0aGlzLmR5bmFtaWNQcm9wZXJ0aWVzW2ldO1xuXG4gICAgICAgICAgICBwcm9wZXJ0eS5vZmZzZXQgPSBkeW5hbWljT2Zmc2V0O1xuICAgICAgICAgICAgZHluYW1pY09mZnNldCArPSBwcm9wZXJ0eS5zaXplO1xuICAgICAgICAgICAgdGhpcy5keW5hbWljU3RyaWRlICs9IHByb3BlcnR5LnNpemU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkeW5CdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5zaXplICogdGhpcy5keW5hbWljU3RyaWRlICogNCAqIDQpO1xuXG4gICAgICAgIHRoaXMuZHluYW1pY0RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGR5bkJ1ZmZlcik7XG4gICAgICAgIHRoaXMuZHluYW1pY0RhdGFVaW50MzIgPSBuZXcgVWludDMyQXJyYXkoZHluQnVmZmVyKTtcbiAgICAgICAgdGhpcy5keW5hbWljQnVmZmVyID0gbmV3IEJ1ZmZlcih0aGlzLmR5bmFtaWNEYXRhLCBmYWxzZSwgZmFsc2UpO1xuXG4gICAgICAgIC8vIHN0YXRpYyAvL1xuICAgICAgICBsZXQgc3RhdGljT2Zmc2V0ID0gMDtcblxuICAgICAgICB0aGlzLnN0YXRpY1N0cmlkZSA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YXRpY1Byb3BlcnRpZXMubGVuZ3RoOyArK2kpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gdGhpcy5zdGF0aWNQcm9wZXJ0aWVzW2ldO1xuXG4gICAgICAgICAgICBwcm9wZXJ0eS5vZmZzZXQgPSBzdGF0aWNPZmZzZXQ7XG4gICAgICAgICAgICBzdGF0aWNPZmZzZXQgKz0gcHJvcGVydHkuc2l6ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGljU3RyaWRlICs9IHByb3BlcnR5LnNpemU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMuc2l6ZSAqIHRoaXMuc3RhdGljU3RyaWRlICogNCAqIDQpO1xuXG4gICAgICAgIHRoaXMuc3RhdGljRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoc3RhdEJ1ZmZlcik7XG4gICAgICAgIHRoaXMuc3RhdGljRGF0YVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShzdGF0QnVmZmVyKTtcbiAgICAgICAgdGhpcy5zdGF0aWNCdWZmZXIgPSBuZXcgQnVmZmVyKHRoaXMuc3RhdGljRGF0YSwgdHJ1ZSwgZmFsc2UpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5keW5hbWljUHJvcGVydGllcy5sZW5ndGg7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSB0aGlzLmR5bmFtaWNQcm9wZXJ0aWVzW2ldO1xuXG4gICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgcHJvcGVydHkuYXR0cmlidXRlTmFtZSxcbiAgICAgICAgICAgICAgICB0aGlzLmR5bmFtaWNCdWZmZXIsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eS50eXBlID09PSBUWVBFUy5VTlNJR05FRF9CWVRFLFxuICAgICAgICAgICAgICAgIHByb3BlcnR5LnR5cGUsXG4gICAgICAgICAgICAgICAgdGhpcy5keW5hbWljU3RyaWRlICogNCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eS5vZmZzZXQgKiA0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YXRpY1Byb3BlcnRpZXMubGVuZ3RoOyArK2kpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gdGhpcy5zdGF0aWNQcm9wZXJ0aWVzW2ldO1xuXG4gICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgcHJvcGVydHkuYXR0cmlidXRlTmFtZSxcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRpY0J1ZmZlcixcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIHByb3BlcnR5LnR5cGUgPT09IFRZUEVTLlVOU0lHTkVEX0JZVEUsXG4gICAgICAgICAgICAgICAgcHJvcGVydHkudHlwZSxcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRpY1N0cmlkZSAqIDQsXG4gICAgICAgICAgICAgICAgcHJvcGVydHkub2Zmc2V0ICogNFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIGR5bmFtaWMgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3RbXX0gY2hpbGRyZW4gLSBUaGUgY2hpbGRyZW4gdG8gdXBsb2FkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydEluZGV4IC0gVGhlIGluZGV4IHRvIHN0YXJ0IGF0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSBUaGUgbnVtYmVyIHRvIHVwbG9hZC5cbiAgICAgKi9cbiAgICB1cGxvYWREeW5hbWljKGNoaWxkcmVuOiBEaXNwbGF5T2JqZWN0W10sIHN0YXJ0SW5kZXg6IG51bWJlciwgYW1vdW50OiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZHluYW1pY1Byb3BlcnRpZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gdGhpcy5keW5hbWljUHJvcGVydGllc1tpXTtcblxuICAgICAgICAgICAgcHJvcGVydHkudXBsb2FkRnVuY3Rpb24oY2hpbGRyZW4sIHN0YXJ0SW5kZXgsIGFtb3VudCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eS50eXBlID09PSBUWVBFUy5VTlNJR05FRF9CWVRFID8gdGhpcy5keW5hbWljRGF0YVVpbnQzMiA6IHRoaXMuZHluYW1pY0RhdGEsXG4gICAgICAgICAgICAgICAgdGhpcy5keW5hbWljU3RyaWRlLCBwcm9wZXJ0eS5vZmZzZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5keW5hbWljQnVmZmVyLl91cGRhdGVJRCsrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHN0YXRpYyBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdFtdfSBjaGlsZHJlbiAtIFRoZSBjaGlsZHJlbiB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0SW5kZXggLSBUaGUgaW5kZXggdG8gc3RhcnQgYXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCAtIFRoZSBudW1iZXIgdG8gdXBsb2FkLlxuICAgICAqL1xuICAgIHVwbG9hZFN0YXRpYyhjaGlsZHJlbjogRGlzcGxheU9iamVjdFtdLCBzdGFydEluZGV4OiBudW1iZXIsIGFtb3VudDogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YXRpY1Byb3BlcnRpZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gdGhpcy5zdGF0aWNQcm9wZXJ0aWVzW2ldO1xuXG4gICAgICAgICAgICBwcm9wZXJ0eS51cGxvYWRGdW5jdGlvbihjaGlsZHJlbiwgc3RhcnRJbmRleCwgYW1vdW50LFxuICAgICAgICAgICAgICAgIHByb3BlcnR5LnR5cGUgPT09IFRZUEVTLlVOU0lHTkVEX0JZVEUgPyB0aGlzLnN0YXRpY0RhdGFVaW50MzIgOiB0aGlzLnN0YXRpY0RhdGEsXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0aWNTdHJpZGUsIHByb3BlcnR5Lm9mZnNldCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXRpY0J1ZmZlci5fdXBkYXRlSUQrKztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgUGFydGljbGVCdWZmZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5pbmRleEJ1ZmZlciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5keW5hbWljUHJvcGVydGllcyA9IG51bGw7XG4gICAgICAgIHRoaXMuZHluYW1pY0J1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuZHluYW1pY0RhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLmR5bmFtaWNEYXRhVWludDMyID0gbnVsbDtcblxuICAgICAgICB0aGlzLnN0YXRpY1Byb3BlcnRpZXMgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRpY0J1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGljRGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGljRGF0YVVpbnQzMiA9IG51bGw7XG4gICAgICAgIC8vIGFsbCBidWZmZXJzIGFyZSBkZXN0cm95ZWQgaW5zaWRlIGdlb21ldHJ5XG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuZGVzdHJveSgpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBUWVBFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBPYmplY3RSZW5kZXJlciwgU2hhZGVyLCBTdGF0ZSB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHsgTWF0cml4IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgeyBjb3JyZWN0QmxlbmRNb2RlLCBwcmVtdWx0aXBseVJnYmEsIHByZW11bHRpcGx5VGludCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IFBhcnRpY2xlQnVmZmVyIH0gZnJvbSAnLi9QYXJ0aWNsZUJ1ZmZlcic7XG5pbXBvcnQgZnJhZ21lbnQgZnJvbSAnLi9wYXJ0aWNsZXMuZnJhZyc7XG5pbXBvcnQgdmVydGV4IGZyb20gJy4vcGFydGljbGVzLnZlcnQnO1xuXG5pbXBvcnQgdHlwZSB7IERpc3BsYXlPYmplY3QgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmltcG9ydCB0eXBlIHsgUGFydGljbGVDb250YWluZXIgfSBmcm9tICcuL1BhcnRpY2xlQ29udGFpbmVyJztcbmltcG9ydCB0eXBlIHsgUmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcblxuZXhwb3J0IGludGVyZmFjZSBJUGFydGljbGVSZW5kZXJlclByb3BlcnR5IHtcbiAgICBhdHRyaWJ1dGVOYW1lOiBzdHJpbmc7XG4gICAgc2l6ZTogbnVtYmVyO1xuICAgIHR5cGU/OiBUWVBFUztcbiAgICB1cGxvYWRGdW5jdGlvbjogKC4uLnBhcmFtczogYW55W10pID0+IGFueTtcbiAgICBvZmZzZXQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXNcbiAqXG4gKiBCaWcgdGhhbmtzIHRvIHRoZSB2ZXJ5IGNsZXZlciBNYXR0IERlc0xhdXJpZXJzIDxtYXR0ZGVzbD4gaHR0cHM6Ly9naXRodWIuY29tL21hdHRkZXNsL1xuICogZm9yIGNyZWF0aW5nIHRoZSBvcmlnaW5hbCBQaXhpSlMgdmVyc2lvbiFcbiAqIEFsc28gYSB0aGFua3MgdG8gaHR0cHM6Ly9naXRodWIuY29tL2JjaGV2YWxpZXIgZm9yIHR3ZWFraW5nIHRoZSB0aW50IGFuZCBhbHBoYSBzbyB0aGF0IHRoZXkgbm93XG4gKiBzaGFyZSA0IGJ5dGVzIG9uIHRoZSB2ZXJ0ZXggYnVmZmVyXG4gKlxuICogSGVhdmlseSBpbnNwaXJlZCBieSBMaWJHRFgncyBQYXJ0aWNsZVJlbmRlcmVyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2xpYmdkeC9saWJnZHgvYmxvYi9tYXN0ZXIvZ2R4L3NyYy9jb20vYmFkbG9naWMvZ2R4L2dyYXBoaWNzL2cyZC9QYXJ0aWNsZVJlbmRlcmVyLmphdmFcbiAqL1xuXG4vKipcbiAqIFJlbmRlcmVyIGZvciBQYXJ0aWNsZXMgdGhhdCBpcyBkZXNpZ25lciBmb3Igc3BlZWQgb3ZlciBmZWF0dXJlIHNldC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXJ0aWNsZVJlbmRlcmVyIGV4dGVuZHMgT2JqZWN0UmVuZGVyZXJcbntcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3RhdGU6IFN0YXRlO1xuICAgIHB1YmxpYyBzaGFkZXI6IFNoYWRlcjtcbiAgICBwdWJsaWMgdGVtcE1hdHJpeDogTWF0cml4O1xuICAgIHB1YmxpYyBwcm9wZXJ0aWVzOiBJUGFydGljbGVSZW5kZXJlclByb3BlcnR5W107XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgc3ByaXRlIGJhdGNoIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogUmVuZGVyZXIpXG4gICAge1xuICAgICAgICBzdXBlcihyZW5kZXJlcik7XG5cbiAgICAgICAgLy8gNjU1MzUgaXMgbWF4IHZlcnRleCBpbmRleCBpbiB0aGUgaW5kZXggYnVmZmVyIChzZWUgUGFydGljbGVSZW5kZXJlcilcbiAgICAgICAgLy8gc28gbWF4IG51bWJlciBvZiBwYXJ0aWNsZXMgaXMgNjU1MzYgLyA0ID0gMTYzODRcbiAgICAgICAgLy8gYW5kIG1heCBudW1iZXIgb2YgZWxlbWVudCBpbiB0aGUgaW5kZXggYnVmZmVyIGlzIDE2Mzg0ICogNiA9IDk4MzA0XG4gICAgICAgIC8vIENyZWF0aW5nIGEgZnVsbCBpbmRleCBidWZmZXIsIG92ZXJoZWFkIGlzIDk4MzA0ICogMiA9IDE5NktvXG4gICAgICAgIC8vIGxldCBudW1JbmRpY2VzID0gOTgzMDQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkZWZhdWx0IHNoYWRlciB0aGF0IGlzIHVzZWQgaWYgYSBzcHJpdGUgZG9lc24ndCBoYXZlIGEgbW9yZSBzcGVjaWZpYyBvbmUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuU2hhZGVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaGFkZXIgPSBudWxsO1xuXG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy50ZW1wTWF0cml4ID0gbmV3IE1hdHJpeCgpO1xuXG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IFtcbiAgICAgICAgICAgIC8vIHZlcnRpY2VzRGF0YVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6ICdhVmVydGV4UG9zaXRpb24nLFxuICAgICAgICAgICAgICAgIHNpemU6IDIsXG4gICAgICAgICAgICAgICAgdXBsb2FkRnVuY3Rpb246IHRoaXMudXBsb2FkVmVydGljZXMsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHBvc2l0aW9uRGF0YVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6ICdhUG9zaXRpb25Db29yZCcsXG4gICAgICAgICAgICAgICAgc2l6ZTogMixcbiAgICAgICAgICAgICAgICB1cGxvYWRGdW5jdGlvbjogdGhpcy51cGxvYWRQb3NpdGlvbixcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gcm90YXRpb25EYXRhXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogJ2FSb3RhdGlvbicsXG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICB1cGxvYWRGdW5jdGlvbjogdGhpcy51cGxvYWRSb3RhdGlvbixcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gdXZzRGF0YVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6ICdhVGV4dHVyZUNvb3JkJyxcbiAgICAgICAgICAgICAgICBzaXplOiAyLFxuICAgICAgICAgICAgICAgIHVwbG9hZEZ1bmN0aW9uOiB0aGlzLnVwbG9hZFV2cyxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gdGludERhdGFcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lOiAnYUNvbG9yJyxcbiAgICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgICAgIHR5cGU6IFRZUEVTLlVOU0lHTkVEX0JZVEUsXG4gICAgICAgICAgICAgICAgdXBsb2FkRnVuY3Rpb246IHRoaXMudXBsb2FkVGludCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuc2hhZGVyID0gU2hhZGVyLmZyb20odmVydGV4LCBmcmFnbWVudCwge30pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgV2ViR0wgc3RhdGUgaW4gd2hpY2ggdGhpcyByZW5kZXJlciB3aWxsIHdvcmsuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuU3RhdGV9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLmZvcjJkKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgcGFydGljbGUgY29udGFpbmVyIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5QYXJ0aWNsZUNvbnRhaW5lcn0gY29udGFpbmVyIC0gVGhlIGNvbnRhaW5lciB0byByZW5kZXIgdXNpbmcgdGhpcyBQYXJ0aWNsZVJlbmRlcmVyXG4gICAgICovXG4gICAgcHVibGljIHJlbmRlcihjb250YWluZXI6IFBhcnRpY2xlQ29udGFpbmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBjb250YWluZXIuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IG1heFNpemUgPSBjb250YWluZXIuX21heFNpemU7XG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IGNvbnRhaW5lci5fYmF0Y2hTaXplO1xuICAgICAgICBjb25zdCByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgICAgIGxldCB0b3RhbENoaWxkcmVuID0gY2hpbGRyZW4ubGVuZ3RoO1xuXG4gICAgICAgIGlmICh0b3RhbENoaWxkcmVuID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodG90YWxDaGlsZHJlbiA+IG1heFNpemUgJiYgIWNvbnRhaW5lci5hdXRvUmVzaXplKVxuICAgICAgICB7XG4gICAgICAgICAgICB0b3RhbENoaWxkcmVuID0gbWF4U2l6ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBidWZmZXJzID0gY29udGFpbmVyLl9idWZmZXJzO1xuXG4gICAgICAgIGlmICghYnVmZmVycylcbiAgICAgICAge1xuICAgICAgICAgICAgYnVmZmVycyA9IGNvbnRhaW5lci5fYnVmZmVycyA9IHRoaXMuZ2VuZXJhdGVCdWZmZXJzKGNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBiYXNlVGV4dHVyZSA9IChjaGlsZHJlblswXSBhcyBhbnkpLl90ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG4gICAgICAgIC8vIGlmIHRoZSB1dnMgaGF2ZSBub3QgdXBkYXRlZCB0aGVuIG5vIHBvaW50IHJlbmRlcmluZyBqdXN0IHlldCFcbiAgICAgICAgdGhpcy5zdGF0ZS5ibGVuZE1vZGUgPSBjb3JyZWN0QmxlbmRNb2RlKGNvbnRhaW5lci5ibGVuZE1vZGUsIGJhc2VUZXh0dXJlLmFscGhhTW9kZSk7XG4gICAgICAgIHJlbmRlcmVyLnN0YXRlLnNldCh0aGlzLnN0YXRlKTtcblxuICAgICAgICBjb25zdCBnbCA9IHJlbmRlcmVyLmdsO1xuXG4gICAgICAgIGNvbnN0IG0gPSBjb250YWluZXIud29ybGRUcmFuc2Zvcm0uY29weVRvKHRoaXMudGVtcE1hdHJpeCk7XG5cbiAgICAgICAgbS5wcmVwZW5kKHJlbmRlcmVyLmdsb2JhbFVuaWZvcm1zLnVuaWZvcm1zLnByb2plY3Rpb25NYXRyaXgpO1xuXG4gICAgICAgIHRoaXMuc2hhZGVyLnVuaWZvcm1zLnRyYW5zbGF0aW9uTWF0cml4ID0gbS50b0FycmF5KHRydWUpO1xuXG4gICAgICAgIHRoaXMuc2hhZGVyLnVuaWZvcm1zLnVDb2xvciA9IHByZW11bHRpcGx5UmdiYShjb250YWluZXIudGludFJnYixcbiAgICAgICAgICAgIGNvbnRhaW5lci53b3JsZEFscGhhLCB0aGlzLnNoYWRlci51bmlmb3Jtcy51Q29sb3IsIGJhc2VUZXh0dXJlLmFscGhhTW9kZSk7XG5cbiAgICAgICAgdGhpcy5zaGFkZXIudW5pZm9ybXMudVNhbXBsZXIgPSBiYXNlVGV4dHVyZTtcblxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNoYWRlci5iaW5kKHRoaXMuc2hhZGVyKTtcblxuICAgICAgICBsZXQgdXBkYXRlU3RhdGljID0gZmFsc2U7XG5cbiAgICAgICAgLy8gbm93IGxldHMgdXBsb2FkIGFuZCByZW5kZXIgdGhlIGJ1ZmZlcnMuLlxuICAgICAgICBmb3IgKGxldCBpID0gMCwgaiA9IDA7IGkgPCB0b3RhbENoaWxkcmVuOyBpICs9IGJhdGNoU2l6ZSwgaiArPSAxKVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgYW1vdW50ID0gKHRvdGFsQ2hpbGRyZW4gLSBpKTtcblxuICAgICAgICAgICAgaWYgKGFtb3VudCA+IGJhdGNoU2l6ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhbW91bnQgPSBiYXRjaFNpemU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChqID49IGJ1ZmZlcnMubGVuZ3RoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcnMucHVzaCh0aGlzLl9nZW5lcmF0ZU9uZU1vcmVCdWZmZXIoY29udGFpbmVyKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGJ1ZmZlcnNbal07XG5cbiAgICAgICAgICAgIC8vIHdlIGFsd2F5cyB1cGxvYWQgdGhlIGR5bmFtaWNcbiAgICAgICAgICAgIGJ1ZmZlci51cGxvYWREeW5hbWljKGNoaWxkcmVuLCBpLCBhbW91bnQpO1xuXG4gICAgICAgICAgICBjb25zdCBiaWQgPSBjb250YWluZXIuX2J1ZmZlclVwZGF0ZUlEc1tqXSB8fCAwO1xuXG4gICAgICAgICAgICB1cGRhdGVTdGF0aWMgPSB1cGRhdGVTdGF0aWMgfHwgKGJ1ZmZlci5fdXBkYXRlSUQgPCBiaWQpO1xuICAgICAgICAgICAgLy8gd2Ugb25seSB1cGxvYWQgdGhlIHN0YXRpYyBjb250ZW50IHdoZW4gd2UgaGF2ZSB0byFcbiAgICAgICAgICAgIGlmICh1cGRhdGVTdGF0aWMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYnVmZmVyLl91cGRhdGVJRCA9IGNvbnRhaW5lci5fdXBkYXRlSUQ7XG4gICAgICAgICAgICAgICAgYnVmZmVyLnVwbG9hZFN0YXRpYyhjaGlsZHJlbiwgaSwgYW1vdW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYmluZCB0aGUgYnVmZmVyXG4gICAgICAgICAgICByZW5kZXJlci5nZW9tZXRyeS5iaW5kKGJ1ZmZlci5nZW9tZXRyeSk7XG4gICAgICAgICAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBhbW91bnQgKiA2LCBnbC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9uZSBwYXJ0aWNsZSBidWZmZXIgZm9yIGVhY2ggY2hpbGQgaW4gdGhlIGNvbnRhaW5lciB3ZSB3YW50IHRvIHJlbmRlciBhbmQgdXBkYXRlcyBpbnRlcm5hbCBwcm9wZXJ0aWVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUGFydGljbGVDb250YWluZXJ9IGNvbnRhaW5lciAtIFRoZSBjb250YWluZXIgdG8gcmVuZGVyIHVzaW5nIHRoaXMgUGFydGljbGVSZW5kZXJlclxuICAgICAqIEByZXR1cm4ge1BJWEkuUGFydGljbGVCdWZmZXJbXX0gVGhlIGJ1ZmZlcnNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgZ2VuZXJhdGVCdWZmZXJzKGNvbnRhaW5lcjogUGFydGljbGVDb250YWluZXIpOiBQYXJ0aWNsZUJ1ZmZlcltdXG4gICAge1xuICAgICAgICBjb25zdCBidWZmZXJzID0gW107XG4gICAgICAgIGNvbnN0IHNpemUgPSBjb250YWluZXIuX21heFNpemU7XG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IGNvbnRhaW5lci5fYmF0Y2hTaXplO1xuICAgICAgICBjb25zdCBkeW5hbWljUHJvcGVydHlGbGFncyA9IGNvbnRhaW5lci5fcHJvcGVydGllcztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkgKz0gYmF0Y2hTaXplKVxuICAgICAgICB7XG4gICAgICAgICAgICBidWZmZXJzLnB1c2gobmV3IFBhcnRpY2xlQnVmZmVyKHRoaXMucHJvcGVydGllcywgZHluYW1pY1Byb3BlcnR5RmxhZ3MsIGJhdGNoU2l6ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ1ZmZlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBvbmUgbW9yZSBwYXJ0aWNsZSBidWZmZXIsIGJlY2F1c2UgY29udGFpbmVyIGhhcyBhdXRvUmVzaXplIGZlYXR1cmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5QYXJ0aWNsZUNvbnRhaW5lcn0gY29udGFpbmVyIC0gVGhlIGNvbnRhaW5lciB0byByZW5kZXIgdXNpbmcgdGhpcyBQYXJ0aWNsZVJlbmRlcmVyXG4gICAgICogQHJldHVybiB7UElYSS5QYXJ0aWNsZUJ1ZmZlcn0gZ2VuZXJhdGVkIGJ1ZmZlclxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBfZ2VuZXJhdGVPbmVNb3JlQnVmZmVyKGNvbnRhaW5lcjogUGFydGljbGVDb250YWluZXIpOiBQYXJ0aWNsZUJ1ZmZlclxuICAgIHtcbiAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gY29udGFpbmVyLl9iYXRjaFNpemU7XG4gICAgICAgIGNvbnN0IGR5bmFtaWNQcm9wZXJ0eUZsYWdzID0gY29udGFpbmVyLl9wcm9wZXJ0aWVzO1xuXG4gICAgICAgIHJldHVybiBuZXcgUGFydGljbGVCdWZmZXIodGhpcy5wcm9wZXJ0aWVzLCBkeW5hbWljUHJvcGVydHlGbGFncywgYmF0Y2hTaXplKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIHRoZSB2ZXJ0aWNlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0W119IGNoaWxkcmVuIC0gdGhlIGFycmF5IG9mIGRpc3BsYXkgb2JqZWN0cyB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCAtIHRoZSBpbmRleCB0byBzdGFydCBmcm9tIGluIHRoZSBjaGlsZHJlbiBhcnJheVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIGNoaWxkcmVuIHRoYXQgd2lsbCBoYXZlIHRoZWlyIHZlcnRpY2VzIHVwbG9hZGVkXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gYXJyYXkgLSBUaGUgdmVydGljZXMgdG8gdXBsb2FkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgLSBTdHJpZGUgdG8gdXNlIGZvciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIE9mZnNldCB0byBzdGFydCBhdC5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBsb2FkVmVydGljZXMoXG4gICAgICAgIGNoaWxkcmVuOiBEaXNwbGF5T2JqZWN0W10sIHN0YXJ0SW5kZXg6IG51bWJlciwgYW1vdW50OiBudW1iZXIsXG4gICAgICAgIGFycmF5OiBudW1iZXJbXSwgc3RyaWRlOiBudW1iZXIsIG9mZnNldDogbnVtYmVyXG4gICAgKTogdm9pZFxuICAgIHtcbiAgICAgICAgbGV0IHcwID0gMDtcbiAgICAgICAgbGV0IHcxID0gMDtcbiAgICAgICAgbGV0IGgwID0gMDtcbiAgICAgICAgbGV0IGgxID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFtb3VudDsgKytpKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzcHJpdGU6IGFueSA9IGNoaWxkcmVuW3N0YXJ0SW5kZXggKyBpXTtcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBzcHJpdGUuX3RleHR1cmU7XG4gICAgICAgICAgICBjb25zdCBzeCA9IHNwcml0ZS5zY2FsZS54O1xuICAgICAgICAgICAgY29uc3Qgc3kgPSBzcHJpdGUuc2NhbGUueTtcbiAgICAgICAgICAgIGNvbnN0IHRyaW0gPSB0ZXh0dXJlLnRyaW07XG4gICAgICAgICAgICBjb25zdCBvcmlnID0gdGV4dHVyZS5vcmlnO1xuXG4gICAgICAgICAgICBpZiAodHJpbSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgc3ByaXRlIGlzIHRyaW1tZWQgYW5kIGlzIG5vdCBhIHRpbGluZ3Nwcml0ZSB0aGVuIHdlIG5lZWQgdG8gYWRkIHRoZVxuICAgICAgICAgICAgICAgIC8vIGV4dHJhIHNwYWNlIGJlZm9yZSB0cmFuc2Zvcm1pbmcgdGhlIHNwcml0ZSBjb29yZHMuLlxuICAgICAgICAgICAgICAgIHcxID0gdHJpbS54IC0gKHNwcml0ZS5hbmNob3IueCAqIG9yaWcud2lkdGgpO1xuICAgICAgICAgICAgICAgIHcwID0gdzEgKyB0cmltLndpZHRoO1xuXG4gICAgICAgICAgICAgICAgaDEgPSB0cmltLnkgLSAoc3ByaXRlLmFuY2hvci55ICogb3JpZy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGgwID0gaDEgKyB0cmltLmhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB3MCA9IChvcmlnLndpZHRoKSAqICgxIC0gc3ByaXRlLmFuY2hvci54KTtcbiAgICAgICAgICAgICAgICB3MSA9IChvcmlnLndpZHRoKSAqIC1zcHJpdGUuYW5jaG9yLng7XG5cbiAgICAgICAgICAgICAgICBoMCA9IG9yaWcuaGVpZ2h0ICogKDEgLSBzcHJpdGUuYW5jaG9yLnkpO1xuICAgICAgICAgICAgICAgIGgxID0gb3JpZy5oZWlnaHQgKiAtc3ByaXRlLmFuY2hvci55O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gdzEgKiBzeDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIDFdID0gaDEgKiBzeTtcblxuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlXSA9IHcwICogc3g7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBzdHJpZGUgKyAxXSA9IGgxICogc3k7XG5cbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKV0gPSB3MCAqIHN4O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpICsgMV0gPSBoMCAqIHN5O1xuXG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gdzEgKiBzeDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAzKSArIDFdID0gaDAgKiBzeTtcblxuICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIHRoZSBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0W119IGNoaWxkcmVuIC0gdGhlIGFycmF5IG9mIGRpc3BsYXkgb2JqZWN0cyB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCAtIHRoZSBpbmRleCB0byBzdGFydCBmcm9tIGluIHRoZSBjaGlsZHJlbiBhcnJheVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIGNoaWxkcmVuIHRoYXQgd2lsbCBoYXZlIHRoZWlyIHBvc2l0aW9ucyB1cGxvYWRlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IGFycmF5IC0gVGhlIHZlcnRpY2VzIHRvIHVwbG9hZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIC0gU3RyaWRlIHRvIHVzZSBmb3IgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBPZmZzZXQgdG8gc3RhcnQgYXQuXG4gICAgICovXG4gICAgcHVibGljIHVwbG9hZFBvc2l0aW9uKFxuICAgICAgICBjaGlsZHJlbjogRGlzcGxheU9iamVjdFtdLCBzdGFydEluZGV4OiBudW1iZXIsIGFtb3VudDogbnVtYmVyLFxuICAgICAgICBhcnJheTogbnVtYmVyW10sIHN0cmlkZTogbnVtYmVyLCBvZmZzZXQ6IG51bWJlclxuICAgICk6IHZvaWRcbiAgICB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1vdW50OyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHNwcml0ZVBvc2l0aW9uID0gY2hpbGRyZW5bc3RhcnRJbmRleCArIGldLnBvc2l0aW9uO1xuXG4gICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gc3ByaXRlUG9zaXRpb24ueDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIDFdID0gc3ByaXRlUG9zaXRpb24ueTtcblxuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlXSA9IHNwcml0ZVBvc2l0aW9uLng7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBzdHJpZGUgKyAxXSA9IHNwcml0ZVBvc2l0aW9uLnk7XG5cbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKV0gPSBzcHJpdGVQb3NpdGlvbi54O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpICsgMV0gPSBzcHJpdGVQb3NpdGlvbi55O1xuXG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gc3ByaXRlUG9zaXRpb24ueDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAzKSArIDFdID0gc3ByaXRlUG9zaXRpb24ueTtcblxuICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIHRoZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0W119IGNoaWxkcmVuIC0gdGhlIGFycmF5IG9mIGRpc3BsYXkgb2JqZWN0cyB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCAtIHRoZSBpbmRleCB0byBzdGFydCBmcm9tIGluIHRoZSBjaGlsZHJlbiBhcnJheVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIGNoaWxkcmVuIHRoYXQgd2lsbCBoYXZlIHRoZWlyIHJvdGF0aW9uIHVwbG9hZGVkXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gYXJyYXkgLSBUaGUgdmVydGljZXMgdG8gdXBsb2FkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgLSBTdHJpZGUgdG8gdXNlIGZvciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIE9mZnNldCB0byBzdGFydCBhdC5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBsb2FkUm90YXRpb24oXG4gICAgICAgIGNoaWxkcmVuOiBEaXNwbGF5T2JqZWN0W10sIHN0YXJ0SW5kZXg6IG51bWJlciwgYW1vdW50OiBudW1iZXIsXG4gICAgICAgIGFycmF5OiBudW1iZXJbXSwgc3RyaWRlOiBudW1iZXIsIG9mZnNldDogbnVtYmVyXG4gICAgKTogdm9pZFxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc3ByaXRlUm90YXRpb24gPSBjaGlsZHJlbltzdGFydEluZGV4ICsgaV0ucm90YXRpb247XG5cbiAgICAgICAgICAgIGFycmF5W29mZnNldF0gPSBzcHJpdGVSb3RhdGlvbjtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIHN0cmlkZV0gPSBzcHJpdGVSb3RhdGlvbjtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKV0gPSBzcHJpdGVSb3RhdGlvbjtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAzKV0gPSBzcHJpdGVSb3RhdGlvbjtcblxuICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIHRoZSBVdnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0W119IGNoaWxkcmVuIC0gdGhlIGFycmF5IG9mIGRpc3BsYXkgb2JqZWN0cyB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCAtIHRoZSBpbmRleCB0byBzdGFydCBmcm9tIGluIHRoZSBjaGlsZHJlbiBhcnJheVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIGNoaWxkcmVuIHRoYXQgd2lsbCBoYXZlIHRoZWlyIHJvdGF0aW9uIHVwbG9hZGVkXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gYXJyYXkgLSBUaGUgdmVydGljZXMgdG8gdXBsb2FkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgLSBTdHJpZGUgdG8gdXNlIGZvciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIE9mZnNldCB0byBzdGFydCBhdC5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBsb2FkVXZzKFxuICAgICAgICBjaGlsZHJlbjogRGlzcGxheU9iamVjdFtdLCBzdGFydEluZGV4OiBudW1iZXIsIGFtb3VudDogbnVtYmVyLFxuICAgICAgICBhcnJheTogbnVtYmVyW10sIHN0cmlkZTogbnVtYmVyLCBvZmZzZXQ6IG51bWJlclxuICAgICk6IHZvaWRcbiAgICB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1vdW50OyArK2kpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVVdnMgPSAoY2hpbGRyZW5bc3RhcnRJbmRleCArIGldIGFzIGFueSkuX3RleHR1cmUuX3V2cztcblxuICAgICAgICAgICAgaWYgKHRleHR1cmVVdnMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0XSA9IHRleHR1cmVVdnMueDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSB0ZXh0dXJlVXZzLnkwO1xuXG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlXSA9IHRleHR1cmVVdnMueDE7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlICsgMV0gPSB0ZXh0dXJlVXZzLnkxO1xuXG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpXSA9IHRleHR1cmVVdnMueDI7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpICsgMV0gPSB0ZXh0dXJlVXZzLnkyO1xuXG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpXSA9IHRleHR1cmVVdnMueDM7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpICsgMV0gPSB0ZXh0dXJlVXZzLnkzO1xuXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyB5b3Uga25vdyB0aGlzIGNhbiBiZSBlYXNpZXIhXG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0XSA9IDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSAwO1xuXG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlXSA9IDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlICsgMV0gPSAwO1xuXG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpXSA9IDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpICsgMV0gPSAwO1xuXG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpXSA9IDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpICsgMV0gPSAwO1xuXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIHRoZSB0aW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3RbXX0gY2hpbGRyZW4gLSB0aGUgYXJyYXkgb2YgZGlzcGxheSBvYmplY3RzIHRvIHJlbmRlclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydEluZGV4IC0gdGhlIGluZGV4IHRvIHN0YXJ0IGZyb20gaW4gdGhlIGNoaWxkcmVuIGFycmF5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCAtIHRoZSBhbW91bnQgb2YgY2hpbGRyZW4gdGhhdCB3aWxsIGhhdmUgdGhlaXIgcm90YXRpb24gdXBsb2FkZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBhcnJheSAtIFRoZSB2ZXJ0aWNlcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSAtIFN0cmlkZSB0byB1c2UgZm9yIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gT2Zmc2V0IHRvIHN0YXJ0IGF0LlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGxvYWRUaW50KFxuICAgICAgICBjaGlsZHJlbjogRGlzcGxheU9iamVjdFtdLCBzdGFydEluZGV4OiBudW1iZXIsIGFtb3VudDogbnVtYmVyLFxuICAgICAgICBhcnJheTogbnVtYmVyW10sIHN0cmlkZTogbnVtYmVyLCBvZmZzZXQ6IG51bWJlclxuICAgICk6IHZvaWRcbiAgICB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1vdW50OyArK2kpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHNwcml0ZTogYW55ID0gY2hpbGRyZW5bc3RhcnRJbmRleCArIGldO1xuICAgICAgICAgICAgY29uc3QgcHJlbXVsdGlwbGllZCA9IHNwcml0ZS5fdGV4dHVyZS5iYXNlVGV4dHVyZS5hbHBoYU1vZGUgPiAwO1xuICAgICAgICAgICAgY29uc3QgYWxwaGEgPSBzcHJpdGUuYWxwaGE7XG5cbiAgICAgICAgICAgIC8vIHdlIGRvbnQgY2FsbCBleHRyYSBmdW5jdGlvbiBpZiBhbHBoYSBpcyAxLjAsIHRoYXQncyBmYXN0ZXJcbiAgICAgICAgICAgIGNvbnN0IGFyZ2IgPSBhbHBoYSA8IDEuMCAmJiBwcmVtdWx0aXBsaWVkXG4gICAgICAgICAgICAgICAgPyBwcmVtdWx0aXBseVRpbnQoc3ByaXRlLl90aW50UkdCLCBhbHBoYSkgOiBzcHJpdGUuX3RpbnRSR0IgKyAoYWxwaGEgKiAyNTUgPDwgMjQpO1xuXG4gICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gYXJnYjtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIHN0cmlkZV0gPSBhcmdiO1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpXSA9IGFyZ2I7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gYXJnYjtcblxuICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgUGFydGljbGVSZW5kZXJlci5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2hhZGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNoYWRlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnNoYWRlciA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRlbXBNYXRyaXggPSBudWxsO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIFN1cHBvcnRlZCBsaW5lIGpvaW50cyBpbiBgUElYSS5MaW5lU3R5bGVgIGZvciBncmFwaGljcy5cbiAqXG4gKiBAc2VlIFBJWEkuR3JhcGhpY3MjbGluZVN0eWxlXG4gKiBAc2VlIGh0dHBzOi8vZ3JhcGhpY2Rlc2lnbi5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvNTkwMTgvd2hhdC1pcy1hLWJldmVsLWpvaW4tb2YtdHdvLWxpbmVzLWV4YWN0bHktaWxsdXN0cmF0b3JcbiAqXG4gKiBAbmFtZSBMSU5FX0pPSU5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByb3BlcnR5IHtzdHJpbmd9IE1JVEVSIC0gJ21pdGVyJzogbWFrZSBhIHNoYXJwIGNvcm5lciB3aGVyZSBvdXRlciBwYXJ0IG9mIGxpbmVzIG1lZXRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBCRVZFTCAtICdiZXZlbCc6IGFkZCBhIHNxdWFyZSBidXR0IGF0IGVhY2ggZW5kIG9mIGxpbmUgc2VnbWVudCBhbmQgZmlsbCB0aGUgdHJpYW5nbGUgYXQgdHVyblxuICogQHByb3BlcnR5IHtzdHJpbmd9IFJPVU5EIC0gJ3JvdW5kJzogYWRkIGFuIGFyYyBhdCB0aGUgam9pbnRcbiAqL1xuZXhwb3J0IGVudW0gTElORV9KT0lOIHtcbiAgICBNSVRFUiA9ICdtaXRlcicsXG4gICAgQkVWRUwgPSAnYmV2ZWwnLFxuICAgIFJPVU5EID0gJ3JvdW5kJ1xufVxuXG4vKipcbiAqIFN1cHBvcnQgbGluZSBjYXBzIGluIGBQSVhJLkxpbmVTdHlsZWAgZm9yIGdyYXBoaWNzLlxuICpcbiAqIEBzZWUgUElYSS5HcmFwaGljcyNsaW5lU3R5bGVcbiAqXG4gKiBAbmFtZSBMSU5FX0NBUFxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBzdGF0aWNcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAcHJvcGVydHkge3N0cmluZ30gQlVUVCAtICdidXR0JzogZG9uJ3QgYWRkIGFueSBjYXAgYXQgbGluZSBlbmRzIChsZWF2ZXMgb3J0aG9nb25hbCBlZGdlcylcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBST1VORCAtICdyb3VuZCc6IGFkZCBzZW1pY2lyY2xlIGF0IGVuZHNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBTUVVBUkUgLSAnc3F1YXJlJzogYWRkIHNxdWFyZSBhdCBlbmQgKGxpa2UgYEJVVFRgIGV4Y2VwdCBtb3JlIGxlbmd0aCBhdCBlbmQpXG4gKi9cbmV4cG9ydCBlbnVtIExJTkVfQ0FQIHtcbiAgICBCVVRUID0gJ2J1dHQnLFxuICAgIFJPVU5EID0gJ3JvdW5kJyxcbiAgICBTUVVBUkUgPSAnc3F1YXJlJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElHcmFwaGljc0N1cnZlc1NldHRpbmdzIHtcbiAgICBhZGFwdGl2ZTogYm9vbGVhbjtcbiAgICBtYXhMZW5ndGg6IG51bWJlcjtcbiAgICBtaW5TZWdtZW50czogbnVtYmVyO1xuICAgIG1heFNlZ21lbnRzOiBudW1iZXI7XG5cbiAgICBlcHNpbG9uOiBudW1iZXI7XG5cbiAgICBfc2VnbWVudHNDb3VudChsZW5ndGg6IG51bWJlciwgZGVmYXVsdFNlZ21lbnRzPzogbnVtYmVyKTogbnVtYmVyO1xufVxuXG4vKipcbiAqIEdyYXBoaWNzIGN1cnZlcyByZXNvbHV0aW9uIHNldHRpbmdzLiBJZiBgYWRhcHRpdmVgIGZsYWcgaXMgc2V0IHRvIGB0cnVlYCxcbiAqIHRoZSByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWQgYmFzZWQgb24gdGhlIGN1cnZlJ3MgbGVuZ3RoIHRvIGVuc3VyZSBiZXR0ZXIgdmlzdWFsIHF1YWxpdHkuXG4gKiBBZGFwdGl2ZSBkcmF3IHdvcmtzIHdpdGggYGJlemllckN1cnZlVG9gIGFuZCBgcXVhZHJhdGljQ3VydmVUb2AuXG4gKlxuICogQHN0YXRpY1xuICogQGNvbnN0YW50XG4gKiBAbWVtYmVyb2YgUElYSVxuICogQG5hbWUgR1JBUEhJQ1NfQ1VSVkVTXG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtib29sZWFufSBhZGFwdGl2ZT1mYWxzZSAtIGZsYWcgaW5kaWNhdGluZyBpZiB0aGUgcmVzb2x1dGlvbiBzaG91bGQgYmUgYWRhcHRpdmVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhMZW5ndGg9MTAgLSBtYXhpbWFsIGxlbmd0aCBvZiBhIHNpbmdsZSBzZWdtZW50IG9mIHRoZSBjdXJ2ZSAoaWYgYWRhcHRpdmUgPSBmYWxzZSwgaWdub3JlZClcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5TZWdtZW50cz04IC0gbWluaW1hbCBudW1iZXIgb2Ygc2VnbWVudHMgaW4gdGhlIGN1cnZlIChpZiBhZGFwdGl2ZSA9IGZhbHNlLCBpZ25vcmVkKVxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFNlZ21lbnRzPTIwNDggLSBtYXhpbWFsIG51bWJlciBvZiBzZWdtZW50cyBpbiB0aGUgY3VydmUgKGlmIGFkYXB0aXZlID0gZmFsc2UsIGlnbm9yZWQpXG4gKi9cbmV4cG9ydCBjb25zdCBHUkFQSElDU19DVVJWRVM6IElHcmFwaGljc0N1cnZlc1NldHRpbmdzID0ge1xuICAgIGFkYXB0aXZlOiB0cnVlLFxuICAgIG1heExlbmd0aDogMTAsXG4gICAgbWluU2VnbWVudHM6IDgsXG4gICAgbWF4U2VnbWVudHM6ICAyMDQ4LFxuXG4gICAgZXBzaWxvbjogMC4wMDAxLFxuXG4gICAgX3NlZ21lbnRzQ291bnQobGVuZ3RoOiBudW1iZXIsIGRlZmF1bHRTZWdtZW50cyA9IDIwKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLmFkYXB0aXZlIHx8ICFsZW5ndGggfHwgaXNOYU4obGVuZ3RoKSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRTZWdtZW50cztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXN1bHQgPSBNYXRoLmNlaWwobGVuZ3RoIC8gdGhpcy5tYXhMZW5ndGgpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPCB0aGlzLm1pblNlZ21lbnRzKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLm1pblNlZ21lbnRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdCA+IHRoaXMubWF4U2VnbWVudHMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMubWF4U2VnbWVudHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG59O1xuIiwgImltcG9ydCB7IFRleHR1cmUgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgTWF0cml4IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbi8qKlxuICogRmlsbCBzdHlsZSBvYmplY3QgZm9yIEdyYXBoaWNzLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGxTdHlsZVxue1xuICAgIC8qKlxuICAgICAqIFRoZSBoZXggY29sb3IgdmFsdWUgdXNlZCB3aGVuIGNvbG9yaW5nIHRoZSBHcmFwaGljcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMHhGRkZGRkZcbiAgICAgKi9cbiAgICBwdWJsaWMgY29sb3IgPSAweEZGRkZGRjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBhbHBoYSB2YWx1ZSB1c2VkIHdoZW4gZmlsbGluZyB0aGUgR3JhcGhpY3Mgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDFcbiAgICAgKi9cbiAgICBwdWJsaWMgYWxwaGEgPSAxLjA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dHVyZSB0byBiZSB1c2VkIGZvciB0aGUgZmlsbC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZX1cbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICovXG4gICAgcHVibGljIHRleHR1cmU6IFRleHR1cmUgPSBUZXh0dXJlLldISVRFO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zZm9ybSBhcGxwaWVkIHRvIHRoZSB0ZXh0dXJlLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7UElYSS5NYXRyaXh9XG4gICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgIHB1YmxpYyBtYXRyaXg6IE1hdHJpeCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgY3VycmVudCBmaWxsIGlzIHZpc2libGUuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgcHVibGljIHZpc2libGUgPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIG9iamVjdFxuICAgICAqXG4gICAgICogQHJldHVybiB7UElYSS5GaWxsU3R5bGV9XG4gICAgICovXG4gICAgcHVibGljIGNsb25lKCk6IEZpbGxTdHlsZVxuICAgIHtcbiAgICAgICAgY29uc3Qgb2JqID0gbmV3IEZpbGxTdHlsZSgpO1xuXG4gICAgICAgIG9iai5jb2xvciA9IHRoaXMuY29sb3I7XG4gICAgICAgIG9iai5hbHBoYSA9IHRoaXMuYWxwaGE7XG4gICAgICAgIG9iai50ZXh0dXJlID0gdGhpcy50ZXh0dXJlO1xuICAgICAgICBvYmoubWF0cml4ID0gdGhpcy5tYXRyaXg7XG4gICAgICAgIG9iai52aXNpYmxlID0gdGhpcy52aXNpYmxlO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRcbiAgICAgKi9cbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5jb2xvciA9IDB4RkZGRkZGO1xuICAgICAgICB0aGlzLmFscGhhID0gMTtcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gVGV4dHVyZS5XSElURTtcbiAgICAgICAgdGhpcy5tYXRyaXggPSBudWxsO1xuICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95IGFuZCBkb24ndCB1c2UgYWZ0ZXIgdGhpc1xuICAgICAqL1xuICAgIHB1YmxpYyBkZXN0cm95KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMudGV4dHVyZSA9IG51bGw7XG4gICAgICAgIHRoaXMubWF0cml4ID0gbnVsbDtcbiAgICB9XG59XG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiaW1wb3J0IHsgZWFyY3V0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuXG5pbXBvcnQgdHlwZSB7IElTaGFwZUJ1aWxkQ29tbWFuZCB9IGZyb20gJy4vSVNoYXBlQnVpbGRDb21tYW5kJztcbmltcG9ydCB0eXBlIHsgUG9seWdvbiB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG4vKipcbiAqIEJ1aWxkcyBhIHBvbHlnb24gdG8gZHJhd1xuICpcbiAqIElnbm9yZWQgZnJvbSBkb2NzIHNpbmNlIGl0IGlzIG5vdCBkaXJlY3RseSBleHBvc2VkLlxuICpcbiAqIEBpZ25vcmVcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1BJWEkuV2ViR0xHcmFwaGljc0RhdGF9IGdyYXBoaWNzRGF0YSAtIFRoZSBncmFwaGljcyBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIG5lY2Vzc2FyeSBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge29iamVjdH0gd2ViR0xEYXRhIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIHRoZSBXZWJHTC1zcGVjaWZpYyBpbmZvcm1hdGlvbiB0byBjcmVhdGUgdGhpcyBzaGFwZVxuICogQHBhcmFtIHtvYmplY3R9IHdlYkdMRGF0YU5hdGl2ZUxpbmVzIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIHRoZSBXZWJHTC1zcGVjaWZpYyBpbmZvcm1hdGlvbiB0byBjcmVhdGUgbmF0aXZlTGluZXNcbiAqL1xuZXhwb3J0IGNvbnN0IGJ1aWxkUG9seTogSVNoYXBlQnVpbGRDb21tYW5kID0ge1xuXG4gICAgYnVpbGQoZ3JhcGhpY3NEYXRhKVxuICAgIHtcbiAgICAgICAgZ3JhcGhpY3NEYXRhLnBvaW50cyA9IChncmFwaGljc0RhdGEuc2hhcGUgYXMgUG9seWdvbikucG9pbnRzLnNsaWNlKCk7XG4gICAgfSxcblxuICAgIHRyaWFuZ3VsYXRlKGdyYXBoaWNzRGF0YSwgZ3JhcGhpY3NHZW9tZXRyeSlcbiAgICB7XG4gICAgICAgIGxldCBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuICAgICAgICBjb25zdCBob2xlcyA9IGdyYXBoaWNzRGF0YS5ob2xlcztcbiAgICAgICAgY29uc3QgdmVydHMgPSBncmFwaGljc0dlb21ldHJ5LnBvaW50cztcbiAgICAgICAgY29uc3QgaW5kaWNlcyA9IGdyYXBoaWNzR2VvbWV0cnkuaW5kaWNlcztcblxuICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCA+PSA2KVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBob2xlQXJyYXkgPSBbXTtcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgaG9sZXMuLlxuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhvbGVzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhvbGUgPSBob2xlc1tpXTtcblxuICAgICAgICAgICAgICAgIGhvbGVBcnJheS5wdXNoKHBvaW50cy5sZW5ndGggLyAyKTtcbiAgICAgICAgICAgICAgICBwb2ludHMgPSBwb2ludHMuY29uY2F0KGhvbGUucG9pbnRzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc29ydCBjb2xvclxuICAgICAgICAgICAgY29uc3QgdHJpYW5nbGVzID0gZWFyY3V0KHBvaW50cywgaG9sZUFycmF5LCAyKTtcblxuICAgICAgICAgICAgaWYgKCF0cmlhbmdsZXMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB2ZXJ0UG9zID0gdmVydHMubGVuZ3RoIC8gMjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpICs9IDMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKHRyaWFuZ2xlc1tpXSArIHZlcnRQb3MpO1xuICAgICAgICAgICAgICAgIGluZGljZXMucHVzaCh0cmlhbmdsZXNbaSArIDFdICsgdmVydFBvcyk7XG4gICAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKHRyaWFuZ2xlc1tpICsgMl0gKyB2ZXJ0UG9zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmVydHMucHVzaChwb2ludHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbn07XG4iLCAiLy8gZm9yIHR5cGUgb25seVxuaW1wb3J0IHsgU0hBUEVTIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbmltcG9ydCB0eXBlIHsgQ2lyY2xlLCBFbGxpcHNlIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgdHlwZSB7IElTaGFwZUJ1aWxkQ29tbWFuZCB9IGZyb20gJy4vSVNoYXBlQnVpbGRDb21tYW5kJztcblxuLyoqXG4gKiBCdWlsZHMgYSBjaXJjbGUgdG8gZHJhd1xuICpcbiAqIElnbm9yZWQgZnJvbSBkb2NzIHNpbmNlIGl0IGlzIG5vdCBkaXJlY3RseSBleHBvc2VkLlxuICpcbiAqIEBpZ25vcmVcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1BJWEkuV2ViR0xHcmFwaGljc0RhdGF9IGdyYXBoaWNzRGF0YSAtIFRoZSBncmFwaGljcyBvYmplY3QgdG8gZHJhd1xuICogQHBhcmFtIHtvYmplY3R9IHdlYkdMRGF0YSAtIGFuIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgV2ViR0wtc3BlY2lmaWMgaW5mb3JtYXRpb24gdG8gY3JlYXRlIHRoaXMgc2hhcGVcbiAqIEBwYXJhbSB7b2JqZWN0fSB3ZWJHTERhdGFOYXRpdmVMaW5lcyAtIGFuIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgV2ViR0wtc3BlY2lmaWMgaW5mb3JtYXRpb24gdG8gY3JlYXRlIG5hdGl2ZUxpbmVzXG4gKi9cbmV4cG9ydCBjb25zdCBidWlsZENpcmNsZTogSVNoYXBlQnVpbGRDb21tYW5kID0ge1xuXG4gICAgYnVpbGQoZ3JhcGhpY3NEYXRhKVxuICAgIHtcbiAgICAgICAgLy8gbmVlZCB0byBjb252ZXJ0IHBvaW50cyB0byBhIG5pY2UgcmVndWxhciBkYXRhXG4gICAgICAgIGNvbnN0IGNpcmNsZURhdGEgPSBncmFwaGljc0RhdGEuc2hhcGUgYXMgQ2lyY2xlO1xuICAgICAgICBjb25zdCBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuICAgICAgICBjb25zdCB4ID0gY2lyY2xlRGF0YS54O1xuICAgICAgICBjb25zdCB5ID0gY2lyY2xlRGF0YS55O1xuICAgICAgICBsZXQgd2lkdGg7XG4gICAgICAgIGxldCBoZWlnaHQ7XG5cbiAgICAgICAgcG9pbnRzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgLy8gVE9ETyAtIGJpdCBoYWNreT8/XG4gICAgICAgIGlmIChncmFwaGljc0RhdGEudHlwZSA9PT0gU0hBUEVTLkNJUkMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHdpZHRoID0gY2lyY2xlRGF0YS5yYWRpdXM7XG4gICAgICAgICAgICBoZWlnaHQgPSBjaXJjbGVEYXRhLnJhZGl1cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGVsbGlwc2VEYXRhID0gZ3JhcGhpY3NEYXRhLnNoYXBlIGFzIEVsbGlwc2U7XG5cbiAgICAgICAgICAgIHdpZHRoID0gZWxsaXBzZURhdGEud2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSBlbGxpcHNlRGF0YS5oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2lkdGggPT09IDAgfHwgaGVpZ2h0ID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdG90YWxTZWdzID0gTWF0aC5mbG9vcigzMCAqIE1hdGguc3FydChjaXJjbGVEYXRhLnJhZGl1cykpXG4gICAgICAgICAgICB8fCBNYXRoLmZsb29yKDE1ICogTWF0aC5zcXJ0KHdpZHRoICsgaGVpZ2h0KSk7XG5cbiAgICAgICAgdG90YWxTZWdzIC89IDIuMztcblxuICAgICAgICBjb25zdCBzZWcgPSAoTWF0aC5QSSAqIDIpIC8gdG90YWxTZWdzO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxTZWdzIC0gMC41OyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKFxuICAgICAgICAgICAgICAgIHggKyAoTWF0aC5zaW4oLXNlZyAqIGkpICogd2lkdGgpLFxuICAgICAgICAgICAgICAgIHkgKyAoTWF0aC5jb3MoLXNlZyAqIGkpICogaGVpZ2h0KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBvaW50cy5wdXNoKHBvaW50c1swXSwgcG9pbnRzWzFdKTtcbiAgICB9LFxuXG4gICAgdHJpYW5ndWxhdGUoZ3JhcGhpY3NEYXRhLCBncmFwaGljc0dlb21ldHJ5KVxuICAgIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gZ3JhcGhpY3NEYXRhLnBvaW50cztcbiAgICAgICAgY29uc3QgdmVydHMgPSBncmFwaGljc0dlb21ldHJ5LnBvaW50cztcbiAgICAgICAgY29uc3QgaW5kaWNlcyA9IGdyYXBoaWNzR2VvbWV0cnkuaW5kaWNlcztcblxuICAgICAgICBsZXQgdmVydFBvcyA9IHZlcnRzLmxlbmd0aCAvIDI7XG4gICAgICAgIGNvbnN0IGNlbnRlciA9IHZlcnRQb3M7XG5cbiAgICAgICAgY29uc3QgY2lyY2xlID0gKGdyYXBoaWNzRGF0YS5zaGFwZSkgYXMgQ2lyY2xlO1xuICAgICAgICBjb25zdCBtYXRyaXggPSBncmFwaGljc0RhdGEubWF0cml4O1xuICAgICAgICBjb25zdCB4ID0gY2lyY2xlLng7XG4gICAgICAgIGNvbnN0IHkgPSBjaXJjbGUueTtcblxuICAgICAgICAvLyBQdXNoIGNlbnRlciAoc3BlY2lhbCBwb2ludClcbiAgICAgICAgdmVydHMucHVzaChcbiAgICAgICAgICAgIGdyYXBoaWNzRGF0YS5tYXRyaXggPyAobWF0cml4LmEgKiB4KSArIChtYXRyaXguYyAqIHkpICsgbWF0cml4LnR4IDogeCxcbiAgICAgICAgICAgIGdyYXBoaWNzRGF0YS5tYXRyaXggPyAobWF0cml4LmIgKiB4KSArIChtYXRyaXguZCAqIHkpICsgbWF0cml4LnR5IDogeSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZlcnRzLnB1c2gocG9pbnRzW2ldLCBwb2ludHNbaSArIDFdKTtcblxuICAgICAgICAgICAgLy8gYWRkIHNvbWUgdXZzXG4gICAgICAgICAgICBpbmRpY2VzLnB1c2godmVydFBvcysrLCBjZW50ZXIsIHZlcnRQb3MpO1xuICAgICAgICB9XG4gICAgfSxcbn07XG4iLCAiaW1wb3J0IHR5cGUgeyBJU2hhcGVCdWlsZENvbW1hbmQgfSBmcm9tICcuL0lTaGFwZUJ1aWxkQ29tbWFuZCc7XG5pbXBvcnQgdHlwZSB7IFJlY3RhbmdsZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG4vKipcbiAqIEJ1aWxkcyBhIHJlY3RhbmdsZSB0byBkcmF3XG4gKlxuICogSWdub3JlZCBmcm9tIGRvY3Mgc2luY2UgaXQgaXMgbm90IGRpcmVjdGx5IGV4cG9zZWQuXG4gKlxuICogQGlnbm9yZVxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5XZWJHTEdyYXBoaWNzRGF0YX0gZ3JhcGhpY3NEYXRhIC0gVGhlIGdyYXBoaWNzIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgbmVjZXNzYXJ5IHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7b2JqZWN0fSB3ZWJHTERhdGEgLSBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIFdlYkdMLXNwZWNpZmljIGluZm9ybWF0aW9uIHRvIGNyZWF0ZSB0aGlzIHNoYXBlXG4gKiBAcGFyYW0ge29iamVjdH0gd2ViR0xEYXRhTmF0aXZlTGluZXMgLSBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIFdlYkdMLXNwZWNpZmljIGluZm9ybWF0aW9uIHRvIGNyZWF0ZSBuYXRpdmVMaW5lc1xuICovXG5leHBvcnQgY29uc3QgYnVpbGRSZWN0YW5nbGU6IElTaGFwZUJ1aWxkQ29tbWFuZCA9IHtcblxuICAgIGJ1aWxkKGdyYXBoaWNzRGF0YSlcbiAgICB7XG4gICAgICAgIC8vIC0tLSAvL1xuICAgICAgICAvLyBuZWVkIHRvIGNvbnZlcnQgcG9pbnRzIHRvIGEgbmljZSByZWd1bGFyIGRhdGFcbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgcmVjdERhdGEgPSBncmFwaGljc0RhdGEuc2hhcGUgYXMgUmVjdGFuZ2xlO1xuICAgICAgICBjb25zdCB4ID0gcmVjdERhdGEueDtcbiAgICAgICAgY29uc3QgeSA9IHJlY3REYXRhLnk7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gcmVjdERhdGEud2lkdGg7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHJlY3REYXRhLmhlaWdodDtcblxuICAgICAgICBjb25zdCBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXG4gICAgICAgIHBvaW50cy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHBvaW50cy5wdXNoKHgsIHksXG4gICAgICAgICAgICB4ICsgd2lkdGgsIHksXG4gICAgICAgICAgICB4ICsgd2lkdGgsIHkgKyBoZWlnaHQsXG4gICAgICAgICAgICB4LCB5ICsgaGVpZ2h0KTtcbiAgICB9LFxuXG4gICAgdHJpYW5ndWxhdGUoZ3JhcGhpY3NEYXRhLCBncmFwaGljc0dlb21ldHJ5KVxuICAgIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gZ3JhcGhpY3NEYXRhLnBvaW50cztcbiAgICAgICAgY29uc3QgdmVydHMgPSBncmFwaGljc0dlb21ldHJ5LnBvaW50cztcblxuICAgICAgICBjb25zdCB2ZXJ0UG9zID0gdmVydHMubGVuZ3RoIC8gMjtcblxuICAgICAgICB2ZXJ0cy5wdXNoKHBvaW50c1swXSwgcG9pbnRzWzFdLFxuICAgICAgICAgICAgcG9pbnRzWzJdLCBwb2ludHNbM10sXG4gICAgICAgICAgICBwb2ludHNbNl0sIHBvaW50c1s3XSxcbiAgICAgICAgICAgIHBvaW50c1s0XSwgcG9pbnRzWzVdKTtcblxuICAgICAgICBncmFwaGljc0dlb21ldHJ5LmluZGljZXMucHVzaCh2ZXJ0UG9zLCB2ZXJ0UG9zICsgMSwgdmVydFBvcyArIDIsXG4gICAgICAgICAgICB2ZXJ0UG9zICsgMSwgdmVydFBvcyArIDIsIHZlcnRQb3MgKyAzKTtcbiAgICB9LFxufTtcbiIsICJpbXBvcnQgeyBlYXJjdXQgfSBmcm9tICdAcGl4aS91dGlscyc7XG5cbi8vIGZvciB0eXBlIG9ubHlcbmltcG9ydCB0eXBlIHsgSVNoYXBlQnVpbGRDb21tYW5kIH0gZnJvbSAnLi9JU2hhcGVCdWlsZENvbW1hbmQnO1xuaW1wb3J0IHR5cGUgeyBSb3VuZGVkUmVjdGFuZ2xlIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbi8qKlxuICogQ2FsY3VsYXRlIGEgc2luZ2xlIHBvaW50IGZvciBhIHF1YWRyYXRpYyBiZXppZXIgY3VydmUuXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIHVzZWQgYnkgcXVhZHJhdGljQmV6aWVyQ3VydmUuXG4gKiBJZ25vcmVkIGZyb20gZG9jcyBzaW5jZSBpdCBpcyBub3QgZGlyZWN0bHkgZXhwb3NlZC5cbiAqXG4gKiBAaWdub3JlXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IG4xIC0gZmlyc3QgbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gbjIgLSBzZWNvbmQgbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gcGVyYyAtIHBlcmNlbnRhZ2VcbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIHJlc3VsdFxuICpcbiAqL1xuZnVuY3Rpb24gZ2V0UHQobjE6IG51bWJlciwgbjI6IG51bWJlciwgcGVyYzogbnVtYmVyKTogbnVtYmVyXG57XG4gICAgY29uc3QgZGlmZiA9IG4yIC0gbjE7XG5cbiAgICByZXR1cm4gbjEgKyAoZGlmZiAqIHBlcmMpO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgcG9pbnRzIGZvciBhIHF1YWRyYXRpYyBiZXppZXIgY3VydmUuIChoZWxwZXIgZnVuY3Rpb24uLilcbiAqIEJhc2VkIG9uOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83ODUwOTcvaG93LWRvLWktaW1wbGVtZW50LWEtYmV6aWVyLWN1cnZlLWluLWNcbiAqXG4gKiBJZ25vcmVkIGZyb20gZG9jcyBzaW5jZSBpdCBpcyBub3QgZGlyZWN0bHkgZXhwb3NlZC5cbiAqXG4gKiBAaWdub3JlXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IGZyb21YIC0gT3JpZ2luIHBvaW50IHhcbiAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tWSAtIE9yaWdpbiBwb2ludCB4XG4gKiBAcGFyYW0ge251bWJlcn0gY3BYIC0gQ29udHJvbCBwb2ludCB4XG4gKiBAcGFyYW0ge251bWJlcn0gY3BZIC0gQ29udHJvbCBwb2ludCB5XG4gKiBAcGFyYW0ge251bWJlcn0gdG9YIC0gRGVzdGluYXRpb24gcG9pbnQgeFxuICogQHBhcmFtIHtudW1iZXJ9IHRvWSAtIERlc3RpbmF0aW9uIHBvaW50IHlcbiAqIEBwYXJhbSB7bnVtYmVyW119IFtvdXQ9W11dIC0gVGhlIG91dHB1dCBhcnJheSB0byBhZGQgcG9pbnRzIGludG8uIElmIG5vdCBwYXNzZWQsIGEgbmV3IGFycmF5IGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJbXX0gYW4gYXJyYXkgb2YgcG9pbnRzXG4gKi9cbmZ1bmN0aW9uIHF1YWRyYXRpY0JlemllckN1cnZlKFxuICAgIGZyb21YOiBudW1iZXIsIGZyb21ZOiBudW1iZXIsXG4gICAgY3BYOiBudW1iZXIsIGNwWTogbnVtYmVyLFxuICAgIHRvWDogbnVtYmVyLCB0b1k6IG51bWJlcixcbiAgICBvdXQ6IEFycmF5PG51bWJlcj4gPSBbXSk6IEFycmF5PG51bWJlcj5cbntcbiAgICBjb25zdCBuID0gMjA7XG4gICAgY29uc3QgcG9pbnRzID0gb3V0O1xuXG4gICAgbGV0IHhhID0gMDtcbiAgICBsZXQgeWEgPSAwO1xuICAgIGxldCB4YiA9IDA7XG4gICAgbGV0IHliID0gMDtcbiAgICBsZXQgeCA9IDA7XG4gICAgbGV0IHkgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDw9IG47ICsraSlcbiAgICB7XG4gICAgICAgIGogPSBpIC8gbjtcblxuICAgICAgICAvLyBUaGUgR3JlZW4gTGluZVxuICAgICAgICB4YSA9IGdldFB0KGZyb21YLCBjcFgsIGopO1xuICAgICAgICB5YSA9IGdldFB0KGZyb21ZLCBjcFksIGopO1xuICAgICAgICB4YiA9IGdldFB0KGNwWCwgdG9YLCBqKTtcbiAgICAgICAgeWIgPSBnZXRQdChjcFksIHRvWSwgaik7XG5cbiAgICAgICAgLy8gVGhlIEJsYWNrIERvdFxuICAgICAgICB4ID0gZ2V0UHQoeGEsIHhiLCBqKTtcbiAgICAgICAgeSA9IGdldFB0KHlhLCB5Yiwgaik7XG5cbiAgICAgICAgcG9pbnRzLnB1c2goeCwgeSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvaW50cztcbn1cblxuLyoqXG4gKiBCdWlsZHMgYSByb3VuZGVkIHJlY3RhbmdsZSB0byBkcmF3XG4gKlxuICogSWdub3JlZCBmcm9tIGRvY3Mgc2luY2UgaXQgaXMgbm90IGRpcmVjdGx5IGV4cG9zZWQuXG4gKlxuICogQGlnbm9yZVxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5XZWJHTEdyYXBoaWNzRGF0YX0gZ3JhcGhpY3NEYXRhIC0gVGhlIGdyYXBoaWNzIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgbmVjZXNzYXJ5IHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7b2JqZWN0fSB3ZWJHTERhdGEgLSBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIFdlYkdMLXNwZWNpZmljIGluZm9ybWF0aW9uIHRvIGNyZWF0ZSB0aGlzIHNoYXBlXG4gKiBAcGFyYW0ge29iamVjdH0gd2ViR0xEYXRhTmF0aXZlTGluZXMgLSBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIFdlYkdMLXNwZWNpZmljIGluZm9ybWF0aW9uIHRvIGNyZWF0ZSBuYXRpdmVMaW5lc1xuICovXG5leHBvcnQgY29uc3QgYnVpbGRSb3VuZGVkUmVjdGFuZ2xlOiBJU2hhcGVCdWlsZENvbW1hbmQgPSB7XG5cbiAgICBidWlsZChncmFwaGljc0RhdGEpXG4gICAge1xuICAgICAgICBjb25zdCBycmVjdERhdGEgPSBncmFwaGljc0RhdGEuc2hhcGUgYXMgUm91bmRlZFJlY3RhbmdsZTtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gZ3JhcGhpY3NEYXRhLnBvaW50cztcbiAgICAgICAgY29uc3QgeCA9IHJyZWN0RGF0YS54O1xuICAgICAgICBjb25zdCB5ID0gcnJlY3REYXRhLnk7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gcnJlY3REYXRhLndpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBycmVjdERhdGEuaGVpZ2h0O1xuXG4gICAgICAgIC8vIERvbid0IGFsbG93IG5lZ2F0aXZlIHJhZGl1cyBvciBncmVhdGVyIHRoYW4gaGFsZiB0aGUgc21hbGxlc3Qgd2lkdGhcbiAgICAgICAgY29uc3QgcmFkaXVzID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocnJlY3REYXRhLnJhZGl1cywgTWF0aC5taW4od2lkdGgsIGhlaWdodCkgLyAyKSk7XG5cbiAgICAgICAgcG9pbnRzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgLy8gTm8gcmFkaXVzLCBkbyBhIHNpbXBsZSByZWN0YW5nbGVcbiAgICAgICAgaWYgKCFyYWRpdXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHgsIHksXG4gICAgICAgICAgICAgICAgeCArIHdpZHRoLCB5LFxuICAgICAgICAgICAgICAgIHggKyB3aWR0aCwgeSArIGhlaWdodCxcbiAgICAgICAgICAgICAgICB4LCB5ICsgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHF1YWRyYXRpY0JlemllckN1cnZlKHgsIHkgKyByYWRpdXMsXG4gICAgICAgICAgICAgICAgeCwgeSxcbiAgICAgICAgICAgICAgICB4ICsgcmFkaXVzLCB5LFxuICAgICAgICAgICAgICAgIHBvaW50cyk7XG4gICAgICAgICAgICBxdWFkcmF0aWNCZXppZXJDdXJ2ZSh4ICsgd2lkdGggLSByYWRpdXMsXG4gICAgICAgICAgICAgICAgeSwgeCArIHdpZHRoLCB5LFxuICAgICAgICAgICAgICAgIHggKyB3aWR0aCwgeSArIHJhZGl1cyxcbiAgICAgICAgICAgICAgICBwb2ludHMpO1xuICAgICAgICAgICAgcXVhZHJhdGljQmV6aWVyQ3VydmUoeCArIHdpZHRoLCB5ICsgaGVpZ2h0IC0gcmFkaXVzLFxuICAgICAgICAgICAgICAgIHggKyB3aWR0aCwgeSArIGhlaWdodCxcbiAgICAgICAgICAgICAgICB4ICsgd2lkdGggLSByYWRpdXMsIHkgKyBoZWlnaHQsXG4gICAgICAgICAgICAgICAgcG9pbnRzKTtcbiAgICAgICAgICAgIHF1YWRyYXRpY0JlemllckN1cnZlKHggKyByYWRpdXMsIHkgKyBoZWlnaHQsXG4gICAgICAgICAgICAgICAgeCwgeSArIGhlaWdodCxcbiAgICAgICAgICAgICAgICB4LCB5ICsgaGVpZ2h0IC0gcmFkaXVzLFxuICAgICAgICAgICAgICAgIHBvaW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGlzIHRpbnkgbnVtYmVyIGRlYWxzIHdpdGggdGhlIGlzc3VlIHRoYXQgb2NjdXJzIHdoZW4gcG9pbnRzIG92ZXJsYXAgYW5kIGVhcmN1dCBmYWlscyB0byB0cmlhbmd1bGF0ZSB0aGUgaXRlbS5cbiAgICAgICAgLy8gVE9ETyAtIGZpeCB0aGlzIHByb3Blcmx5LCB0aGlzIGlzIG5vdCB2ZXJ5IGVsZWdhbnQuLiBidXQgaXQgd29ya3MgZm9yIG5vdy5cbiAgICB9LFxuXG4gICAgdHJpYW5ndWxhdGUoZ3JhcGhpY3NEYXRhLCBncmFwaGljc0dlb21ldHJ5KVxuICAgIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gZ3JhcGhpY3NEYXRhLnBvaW50cztcblxuICAgICAgICBjb25zdCB2ZXJ0cyA9IGdyYXBoaWNzR2VvbWV0cnkucG9pbnRzO1xuICAgICAgICBjb25zdCBpbmRpY2VzID0gZ3JhcGhpY3NHZW9tZXRyeS5pbmRpY2VzO1xuXG4gICAgICAgIGNvbnN0IHZlY1BvcyA9IHZlcnRzLmxlbmd0aCAvIDI7XG5cbiAgICAgICAgY29uc3QgdHJpYW5nbGVzID0gZWFyY3V0KHBvaW50cywgbnVsbCwgMik7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSB0cmlhbmdsZXMubGVuZ3RoOyBpIDwgajsgaSArPSAzKVxuICAgICAgICB7XG4gICAgICAgICAgICBpbmRpY2VzLnB1c2godHJpYW5nbGVzW2ldICsgdmVjUG9zKTtcbiAgICAgICAgICAgIC8vICAgICBpbmRpY2VzLnB1c2godHJpYW5nbGVzW2ldICsgdmVjUG9zKTtcbiAgICAgICAgICAgIGluZGljZXMucHVzaCh0cmlhbmdsZXNbaSArIDFdICsgdmVjUG9zKTtcbiAgICAgICAgICAgIC8vICAgaW5kaWNlcy5wdXNoKHRyaWFuZ2xlc1tpICsgMl0gKyB2ZWNQb3MpO1xuICAgICAgICAgICAgaW5kaWNlcy5wdXNoKHRyaWFuZ2xlc1tpICsgMl0gKyB2ZWNQb3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSBwb2ludHMubGVuZ3RoOyBpIDwgajsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB2ZXJ0cy5wdXNoKHBvaW50c1tpXSwgcG9pbnRzWysraV0pO1xuICAgICAgICB9XG4gICAgfSxcbn07XG4iLCAiaW1wb3J0IHsgUG9pbnQsIFNIQVBFUyB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG5pbXBvcnQgdHlwZSB7IFBvbHlnb24gfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB0eXBlIHsgR3JhcGhpY3NEYXRhIH0gZnJvbSAnLi4vR3JhcGhpY3NEYXRhJztcbmltcG9ydCB0eXBlIHsgR3JhcGhpY3NHZW9tZXRyeSB9IGZyb20gJy4uL0dyYXBoaWNzR2VvbWV0cnknO1xuaW1wb3J0IHsgTElORV9KT0lOLCBMSU5FX0NBUCB9IGZyb20gJy4uL2NvbnN0JztcbmltcG9ydCB7IEdSQVBISUNTX0NVUlZFUyB9IGZyb20gJy4uL2NvbnN0JztcblxuLyoqXG4gKiBCdWZmZXJzIHZlcnRpY2VzIHRvIGRyYXcgYSBzcXVhcmUgY2FwLlxuICpcbiAqIElnbm9yZWQgZnJvbSBkb2NzIHNpbmNlIGl0IGlzIG5vdCBkaXJlY3RseSBleHBvc2VkLlxuICpcbiAqIEBpZ25vcmVcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFgtY29vcmQgb2YgZW5kIHBvaW50XG4gKiBAcGFyYW0ge251bWJlcn0geSAtIFktY29vcmQgb2YgZW5kIHBvaW50XG4gKiBAcGFyYW0ge251bWJlcn0gbnggLSBYLWNvb3JkIG9mIGxpbmUgbm9ybWFsIHBvaW50aW5nIGluc2lkZVxuICogQHBhcmFtIHtudW1iZXJ9IG55IC0gWS1jb29yZCBvZiBsaW5lIG5vcm1hbCBwb2ludGluZyBpbnNpZGVcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gdmVydHMgLSB2ZXJ0ZXggYnVmZmVyXG4gKiBAcmV0dXJucyB7fVxuICovXG5mdW5jdGlvbiBzcXVhcmUoXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlcixcbiAgICBueDogbnVtYmVyLFxuICAgIG55OiBudW1iZXIsXG4gICAgaW5uZXJXZWlnaHQ6IG51bWJlcixcbiAgICBvdXRlcldlaWdodDogbnVtYmVyLFxuICAgIGNsb2Nrd2lzZTogYm9vbGVhbiwgLyogcm90YXRpb24gZm9yIHNxdWFyZSAodHJ1ZSBhdCBsZWZ0IGVuZCwgZmFsc2UgYXQgcmlnaHQgZW5kKSAqL1xuICAgIHZlcnRzOiBBcnJheTxudW1iZXI+XG4pOiBudW1iZXJcbntcbiAgICBjb25zdCBpeCA9IHggLSAobnggKiBpbm5lcldlaWdodCk7XG4gICAgY29uc3QgaXkgPSB5IC0gKG55ICogaW5uZXJXZWlnaHQpO1xuICAgIGNvbnN0IG94ID0geCArIChueCAqIG91dGVyV2VpZ2h0KTtcbiAgICBjb25zdCBveSA9IHkgKyAobnkgKiBvdXRlcldlaWdodCk7XG5cbiAgICAvKiBSb3RhdGUgbngsbnkgZm9yIGV4dGVuc2lvbiB2ZWN0b3IgKi9cbiAgICBsZXQgZXh4OyBsZXRcbiAgICAgICAgZXl5O1xuXG4gICAgaWYgKGNsb2Nrd2lzZSlcbiAgICB7XG4gICAgICAgIGV4eCA9IG55O1xuICAgICAgICBleXkgPSAtbng7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIGV4eCA9IC1ueTtcbiAgICAgICAgZXl5ID0gbng7XG4gICAgfVxuXG4gICAgLyogW2l8MF14LHkgZXh0ZW5kZWQgYXQgY2FwICovXG4gICAgY29uc3QgZWl4ID0gaXggKyBleHg7XG4gICAgY29uc3QgZWl5ID0gaXkgKyBleXk7XG4gICAgY29uc3QgZW94ID0gb3ggKyBleHg7XG4gICAgY29uc3QgZW95ID0gb3kgKyBleXk7XG5cbiAgICAvKiBTcXVhcmUgaXRzZWxmIG11c3QgYmUgaW5zZXJ0ZWQgY2xvY2t3aXNlKi9cbiAgICB2ZXJ0cy5wdXNoKGVpeCwgZWl5KTtcbiAgICB2ZXJ0cy5wdXNoKGVveCwgZW95KTtcblxuICAgIHJldHVybiAyO1xufVxuXG4vKipcbiAqIEJ1ZmZlcnMgdmVydGljZXMgdG8gZHJhdyBhbiBhcmMgYXQgdGhlIGxpbmUgam9pbnQgb3IgY2FwLlxuICpcbiAqIElnbm9yZWQgZnJvbSBkb2NzIHNpbmNlIGl0IGlzIG5vdCBkaXJlY3RseSBleHBvc2VkLlxuICpcbiAqIEBpZ25vcmVcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gY3ggLSBYLWNvb3JkIG9mIGNlbnRlclxuICogQHBhcmFtIHtudW1iZXJ9IGN5IC0gWS1jb29yZCBvZiBjZW50ZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCAtIFgtY29vcmQgb2YgYXJjIHN0YXJ0XG4gKiBAcGFyYW0ge251bWJlcn0gc3kgLSBZLWNvb3JkIG9mIGFyYyBzdGFydFxuICogQHBhcmFtIHtudW1iZXJ9IGV4IC0gWC1jb29yZCBvZiBhcmMgZW5kXG4gKiBAcGFyYW0ge251bWJlcn0gZXkgLSBZLWNvb3JkIG9mIGFyYyBlbmRcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gdmVydHMgLSBidWZmZXIgb2YgdmVydGljZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gY2xvY2t3aXNlIC0gb3JpZW50YXRpb24gb2YgdmVydGljZXNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gbm8uIG9mIHZlcnRpY2VzIHB1c2hlZFxuICovXG5mdW5jdGlvbiByb3VuZChcbiAgICBjeDogbnVtYmVyLFxuICAgIGN5OiBudW1iZXIsXG4gICAgc3g6IG51bWJlcixcbiAgICBzeTogbnVtYmVyLFxuICAgIGV4OiBudW1iZXIsXG4gICAgZXk6IG51bWJlcixcbiAgICB2ZXJ0czogQXJyYXk8bnVtYmVyPixcbiAgICBjbG9ja3dpc2U6IGJvb2xlYW4sIC8qIGlmIG5vdCBjYXAsIHRoZW4gY2xvY2t3aXNlIGlzIHR1cm4gb2Ygam9pbnQsIG90aGVyd2lzZSByb3RhdGlvbiBmcm9tIGFuZ2xlMCB0byBhbmdsZTEgKi9cbik6IG51bWJlclxue1xuICAgIGNvbnN0IGN4MnAweCA9IHN4IC0gY3g7XG4gICAgY29uc3QgY3kycDB5ID0gc3kgLSBjeTtcblxuICAgIGxldCBhbmdsZTAgPSBNYXRoLmF0YW4yKGN4MnAweCwgY3kycDB5KTtcbiAgICBsZXQgYW5nbGUxID0gTWF0aC5hdGFuMihleCAtIGN4LCBleSAtIGN5KTtcblxuICAgIGlmIChjbG9ja3dpc2UgJiYgYW5nbGUwIDwgYW5nbGUxKVxuICAgIHtcbiAgICAgICAgYW5nbGUwICs9IE1hdGguUEkgKiAyO1xuICAgIH1cbiAgICBlbHNlIGlmICghY2xvY2t3aXNlICYmIGFuZ2xlMCA+IGFuZ2xlMSlcbiAgICB7XG4gICAgICAgIGFuZ2xlMSArPSBNYXRoLlBJICogMjtcbiAgICB9XG5cbiAgICBsZXQgc3RhcnRBbmdsZSA9IGFuZ2xlMDtcbiAgICBjb25zdCBhbmdsZURpZmYgPSBhbmdsZTEgLSBhbmdsZTA7XG4gICAgY29uc3QgYWJzQW5nbGVEaWZmID0gTWF0aC5hYnMoYW5nbGVEaWZmKTtcblxuICAgIC8qIGlmIChhYnNBbmdsZURpZmYgPj0gUElfTEJPVU5EICYmIGFic0FuZ2xlRGlmZiA8PSBQSV9VQk9VTkQpXG4gICAge1xuICAgICAgICBjb25zdCByMXggPSBjeCAtIG54dFB4O1xuICAgICAgICBjb25zdCByMXkgPSBjeSAtIG54dFB5O1xuXG4gICAgICAgIGlmIChyMXggPT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChyMXkgPiAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFuZ2xlRGlmZiA9IC1hbmdsZURpZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocjF4ID49IC1HUkFQSElDU19DVVJWRVMuZXBzaWxvbilcbiAgICAgICAge1xuICAgICAgICAgICAgYW5nbGVEaWZmID0gLWFuZ2xlRGlmZjtcbiAgICAgICAgfVxuICAgIH0qL1xuXG4gICAgY29uc3QgcmFkaXVzID0gTWF0aC5zcXJ0KChjeDJwMHggKiBjeDJwMHgpICsgKGN5MnAweSAqIGN5MnAweSkpO1xuICAgIGNvbnN0IHNlZ0NvdW50ID0gKCgxNSAqIGFic0FuZ2xlRGlmZiAqIE1hdGguc3FydChyYWRpdXMpIC8gTWF0aC5QSSkgPj4gMCkgKyAxO1xuICAgIGNvbnN0IGFuZ2xlSW5jID0gYW5nbGVEaWZmIC8gc2VnQ291bnQ7XG5cbiAgICBzdGFydEFuZ2xlICs9IGFuZ2xlSW5jO1xuXG4gICAgaWYgKGNsb2Nrd2lzZSlcbiAgICB7XG4gICAgICAgIHZlcnRzLnB1c2goY3gsIGN5KTtcbiAgICAgICAgdmVydHMucHVzaChzeCwgc3kpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAxLCBhbmdsZSA9IHN0YXJ0QW5nbGU7IGkgPCBzZWdDb3VudDsgaSsrLCBhbmdsZSArPSBhbmdsZUluYylcbiAgICAgICAge1xuICAgICAgICAgICAgdmVydHMucHVzaChjeCwgY3kpO1xuICAgICAgICAgICAgdmVydHMucHVzaChjeCArICgoTWF0aC5zaW4oYW5nbGUpICogcmFkaXVzKSksXG4gICAgICAgICAgICAgICAgY3kgKyAoKE1hdGguY29zKGFuZ2xlKSAqIHJhZGl1cykpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZlcnRzLnB1c2goY3gsIGN5KTtcbiAgICAgICAgdmVydHMucHVzaChleCwgZXkpO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICB2ZXJ0cy5wdXNoKHN4LCBzeSk7XG4gICAgICAgIHZlcnRzLnB1c2goY3gsIGN5KTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMSwgYW5nbGUgPSBzdGFydEFuZ2xlOyBpIDwgc2VnQ291bnQ7IGkrKywgYW5nbGUgKz0gYW5nbGVJbmMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZlcnRzLnB1c2goY3ggKyAoKE1hdGguc2luKGFuZ2xlKSAqIHJhZGl1cykpLFxuICAgICAgICAgICAgICAgIGN5ICsgKChNYXRoLmNvcyhhbmdsZSkgKiByYWRpdXMpKSk7XG4gICAgICAgICAgICB2ZXJ0cy5wdXNoKGN4LCBjeSk7XG4gICAgICAgIH1cblxuICAgICAgICB2ZXJ0cy5wdXNoKGV4LCBleSk7XG4gICAgICAgIHZlcnRzLnB1c2goY3gsIGN5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VnQ291bnQgKiAyO1xufVxuXG4vKipcbiAqIEJ1aWxkcyBhIGxpbmUgdG8gZHJhdyB1c2luZyB0aGUgcG9seWdvbiBtZXRob2QuXG4gKlxuICogSWdub3JlZCBmcm9tIGRvY3Mgc2luY2UgaXQgaXMgbm90IGRpcmVjdGx5IGV4cG9zZWQuXG4gKlxuICogQGlnbm9yZVxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5HcmFwaGljc0RhdGF9IGdyYXBoaWNzRGF0YSAtIFRoZSBncmFwaGljcyBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIG5lY2Vzc2FyeSBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge1BJWEkuR3JhcGhpY3NHZW9tZXRyeX0gZ3JhcGhpY3NHZW9tZXRyeSAtIEdlb21ldHJ5IHdoZXJlIHRvIGFwcGVuZCBvdXRwdXRcbiAqL1xuZnVuY3Rpb24gYnVpbGROb25OYXRpdmVMaW5lKGdyYXBoaWNzRGF0YTogR3JhcGhpY3NEYXRhLCBncmFwaGljc0dlb21ldHJ5OiBHcmFwaGljc0dlb21ldHJ5KTogdm9pZFxue1xuICAgIGNvbnN0IHNoYXBlID0gZ3JhcGhpY3NEYXRhLnNoYXBlIGFzIFBvbHlnb247XG4gICAgbGV0IHBvaW50cyA9IGdyYXBoaWNzRGF0YS5wb2ludHMgfHwgc2hhcGUucG9pbnRzLnNsaWNlKCk7XG4gICAgY29uc3QgZXBzID0gZ3JhcGhpY3NHZW9tZXRyeS5jbG9zZVBvaW50RXBzO1xuXG4gICAgaWYgKHBvaW50cy5sZW5ndGggPT09IDApXG4gICAge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGlmIHRoZSBsaW5lIHdpZHRoIGlzIGFuIG9kZCBudW1iZXIgYWRkIDAuNSB0byBhbGlnbiB0byBhIHdob2xlIHBpeGVsXG4gICAgLy8gY29tbWVudGluZyB0aGlzIG91dCBmaXhlcyAjNzExIGFuZCAjMTYyMFxuICAgIC8vIGlmIChncmFwaGljc0RhdGEubGluZVdpZHRoJTIpXG4gICAgLy8ge1xuICAgIC8vICAgICBmb3IgKGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKVxuICAgIC8vICAgICB7XG4gICAgLy8gICAgICAgICBwb2ludHNbaV0gKz0gMC41O1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgY29uc3Qgc3R5bGUgPSBncmFwaGljc0RhdGEubGluZVN0eWxlO1xuXG4gICAgLy8gZ2V0IGZpcnN0IGFuZCBsYXN0IHBvaW50Li4gZmlndXJlIG91dCB0aGUgbWlkZGxlIVxuICAgIGNvbnN0IGZpcnN0UG9pbnQgPSBuZXcgUG9pbnQocG9pbnRzWzBdLCBwb2ludHNbMV0pO1xuICAgIGNvbnN0IGxhc3RQb2ludCA9IG5ldyBQb2ludChwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDJdLCBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdKTtcbiAgICBjb25zdCBjbG9zZWRTaGFwZSA9IHNoYXBlLnR5cGUgIT09IFNIQVBFUy5QT0xZIHx8IHNoYXBlLmNsb3NlU3Ryb2tlO1xuICAgIGNvbnN0IGNsb3NlZFBhdGggPSBNYXRoLmFicyhmaXJzdFBvaW50LnggLSBsYXN0UG9pbnQueCkgPCBlcHNcbiAgICAgICAgJiYgTWF0aC5hYnMoZmlyc3RQb2ludC55IC0gbGFzdFBvaW50LnkpIDwgZXBzO1xuXG4gICAgLy8gaWYgdGhlIGZpcnN0IHBvaW50IGlzIHRoZSBsYXN0IHBvaW50IC0gZ29ubmEgaGF2ZSBpc3N1ZXMgOilcbiAgICBpZiAoY2xvc2VkU2hhcGUpXG4gICAge1xuICAgICAgICAvLyBuZWVkIHRvIGNsb25lIGFzIHdlIGFyZSBnb2luZyB0byBzbGlnaHRseSBtb2RpZnkgdGhlIHNoYXBlLi5cbiAgICAgICAgcG9pbnRzID0gcG9pbnRzLnNsaWNlKCk7XG5cbiAgICAgICAgaWYgKGNsb3NlZFBhdGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBvaW50cy5wb3AoKTtcbiAgICAgICAgICAgIHBvaW50cy5wb3AoKTtcbiAgICAgICAgICAgIGxhc3RQb2ludC5zZXQocG9pbnRzW3BvaW50cy5sZW5ndGggLSAyXSwgcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtaWRQb2ludFggPSAoZmlyc3RQb2ludC54ICsgbGFzdFBvaW50LngpICogMC41O1xuICAgICAgICBjb25zdCBtaWRQb2ludFkgPSAobGFzdFBvaW50LnkgKyBmaXJzdFBvaW50LnkpICogMC41O1xuXG4gICAgICAgIHBvaW50cy51bnNoaWZ0KG1pZFBvaW50WCwgbWlkUG9pbnRZKTtcbiAgICAgICAgcG9pbnRzLnB1c2gobWlkUG9pbnRYLCBtaWRQb2ludFkpO1xuICAgIH1cblxuICAgIGNvbnN0IHZlcnRzID0gZ3JhcGhpY3NHZW9tZXRyeS5wb2ludHM7XG4gICAgY29uc3QgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aCAvIDI7XG4gICAgbGV0IGluZGV4Q291bnQgPSBwb2ludHMubGVuZ3RoO1xuICAgIGNvbnN0IGluZGV4U3RhcnQgPSB2ZXJ0cy5sZW5ndGggLyAyO1xuXG4gICAgLy8gTWF4LiBpbm5lciBhbmQgb3V0ZXIgd2lkdGhcbiAgICBjb25zdCB3aWR0aCA9IHN0eWxlLndpZHRoIC8gMjtcbiAgICBjb25zdCB3aWR0aFNxdWFyZWQgPSB3aWR0aCAqIHdpZHRoO1xuICAgIGNvbnN0IG1pdGVyTGltaXRTcXVhcmVkID0gc3R5bGUubWl0ZXJMaW1pdCAqIHN0eWxlLm1pdGVyTGltaXQ7XG5cbiAgICAvKiBMaW5lIHNlZ21lbnRzIG9mIGludGVyZXN0IHdoZXJlICh4MSx5MSkgZm9ybXMgdGhlIGNvcm5lci4gKi9cbiAgICBsZXQgeDAgPSBwb2ludHNbMF07XG4gICAgbGV0IHkwID0gcG9pbnRzWzFdO1xuICAgIGxldCB4MSA9IHBvaW50c1syXTtcbiAgICBsZXQgeTEgPSBwb2ludHNbM107XG4gICAgbGV0IHgyID0gMDtcbiAgICBsZXQgeTIgPSAwO1xuXG4gICAgLyogcGVycFs/XSh4fHkpID0gdGhlIGxpbmUgbm9ybWFsIHdpdGggbWFnbml0dWRlIGxpbmVXaWR0aC4gKi9cbiAgICBsZXQgcGVycHggPSAtKHkwIC0geTEpO1xuICAgIGxldCBwZXJweSA9IHgwIC0geDE7XG4gICAgbGV0IHBlcnAxeCA9IDA7XG4gICAgbGV0IHBlcnAxeSA9IDA7XG5cbiAgICBsZXQgZGlzdCA9IE1hdGguc3FydCgocGVycHggKiBwZXJweCkgKyAocGVycHkgKiBwZXJweSkpO1xuXG4gICAgcGVycHggLz0gZGlzdDtcbiAgICBwZXJweSAvPSBkaXN0O1xuICAgIHBlcnB4ICo9IHdpZHRoO1xuICAgIHBlcnB5ICo9IHdpZHRoO1xuXG4gICAgY29uc3QgcmF0aW8gPSBzdHlsZS5hbGlnbm1lbnQ7Ly8gMC41O1xuICAgIGNvbnN0IGlubmVyV2VpZ2h0ID0gKDEgLSByYXRpbykgKiAyO1xuICAgIGNvbnN0IG91dGVyV2VpZ2h0ID0gcmF0aW8gKiAyO1xuXG4gICAgaWYgKCFjbG9zZWRTaGFwZSlcbiAgICB7XG4gICAgICAgIGlmIChzdHlsZS5jYXAgPT09IExJTkVfQ0FQLlJPVU5EKVxuICAgICAgICB7XG4gICAgICAgICAgICBpbmRleENvdW50ICs9IHJvdW5kKFxuICAgICAgICAgICAgICAgIHgwIC0gKHBlcnB4ICogKGlubmVyV2VpZ2h0IC0gb3V0ZXJXZWlnaHQpICogMC41KSxcbiAgICAgICAgICAgICAgICB5MCAtIChwZXJweSAqIChpbm5lcldlaWdodCAtIG91dGVyV2VpZ2h0KSAqIDAuNSksXG4gICAgICAgICAgICAgICAgeDAgLSAocGVycHggKiBpbm5lcldlaWdodCksXG4gICAgICAgICAgICAgICAgeTAgLSAocGVycHkgKiBpbm5lcldlaWdodCksXG4gICAgICAgICAgICAgICAgeDAgKyAocGVycHggKiBvdXRlcldlaWdodCksXG4gICAgICAgICAgICAgICAgeTAgKyAocGVycHkgKiBvdXRlcldlaWdodCksXG4gICAgICAgICAgICAgICAgdmVydHMsXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICkgKyAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0eWxlLmNhcCA9PT0gTElORV9DQVAuU1FVQVJFKVxuICAgICAgICB7XG4gICAgICAgICAgICBpbmRleENvdW50ICs9IHNxdWFyZSh4MCwgeTAsIHBlcnB4LCBwZXJweSwgaW5uZXJXZWlnaHQsIG91dGVyV2VpZ2h0LCB0cnVlLCB2ZXJ0cyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQdXNoIGZpcnN0IHBvaW50IChiZWxvdyAmIGFib3ZlIHZlcnRpY2VzKVxuICAgIHZlcnRzLnB1c2goXG4gICAgICAgIHgwIC0gKHBlcnB4ICogaW5uZXJXZWlnaHQpLFxuICAgICAgICB5MCAtIChwZXJweSAqIGlubmVyV2VpZ2h0KSk7XG4gICAgdmVydHMucHVzaChcbiAgICAgICAgeDAgKyAocGVycHggKiBvdXRlcldlaWdodCksXG4gICAgICAgIHkwICsgKHBlcnB5ICogb3V0ZXJXZWlnaHQpKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoIC0gMTsgKytpKVxuICAgIHtcbiAgICAgICAgeDAgPSBwb2ludHNbKGkgLSAxKSAqIDJdO1xuICAgICAgICB5MCA9IHBvaW50c1soKGkgLSAxKSAqIDIpICsgMV07XG5cbiAgICAgICAgeDEgPSBwb2ludHNbaSAqIDJdO1xuICAgICAgICB5MSA9IHBvaW50c1soaSAqIDIpICsgMV07XG5cbiAgICAgICAgeDIgPSBwb2ludHNbKGkgKyAxKSAqIDJdO1xuICAgICAgICB5MiA9IHBvaW50c1soKGkgKyAxKSAqIDIpICsgMV07XG5cbiAgICAgICAgcGVycHggPSAtKHkwIC0geTEpO1xuICAgICAgICBwZXJweSA9IHgwIC0geDE7XG5cbiAgICAgICAgZGlzdCA9IE1hdGguc3FydCgocGVycHggKiBwZXJweCkgKyAocGVycHkgKiBwZXJweSkpO1xuICAgICAgICBwZXJweCAvPSBkaXN0O1xuICAgICAgICBwZXJweSAvPSBkaXN0O1xuICAgICAgICBwZXJweCAqPSB3aWR0aDtcbiAgICAgICAgcGVycHkgKj0gd2lkdGg7XG5cbiAgICAgICAgcGVycDF4ID0gLSh5MSAtIHkyKTtcbiAgICAgICAgcGVycDF5ID0geDEgLSB4MjtcblxuICAgICAgICBkaXN0ID0gTWF0aC5zcXJ0KChwZXJwMXggKiBwZXJwMXgpICsgKHBlcnAxeSAqIHBlcnAxeSkpO1xuICAgICAgICBwZXJwMXggLz0gZGlzdDtcbiAgICAgICAgcGVycDF5IC89IGRpc3Q7XG4gICAgICAgIHBlcnAxeCAqPSB3aWR0aDtcbiAgICAgICAgcGVycDF5ICo9IHdpZHRoO1xuXG4gICAgICAgIC8qIGRbeHx5XSgwfDEpID0gdGhlIGNvbXBvbmVudCBkaXNwbGFjbWVudCBiZXR3ZWVuIHBvaW50cyBwKDAsMXwxLDIpICovXG4gICAgICAgIGNvbnN0IGR4MCA9IHgxIC0geDA7XG4gICAgICAgIGNvbnN0IGR5MCA9IHkwIC0geTE7XG4gICAgICAgIGNvbnN0IGR4MSA9IHgxIC0geDI7XG4gICAgICAgIGNvbnN0IGR5MSA9IHkyIC0geTE7XG5cbiAgICAgICAgLyogK3ZlIGlmIGludGVybmFsIGFuZ2xlIGNvdW50ZXJjbG9ja3dpc2UsIC12ZSBpZiBpbnRlcm5hbCBhbmdsZSBjbG9ja3dpc2UuICovXG4gICAgICAgIGNvbnN0IGNyb3NzID0gKGR5MCAqIGR4MSkgLSAoZHkxICogZHgwKTtcbiAgICAgICAgY29uc3QgY2xvY2t3aXNlID0gKGNyb3NzIDwgMCk7XG5cbiAgICAgICAgLyogR29pbmcgbmVhcmx5IHN0cmFpZ2h0PyAqL1xuICAgICAgICBpZiAoTWF0aC5hYnMoY3Jvc3MpIDwgMC4xKVxuICAgICAgICB7XG4gICAgICAgICAgICB2ZXJ0cy5wdXNoKFxuICAgICAgICAgICAgICAgIHgxIC0gKHBlcnB4ICogaW5uZXJXZWlnaHQpLFxuICAgICAgICAgICAgICAgIHkxIC0gKHBlcnB5ICogaW5uZXJXZWlnaHQpKTtcbiAgICAgICAgICAgIHZlcnRzLnB1c2goXG4gICAgICAgICAgICAgICAgeDEgKyAocGVycHggKiBvdXRlcldlaWdodCksXG4gICAgICAgICAgICAgICAgeTEgKyAocGVycHkgKiBvdXRlcldlaWdodCkpO1xuXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIHBbeHx5XSBpcyB0aGUgbWl0ZXIgcG9pbnQuIHBkaXN0IGlzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIG1pdGVyIHBvaW50IGFuZCBwMS4gKi9cbiAgICAgICAgY29uc3QgYzEgPSAoKC1wZXJweCArIHgwKSAqICgtcGVycHkgKyB5MSkpIC0gKCgtcGVycHggKyB4MSkgKiAoLXBlcnB5ICsgeTApKTtcbiAgICAgICAgY29uc3QgYzIgPSAoKC1wZXJwMXggKyB4MikgKiAoLXBlcnAxeSArIHkxKSkgLSAoKC1wZXJwMXggKyB4MSkgKiAoLXBlcnAxeSArIHkyKSk7XG4gICAgICAgIGNvbnN0IHB4ID0gKChkeDAgKiBjMikgLSAoZHgxICogYzEpKSAvIGNyb3NzO1xuICAgICAgICBjb25zdCBweSA9ICgoZHkxICogYzEpIC0gKGR5MCAqIGMyKSkgLyBjcm9zcztcbiAgICAgICAgY29uc3QgcGRpc3QgPSAoKHB4IC0geDEpICogKHB4IC0geDEpKSArICgocHkgLSB5MSkgKiAocHkgLSB5MSkpO1xuXG4gICAgICAgIC8qIElubmVyIG1pdGVyIHBvaW50ICovXG4gICAgICAgIGNvbnN0IGlteCA9IHgxICsgKChweCAtIHgxKSAqIGlubmVyV2VpZ2h0KTtcbiAgICAgICAgY29uc3QgaW15ID0geTEgKyAoKHB5IC0geTEpICogaW5uZXJXZWlnaHQpO1xuICAgICAgICAvKiBPdXRlciBtaXRlciBwb2ludCAqL1xuICAgICAgICBjb25zdCBvbXggPSB4MSAtICgocHggLSB4MSkgKiBvdXRlcldlaWdodCk7XG4gICAgICAgIGNvbnN0IG9teSA9IHkxIC0gKChweSAtIHkxKSAqIG91dGVyV2VpZ2h0KTtcblxuICAgICAgICAvKiBJcyB0aGUgaW5zaWRlIG1pdGVyIHBvaW50IHRvbyBmYXIgYXdheSwgY3JlYXRpbmcgYSBzcGlrZT8gKi9cbiAgICAgICAgY29uc3Qgc21hbGxlckluc2lkZVNlZ21lbnRTcSA9IE1hdGgubWluKChkeDAgKiBkeDApICsgKGR5MCAqIGR5MCksIChkeDEgKiBkeDEpICsgKGR5MSAqIGR5MSkpO1xuICAgICAgICBjb25zdCBpbnNpZGVXZWlnaHQgPSBjbG9ja3dpc2UgPyBpbm5lcldlaWdodCA6IG91dGVyV2VpZ2h0O1xuICAgICAgICBjb25zdCBzbWFsbGVySW5zaWRlRGlhZ29uYWxTcSA9IHNtYWxsZXJJbnNpZGVTZWdtZW50U3EgKyAoaW5zaWRlV2VpZ2h0ICogaW5zaWRlV2VpZ2h0ICogd2lkdGhTcXVhcmVkKTtcbiAgICAgICAgY29uc3QgaW5zaWRlTWl0ZXJPayA9IHBkaXN0IDw9IHNtYWxsZXJJbnNpZGVEaWFnb25hbFNxO1xuXG4gICAgICAgIGlmIChpbnNpZGVNaXRlck9rKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoc3R5bGUuam9pbiA9PT0gTElORV9KT0lOLkJFVkVMIHx8IHBkaXN0IC8gd2lkdGhTcXVhcmVkID4gbWl0ZXJMaW1pdFNxdWFyZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGNsb2Nrd2lzZSkgLyogcm90YXRpbmcgYXQgaW5uZXIgYW5nbGUgKi9cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2goaW14LCBpbXkpOy8vIGlubmVyIG1pdGVyIHBvaW50XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2goeDEgKyAocGVycHggKiBvdXRlcldlaWdodCksIHkxICsgKHBlcnB5ICogb3V0ZXJXZWlnaHQpKTsvLyBmaXJzdCBzZWdtZW50J3Mgb3V0ZXIgdmVydGV4XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2goaW14LCBpbXkpOy8vIGlubmVyIG1pdGVyIHBvaW50XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2goeDEgKyAocGVycDF4ICogb3V0ZXJXZWlnaHQpLCB5MSArIChwZXJwMXkgKiBvdXRlcldlaWdodCkpOy8vIHNlY29uZCBzZWdtZW50J3Mgb3V0ZXIgdmVydGV4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgLyogcm90YXRpbmcgYXQgb3V0ZXIgYW5nbGUgKi9cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2goeDEgLSAocGVycHggKiBpbm5lcldlaWdodCksIHkxIC0gKHBlcnB5ICogaW5uZXJXZWlnaHQpKTsvLyBmaXJzdCBzZWdtZW50J3MgaW5uZXIgdmVydGV4XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2gob214LCBvbXkpOy8vIG91dGVyIG1pdGVyIHBvaW50XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2goeDEgLSAocGVycDF4ICogaW5uZXJXZWlnaHQpLCB5MSAtIChwZXJwMXkgKiBpbm5lcldlaWdodCkpOy8vIHNlY29uZCBzZWdtZW50J3Mgb3V0ZXIgdmVydGV4XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2gob214LCBvbXkpOy8vIG91dGVyIG1pdGVyIHBvaW50XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaW5kZXhDb3VudCArPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3R5bGUuam9pbiA9PT0gTElORV9KT0lOLlJPVU5EKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChjbG9ja3dpc2UpIC8qIGFyYyBpcyBvdXRzaWRlICovXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2ZXJ0cy5wdXNoKGlteCwgaW15KTtcbiAgICAgICAgICAgICAgICAgICAgdmVydHMucHVzaCh4MSArIChwZXJweCAqIG91dGVyV2VpZ2h0KSwgeTEgKyAocGVycHkgKiBvdXRlcldlaWdodCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Q291bnQgKz0gcm91bmQoXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSwgeTEsXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSArIChwZXJweCAqIG91dGVyV2VpZ2h0KSwgeTEgKyAocGVycHkgKiBvdXRlcldlaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSArIChwZXJwMXggKiBvdXRlcldlaWdodCksIHkxICsgKHBlcnAxeSAqIG91dGVyV2VpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRzLCB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkgKyA0O1xuXG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2goaW14LCBpbXkpO1xuICAgICAgICAgICAgICAgICAgICB2ZXJ0cy5wdXNoKHgxICsgKHBlcnAxeCAqIG91dGVyV2VpZ2h0KSwgeTEgKyAocGVycDF5ICogb3V0ZXJXZWlnaHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSAvKiBhcmMgaXMgaW5zaWRlICovXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2ZXJ0cy5wdXNoKHgxIC0gKHBlcnB4ICogaW5uZXJXZWlnaHQpLCB5MSAtIChwZXJweSAqIGlubmVyV2VpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2gob214LCBvbXkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Q291bnQgKz0gcm91bmQoXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSwgeTEsXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSAtIChwZXJweCAqIGlubmVyV2VpZ2h0KSwgeTEgLSAocGVycHkgKiBpbm5lcldlaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSAtIChwZXJwMXggKiBpbm5lcldlaWdodCksIHkxIC0gKHBlcnAxeSAqIGlubmVyV2VpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRzLCBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApICsgNDtcblxuICAgICAgICAgICAgICAgICAgICB2ZXJ0cy5wdXNoKHgxIC0gKHBlcnAxeCAqIGlubmVyV2VpZ2h0KSwgeTEgLSAocGVycDF5ICogaW5uZXJXZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgdmVydHMucHVzaChvbXgsIG9teSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZlcnRzLnB1c2goaW14LCBpbXkpO1xuICAgICAgICAgICAgICAgIHZlcnRzLnB1c2gob214LCBvbXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgLy8gaW5zaWRlIG1pdGVyIGlzIE5PVCBva1xuICAgICAgICB7XG4gICAgICAgICAgICB2ZXJ0cy5wdXNoKHgxIC0gKHBlcnB4ICogaW5uZXJXZWlnaHQpLCB5MSAtIChwZXJweSAqIGlubmVyV2VpZ2h0KSk7IC8vIGZpcnN0IHNlZ21lbnQncyBpbm5lciB2ZXJ0ZXhcbiAgICAgICAgICAgIHZlcnRzLnB1c2goeDEgKyAocGVycHggKiBvdXRlcldlaWdodCksIHkxICsgKHBlcnB5ICogb3V0ZXJXZWlnaHQpKTsgLy8gZmlyc3Qgc2VnbWVudCdzIG91dGVyIHZlcnRleFxuICAgICAgICAgICAgaWYgKHN0eWxlLmpvaW4gPT09IExJTkVfSk9JTi5CRVZFTCB8fCBwZGlzdCAvIHdpZHRoU3F1YXJlZCA+IG1pdGVyTGltaXRTcXVhcmVkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgbmVlZGVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzdHlsZS5qb2luID09PSBMSU5FX0pPSU4uUk9VTkQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGNsb2Nrd2lzZSkgLyogYXJjIGlzIG91dHNpZGUgKi9cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Q291bnQgKz0gcm91bmQoXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSwgeTEsXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSArIChwZXJweCAqIG91dGVyV2VpZ2h0KSwgeTEgKyAocGVycHkgKiBvdXRlcldlaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSArIChwZXJwMXggKiBvdXRlcldlaWdodCksIHkxICsgKHBlcnAxeSAqIG91dGVyV2VpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRzLCB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkgKyAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIC8qIGFyYyBpcyBpbnNpZGUgKi9cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Q291bnQgKz0gcm91bmQoXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSwgeTEsXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSAtIChwZXJweCAqIGlubmVyV2VpZ2h0KSwgeTEgLSAocGVycHkgKiBpbm5lcldlaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSAtIChwZXJwMXggKiBpbm5lcldlaWdodCksIHkxIC0gKHBlcnAxeSAqIGlubmVyV2VpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRzLCBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApICsgMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGNsb2Nrd2lzZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2gob214LCBvbXkpOyAvLyBpbm5lciBtaXRlciBwb2ludFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0cy5wdXNoKG9teCwgb215KTsgLy8gaW5uZXIgbWl0ZXIgcG9pbnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmVydHMucHVzaChpbXgsIGlteSk7IC8vIG91dGVyIG1pdGVyIHBvaW50XG4gICAgICAgICAgICAgICAgICAgIHZlcnRzLnB1c2goaW14LCBpbXkpOyAvLyBvdXRlciBtaXRlciBwb2ludFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRleENvdW50ICs9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2ZXJ0cy5wdXNoKHgxIC0gKHBlcnAxeCAqIGlubmVyV2VpZ2h0KSwgeTEgLSAocGVycDF5ICogaW5uZXJXZWlnaHQpKTsgLy8gc2Vjb25kIHNlZ21lbnQncyBpbm5lciB2ZXJ0ZXhcbiAgICAgICAgICAgIHZlcnRzLnB1c2goeDEgKyAocGVycDF4ICogb3V0ZXJXZWlnaHQpLCB5MSArIChwZXJwMXkgKiBvdXRlcldlaWdodCkpOyAvLyBzZWNvbmQgc2VnbWVudCdzIG91dGVyIHZlcnRleFxuICAgICAgICAgICAgaW5kZXhDb3VudCArPSAyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgeDAgPSBwb2ludHNbKGxlbmd0aCAtIDIpICogMl07XG4gICAgeTAgPSBwb2ludHNbKChsZW5ndGggLSAyKSAqIDIpICsgMV07XG5cbiAgICB4MSA9IHBvaW50c1sobGVuZ3RoIC0gMSkgKiAyXTtcbiAgICB5MSA9IHBvaW50c1soKGxlbmd0aCAtIDEpICogMikgKyAxXTtcblxuICAgIHBlcnB4ID0gLSh5MCAtIHkxKTtcbiAgICBwZXJweSA9IHgwIC0geDE7XG5cbiAgICBkaXN0ID0gTWF0aC5zcXJ0KChwZXJweCAqIHBlcnB4KSArIChwZXJweSAqIHBlcnB5KSk7XG4gICAgcGVycHggLz0gZGlzdDtcbiAgICBwZXJweSAvPSBkaXN0O1xuICAgIHBlcnB4ICo9IHdpZHRoO1xuICAgIHBlcnB5ICo9IHdpZHRoO1xuXG4gICAgdmVydHMucHVzaCh4MSAtIChwZXJweCAqIGlubmVyV2VpZ2h0KSwgeTEgLSAocGVycHkgKiBpbm5lcldlaWdodCkpO1xuICAgIHZlcnRzLnB1c2goeDEgKyAocGVycHggKiBvdXRlcldlaWdodCksIHkxICsgKHBlcnB5ICogb3V0ZXJXZWlnaHQpKTtcblxuICAgIGlmICghY2xvc2VkU2hhcGUpXG4gICAge1xuICAgICAgICBpZiAoc3R5bGUuY2FwID09PSBMSU5FX0NBUC5ST1VORClcbiAgICAgICAge1xuICAgICAgICAgICAgaW5kZXhDb3VudCArPSByb3VuZChcbiAgICAgICAgICAgICAgICB4MSAtIChwZXJweCAqIChpbm5lcldlaWdodCAtIG91dGVyV2VpZ2h0KSAqIDAuNSksXG4gICAgICAgICAgICAgICAgeTEgLSAocGVycHkgKiAoaW5uZXJXZWlnaHQgLSBvdXRlcldlaWdodCkgKiAwLjUpLFxuICAgICAgICAgICAgICAgIHgxIC0gKHBlcnB4ICogaW5uZXJXZWlnaHQpLFxuICAgICAgICAgICAgICAgIHkxIC0gKHBlcnB5ICogaW5uZXJXZWlnaHQpLFxuICAgICAgICAgICAgICAgIHgxICsgKHBlcnB4ICogb3V0ZXJXZWlnaHQpLFxuICAgICAgICAgICAgICAgIHkxICsgKHBlcnB5ICogb3V0ZXJXZWlnaHQpLFxuICAgICAgICAgICAgICAgIHZlcnRzLFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApICsgMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdHlsZS5jYXAgPT09IExJTkVfQ0FQLlNRVUFSRSlcbiAgICAgICAge1xuICAgICAgICAgICAgaW5kZXhDb3VudCArPSBzcXVhcmUoeDEsIHkxLCBwZXJweCwgcGVycHksIGlubmVyV2VpZ2h0LCBvdXRlcldlaWdodCwgZmFsc2UsIHZlcnRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGluZGljZXMgPSBncmFwaGljc0dlb21ldHJ5LmluZGljZXM7XG4gICAgY29uc3QgZXBzMiA9IEdSQVBISUNTX0NVUlZFUy5lcHNpbG9uICogR1JBUEhJQ1NfQ1VSVkVTLmVwc2lsb247XG5cbiAgICAvLyBpbmRpY2VzLnB1c2goaW5kZXhTdGFydCk7XG4gICAgZm9yIChsZXQgaSA9IGluZGV4U3RhcnQ7IGkgPCBpbmRleENvdW50ICsgaW5kZXhTdGFydCAtIDI7ICsraSlcbiAgICB7XG4gICAgICAgIHgwID0gdmVydHNbKGkgKiAyKV07XG4gICAgICAgIHkwID0gdmVydHNbKGkgKiAyKSArIDFdO1xuXG4gICAgICAgIHgxID0gdmVydHNbKGkgKyAxKSAqIDJdO1xuICAgICAgICB5MSA9IHZlcnRzWygoaSArIDEpICogMikgKyAxXTtcblxuICAgICAgICB4MiA9IHZlcnRzWyhpICsgMikgKiAyXTtcbiAgICAgICAgeTIgPSB2ZXJ0c1soKGkgKyAyKSAqIDIpICsgMV07XG5cbiAgICAgICAgLyogU2tpcCB6ZXJvIGFyZWEgdHJpYW5nbGVzICovXG4gICAgICAgIGlmIChNYXRoLmFicygoeDAgKiAoeTEgLSB5MikpICsgKHgxICogKHkyIC0geTApKSArICh4MiAqICh5MCAtIHkxKSkpIDwgZXBzMilcbiAgICAgICAge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpbmRpY2VzLnB1c2goaSwgaSArIDEsIGkgKyAyKTtcbiAgICB9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgbGluZSB0byBkcmF3IHVzaW5nIHRoZSBnbC5kcmF3QXJyYXlzKGdsLkxJTkVTKSBtZXRob2RcbiAqXG4gKiBJZ25vcmVkIGZyb20gZG9jcyBzaW5jZSBpdCBpcyBub3QgZGlyZWN0bHkgZXhwb3NlZC5cbiAqXG4gKiBAaWdub3JlXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtQSVhJLkdyYXBoaWNzRGF0YX0gZ3JhcGhpY3NEYXRhIC0gVGhlIGdyYXBoaWNzIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgbmVjZXNzYXJ5IHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7UElYSS5HcmFwaGljc0dlb21ldHJ5fSBncmFwaGljc0dlb21ldHJ5IC0gR2VvbWV0cnkgd2hlcmUgdG8gYXBwZW5kIG91dHB1dFxuICovXG5mdW5jdGlvbiBidWlsZE5hdGl2ZUxpbmUoZ3JhcGhpY3NEYXRhOiBHcmFwaGljc0RhdGEsIGdyYXBoaWNzR2VvbWV0cnk6IEdyYXBoaWNzR2VvbWV0cnkpOiB2b2lkXG57XG4gICAgbGV0IGkgPSAwO1xuXG4gICAgY29uc3Qgc2hhcGUgPSBncmFwaGljc0RhdGEuc2hhcGUgYXMgUG9seWdvbjtcbiAgICBjb25zdCBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzIHx8IHNoYXBlLnBvaW50cztcbiAgICBjb25zdCBjbG9zZWRTaGFwZSA9IHNoYXBlLnR5cGUgIT09IFNIQVBFUy5QT0xZIHx8IHNoYXBlLmNsb3NlU3Ryb2tlO1xuXG4gICAgaWYgKHBvaW50cy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIGNvbnN0IHZlcnRzID0gZ3JhcGhpY3NHZW9tZXRyeS5wb2ludHM7XG4gICAgY29uc3QgaW5kaWNlcyA9IGdyYXBoaWNzR2VvbWV0cnkuaW5kaWNlcztcbiAgICBjb25zdCBsZW5ndGggPSBwb2ludHMubGVuZ3RoIC8gMjtcblxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSB2ZXJ0cy5sZW5ndGggLyAyO1xuICAgIGxldCBjdXJyZW50SW5kZXggPSBzdGFydEluZGV4O1xuXG4gICAgdmVydHMucHVzaChwb2ludHNbMF0sIHBvaW50c1sxXSk7XG5cbiAgICBmb3IgKGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspXG4gICAge1xuICAgICAgICB2ZXJ0cy5wdXNoKHBvaW50c1tpICogMl0sIHBvaW50c1soaSAqIDIpICsgMV0pO1xuICAgICAgICBpbmRpY2VzLnB1c2goY3VycmVudEluZGV4LCBjdXJyZW50SW5kZXggKyAxKTtcblxuICAgICAgICBjdXJyZW50SW5kZXgrKztcbiAgICB9XG5cbiAgICBpZiAoY2xvc2VkU2hhcGUpXG4gICAge1xuICAgICAgICBpbmRpY2VzLnB1c2goY3VycmVudEluZGV4LCBzdGFydEluZGV4KTtcbiAgICB9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgbGluZSB0byBkcmF3XG4gKlxuICogSWdub3JlZCBmcm9tIGRvY3Mgc2luY2UgaXQgaXMgbm90IGRpcmVjdGx5IGV4cG9zZWQuXG4gKlxuICogQGlnbm9yZVxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5HcmFwaGljc0RhdGF9IGdyYXBoaWNzRGF0YSAtIFRoZSBncmFwaGljcyBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIG5lY2Vzc2FyeSBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge1BJWEkuR3JhcGhpY3NHZW9tZXRyeX0gZ3JhcGhpY3NHZW9tZXRyeSAtIEdlb21ldHJ5IHdoZXJlIHRvIGFwcGVuZCBvdXRwdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTGluZShncmFwaGljc0RhdGE6IEdyYXBoaWNzRGF0YSwgZ3JhcGhpY3NHZW9tZXRyeTogR3JhcGhpY3NHZW9tZXRyeSk6IHZvaWRcbntcbiAgICBpZiAoZ3JhcGhpY3NEYXRhLmxpbmVTdHlsZS5uYXRpdmUpXG4gICAge1xuICAgICAgICBidWlsZE5hdGl2ZUxpbmUoZ3JhcGhpY3NEYXRhLCBncmFwaGljc0dlb21ldHJ5KTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgYnVpbGROb25OYXRpdmVMaW5lKGdyYXBoaWNzRGF0YSwgZ3JhcGhpY3NHZW9tZXRyeSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFBvbHlnb24sIFBJXzIgfSBmcm9tICdAcGl4aS9tYXRoJztcblxuLyoqXG4gKiBEcmF3IGEgc3RhciBzaGFwZSB3aXRoIGFuIGFyYml0cmFyeSBudW1iZXIgb2YgcG9pbnRzLlxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5Qb2x5Z29uXG4gKiBAbWVtYmVyb2YgUElYSS5ncmFwaGljc1V0aWxzXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIENlbnRlciBYIHBvc2l0aW9uIG9mIHRoZSBzdGFyXG4gKiBAcGFyYW0ge251bWJlcn0geSAtIENlbnRlciBZIHBvc2l0aW9uIG9mIHRoZSBzdGFyXG4gKiBAcGFyYW0ge251bWJlcn0gcG9pbnRzIC0gVGhlIG51bWJlciBvZiBwb2ludHMgb2YgdGhlIHN0YXIsIG11c3QgYmUgPiAxXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gVGhlIG91dGVyIHJhZGl1cyBvZiB0aGUgc3RhclxuICogQHBhcmFtIHtudW1iZXJ9IFtpbm5lclJhZGl1c10gLSBUaGUgaW5uZXIgcmFkaXVzIGJldHdlZW4gcG9pbnRzLCBkZWZhdWx0IGhhbGYgYHJhZGl1c2BcbiAqIEBwYXJhbSB7bnVtYmVyfSBbcm90YXRpb249MF0gLSBUaGUgcm90YXRpb24gb2YgdGhlIHN0YXIgaW4gcmFkaWFucywgd2hlcmUgMCBpcyB2ZXJ0aWNhbFxuICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICovXG5leHBvcnQgY2xhc3MgU3RhciBleHRlbmRzIFBvbHlnb25cbntcbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgcG9pbnRzOiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBpbm5lclJhZGl1czogbnVtYmVyLCByb3RhdGlvbiA9IDApXG4gICAge1xuICAgICAgICBpbm5lclJhZGl1cyA9IGlubmVyUmFkaXVzIHx8IHJhZGl1cyAvIDI7XG5cbiAgICAgICAgY29uc3Qgc3RhcnRBbmdsZSA9ICgtMSAqIE1hdGguUEkgLyAyKSArIHJvdGF0aW9uO1xuICAgICAgICBjb25zdCBsZW4gPSBwb2ludHMgKiAyO1xuICAgICAgICBjb25zdCBkZWx0YSA9IFBJXzIgLyBsZW47XG4gICAgICAgIGNvbnN0IHBvbHlnb24gPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCByID0gaSAlIDIgPyBpbm5lclJhZGl1cyA6IHJhZGl1cztcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gKGkgKiBkZWx0YSkgKyBzdGFydEFuZ2xlO1xuXG4gICAgICAgICAgICBwb2x5Z29uLnB1c2goXG4gICAgICAgICAgICAgICAgeCArIChyICogTWF0aC5jb3MoYW5nbGUpKSxcbiAgICAgICAgICAgICAgICB5ICsgKHIgKiBNYXRoLnNpbihhbmdsZSkpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIocG9seWdvbik7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEdSQVBISUNTX0NVUlZFUyB9IGZyb20gJy4uL2NvbnN0JztcbmltcG9ydCB7IFBJXzIgfSBmcm9tICdAcGl4aS9tYXRoJztcblxuaW50ZXJmYWNlIElBcmNMaWtlU2hhcGUge1xuICAgIGN4OiBudW1iZXI7XG4gICAgY3k6IG51bWJlcjtcbiAgICByYWRpdXM6IG51bWJlcjtcbiAgICBzdGFydEFuZ2xlOiBudW1iZXI7XG4gICAgZW5kQW5nbGU6IG51bWJlcjtcbiAgICBhbnRpY2xvY2t3aXNlOiBib29sZWFuO1xufVxuXG4vKipcbiAqIFV0aWxpdGllcyBmb3IgYXJjIGN1cnZlc1xuICogQGNsYXNzXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgQXJjVXRpbHNcbntcbiAgICAvKipcbiAgICAgKiBUaGUgYXJjVG8oKSBtZXRob2QgY3JlYXRlcyBhbiBhcmMvY3VydmUgYmV0d2VlbiB0d28gdGFuZ2VudHMgb24gdGhlIGNhbnZhcy5cbiAgICAgKlxuICAgICAqIFwiYm9ycm93ZWRcIiBmcm9tIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvZnhjYW52YXMvIC0gdGhhbmtzIGdvb2dsZSFcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgxIC0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcmNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTEgLSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFyY1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MiAtIFRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIGVuZCBvZiB0aGUgYXJjXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkyIC0gVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgZW5kIG9mIHRoZSBhcmNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gVGhlIHJhZGl1cyBvZiB0aGUgYXJjXG4gICAgICogQHJldHVybiB7b2JqZWN0fSBJZiB0aGUgYXJjIGxlbmd0aCBpcyB2YWxpZCwgcmV0dXJuIGNlbnRlciBvZiBjaXJjbGUsIHJhZGl1cyBhbmQgb3RoZXIgaW5mbyBvdGhlcndpc2UgYG51bGxgLlxuICAgICAqL1xuICAgIHN0YXRpYyBjdXJ2ZVRvKHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBwb2ludHM6IEFycmF5PG51bWJlcj4pOiBJQXJjTGlrZVNoYXBlXG4gICAge1xuICAgICAgICBjb25zdCBmcm9tWCA9IHBvaW50c1twb2ludHMubGVuZ3RoIC0gMl07XG4gICAgICAgIGNvbnN0IGZyb21ZID0gcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXTtcblxuICAgICAgICBjb25zdCBhMSA9IGZyb21ZIC0geTE7XG4gICAgICAgIGNvbnN0IGIxID0gZnJvbVggLSB4MTtcbiAgICAgICAgY29uc3QgYTIgPSB5MiAtIHkxO1xuICAgICAgICBjb25zdCBiMiA9IHgyIC0geDE7XG4gICAgICAgIGNvbnN0IG1tID0gTWF0aC5hYnMoKGExICogYjIpIC0gKGIxICogYTIpKTtcblxuICAgICAgICBpZiAobW0gPCAxLjBlLTggfHwgcmFkaXVzID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAocG9pbnRzW3BvaW50cy5sZW5ndGggLSAyXSAhPT0geDEgfHwgcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXSAhPT0geTEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goeDEsIHkxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZCA9IChhMSAqIGExKSArIChiMSAqIGIxKTtcbiAgICAgICAgY29uc3QgY2MgPSAoYTIgKiBhMikgKyAoYjIgKiBiMik7XG4gICAgICAgIGNvbnN0IHR0ID0gKGExICogYTIpICsgKGIxICogYjIpO1xuICAgICAgICBjb25zdCBrMSA9IHJhZGl1cyAqIE1hdGguc3FydChkZCkgLyBtbTtcbiAgICAgICAgY29uc3QgazIgPSByYWRpdXMgKiBNYXRoLnNxcnQoY2MpIC8gbW07XG4gICAgICAgIGNvbnN0IGoxID0gazEgKiB0dCAvIGRkO1xuICAgICAgICBjb25zdCBqMiA9IGsyICogdHQgLyBjYztcbiAgICAgICAgY29uc3QgY3ggPSAoazEgKiBiMikgKyAoazIgKiBiMSk7XG4gICAgICAgIGNvbnN0IGN5ID0gKGsxICogYTIpICsgKGsyICogYTEpO1xuICAgICAgICBjb25zdCBweCA9IGIxICogKGsyICsgajEpO1xuICAgICAgICBjb25zdCBweSA9IGExICogKGsyICsgajEpO1xuICAgICAgICBjb25zdCBxeCA9IGIyICogKGsxICsgajIpO1xuICAgICAgICBjb25zdCBxeSA9IGEyICogKGsxICsgajIpO1xuICAgICAgICBjb25zdCBzdGFydEFuZ2xlID0gTWF0aC5hdGFuMihweSAtIGN5LCBweCAtIGN4KTtcbiAgICAgICAgY29uc3QgZW5kQW5nbGUgPSBNYXRoLmF0YW4yKHF5IC0gY3ksIHF4IC0gY3gpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjeDogKGN4ICsgeDEpLFxuICAgICAgICAgICAgY3k6IChjeSArIHkxKSxcbiAgICAgICAgICAgIHJhZGl1cyxcbiAgICAgICAgICAgIHN0YXJ0QW5nbGUsXG4gICAgICAgICAgICBlbmRBbmdsZSxcbiAgICAgICAgICAgIGFudGljbG9ja3dpc2U6IChiMSAqIGEyID4gYjIgKiBhMSksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICAgIC8qKlxuICAgICAqIFRoZSBhcmMgbWV0aG9kIGNyZWF0ZXMgYW4gYXJjL2N1cnZlICh1c2VkIHRvIGNyZWF0ZSBjaXJjbGVzLCBvciBwYXJ0cyBvZiBjaXJjbGVzKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WCAtIFN0YXJ0IHggbG9jYXRpb24gb2YgYXJjXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WSAtIFN0YXJ0IHkgbG9jYXRpb24gb2YgYXJjXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGN4IC0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY3kgLSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBUaGUgcmFkaXVzIG9mIHRoZSBjaXJjbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRBbmdsZSAtIFRoZSBzdGFydGluZyBhbmdsZSwgaW4gcmFkaWFucyAoMCBpcyBhdCB0aGUgMyBvJ2Nsb2NrIHBvc2l0aW9uXG4gICAgICogIG9mIHRoZSBhcmMncyBjaXJjbGUpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZEFuZ2xlIC0gVGhlIGVuZGluZyBhbmdsZSwgaW4gcmFkaWFuc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYW50aWNsb2Nrd2lzZSAtIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBkcmF3aW5nIHNob3VsZCBiZVxuICAgICAqICBjb3VudGVyLWNsb2Nrd2lzZSBvciBjbG9ja3dpc2UuIEZhbHNlIGlzIGRlZmF1bHQsIGFuZCBpbmRpY2F0ZXMgY2xvY2t3aXNlLCB3aGlsZSB0cnVlXG4gICAgICogIGluZGljYXRlcyBjb3VudGVyLWNsb2Nrd2lzZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBwb2ludHMgLSBDb2xsZWN0aW9uIG9mIHBvaW50cyB0byBhZGQgdG9cbiAgICAgKi9cbiAgICBzdGF0aWMgYXJjKF9zdGFydFg6IG51bWJlciwgX3N0YXJ0WTogbnVtYmVyLCBjeDogbnVtYmVyLCBjeTogbnVtYmVyLCByYWRpdXM6IG51bWJlcixcbiAgICAgICAgc3RhcnRBbmdsZTogbnVtYmVyLCBlbmRBbmdsZTogbnVtYmVyLCBfYW50aWNsb2Nrd2lzZTogYm9vbGVhbiwgcG9pbnRzOiBBcnJheTxudW1iZXI+KTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3Qgc3dlZXAgPSBlbmRBbmdsZSAtIHN0YXJ0QW5nbGU7XG4gICAgICAgIGNvbnN0IG4gPSBHUkFQSElDU19DVVJWRVMuX3NlZ21lbnRzQ291bnQoXG4gICAgICAgICAgICBNYXRoLmFicyhzd2VlcCkgKiByYWRpdXMsXG4gICAgICAgICAgICBNYXRoLmNlaWwoTWF0aC5hYnMoc3dlZXApIC8gUElfMikgKiA0MFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHRoZXRhID0gKHN3ZWVwKSAvIChuICogMik7XG4gICAgICAgIGNvbnN0IHRoZXRhMiA9IHRoZXRhICogMjtcbiAgICAgICAgY29uc3QgY1RoZXRhID0gTWF0aC5jb3ModGhldGEpO1xuICAgICAgICBjb25zdCBzVGhldGEgPSBNYXRoLnNpbih0aGV0YSk7XG4gICAgICAgIGNvbnN0IHNlZ01pbnVzID0gbiAtIDE7XG4gICAgICAgIGNvbnN0IHJlbWFpbmRlciA9IChzZWdNaW51cyAlIDEpIC8gc2VnTWludXM7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc2VnTWludXM7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcmVhbCA9IGkgKyAocmVtYWluZGVyICogaSk7XG4gICAgICAgICAgICBjb25zdCBhbmdsZSA9ICgodGhldGEpICsgc3RhcnRBbmdsZSArICh0aGV0YTIgKiByZWFsKSk7XG4gICAgICAgICAgICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICAgICAgY29uc3QgcyA9IC1NYXRoLnNpbihhbmdsZSk7XG5cbiAgICAgICAgICAgIHBvaW50cy5wdXNoKFxuICAgICAgICAgICAgICAgICgoKGNUaGV0YSAqIGMpICsgKHNUaGV0YSAqIHMpKSAqIHJhZGl1cykgKyBjeCxcbiAgICAgICAgICAgICAgICAoKChjVGhldGEgKiAtcykgKyAoc1RoZXRhICogYykpICogcmFkaXVzKSArIGN5XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiAqL1xufVxuIiwgImltcG9ydCB7IEdSQVBISUNTX0NVUlZFUyB9IGZyb20gJy4uL2NvbnN0JztcblxuLyoqXG4gKiBVdGlsaXRpZXMgZm9yIGJlemllciBjdXJ2ZXNcbiAqIEBjbGFzc1xuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIEJlemllclV0aWxzXG57XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIGxlbmd0aCBvZiBiZXppZXIgY3VydmUuXG4gICAgICogQW5hbHl0aWNhbCBzb2x1dGlvbiBpcyBpbXBvc3NpYmxlLCBzaW5jZSBpdCBpbnZvbHZlcyBhbiBpbnRlZ3JhbCB0aGF0IGRvZXMgbm90IGludGVncmF0ZSBpbiBnZW5lcmFsLlxuICAgICAqIFRoZXJlZm9yZSBudW1lcmljYWwgc29sdXRpb24gaXMgdXNlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21YIC0gU3RhcnRpbmcgcG9pbnQgeFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tWSAtIFN0YXJ0aW5nIHBvaW50IHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY3BYIC0gQ29udHJvbCBwb2ludCB4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNwWSAtIENvbnRyb2wgcG9pbnQgeVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjcFgyIC0gU2Vjb25kIENvbnRyb2wgcG9pbnQgeFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjcFkyIC0gU2Vjb25kIENvbnRyb2wgcG9pbnQgeVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b1ggLSBEZXN0aW5hdGlvbiBwb2ludCB4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvWSAtIERlc3RpbmF0aW9uIHBvaW50IHlcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IExlbmd0aCBvZiBiZXppZXIgY3VydmVcbiAgICAgKi9cbiAgICBzdGF0aWMgY3VydmVMZW5ndGgoXG4gICAgICAgIGZyb21YOiBudW1iZXIsIGZyb21ZOiBudW1iZXIsXG4gICAgICAgIGNwWDogbnVtYmVyLCBjcFk6IG51bWJlcixcbiAgICAgICAgY3BYMjogbnVtYmVyLCBjcFkyOiBudW1iZXIsXG4gICAgICAgIHRvWDogbnVtYmVyLCB0b1k6IG51bWJlcik6IG51bWJlclxuICAgIHtcbiAgICAgICAgY29uc3QgbiA9IDEwO1xuICAgICAgICBsZXQgcmVzdWx0ID0gMC4wO1xuICAgICAgICBsZXQgdCA9IDAuMDtcbiAgICAgICAgbGV0IHQyID0gMC4wO1xuICAgICAgICBsZXQgdDMgPSAwLjA7XG4gICAgICAgIGxldCBudCA9IDAuMDtcbiAgICAgICAgbGV0IG50MiA9IDAuMDtcbiAgICAgICAgbGV0IG50MyA9IDAuMDtcbiAgICAgICAgbGV0IHggPSAwLjA7XG4gICAgICAgIGxldCB5ID0gMC4wO1xuICAgICAgICBsZXQgZHggPSAwLjA7XG4gICAgICAgIGxldCBkeSA9IDAuMDtcbiAgICAgICAgbGV0IHByZXZYID0gZnJvbVg7XG4gICAgICAgIGxldCBwcmV2WSA9IGZyb21ZO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IG47ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgdCA9IGkgLyBuO1xuICAgICAgICAgICAgdDIgPSB0ICogdDtcbiAgICAgICAgICAgIHQzID0gdDIgKiB0O1xuICAgICAgICAgICAgbnQgPSAoMS4wIC0gdCk7XG4gICAgICAgICAgICBudDIgPSBudCAqIG50O1xuICAgICAgICAgICAgbnQzID0gbnQyICogbnQ7XG5cbiAgICAgICAgICAgIHggPSAobnQzICogZnJvbVgpICsgKDMuMCAqIG50MiAqIHQgKiBjcFgpICsgKDMuMCAqIG50ICogdDIgKiBjcFgyKSArICh0MyAqIHRvWCk7XG4gICAgICAgICAgICB5ID0gKG50MyAqIGZyb21ZKSArICgzLjAgKiBudDIgKiB0ICogY3BZKSArICgzICogbnQgKiB0MiAqIGNwWTIpICsgKHQzICogdG9ZKTtcbiAgICAgICAgICAgIGR4ID0gcHJldlggLSB4O1xuICAgICAgICAgICAgZHkgPSBwcmV2WSAtIHk7XG4gICAgICAgICAgICBwcmV2WCA9IHg7XG4gICAgICAgICAgICBwcmV2WSA9IHk7XG5cbiAgICAgICAgICAgIHJlc3VsdCArPSBNYXRoLnNxcnQoKGR4ICogZHgpICsgKGR5ICogZHkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBwb2ludHMgZm9yIGEgYmV6aWVyIGN1cnZlIGFuZCB0aGVuIGRyYXdzIGl0LlxuICAgICAqXG4gICAgICogSWdub3JlZCBmcm9tIGRvY3Mgc2luY2UgaXQgaXMgbm90IGRpcmVjdGx5IGV4cG9zZWQuXG4gICAgICpcbiAgICAgKiBAaWdub3JlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNwWCAtIENvbnRyb2wgcG9pbnQgeFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjcFkgLSBDb250cm9sIHBvaW50IHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY3BYMiAtIFNlY29uZCBDb250cm9sIHBvaW50IHhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY3BZMiAtIFNlY29uZCBDb250cm9sIHBvaW50IHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9YIC0gRGVzdGluYXRpb24gcG9pbnQgeFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b1kgLSBEZXN0aW5hdGlvbiBwb2ludCB5XG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gcG9pbnRzIC0gUGF0aCBhcnJheSB0byBwdXNoIHBvaW50cyBpbnRvXG4gICAgICovXG4gICAgc3RhdGljIGN1cnZlVG8oXG4gICAgICAgIGNwWDogbnVtYmVyLCBjcFk6IG51bWJlcixcbiAgICAgICAgY3BYMjogbnVtYmVyLCBjcFkyOiBudW1iZXIsXG4gICAgICAgIHRvWDogbnVtYmVyLCB0b1k6IG51bWJlcixcbiAgICAgICAgcG9pbnRzOiBBcnJheTxudW1iZXI+KTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZnJvbVggPSBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDJdO1xuICAgICAgICBjb25zdCBmcm9tWSA9IHBvaW50c1twb2ludHMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgcG9pbnRzLmxlbmd0aCAtPSAyO1xuXG4gICAgICAgIGNvbnN0IG4gPSBHUkFQSElDU19DVVJWRVMuX3NlZ21lbnRzQ291bnQoXG4gICAgICAgICAgICBCZXppZXJVdGlscy5jdXJ2ZUxlbmd0aChmcm9tWCwgZnJvbVksIGNwWCwgY3BZLCBjcFgyLCBjcFkyLCB0b1gsIHRvWSlcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgZHQgPSAwO1xuICAgICAgICBsZXQgZHQyID0gMDtcbiAgICAgICAgbGV0IGR0MyA9IDA7XG4gICAgICAgIGxldCB0MiA9IDA7XG4gICAgICAgIGxldCB0MyA9IDA7XG5cbiAgICAgICAgcG9pbnRzLnB1c2goZnJvbVgsIGZyb21ZKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMSwgaiA9IDA7IGkgPD0gbjsgKytpKVxuICAgICAgICB7XG4gICAgICAgICAgICBqID0gaSAvIG47XG5cbiAgICAgICAgICAgIGR0ID0gKDEgLSBqKTtcbiAgICAgICAgICAgIGR0MiA9IGR0ICogZHQ7XG4gICAgICAgICAgICBkdDMgPSBkdDIgKiBkdDtcblxuICAgICAgICAgICAgdDIgPSBqICogajtcbiAgICAgICAgICAgIHQzID0gdDIgKiBqO1xuXG4gICAgICAgICAgICBwb2ludHMucHVzaChcbiAgICAgICAgICAgICAgICAoZHQzICogZnJvbVgpICsgKDMgKiBkdDIgKiBqICogY3BYKSArICgzICogZHQgKiB0MiAqIGNwWDIpICsgKHQzICogdG9YKSxcbiAgICAgICAgICAgICAgICAoZHQzICogZnJvbVkpICsgKDMgKiBkdDIgKiBqICogY3BZKSArICgzICogZHQgKiB0MiAqIGNwWTIpICsgKHQzICogdG9ZKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBHUkFQSElDU19DVVJWRVMgfSBmcm9tICcuLi9jb25zdCc7XG5cbi8qKlxuICogVXRpbGl0aWVzIGZvciBxdWFkcmF0aWMgY3VydmVzXG4gKiBAY2xhc3NcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWFkcmF0aWNVdGlsc1xue1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBsZW5ndGggb2YgcXVhZHJhdGljIGN1cnZlXG4gICAgICogQHNlZSB7QGxpbmsgaHR0cDovL3d3dy5tYWxjemFrLmxpbnV4cGwuY29tL2Jsb2cvcXVhZHJhdGljLWJlemllci1jdXJ2ZS1sZW5ndGgvfVxuICAgICAqIGZvciB0aGUgZGV0YWlsZWQgZXhwbGFuYXRpb24gb2YgbWF0aCBiZWhpbmQgdGhpcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21YIC0geC1jb29yZGluYXRlIG9mIGN1cnZlIHN0YXJ0IHBvaW50XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21ZIC0geS1jb29yZGluYXRlIG9mIGN1cnZlIHN0YXJ0IHBvaW50XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNwWCAtIHgtY29vcmRpbmF0ZSBvZiBjdXJ2ZSBjb250cm9sIHBvaW50XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNwWSAtIHktY29vcmRpbmF0ZSBvZiBjdXJ2ZSBjb250cm9sIHBvaW50XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvWCAtIHgtY29vcmRpbmF0ZSBvZiBjdXJ2ZSBlbmQgcG9pbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9ZIC0geS1jb29yZGluYXRlIG9mIGN1cnZlIGVuZCBwb2ludFxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTGVuZ3RoIG9mIHF1YWRyYXRpYyBjdXJ2ZVxuICAgICAqL1xuICAgIHN0YXRpYyBjdXJ2ZUxlbmd0aChcbiAgICAgICAgZnJvbVg6IG51bWJlciwgZnJvbVk6IG51bWJlcixcbiAgICAgICAgY3BYOiBudW1iZXIsIGNwWTogbnVtYmVyLFxuICAgICAgICB0b1g6IG51bWJlciwgdG9ZOiBudW1iZXIpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIGNvbnN0IGF4ID0gZnJvbVggLSAoMi4wICogY3BYKSArIHRvWDtcbiAgICAgICAgY29uc3QgYXkgPSBmcm9tWSAtICgyLjAgKiBjcFkpICsgdG9ZO1xuICAgICAgICBjb25zdCBieCA9ICgyLjAgKiBjcFgpIC0gKDIuMCAqIGZyb21YKTtcbiAgICAgICAgY29uc3QgYnkgPSAoMi4wICogY3BZKSAtICgyLjAgKiBmcm9tWSk7XG4gICAgICAgIGNvbnN0IGEgPSA0LjAgKiAoKGF4ICogYXgpICsgKGF5ICogYXkpKTtcbiAgICAgICAgY29uc3QgYiA9IDQuMCAqICgoYXggKiBieCkgKyAoYXkgKiBieSkpO1xuICAgICAgICBjb25zdCBjID0gKGJ4ICogYngpICsgKGJ5ICogYnkpO1xuXG4gICAgICAgIGNvbnN0IHMgPSAyLjAgKiBNYXRoLnNxcnQoYSArIGIgKyBjKTtcbiAgICAgICAgY29uc3QgYTIgPSBNYXRoLnNxcnQoYSk7XG4gICAgICAgIGNvbnN0IGEzMiA9IDIuMCAqIGEgKiBhMjtcbiAgICAgICAgY29uc3QgYzIgPSAyLjAgKiBNYXRoLnNxcnQoYyk7XG4gICAgICAgIGNvbnN0IGJhID0gYiAvIGEyO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAoYTMyICogcylcbiAgICAgICAgICAgICAgICArIChhMiAqIGIgKiAocyAtIGMyKSlcbiAgICAgICAgICAgICAgICArIChcbiAgICAgICAgICAgICAgICAgICAgKCg0LjAgKiBjICogYSkgLSAoYiAqIGIpKVxuICAgICAgICAgICAgICAgICAgICogTWF0aC5sb2coKCgyLjAgKiBhMikgKyBiYSArIHMpIC8gKGJhICsgYzIpKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgKSAvICg0LjAgKiBhMzIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgcG9pbnRzIGZvciBhIHF1YWRyYXRpYyBiZXppZXIgY3VydmUgYW5kIHRoZW4gZHJhd3MgaXQuXG4gICAgICogQmFzZWQgb246IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NTA5Ny9ob3ctZG8taS1pbXBsZW1lbnQtYS1iZXppZXItY3VydmUtaW4tY1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY3BYIC0gQ29udHJvbCBwb2ludCB4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNwWSAtIENvbnRyb2wgcG9pbnQgeVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b1ggLSBEZXN0aW5hdGlvbiBwb2ludCB4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvWSAtIERlc3RpbmF0aW9uIHBvaW50IHlcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBwb2ludHMgLSBQb2ludHMgdG8gYWRkIHNlZ21lbnRzIHRvLlxuICAgICAqL1xuICAgIHN0YXRpYyBjdXJ2ZVRvKGNwWDogbnVtYmVyLCBjcFk6IG51bWJlciwgdG9YOiBudW1iZXIsIHRvWTogbnVtYmVyLCBwb2ludHM6IEFycmF5PG51bWJlcj4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBmcm9tWCA9IHBvaW50c1twb2ludHMubGVuZ3RoIC0gMl07XG4gICAgICAgIGNvbnN0IGZyb21ZID0gcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXTtcblxuICAgICAgICBjb25zdCBuID0gR1JBUEhJQ1NfQ1VSVkVTLl9zZWdtZW50c0NvdW50KFxuICAgICAgICAgICAgUXVhZHJhdGljVXRpbHMuY3VydmVMZW5ndGgoZnJvbVgsIGZyb21ZLCBjcFgsIGNwWSwgdG9YLCB0b1kpXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IHhhID0gMDtcbiAgICAgICAgbGV0IHlhID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBuOyArK2kpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGogPSBpIC8gbjtcblxuICAgICAgICAgICAgeGEgPSBmcm9tWCArICgoY3BYIC0gZnJvbVgpICogaik7XG4gICAgICAgICAgICB5YSA9IGZyb21ZICsgKChjcFkgLSBmcm9tWSkgKiBqKTtcblxuICAgICAgICAgICAgcG9pbnRzLnB1c2goeGEgKyAoKChjcFggKyAoKHRvWCAtIGNwWCkgKiBqKSkgLSB4YSkgKiBqKSxcbiAgICAgICAgICAgICAgICB5YSArICgoKGNwWSArICgodG9ZIC0gY3BZKSAqIGopKSAtIHlhKSAqIGopKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgdHlwZSB7IExpbmVTdHlsZSB9IGZyb20gJy4uL3N0eWxlcy9MaW5lU3R5bGUnO1xuaW1wb3J0IHR5cGUgeyBGaWxsU3R5bGUgfSBmcm9tICcuLi9zdHlsZXMvRmlsbFN0eWxlJztcblxuLyoqXG4gKiBBIHN0cnVjdHVyZSB0byBob2xkIGludGVyaW0gYmF0Y2ggb2JqZWN0cyBmb3IgR3JhcGhpY3MuXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJLmdyYXBoaWNzVXRpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIEJhdGNoUGFydFxue1xuICAgIHB1YmxpYyBzdHlsZTogTGluZVN0eWxlIHwgRmlsbFN0eWxlO1xuICAgIHB1YmxpYyBzdGFydDogbnVtYmVyO1xuICAgIHB1YmxpYyBzaXplOiBudW1iZXI7XG4gICAgcHVibGljIGF0dHJpYlN0YXJ0OiBudW1iZXI7XG4gICAgcHVibGljIGF0dHJpYlNpemU6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCZWdpbiBiYXRjaCBwYXJ0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRmlsbFN0eWxlIHwgUElYSS5MaW5lU3R5bGV9IHN0eWxlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0SW5kZXhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXR0cmliU3RhcnRcbiAgICAgKi9cbiAgICBwdWJsaWMgYmVnaW4oc3R5bGU6IExpbmVTdHlsZSB8IEZpbGxTdHlsZSwgc3RhcnRJbmRleDogbnVtYmVyLCBhdHRyaWJTdGFydDogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB0aGlzLnN0eWxlID0gc3R5bGU7XG4gICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydEluZGV4O1xuICAgICAgICB0aGlzLmF0dHJpYlN0YXJ0ID0gYXR0cmliU3RhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5kIGJhdGNoIHBhcnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRJbmRleFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRBdHRyaWJcbiAgICAgKi9cbiAgICBwdWJsaWMgZW5kKGVuZEluZGV4OiBudW1iZXIsIGVuZEF0dHJpYjogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5hdHRyaWJTaXplID0gZW5kQXR0cmliIC0gdGhpcy5hdHRyaWJTdGFydDtcbiAgICAgICAgdGhpcy5zaXplID0gZW5kSW5kZXggLSB0aGlzLnN0YXJ0O1xuICAgIH1cblxuICAgIHB1YmxpYyByZXNldCgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnN0eWxlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICAgICAgdGhpcy5zdGFydCA9IDA7XG4gICAgICAgIHRoaXMuYXR0cmliU3RhcnQgPSAwO1xuICAgICAgICB0aGlzLmF0dHJpYlNpemUgPSAwO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIEdlbmVyYWxpemVkIGNvbnZlbmllbmNlIHV0aWxpdGllcyBmb3IgR3JhcGhpY3MuXG4gKlxuICogQG5hbWVzcGFjZSBncmFwaGljc1V0aWxzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5cbmltcG9ydCB7IGJ1aWxkUG9seSB9IGZyb20gJy4vYnVpbGRQb2x5JztcbmV4cG9ydCB7IGJ1aWxkUG9seSB9O1xuXG5pbXBvcnQgeyBidWlsZENpcmNsZSB9IGZyb20gJy4vYnVpbGRDaXJjbGUnO1xuZXhwb3J0IHsgYnVpbGRDaXJjbGUgfTtcblxuaW1wb3J0IHsgYnVpbGRSZWN0YW5nbGUgfSBmcm9tICcuL2J1aWxkUmVjdGFuZ2xlJztcbmV4cG9ydCB7IGJ1aWxkUmVjdGFuZ2xlIH07XG5cbmltcG9ydCB7IGJ1aWxkUm91bmRlZFJlY3RhbmdsZSB9IGZyb20gJy4vYnVpbGRSb3VuZGVkUmVjdGFuZ2xlJztcbmV4cG9ydCB7IGJ1aWxkUm91bmRlZFJlY3RhbmdsZSB9O1xuXG5leHBvcnQgKiBmcm9tICcuL2J1aWxkTGluZSc7XG5leHBvcnQgKiBmcm9tICcuL1N0YXInO1xuZXhwb3J0ICogZnJvbSAnLi9BcmNVdGlscyc7XG5leHBvcnQgKiBmcm9tICcuL0JlemllclV0aWxzJztcbmV4cG9ydCAqIGZyb20gJy4vUXVhZHJhdGljVXRpbHMnO1xuZXhwb3J0ICogZnJvbSAnLi9CYXRjaFBhcnQnO1xuXG4vLyBmb3IgdHlwZSBvbmx5XG5pbXBvcnQgeyBCYXRjaFBhcnQgfSBmcm9tICcuL0JhdGNoUGFydCc7XG5pbXBvcnQgeyBTSEFQRVMgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB7IEJhdGNoRHJhd0NhbGwgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB7IElTaGFwZUJ1aWxkQ29tbWFuZCB9IGZyb20gJy4vSVNoYXBlQnVpbGRDb21tYW5kJztcblxuLyoqXG4gKiBNYXAgb2YgZmlsbCBjb21tYW5kcyBmb3IgZWFjaCBzaGFwZSB0eXBlLlxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLmdyYXBoaWNzVXRpbHNcbiAqIEBtZW1iZXIge09iamVjdH0gRklMTF9DT01NQU5EU1xuICovXG5leHBvcnQgY29uc3QgRklMTF9DT01NQU5EUzogUmVjb3JkPFNIQVBFUywgSVNoYXBlQnVpbGRDb21tYW5kPiA9IHtcbiAgICBbU0hBUEVTLlBPTFldOiBidWlsZFBvbHksXG4gICAgW1NIQVBFUy5DSVJDXTogYnVpbGRDaXJjbGUsXG4gICAgW1NIQVBFUy5FTElQXTogYnVpbGRDaXJjbGUsXG4gICAgW1NIQVBFUy5SRUNUXTogYnVpbGRSZWN0YW5nbGUsXG4gICAgW1NIQVBFUy5SUkVDXTogYnVpbGRSb3VuZGVkUmVjdGFuZ2xlLFxufTtcblxuLyoqXG4gKiBCYXRjaCBwb29sLCBzdG9yZXMgdW51c2VkIGJhdGNoZXMgZm9yIHByZXZlbnRpbmcgYWxsb2NhdGlvbnMuXG4gKlxuICogQG1lbWJlcm9mIFBJWEkuZ3JhcGhpY3NVdGlsc1xuICogQG1lbWJlciB7QXJyYXk8UElYSS5ncmFwaGljc1V0aWxzLkJhdGNoUGFydD59IEJBVENIX1BPT0xcbiAqL1xuZXhwb3J0IGNvbnN0IEJBVENIX1BPT0w6IEFycmF5PEJhdGNoUGFydD4gPSBbXTtcblxuLyoqXG4gKiBEcmF3IGNhbGwgcG9vbCwgc3RvcmVzIHVudXNlZCBkcmF3IGNhbGxzIGZvciBwcmV2ZW50aW5nIGFsbG9jYXRpb25zLlxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLmdyYXBoaWNzVXRpbHNcbiAqIEBtZW1iZXIge0FycmF5PFBJWEkuQmF0Y2hEcmF3Q2FsbD59IERSQVdfQ0FMTF9QT09MXG4gKi9cbmV4cG9ydCBjb25zdCBEUkFXX0NBTExfUE9PTDogQXJyYXk8QmF0Y2hEcmF3Q2FsbD4gPSBbXTtcbiIsICJpbXBvcnQgdHlwZSB7IE1hdHJpeCwgU0hBUEVTLCBJU2hhcGUgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB0eXBlIHsgRmlsbFN0eWxlIH0gZnJvbSAnLi9zdHlsZXMvRmlsbFN0eWxlJztcbmltcG9ydCB0eXBlIHsgTGluZVN0eWxlIH0gZnJvbSAnLi9zdHlsZXMvTGluZVN0eWxlJztcblxuLyoqXG4gKiBBIGNsYXNzIHRvIGNvbnRhaW4gZGF0YSB1c2VmdWwgZm9yIEdyYXBoaWNzIG9iamVjdHNcbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBHcmFwaGljc0RhdGFcbntcbiAgICBzaGFwZTogSVNoYXBlO1xuICAgIGxpbmVTdHlsZTogTGluZVN0eWxlO1xuICAgIGZpbGxTdHlsZTogRmlsbFN0eWxlO1xuICAgIG1hdHJpeDogTWF0cml4O1xuICAgIHR5cGU6IFNIQVBFUztcbiAgICBwb2ludHM6IG51bWJlcltdO1xuICAgIGhvbGVzOiBBcnJheTxHcmFwaGljc0RhdGE+O1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkNpcmNsZXxQSVhJLkVsbGlwc2V8UElYSS5Qb2x5Z29ufFBJWEkuUmVjdGFuZ2xlfFBJWEkuUm91bmRlZFJlY3RhbmdsZX0gc2hhcGUgLSBUaGUgc2hhcGUgb2JqZWN0IHRvIGRyYXcuXG4gICAgICogQHBhcmFtIHtQSVhJLkZpbGxTdHlsZX0gW2ZpbGxTdHlsZV0gLSB0aGUgd2lkdGggb2YgdGhlIGxpbmUgdG8gZHJhd1xuICAgICAqIEBwYXJhbSB7UElYSS5MaW5lU3R5bGV9IFtsaW5lU3R5bGVdIC0gdGhlIGNvbG9yIG9mIHRoZSBsaW5lIHRvIGRyYXdcbiAgICAgKiBAcGFyYW0ge1BJWEkuTWF0cml4fSBbbWF0cml4XSAtIFRyYW5zZm9ybSBtYXRyaXhcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzaGFwZTogSVNoYXBlLCBmaWxsU3R5bGU6IEZpbGxTdHlsZSA9IG51bGwsIGxpbmVTdHlsZTogTGluZVN0eWxlID0gbnVsbCwgbWF0cml4OiBNYXRyaXggPSBudWxsKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzaGFwZSBvYmplY3QgdG8gZHJhdy5cbiAgICAgICAgICogQG1lbWJlciB7UElYSS5DaXJjbGV8UElYSS5FbGxpcHNlfFBJWEkuUG9seWdvbnxQSVhJLlJlY3RhbmdsZXxQSVhJLlJvdW5kZWRSZWN0YW5nbGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNoYXBlID0gc2hhcGU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzdHlsZSBvZiB0aGUgbGluZS5cbiAgICAgICAgICogQG1lbWJlciB7UElYSS5MaW5lU3R5bGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpbmVTdHlsZSA9IGxpbmVTdHlsZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHN0eWxlIG9mIHRoZSBmaWxsLlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkZpbGxTdHlsZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHJhbnNmb3JtIG1hdHJpeC5cbiAgICAgICAgICogQG1lbWJlciB7UElYSS5NYXRyaXh9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1hdHJpeCA9IG1hdHJpeDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHR5cGUgb2YgdGhlIHNoYXBlLCBzZWUgdGhlIENvbnN0LlNoYXBlcyBmaWxlIGZvciBhbGwgdGhlIGV4aXN0aW5nIHR5cGVzLFxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBzaGFwZS50eXBlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwb2ludHMuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcltdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wb2ludHMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvbGxlY3Rpb24gb2YgaG9sZXMuXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuR3JhcGhpY3NEYXRhW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhvbGVzID0gW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBHcmFwaGljc0RhdGEgb2JqZWN0IHdpdGggdGhlIHNhbWUgdmFsdWVzIGFzIHRoaXMgb25lLlxuICAgICAqXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc0RhdGF9IENsb25lZCBHcmFwaGljc0RhdGEgb2JqZWN0XG4gICAgICovXG4gICAgcHVibGljIGNsb25lKCk6IEdyYXBoaWNzRGF0YVxuICAgIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcmFwaGljc0RhdGEoXG4gICAgICAgICAgICB0aGlzLnNoYXBlLFxuICAgICAgICAgICAgdGhpcy5maWxsU3R5bGUsXG4gICAgICAgICAgICB0aGlzLmxpbmVTdHlsZSxcbiAgICAgICAgICAgIHRoaXMubWF0cml4XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIEdyYXBoaWNzIGRhdGEuXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnNoYXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5ob2xlcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmhvbGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5wb2ludHMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5wb2ludHMgPSBudWxsO1xuICAgICAgICB0aGlzLmxpbmVTdHlsZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZmlsbFN0eWxlID0gbnVsbDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgICBidWlsZExpbmUsXG4gICAgYnVpbGRQb2x5LFxuICAgIEJhdGNoUGFydCxcbiAgICBGSUxMX0NPTU1BTkRTLFxuICAgIEJBVENIX1BPT0wsXG4gICAgRFJBV19DQUxMX1BPT0wsXG59IGZyb20gJy4vdXRpbHMnO1xuXG5pbXBvcnQge1xuICAgIEJhdGNoR2VvbWV0cnksXG4gICAgQmF0Y2hEcmF3Q2FsbCxcbiAgICBCYXRjaFRleHR1cmVBcnJheSxcbiAgICBCYXNlVGV4dHVyZSxcbiAgICBUZXh0dXJlLFxufSBmcm9tICdAcGl4aS9jb3JlJztcblxuaW1wb3J0IHsgRFJBV19NT0RFUywgV1JBUF9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTSEFQRVMsIFBvaW50LCBNYXRyaXggfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB7IEdyYXBoaWNzRGF0YSB9IGZyb20gJy4vR3JhcGhpY3NEYXRhJztcbmltcG9ydCB7IHByZW11bHRpcGx5VGludCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IEJvdW5kcyB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuXG5pbXBvcnQgdHlwZSB7IENpcmNsZSwgRWxsaXBzZSwgUG9seWdvbiwgUmVjdGFuZ2xlLCBSb3VuZGVkUmVjdGFuZ2xlLCBJUG9pbnREYXRhIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgdHlwZSB7IEZpbGxTdHlsZSB9IGZyb20gJy4vc3R5bGVzL0ZpbGxTdHlsZSc7XG5pbXBvcnQgdHlwZSB7IExpbmVTdHlsZSB9IGZyb20gJy4vc3R5bGVzL0xpbmVTdHlsZSc7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIENvbXBsZXggc2hhcGUgdHlwZVxuICogQHRvZG8gTW92ZSB0byBNYXRoIHNoYXBlc1xuICovXG50eXBlIElTaGFwZSA9IENpcmNsZSB8IEVsbGlwc2UgfCBQb2x5Z29uIHwgUmVjdGFuZ2xlIHwgUm91bmRlZFJlY3RhbmdsZTtcblxuY29uc3QgdG1wUG9pbnQgPSBuZXcgUG9pbnQoKTtcbmNvbnN0IHRtcEJvdW5kcyA9IG5ldyBCb3VuZHMoKTtcblxuLyoqXG4gKiBUaGUgR3JhcGhpY3MgY2xhc3MgY29udGFpbnMgbWV0aG9kcyB1c2VkIHRvIGRyYXcgcHJpbWl0aXZlIHNoYXBlcyBzdWNoIGFzIGxpbmVzLCBjaXJjbGVzIGFuZFxuICogcmVjdGFuZ2xlcyB0byB0aGUgZGlzcGxheSwgYW5kIHRvIGNvbG9yIGFuZCBmaWxsIHRoZW0uXG4gKlxuICogR3JhcGhpY3NHZW9tZXRyeSBpcyBkZXNpZ25lZCB0byBub3QgYmUgY29udGludWFsbHkgdXBkYXRpbmcgdGhlIGdlb21ldHJ5IHNpbmNlIGl0J3MgZXhwZW5zaXZlXG4gKiB0byByZS10ZXNzZWxhdGUgdXNpbmcgKiplYXJjdXQqKi4gQ29uc2lkZXIgdXNpbmcge0BsaW5rIFBJWEkuTWVzaH0gZm9yIHRoaXMgdXNlLWNhc2UsIGl0J3MgbXVjaCBmYXN0ZXIuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLkJhdGNoR2VvbWV0cnlcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBHcmFwaGljc0dlb21ldHJ5IGV4dGVuZHMgQmF0Y2hHZW9tZXRyeVxue1xuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBwb2ludHMgdG8gY29uc2lkZXIgYW4gb2JqZWN0IFwiYmF0Y2hhYmxlXCIsXG4gICAgICogYWJsZSB0byBiZSBiYXRjaGVkIGJ5IHRoZSByZW5kZXJlcidzIGJhdGNoIHN5c3RlbS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBQSVhJLkdyYXBoaWNzR2VvbWV0cnlcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBCQVRDSEFCTEVfU0laRVxuICAgICAqIEBkZWZhdWx0IDEwMFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgQkFUQ0hBQkxFX1NJWkUgPSAxMDA7XG5cbiAgICBwdWJsaWMgY2xvc2VQb2ludEVwczogbnVtYmVyO1xuICAgIHB1YmxpYyBib3VuZHNQYWRkaW5nOiBudW1iZXI7XG5cbiAgICB1dnNGbG9hdDMyOiBGbG9hdDMyQXJyYXkgPSBudWxsO1xuICAgIGluZGljZXNVaW50MTY6IFVpbnQxNkFycmF5IHwgVWludDMyQXJyYXkgPSBudWxsO1xuICAgIGJhdGNoYWJsZTogYm9vbGVhbjtcbiAgICBwb2ludHM6IEFycmF5PG51bWJlcj47XG4gICAgY29sb3JzOiBBcnJheTxudW1iZXI+O1xuICAgIHV2czogQXJyYXk8bnVtYmVyPjtcbiAgICBpbmRpY2VzOiBBcnJheTxudW1iZXI+O1xuICAgIHRleHR1cmVJZHM6IEFycmF5PG51bWJlcj47XG4gICAgZ3JhcGhpY3NEYXRhOiBBcnJheTxHcmFwaGljc0RhdGE+O1xuICAgIGRyYXdDYWxsczogQXJyYXk8QmF0Y2hEcmF3Q2FsbD47XG4gICAgYmF0Y2hEaXJ0eTogbnVtYmVyO1xuICAgIGJhdGNoZXM6IEFycmF5PEJhdGNoUGFydD47XG5cbiAgICBwcm90ZWN0ZWQgZGlydHk6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgY2FjaGVEaXJ0eTogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBjbGVhckRpcnR5OiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIHNoYXBlSW5kZXg6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2JvdW5kczogQm91bmRzO1xuICAgIHByb3RlY3RlZCBib3VuZHNEaXJ0eTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gYXJyYXkgb2YgcG9pbnRzIHRvIGRyYXcsIDIgbnVtYmVycyBwZXIgcG9pbnRcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyW119XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9pbnRzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIGNvbG9yc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJbXX1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb2xvcnMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFVWcyBjb2xsZWN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcltdfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnV2cyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5kaWNlcyBvZiB0aGUgdmVydGljZXNcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyW119XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5kaWNlcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHRleHR1cmUgSURzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJbXX1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZXh0dXJlSWRzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIGRyYXduIHNoYXBlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5HcmFwaGljc0RhdGFbXX1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ncmFwaGljc0RhdGEgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCB0byBkZXRlY3QgaWYgdGhlIGdyYXBoaWNzIG9iamVjdCBoYXMgY2hhbmdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpcnR5ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQmF0Y2hlcyBuZWVkIHRvIHJlZ2VuZXJhdGVkIGlmIHRoZSBnZW9tZXRyeSBpcyB1cGRhdGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmF0Y2hEaXJ0eSA9IC0xO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIHRvIGNoZWNrIGlmIHRoZSBjYWNoZSBpcyBkaXJ0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhY2hlRGlydHkgPSAtMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCB0byBkZXRlY3QgaWYgd2UgY2xlYXJlZCB0aGUgZ3JhcGhpY3NEYXRhLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGVhckRpcnR5ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTGlzdCBvZiBjdXJyZW50IGRyYXcgY2FsbHMgZHJpdmVkIGZyb20gdGhlIGJhdGNoZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdFtdfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRyYXdDYWxscyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm1lZGlhdGUgYWJzdHJhY3QgZm9ybWF0IHNlbnQgdG8gYmF0Y2ggc3lzdGVtLlxuICAgICAgICAgKiBDYW4gYmUgY29udmVydGVkIHRvIGRyYXdDYWxscyBvciB0byBiYXRjaGFibGUgb2JqZWN0cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5ncmFwaGljc1V0aWxzLkJhdGNoUGFydFtdfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJhdGNoZXMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5kZXggb2YgdGhlIGxhc3QgYmF0Y2hlZCBzaGFwZSBpbiB0aGUgc3RhY2sgb2YgY2FsbHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaGFwZUluZGV4ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGVkIGJvdW5kcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5Cb3VuZHN9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2JvdW5kcyA9IG5ldyBCb3VuZHMoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJvdW5kcyBkaXJ0eSBmbGFnLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYm91bmRzRGlydHkgPSAtMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUGFkZGluZyB0byBhZGQgdG8gdGhlIGJvdW5kcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJvdW5kc1BhZGRpbmcgPSAwO1xuXG4gICAgICAgIHRoaXMuYmF0Y2hhYmxlID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5pbmRpY2VzVWludDE2ID0gbnVsbDtcblxuICAgICAgICB0aGlzLnV2c0Zsb2F0MzIgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNaW5pbWFsIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIHRoYXQgYXJlIGNvbnNpZGVyZWQgZGlmZmVyZW50LlxuICAgICAgICAgKiBBZmZlY3RzIGxpbmUgdGVzc2VsYXRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2VQb2ludEVwcyA9IDFlLTQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IGJvdW5kcyBvZiB0aGUgZ3JhcGhpYyBnZW9tZXRyeS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuQm91bmRzfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm91bmRzKCk6IEJvdW5kc1xuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuYm91bmRzRGlydHkgIT09IHRoaXMuZGlydHkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuYm91bmRzRGlydHkgPSB0aGlzLmRpcnR5O1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVCb3VuZHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9ib3VuZHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbCBpZiB5b3UgY2hhbmdlZCBncmFwaGljc0RhdGEgbWFudWFsbHkuXG4gICAgICogRW1wdGllcyBhbGwgYmF0Y2ggYnVmZmVycy5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgaW52YWxpZGF0ZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmJvdW5kc0RpcnR5ID0gLTE7XG4gICAgICAgIHRoaXMuZGlydHkrKztcbiAgICAgICAgdGhpcy5iYXRjaERpcnR5Kys7XG4gICAgICAgIHRoaXMuc2hhcGVJbmRleCA9IDA7XG5cbiAgICAgICAgdGhpcy5wb2ludHMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5jb2xvcnMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy51dnMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5pbmRpY2VzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMudGV4dHVyZUlkcy5sZW5ndGggPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kcmF3Q2FsbHMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd0NhbGxzW2ldLnRleEFycmF5LmNsZWFyKCk7XG4gICAgICAgICAgICBEUkFXX0NBTExfUE9PTC5wdXNoKHRoaXMuZHJhd0NhbGxzW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZHJhd0NhbGxzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJhdGNoZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoUGFydCA9IHRoaXMuYmF0Y2hlc1tpXTtcblxuICAgICAgICAgICAgYmF0Y2hQYXJ0LnJlc2V0KCk7XG4gICAgICAgICAgICBCQVRDSF9QT09MLnB1c2goYmF0Y2hQYXJ0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmF0Y2hlcy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgZ3JhcGhpY3MgdGhhdCB3ZXJlIGRyYXduIHRvIHRoaXMgR3JhcGhpY3Mgb2JqZWN0LCBhbmQgcmVzZXRzIGZpbGwgYW5kIGxpbmUgc3R5bGUgc2V0dGluZ3MuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdyYXBoaWNzR2VvbWV0cnl9IFRoaXMgR3JhcGhpY3NHZW9tZXRyeSBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBjbGVhcigpOiBHcmFwaGljc0dlb21ldHJ5XG4gICAge1xuICAgICAgICBpZiAodGhpcy5ncmFwaGljc0RhdGEubGVuZ3RoID4gMClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRGlydHkrKztcbiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY3NEYXRhLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgZ2l2ZW4gc2hhcGUgdG8gdGhpcyBHcmFwaGljcyBvYmplY3QuIENhbiBiZSBhbnkgb2YgQ2lyY2xlLCBSZWN0YW5nbGUsIEVsbGlwc2UsIExpbmUgb3IgUG9seWdvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5DaXJjbGV8UElYSS5FbGxpcHNlfFBJWEkuUG9seWdvbnxQSVhJLlJlY3RhbmdsZXxQSVhJLlJvdW5kZWRSZWN0YW5nbGV9IHNoYXBlIC0gVGhlIHNoYXBlIG9iamVjdCB0byBkcmF3LlxuICAgICAqIEBwYXJhbSB7UElYSS5GaWxsU3R5bGV9IGZpbGxTdHlsZSAtIERlZmluZXMgc3R5bGUgb2YgdGhlIGZpbGwuXG4gICAgICogQHBhcmFtIHtQSVhJLkxpbmVTdHlsZX0gbGluZVN0eWxlIC0gRGVmaW5lcyBzdHlsZSBvZiB0aGUgbGluZXMuXG4gICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gbWF0cml4IC0gVHJhbnNmb3JtIGFwcGxpZWQgdG8gdGhlIHBvaW50cyBvZiB0aGUgc2hhcGUuXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc0dlb21ldHJ5fSBSZXR1cm5zIGdlb21ldHJ5IGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZHJhd1NoYXBlKFxuICAgICAgICBzaGFwZTogSVNoYXBlLFxuICAgICAgICBmaWxsU3R5bGU6IEZpbGxTdHlsZSA9IG51bGwsXG4gICAgICAgIGxpbmVTdHlsZTogTGluZVN0eWxlID0gbnVsbCxcbiAgICAgICAgbWF0cml4OiBNYXRyaXggPSBudWxsKTogR3JhcGhpY3NHZW9tZXRyeVxuICAgIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBHcmFwaGljc0RhdGEoc2hhcGUsIGZpbGxTdHlsZSwgbGluZVN0eWxlLCBtYXRyaXgpO1xuXG4gICAgICAgIHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2goZGF0YSk7XG4gICAgICAgIHRoaXMuZGlydHkrKztcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgZ2l2ZW4gc2hhcGUgdG8gdGhpcyBHcmFwaGljcyBvYmplY3QuIENhbiBiZSBhbnkgb2YgQ2lyY2xlLCBSZWN0YW5nbGUsIEVsbGlwc2UsIExpbmUgb3IgUG9seWdvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5DaXJjbGV8UElYSS5FbGxpcHNlfFBJWEkuUG9seWdvbnxQSVhJLlJlY3RhbmdsZXxQSVhJLlJvdW5kZWRSZWN0YW5nbGV9IHNoYXBlIC0gVGhlIHNoYXBlIG9iamVjdCB0byBkcmF3LlxuICAgICAqIEBwYXJhbSB7UElYSS5NYXRyaXh9IG1hdHJpeCAtIFRyYW5zZm9ybSBhcHBsaWVkIHRvIHRoZSBwb2ludHMgb2YgdGhlIHNoYXBlLlxuICAgICAqIEByZXR1cm4ge1BJWEkuR3JhcGhpY3NHZW9tZXRyeX0gUmV0dXJucyBnZW9tZXRyeSBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHVibGljIGRyYXdIb2xlKHNoYXBlOiBJU2hhcGUsIG1hdHJpeDogTWF0cml4ID0gbnVsbCk6IEdyYXBoaWNzR2VvbWV0cnlcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5ncmFwaGljc0RhdGEubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgR3JhcGhpY3NEYXRhKHNoYXBlLCBudWxsLCBudWxsLCBtYXRyaXgpO1xuXG4gICAgICAgIGNvbnN0IGxhc3RTaGFwZSA9IHRoaXMuZ3JhcGhpY3NEYXRhW3RoaXMuZ3JhcGhpY3NEYXRhLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGRhdGEubGluZVN0eWxlID0gbGFzdFNoYXBlLmxpbmVTdHlsZTtcblxuICAgICAgICBsYXN0U2hhcGUuaG9sZXMucHVzaChkYXRhKTtcblxuICAgICAgICB0aGlzLmRpcnR5Kys7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIEdyYXBoaWNzR2VvbWV0cnkgb2JqZWN0LlxuICAgICAqXG4gICAgICovXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuXG4gICAgICAgIC8vIGRlc3Ryb3kgZWFjaCBvZiB0aGUgR3JhcGhpY3NEYXRhIG9iamVjdHNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdyYXBoaWNzRGF0YS5sZW5ndGg7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5ncmFwaGljc0RhdGFbaV0uZGVzdHJveSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wb2ludHMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5wb2ludHMgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbG9ycy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmNvbG9ycyA9IG51bGw7XG4gICAgICAgIHRoaXMudXZzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMudXZzID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbmRpY2VzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuaW5kaWNlcyA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5kZXhCdWZmZXIuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmluZGV4QnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5ncmFwaGljc0RhdGEubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5ncmFwaGljc0RhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLmRyYXdDYWxscy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmRyYXdDYWxscyA9IG51bGw7XG4gICAgICAgIHRoaXMuYmF0Y2hlcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmJhdGNoZXMgPSBudWxsO1xuICAgICAgICB0aGlzLl9ib3VuZHMgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRvIHNlZSBpZiBhIHBvaW50IGlzIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBnZW9tZXRyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5JUG9pbnREYXRhfSBwb2ludCAtIFBvaW50IHRvIGNoZWNrIGlmIGl0J3MgY29udGFpbmVkLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgcG9pbnQgaXMgY29udGFpbmVkIHdpdGhpbiBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBwdWJsaWMgY29udGFpbnNQb2ludChwb2ludDogSVBvaW50RGF0YSk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIGNvbnN0IGdyYXBoaWNzRGF0YSA9IHRoaXMuZ3JhcGhpY3NEYXRhO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JhcGhpY3NEYXRhLmxlbmd0aDsgKytpKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gZ3JhcGhpY3NEYXRhW2ldO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEuZmlsbFN0eWxlLnZpc2libGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG9ubHkgZGVhbCB3aXRoIGZpbGxzLi5cbiAgICAgICAgICAgIGlmIChkYXRhLnNoYXBlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLm1hdHJpeClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEubWF0cml4LmFwcGx5SW52ZXJzZShwb2ludCwgdG1wUG9pbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0bXBQb2ludC5jb3B5RnJvbShwb2ludCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc2hhcGUuY29udGFpbnModG1wUG9pbnQueCwgdG1wUG9pbnQueSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaGl0SG9sZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmhvbGVzKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuaG9sZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaG9sZSA9IGRhdGEuaG9sZXNbaV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG9sZS5zaGFwZS5jb250YWlucyh0bXBQb2ludC54LCB0bXBQb2ludC55KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpdEhvbGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhpdEhvbGUpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBpbnRlcm1lZGlhdGUgYmF0Y2ggZGF0YS4gRWl0aGVyIGdldHMgY29udmVydGVkIHRvIGRyYXdDYWxsc1xuICAgICAqIG9yIHVzZWQgdG8gY29udmVydCB0byBiYXRjaCBvYmplY3RzIGRpcmVjdGx5IGJ5IHRoZSBHcmFwaGljcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFthbG9vdzMySW5kaWNlc10gLSBBbGxvdyB1c2luZyAzMi1iaXQgaW5kaWNlcyBmb3IgcHJldmVudGluZ3MgYXJ0ZWZhY3RzIHdoZW4gbW9yZSB0aGF0IDY1NTM1IHZlcnRpY2VzXG4gICAgICovXG4gICAgdXBkYXRlQmF0Y2hlcyhhbGxvdzMySW5kaWNlcz86IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuZ3JhcGhpY3NEYXRhLmxlbmd0aClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5iYXRjaGFibGUgPSB0cnVlO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMudmFsaWRhdGVCYXRjaGluZygpKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhY2hlRGlydHkgPSB0aGlzLmRpcnR5O1xuXG4gICAgICAgIGNvbnN0IHV2cyA9IHRoaXMudXZzO1xuICAgICAgICBjb25zdCBncmFwaGljc0RhdGEgPSB0aGlzLmdyYXBoaWNzRGF0YTtcblxuICAgICAgICBsZXQgYmF0Y2hQYXJ0OiBCYXRjaFBhcnQgPSBudWxsO1xuXG4gICAgICAgIGxldCBjdXJyZW50U3R5bGUgPSBudWxsO1xuXG4gICAgICAgIGlmICh0aGlzLmJhdGNoZXMubGVuZ3RoID4gMClcbiAgICAgICAge1xuICAgICAgICAgICAgYmF0Y2hQYXJ0ID0gdGhpcy5iYXRjaGVzW3RoaXMuYmF0Y2hlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGN1cnJlbnRTdHlsZSA9IGJhdGNoUGFydC5zdHlsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnNoYXBlSW5kZXg7IGkgPCBncmFwaGljc0RhdGEubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2hhcGVJbmRleCsrO1xuXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gZ3JhcGhpY3NEYXRhW2ldO1xuICAgICAgICAgICAgY29uc3QgZmlsbFN0eWxlID0gZGF0YS5maWxsU3R5bGU7XG4gICAgICAgICAgICBjb25zdCBsaW5lU3R5bGUgPSBkYXRhLmxpbmVTdHlsZTtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBGSUxMX0NPTU1BTkRTW2RhdGEudHlwZV07XG5cbiAgICAgICAgICAgIC8vIGJ1aWxkIG91dCB0aGUgc2hhcGVzIHBvaW50cy4uXG4gICAgICAgICAgICBjb21tYW5kLmJ1aWxkKGRhdGEpO1xuXG4gICAgICAgICAgICBpZiAoZGF0YS5tYXRyaXgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1Qb2ludHMoZGF0YS5wb2ludHMsIGRhdGEubWF0cml4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAyOyBqKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSAoaiA9PT0gMCkgPyBmaWxsU3R5bGUgOiBsaW5lU3R5bGU7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXN0eWxlLnZpc2libGUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFRleHR1cmUgPSBzdHlsZS50ZXh0dXJlLmJhc2VUZXh0dXJlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pbmRpY2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJJbmRleCA9IHRoaXMucG9pbnRzLmxlbmd0aCAvIDI7XG5cbiAgICAgICAgICAgICAgICBuZXh0VGV4dHVyZS53cmFwTW9kZSA9IFdSQVBfTU9ERVMuUkVQRUFUO1xuXG4gICAgICAgICAgICAgICAgaWYgKGogPT09IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NGaWxsKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NMaW5lKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHNpemUgPSAodGhpcy5wb2ludHMubGVuZ3RoIC8gMikgLSBhdHRyaWJJbmRleDtcblxuICAgICAgICAgICAgICAgIGlmIChzaXplID09PSAwKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAvLyBjbG9zZSBiYXRjaCBpZiBzdHlsZSBpcyBkaWZmZXJlbnRcbiAgICAgICAgICAgICAgICBpZiAoYmF0Y2hQYXJ0ICYmICF0aGlzLl9jb21wYXJlU3R5bGVzKGN1cnJlbnRTdHlsZSwgc3R5bGUpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hQYXJ0LmVuZChpbmRleCwgYXR0cmliSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBiYXRjaFBhcnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzcGF3biBuZXcgYmF0Y2ggaWYgaXRzIGZpcnN0IGJhdGNoIG9yIHByZXZpb3VzIHdhcyBjbG9zZWRcbiAgICAgICAgICAgICAgICBpZiAoIWJhdGNoUGFydClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJhdGNoUGFydCA9IEJBVENIX1BPT0wucG9wKCkgfHwgbmV3IEJhdGNoUGFydCgpO1xuICAgICAgICAgICAgICAgICAgICBiYXRjaFBhcnQuYmVnaW4oc3R5bGUsIGluZGV4LCBhdHRyaWJJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmF0Y2hlcy5wdXNoKGJhdGNoUGFydCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdHlsZSA9IHN0eWxlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVXZzKHRoaXMucG9pbnRzLCB1dnMsIHN0eWxlLnRleHR1cmUsIGF0dHJpYkluZGV4LCBzaXplLCBzdHlsZS5tYXRyaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmluZGljZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCBhdHRyaWIgPSB0aGlzLnBvaW50cy5sZW5ndGggLyAyO1xuXG4gICAgICAgIGlmIChiYXRjaFBhcnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJhdGNoUGFydC5lbmQoaW5kZXgsIGF0dHJpYik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5iYXRjaGVzLmxlbmd0aCA9PT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gdGhlcmUgYXJlIG5vIHZpc2libGUgc3R5bGVzIGluIEdyYXBoaWNzRGF0YVxuICAgICAgICAgICAgLy8gaXRzIHBvc3NpYmxlIHRoYXQgc29tZW9uZSB3YW50cyBHcmFwaGljcyBqdXN0IGZvciB0aGUgYm91bmRzXG4gICAgICAgICAgICB0aGlzLmJhdGNoYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHByZXZlbnQgYWxsb2NhdGlvbiB3aGVuIGxlbmd0aCBpcyBzYW1lIGFzIGJ1ZmZlclxuICAgICAgICBpZiAodGhpcy5pbmRpY2VzVWludDE2ICYmIHRoaXMuaW5kaWNlcy5sZW5ndGggPT09IHRoaXMuaW5kaWNlc1VpbnQxNi5sZW5ndGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuaW5kaWNlc1VpbnQxNi5zZXQodGhpcy5pbmRpY2VzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG5lZWQzMlxuICAgICAgICAgICAgICAgID0gYXR0cmliID4gMHhmZmZmICYmIGFsbG93MzJJbmRpY2VzO1xuXG4gICAgICAgICAgICB0aGlzLmluZGljZXNVaW50MTYgPSBuZWVkMzIgPyBuZXcgVWludDMyQXJyYXkodGhpcy5pbmRpY2VzKSA6IG5ldyBVaW50MTZBcnJheSh0aGlzLmluZGljZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETyBtYWtlIHRoaXMgYSBjb25zdC4uXG4gICAgICAgIHRoaXMuYmF0Y2hhYmxlID0gdGhpcy5pc0JhdGNoYWJsZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLmJhdGNoYWJsZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5wYWNrQmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5idWlsZERyYXdDYWxscygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWZmaW5pdHkgY2hlY2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5GaWxsU3R5bGUgfCBQSVhJLkxpbmVTdHlsZX0gc3R5bGVBXG4gICAgICogQHBhcmFtIHtQSVhJLkZpbGxTdHlsZSB8IFBJWEkuTGluZVN0eWxlfSBzdHlsZUJcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX2NvbXBhcmVTdHlsZXMoc3R5bGVBOiBGaWxsU3R5bGUgfCBMaW5lU3R5bGUsIHN0eWxlQjogRmlsbFN0eWxlIHwgTGluZVN0eWxlKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgaWYgKCFzdHlsZUEgfHwgIXN0eWxlQilcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlQS50ZXh0dXJlLmJhc2VUZXh0dXJlICE9PSBzdHlsZUIudGV4dHVyZS5iYXNlVGV4dHVyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlQS5jb2xvciArIHN0eWxlQS5hbHBoYSAhPT0gc3R5bGVCLmNvbG9yICsgc3R5bGVCLmFscGhhKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISEoc3R5bGVBIGFzIExpbmVTdHlsZSkubmF0aXZlICE9PSAhIShzdHlsZUIgYXMgTGluZVN0eWxlKS5uYXRpdmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlc3QgZ2VvbWV0cnkgZm9yIGJhdGNoaW5nIHByb2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHZhbGlkYXRlQmF0Y2hpbmcoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkgPT09IHRoaXMuY2FjaGVEaXJ0eSB8fCAhdGhpcy5ncmFwaGljc0RhdGEubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHRoaXMuZ3JhcGhpY3NEYXRhLmxlbmd0aDsgaSA8IGw7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ3JhcGhpY3NEYXRhW2ldO1xuICAgICAgICAgICAgY29uc3QgZmlsbCA9IGRhdGEuZmlsbFN0eWxlO1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IGRhdGEubGluZVN0eWxlO1xuXG4gICAgICAgICAgICBpZiAoZmlsbCAmJiAhZmlsbC50ZXh0dXJlLmJhc2VUZXh0dXJlLnZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAobGluZSAmJiAhbGluZS50ZXh0dXJlLmJhc2VUZXh0dXJlLnZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPZmZzZXQgdGhlIGluZGljZXMgc28gdGhhdCBpdCB3b3JrcyB3aXRoIHRoZSBiYXRjaGVyLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBwYWNrQmF0Y2hlcygpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmJhdGNoRGlydHkrKztcbiAgICAgICAgdGhpcy51dnNGbG9hdDMyID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLnV2cyk7XG5cbiAgICAgICAgY29uc3QgYmF0Y2hlcyA9IHRoaXMuYmF0Y2hlcztcblxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGJhdGNoZXMubGVuZ3RoOyBpIDwgbDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IGJhdGNoZXNbaV07XG5cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmF0Y2guc2l6ZTsgaisrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gYmF0Y2guc3RhcnQgKyBqO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2VzVWludDE2W2luZGV4XSA9IHRoaXMuaW5kaWNlc1VpbnQxNltpbmRleF0gLSBiYXRjaC5hdHRyaWJTdGFydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhpcyBncmFwaGljcyBnZW9tZXRyeSBjYW4gYmUgYmF0Y2hlZC5cbiAgICAgKiBDdXJyZW50bHkgaXQgbmVlZHMgdG8gYmUgc21hbGwgZW5vdWdoIGFuZCBub3QgY29udGFpbiBhbnkgbmF0aXZlIGxpbmVzLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBpc0JhdGNoYWJsZSgpOiBib29sZWFuXG4gICAge1xuICAgICAgICAvLyBwcmV2ZW50IGhlYXZ5IG1lc2ggYmF0Y2hpbmdcbiAgICAgICAgaWYgKHRoaXMucG9pbnRzLmxlbmd0aCA+IDB4ZmZmZiAqIDIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhdGNoZXMgPSB0aGlzLmJhdGNoZXM7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXRjaGVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoKGJhdGNoZXNbaV0uc3R5bGUgYXMgTGluZVN0eWxlKS5uYXRpdmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICh0aGlzLnBvaW50cy5sZW5ndGggPCBHcmFwaGljc0dlb21ldHJ5LkJBVENIQUJMRV9TSVpFICogMik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgaW50ZXJtZWRpYXRlIGJhdGNoZXMgZGF0YSB0byBkcmF3Q2FsbHMuXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGJ1aWxkRHJhd0NhbGxzKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGxldCBUSUNLID0gKytCYXNlVGV4dHVyZS5fZ2xvYmFsQmF0Y2g7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRyYXdDYWxscy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kcmF3Q2FsbHNbaV0udGV4QXJyYXkuY2xlYXIoKTtcbiAgICAgICAgICAgIERSQVdfQ0FMTF9QT09MLnB1c2godGhpcy5kcmF3Q2FsbHNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kcmF3Q2FsbHMubGVuZ3RoID0gMDtcblxuICAgICAgICBjb25zdCBjb2xvcnMgPSB0aGlzLmNvbG9ycztcbiAgICAgICAgY29uc3QgdGV4dHVyZUlkcyA9IHRoaXMudGV4dHVyZUlkcztcblxuICAgICAgICBsZXQgY3VycmVudEdyb3VwOiBCYXRjaERyYXdDYWxsID0gIERSQVdfQ0FMTF9QT09MLnBvcCgpO1xuXG4gICAgICAgIGlmICghY3VycmVudEdyb3VwKVxuICAgICAgICB7XG4gICAgICAgICAgICBjdXJyZW50R3JvdXAgPSBuZXcgQmF0Y2hEcmF3Q2FsbCgpO1xuICAgICAgICAgICAgY3VycmVudEdyb3VwLnRleEFycmF5ID0gbmV3IEJhdGNoVGV4dHVyZUFycmF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEdyb3VwLnRleEFycmF5LmNvdW50ID0gMDtcbiAgICAgICAgY3VycmVudEdyb3VwLnN0YXJ0ID0gMDtcbiAgICAgICAgY3VycmVudEdyb3VwLnNpemUgPSAwO1xuICAgICAgICBjdXJyZW50R3JvdXAudHlwZSA9IERSQVdfTU9ERVMuVFJJQU5HTEVTO1xuXG4gICAgICAgIGxldCB0ZXh0dXJlQ291bnQgPSAwO1xuICAgICAgICBsZXQgY3VycmVudFRleHR1cmUgPSBudWxsO1xuICAgICAgICBsZXQgdGV4dHVyZUlkID0gMDtcbiAgICAgICAgbGV0IG5hdGl2ZSA9IGZhbHNlO1xuICAgICAgICBsZXQgZHJhd01vZGUgPSBEUkFXX01PREVTLlRSSUFOR0xFUztcblxuICAgICAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgICAgIHRoaXMuZHJhd0NhbGxzLnB1c2goY3VycmVudEdyb3VwKTtcblxuICAgICAgICAvLyBUT0RPIC0gdGhpcyBjYW4gYmUgc2ltcGxpZmllZFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmF0Y2hlcy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuYmF0Y2hlc1tpXTtcblxuICAgICAgICAgICAgLy8gVE9ETyBhZGQgc29tZSBmdWxsIG9uIE1BWF9URVhUVVJFIENPREUuLlxuICAgICAgICAgICAgY29uc3QgTUFYX1RFWFRVUkVTID0gODtcblxuICAgICAgICAgICAgLy8gRm9yY2VkIGNhc3QgZm9yIGNoZWNraW5nIGBuYXRpdmVgIHdpdGhvdXQgZXJyb3JzXG4gICAgICAgICAgICBjb25zdCBzdHlsZSA9IGRhdGEuc3R5bGUgYXMgTGluZVN0eWxlO1xuXG4gICAgICAgICAgICBjb25zdCBuZXh0VGV4dHVyZSA9IHN0eWxlLnRleHR1cmUuYmFzZVRleHR1cmU7XG5cbiAgICAgICAgICAgIGlmIChuYXRpdmUgIT09ICEhc3R5bGUubmF0aXZlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hdGl2ZSA9ICEhc3R5bGUubmF0aXZlO1xuICAgICAgICAgICAgICAgIGRyYXdNb2RlID0gbmF0aXZlID8gRFJBV19NT0RFUy5MSU5FUyA6IERSQVdfTU9ERVMuVFJJQU5HTEVTO1xuXG4gICAgICAgICAgICAgICAgLy8gZm9yY2UgdGhlIGJhdGNoIHRvIGJyZWFrIVxuICAgICAgICAgICAgICAgIGN1cnJlbnRUZXh0dXJlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlQ291bnQgPSBNQVhfVEVYVFVSRVM7XG4gICAgICAgICAgICAgICAgVElDSysrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3VycmVudFRleHR1cmUgIT09IG5leHRUZXh0dXJlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRUZXh0dXJlID0gbmV4dFRleHR1cmU7XG5cbiAgICAgICAgICAgICAgICBpZiAobmV4dFRleHR1cmUuX2JhdGNoRW5hYmxlZCAhPT0gVElDSylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlQ291bnQgPT09IE1BWF9URVhUVVJFUylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgVElDSysrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlQ291bnQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEdyb3VwLnNpemUgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRHcm91cCA9IERSQVdfQ0FMTF9QT09MLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3VycmVudEdyb3VwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwID0gbmV3IEJhdGNoRHJhd0NhbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwLnRleEFycmF5ID0gbmV3IEJhdGNoVGV4dHVyZUFycmF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0NhbGxzLnB1c2goY3VycmVudEdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwLnN0YXJ0ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXAuc2l6ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXAudGV4QXJyYXkuY291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwLnR5cGUgPSBkcmF3TW9kZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gYWRkIHRoaXMgdG8gdGhlIHJlbmRlciBwYXJ0Li5cbiAgICAgICAgICAgICAgICAgICAgLy8gSGFjayEgQmVjYXVzZSB0ZXh0dXJlIGhhcyBwcm90ZWN0ZWQgYHRvdWNoZWRgXG4gICAgICAgICAgICAgICAgICAgIG5leHRUZXh0dXJlLnRvdWNoZWQgPSAxOy8vIHRvdWNoO1xuXG4gICAgICAgICAgICAgICAgICAgIG5leHRUZXh0dXJlLl9iYXRjaEVuYWJsZWQgPSBUSUNLO1xuICAgICAgICAgICAgICAgICAgICBuZXh0VGV4dHVyZS5fYmF0Y2hMb2NhdGlvbiA9IHRleHR1cmVDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgbmV4dFRleHR1cmUud3JhcE1vZGUgPSAxMDQ5NztcblxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXAudGV4QXJyYXkuZWxlbWVudHNbY3VycmVudEdyb3VwLnRleEFycmF5LmNvdW50KytdID0gbmV4dFRleHR1cmU7XG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVDb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VycmVudEdyb3VwLnNpemUgKz0gZGF0YS5zaXplO1xuICAgICAgICAgICAgaW5kZXggKz0gZGF0YS5zaXplO1xuXG4gICAgICAgICAgICB0ZXh0dXJlSWQgPSBuZXh0VGV4dHVyZS5fYmF0Y2hMb2NhdGlvbjtcblxuICAgICAgICAgICAgdGhpcy5hZGRDb2xvcnMoY29sb3JzLCBzdHlsZS5jb2xvciwgc3R5bGUuYWxwaGEsIGRhdGEuYXR0cmliU2l6ZSk7XG4gICAgICAgICAgICB0aGlzLmFkZFRleHR1cmVJZHModGV4dHVyZUlkcywgdGV4dHVyZUlkLCBkYXRhLmF0dHJpYlNpemUpO1xuICAgICAgICB9XG5cbiAgICAgICAgQmFzZVRleHR1cmUuX2dsb2JhbEJhdGNoID0gVElDSztcblxuICAgICAgICAvLyB1cGxvYWQuLlxuICAgICAgICAvLyBtZXJnZSBmb3Igbm93IVxuICAgICAgICB0aGlzLnBhY2tBdHRyaWJ1dGVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFja3MgYXR0cmlidXRlcyB0byBzaW5nbGUgYnVmZmVyLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBwYWNrQXR0cmlidXRlcygpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMucG9pbnRzO1xuICAgICAgICBjb25zdCB1dnMgPSB0aGlzLnV2cztcbiAgICAgICAgY29uc3QgY29sb3JzID0gdGhpcy5jb2xvcnM7XG4gICAgICAgIGNvbnN0IHRleHR1cmVJZHMgPSB0aGlzLnRleHR1cmVJZHM7XG5cbiAgICAgICAgLy8gdmVydHMgYXJlIDIgcG9zaXRpb25zLi4gc28gd2UgKiBieSAzIGFzIHRoZXJlIGFyZSA2IHByb3BlcnRpZXMuLiB0aGVuIDQgY29zIGl0cyBieXRlc1xuICAgICAgICBjb25zdCBnbFBvaW50cyA9IG5ldyBBcnJheUJ1ZmZlcih2ZXJ0cy5sZW5ndGggKiAzICogNCk7XG4gICAgICAgIGNvbnN0IGYzMiA9IG5ldyBGbG9hdDMyQXJyYXkoZ2xQb2ludHMpO1xuICAgICAgICBjb25zdCB1MzIgPSBuZXcgVWludDMyQXJyYXkoZ2xQb2ludHMpO1xuXG4gICAgICAgIGxldCBwID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRzLmxlbmd0aCAvIDI7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgZjMyW3ArK10gPSB2ZXJ0c1tpICogMl07XG4gICAgICAgICAgICBmMzJbcCsrXSA9IHZlcnRzWyhpICogMikgKyAxXTtcblxuICAgICAgICAgICAgZjMyW3ArK10gPSB1dnNbaSAqIDJdO1xuICAgICAgICAgICAgZjMyW3ArK10gPSB1dnNbKGkgKiAyKSArIDFdO1xuXG4gICAgICAgICAgICB1MzJbcCsrXSA9IGNvbG9yc1tpXTtcblxuICAgICAgICAgICAgZjMyW3ArK10gPSB0ZXh0dXJlSWRzW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYnVmZmVyLnVwZGF0ZShnbFBvaW50cyk7XG4gICAgICAgIHRoaXMuX2luZGV4QnVmZmVyLnVwZGF0ZSh0aGlzLmluZGljZXNVaW50MTYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgZmlsbCBwYXJ0IG9mIEdyYXBoaWNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkdyYXBoaWNzRGF0YX0gZGF0YVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgcHJvY2Vzc0ZpbGwoZGF0YTogR3JhcGhpY3NEYXRhKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKGRhdGEuaG9sZXMubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NIb2xlcyhkYXRhLmhvbGVzKTtcblxuICAgICAgICAgICAgYnVpbGRQb2x5LnRyaWFuZ3VsYXRlKGRhdGEsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IEZJTExfQ09NTUFORFNbZGF0YS50eXBlXTtcblxuICAgICAgICAgICAgY29tbWFuZC50cmlhbmd1bGF0ZShkYXRhLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgbGluZSBwYXJ0IG9mIEdyYXBoaWNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkdyYXBoaWNzRGF0YX0gZGF0YVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgcHJvY2Vzc0xpbmUoZGF0YTogR3JhcGhpY3NEYXRhKTogdm9pZFxuICAgIHtcbiAgICAgICAgYnVpbGRMaW5lKGRhdGEsIHRoaXMpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5ob2xlcy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgYnVpbGRMaW5lKGRhdGEuaG9sZXNbaV0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyB0aGUgaG9sZXMgZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5HcmFwaGljc0RhdGFbXX0gaG9sZXMgLSBIb2xlcyB0byByZW5kZXJcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHByb2Nlc3NIb2xlcyhob2xlczogQXJyYXk8R3JhcGhpY3NEYXRhPik6IHZvaWRcbiAgICB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaG9sZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGhvbGUgPSBob2xlc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBGSUxMX0NPTU1BTkRTW2hvbGUudHlwZV07XG5cbiAgICAgICAgICAgIGNvbW1hbmQuYnVpbGQoaG9sZSk7XG5cbiAgICAgICAgICAgIGlmIChob2xlLm1hdHJpeClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybVBvaW50cyhob2xlLnBvaW50cywgaG9sZS5tYXRyaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBsb2NhbCBib3VuZHMgb2YgdGhlIG9iamVjdC4gRXhwZW5zaXZlIHRvIHVzZSBwZXJmb3JtYW5jZS13aXNlLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjYWxjdWxhdGVCb3VuZHMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5fYm91bmRzO1xuICAgICAgICBjb25zdCBzZXF1ZW5jZUJvdW5kcyA9IHRtcEJvdW5kcztcbiAgICAgICAgbGV0IGN1ck1hdHJpeCA9IE1hdHJpeC5JREVOVElUWTtcblxuICAgICAgICB0aGlzLl9ib3VuZHMuY2xlYXIoKTtcbiAgICAgICAgc2VxdWVuY2VCb3VuZHMuY2xlYXIoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ3JhcGhpY3NEYXRhLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5ncmFwaGljc0RhdGFbaV07XG4gICAgICAgICAgICBjb25zdCBzaGFwZSA9IGRhdGEuc2hhcGU7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gZGF0YS50eXBlO1xuICAgICAgICAgICAgY29uc3QgbGluZVN0eWxlID0gZGF0YS5saW5lU3R5bGU7XG4gICAgICAgICAgICBjb25zdCBuZXh0TWF0cml4ID0gZGF0YS5tYXRyaXggfHwgTWF0cml4LklERU5USVRZO1xuICAgICAgICAgICAgbGV0IGxpbmVXaWR0aCA9IDAuMDtcblxuICAgICAgICAgICAgaWYgKGxpbmVTdHlsZSAmJiBsaW5lU3R5bGUudmlzaWJsZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGlnbm1lbnQgPSBsaW5lU3R5bGUuYWxpZ25tZW50O1xuXG4gICAgICAgICAgICAgICAgbGluZVdpZHRoID0gbGluZVN0eWxlLndpZHRoO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFNIQVBFUy5QT0xZKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoID0gbGluZVdpZHRoICogKDAuNSArIE1hdGguYWJzKDAuNSAtIGFsaWdubWVudCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGggPSBsaW5lV2lkdGggKiBNYXRoLm1heCgwLCBhbGlnbm1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN1ck1hdHJpeCAhPT0gbmV4dE1hdHJpeClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNlcXVlbmNlQm91bmRzLmlzRW1wdHkoKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJvdW5kcy5hZGRCb3VuZHNNYXRyaXgoc2VxdWVuY2VCb3VuZHMsIGN1ck1hdHJpeCk7XG4gICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlQm91bmRzLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1ck1hdHJpeCA9IG5leHRNYXRyaXg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlID09PSBTSEFQRVMuUkVDVCB8fCB0eXBlID09PSBTSEFQRVMuUlJFQylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gc2hhcGUgYXMgUmVjdGFuZ2xlIHwgUm91bmRlZFJlY3RhbmdsZTtcblxuICAgICAgICAgICAgICAgIHNlcXVlbmNlQm91bmRzLmFkZEZyYW1lUGFkKHJlY3QueCwgcmVjdC55LCByZWN0LnggKyByZWN0LndpZHRoLCByZWN0LnkgKyByZWN0LmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoLCBsaW5lV2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gU0hBUEVTLkNJUkMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2lyY2xlID0gc2hhcGUgYXMgQ2lyY2xlO1xuXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VCb3VuZHMuYWRkRnJhbWVQYWQoY2lyY2xlLngsIGNpcmNsZS55LCBjaXJjbGUueCwgY2lyY2xlLnksXG4gICAgICAgICAgICAgICAgICAgIGNpcmNsZS5yYWRpdXMgKyBsaW5lV2lkdGgsIGNpcmNsZS5yYWRpdXMgKyBsaW5lV2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gU0hBUEVTLkVMSVApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxsaXBzZSA9IHNoYXBlIGFzIEVsbGlwc2U7XG5cbiAgICAgICAgICAgICAgICBzZXF1ZW5jZUJvdW5kcy5hZGRGcmFtZVBhZChlbGxpcHNlLngsIGVsbGlwc2UueSwgZWxsaXBzZS54LCBlbGxpcHNlLnksXG4gICAgICAgICAgICAgICAgICAgIGVsbGlwc2Uud2lkdGggKyBsaW5lV2lkdGgsIGVsbGlwc2UuaGVpZ2h0ICsgbGluZVdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwb2x5ID0gc2hhcGUgYXMgUG9seWdvbjtcbiAgICAgICAgICAgICAgICAvLyBhZGRpbmcgZGlyZWN0bHkgdG8gdGhlIGJvdW5kc1xuXG4gICAgICAgICAgICAgICAgYm91bmRzLmFkZFZlcnRpY2VzTWF0cml4KGN1ck1hdHJpeCwgKHBvbHkucG9pbnRzIGFzIGFueSksIDAsIHBvbHkucG9pbnRzLmxlbmd0aCwgbGluZVdpZHRoLCBsaW5lV2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZXF1ZW5jZUJvdW5kcy5pc0VtcHR5KCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJvdW5kcy5hZGRCb3VuZHNNYXRyaXgoc2VxdWVuY2VCb3VuZHMsIGN1ck1hdHJpeCk7XG4gICAgICAgIH1cblxuICAgICAgICBib3VuZHMucGFkKHRoaXMuYm91bmRzUGFkZGluZywgdGhpcy5ib3VuZHNQYWRkaW5nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gcG9pbnRzIHVzaW5nIG1hdHJpeC5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBwb2ludHMgLSBQb2ludHMgdG8gdHJhbnNmb3JtXG4gICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gbWF0cml4IC0gVHJhbnNmb3JtIG1hdHJpeFxuICAgICAqL1xuICAgIHByb3RlY3RlZCB0cmFuc2Zvcm1Qb2ludHMocG9pbnRzOiBBcnJheTxudW1iZXI+LCBtYXRyaXg6IE1hdHJpeCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAvIDI7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgeCA9IHBvaW50c1soaSAqIDIpXTtcbiAgICAgICAgICAgIGNvbnN0IHkgPSBwb2ludHNbKGkgKiAyKSArIDFdO1xuXG4gICAgICAgICAgICBwb2ludHNbKGkgKiAyKV0gPSAobWF0cml4LmEgKiB4KSArIChtYXRyaXguYyAqIHkpICsgbWF0cml4LnR4O1xuICAgICAgICAgICAgcG9pbnRzWyhpICogMikgKyAxXSA9IChtYXRyaXguYiAqIHgpICsgKG1hdHJpeC5kICogeSkgKyBtYXRyaXgudHk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgY29sb3JzLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IGNvbG9ycyAtIExpc3Qgb2YgY29sb3JzIHRvIGFkZCB0b1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb2xvciAtIENvbG9yIHRvIGFkZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbHBoYSAtIEFscGhhIHRvIHVzZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIC0gTnVtYmVyIG9mIGNvbG9ycyB0byBhZGRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYWRkQ29sb3JzKGNvbG9yczogQXJyYXk8bnVtYmVyPiwgY29sb3I6IG51bWJlciwgYWxwaGE6IG51bWJlciwgc2l6ZTogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gVE9ETyB1c2UgdGhlIHByZW11bHRpcGx5IGJpdHMgSXZhbiBhZGRlZFxuICAgICAgICBjb25zdCByZ2IgPSAoY29sb3IgPj4gMTYpICsgKGNvbG9yICYgMHhmZjAwKSArICgoY29sb3IgJiAweGZmKSA8PCAxNik7XG5cbiAgICAgICAgY29uc3QgcmdiYSA9ICBwcmVtdWx0aXBseVRpbnQocmdiLCBhbHBoYSk7XG5cbiAgICAgICAgd2hpbGUgKHNpemUtLSA+IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbG9ycy5wdXNoKHJnYmEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIHRleHR1cmUgaWQgdGhhdCB0aGUgc2hhZGVyL2ZyYWdtZW50IHdhbnRzIHRvIHVzZS5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSB0ZXh0dXJlSWRzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemVcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYWRkVGV4dHVyZUlkcyh0ZXh0dXJlSWRzOiBBcnJheTxudW1iZXI+LCBpZDogbnVtYmVyLCBzaXplOiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICB3aGlsZSAoc2l6ZS0tID4gMClcbiAgICAgICAge1xuICAgICAgICAgICAgdGV4dHVyZUlkcy5wdXNoKGlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyB0aGUgVVZzIGZvciBhIHNoYXBlLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IHZlcnRzIC0gVmVydGljZXNcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSB1dnMgLSBVVnNcbiAgICAgKiBAcGFyYW0ge1BJWEkuVGV4dHVyZX0gdGV4dHVyZSAtIFJlZmVyZW5jZSB0byBUZXh0dXJlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IC0gSW5kZXggYnVmZmVyIHN0YXJ0IGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIC0gVGhlIHNpemUvbGVuZ3RoIGZvciBpbmRleCBidWZmZXIuXG4gICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gW21hdHJpeF0gLSBPcHRpb25hbCB0cmFuc2Zvcm0gZm9yIGFsbCBwb2ludHMuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFkZFV2cyhcbiAgICAgICAgdmVydHM6IEFycmF5PG51bWJlcj4sXG4gICAgICAgIHV2czogQXJyYXk8bnVtYmVyPixcbiAgICAgICAgdGV4dHVyZTogVGV4dHVyZSxcbiAgICAgICAgc3RhcnQ6IG51bWJlciwgc2l6ZTpcbiAgICAgICAgbnVtYmVyLCBtYXRyaXg6XG4gICAgICAgIE1hdHJpeCA9IG51bGwpOiB2b2lkXG4gICAge1xuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICBjb25zdCB1dnNTdGFydCA9IHV2cy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGZyYW1lID0gdGV4dHVyZS5mcmFtZTtcblxuICAgICAgICB3aGlsZSAoaW5kZXggPCBzaXplKVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgeCA9IHZlcnRzWyhzdGFydCArIGluZGV4KSAqIDJdO1xuICAgICAgICAgICAgbGV0IHkgPSB2ZXJ0c1soKHN0YXJ0ICsgaW5kZXgpICogMikgKyAxXTtcblxuICAgICAgICAgICAgaWYgKG1hdHJpeClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBueCA9IChtYXRyaXguYSAqIHgpICsgKG1hdHJpeC5jICogeSkgKyBtYXRyaXgudHg7XG5cbiAgICAgICAgICAgICAgICB5ID0gKG1hdHJpeC5iICogeCkgKyAobWF0cml4LmQgKiB5KSArIG1hdHJpeC50eTtcbiAgICAgICAgICAgICAgICB4ID0gbng7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluZGV4Kys7XG5cbiAgICAgICAgICAgIHV2cy5wdXNoKHggLyBmcmFtZS53aWR0aCwgeSAvIGZyYW1lLmhlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBiYXNlVGV4dHVyZSA9IHRleHR1cmUuYmFzZVRleHR1cmU7XG5cbiAgICAgICAgaWYgKGZyYW1lLndpZHRoIDwgYmFzZVRleHR1cmUud2lkdGhcbiAgICAgICAgICAgIHx8IGZyYW1lLmhlaWdodCA8IGJhc2VUZXh0dXJlLmhlaWdodClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5hZGp1c3RVdnModXZzLCB0ZXh0dXJlLCB1dnNTdGFydCwgc2l6ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb2RpZnkgdXZzIGFycmF5IGFjY29yZGluZyB0byBwb3NpdGlvbiBvZiB0ZXh0dXJlIHJlZ2lvblxuICAgICAqIERvZXMgbm90IHdvcmsgd2l0aCByb3RhdGVkIG9yIHRyaW1tZWQgdGV4dHVyZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IHV2cyAtIGFycmF5XG4gICAgICogQHBhcmFtIHtQSVhJLlRleHR1cmV9IHRleHR1cmUgLSByZWdpb25cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgLSBzdGFydGluZyBpbmRleCBmb3IgdXZzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgLSBob3cgbWFueSBwb2ludHMgdG8gYWRqdXN0XG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFkanVzdFV2cyh1dnM6IEFycmF5PG51bWJlcj4sIHRleHR1cmU6IFRleHR1cmUsIHN0YXJ0OiBudW1iZXIsIHNpemU6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGJhc2VUZXh0dXJlID0gdGV4dHVyZS5iYXNlVGV4dHVyZTtcbiAgICAgICAgY29uc3QgZXBzID0gMWUtNjtcbiAgICAgICAgY29uc3QgZmluaXNoID0gc3RhcnQgKyAoc2l6ZSAqIDIpO1xuICAgICAgICBjb25zdCBmcmFtZSA9IHRleHR1cmUuZnJhbWU7XG4gICAgICAgIGNvbnN0IHNjYWxlWCA9IGZyYW1lLndpZHRoIC8gYmFzZVRleHR1cmUud2lkdGg7XG4gICAgICAgIGNvbnN0IHNjYWxlWSA9IGZyYW1lLmhlaWdodCAvIGJhc2VUZXh0dXJlLmhlaWdodDtcbiAgICAgICAgbGV0IG9mZnNldFggPSBmcmFtZS54IC8gZnJhbWUud2lkdGg7XG4gICAgICAgIGxldCBvZmZzZXRZID0gZnJhbWUueSAvIGZyYW1lLmhlaWdodDtcbiAgICAgICAgbGV0IG1pblggPSBNYXRoLmZsb29yKHV2c1tzdGFydF0gKyBlcHMpO1xuICAgICAgICBsZXQgbWluWSA9IE1hdGguZmxvb3IodXZzW3N0YXJ0ICsgMV0gKyBlcHMpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydCArIDI7IGkgPCBmaW5pc2g7IGkgKz0gMilcbiAgICAgICAge1xuICAgICAgICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIE1hdGguZmxvb3IodXZzW2ldICsgZXBzKSk7XG4gICAgICAgICAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgTWF0aC5mbG9vcih1dnNbaSArIDFdICsgZXBzKSk7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0WCAtPSBtaW5YO1xuICAgICAgICBvZmZzZXRZIC09IG1pblk7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGZpbmlzaDsgaSArPSAyKVxuICAgICAgICB7XG4gICAgICAgICAgICB1dnNbaV0gPSAodXZzW2ldICsgb2Zmc2V0WCkgKiBzY2FsZVg7XG4gICAgICAgICAgICB1dnNbaSArIDFdID0gKHV2c1tpICsgMV0gKyBvZmZzZXRZKSAqIHNjYWxlWTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBGaWxsU3R5bGUgfSBmcm9tICcuL0ZpbGxTdHlsZSc7XG5pbXBvcnQgeyBMSU5FX0pPSU4sIExJTkVfQ0FQIH0gZnJvbSAnLi4vY29uc3QnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGxpbmUgc3R5bGUgZm9yIEdyYXBoaWNzLlxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5GaWxsU3R5bGVcbiAqL1xuZXhwb3J0IGNsYXNzIExpbmVTdHlsZSBleHRlbmRzIEZpbGxTdHlsZVxue1xuICAgIC8qKlxuICAgICAqIFRoZSB3aWR0aCAodGhpY2tuZXNzKSBvZiBhbnkgbGluZXMgZHJhd24uXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIHB1YmxpYyB3aWR0aCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYWxpZ25tZW50IG9mIGFueSBsaW5lcyBkcmF3biAoMC41ID0gbWlkZGxlLCAxID0gb3V0ZXIsIDAgPSBpbm5lcikuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMC41XG4gICAgICovXG4gICAgcHVibGljIGFsaWdubWVudCA9IDAuNTtcblxuICAgIC8qKlxuICAgICAqIElmIHRydWUgdGhlIGxpbmVzIHdpbGwgYmUgZHJhdyB1c2luZyBMSU5FUyBpbnN0ZWFkIG9mIFRSSUFOR0xFX1NUUklQXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgcHVibGljIG5hdGl2ZSA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogTGluZSBjYXAgc3R5bGUuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtQSVhJLkxJTkVfQ0FQfVxuICAgICAqIEBkZWZhdWx0IFBJWEkuTElORV9DQVAuQlVUVFxuICAgICAqL1xuICAgIHB1YmxpYyBjYXAgPSBMSU5FX0NBUC5CVVRUO1xuXG4gICAgLyoqXG4gICAgICogTGluZSBqb2luIHN0eWxlLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7UElYSS5MSU5FX0pPSU59XG4gICAgICogQGRlZmF1bHQgUElYSS5MSU5FX0pPSU4uTUlURVJcbiAgICAgKi9cbiAgICBwdWJsaWMgam9pbiA9IExJTkVfSk9JTi5NSVRFUjtcblxuICAgIC8qKlxuICAgICAqIE1pdGVyIGxpbWl0LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDEwXG4gICAgICovXG4gICAgcHVibGljIG1pdGVyTGltaXQgPSAxMDtcblxuICAgIC8qKlxuICAgICAqIENsb25lcyB0aGUgb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkxpbmVTdHlsZX1cbiAgICAgKi9cbiAgICBwdWJsaWMgY2xvbmUoKTogTGluZVN0eWxlXG4gICAge1xuICAgICAgICBjb25zdCBvYmogPSBuZXcgTGluZVN0eWxlKCk7XG5cbiAgICAgICAgb2JqLmNvbG9yID0gdGhpcy5jb2xvcjtcbiAgICAgICAgb2JqLmFscGhhID0gdGhpcy5hbHBoYTtcbiAgICAgICAgb2JqLnRleHR1cmUgPSB0aGlzLnRleHR1cmU7XG4gICAgICAgIG9iai5tYXRyaXggPSB0aGlzLm1hdHJpeDtcbiAgICAgICAgb2JqLnZpc2libGUgPSB0aGlzLnZpc2libGU7XG4gICAgICAgIG9iai53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICAgIG9iai5hbGlnbm1lbnQgPSB0aGlzLmFsaWdubWVudDtcbiAgICAgICAgb2JqLm5hdGl2ZSA9IHRoaXMubmF0aXZlO1xuICAgICAgICBvYmouY2FwID0gdGhpcy5jYXA7XG4gICAgICAgIG9iai5qb2luID0gdGhpcy5qb2luO1xuICAgICAgICBvYmoubWl0ZXJMaW1pdCA9IHRoaXMubWl0ZXJMaW1pdDtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBsaW5lIHN0eWxlIHRvIGRlZmF1bHQuXG4gICAgICovXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHN1cGVyLnJlc2V0KCk7XG5cbiAgICAgICAgLy8gT3ZlcnJpZGUgZGVmYXVsdCBsaW5lIHN0eWxlIGNvbG9yXG4gICAgICAgIHRoaXMuY29sb3IgPSAweDA7XG5cbiAgICAgICAgdGhpcy5hbGlnbm1lbnQgPSAwLjU7XG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xuICAgICAgICB0aGlzLm5hdGl2ZSA9IGZhbHNlO1xuICAgIH1cbn1cbiIsICJpbXBvcnQge1xuICAgIENpcmNsZSxcbiAgICBFbGxpcHNlLFxuICAgIFBJXzIsXG4gICAgUG9pbnQsXG4gICAgUG9seWdvbixcbiAgICBSZWN0YW5nbGUsXG4gICAgUm91bmRlZFJlY3RhbmdsZSxcbiAgICBNYXRyaXgsXG4gICAgU0hBUEVTLFxufSBmcm9tICdAcGl4aS9tYXRoJztcblxuaW1wb3J0IHsgVGV4dHVyZSwgVW5pZm9ybUdyb3VwLCBTdGF0ZSwgUmVuZGVyZXIsIEJhdGNoRHJhd0NhbGwgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB7IEJlemllclV0aWxzLCBRdWFkcmF0aWNVdGlscywgQXJjVXRpbHMsIFN0YXIgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IGhleDJyZ2IsIGRlcHJlY2F0aW9uIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHsgR3JhcGhpY3NHZW9tZXRyeSB9IGZyb20gJy4vR3JhcGhpY3NHZW9tZXRyeSc7XG5pbXBvcnQgeyBGaWxsU3R5bGUgfSBmcm9tICcuL3N0eWxlcy9GaWxsU3R5bGUnO1xuaW1wb3J0IHsgTGluZVN0eWxlIH0gZnJvbSAnLi9zdHlsZXMvTGluZVN0eWxlJztcbmltcG9ydCB7IEJMRU5EX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuaW1wb3J0IHsgU2hhZGVyIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5cbmltcG9ydCB0eXBlIHsgSVNoYXBlLCBJUG9pbnREYXRhIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgdHlwZSB7IElEZXN0cm95T3B0aW9ucyB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuaW1wb3J0IHsgTElORV9KT0lOLCBMSU5FX0NBUCB9IGZyb20gJy4vY29uc3QnO1xuXG4vKipcbiAqIEJhdGNoIGVsZW1lbnQgY29tcHV0ZWQgZnJvbSBHcmFwaGljcyBnZW9tZXRyeVxuICovXG5leHBvcnQgaW50ZXJmYWNlIElHcmFwaGljc0JhdGNoRWxlbWVudCB7XG4gICAgdmVydGV4RGF0YTogRmxvYXQzMkFycmF5O1xuICAgIGJsZW5kTW9kZTogQkxFTkRfTU9ERVM7XG4gICAgaW5kaWNlczogVWludDE2QXJyYXkgfCBVaW50MzJBcnJheTtcbiAgICB1dnM6IEZsb2F0MzJBcnJheTtcbiAgICBhbHBoYTogbnVtYmVyO1xuICAgIHdvcmxkQWxwaGE6IG51bWJlcjtcbiAgICBfYmF0Y2hSR0I6IG51bWJlcltdO1xuICAgIF90aW50UkdCOiBudW1iZXI7XG4gICAgX3RleHR1cmU6IFRleHR1cmU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUZpbGxTdHlsZU9wdGlvbnMge1xuICAgIGNvbG9yPzogbnVtYmVyO1xuICAgIGFscGhhPzogbnVtYmVyO1xuICAgIHRleHR1cmU/OiBUZXh0dXJlO1xuICAgIG1hdHJpeD86IE1hdHJpeDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTGluZVN0eWxlT3B0aW9ucyBleHRlbmRzIElGaWxsU3R5bGVPcHRpb25zIHtcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBhbGlnbm1lbnQ/OiBudW1iZXI7XG4gICAgbmF0aXZlPzogYm9vbGVhbjtcbiAgICBjYXA/OiBMSU5FX0NBUDtcbiAgICBqb2luPzogTElORV9KT0lOO1xuICAgIG1pdGVyTGltaXQ/OiBudW1iZXI7XG59XG5cbmNvbnN0IHRlbXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuXG4vLyBhIGRlZmF1bHQgc2hhZGVycyBtYXAgdXNlZCBieSBncmFwaGljcy4uXG5jb25zdCBERUZBVUxUX1NIQURFUlM6IHtba2V5OiBzdHJpbmddOiBTaGFkZXJ9ID0ge307XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JhcGhpY3MgZXh0ZW5kcyBHbG9iYWxNaXhpbnMuR3JhcGhpY3MsIENvbnRhaW5lciB7fVxuXG4vKipcbiAqIFRoZSBHcmFwaGljcyBjbGFzcyBjb250YWlucyBtZXRob2RzIHVzZWQgdG8gZHJhdyBwcmltaXRpdmUgc2hhcGVzIHN1Y2ggYXMgbGluZXMsIGNpcmNsZXMgYW5kXG4gKiByZWN0YW5nbGVzIHRvIHRoZSBkaXNwbGF5LCBhbmQgdG8gY29sb3IgYW5kIGZpbGwgdGhlbS5cbiAqXG4gKiBOb3RlIHRoYXQgYmVjYXVzZSBHcmFwaGljcyBjYW4gc2hhcmUgYSBHcmFwaGljc0dlb21ldHJ5IHdpdGggb3RoZXIgaW5zdGFuY2VzLFxuICogaXQgaXMgbmVjZXNzYXJ5IHRvIGNhbGwgYGRlc3Ryb3koKWAgdG8gcHJvcGVybHkgZGVyZWZlcmVuY2UgdGhlIHVuZGVybHlpbmdcbiAqIEdyYXBoaWNzR2VvbWV0cnkgYW5kIGF2b2lkIGEgbWVtb3J5IGxlYWsuIEFsdGVybmF0aXZlbHksIGtlZXAgdXNpbmcgdGhlIHNhbWVcbiAqIEdyYXBoaWNzIGluc3RhbmNlIGFuZCBjYWxsIGBjbGVhcigpYCBiZXR3ZWVuIHJlZHJhd3MuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLkNvbnRhaW5lclxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEdyYXBoaWNzIGV4dGVuZHMgQ29udGFpbmVyXG57XG4gICAgLyoqXG4gICAgICogVGVtcG9yYXJ5IHBvaW50IHRvIHVzZSBmb3IgY29udGFpbnNQb2ludFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwcml2YXRlXG4gICAgICogQG1lbWJlciB7UElYSS5Qb2ludH1cbiAgICAgKi9cblxuICAgIHN0YXRpYyBfVEVNUF9QT0lOVCA9IG5ldyBQb2ludCgpO1xuXG4gICAgcHVibGljIHNoYWRlcjogU2hhZGVyO1xuICAgIHB1YmxpYyBwbHVnaW5OYW1lOiBzdHJpbmc7XG5cbiAgICBwcm90ZWN0ZWQgY3VycmVudFBhdGg6IFBvbHlnb247XG4gICAgcHJvdGVjdGVkIGJhdGNoZXM6IEFycmF5PElHcmFwaGljc0JhdGNoRWxlbWVudD47XG4gICAgcHJvdGVjdGVkIGJhdGNoVGludDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBiYXRjaERpcnR5OiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIHZlcnRleERhdGE6IEZsb2F0MzJBcnJheTtcblxuICAgIHByb3RlY3RlZCBfZmlsbFN0eWxlOiBGaWxsU3R5bGU7XG4gICAgcHJvdGVjdGVkIF9saW5lU3R5bGU6IExpbmVTdHlsZTtcbiAgICBwcm90ZWN0ZWQgX21hdHJpeDogTWF0cml4O1xuICAgIHByb3RlY3RlZCBfaG9sZU1vZGU6IGJvb2xlYW47XG4gICAgcHJvdGVjdGVkIF90cmFuc2Zvcm1JRDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfdGludDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBzdGF0ZTogU3RhdGU7XG4gICAgcHJpdmF0ZSBfZ2VvbWV0cnk6IEdyYXBoaWNzR2VvbWV0cnk7XG5cbiAgICAvKipcbiAgICAgKiBJbmNsdWRlcyB2ZXJ0ZXggcG9zaXRpb25zLCBmYWNlIGluZGljZXMsIG5vcm1hbHMsIGNvbG9ycywgVVZzLCBhbmRcbiAgICAgKiBjdXN0b20gYXR0cmlidXRlcyB3aXRoaW4gYnVmZmVycywgcmVkdWNpbmcgdGhlIGNvc3Qgb2YgcGFzc2luZyBhbGxcbiAgICAgKiB0aGlzIGRhdGEgdG8gdGhlIEdQVS4gQ2FuIGJlIHNoYXJlZCBiZXR3ZWVuIG11bHRpcGxlIE1lc2ggb3IgR3JhcGhpY3Mgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuR3JhcGhpY3NHZW9tZXRyeX1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGdlb21ldHJ5KCk6IEdyYXBoaWNzR2VvbWV0cnlcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZW9tZXRyeTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuR3JhcGhpY3NHZW9tZXRyeX0gW2dlb21ldHJ5PW51bGxdIC0gR2VvbWV0cnkgdG8gdXNlLCBpZiBvbWl0dGVkXG4gICAgICogICAgICAgIHdpbGwgY3JlYXRlIGEgbmV3IEdyYXBoaWNzR2VvbWV0cnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZ2VvbWV0cnk6IEdyYXBoaWNzR2VvbWV0cnkgPSBudWxsKVxuICAgIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLl9nZW9tZXRyeSA9IGdlb21ldHJ5IHx8IG5ldyBHcmFwaGljc0dlb21ldHJ5KCk7XG4gICAgICAgIHRoaXMuX2dlb21ldHJ5LnJlZkNvdW50Kys7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgdGhlIHZlcnRleCBhbmQgZnJhZ21lbnQgc2hhZGVycyB0aGF0IHByb2Nlc3NlcyB0aGUgZ2VvbWV0cnkgYW5kIHJ1bnMgb24gdGhlIEdQVS5cbiAgICAgICAgICogQ2FuIGJlIHNoYXJlZCBiZXR3ZWVuIG11bHRpcGxlIEdyYXBoaWNzIG9iamVjdHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuU2hhZGVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaGFkZXIgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXByZXNlbnRzIHRoZSBXZWJHTCBzdGF0ZSB0aGUgR3JhcGhpY3MgcmVxdWlyZWQgdG8gcmVuZGVyLCBleGNsdWRlcyBzaGFkZXIgYW5kIGdlb21ldHJ5LiBFLmcuLFxuICAgICAgICAgKiBibGVuZCBtb2RlLCBjdWxsaW5nLCBkZXB0aCB0ZXN0aW5nLCBkaXJlY3Rpb24gb2YgcmVuZGVyaW5nIHRyaWFuZ2xlcywgYmFja2ZhY2UsIGV0Yy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5TdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5mb3IyZCgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDdXJyZW50IGZpbGwgc3R5bGVcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5GaWxsU3R5bGV9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2ZpbGxTdHlsZSA9IG5ldyBGaWxsU3R5bGUoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3VycmVudCBsaW5lIHN0eWxlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuTGluZVN0eWxlfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9saW5lU3R5bGUgPSBuZXcgTGluZVN0eWxlKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1cnJlbnQgc2hhcGUgdHJhbnNmb3JtIG1hdHJpeC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5NYXRyaXh9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX21hdHJpeCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1cnJlbnQgaG9sZSBtb2RlIGlzIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2hvbGVNb2RlID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1cnJlbnQgcGF0aFxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlBvbHlnb259XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudFBhdGggPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIGNhY2hlQXNCaXRtYXAgaXMgc2V0IHRvIHRydWUgdGhlIGdyYXBoaWNzIG9iamVjdCB3aWxsIGJlIHJlbmRlcmVkIGFzIGlmIGl0IHdhcyBhIHNwcml0ZS5cbiAgICAgICAgICogVGhpcyBpcyB1c2VmdWwgaWYgeW91ciBncmFwaGljcyBlbGVtZW50IGRvZXMgbm90IGNoYW5nZSBvZnRlbiwgYXMgaXQgd2lsbCBzcGVlZCB1cCB0aGUgcmVuZGVyaW5nXG4gICAgICAgICAqIG9mIHRoZSBvYmplY3QgaW4gZXhjaGFuZ2UgZm9yIHRha2luZyB1cCB0ZXh0dXJlIG1lbW9yeS4gSXQgaXMgYWxzbyB1c2VmdWwgaWYgeW91IG5lZWQgdGhlIGdyYXBoaWNzXG4gICAgICAgICAqIG9iamVjdCB0byBiZSBhbnRpLWFsaWFzZWQsIGJlY2F1c2UgaXQgd2lsbCBiZSByZW5kZXJlZCB1c2luZyBjYW52YXMuIFRoaXMgaXMgbm90IHJlY29tbWVuZGVkIGlmXG4gICAgICAgICAqIHlvdSBhcmUgY29uc3RhbnRseSByZWRyYXdpbmcgdGhlIGdyYXBoaWNzIGVsZW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBuYW1lIGNhY2hlQXNCaXRtYXBcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQG1lbWJlcm9mIFBJWEkuR3JhcGhpY3MjXG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvbGxlY3Rpb25zIG9mIGJhdGNoZXMhIFRoZXNlIGNhbiBiZSBkcmF3biBieSB0aGUgcmVuZGVyZXIgYmF0Y2ggc3lzdGVtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdFtdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYXRjaGVzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSBkaXJ0eSBmb3IgbGltaXRpbmcgY2FsY3VsYXRpbmcgdGludHMgZm9yIGJhdGNoZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAtMVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYXRjaFRpbnQgPSAtMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIGRpcnR5IGZvciBsaW1pdGluZyBjYWxjdWxhdGluZyBiYXRjaGVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgLTFcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmF0Y2hEaXJ0eSA9IC0xO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3B5IG9mIHRoZSBvYmplY3QgdmVydGV4IGRhdGEuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQG1lbWJlciB7RmxvYXQzMkFycmF5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0ZXhEYXRhID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyZXIgcGx1Z2luIGZvciBiYXRjaGluZ1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdiYXRjaCdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGx1Z2luTmFtZSA9ICdiYXRjaCc7XG5cbiAgICAgICAgdGhpcy5fdHJhbnNmb3JtSUQgPSAtMTtcblxuICAgICAgICAvLyBTZXQgZGVmYXVsdFxuICAgICAgICB0aGlzLnRpbnQgPSAweEZGRkZGRjtcbiAgICAgICAgdGhpcy5ibGVuZE1vZGUgPSBCTEVORF9NT0RFUy5OT1JNQUw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBHcmFwaGljcyBvYmplY3Qgd2l0aCB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhpcyBvbmUuXG4gICAgICogTm90ZSB0aGF0IG9ubHkgdGhlIGdlb21ldHJ5IG9mIHRoZSBvYmplY3QgaXMgY2xvbmVkLCBub3QgaXRzIHRyYW5zZm9ybSAocG9zaXRpb24sc2NhbGUsZXRjKVxuICAgICAqXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gQSBjbG9uZSBvZiB0aGUgZ3JhcGhpY3Mgb2JqZWN0XG4gICAgICovXG4gICAgcHVibGljIGNsb25lKCk6IEdyYXBoaWNzXG4gICAge1xuICAgICAgICB0aGlzLmZpbmlzaFBvbHkoKTtcblxuICAgICAgICByZXR1cm4gbmV3IEdyYXBoaWNzKHRoaXMuX2dlb21ldHJ5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmxlbmQgbW9kZSB0byBiZSBhcHBsaWVkIHRvIHRoZSBncmFwaGljIHNoYXBlLiBBcHBseSBhIHZhbHVlIG9mXG4gICAgICogYFBJWEkuQkxFTkRfTU9ERVMuTk9STUFMYCB0byByZXNldCB0aGUgYmxlbmQgbW9kZS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCBQSVhJLkJMRU5EX01PREVTLk5PUk1BTDtcbiAgICAgKiBAc2VlIFBJWEkuQkxFTkRfTU9ERVNcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJsZW5kTW9kZSh2YWx1ZTogQkxFTkRfTU9ERVMpXG4gICAge1xuICAgICAgICB0aGlzLnN0YXRlLmJsZW5kTW9kZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgYmxlbmRNb2RlKCk6IEJMRU5EX01PREVTXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5ibGVuZE1vZGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHRpbnQgYXBwbGllZCB0byB0aGUgZ3JhcGhpYyBzaGFwZS4gVGhpcyBpcyBhIGhleCB2YWx1ZS4gQSB2YWx1ZSBvZlxuICAgICAqIDB4RkZGRkZGIHdpbGwgcmVtb3ZlIGFueSB0aW50IGVmZmVjdC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCAweEZGRkZGRlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgdGludCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXQgdGludCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5fdGludCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGZpbGwgc3R5bGUuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtQSVhJLkZpbGxTdHlsZX1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGZpbGwoKTogRmlsbFN0eWxlXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlsbFN0eWxlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGxpbmUgc3R5bGUuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtQSVhJLkxpbmVTdHlsZX1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGxpbmUoKTogTGluZVN0eWxlXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGluZVN0eWxlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgbGluZSBzdHlsZSB1c2VkIGZvciBzdWJzZXF1ZW50IGNhbGxzIHRvIEdyYXBoaWNzIG1ldGhvZHMgc3VjaCBhcyB0aGUgbGluZVRvKClcbiAgICAgKiBtZXRob2Qgb3IgdGhlIGRyYXdDaXJjbGUoKSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbWV0aG9kIFBJWEkuR3JhcGhpY3MjbGluZVN0eWxlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt3aWR0aD0wXSAtIHdpZHRoIG9mIHRoZSBsaW5lIHRvIGRyYXcsIHdpbGwgdXBkYXRlIHRoZSBvYmplY3RzIHN0b3JlZCBzdHlsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbY29sb3I9MHgwXSAtIGNvbG9yIG9mIHRoZSBsaW5lIHRvIGRyYXcsIHdpbGwgdXBkYXRlIHRoZSBvYmplY3RzIHN0b3JlZCBzdHlsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYWxwaGE9MV0gLSBhbHBoYSBvZiB0aGUgbGluZSB0byBkcmF3LCB3aWxsIHVwZGF0ZSB0aGUgb2JqZWN0cyBzdG9yZWQgc3R5bGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FsaWdubWVudD0wLjVdIC0gYWxpZ25tZW50IG9mIHRoZSBsaW5lIHRvIGRyYXcsICgwID0gaW5uZXIsIDAuNSA9IG1pZGRsZSwgMSA9IG91dHRlcilcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtuYXRpdmU9ZmFsc2VdIC0gSWYgdHJ1ZSB0aGUgbGluZXMgd2lsbCBiZSBkcmF3IHVzaW5nIExJTkVTIGluc3RlYWQgb2YgVFJJQU5HTEVfU1RSSVBcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdyYXBoaWNzfSBUaGlzIEdyYXBoaWNzIG9iamVjdC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzXG4gICAgICovXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBsaW5lIHN0eWxlIHVzZWQgZm9yIHN1YnNlcXVlbnQgY2FsbHMgdG8gR3JhcGhpY3MgbWV0aG9kcyBzdWNoIGFzIHRoZSBsaW5lVG8oKVxuICAgICAqIG1ldGhvZCBvciB0aGUgZHJhd0NpcmNsZSgpIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBMaW5lIHN0eWxlIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGg9MF0gLSB3aWR0aCBvZiB0aGUgbGluZSB0byBkcmF3LCB3aWxsIHVwZGF0ZSB0aGUgb2JqZWN0cyBzdG9yZWQgc3R5bGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuY29sb3I9MHgwXSAtIGNvbG9yIG9mIHRoZSBsaW5lIHRvIGRyYXcsIHdpbGwgdXBkYXRlIHRoZSBvYmplY3RzIHN0b3JlZCBzdHlsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5hbHBoYT0xXSAtIGFscGhhIG9mIHRoZSBsaW5lIHRvIGRyYXcsIHdpbGwgdXBkYXRlIHRoZSBvYmplY3RzIHN0b3JlZCBzdHlsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5hbGlnbm1lbnQ9MC41XSAtIGFsaWdubWVudCBvZiB0aGUgbGluZSB0byBkcmF3LCAoMCA9IGlubmVyLCAwLjUgPSBtaWRkbGUsIDEgPSBvdXR0ZXIpXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5uYXRpdmU9ZmFsc2VdIC0gSWYgdHJ1ZSB0aGUgbGluZXMgd2lsbCBiZSBkcmF3IHVzaW5nIExJTkVTIGluc3RlYWQgb2YgVFJJQU5HTEVfU1RSSVBcbiAgICAgKiBAcGFyYW0ge1BJWEkuTElORV9DQVB9W29wdGlvbnMuY2FwPVBJWEkuTElORV9DQVAuQlVUVF0gLSBsaW5lIGNhcCBzdHlsZVxuICAgICAqIEBwYXJhbSB7UElYSS5MSU5FX0pPSU59W29wdGlvbnMuam9pbj1QSVhJLkxJTkVfSk9JTi5NSVRFUl0gLSBsaW5lIGpvaW4gc3R5bGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn1bb3B0aW9ucy5taXRlckxpbWl0PTEwXSAtIG1pdGVyIGxpbWl0IHJhdGlvXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBsaW5lU3R5bGUob3B0aW9uczogSUxpbmVTdHlsZU9wdGlvbnMgPSBudWxsKTogdGhpc1xuICAgIHtcbiAgICAgICAgLy8gU3VwcG9ydCBub24tb2JqZWN0IHBhcmFtczogKHdpZHRoLCBjb2xvciwgYWxwaGEsIGFsaWdubWVudCwgbmF0aXZlKVxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGFyZ3NbMF0gfHwgMCxcbiAgICAgICAgICAgICAgICBjb2xvcjogYXJnc1sxXSB8fCAweDAsXG4gICAgICAgICAgICAgICAgYWxwaGE6IGFyZ3NbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3NbMl0gOiAxLFxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogYXJnc1szXSAhPT0gdW5kZWZpbmVkID8gYXJnc1szXSA6IDAuNSxcbiAgICAgICAgICAgICAgICBuYXRpdmU6ICEhYXJnc1s0XSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5saW5lVGV4dHVyZVN0eWxlKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpa2UgbGluZSBzdHlsZSBidXQgc3VwcG9ydCB0ZXh0dXJlIGZvciBsaW5lIGZpbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gQ29sbGVjdGlvbiBvZiBvcHRpb25zIGZvciBzZXR0aW5nIGxpbmUgc3R5bGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoPTBdIC0gd2lkdGggb2YgdGhlIGxpbmUgdG8gZHJhdywgd2lsbCB1cGRhdGUgdGhlIG9iamVjdHMgc3RvcmVkIHN0eWxlXG4gICAgICogQHBhcmFtIHtQSVhJLlRleHR1cmV9IFtvcHRpb25zLnRleHR1cmU9UElYSS5UZXh0dXJlLldISVRFXSAtIFRleHR1cmUgdG8gdXNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmNvbG9yPTB4MF0gLSBjb2xvciBvZiB0aGUgbGluZSB0byBkcmF3LCB3aWxsIHVwZGF0ZSB0aGUgb2JqZWN0cyBzdG9yZWQgc3R5bGUuXG4gICAgICogIERlZmF1bHQgMHhGRkZGRkYgaWYgdGV4dHVyZSBwcmVzZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5hbHBoYT0xXSAtIGFscGhhIG9mIHRoZSBsaW5lIHRvIGRyYXcsIHdpbGwgdXBkYXRlIHRoZSBvYmplY3RzIHN0b3JlZCBzdHlsZVxuICAgICAqIEBwYXJhbSB7UElYSS5NYXRyaXh9IFtvcHRpb25zLm1hdHJpeD1udWxsXSAtIFRleHR1cmUgbWF0cml4IHRvIHRyYW5zZm9ybSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmFsaWdubWVudD0wLjVdIC0gYWxpZ25tZW50IG9mIHRoZSBsaW5lIHRvIGRyYXcsICgwID0gaW5uZXIsIDAuNSA9IG1pZGRsZSwgMSA9IG91dHRlcilcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLm5hdGl2ZT1mYWxzZV0gLSBJZiB0cnVlIHRoZSBsaW5lcyB3aWxsIGJlIGRyYXcgdXNpbmcgTElORVMgaW5zdGVhZCBvZiBUUklBTkdMRV9TVFJJUFxuICAgICAqIEBwYXJhbSB7UElYSS5MSU5FX0NBUH1bb3B0aW9ucy5jYXA9UElYSS5MSU5FX0NBUC5CVVRUXSAtIGxpbmUgY2FwIHN0eWxlXG4gICAgICogQHBhcmFtIHtQSVhJLkxJTkVfSk9JTn1bb3B0aW9ucy5qb2luPVBJWEkuTElORV9KT0lOLk1JVEVSXSAtIGxpbmUgam9pbiBzdHlsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfVtvcHRpb25zLm1pdGVyTGltaXQ9MTBdIC0gbWl0ZXIgbGltaXQgcmF0aW9cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdyYXBoaWNzfSBUaGlzIEdyYXBoaWNzIG9iamVjdC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzXG4gICAgICovXG4gICAgcHVibGljIGxpbmVUZXh0dXJlU3R5bGUob3B0aW9uczogSUxpbmVTdHlsZU9wdGlvbnMpOiB0aGlzXG4gICAge1xuICAgICAgICAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHdpdGggcGFyYW1zOiAod2lkdGgsIHRleHR1cmUsXG4gICAgICAgIC8vIGNvbG9yLCBhbHBoYSwgbWF0cml4LCBhbGlnbm1lbnQsIG5hdGl2ZSlcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJylcbiAgICAgICAge1xuICAgICAgICAgICAgZGVwcmVjYXRpb24oJ3Y1LjIuMCcsICdQbGVhc2UgdXNlIG9iamVjdC1iYXNlZCBvcHRpb25zIGZvciBHcmFwaGljcyNsaW5lVGV4dHVyZVN0eWxlJyk7XG5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgY29uc3QgW3dpZHRoLCB0ZXh0dXJlLCBjb2xvciwgYWxwaGEsIG1hdHJpeCwgYWxpZ25tZW50LCBuYXRpdmVdID0gYXJndW1lbnRzIGFzIGFueTtcblxuICAgICAgICAgICAgb3B0aW9ucyA9IHsgd2lkdGgsIHRleHR1cmUsIGNvbG9yLCBhbHBoYSwgbWF0cml4LCBhbGlnbm1lbnQsIG5hdGl2ZSB9O1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgdW5kZWZpbmVkIGtleXNcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goKGtleSkgPT4gKG9wdGlvbnMgYXMgYW55KVtrZXldID09PSB1bmRlZmluZWQgJiYgZGVsZXRlIChvcHRpb25zIGFzIGFueSlba2V5XSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcHBseSBkZWZhdWx0c1xuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgICAgIHRleHR1cmU6IFRleHR1cmUuV0hJVEUsXG4gICAgICAgICAgICBjb2xvcjogKG9wdGlvbnMgJiYgb3B0aW9ucy50ZXh0dXJlKSA/IDB4RkZGRkZGIDogMHgwLFxuICAgICAgICAgICAgYWxwaGE6IDEsXG4gICAgICAgICAgICBtYXRyaXg6IG51bGwsXG4gICAgICAgICAgICBhbGlnbm1lbnQ6IDAuNSxcbiAgICAgICAgICAgIG5hdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICBjYXA6IExJTkVfQ0FQLkJVVFQsXG4gICAgICAgICAgICBqb2luOiBMSU5FX0pPSU4uTUlURVIsXG4gICAgICAgICAgICBtaXRlckxpbWl0OiAxMCxcbiAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhdGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb2x5KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2aXNpYmxlID0gb3B0aW9ucy53aWR0aCA+IDAgJiYgb3B0aW9ucy5hbHBoYSA+IDA7XG5cbiAgICAgICAgaWYgKCF2aXNpYmxlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9saW5lU3R5bGUucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm1hdHJpeClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1hdHJpeCA9IG9wdGlvbnMubWF0cml4LmNsb25lKCk7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5tYXRyaXguaW52ZXJ0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5fbGluZVN0eWxlLCB7IHZpc2libGUgfSwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFydCBhIHBvbHlnb24gb2JqZWN0IGludGVybmFsbHlcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHN0YXJ0UG9seSgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGF0aClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5jdXJyZW50UGF0aC5wb2ludHM7XG4gICAgICAgICAgICBjb25zdCBsZW4gPSB0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChsZW4gPiAyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1NoYXBlKHRoaXMuY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhdGggPSBuZXcgUG9seWdvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhdGguY2xvc2VTdHJva2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5wdXNoKHBvaW50c1tsZW4gLSAyXSwgcG9pbnRzW2xlbiAtIDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhdGggPSBuZXcgUG9seWdvbigpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGF0aC5jbG9zZVN0cm9rZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluaXNoIHRoZSBwb2x5Z29uIG9iamVjdC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgZmluaXNoUG9seSgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGF0aClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhdGgucG9pbnRzLmxlbmd0aCA+IDIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3U2hhcGUodGhpcy5jdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGF0aCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBjdXJyZW50IGRyYXdpbmcgcG9zaXRpb24gdG8geCwgeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gdGhlIFggY29vcmRpbmF0ZSB0byBtb3ZlIHRvXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSB0aGUgWSBjb29yZGluYXRlIHRvIG1vdmUgdG9cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdyYXBoaWNzfSBUaGlzIEdyYXBoaWNzIG9iamVjdC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzXG4gICAgICovXG4gICAgcHVibGljIG1vdmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXNcbiAgICB7XG4gICAgICAgIHRoaXMuc3RhcnRQb2x5KCk7XG4gICAgICAgIHRoaXMuY3VycmVudFBhdGgucG9pbnRzWzBdID0geDtcbiAgICAgICAgdGhpcy5jdXJyZW50UGF0aC5wb2ludHNbMV0gPSB5O1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXdzIGEgbGluZSB1c2luZyB0aGUgY3VycmVudCBsaW5lIHN0eWxlIGZyb20gdGhlIGN1cnJlbnQgZHJhd2luZyBwb3NpdGlvbiB0byAoeCwgeSk7XG4gICAgICogVGhlIGN1cnJlbnQgZHJhd2luZyBwb3NpdGlvbiBpcyB0aGVuIHNldCB0byAoeCwgeSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIHRoZSBYIGNvb3JkaW5hdGUgdG8gZHJhdyB0b1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gdGhlIFkgY29vcmRpbmF0ZSB0byBkcmF3IHRvXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBsaW5lVG8oeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFBhdGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubW92ZVRvKDAsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIGR1cGxpY2F0ZXMuLlxuICAgICAgICBjb25zdCBwb2ludHMgPSB0aGlzLmN1cnJlbnRQYXRoLnBvaW50cztcbiAgICAgICAgY29uc3QgZnJvbVggPSBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDJdO1xuICAgICAgICBjb25zdCBmcm9tWSA9IHBvaW50c1twb2ludHMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgaWYgKGZyb21YICE9PSB4IHx8IGZyb21ZICE9PSB5KVxuICAgICAgICB7XG4gICAgICAgICAgICBwb2ludHMucHVzaCh4LCB5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGN1cnZlXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt4PTBdXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt5PTBdXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9pbml0Q3VydmUoeCA9IDAsIHkgPSAwKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhdGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGF0aC5wb2ludHMgPSBbeCwgeV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm1vdmVUbyh4LCB5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgcG9pbnRzIGZvciBhIHF1YWRyYXRpYyBiZXppZXIgY3VydmUgYW5kIHRoZW4gZHJhd3MgaXQuXG4gICAgICogQmFzZWQgb246IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NTA5Ny9ob3ctZG8taS1pbXBsZW1lbnQtYS1iZXppZXItY3VydmUtaW4tY1xuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNwWCAtIENvbnRyb2wgcG9pbnQgeFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjcFkgLSBDb250cm9sIHBvaW50IHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9YIC0gRGVzdGluYXRpb24gcG9pbnQgeFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b1kgLSBEZXN0aW5hdGlvbiBwb2ludCB5XG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBxdWFkcmF0aWNDdXJ2ZVRvKGNwWDogbnVtYmVyLCBjcFk6IG51bWJlciwgdG9YOiBudW1iZXIsIHRvWTogbnVtYmVyKTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy5faW5pdEN1cnZlKCk7XG5cbiAgICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5jdXJyZW50UGF0aC5wb2ludHM7XG5cbiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubW92ZVRvKDAsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgUXVhZHJhdGljVXRpbHMuY3VydmVUbyhjcFgsIGNwWSwgdG9YLCB0b1ksIHBvaW50cyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBwb2ludHMgZm9yIGEgYmV6aWVyIGN1cnZlIGFuZCB0aGVuIGRyYXdzIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNwWCAtIENvbnRyb2wgcG9pbnQgeFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjcFkgLSBDb250cm9sIHBvaW50IHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY3BYMiAtIFNlY29uZCBDb250cm9sIHBvaW50IHhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY3BZMiAtIFNlY29uZCBDb250cm9sIHBvaW50IHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9YIC0gRGVzdGluYXRpb24gcG9pbnQgeFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b1kgLSBEZXN0aW5hdGlvbiBwb2ludCB5XG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBiZXppZXJDdXJ2ZVRvKGNwWDogbnVtYmVyLCBjcFk6IG51bWJlciwgY3BYMjogbnVtYmVyLCBjcFkyOiBudW1iZXIsIHRvWDogbnVtYmVyLCB0b1k6IG51bWJlcik6IHRoaXNcbiAgICB7XG4gICAgICAgIHRoaXMuX2luaXRDdXJ2ZSgpO1xuXG4gICAgICAgIEJlemllclV0aWxzLmN1cnZlVG8oY3BYLCBjcFksIGNwWDIsIGNwWTIsIHRvWCwgdG9ZLCB0aGlzLmN1cnJlbnRQYXRoLnBvaW50cyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGFyY1RvKCkgbWV0aG9kIGNyZWF0ZXMgYW4gYXJjL2N1cnZlIGJldHdlZW4gdHdvIHRhbmdlbnRzIG9uIHRoZSBjYW52YXMuXG4gICAgICpcbiAgICAgKiBcImJvcnJvd2VkXCIgZnJvbSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Z4Y2FudmFzLyAtIHRoYW5rcyBnb29nbGUhXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDEgLSBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSBmaXJzdCB0YW5nZW50IHBvaW50IG9mIHRoZSBhcmNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTEgLSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBmaXJzdCB0YW5nZW50IHBvaW50IG9mIHRoZSBhcmNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDIgLSBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSBlbmQgb2YgdGhlIGFyY1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MiAtIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIGVuZCBvZiB0aGUgYXJjXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyAtIFRoZSByYWRpdXMgb2YgdGhlIGFyY1xuICAgICAqIEByZXR1cm4ge1BJWEkuR3JhcGhpY3N9IFRoaXMgR3JhcGhpY3Mgb2JqZWN0LiBHb29kIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHNcbiAgICAgKi9cbiAgICBwdWJsaWMgYXJjVG8oeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlciwgcmFkaXVzOiBudW1iZXIpOiB0aGlzXG4gICAge1xuICAgICAgICB0aGlzLl9pbml0Q3VydmUoeDEsIHkxKTtcblxuICAgICAgICBjb25zdCBwb2ludHMgPSB0aGlzLmN1cnJlbnRQYXRoLnBvaW50cztcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBBcmNVdGlscy5jdXJ2ZVRvKHgxLCB5MSwgeDIsIHkyLCByYWRpdXMsIHBvaW50cyk7XG5cbiAgICAgICAgaWYgKHJlc3VsdClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgeyBjeCwgY3ksIHJhZGl1cywgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGFudGljbG9ja3dpc2UgfSA9IHJlc3VsdDtcblxuICAgICAgICAgICAgdGhpcy5hcmMoY3gsIGN5LCByYWRpdXMsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBhbnRpY2xvY2t3aXNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBhcmMgbWV0aG9kIGNyZWF0ZXMgYW4gYXJjL2N1cnZlICh1c2VkIHRvIGNyZWF0ZSBjaXJjbGVzLCBvciBwYXJ0cyBvZiBjaXJjbGVzKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjeCAtIFRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGN5IC0gVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gVGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0QW5nbGUgLSBUaGUgc3RhcnRpbmcgYW5nbGUsIGluIHJhZGlhbnMgKDAgaXMgYXQgdGhlIDMgbydjbG9jayBwb3NpdGlvblxuICAgICAqICBvZiB0aGUgYXJjJ3MgY2lyY2xlKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRBbmdsZSAtIFRoZSBlbmRpbmcgYW5nbGUsIGluIHJhZGlhbnNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFthbnRpY2xvY2t3aXNlPWZhbHNlXSAtIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBkcmF3aW5nIHNob3VsZCBiZVxuICAgICAqICBjb3VudGVyLWNsb2Nrd2lzZSBvciBjbG9ja3dpc2UuIEZhbHNlIGlzIGRlZmF1bHQsIGFuZCBpbmRpY2F0ZXMgY2xvY2t3aXNlLCB3aGlsZSB0cnVlXG4gICAgICogIGluZGljYXRlcyBjb3VudGVyLWNsb2Nrd2lzZS5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdyYXBoaWNzfSBUaGlzIEdyYXBoaWNzIG9iamVjdC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzXG4gICAgICovXG4gICAgcHVibGljIGFyYyhjeDogbnVtYmVyLCBjeTogbnVtYmVyLCByYWRpdXM6IG51bWJlciwgc3RhcnRBbmdsZTogbnVtYmVyLCBlbmRBbmdsZTogbnVtYmVyLCBhbnRpY2xvY2t3aXNlID0gZmFsc2UpOiB0aGlzXG4gICAge1xuICAgICAgICBpZiAoc3RhcnRBbmdsZSA9PT0gZW5kQW5nbGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhbnRpY2xvY2t3aXNlICYmIGVuZEFuZ2xlIDw9IHN0YXJ0QW5nbGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGVuZEFuZ2xlICs9IFBJXzI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYW50aWNsb2Nrd2lzZSAmJiBzdGFydEFuZ2xlIDw9IGVuZEFuZ2xlKVxuICAgICAgICB7XG4gICAgICAgICAgICBzdGFydEFuZ2xlICs9IFBJXzI7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzd2VlcCA9IGVuZEFuZ2xlIC0gc3RhcnRBbmdsZTtcblxuICAgICAgICBpZiAoc3dlZXAgPT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhcnRYID0gY3ggKyAoTWF0aC5jb3Moc3RhcnRBbmdsZSkgKiByYWRpdXMpO1xuICAgICAgICBjb25zdCBzdGFydFkgPSBjeSArIChNYXRoLnNpbihzdGFydEFuZ2xlKSAqIHJhZGl1cyk7XG4gICAgICAgIGNvbnN0IGVwcyA9IHRoaXMuX2dlb21ldHJ5LmNsb3NlUG9pbnRFcHM7XG5cbiAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnRQYXRoIGV4aXN0cywgdGFrZSBpdHMgcG9pbnRzLiBPdGhlcndpc2UgY2FsbCBgbW92ZVRvYCB0byBzdGFydCBhIHBhdGguXG4gICAgICAgIGxldCBwb2ludHMgPSB0aGlzLmN1cnJlbnRQYXRoID8gdGhpcy5jdXJyZW50UGF0aC5wb2ludHMgOiBudWxsO1xuXG4gICAgICAgIGlmIChwb2ludHMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFRPRE86IG1ha2UgYSBiZXR0ZXIgZml4LlxuXG4gICAgICAgICAgICAvLyBXZSBjaGVjayBob3cgZmFyIG91ciBzdGFydCBpcyBmcm9tIHRoZSBsYXN0IGV4aXN0aW5nIHBvaW50XG4gICAgICAgICAgICBjb25zdCB4RGlmZiA9IE1hdGguYWJzKHBvaW50c1twb2ludHMubGVuZ3RoIC0gMl0gLSBzdGFydFgpO1xuICAgICAgICAgICAgY29uc3QgeURpZmYgPSBNYXRoLmFicyhwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdIC0gc3RhcnRZKTtcblxuICAgICAgICAgICAgaWYgKHhEaWZmIDwgZXBzICYmIHlEaWZmIDwgZXBzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBwb2ludCBpcyB2ZXJ5IGNsb3NlLCB3ZSBkb24ndCBhZGQgaXQsIHNpbmNlIHRoaXMgd291bGQgbGVhZCB0byBhcnRpZmFjdHNcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgdGVzc2VsbGF0aW9uIGR1ZSB0byBmbG9hdGluZyBwb2ludCBpbXByZWNpc2lvbi5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwb2ludHMucHVzaChzdGFydFgsIHN0YXJ0WSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm1vdmVUbyhzdGFydFgsIHN0YXJ0WSk7XG4gICAgICAgICAgICBwb2ludHMgPSB0aGlzLmN1cnJlbnRQYXRoLnBvaW50cztcbiAgICAgICAgfVxuXG4gICAgICAgIEFyY1V0aWxzLmFyYyhzdGFydFgsIHN0YXJ0WSwgY3gsIGN5LCByYWRpdXMsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBhbnRpY2xvY2t3aXNlLCBwb2ludHMpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyBhIHNpbXBsZSBvbmUtY29sb3IgZmlsbCB0aGF0IHN1YnNlcXVlbnQgY2FsbHMgdG8gb3RoZXIgR3JhcGhpY3MgbWV0aG9kc1xuICAgICAqIChzdWNoIGFzIGxpbmVUbygpIG9yIGRyYXdDaXJjbGUoKSkgdXNlIHdoZW4gZHJhd2luZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbY29sb3I9MF0gLSB0aGUgY29sb3Igb2YgdGhlIGZpbGxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FscGhhPTFdIC0gdGhlIGFscGhhIG9mIHRoZSBmaWxsXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBiZWdpbkZpbGwoY29sb3IgPSAwLCBhbHBoYSA9IDEpOiB0aGlzXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5iZWdpblRleHR1cmVGaWxsKHsgdGV4dHVyZTogVGV4dHVyZS5XSElURSwgY29sb3IsIGFscGhhIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJlZ2luIHRoZSB0ZXh0dXJlIGZpbGxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBPYmplY3Qgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7UElYSS5UZXh0dXJlfSBbb3B0aW9ucy50ZXh0dXJlPVBJWEkuVGV4dHVyZS5XSElURV0gLSBUZXh0dXJlIHRvIGZpbGxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuY29sb3I9MHhmZmZmZmZdIC0gQmFja2dyb3VuZCB0byBmaWxsIGJlaGluZCB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmFscGhhPTFdIC0gQWxwaGEgb2YgZmlsbFxuICAgICAqIEBwYXJhbSB7UElYSS5NYXRyaXh9IFtvcHRpb25zLm1hdHJpeD1udWxsXSAtIFRyYW5zZm9ybSBtYXRyaXhcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdyYXBoaWNzfSBUaGlzIEdyYXBoaWNzIG9iamVjdC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzXG4gICAgICovXG4gICAgYmVnaW5UZXh0dXJlRmlsbChvcHRpb25zOiBJRmlsbFN0eWxlT3B0aW9ucyk6IHRoaXNcbiAgICB7XG4gICAgICAgIC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCBwYXJhbXM6ICh0ZXh0dXJlLCBjb2xvciwgYWxwaGEsIG1hdHJpeClcbiAgICAgICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBUZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZXByZWNhdGlvbigndjUuMi4wJywgJ1BsZWFzZSB1c2Ugb2JqZWN0LWJhc2VkIG9wdGlvbnMgZm9yIEdyYXBoaWNzI2JlZ2luVGV4dHVyZUZpbGwnKTtcblxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgICBjb25zdCBbdGV4dHVyZSwgY29sb3IsIGFscGhhLCBtYXRyaXhdID0gYXJndW1lbnRzIGFzIGFueTtcblxuICAgICAgICAgICAgb3B0aW9ucyA9IHsgdGV4dHVyZSwgY29sb3IsIGFscGhhLCBtYXRyaXggfTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHVuZGVmaW5lZCBrZXlzXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zKS5mb3JFYWNoKChrZXkpID0+IChvcHRpb25zIGFzIGFueSlba2V5XSA9PT0gdW5kZWZpbmVkICYmIGRlbGV0ZSAob3B0aW9ucyBhcyBhbnkpW2tleV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXBwbHkgZGVmYXVsdHNcbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdGV4dHVyZTogVGV4dHVyZS5XSElURSxcbiAgICAgICAgICAgIGNvbG9yOiAweEZGRkZGRixcbiAgICAgICAgICAgIGFscGhhOiAxLFxuICAgICAgICAgICAgbWF0cml4OiBudWxsLFxuICAgICAgICB9LCBvcHRpb25zKSBhcyBJRmlsbFN0eWxlT3B0aW9ucztcblxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGF0aClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zdGFydFBvbHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZpc2libGUgPSBvcHRpb25zLmFscGhhID4gMDtcblxuICAgICAgICBpZiAoIXZpc2libGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2ZpbGxTdHlsZS5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF0cml4KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubWF0cml4ID0gb3B0aW9ucy5tYXRyaXguY2xvbmUoKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1hdHJpeC5pbnZlcnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLl9maWxsU3R5bGUsIHsgdmlzaWJsZSB9LCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBmaWxsIHRvIHRoZSBsaW5lcyBhbmQgc2hhcGVzIHRoYXQgd2VyZSBhZGRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsIHRvIHRoZSBiZWdpbkZpbGwoKSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdyYXBoaWNzfSBUaGlzIEdyYXBoaWNzIG9iamVjdC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzXG4gICAgICovXG4gICAgcHVibGljIGVuZEZpbGwoKTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy5maW5pc2hQb2x5KCk7XG5cbiAgICAgICAgdGhpcy5fZmlsbFN0eWxlLnJlc2V0KCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgYSByZWN0YW5nbGUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFRoZSBYIGNvb3JkIG9mIHRoZSB0b3AtbGVmdCBvZiB0aGUgcmVjdGFuZ2xlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBUaGUgWSBjb29yZCBvZiB0aGUgdG9wLWxlZnQgb2YgdGhlIHJlY3RhbmdsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZVxuICAgICAqIEByZXR1cm4ge1BJWEkuR3JhcGhpY3N9IFRoaXMgR3JhcGhpY3Mgb2JqZWN0LiBHb29kIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHNcbiAgICAgKi9cbiAgICBwdWJsaWMgZHJhd1JlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdGhpc1xuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHJhd1NoYXBlKG5ldyBSZWN0YW5nbGUoeCwgeSwgd2lkdGgsIGhlaWdodCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXcgYSByZWN0YW5nbGUgc2hhcGUgd2l0aCByb3VuZGVkL2JldmVsZWQgY29ybmVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIFggY29vcmQgb2YgdGhlIHRvcC1sZWZ0IG9mIHRoZSByZWN0YW5nbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFRoZSBZIGNvb3JkIG9mIHRoZSB0b3AtbGVmdCBvZiB0aGUgcmVjdGFuZ2xlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIC0gVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gVGhlIGhlaWdodCBvZiB0aGUgcmVjdGFuZ2xlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyAtIFJhZGl1cyBvZiB0aGUgcmVjdGFuZ2xlIGNvcm5lcnNcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdyYXBoaWNzfSBUaGlzIEdyYXBoaWNzIG9iamVjdC4gR29vZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzXG4gICAgICovXG4gICAgcHVibGljIGRyYXdSb3VuZGVkUmVjdCh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHJhZGl1czogbnVtYmVyKTogdGhpc1xuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHJhd1NoYXBlKG5ldyBSb3VuZGVkUmVjdGFuZ2xlKHgsIHksIHdpZHRoLCBoZWlnaHQsIHJhZGl1cykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXdzIGEgY2lyY2xlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gVGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBkcmF3Q2lyY2xlKHg6IG51bWJlciwgeTogbnVtYmVyLCByYWRpdXM6IG51bWJlcik6IHRoaXNcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmRyYXdTaGFwZShuZXcgQ2lyY2xlKHgsIHksIHJhZGl1cykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXdzIGFuIGVsbGlwc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRlciBvZiB0aGUgZWxsaXBzZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBlbGxpcHNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIC0gVGhlIGhhbGYgd2lkdGggb2YgdGhlIGVsbGlwc2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gVGhlIGhhbGYgaGVpZ2h0IG9mIHRoZSBlbGxpcHNlXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBkcmF3RWxsaXBzZSh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB0aGlzXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5kcmF3U2hhcGUobmV3IEVsbGlwc2UoeCwgeSwgd2lkdGgsIGhlaWdodCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkcmF3UG9seWdvbiguLi5wYXRoOiBBcnJheTxudW1iZXI+IHwgQXJyYXk8UG9pbnQ+KTogdGhpc1xuICAgIHB1YmxpYyBkcmF3UG9seWdvbihwYXRoOiBBcnJheTxudW1iZXI+IHwgQXJyYXk8UG9pbnQ+IHwgUG9seWdvbik6IHRoaXNcblxuICAgIC8qKlxuICAgICAqIERyYXdzIGEgcG9seWdvbiB1c2luZyB0aGUgZ2l2ZW4gcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyW118UElYSS5Qb2ludFtdfFBJWEkuUG9seWdvbn0gcGF0aCAtIFRoZSBwYXRoIGRhdGEgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHBvbHlnb24uXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBkcmF3UG9seWdvbiguLi5wYXRoOiBhbnlbXSk6IHRoaXNcbiAgICB7XG4gICAgICAgIGxldCBwb2ludHM6IEFycmF5PG51bWJlcj4gfCBBcnJheTxQb2ludD47XG4gICAgICAgIGxldCBjbG9zZVN0cm9rZSA9IHRydWU7Ly8gISF0aGlzLl9maWxsU3R5bGU7XG5cbiAgICAgICAgY29uc3QgcG9seSA9IHBhdGhbMF0gYXMgUG9seWdvbjtcblxuICAgICAgICAvLyBjaGVjayBpZiBkYXRhIGhhcyBwb2ludHMuLlxuICAgICAgICBpZiAocG9seS5wb2ludHMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNsb3NlU3Ryb2tlID0gcG9seS5jbG9zZVN0cm9rZTtcbiAgICAgICAgICAgIHBvaW50cyA9IHBvbHkucG9pbnRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGF0aFswXSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBvaW50cyA9IHBhdGhbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBwb2ludHMgPSBwYXRoO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2hhcGUgPSBuZXcgUG9seWdvbihwb2ludHMpO1xuXG4gICAgICAgIHNoYXBlLmNsb3NlU3Ryb2tlID0gY2xvc2VTdHJva2U7XG5cbiAgICAgICAgdGhpcy5kcmF3U2hhcGUoc2hhcGUpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXcgYW55IHNoYXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkNpcmNsZXxQSVhJLkVsbGlwc2V8UElYSS5Qb2x5Z29ufFBJWEkuUmVjdGFuZ2xlfFBJWEkuUm91bmRlZFJlY3RhbmdsZX0gc2hhcGUgLSBTaGFwZSB0byBkcmF3XG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBkcmF3U2hhcGUoc2hhcGU6IElTaGFwZSk6IHRoaXNcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5faG9sZU1vZGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2dlb21ldHJ5LmRyYXdTaGFwZShcbiAgICAgICAgICAgICAgICBzaGFwZSxcbiAgICAgICAgICAgICAgICB0aGlzLl9maWxsU3R5bGUuY2xvbmUoKSxcbiAgICAgICAgICAgICAgICB0aGlzLl9saW5lU3R5bGUuY2xvbmUoKSxcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9nZW9tZXRyeS5kcmF3SG9sZShzaGFwZSwgdGhpcy5fbWF0cml4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXcgYSBzdGFyIHNoYXBlIHdpdGggYW4gYXJiaXRyYXJ5IG51bWJlciBvZiBwb2ludHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIENlbnRlciBYIHBvc2l0aW9uIG9mIHRoZSBzdGFyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBDZW50ZXIgWSBwb3NpdGlvbiBvZiB0aGUgc3RhclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb2ludHMgLSBUaGUgbnVtYmVyIG9mIHBvaW50cyBvZiB0aGUgc3RhciwgbXVzdCBiZSA+IDFcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gVGhlIG91dGVyIHJhZGl1cyBvZiB0aGUgc3RhclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbaW5uZXJSYWRpdXNdIC0gVGhlIGlubmVyIHJhZGl1cyBiZXR3ZWVuIHBvaW50cywgZGVmYXVsdCBoYWxmIGByYWRpdXNgXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyb3RhdGlvbj0wXSAtIFRoZSByb3RhdGlvbiBvZiB0aGUgc3RhciBpbiByYWRpYW5zLCB3aGVyZSAwIGlzIHZlcnRpY2FsXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBkcmF3U3Rhcih4OiBudW1iZXIsIHk6IG51bWJlciwgcG9pbnRzOiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBpbm5lclJhZGl1czogbnVtYmVyLCByb3RhdGlvbiA9IDApOiB0aGlzXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5kcmF3UG9seWdvbihuZXcgU3Rhcih4LCB5LCBwb2ludHMsIHJhZGl1cywgaW5uZXJSYWRpdXMsIHJvdGF0aW9uKSBhcyBQb2x5Z29uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGdyYXBoaWNzIHRoYXQgd2VyZSBkcmF3biB0byB0aGlzIEdyYXBoaWNzIG9iamVjdCwgYW5kIHJlc2V0cyBmaWxsIGFuZCBsaW5lIHN0eWxlIHNldHRpbmdzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gVGhpcyBHcmFwaGljcyBvYmplY3QuIEdvb2QgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxsc1xuICAgICAqL1xuICAgIHB1YmxpYyBjbGVhcigpOiB0aGlzXG4gICAge1xuICAgICAgICB0aGlzLl9nZW9tZXRyeS5jbGVhcigpO1xuICAgICAgICB0aGlzLl9saW5lU3R5bGUucmVzZXQoKTtcbiAgICAgICAgdGhpcy5fZmlsbFN0eWxlLnJlc2V0KCk7XG5cbiAgICAgICAgdGhpcy5fYm91bmRzSUQrKztcbiAgICAgICAgdGhpcy5fbWF0cml4ID0gbnVsbDtcbiAgICAgICAgdGhpcy5faG9sZU1vZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jdXJyZW50UGF0aCA9IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiBncmFwaGljcyBjb25zaXN0cyBvZiBvbmUgcmVjdGFuZ2xlLCBhbmQgdGh1cywgY2FuIGJlIGRyYXduIGxpa2UgYSBTcHJpdGUgYW5kXG4gICAgICogbWFza2VkIHdpdGggZ2wuc2Npc3Nvci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIG9ubHkgMSByZWN0LlxuICAgICAqL1xuICAgIHB1YmxpYyBpc0Zhc3RSZWN0KCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9nZW9tZXRyeS5ncmFwaGljc0RhdGE7XG5cbiAgICAgICAgcmV0dXJuIGRhdGEubGVuZ3RoID09PSAxXG4gICAgICAgICAgICAmJiBkYXRhWzBdLnNoYXBlLnR5cGUgPT09IFNIQVBFUy5SRUNUXG4gICAgICAgICAgICAmJiAhKGRhdGFbMF0ubGluZVN0eWxlLnZpc2libGUgJiYgZGF0YVswXS5saW5lU3R5bGUud2lkdGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIG9iamVjdCB1c2luZyB0aGUgV2ViR0wgcmVuZGVyZXJcbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9yZW5kZXIocmVuZGVyZXI6IFJlbmRlcmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5maW5pc2hQb2x5KCk7XG5cbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLl9nZW9tZXRyeTtcbiAgICAgICAgY29uc3QgaGFzdWludDMyID0gcmVuZGVyZXIuY29udGV4dC5zdXBwb3J0cy51aW50MzJJbmRpY2VzO1xuICAgICAgICAvLyBiYXRjaCBwYXJ0Li5cbiAgICAgICAgLy8gYmF0Y2ggaXQhXG5cbiAgICAgICAgZ2VvbWV0cnkudXBkYXRlQmF0Y2hlcyhoYXN1aW50MzIpO1xuXG4gICAgICAgIGlmIChnZW9tZXRyeS5iYXRjaGFibGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJhdGNoRGlydHkgIT09IGdlb21ldHJ5LmJhdGNoRGlydHkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcG9wdWxhdGVCYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3JlbmRlckJhdGNoZWQocmVuZGVyZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gbm8gYmF0Y2hpbmcuLi5cbiAgICAgICAgICAgIHJlbmRlcmVyLmJhdGNoLmZsdXNoKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3JlbmRlckRpcmVjdChyZW5kZXJlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQb3B1bGF0aW5nIGJhdGNoZXMgZm9yIHJlbmRlcmluZ1xuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBfcG9wdWxhdGVCYXRjaGVzKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5fZ2VvbWV0cnk7XG4gICAgICAgIGNvbnN0IGJsZW5kTW9kZSA9IHRoaXMuYmxlbmRNb2RlO1xuICAgICAgICBjb25zdCBsZW4gPSBnZW9tZXRyeS5iYXRjaGVzLmxlbmd0aDtcblxuICAgICAgICB0aGlzLmJhdGNoVGludCA9IC0xO1xuICAgICAgICB0aGlzLl90cmFuc2Zvcm1JRCA9IC0xO1xuICAgICAgICB0aGlzLmJhdGNoRGlydHkgPSBnZW9tZXRyeS5iYXRjaERpcnR5O1xuICAgICAgICB0aGlzLmJhdGNoZXMubGVuZ3RoID0gbGVuO1xuXG4gICAgICAgIHRoaXMudmVydGV4RGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoZ2VvbWV0cnkucG9pbnRzKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBnSSA9IGdlb21ldHJ5LmJhdGNoZXNbaV07XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IGdJLnN0eWxlLmNvbG9yO1xuICAgICAgICAgICAgY29uc3QgdmVydGV4RGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy52ZXJ0ZXhEYXRhLmJ1ZmZlcixcbiAgICAgICAgICAgICAgICBnSS5hdHRyaWJTdGFydCAqIDQgKiAyLFxuICAgICAgICAgICAgICAgIGdJLmF0dHJpYlNpemUgKiAyKTtcblxuICAgICAgICAgICAgY29uc3QgdXZzID0gbmV3IEZsb2F0MzJBcnJheShnZW9tZXRyeS51dnNGbG9hdDMyLmJ1ZmZlcixcbiAgICAgICAgICAgICAgICBnSS5hdHRyaWJTdGFydCAqIDQgKiAyLFxuICAgICAgICAgICAgICAgIGdJLmF0dHJpYlNpemUgKiAyKTtcblxuICAgICAgICAgICAgY29uc3QgaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShnZW9tZXRyeS5pbmRpY2VzVWludDE2LmJ1ZmZlcixcbiAgICAgICAgICAgICAgICBnSS5zdGFydCAqIDIsXG4gICAgICAgICAgICAgICAgZ0kuc2l6ZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGJhdGNoID0ge1xuICAgICAgICAgICAgICAgIHZlcnRleERhdGEsXG4gICAgICAgICAgICAgICAgYmxlbmRNb2RlLFxuICAgICAgICAgICAgICAgIGluZGljZXMsXG4gICAgICAgICAgICAgICAgdXZzLFxuICAgICAgICAgICAgICAgIF9iYXRjaFJHQjogaGV4MnJnYihjb2xvcikgYXMgQXJyYXk8bnVtYmVyPixcbiAgICAgICAgICAgICAgICBfdGludFJHQjogY29sb3IsXG4gICAgICAgICAgICAgICAgX3RleHR1cmU6IGdJLnN0eWxlLnRleHR1cmUsXG4gICAgICAgICAgICAgICAgYWxwaGE6IGdJLnN0eWxlLmFscGhhLFxuICAgICAgICAgICAgICAgIHdvcmxkQWxwaGE6IDEgfTtcblxuICAgICAgICAgICAgdGhpcy5iYXRjaGVzW2ldID0gYmF0Y2g7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIHRoZSBiYXRjaGVzIHVzaW5nIHRoZSBCYXRoZWRSZW5kZXJlciBwbHVnaW5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9yZW5kZXJCYXRjaGVkKHJlbmRlcmVyOiBSZW5kZXJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5iYXRjaGVzLmxlbmd0aClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVuZGVyZXIuYmF0Y2guc2V0T2JqZWN0UmVuZGVyZXIocmVuZGVyZXIucGx1Z2luc1t0aGlzLnBsdWdpbk5hbWVdKTtcblxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVZlcnRpY2VzKCk7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVGludHMoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHRoaXMuYmF0Y2hlcy5sZW5ndGg7IGkgPCBsOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gdGhpcy5iYXRjaGVzW2ldO1xuXG4gICAgICAgICAgICBiYXRjaC53b3JsZEFscGhhID0gdGhpcy53b3JsZEFscGhhICogYmF0Y2guYWxwaGE7XG5cbiAgICAgICAgICAgIHJlbmRlcmVyLnBsdWdpbnNbdGhpcy5wbHVnaW5OYW1lXS5yZW5kZXIoYmF0Y2gpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgZ3JhcGhpY3MgZGlyZWN0XG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlclxuICAgICAqL1xuICAgIHByb3RlY3RlZCBfcmVuZGVyRGlyZWN0KHJlbmRlcmVyOiBSZW5kZXJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHNoYWRlciA9IHRoaXMuX3Jlc29sdmVEaXJlY3RTaGFkZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5fZ2VvbWV0cnk7XG4gICAgICAgIGNvbnN0IHRpbnQgPSB0aGlzLnRpbnQ7XG4gICAgICAgIGNvbnN0IHdvcmxkQWxwaGEgPSB0aGlzLndvcmxkQWxwaGE7XG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0gc2hhZGVyLnVuaWZvcm1zO1xuICAgICAgICBjb25zdCBkcmF3Q2FsbHMgPSBnZW9tZXRyeS5kcmF3Q2FsbHM7XG5cbiAgICAgICAgLy8gbGV0cyBzZXQgdGhlIHRyYW5zZm9tclxuICAgICAgICB1bmlmb3Jtcy50cmFuc2xhdGlvbk1hdHJpeCA9IHRoaXMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtO1xuXG4gICAgICAgIC8vIGFuZCB0aGVuIGxldHMgc2V0IHRoZSB0aW50Li5cbiAgICAgICAgdW5pZm9ybXMudGludFswXSA9ICgoKHRpbnQgPj4gMTYpICYgMHhGRikgLyAyNTUpICogd29ybGRBbHBoYTtcbiAgICAgICAgdW5pZm9ybXMudGludFsxXSA9ICgoKHRpbnQgPj4gOCkgJiAweEZGKSAvIDI1NSkgKiB3b3JsZEFscGhhO1xuICAgICAgICB1bmlmb3Jtcy50aW50WzJdID0gKCh0aW50ICYgMHhGRikgLyAyNTUpICogd29ybGRBbHBoYTtcbiAgICAgICAgdW5pZm9ybXMudGludFszXSA9IHdvcmxkQWxwaGE7XG5cbiAgICAgICAgLy8gdGhlIGZpcnN0IGRyYXcgY2FsbCwgd2UgY2FuIHNldCB0aGUgdW5pZm9ybXMgb2YgdGhlIHNoYWRlciBkaXJlY3RseSBoZXJlLlxuXG4gICAgICAgIC8vIHRoaXMgbWVhbnMgdGhhdCB3ZSBjYW4gdGFjayBhZHZhbnRhZ2Ugb2YgdGhlIHN5bmMgZnVuY3Rpb24gb2YgcGl4aSFcbiAgICAgICAgLy8gYmluZCBhbmQgc3luYyB1bmlmb3Jtcy4uXG4gICAgICAgIC8vIHRoZXJlIGlzIGEgd2F5IHRvIG9wdGltaXNlIHRoaXMuLlxuICAgICAgICByZW5kZXJlci5zaGFkZXIuYmluZChzaGFkZXIpO1xuICAgICAgICByZW5kZXJlci5nZW9tZXRyeS5iaW5kKGdlb21ldHJ5LCBzaGFkZXIpO1xuXG4gICAgICAgIC8vIHNldCBzdGF0ZS4uXG4gICAgICAgIHJlbmRlcmVyLnN0YXRlLnNldCh0aGlzLnN0YXRlKTtcblxuICAgICAgICAvLyB0aGVuIHJlbmRlciB0aGUgcmVzdCBvZiB0aGVtLi4uXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gZHJhd0NhbGxzLmxlbmd0aDsgaSA8IGw7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyRHJhd0NhbGxEaXJlY3QocmVuZGVyZXIsIGdlb21ldHJ5LmRyYXdDYWxsc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIHNwZWNpZmljIERyYXdDYWxsXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQHBhcmFtIHtQSVhJLkJhdGNoRHJhd0NhbGx9IGRyYXdDYWxsXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9yZW5kZXJEcmF3Q2FsbERpcmVjdChyZW5kZXJlcjogUmVuZGVyZXIsIGRyYXdDYWxsOiBCYXRjaERyYXdDYWxsKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgeyB0ZXhBcnJheSwgdHlwZSwgc2l6ZSwgc3RhcnQgfSA9IGRyYXdDYWxsO1xuICAgICAgICBjb25zdCBncm91cFRleHR1cmVDb3VudCA9IHRleEFycmF5LmNvdW50O1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ3JvdXBUZXh0dXJlQ291bnQ7IGorKylcbiAgICAgICAge1xuICAgICAgICAgICAgcmVuZGVyZXIudGV4dHVyZS5iaW5kKHRleEFycmF5LmVsZW1lbnRzW2pdLCBqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmRlcmVyLmdlb21ldHJ5LmRyYXcodHlwZSwgc2l6ZSwgc3RhcnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc29sdmVzIHNoYWRlciBmb3IgZGlyZWN0IHJlbmRlcmluZ1xuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX3Jlc29sdmVEaXJlY3RTaGFkZXIocmVuZGVyZXI6IFJlbmRlcmVyKTogU2hhZGVyXG4gICAge1xuICAgICAgICBsZXQgc2hhZGVyID0gdGhpcy5zaGFkZXI7XG5cbiAgICAgICAgY29uc3QgcGx1Z2luTmFtZSA9IHRoaXMucGx1Z2luTmFtZTtcblxuICAgICAgICBpZiAoIXNoYWRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gc2hhZGVyIGhlcmUsIHdlIGNhbiB1c2UgdGhlIGRlZmF1bHQgc2hhZGVyLlxuICAgICAgICAgICAgLy8gYW5kIHRoYXQgb25seSBnZXRzIGNyZWF0ZWQgaWYgd2UgYWN0dWFsbHkgbmVlZCBpdC4uXG4gICAgICAgICAgICAvLyBidXQgbWF5IGJlIG1vcmUgdGhhbiBvbmUgcGx1Z2lucyBmb3IgZ3JhcGhpY3NcbiAgICAgICAgICAgIGlmICghREVGQVVMVF9TSEFERVJTW3BsdWdpbk5hbWVdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IE1BWF9URVhUVVJFUyA9IHJlbmRlcmVyLnBsdWdpbnMuYmF0Y2guTUFYX1RFWFRVUkVTO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNhbXBsZVZhbHVlcyA9IG5ldyBJbnQzMkFycmF5KE1BWF9URVhUVVJFUyk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1BWF9URVhUVVJFUzsgaSsrKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlVmFsdWVzW2ldID0gaTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB1bmlmb3JtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGludDogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgMSwgMV0pLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbk1hdHJpeDogbmV3IE1hdHJpeCgpLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBVbmlmb3JtR3JvdXAuZnJvbSh7IHVTYW1wbGVyczogc2FtcGxlVmFsdWVzIH0sIHRydWUpLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVuZGVyZXIucGx1Z2luc1twbHVnaW5OYW1lXS5fc2hhZGVyLnByb2dyYW07XG5cbiAgICAgICAgICAgICAgICBERUZBVUxUX1NIQURFUlNbcGx1Z2luTmFtZV0gPSBuZXcgU2hhZGVyKHByb2dyYW0sIHVuaWZvcm1zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2hhZGVyID0gREVGQVVMVF9TSEFERVJTW3BsdWdpbk5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNoYWRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGJvdW5kcyBvZiB0aGUgZ3JhcGhpYyBzaGFwZSBhcyBhIHJlY3RhbmdsZSBvYmplY3RcbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX2NhbGN1bGF0ZUJvdW5kcygpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmZpbmlzaFBvbHkoKTtcblxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuX2dlb21ldHJ5O1xuXG4gICAgICAgIC8vIHNraXBwaW5nIHdoZW4gZ3JhcGhpY3MgaXMgZW1wdHksIGxpa2UgYSBjb250YWluZXJcbiAgICAgICAgaWYgKCFnZW9tZXRyeS5ncmFwaGljc0RhdGEubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG1pblgsIG1pblksIG1heFgsIG1heFkgfSA9IGdlb21ldHJ5LmJvdW5kcztcblxuICAgICAgICB0aGlzLl9ib3VuZHMuYWRkRnJhbWUodGhpcy50cmFuc2Zvcm0sIG1pblgsIG1pblksIG1heFgsIG1heFkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlc3RzIGlmIGEgcG9pbnQgaXMgaW5zaWRlIHRoaXMgZ3JhcGhpY3Mgb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcG9pbnQgLSB0aGUgcG9pbnQgdG8gdGVzdFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRoZSByZXN1bHQgb2YgdGhlIHRlc3RcbiAgICAgKi9cbiAgICBwdWJsaWMgY29udGFpbnNQb2ludChwb2ludDogSVBvaW50RGF0YSk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKHBvaW50LCBHcmFwaGljcy5fVEVNUF9QT0lOVCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2dlb21ldHJ5LmNvbnRhaW5zUG9pbnQoR3JhcGhpY3MuX1RFTVBfUE9JTlQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY2FsY3VhdGUgdGhlIHRpbnQgYnkgYXBwbHlpbmcgdGluIHRvIGJhdGNoZXMgdXNpbmcgR3JhcGhpY3MgdGludC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGNhbGN1bGF0ZVRpbnRzKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmJhdGNoVGludCAhPT0gdGhpcy50aW50KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmJhdGNoVGludCA9IHRoaXMudGludDtcblxuICAgICAgICAgICAgY29uc3QgdGludFJHQiA9IGhleDJyZ2IodGhpcy50aW50LCB0ZW1wKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJhdGNoZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSB0aGlzLmJhdGNoZXNbaV07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaFRpbnQgPSBiYXRjaC5fYmF0Y2hSR0I7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByID0gKHRpbnRSR0JbMF0gKiBiYXRjaFRpbnRbMF0pICogMjU1O1xuICAgICAgICAgICAgICAgIGNvbnN0IGcgPSAodGludFJHQlsxXSAqIGJhdGNoVGludFsxXSkgKiAyNTU7XG4gICAgICAgICAgICAgICAgY29uc3QgYiA9ICh0aW50UkdCWzJdICogYmF0Y2hUaW50WzJdKSAqIDI1NTtcblxuICAgICAgICAgICAgICAgIC8vIFRPRE8gSXZhbiwgY2FuIHRoaXMgYmUgZG9uZSBpbiBvbmUgZ28/XG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSAociA8PCAxNikgKyAoZyA8PCA4KSArIChiIHwgMCk7XG5cbiAgICAgICAgICAgICAgICBiYXRjaC5fdGludFJHQiA9IChjb2xvciA+PiAxNilcbiAgICAgICAgICAgICAgICAgICAgICAgICsgKGNvbG9yICYgMHhmZjAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgKyAoKGNvbG9yICYgMHhmZikgPDwgMTYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgdGhlcmUncyBhIHRyYW5zZm9ybSB1cGRhdGUgb3IgYSBjaGFuZ2UgdG8gdGhlIHNoYXBlIG9mIHRoZVxuICAgICAqIGdlb21ldHJ5LCByZWNhY3VsYXRlIHRoZSB2ZXJ0aWNlcy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGNhbGN1bGF0ZVZlcnRpY2VzKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHd0SUQgPSB0aGlzLnRyYW5zZm9ybS5fd29ybGRJRDtcblxuICAgICAgICBpZiAodGhpcy5fdHJhbnNmb3JtSUQgPT09IHd0SUQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3RyYW5zZm9ybUlEID0gd3RJRDtcblxuICAgICAgICBjb25zdCB3dCA9IHRoaXMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtO1xuICAgICAgICBjb25zdCBhID0gd3QuYTtcbiAgICAgICAgY29uc3QgYiA9IHd0LmI7XG4gICAgICAgIGNvbnN0IGMgPSB3dC5jO1xuICAgICAgICBjb25zdCBkID0gd3QuZDtcbiAgICAgICAgY29uc3QgdHggPSB3dC50eDtcbiAgICAgICAgY29uc3QgdHkgPSB3dC50eTtcblxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5fZ2VvbWV0cnkucG9pbnRzOy8vIGJhdGNoLnZlcnRleERhdGFPcmlnaW5hbDtcbiAgICAgICAgY29uc3QgdmVydGV4RGF0YSA9IHRoaXMudmVydGV4RGF0YTtcblxuICAgICAgICBsZXQgY291bnQgPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gMilcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgeCA9IGRhdGFbaV07XG4gICAgICAgICAgICBjb25zdCB5ID0gZGF0YVtpICsgMV07XG5cbiAgICAgICAgICAgIHZlcnRleERhdGFbY291bnQrK10gPSAoYSAqIHgpICsgKGMgKiB5KSArIHR4O1xuICAgICAgICAgICAgdmVydGV4RGF0YVtjb3VudCsrXSA9IChkICogeSkgKyAoYiAqIHgpICsgdHk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGN1cnJlbnQgcGF0aC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1BJWEkuR3JhcGhpY3N9IFJldHVybnMgaXRzZWxmLlxuICAgICAqL1xuICAgIHB1YmxpYyBjbG9zZVBhdGgoKTogdGhpc1xuICAgIHtcbiAgICAgICAgY29uc3QgY3VycmVudFBhdGggPSB0aGlzLmN1cnJlbnRQYXRoO1xuXG4gICAgICAgIGlmIChjdXJyZW50UGF0aClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBhZGQgZXh0cmEgcG9pbnQgaW4gdGhlIGVuZCBiZWNhdXNlIGJ1aWxkTGluZSB3aWxsIHRha2UgY2FyZSBvZiB0aGF0XG4gICAgICAgICAgICBjdXJyZW50UGF0aC5jbG9zZVN0cm9rZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBhIG1hdHJpeCB0byB0aGUgcG9zaXRpb25hbCBkYXRhLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gbWF0cml4IC0gTWF0cml4IHRvIHVzZSBmb3IgdHJhbnNmb3JtIGN1cnJlbnQgc2hhcGUuXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gUmV0dXJucyBpdHNlbGYuXG4gICAgICovXG4gICAgcHVibGljIHNldE1hdHJpeChtYXRyaXg6IE1hdHJpeCk6IHRoaXNcbiAgICB7XG4gICAgICAgIHRoaXMuX21hdHJpeCA9IG1hdHJpeDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCZWdpbiBhZGRpbmcgaG9sZXMgdG8gdGhlIGxhc3QgZHJhdyBzaGFwZVxuICAgICAqIElNUE9SVEFOVDogaG9sZXMgbXVzdCBiZSBmdWxseSBpbnNpZGUgYSBzaGFwZSB0byB3b3JrXG4gICAgICogQWxzbyB3ZWlyZG5lc3MgZW5zdWVzIGlmIGhvbGVzIG92ZXJsYXAhXG4gICAgICogRWxsaXBzZXMsIENpcmNsZXMsIFJlY3RhbmdsZXMgYW5kIFJvdW5kZWQgUmVjdGFuZ2xlcyBjYW5ub3QgYmUgaG9sZXMgb3IgaG9zdCBmb3IgaG9sZXMgaW4gQ2FudmFzUmVuZGVyZXIsXG4gICAgICogcGxlYXNlIHVzZSBgbW92ZVRvYCBgbGluZVRvYCwgYHF1YWRyYXRpY0N1cnZlVG9gIGlmIHlvdSByZWx5IG9uIHBpeGktbGVnYWN5IGJ1bmRsZS5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkdyYXBoaWNzfSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBwdWJsaWMgYmVnaW5Ib2xlKCk6IHRoaXNcbiAgICB7XG4gICAgICAgIHRoaXMuZmluaXNoUG9seSgpO1xuICAgICAgICB0aGlzLl9ob2xlTW9kZSA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5kIGFkZGluZyBob2xlcyB0byB0aGUgbGFzdCBkcmF3IHNoYXBlXG4gICAgICogQHJldHVybiB7UElYSS5HcmFwaGljc30gUmV0dXJucyBpdHNlbGYuXG4gICAgICovXG4gICAgcHVibGljIGVuZEhvbGUoKTogdGhpc1xuICAgIHtcbiAgICAgICAgdGhpcy5maW5pc2hQb2x5KCk7XG4gICAgICAgIHRoaXMuX2hvbGVNb2RlID0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIEdyYXBoaWNzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fGJvb2xlYW59IFtvcHRpb25zXSAtIE9wdGlvbnMgcGFyYW1ldGVyLiBBIGJvb2xlYW4gd2lsbCBhY3QgYXMgaWYgYWxsXG4gICAgICogIG9wdGlvbnMgaGF2ZSBiZWVuIHNldCB0byB0aGF0IHZhbHVlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jaGlsZHJlbj1mYWxzZV0gLSBpZiBzZXQgdG8gdHJ1ZSwgYWxsIHRoZSBjaGlsZHJlbiB3aWxsIGhhdmVcbiAgICAgKiAgdGhlaXIgZGVzdHJveSBtZXRob2QgY2FsbGVkIGFzIHdlbGwuICdvcHRpb25zJyB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aG9zZSBjYWxscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRleHR1cmU9ZmFsc2VdIC0gT25seSB1c2VkIGZvciBjaGlsZCBTcHJpdGVzIGlmIG9wdGlvbnMuY2hpbGRyZW4gaXMgc2V0IHRvIHRydWVcbiAgICAgKiAgU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIHRleHR1cmUgb2YgdGhlIGNoaWxkIHNwcml0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYmFzZVRleHR1cmU9ZmFsc2VdIC0gT25seSB1c2VkIGZvciBjaGlsZCBTcHJpdGVzIGlmIG9wdGlvbnMuY2hpbGRyZW4gaXMgc2V0IHRvIHRydWVcbiAgICAgKiAgU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIGJhc2UgdGV4dHVyZSBvZiB0aGUgY2hpbGQgc3ByaXRlXG4gICAgICovXG4gICAgcHVibGljIGRlc3Ryb3kob3B0aW9uczogSURlc3Ryb3lPcHRpb25zfGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl9nZW9tZXRyeS5yZWZDb3VudC0tO1xuICAgICAgICBpZiAodGhpcy5fZ2VvbWV0cnkucmVmQ291bnQgPT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2dlb21ldHJ5LmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX21hdHJpeCA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudFBhdGggPSBudWxsO1xuICAgICAgICB0aGlzLl9saW5lU3R5bGUuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLl9saW5lU3R5bGUgPSBudWxsO1xuICAgICAgICB0aGlzLl9maWxsU3R5bGUuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLl9maWxsU3R5bGUgPSBudWxsO1xuICAgICAgICB0aGlzLl9nZW9tZXRyeSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2hhZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy52ZXJ0ZXhEYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5iYXRjaGVzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuYmF0Y2hlcyA9IG51bGw7XG5cbiAgICAgICAgc3VwZXIuZGVzdHJveShvcHRpb25zKTtcbiAgICB9XG59XG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiaW1wb3J0IHsgQkxFTkRfTU9ERVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlUG9pbnQsIFBvaW50LCBSZWN0YW5nbGUgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSAnQHBpeGkvc2V0dGluZ3MnO1xuaW1wb3J0IHsgc2lnbiB9IGZyb20gJ0BwaXhpL3V0aWxzJztcblxuaW1wb3J0IHR5cGUgeyBJQmFzZVRleHR1cmVPcHRpb25zLCBSZW5kZXJlciwgVGV4dHVyZVNvdXJjZSB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBJRGVzdHJveU9wdGlvbnMgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmltcG9ydCB0eXBlIHsgSVBvaW50RGF0YSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG5jb25zdCB0ZW1wUG9pbnQgPSBuZXcgUG9pbnQoKTtcbmNvbnN0IGluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoWzAsIDEsIDIsIDAsIDIsIDNdKTtcblxuZXhwb3J0IHR5cGUgU3ByaXRlU291cmNlID0gVGV4dHVyZVNvdXJjZXxUZXh0dXJlO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNwcml0ZSBleHRlbmRzIEdsb2JhbE1peGlucy5TcHJpdGUsIENvbnRhaW5lciB7fVxuXG4vKipcbiAqIFRoZSBTcHJpdGUgb2JqZWN0IGlzIHRoZSBiYXNlIGZvciBhbGwgdGV4dHVyZWQgb2JqZWN0cyB0aGF0IGFyZSByZW5kZXJlZCB0byB0aGUgc2NyZWVuXG4qXG4gKiBBIHNwcml0ZSBjYW4gYmUgY3JlYXRlZCBkaXJlY3RseSBmcm9tIGFuIGltYWdlIGxpa2UgdGhpczpcbiAqXG4gKiBgYGBqc1xuICogbGV0IHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb20oJ2Fzc2V0cy9pbWFnZS5wbmcnKTtcbiAqIGBgYFxuICpcbiAqIFRoZSBtb3JlIGVmZmljaWVudCB3YXkgdG8gY3JlYXRlIHNwcml0ZXMgaXMgdXNpbmcgYSB7QGxpbmsgUElYSS5TcHJpdGVzaGVldH0sXG4gKiBhcyBzd2FwcGluZyBiYXNlIHRleHR1cmVzIHdoZW4gcmVuZGVyaW5nIHRvIHRoZSBzY3JlZW4gaXMgaW5lZmZpY2llbnQuXG4gKlxuICogYGBganNcbiAqIFBJWEkuTG9hZGVyLnNoYXJlZC5hZGQoXCJhc3NldHMvc3ByaXRlc2hlZXQuanNvblwiKS5sb2FkKHNldHVwKTtcbiAqXG4gKiBmdW5jdGlvbiBzZXR1cCgpIHtcbiAqICAgbGV0IHNoZWV0ID0gUElYSS5Mb2FkZXIuc2hhcmVkLnJlc291cmNlc1tcImFzc2V0cy9zcHJpdGVzaGVldC5qc29uXCJdLnNwcml0ZXNoZWV0O1xuICogICBsZXQgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKHNoZWV0LnRleHR1cmVzW1wiaW1hZ2UucG5nXCJdKTtcbiAqICAgLi4uXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuQ29udGFpbmVyXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgU3ByaXRlIGV4dGVuZHMgQ29udGFpbmVyXG57XG4gICAgcHVibGljIGJsZW5kTW9kZTogQkxFTkRfTU9ERVM7XG4gICAgcHVibGljIGluZGljZXM6IFVpbnQxNkFycmF5O1xuICAgIHB1YmxpYyBwbHVnaW5OYW1lOiBzdHJpbmc7XG5cbiAgICBfd2lkdGg6IG51bWJlcjtcbiAgICBfaGVpZ2h0OiBudW1iZXI7XG4gICAgX3RleHR1cmU6IFRleHR1cmU7XG4gICAgX3RleHR1cmVJRDogbnVtYmVyO1xuICAgIF9jYWNoZWRUaW50OiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF90ZXh0dXJlVHJpbW1lZElEOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIHV2czogRmxvYXQzMkFycmF5O1xuICAgIHByb3RlY3RlZCBfYW5jaG9yOiBPYnNlcnZhYmxlUG9pbnQ7XG4gICAgcHJvdGVjdGVkIHZlcnRleERhdGE6IEZsb2F0MzJBcnJheTtcblxuICAgIHByaXZhdGUgdmVydGV4VHJpbW1lZERhdGE6IEZsb2F0MzJBcnJheTtcbiAgICBwcml2YXRlIF9yb3VuZFBpeGVsczogYm9vbGVhbjtcbiAgICBwcml2YXRlIF90cmFuc2Zvcm1JRDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3RyYW5zZm9ybVRyaW1tZWRJRDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3RpbnQ6IG51bWJlcjtcblxuICAgIC8vIEludGVybmFsLW9ubHkgcHJvcGVydGllc1xuICAgIF90aW50UkdCOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuVGV4dHVyZX0gW3RleHR1cmVdIC0gVGhlIHRleHR1cmUgZm9yIHRoaXMgc3ByaXRlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IFRleHR1cmUpXG4gICAge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYW5jaG9yIHBvaW50IGRlZmluZXMgdGhlIG5vcm1hbGl6ZWQgY29vcmRpbmF0ZXNcbiAgICAgICAgICogaW4gdGhlIHRleHR1cmUgdGhhdCBtYXAgdG8gdGhlIHBvc2l0aW9uIG9mIHRoaXNcbiAgICAgICAgICogc3ByaXRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBCeSBkZWZhdWx0LCB0aGlzIGlzIGAoMCwwKWAgKG9yIGB0ZXh0dXJlLmRlZmF1bHRBbmNob3JgXG4gICAgICAgICAqIGlmIHlvdSBoYXZlIG1vZGlmaWVkIHRoYXQpLCB3aGljaCBtZWFucyB0aGUgcG9zaXRpb25cbiAgICAgICAgICogYCh4LHkpYCBvZiB0aGlzIGBTcHJpdGVgIHdpbGwgYmUgdGhlIHRvcC1sZWZ0IGNvcm5lci5cbiAgICAgICAgICpcbiAgICAgICAgICogTm90ZTogVXBkYXRpbmcgYHRleHR1cmUuZGVmYXVsdEFuY2hvcmAgYWZ0ZXJcbiAgICAgICAgICogY29uc3RydWN0aW5nIGEgYFNwcml0ZWAgZG9lcyBfbm90XyB1cGRhdGUgaXRzIGFuY2hvci5cbiAgICAgICAgICpcbiAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZG9jcy5jb2NvczJkLXgub3JnL2NvY29zMmQteC9lbi9zcHJpdGVzL21hbmlwdWxhdGlvbi5odG1sfVxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCBgdGV4dHVyZS5kZWZhdWx0QW5jaG9yYFxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLk9ic2VydmFibGVQb2ludH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2FuY2hvciA9IG5ldyBPYnNlcnZhYmxlUG9pbnQoXG4gICAgICAgICAgICB0aGlzLl9vbkFuY2hvclVwZGF0ZSxcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAodGV4dHVyZSA/IHRleHR1cmUuZGVmYXVsdEFuY2hvci54IDogMCksXG4gICAgICAgICAgICAodGV4dHVyZSA/IHRleHR1cmUuZGVmYXVsdEFuY2hvci55IDogMClcbiAgICAgICAgKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRleHR1cmUgdGhhdCB0aGUgc3ByaXRlIGlzIHVzaW5nXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3RleHR1cmUgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd2lkdGggb2YgdGhlIHNwcml0ZSAodGhpcyBpcyBpbml0aWFsbHkgc2V0IGJ5IHRoZSB0ZXh0dXJlKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3dpZHRoID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGhlaWdodCBvZiB0aGUgc3ByaXRlICh0aGlzIGlzIGluaXRpYWxseSBzZXQgYnkgdGhlIHRleHR1cmUpXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRpbnQgYXBwbGllZCB0byB0aGUgc3ByaXRlLiBUaGlzIGlzIGEgaGV4IHZhbHVlLiBBIHZhbHVlIG9mIDB4RkZGRkZGIHdpbGwgcmVtb3ZlIGFueSB0aW50IGVmZmVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAweEZGRkZGRlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGludCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0aW50IGFwcGxpZWQgdG8gdGhlIHNwcml0ZS4gVGhpcyBpcyBhIFJHQiB2YWx1ZS4gQSB2YWx1ZSBvZiAweEZGRkZGRiB3aWxsIHJlbW92ZSBhbnkgdGludCBlZmZlY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMTY3NzcyMTVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3RpbnRSR0IgPSBudWxsO1xuXG4gICAgICAgIHRoaXMudGludCA9IDB4RkZGRkZGO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYmxlbmQgbW9kZSB0byBiZSBhcHBsaWVkIHRvIHRoZSBzcHJpdGUuIEFwcGx5IGEgdmFsdWUgb2YgYFBJWEkuQkxFTkRfTU9ERVMuTk9STUFMYCB0byByZXNldCB0aGUgYmxlbmQgbW9kZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLkJMRU5EX01PREVTLk5PUk1BTFxuICAgICAgICAgKiBAc2VlIFBJWEkuQkxFTkRfTU9ERVNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmxlbmRNb2RlID0gQkxFTkRfTU9ERVMuTk9STUFMO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZWQgdGludCB2YWx1ZSBzbyB3ZSBjYW4gdGVsbCB3aGVuIHRoZSB0aW50IGlzIGNoYW5nZWQuXG4gICAgICAgICAqIFZhbHVlIGlzIHVzZWQgZm9yIDJkIENhbnZhc1JlbmRlcmVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMHhGRkZGRkZcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2NhY2hlZFRpbnQgPSAweEZGRkZGRjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhpcyBpcyB1c2VkIHRvIHN0b3JlIHRoZSB1dnMgZGF0YSBvZiB0aGUgc3ByaXRlLCBhc3NpZ25lZCBhdCB0aGUgc2FtZSB0aW1lXG4gICAgICAgICAqIGFzIHRoZSB2ZXJ0ZXhEYXRhIGluIGNhbGN1bGF0ZVZlcnRpY2VzKClcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7RmxvYXQzMkFycmF5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51dnMgPSBudWxsO1xuXG4gICAgICAgIC8vIGNhbGwgdGV4dHVyZSBzZXR0ZXJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZSB8fCBUZXh0dXJlLkVNUFRZO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGlzIGlzIHVzZWQgdG8gc3RvcmUgdGhlIHZlcnRleCBkYXRhIG9mIHRoZSBzcHJpdGUgKGJhc2ljYWxseSBhIHF1YWQpXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge0Zsb2F0MzJBcnJheX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmVydGV4RGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGJvdW5kcyBvZiB0aGUgb2JqZWN0IElGIGl0IGlzIGEgdHJpbW1lZCBzcHJpdGVcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7RmxvYXQzMkFycmF5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0ZXhUcmltbWVkRGF0YSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fdHJhbnNmb3JtSUQgPSAtMTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZUlEID0gLTE7XG5cbiAgICAgICAgdGhpcy5fdHJhbnNmb3JtVHJpbW1lZElEID0gLTE7XG4gICAgICAgIHRoaXMuX3RleHR1cmVUcmltbWVkSUQgPSAtMTtcblxuICAgICAgICAvLyBCYXRjaGFibGUgc3R1ZmYuLlxuICAgICAgICAvLyBUT0RPIGNvdWxkIG1ha2UgdGhpcyBhIG1peGluP1xuICAgICAgICB0aGlzLmluZGljZXMgPSBpbmRpY2VzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQbHVnaW4gdGhhdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoaXMgZWxlbWVudC5cbiAgICAgICAgICogQWxsb3dzIHRvIGN1c3RvbWl6ZSB0aGUgcmVuZGVyaW5nIHByb2Nlc3Mgd2l0aG91dCBvdmVycmlkaW5nICdfcmVuZGVyJyAmICdfcmVuZGVyQ2FudmFzJyBtZXRob2RzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdiYXRjaCdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGx1Z2luTmFtZSA9ICdiYXRjaCc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHVzZWQgdG8gZmFzdCBjaGVjayBpZiBhIHNwcml0ZSBpcy4uIGEgc3ByaXRlIVxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc1Nwcml0ZSA9IHRydWU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVybmFsIHJvdW5kUGl4ZWxzIGZpZWxkXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9yb3VuZFBpeGVscyA9IHNldHRpbmdzLlJPVU5EX1BJWEVMUztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSB0ZXh0dXJlIGlzIHVwZGF0ZWQsIHRoaXMgZXZlbnQgd2lsbCBmaXJlIHRvIHVwZGF0ZSB0aGUgc2NhbGUgYW5kIGZyYW1lXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9vblRleHR1cmVVcGRhdGUoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZUlEID0gLTE7XG4gICAgICAgIHRoaXMuX3RleHR1cmVUcmltbWVkSUQgPSAtMTtcbiAgICAgICAgdGhpcy5fY2FjaGVkVGludCA9IDB4RkZGRkZGO1xuXG4gICAgICAgIC8vIHNvIGlmIF93aWR0aCBpcyAwIHRoZW4gd2lkdGggd2FzIG5vdCBzZXQuLlxuICAgICAgICBpZiAodGhpcy5fd2lkdGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2NhbGUueCA9IHNpZ24odGhpcy5zY2FsZS54KSAqIHRoaXMuX3dpZHRoIC8gdGhpcy5fdGV4dHVyZS5vcmlnLndpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2hlaWdodClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zY2FsZS55ID0gc2lnbih0aGlzLnNjYWxlLnkpICogdGhpcy5faGVpZ2h0IC8gdGhpcy5fdGV4dHVyZS5vcmlnLmhlaWdodDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHRoZSBhbmNob3IgcG9zaXRpb24gdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBfb25BbmNob3JVcGRhdGUoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fdHJhbnNmb3JtSUQgPSAtMTtcbiAgICAgICAgdGhpcy5fdHJhbnNmb3JtVHJpbW1lZElEID0gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyB3b3JsZFRyYW5zZm9ybSAqIHZlcnRpY2VzLCBzdG9yZSBpdCBpbiB2ZXJ0ZXhEYXRhXG4gICAgICovXG4gICAgcHVibGljIGNhbGN1bGF0ZVZlcnRpY2VzKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSB0aGlzLl90ZXh0dXJlO1xuXG4gICAgICAgIGlmICh0aGlzLl90cmFuc2Zvcm1JRCA9PT0gdGhpcy50cmFuc2Zvcm0uX3dvcmxkSUQgJiYgdGhpcy5fdGV4dHVyZUlEID09PSB0ZXh0dXJlLl91cGRhdGVJRClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRleHR1cmUgVVYgaGVyZSwgYmVjYXVzZSBiYXNlIHRleHR1cmUgY2FuIGJlIGNoYW5nZWQgd2l0aG91dCBjYWxsaW5nIGBfb25UZXh0dXJlVXBkYXRlYFxuICAgICAgICBpZiAodGhpcy5fdGV4dHVyZUlEICE9PSB0ZXh0dXJlLl91cGRhdGVJRClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy51dnMgPSB0aGlzLl90ZXh0dXJlLl91dnMudXZzRmxvYXQzMjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3RyYW5zZm9ybUlEID0gdGhpcy50cmFuc2Zvcm0uX3dvcmxkSUQ7XG4gICAgICAgIHRoaXMuX3RleHR1cmVJRCA9IHRleHR1cmUuX3VwZGF0ZUlEO1xuXG4gICAgICAgIC8vIHNldCB0aGUgdmVydGV4IGRhdGFcblxuICAgICAgICBjb25zdCB3dCA9IHRoaXMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtO1xuICAgICAgICBjb25zdCBhID0gd3QuYTtcbiAgICAgICAgY29uc3QgYiA9IHd0LmI7XG4gICAgICAgIGNvbnN0IGMgPSB3dC5jO1xuICAgICAgICBjb25zdCBkID0gd3QuZDtcbiAgICAgICAgY29uc3QgdHggPSB3dC50eDtcbiAgICAgICAgY29uc3QgdHkgPSB3dC50eTtcbiAgICAgICAgY29uc3QgdmVydGV4RGF0YSA9IHRoaXMudmVydGV4RGF0YTtcbiAgICAgICAgY29uc3QgdHJpbSA9IHRleHR1cmUudHJpbTtcbiAgICAgICAgY29uc3Qgb3JpZyA9IHRleHR1cmUub3JpZztcbiAgICAgICAgY29uc3QgYW5jaG9yID0gdGhpcy5fYW5jaG9yO1xuXG4gICAgICAgIGxldCB3MCA9IDA7XG4gICAgICAgIGxldCB3MSA9IDA7XG4gICAgICAgIGxldCBoMCA9IDA7XG4gICAgICAgIGxldCBoMSA9IDA7XG5cbiAgICAgICAgaWYgKHRyaW0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBzcHJpdGUgaXMgdHJpbW1lZCBhbmQgaXMgbm90IGEgdGlsaW5nc3ByaXRlIHRoZW4gd2UgbmVlZCB0byBhZGQgdGhlIGV4dHJhXG4gICAgICAgICAgICAvLyBzcGFjZSBiZWZvcmUgdHJhbnNmb3JtaW5nIHRoZSBzcHJpdGUgY29vcmRzLlxuICAgICAgICAgICAgdzEgPSB0cmltLnggLSAoYW5jaG9yLl94ICogb3JpZy53aWR0aCk7XG4gICAgICAgICAgICB3MCA9IHcxICsgdHJpbS53aWR0aDtcblxuICAgICAgICAgICAgaDEgPSB0cmltLnkgLSAoYW5jaG9yLl95ICogb3JpZy5oZWlnaHQpO1xuICAgICAgICAgICAgaDAgPSBoMSArIHRyaW0uaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdzEgPSAtYW5jaG9yLl94ICogb3JpZy53aWR0aDtcbiAgICAgICAgICAgIHcwID0gdzEgKyBvcmlnLndpZHRoO1xuXG4gICAgICAgICAgICBoMSA9IC1hbmNob3IuX3kgKiBvcmlnLmhlaWdodDtcbiAgICAgICAgICAgIGgwID0gaDEgKyBvcmlnLmhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHh5XG4gICAgICAgIHZlcnRleERhdGFbMF0gPSAoYSAqIHcxKSArIChjICogaDEpICsgdHg7XG4gICAgICAgIHZlcnRleERhdGFbMV0gPSAoZCAqIGgxKSArIChiICogdzEpICsgdHk7XG5cbiAgICAgICAgLy8geHlcbiAgICAgICAgdmVydGV4RGF0YVsyXSA9IChhICogdzApICsgKGMgKiBoMSkgKyB0eDtcbiAgICAgICAgdmVydGV4RGF0YVszXSA9IChkICogaDEpICsgKGIgKiB3MCkgKyB0eTtcblxuICAgICAgICAvLyB4eVxuICAgICAgICB2ZXJ0ZXhEYXRhWzRdID0gKGEgKiB3MCkgKyAoYyAqIGgwKSArIHR4O1xuICAgICAgICB2ZXJ0ZXhEYXRhWzVdID0gKGQgKiBoMCkgKyAoYiAqIHcwKSArIHR5O1xuXG4gICAgICAgIC8vIHh5XG4gICAgICAgIHZlcnRleERhdGFbNl0gPSAoYSAqIHcxKSArIChjICogaDApICsgdHg7XG4gICAgICAgIHZlcnRleERhdGFbN10gPSAoZCAqIGgwKSArIChiICogdzEpICsgdHk7XG5cbiAgICAgICAgaWYgKHRoaXMuX3JvdW5kUGl4ZWxzKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uID0gc2V0dGluZ3MuUkVTT0xVVElPTjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXhEYXRhLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZlcnRleERhdGFbaV0gPSBNYXRoLnJvdW5kKCh2ZXJ0ZXhEYXRhW2ldICogcmVzb2x1dGlvbiB8IDApIC8gcmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjYWxjdWxhdGVzIHdvcmxkVHJhbnNmb3JtICogdmVydGljZXMgZm9yIGEgbm9uIHRleHR1cmUgd2l0aCBhIHRyaW0uIHN0b3JlIGl0IGluIHZlcnRleFRyaW1tZWREYXRhXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IHRoZSB0cnVlIHdpZHRoIGFuZCBoZWlnaHQgb2YgYSB0cmltbWVkIHRleHR1cmUgaXMgcmVzcGVjdGVkXG4gICAgICovXG4gICAgcHVibGljIGNhbGN1bGF0ZVRyaW1tZWRWZXJ0aWNlcygpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMudmVydGV4VHJpbW1lZERhdGEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudmVydGV4VHJpbW1lZERhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX3RyYW5zZm9ybVRyaW1tZWRJRCA9PT0gdGhpcy50cmFuc2Zvcm0uX3dvcmxkSUQgJiYgdGhpcy5fdGV4dHVyZVRyaW1tZWRJRCA9PT0gdGhpcy5fdGV4dHVyZS5fdXBkYXRlSUQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3RyYW5zZm9ybVRyaW1tZWRJRCA9IHRoaXMudHJhbnNmb3JtLl93b3JsZElEO1xuICAgICAgICB0aGlzLl90ZXh0dXJlVHJpbW1lZElEID0gdGhpcy5fdGV4dHVyZS5fdXBkYXRlSUQ7XG5cbiAgICAgICAgLy8gbGV0cyBkbyBzb21lIHNwZWNpYWwgdHJpbSBjb2RlIVxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5fdGV4dHVyZTtcbiAgICAgICAgY29uc3QgdmVydGV4RGF0YSA9IHRoaXMudmVydGV4VHJpbW1lZERhdGE7XG4gICAgICAgIGNvbnN0IG9yaWcgPSB0ZXh0dXJlLm9yaWc7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IHRoaXMuX2FuY2hvcjtcblxuICAgICAgICAvLyBsZXRzIGNhbGN1bGF0ZSB0aGUgbmV3IHVudHJpbW1lZCBib3VuZHMuLlxuICAgICAgICBjb25zdCB3dCA9IHRoaXMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtO1xuICAgICAgICBjb25zdCBhID0gd3QuYTtcbiAgICAgICAgY29uc3QgYiA9IHd0LmI7XG4gICAgICAgIGNvbnN0IGMgPSB3dC5jO1xuICAgICAgICBjb25zdCBkID0gd3QuZDtcbiAgICAgICAgY29uc3QgdHggPSB3dC50eDtcbiAgICAgICAgY29uc3QgdHkgPSB3dC50eTtcblxuICAgICAgICBjb25zdCB3MSA9IC1hbmNob3IuX3ggKiBvcmlnLndpZHRoO1xuICAgICAgICBjb25zdCB3MCA9IHcxICsgb3JpZy53aWR0aDtcblxuICAgICAgICBjb25zdCBoMSA9IC1hbmNob3IuX3kgKiBvcmlnLmhlaWdodDtcbiAgICAgICAgY29uc3QgaDAgPSBoMSArIG9yaWcuaGVpZ2h0O1xuXG4gICAgICAgIC8vIHh5XG4gICAgICAgIHZlcnRleERhdGFbMF0gPSAoYSAqIHcxKSArIChjICogaDEpICsgdHg7XG4gICAgICAgIHZlcnRleERhdGFbMV0gPSAoZCAqIGgxKSArIChiICogdzEpICsgdHk7XG5cbiAgICAgICAgLy8geHlcbiAgICAgICAgdmVydGV4RGF0YVsyXSA9IChhICogdzApICsgKGMgKiBoMSkgKyB0eDtcbiAgICAgICAgdmVydGV4RGF0YVszXSA9IChkICogaDEpICsgKGIgKiB3MCkgKyB0eTtcblxuICAgICAgICAvLyB4eVxuICAgICAgICB2ZXJ0ZXhEYXRhWzRdID0gKGEgKiB3MCkgKyAoYyAqIGgwKSArIHR4O1xuICAgICAgICB2ZXJ0ZXhEYXRhWzVdID0gKGQgKiBoMCkgKyAoYiAqIHcwKSArIHR5O1xuXG4gICAgICAgIC8vIHh5XG4gICAgICAgIHZlcnRleERhdGFbNl0gPSAoYSAqIHcxKSArIChjICogaDApICsgdHg7XG4gICAgICAgIHZlcnRleERhdGFbN10gPSAoZCAqIGgwKSArIChiICogdzEpICsgdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKlxuICAgICogUmVuZGVycyB0aGUgb2JqZWN0IHVzaW5nIHRoZSBXZWJHTCByZW5kZXJlclxuICAgICpcbiAgICAqIEBwcm90ZWN0ZWRcbiAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBUaGUgd2ViZ2wgcmVuZGVyZXIgdG8gdXNlLlxuICAgICovXG4gICAgcHJvdGVjdGVkIF9yZW5kZXIocmVuZGVyZXI6IFJlbmRlcmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVWZXJ0aWNlcygpO1xuXG4gICAgICAgIHJlbmRlcmVyLmJhdGNoLnNldE9iamVjdFJlbmRlcmVyKHJlbmRlcmVyLnBsdWdpbnNbdGhpcy5wbHVnaW5OYW1lXSk7XG4gICAgICAgIHJlbmRlcmVyLnBsdWdpbnNbdGhpcy5wbHVnaW5OYW1lXS5yZW5kZXIodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgYm91bmRzIG9mIHRoZSBzcHJpdGUuXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9jYWxjdWxhdGVCb3VuZHMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgdHJpbSA9IHRoaXMuX3RleHR1cmUudHJpbTtcbiAgICAgICAgY29uc3Qgb3JpZyA9IHRoaXMuX3RleHR1cmUub3JpZztcblxuICAgICAgICAvLyBGaXJzdCBsZXRzIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB0ZXh0dXJlIGhhcyBhIHRyaW0uLlxuICAgICAgICBpZiAoIXRyaW0gfHwgKHRyaW0ud2lkdGggPT09IG9yaWcud2lkdGggJiYgdHJpbS5oZWlnaHQgPT09IG9yaWcuaGVpZ2h0KSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gbm8gdHJpbSEgbGV0cyB1c2UgdGhlIHVzdWFsIGNhbGN1bGF0aW9ucy4uXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVZlcnRpY2VzKCk7XG4gICAgICAgICAgICB0aGlzLl9ib3VuZHMuYWRkUXVhZCh0aGlzLnZlcnRleERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gbGV0cyBjYWxjdWxhdGUgYSBzcGVjaWFsIHRyaW1tZWQgYm91bmRzLi4uXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVRyaW1tZWRWZXJ0aWNlcygpO1xuICAgICAgICAgICAgdGhpcy5fYm91bmRzLmFkZFF1YWQodGhpcy52ZXJ0ZXhUcmltbWVkRGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCBib3VuZHMgb2YgdGhlIHNwcml0ZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSBbcmVjdF0gLSBUaGUgb3V0cHV0IHJlY3RhbmdsZS5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlJlY3RhbmdsZX0gVGhlIGJvdW5kcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0TG9jYWxCb3VuZHMocmVjdDogUmVjdGFuZ2xlKTogUmVjdGFuZ2xlXG4gICAge1xuICAgICAgICAvLyB3ZSBjYW4gZG8gYSBmYXN0IGxvY2FsIGJvdW5kcyBpZiB0aGUgc3ByaXRlIGhhcyBubyBjaGlsZHJlbiFcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9ib3VuZHMubWluWCA9IHRoaXMuX3RleHR1cmUub3JpZy53aWR0aCAqIC10aGlzLl9hbmNob3IuX3g7XG4gICAgICAgICAgICB0aGlzLl9ib3VuZHMubWluWSA9IHRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQgKiAtdGhpcy5fYW5jaG9yLl95O1xuICAgICAgICAgICAgdGhpcy5fYm91bmRzLm1heFggPSB0aGlzLl90ZXh0dXJlLm9yaWcud2lkdGggKiAoMSAtIHRoaXMuX2FuY2hvci5feCk7XG4gICAgICAgICAgICB0aGlzLl9ib3VuZHMubWF4WSA9IHRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQgKiAoMSAtIHRoaXMuX2FuY2hvci5feSk7XG5cbiAgICAgICAgICAgIGlmICghcmVjdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2xvY2FsQm91bmRzUmVjdClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvY2FsQm91bmRzUmVjdCA9IG5ldyBSZWN0YW5nbGUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZWN0ID0gdGhpcy5fbG9jYWxCb3VuZHNSZWN0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYm91bmRzLmdldFJlY3RhbmdsZShyZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdXBlci5nZXRMb2NhbEJvdW5kcy5jYWxsKHRoaXMsIHJlY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlc3RzIGlmIGEgcG9pbnQgaXMgaW5zaWRlIHRoaXMgc3ByaXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcG9pbnQgLSB0aGUgcG9pbnQgdG8gdGVzdFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRoZSByZXN1bHQgb2YgdGhlIHRlc3RcbiAgICAgKi9cbiAgICBwdWJsaWMgY29udGFpbnNQb2ludChwb2ludDogSVBvaW50RGF0YSk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKHBvaW50LCB0ZW1wUG9pbnQpO1xuXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fdGV4dHVyZS5vcmlnLndpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLl90ZXh0dXJlLm9yaWcuaGVpZ2h0O1xuICAgICAgICBjb25zdCB4MSA9IC13aWR0aCAqIHRoaXMuYW5jaG9yLng7XG4gICAgICAgIGxldCB5MSA9IDA7XG5cbiAgICAgICAgaWYgKHRlbXBQb2ludC54ID49IHgxICYmIHRlbXBQb2ludC54IDwgeDEgKyB3aWR0aClcbiAgICAgICAge1xuICAgICAgICAgICAgeTEgPSAtaGVpZ2h0ICogdGhpcy5hbmNob3IueTtcblxuICAgICAgICAgICAgaWYgKHRlbXBQb2ludC55ID49IHkxICYmIHRlbXBQb2ludC55IDwgeTEgKyBoZWlnaHQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhpcyBzcHJpdGUgYW5kIG9wdGlvbmFsbHkgaXRzIHRleHR1cmUgYW5kIGNoaWxkcmVuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdHxib29sZWFufSBbb3B0aW9uc10gLSBPcHRpb25zIHBhcmFtZXRlci4gQSBib29sZWFuIHdpbGwgYWN0IGFzIGlmIGFsbCBvcHRpb25zXG4gICAgICogIGhhdmUgYmVlbiBzZXQgdG8gdGhhdCB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2hpbGRyZW49ZmFsc2VdIC0gaWYgc2V0IHRvIHRydWUsIGFsbCB0aGUgY2hpbGRyZW4gd2lsbCBoYXZlIHRoZWlyIGRlc3Ryb3lcbiAgICAgKiAgICAgIG1ldGhvZCBjYWxsZWQgYXMgd2VsbC4gJ29wdGlvbnMnIHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRob3NlIGNhbGxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudGV4dHVyZT1mYWxzZV0gLSBTaG91bGQgaXQgZGVzdHJveSB0aGUgY3VycmVudCB0ZXh0dXJlIG9mIHRoZSBzcHJpdGUgYXMgd2VsbFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYmFzZVRleHR1cmU9ZmFsc2VdIC0gU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIGJhc2UgdGV4dHVyZSBvZiB0aGUgc3ByaXRlIGFzIHdlbGxcbiAgICAgKi9cbiAgICBwdWJsaWMgZGVzdHJveShvcHRpb25zOiBJRGVzdHJveU9wdGlvbnN8Ym9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3kob3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5fdGV4dHVyZS5vZmYoJ3VwZGF0ZScsIHRoaXMuX29uVGV4dHVyZVVwZGF0ZSwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5fYW5jaG9yID0gbnVsbDtcblxuICAgICAgICBjb25zdCBkZXN0cm95VGV4dHVyZSA9IHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicgPyBvcHRpb25zIDogb3B0aW9ucyAmJiBvcHRpb25zLnRleHR1cmU7XG5cbiAgICAgICAgaWYgKGRlc3Ryb3lUZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBkZXN0cm95QmFzZVRleHR1cmUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucyA6IG9wdGlvbnMgJiYgb3B0aW9ucy5iYXNlVGV4dHVyZTtcblxuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZS5kZXN0cm95KCEhZGVzdHJveUJhc2VUZXh0dXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3RleHR1cmUgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIHNvbWUgaGVscGVyIGZ1bmN0aW9ucy4uXG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGEgbmV3IHNwcml0ZSBiYXNlZCBvbiB0aGUgc291cmNlIHlvdSBwcm92aWRlLlxuICAgICAqIFRoZSBzb3VyY2UgY2FuIGJlIC0gZnJhbWUgaWQsIGltYWdlIHVybCwgdmlkZW8gdXJsLCBjYW52YXMgZWxlbWVudCwgdmlkZW8gZWxlbWVudCwgYmFzZSB0ZXh0dXJlXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd8UElYSS5UZXh0dXJlfEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IHNvdXJjZSAtIFNvdXJjZSB0byBjcmVhdGUgdGV4dHVyZSBmcm9tXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIFNlZSB7QGxpbmsgUElYSS5CYXNlVGV4dHVyZX0ncyBjb25zdHJ1Y3RvciBmb3Igb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlNwcml0ZX0gVGhlIG5ld2x5IGNyZWF0ZWQgc3ByaXRlXG4gICAgICovXG4gICAgc3RhdGljIGZyb20oc291cmNlOiBTcHJpdGVTb3VyY2UsIG9wdGlvbnM6IElCYXNlVGV4dHVyZU9wdGlvbnMpOiBTcHJpdGVcbiAgICB7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSAoc291cmNlIGluc3RhbmNlb2YgVGV4dHVyZSlcbiAgICAgICAgICAgID8gc291cmNlXG4gICAgICAgICAgICA6IFRleHR1cmUuZnJvbShzb3VyY2UsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBuZXcgU3ByaXRlKHRleHR1cmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHRydWUgUGl4aUpTIHdpbGwgTWF0aC5mbG9vcigpIHgveSB2YWx1ZXMgd2hlbiByZW5kZXJpbmcsIHN0b3BwaW5nIHBpeGVsIGludGVycG9sYXRpb24uXG4gICAgICogQWR2YW50YWdlcyBjYW4gaW5jbHVkZSBzaGFycGVyIGltYWdlIHF1YWxpdHkgKGxpa2UgdGV4dCkgYW5kIGZhc3RlciByZW5kZXJpbmcgb24gY2FudmFzLlxuICAgICAqIFRoZSBtYWluIGRpc2FkdmFudGFnZSBpcyBtb3ZlbWVudCBvZiBvYmplY3RzIG1heSBhcHBlYXIgbGVzcyBzbW9vdGguXG4gICAgICogVG8gc2V0IHRoZSBnbG9iYWwgZGVmYXVsdCwgY2hhbmdlIHtAbGluayBQSVhJLnNldHRpbmdzLlJPVU5EX1BJWEVMU31cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBzZXQgcm91bmRQaXhlbHModmFsdWU6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fcm91bmRQaXhlbHMgIT09IHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl90cmFuc2Zvcm1JRCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JvdW5kUGl4ZWxzID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IHJvdW5kUGl4ZWxzKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yb3VuZFBpeGVscztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgd2lkdGggb2YgdGhlIHNwcml0ZSwgc2V0dGluZyB0aGlzIHdpbGwgYWN0dWFsbHkgbW9kaWZ5IHRoZSBzY2FsZSB0byBhY2hpZXZlIHRoZSB2YWx1ZSBzZXRcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgd2lkdGgoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gTWF0aC5hYnModGhpcy5zY2FsZS54KSAqIHRoaXMuX3RleHR1cmUub3JpZy53aWR0aDtcbiAgICB9XG5cbiAgICBzZXQgd2lkdGgodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGNvbnN0IHMgPSBzaWduKHRoaXMuc2NhbGUueCkgfHwgMTtcblxuICAgICAgICB0aGlzLnNjYWxlLnggPSBzICogdmFsdWUgLyB0aGlzLl90ZXh0dXJlLm9yaWcud2lkdGg7XG4gICAgICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGhlaWdodCBvZiB0aGUgc3ByaXRlLCBzZXR0aW5nIHRoaXMgd2lsbCBhY3R1YWxseSBtb2RpZnkgdGhlIHNjYWxlIHRvIGFjaGlldmUgdGhlIHZhbHVlIHNldFxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBoZWlnaHQoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gTWF0aC5hYnModGhpcy5zY2FsZS55KSAqIHRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgc2V0IGhlaWdodCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgY29uc3QgcyA9IHNpZ24odGhpcy5zY2FsZS55KSB8fCAxO1xuXG4gICAgICAgIHRoaXMuc2NhbGUueSA9IHMgKiB2YWx1ZSAvIHRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQ7XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBhbmNob3Igc2V0cyB0aGUgb3JpZ2luIHBvaW50IG9mIHRoZSBzcHJpdGUuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRha2VuIGZyb20gdGhlIHtAbGluayBQSVhJLlRleHR1cmV8VGV4dHVyZX1cbiAgICAgKiBhbmQgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGlzIGAoMCwwKWAsIHRoaXMgbWVhbnMgdGhlIHNwcml0ZSdzIG9yaWdpbiBpcyB0aGUgdG9wIGxlZnQuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHRoZSBhbmNob3IgdG8gYCgwLjUsMC41KWAgbWVhbnMgdGhlIHNwcml0ZSdzIG9yaWdpbiBpcyBjZW50ZXJlZC5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgdGhlIGFuY2hvciB0byBgKDEsMSlgIHdvdWxkIG1lYW4gdGhlIHNwcml0ZSdzIG9yaWdpbiBwb2ludCB3aWxsIGJlIHRoZSBib3R0b20gcmlnaHQgY29ybmVyLlxuICAgICAqXG4gICAgICogSWYgeW91IHBhc3Mgb25seSBzaW5nbGUgcGFyYW1ldGVyLCBpdCB3aWxsIHNldCBib3RoIHggYW5kIHkgdG8gdGhlIHNhbWUgdmFsdWUgYXMgc2hvd24gaW4gdGhlIGV4YW1wbGUgYmVsb3cuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IHNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcbiAgICAgKiBzcHJpdGUuYW5jaG9yLnNldCgwLjUpOyAvLyBUaGlzIHdpbGwgc2V0IHRoZSBvcmlnaW4gdG8gY2VudGVyLiAoMC41KSBpcyBzYW1lIGFzICgwLjUsIDAuNSkuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtQSVhJLk9ic2VydmFibGVQb2ludH1cbiAgICAgKi9cbiAgICBnZXQgYW5jaG9yKCk6IE9ic2VydmFibGVQb2ludFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FuY2hvcjtcbiAgICB9XG5cbiAgICBzZXQgYW5jaG9yKHZhbHVlOiBPYnNlcnZhYmxlUG9pbnQpXG4gICAge1xuICAgICAgICB0aGlzLl9hbmNob3IuY29weUZyb20odmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSB0aW50IGFwcGxpZWQgdG8gdGhlIHNwcml0ZS4gVGhpcyBpcyBhIGhleCB2YWx1ZS5cbiAgICAgKiBBIHZhbHVlIG9mIDB4RkZGRkZGIHdpbGwgcmVtb3ZlIGFueSB0aW50IGVmZmVjdC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCAweEZGRkZGRlxuICAgICAqL1xuICAgIGdldCB0aW50KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbnQ7XG4gICAgfVxuXG4gICAgc2V0IHRpbnQodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMuX3RpbnQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fdGludFJHQiA9ICh2YWx1ZSA+PiAxNikgKyAodmFsdWUgJiAweGZmMDApICsgKCh2YWx1ZSAmIDB4ZmYpIDw8IDE2KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dHVyZSB0aGF0IHRoZSBzcHJpdGUgaXMgdXNpbmdcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZX1cbiAgICAgKi9cbiAgICBnZXQgdGV4dHVyZSgpOiBUZXh0dXJlXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZTtcbiAgICB9XG5cbiAgICBzZXQgdGV4dHVyZSh2YWx1ZTogVGV4dHVyZSlcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl90ZXh0dXJlID09PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX3RleHR1cmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmUub2ZmKCd1cGRhdGUnLCB0aGlzLl9vblRleHR1cmVVcGRhdGUsIHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IHZhbHVlIHx8IFRleHR1cmUuRU1QVFk7XG4gICAgICAgIHRoaXMuX2NhY2hlZFRpbnQgPSAweEZGRkZGRjtcblxuICAgICAgICB0aGlzLl90ZXh0dXJlSUQgPSAtMTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZVRyaW1tZWRJRCA9IC0xO1xuXG4gICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gd2FpdCBmb3IgdGhlIHRleHR1cmUgdG8gbG9hZFxuICAgICAgICAgICAgaWYgKHZhbHVlLmJhc2VUZXh0dXJlLnZhbGlkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuX29uVGV4dHVyZVVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhbHVlLm9uY2UoJ3VwZGF0ZScsIHRoaXMuX29uVGV4dHVyZVVwZGF0ZSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiLyoqXG4gKiBDb25zdGFudHMgdGhhdCBkZWZpbmUgdGhlIHR5cGUgb2YgZ3JhZGllbnQgb24gdGV4dC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIFRFWFRfR1JBRElFTlRcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtudW1iZXJ9IExJTkVBUl9WRVJUSUNBTCBWZXJ0aWNhbCBncmFkaWVudFxuICogQHByb3BlcnR5IHtudW1iZXJ9IExJTkVBUl9IT1JJWk9OVEFMIExpbmVhciBncmFkaWVudFxuICovXG5leHBvcnQgZW51bSBURVhUX0dSQURJRU5UIHtcbiAgICBMSU5FQVJfVkVSVElDQUwgPSAwLFxuICAgIExJTkVBUl9IT1JJWk9OVEFMID0gMVxufVxuIiwgIi8vIGRpc2FibGluZyBlc2xpbnQgZm9yIG5vdywgZ29pbmcgdG8gcmV3cml0ZSB0aGlzIGluIHY1XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG5pbXBvcnQgeyBURVhUX0dSQURJRU5UIH0gZnJvbSAnLi9jb25zdCc7XG5pbXBvcnQgeyBoZXgyc3RyaW5nIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuXG5leHBvcnQgdHlwZSBUZXh0U3R5bGVBbGlnbiA9ICdsZWZ0J3wnY2VudGVyJ3wncmlnaHQnO1xuZXhwb3J0IHR5cGUgVGV4dFN0eWxlRmlsbCA9IHN0cmluZ3xzdHJpbmdbXXxudW1iZXJ8bnVtYmVyW118Q2FudmFzR3JhZGllbnR8Q2FudmFzUGF0dGVybjtcbmV4cG9ydCB0eXBlIFRleHRTdHlsZUZvbnRTdHlsZSA9ICdub3JtYWwnfCdpdGFsaWMnfCdvYmxpcXVlJztcbmV4cG9ydCB0eXBlIFRleHRTdHlsZUZvbnRWYXJpYW50ID0gJ25vcm1hbCd8J3NtYWxsLWNhcHMnO1xuZXhwb3J0IHR5cGUgVGV4dFN0eWxlRm9udFdlaWdodCA9ICdub3JtYWwnfCdib2xkJ3wnYm9sZGVyJ3wnbGlnaHRlcid8JzEwMCd8JzIwMCd8JzMwMCd8JzQwMCd8JzUwMCd8JzYwMCd8JzcwMCd8JzgwMCd8JzkwMCc7XG5leHBvcnQgdHlwZSBUZXh0U3R5bGVMaW5lSm9pbiA9ICdtaXRlcid8J3JvdW5kJ3wnYmV2ZWwnO1xuZXhwb3J0IHR5cGUgVGV4dFN0eWxlVGV4dEJhc2VsaW5lID0gJ2FscGhhYmV0aWMnfCd0b3AnfCdoYW5naW5nJ3wnbWlkZGxlJ3wnaWRlb2dyYXBoaWMnfCdib3R0b20nO1xuZXhwb3J0IHR5cGUgVGV4dFN0eWxlV2hpdGVTcGFjZSA9ICdub3JtYWwnfCdwcmUnfCdwcmUtbGluZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRleHRTdHlsZSB7XG4gICAgYWxpZ246IFRleHRTdHlsZUFsaWduO1xuICAgIGJyZWFrV29yZHM6IGJvb2xlYW47XG4gICAgZHJvcFNoYWRvdzogYm9vbGVhbjtcbiAgICBkcm9wU2hhZG93QWxwaGE6IG51bWJlcjtcbiAgICBkcm9wU2hhZG93QW5nbGU6IG51bWJlcjtcbiAgICBkcm9wU2hhZG93Qmx1cjogbnVtYmVyO1xuICAgIGRyb3BTaGFkb3dDb2xvcjogc3RyaW5nfG51bWJlcjtcbiAgICBkcm9wU2hhZG93RGlzdGFuY2U6IG51bWJlcjtcbiAgICBmaWxsOiBUZXh0U3R5bGVGaWxsO1xuICAgIGZpbGxHcmFkaWVudFR5cGU6IFRFWFRfR1JBRElFTlQ7XG4gICAgZmlsbEdyYWRpZW50U3RvcHM6IG51bWJlcltdO1xuICAgIGZvbnRGYW1pbHk6IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIGZvbnRTaXplOiBudW1iZXIgfCBzdHJpbmc7XG4gICAgZm9udFN0eWxlOiBUZXh0U3R5bGVGb250U3R5bGU7XG4gICAgZm9udFZhcmlhbnQ6IFRleHRTdHlsZUZvbnRWYXJpYW50O1xuICAgIGZvbnRXZWlnaHQ6IFRleHRTdHlsZUZvbnRXZWlnaHQ7XG4gICAgbGV0dGVyU3BhY2luZzogbnVtYmVyO1xuICAgIGxpbmVIZWlnaHQ6IG51bWJlcjtcbiAgICBsaW5lSm9pbjogVGV4dFN0eWxlTGluZUpvaW47XG4gICAgbWl0ZXJMaW1pdDogbnVtYmVyO1xuICAgIHBhZGRpbmc6IG51bWJlcjtcbiAgICBzdHJva2U6IHN0cmluZ3xudW1iZXI7XG4gICAgc3Ryb2tlVGhpY2tuZXNzOiBudW1iZXI7XG4gICAgdGV4dEJhc2VsaW5lOiBUZXh0U3R5bGVUZXh0QmFzZWxpbmU7XG4gICAgdHJpbTogYm9vbGVhbjtcbiAgICB3aGl0ZVNwYWNlOiBUZXh0U3R5bGVXaGl0ZVNwYWNlO1xuICAgIHdvcmRXcmFwOiBib29sZWFuO1xuICAgIHdvcmRXcmFwV2lkdGg6IG51bWJlcjtcbiAgICBsZWFkaW5nOiBudW1iZXI7XG59XG5cbmNvbnN0IGRlZmF1bHRTdHlsZTogSVRleHRTdHlsZSA9IHtcbiAgICBhbGlnbjogJ2xlZnQnLFxuICAgIGJyZWFrV29yZHM6IGZhbHNlLFxuICAgIGRyb3BTaGFkb3c6IGZhbHNlLFxuICAgIGRyb3BTaGFkb3dBbHBoYTogMSxcbiAgICBkcm9wU2hhZG93QW5nbGU6IE1hdGguUEkgLyA2LFxuICAgIGRyb3BTaGFkb3dCbHVyOiAwLFxuICAgIGRyb3BTaGFkb3dDb2xvcjogJ2JsYWNrJyxcbiAgICBkcm9wU2hhZG93RGlzdGFuY2U6IDUsXG4gICAgZmlsbDogJ2JsYWNrJyxcbiAgICBmaWxsR3JhZGllbnRUeXBlOiBURVhUX0dSQURJRU5ULkxJTkVBUl9WRVJUSUNBTCxcbiAgICBmaWxsR3JhZGllbnRTdG9wczogW10sXG4gICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICBmb250U2l6ZTogMjYsXG4gICAgZm9udFN0eWxlOiAnbm9ybWFsJyxcbiAgICBmb250VmFyaWFudDogJ25vcm1hbCcsXG4gICAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gICAgbGV0dGVyU3BhY2luZzogMCxcbiAgICBsaW5lSGVpZ2h0OiAwLFxuICAgIGxpbmVKb2luOiAnbWl0ZXInLFxuICAgIG1pdGVyTGltaXQ6IDEwLFxuICAgIHBhZGRpbmc6IDAsXG4gICAgc3Ryb2tlOiAnYmxhY2snLFxuICAgIHN0cm9rZVRoaWNrbmVzczogMCxcbiAgICB0ZXh0QmFzZWxpbmU6ICdhbHBoYWJldGljJyxcbiAgICB0cmltOiBmYWxzZSxcbiAgICB3aGl0ZVNwYWNlOiAncHJlJyxcbiAgICB3b3JkV3JhcDogZmFsc2UsXG4gICAgd29yZFdyYXBXaWR0aDogMTAwLFxuICAgIGxlYWRpbmc6IDAsXG59O1xuXG5jb25zdCBnZW5lcmljRm9udEZhbWlsaWVzID0gW1xuICAgICdzZXJpZicsXG4gICAgJ3NhbnMtc2VyaWYnLFxuICAgICdtb25vc3BhY2UnLFxuICAgICdjdXJzaXZlJyxcbiAgICAnZmFudGFzeScsXG4gICAgJ3N5c3RlbS11aScsXG5dO1xuXG4vKipcbiAqIEEgVGV4dFN0eWxlIE9iamVjdCBjb250YWlucyBpbmZvcm1hdGlvbiB0byBkZWNvcmF0ZSBhIFRleHQgb2JqZWN0cy5cbiAqXG4gKiBBbiBpbnN0YW5jZSBjYW4gYmUgc2hhcmVkIGJldHdlZW4gbXVsdGlwbGUgVGV4dCBvYmplY3RzOyB0aGVuIGNoYW5naW5nIHRoZSBzdHlsZSB3aWxsIHVwZGF0ZSBhbGwgdGV4dCBvYmplY3RzIHVzaW5nIGl0LlxuICpcbiAqIEEgdG9vbCBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSBhIHRleHQgc3R5bGUgW2hlcmVdKGh0dHBzOi8vcGl4aWpzLmlvL3BpeGktdGV4dC1zdHlsZSkuXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgVGV4dFN0eWxlIGltcGxlbWVudHMgSVRleHRTdHlsZVxue1xuICAgIHB1YmxpYyBzdHlsZUlEOiBudW1iZXI7XG5cbiAgICBwcm90ZWN0ZWQgX2FsaWduOiBUZXh0U3R5bGVBbGlnbjtcbiAgICBwcm90ZWN0ZWQgX2JyZWFrV29yZHM6IGJvb2xlYW47XG4gICAgcHJvdGVjdGVkIF9kcm9wU2hhZG93OiBib29sZWFuO1xuICAgIHByb3RlY3RlZCBfZHJvcFNoYWRvd0FscGhhOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9kcm9wU2hhZG93QW5nbGU6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2Ryb3BTaGFkb3dCbHVyOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9kcm9wU2hhZG93Q29sb3I6IHN0cmluZ3xudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9kcm9wU2hhZG93RGlzdGFuY2U6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2ZpbGw6IFRleHRTdHlsZUZpbGw7XG4gICAgcHJvdGVjdGVkIF9maWxsR3JhZGllbnRUeXBlOiBURVhUX0dSQURJRU5UO1xuICAgIHByb3RlY3RlZCBfZmlsbEdyYWRpZW50U3RvcHM6IG51bWJlcltdO1xuICAgIHByb3RlY3RlZCBfZm9udEZhbWlseTogc3RyaW5nfHN0cmluZ1tdO1xuICAgIHByb3RlY3RlZCBfZm9udFNpemU6IG51bWJlcnxzdHJpbmc7XG4gICAgcHJvdGVjdGVkIF9mb250U3R5bGU6IFRleHRTdHlsZUZvbnRTdHlsZTtcbiAgICBwcm90ZWN0ZWQgX2ZvbnRWYXJpYW50OiBUZXh0U3R5bGVGb250VmFyaWFudDtcbiAgICBwcm90ZWN0ZWQgX2ZvbnRXZWlnaHQ6IFRleHRTdHlsZUZvbnRXZWlnaHQ7XG4gICAgcHJvdGVjdGVkIF9sZXR0ZXJTcGFjaW5nOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9saW5lSGVpZ2h0OiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9saW5lSm9pbjogVGV4dFN0eWxlTGluZUpvaW47XG4gICAgcHJvdGVjdGVkIF9taXRlckxpbWl0OiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9wYWRkaW5nOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9zdHJva2U6IHN0cmluZ3xudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9zdHJva2VUaGlja25lc3M6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX3RleHRCYXNlbGluZTogVGV4dFN0eWxlVGV4dEJhc2VsaW5lO1xuICAgIHByb3RlY3RlZCBfdHJpbTogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgX3doaXRlU3BhY2U6IFRleHRTdHlsZVdoaXRlU3BhY2U7XG4gICAgcHJvdGVjdGVkIF93b3JkV3JhcDogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgX3dvcmRXcmFwV2lkdGg6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2xlYWRpbmc6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbc3R5bGVdIC0gVGhlIHN0eWxlIHBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0eWxlLmFsaWduPSdsZWZ0J10gLSBBbGlnbm1lbnQgZm9yIG11bHRpbGluZSB0ZXh0ICgnbGVmdCcsICdjZW50ZXInIG9yICdyaWdodCcpLFxuICAgICAqICBkb2VzIG5vdCBhZmZlY3Qgc2luZ2xlIGxpbmUgdGV4dFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0eWxlLmJyZWFrV29yZHM9ZmFsc2VdIC0gSW5kaWNhdGVzIGlmIGxpbmVzIGNhbiBiZSB3cmFwcGVkIHdpdGhpbiB3b3JkcywgaXRcbiAgICAgKiAgbmVlZHMgd29yZFdyYXAgdG8gYmUgc2V0IHRvIHRydWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdHlsZS5kcm9wU2hhZG93PWZhbHNlXSAtIFNldCBhIGRyb3Agc2hhZG93IGZvciB0aGUgdGV4dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3R5bGUuZHJvcFNoYWRvd0FscGhhPTFdIC0gU2V0IGFscGhhIGZvciB0aGUgZHJvcCBzaGFkb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0eWxlLmRyb3BTaGFkb3dBbmdsZT1NYXRoLlBJLzZdIC0gU2V0IGEgYW5nbGUgb2YgdGhlIGRyb3Agc2hhZG93XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdHlsZS5kcm9wU2hhZG93Qmx1cj0wXSAtIFNldCBhIHNoYWRvdyBibHVyIHJhZGl1c1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW3N0eWxlLmRyb3BTaGFkb3dDb2xvcj0nYmxhY2snXSAtIEEgZmlsbCBzdHlsZSB0byBiZSB1c2VkIG9uIHRoZSBkcm9wc2hhZG93IGUuZyAncmVkJywgJyMwMEZGMDAnXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdHlsZS5kcm9wU2hhZG93RGlzdGFuY2U9NV0gLSBTZXQgYSBkaXN0YW5jZSBvZiB0aGUgZHJvcCBzaGFkb3dcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXXxudW1iZXJ8bnVtYmVyW118Q2FudmFzR3JhZGllbnR8Q2FudmFzUGF0dGVybn0gW3N0eWxlLmZpbGw9J2JsYWNrJ10gLSBBIGNhbnZhc1xuICAgICAqICBmaWxsc3R5bGUgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHRleHQgZS5nICdyZWQnLCAnIzAwRkYwMCcuIENhbiBiZSBhbiBhcnJheSB0byBjcmVhdGUgYSBncmFkaWVudFxuICAgICAqICBlZyBbJyMwMDAwMDAnLCcjRkZGRkZGJ11cbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC9maWxsU3R5bGV8TUROfVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3R5bGUuZmlsbEdyYWRpZW50VHlwZT1QSVhJLlRFWFRfR1JBRElFTlQuTElORUFSX1ZFUlRJQ0FMXSAtIElmIGZpbGwgaXMgYW4gYXJyYXkgb2YgY29sb3Vyc1xuICAgICAqICB0byBjcmVhdGUgYSBncmFkaWVudCwgdGhpcyBjYW4gY2hhbmdlIHRoZSB0eXBlL2RpcmVjdGlvbiBvZiB0aGUgZ3JhZGllbnQuIFNlZSB7QGxpbmsgUElYSS5URVhUX0dSQURJRU5UfVxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IFtzdHlsZS5maWxsR3JhZGllbnRTdG9wc10gLSBJZiBmaWxsIGlzIGFuIGFycmF5IG9mIGNvbG91cnMgdG8gY3JlYXRlIGEgZ3JhZGllbnQsIHRoaXMgYXJyYXkgY2FuIHNldFxuICAgICAqIHRoZSBzdG9wIHBvaW50cyAobnVtYmVycyBiZXR3ZWVuIDAgYW5kIDEpIGZvciB0aGUgY29sb3IsIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHQgYmVoYXZpb3VyIG9mIGV2ZW5seSBzcGFjaW5nIHRoZW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFtzdHlsZS5mb250RmFtaWx5PSdBcmlhbCddIC0gVGhlIGZvbnQgZmFtaWx5XG4gICAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBbc3R5bGUuZm9udFNpemU9MjZdIC0gVGhlIGZvbnQgc2l6ZSAoYXMgYSBudW1iZXIgaXQgY29udmVydHMgdG8gcHgsIGJ1dCBhcyBhIHN0cmluZyxcbiAgICAgKiAgZXF1aXZhbGVudHMgYXJlICcyNnB4JywnMjBwdCcsJzE2MCUnIG9yICcxLjZlbScpXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHlsZS5mb250U3R5bGU9J25vcm1hbCddIC0gVGhlIGZvbnQgc3R5bGUgKCdub3JtYWwnLCAnaXRhbGljJyBvciAnb2JsaXF1ZScpXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHlsZS5mb250VmFyaWFudD0nbm9ybWFsJ10gLSBUaGUgZm9udCB2YXJpYW50ICgnbm9ybWFsJyBvciAnc21hbGwtY2FwcycpXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHlsZS5mb250V2VpZ2h0PSdub3JtYWwnXSAtIFRoZSBmb250IHdlaWdodCAoJ25vcm1hbCcsICdib2xkJywgJ2JvbGRlcicsICdsaWdodGVyJyBhbmQgJzEwMCcsXG4gICAgICogICcyMDAnLCAnMzAwJywgJzQwMCcsICc1MDAnLCAnNjAwJywgJzcwMCcsICc4MDAnIG9yICc5MDAnKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3R5bGUubGVhZGluZz0wXSAtIFRoZSBzcGFjZSBiZXR3ZWVuIGxpbmVzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdHlsZS5sZXR0ZXJTcGFjaW5nPTBdIC0gVGhlIGFtb3VudCBvZiBzcGFjaW5nIGJldHdlZW4gbGV0dGVycywgZGVmYXVsdCBpcyAwXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdHlsZS5saW5lSGVpZ2h0XSAtIFRoZSBsaW5lIGhlaWdodCwgYSBudW1iZXIgdGhhdCByZXByZXNlbnRzIHRoZSB2ZXJ0aWNhbCBzcGFjZSB0aGF0IGEgbGV0dGVyIHVzZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0eWxlLmxpbmVKb2luPSdtaXRlciddIC0gVGhlIGxpbmVKb2luIHByb3BlcnR5IHNldHMgdGhlIHR5cGUgb2YgY29ybmVyIGNyZWF0ZWQsIGl0IGNhbiByZXNvbHZlXG4gICAgICogICAgICBzcGlrZWQgdGV4dCBpc3N1ZXMuIFBvc3NpYmxlIHZhbHVlcyBcIm1pdGVyXCIgKGNyZWF0ZXMgYSBzaGFycCBjb3JuZXIpLCBcInJvdW5kXCIgKGNyZWF0ZXMgYSByb3VuZCBjb3JuZXIpIG9yIFwiYmV2ZWxcIlxuICAgICAqICAgICAgKGNyZWF0ZXMgYSBzcXVhcmVkIGNvcm5lcikuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdHlsZS5taXRlckxpbWl0PTEwXSAtIFRoZSBtaXRlciBsaW1pdCB0byB1c2Ugd2hlbiB1c2luZyB0aGUgJ21pdGVyJyBsaW5lSm9pbiBtb2RlLiBUaGlzIGNhbiByZWR1Y2VcbiAgICAgKiAgICAgIG9yIGluY3JlYXNlIHRoZSBzcGlraW5lc3Mgb2YgcmVuZGVyZWQgdGV4dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0eWxlLnBhZGRpbmc9MF0gLSBPY2Nhc2lvbmFsbHkgc29tZSBmb250cyBhcmUgY3JvcHBlZC4gQWRkaW5nIHNvbWUgcGFkZGluZyB3aWxsIHByZXZlbnQgdGhpcyBmcm9tXG4gICAgICogICAgIGhhcHBlbmluZyBieSBhZGRpbmcgcGFkZGluZyB0byBhbGwgc2lkZXMgb2YgdGhlIHRleHQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbc3R5bGUuc3Ryb2tlPSdibGFjayddIC0gQSBjYW52YXMgZmlsbHN0eWxlIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSB0ZXh0IHN0cm9rZVxuICAgICAqICBlLmcgJ2JsdWUnLCAnI0ZDRkYwMCdcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0eWxlLnN0cm9rZVRoaWNrbmVzcz0wXSAtIEEgbnVtYmVyIHRoYXQgcmVwcmVzZW50cyB0aGUgdGhpY2tuZXNzIG9mIHRoZSBzdHJva2UuXG4gICAgICogIERlZmF1bHQgaXMgMCAobm8gc3Ryb2tlKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0eWxlLnRyaW09ZmFsc2VdIC0gVHJpbSB0cmFuc3BhcmVudCBib3JkZXJzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHlsZS50ZXh0QmFzZWxpbmU9J2FscGhhYmV0aWMnXSAtIFRoZSBiYXNlbGluZSBvZiB0aGUgdGV4dCB0aGF0IGlzIHJlbmRlcmVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3R5bGUud2hpdGVTcGFjZT0ncHJlJ10gLSBEZXRlcm1pbmVzIHdoZXRoZXIgbmV3bGluZXMgJiBzcGFjZXMgYXJlIGNvbGxhcHNlZCBvciBwcmVzZXJ2ZWQgXCJub3JtYWxcIlxuICAgICAqICAgICAgKGNvbGxhcHNlLCBjb2xsYXBzZSksIFwicHJlXCIgKHByZXNlcnZlLCBwcmVzZXJ2ZSkgfCBcInByZS1saW5lXCIgKHByZXNlcnZlLCBjb2xsYXBzZSkuIEl0IG5lZWRzIHdvcmRXcmFwIHRvIGJlIHNldCB0byB0cnVlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc3R5bGUud29yZFdyYXA9ZmFsc2VdIC0gSW5kaWNhdGVzIGlmIHdvcmQgd3JhcCBzaG91bGQgYmUgdXNlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3R5bGUud29yZFdyYXBXaWR0aD0xMDBdIC0gVGhlIHdpZHRoIGF0IHdoaWNoIHRleHQgd2lsbCB3cmFwLCBpdCBuZWVkcyB3b3JkV3JhcCB0byBiZSBzZXQgdG8gdHJ1ZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN0eWxlOiBQYXJ0aWFsPElUZXh0U3R5bGU+KVxuICAgIHtcbiAgICAgICAgdGhpcy5zdHlsZUlEID0gMDtcblxuICAgICAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICAgICAgZGVlcENvcHlQcm9wZXJ0aWVzKHRoaXMsIHN0eWxlLCBzdHlsZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBUZXh0U3R5bGUgb2JqZWN0IHdpdGggdGhlIHNhbWUgdmFsdWVzIGFzIHRoaXMgb25lLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgb25seSB0aGUgcHJvcGVydGllcyBvZiB0aGUgb2JqZWN0IGFyZSBjbG9uZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQSVhJLlRleHRTdHlsZX0gTmV3IGNsb25lZCBUZXh0U3R5bGUgb2JqZWN0XG4gICAgICovXG4gICAgcHVibGljIGNsb25lKCk6IFRleHRTdHlsZVxuICAgIHtcbiAgICAgICAgY29uc3QgY2xvbmVkUHJvcGVydGllczogUGFydGlhbDxJVGV4dFN0eWxlPiA9IHt9O1xuXG4gICAgICAgIGRlZXBDb3B5UHJvcGVydGllcyhjbG9uZWRQcm9wZXJ0aWVzLCB0aGlzLCBkZWZhdWx0U3R5bGUpO1xuXG4gICAgICAgIHJldHVybiBuZXcgVGV4dFN0eWxlKGNsb25lZFByb3BlcnRpZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0cyBhbGwgcHJvcGVydGllcyB0byB0aGUgZGVmYXVsdHMgc3BlY2lmaWVkIGluIFRleHRTdHlsZS5wcm90b3R5cGUuX2RlZmF1bHRcbiAgICAgKi9cbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgZGVlcENvcHlQcm9wZXJ0aWVzKHRoaXMsIGRlZmF1bHRTdHlsZSwgZGVmYXVsdFN0eWxlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGlnbm1lbnQgZm9yIG11bHRpbGluZSB0ZXh0ICgnbGVmdCcsICdjZW50ZXInIG9yICdyaWdodCcpLCBkb2VzIG5vdCBhZmZlY3Qgc2luZ2xlIGxpbmUgdGV4dFxuICAgICAqXG4gICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBhbGlnbigpOiBUZXh0U3R5bGVBbGlnblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsaWduO1xuICAgIH1cbiAgICBzZXQgYWxpZ24oYWxpZ246IFRleHRTdHlsZUFsaWduKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2FsaWduICE9PSBhbGlnbilcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fYWxpZ24gPSBhbGlnbjtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIGxpbmVzIGNhbiBiZSB3cmFwcGVkIHdpdGhpbiB3b3JkcywgaXQgbmVlZHMgd29yZFdyYXAgdG8gYmUgc2V0IHRvIHRydWVcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGJyZWFrV29yZHMoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JyZWFrV29yZHM7XG4gICAgfVxuICAgIHNldCBicmVha1dvcmRzKGJyZWFrV29yZHM6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fYnJlYWtXb3JkcyAhPT0gYnJlYWtXb3JkcylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fYnJlYWtXb3JkcyA9IGJyZWFrV29yZHM7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBhIGRyb3Agc2hhZG93IGZvciB0aGUgdGV4dFxuICAgICAqXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgZHJvcFNoYWRvdygpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fZHJvcFNoYWRvdztcbiAgICB9XG4gICAgc2V0IGRyb3BTaGFkb3coZHJvcFNoYWRvdzogYm9vbGVhbilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9kcm9wU2hhZG93ICE9PSBkcm9wU2hhZG93KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9kcm9wU2hhZG93ID0gZHJvcFNoYWRvdztcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGFscGhhIGZvciB0aGUgZHJvcCBzaGFkb3dcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgZHJvcFNoYWRvd0FscGhhKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Ryb3BTaGFkb3dBbHBoYTtcbiAgICB9XG4gICAgc2V0IGRyb3BTaGFkb3dBbHBoYShkcm9wU2hhZG93QWxwaGE6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9kcm9wU2hhZG93QWxwaGEgIT09IGRyb3BTaGFkb3dBbHBoYSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZHJvcFNoYWRvd0FscGhhID0gZHJvcFNoYWRvd0FscGhhO1xuICAgICAgICAgICAgdGhpcy5zdHlsZUlEKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYSBhbmdsZSBvZiB0aGUgZHJvcCBzaGFkb3dcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgZHJvcFNoYWRvd0FuZ2xlKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Ryb3BTaGFkb3dBbmdsZTtcbiAgICB9XG4gICAgc2V0IGRyb3BTaGFkb3dBbmdsZShkcm9wU2hhZG93QW5nbGU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9kcm9wU2hhZG93QW5nbGUgIT09IGRyb3BTaGFkb3dBbmdsZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZHJvcFNoYWRvd0FuZ2xlID0gZHJvcFNoYWRvd0FuZ2xlO1xuICAgICAgICAgICAgdGhpcy5zdHlsZUlEKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYSBzaGFkb3cgYmx1ciByYWRpdXNcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgZHJvcFNoYWRvd0JsdXIoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fZHJvcFNoYWRvd0JsdXI7XG4gICAgfVxuICAgIHNldCBkcm9wU2hhZG93Qmx1cihkcm9wU2hhZG93Qmx1cjogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2Ryb3BTaGFkb3dCbHVyICE9PSBkcm9wU2hhZG93Qmx1cilcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZHJvcFNoYWRvd0JsdXIgPSBkcm9wU2hhZG93Qmx1cjtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmaWxsIHN0eWxlIHRvIGJlIHVzZWQgb24gdGhlIGRyb3BzaGFkb3cgZS5nICdyZWQnLCAnIzAwRkYwMCdcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge3N0cmluZ3xudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGRyb3BTaGFkb3dDb2xvcigpOiBudW1iZXIgfCBzdHJpbmdcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kcm9wU2hhZG93Q29sb3I7XG4gICAgfVxuICAgIHNldCBkcm9wU2hhZG93Q29sb3IoZHJvcFNoYWRvd0NvbG9yOiBudW1iZXIgfCBzdHJpbmcpXG4gICAge1xuICAgICAgICBjb25zdCBvdXRwdXRDb2xvciA9IGdldENvbG9yKGRyb3BTaGFkb3dDb2xvcik7XG4gICAgICAgIGlmICh0aGlzLl9kcm9wU2hhZG93Q29sb3IgIT09IG91dHB1dENvbG9yKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9kcm9wU2hhZG93Q29sb3IgPSBvdXRwdXRDb2xvcjtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGEgZGlzdGFuY2Ugb2YgdGhlIGRyb3Agc2hhZG93XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGRyb3BTaGFkb3dEaXN0YW5jZSgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kcm9wU2hhZG93RGlzdGFuY2U7XG4gICAgfVxuICAgIHNldCBkcm9wU2hhZG93RGlzdGFuY2UoZHJvcFNoYWRvd0Rpc3RhbmNlOiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fZHJvcFNoYWRvd0Rpc3RhbmNlICE9PSBkcm9wU2hhZG93RGlzdGFuY2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2Ryb3BTaGFkb3dEaXN0YW5jZSA9IGRyb3BTaGFkb3dEaXN0YW5jZTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBjYW52YXMgZmlsbHN0eWxlIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSB0ZXh0IGUuZyAncmVkJywgJyMwMEZGMDAnLlxuICAgICAqIENhbiBiZSBhbiBhcnJheSB0byBjcmVhdGUgYSBncmFkaWVudCBlZyBbJyMwMDAwMDAnLCcjRkZGRkZGJ11cbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC9maWxsU3R5bGV8TUROfVxuICAgICAqXG4gICAgICogQG1lbWJlciB7c3RyaW5nfHN0cmluZ1tdfG51bWJlcnxudW1iZXJbXXxDYW52YXNHcmFkaWVudHxDYW52YXNQYXR0ZXJufVxuICAgICAqL1xuICAgIGdldCBmaWxsKCk6IFRleHRTdHlsZUZpbGxcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maWxsO1xuICAgIH1cbiAgICBzZXQgZmlsbChmaWxsOiBUZXh0U3R5bGVGaWxsKVxuICAgIHtcbiAgICAgICAgLy8gVE9ETzogQ2FuJ3QgaGF2ZSBkaWZmZXJlbnQgdHlwZXMgZm9yIGdldHRlciBhbmQgc2V0dGVyLiBUaGUgZ2V0dGVyIHNob3VsZG4ndCBoYXZlIHRoZSBudW1iZXIgdHlwZSBhc1xuICAgICAgICAvLyAgICAgICB0aGUgc2V0dGVyIGNvbnZlcnRzIHRvIHN0cmluZy4gU2VlIHRoaXMgdGhyZWFkIGZvciBtb3JlIGRldGFpbHM6XG4gICAgICAgIC8vICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMjUyMVxuICAgICAgICAvLyBUT0RPOiBOb3Qgc3VyZSBpZiBnZXRDb2xvciB3b3JrcyBwcm9wZXJseSB3aXRoIENhbnZhc0dyYWRpZW50IGFuZC9vciBDYW52YXNQYXR0ZXJuLCBjYW4ndCBwYXNzIGluXG4gICAgICAgIC8vICAgICAgIHdpdGhvdXQgY2FzdGluZyBoZXJlLlxuICAgICAgICBjb25zdCBvdXRwdXRDb2xvciA9IGdldENvbG9yKGZpbGwgYXMgYW55KTtcbiAgICAgICAgaWYgKHRoaXMuX2ZpbGwgIT09IG91dHB1dENvbG9yKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9maWxsID0gb3V0cHV0Q29sb3I7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIGZpbGwgaXMgYW4gYXJyYXkgb2YgY29sb3VycyB0byBjcmVhdGUgYSBncmFkaWVudCwgdGhpcyBjYW4gY2hhbmdlIHRoZSB0eXBlL2RpcmVjdGlvbiBvZiB0aGUgZ3JhZGllbnQuXG4gICAgICogU2VlIHtAbGluayBQSVhJLlRFWFRfR1JBRElFTlR9XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGZpbGxHcmFkaWVudFR5cGUoKTogVEVYVF9HUkFESUVOVFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbGxHcmFkaWVudFR5cGU7XG4gICAgfVxuICAgIHNldCBmaWxsR3JhZGllbnRUeXBlKGZpbGxHcmFkaWVudFR5cGU6IFRFWFRfR1JBRElFTlQpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fZmlsbEdyYWRpZW50VHlwZSAhPT0gZmlsbEdyYWRpZW50VHlwZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZmlsbEdyYWRpZW50VHlwZSA9IGZpbGxHcmFkaWVudFR5cGU7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIGZpbGwgaXMgYW4gYXJyYXkgb2YgY29sb3VycyB0byBjcmVhdGUgYSBncmFkaWVudCwgdGhpcyBhcnJheSBjYW4gc2V0IHRoZSBzdG9wIHBvaW50c1xuICAgICAqIChudW1iZXJzIGJldHdlZW4gMCBhbmQgMSkgZm9yIHRoZSBjb2xvciwgb3ZlcnJpZGluZyB0aGUgZGVmYXVsdCBiZWhhdmlvdXIgb2YgZXZlbmx5IHNwYWNpbmcgdGhlbS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcltdfVxuICAgICAqL1xuICAgIGdldCBmaWxsR3JhZGllbnRTdG9wcygpOiBudW1iZXJbXVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbGxHcmFkaWVudFN0b3BzO1xuICAgIH1cbiAgICBzZXQgZmlsbEdyYWRpZW50U3RvcHMoZmlsbEdyYWRpZW50U3RvcHM6IG51bWJlcltdKVxuICAgIHtcbiAgICAgICAgaWYgKCFhcmVBcnJheXNFcXVhbCh0aGlzLl9maWxsR3JhZGllbnRTdG9wcyxmaWxsR3JhZGllbnRTdG9wcykpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2ZpbGxHcmFkaWVudFN0b3BzID0gZmlsbEdyYWRpZW50U3RvcHM7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBmb250IGZhbWlseVxuICAgICAqXG4gICAgICogQG1lbWJlciB7c3RyaW5nfHN0cmluZ1tdfVxuICAgICAqL1xuICAgIGdldCBmb250RmFtaWx5KCk6IHN0cmluZyB8IHN0cmluZ1tdXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9udEZhbWlseTtcbiAgICB9XG4gICAgc2V0IGZvbnRGYW1pbHkoZm9udEZhbWlseTogc3RyaW5nIHwgc3RyaW5nW10pXG4gICAge1xuICAgICAgICBpZiAodGhpcy5mb250RmFtaWx5ICE9PSBmb250RmFtaWx5KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9mb250RmFtaWx5ID0gZm9udEZhbWlseTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGZvbnQgc2l6ZVxuICAgICAqIChhcyBhIG51bWJlciBpdCBjb252ZXJ0cyB0byBweCwgYnV0IGFzIGEgc3RyaW5nLCBlcXVpdmFsZW50cyBhcmUgJzI2cHgnLCcyMHB0JywnMTYwJScgb3IgJzEuNmVtJylcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcnxzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0IGZvbnRTaXplKCk6IG51bWJlciB8IHN0cmluZ1xuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvbnRTaXplO1xuICAgIH1cbiAgICBzZXQgZm9udFNpemUoZm9udFNpemU6IG51bWJlciB8IHN0cmluZylcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9mb250U2l6ZSAhPT0gZm9udFNpemUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2ZvbnRTaXplID0gZm9udFNpemU7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBmb250IHN0eWxlXG4gICAgICogKCdub3JtYWwnLCAnaXRhbGljJyBvciAnb2JsaXF1ZScpXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0IGZvbnRTdHlsZSgpOiBUZXh0U3R5bGVGb250U3R5bGVcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb250U3R5bGU7XG4gICAgfVxuICAgIHNldCBmb250U3R5bGUoZm9udFN0eWxlOiBUZXh0U3R5bGVGb250U3R5bGUpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fZm9udFN0eWxlICE9PSBmb250U3R5bGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2ZvbnRTdHlsZSA9IGZvbnRTdHlsZTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGZvbnQgdmFyaWFudFxuICAgICAqICgnbm9ybWFsJyBvciAnc21hbGwtY2FwcycpXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0IGZvbnRWYXJpYW50KCk6IFRleHRTdHlsZUZvbnRWYXJpYW50XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9udFZhcmlhbnQ7XG4gICAgfVxuICAgIHNldCBmb250VmFyaWFudChmb250VmFyaWFudDogVGV4dFN0eWxlRm9udFZhcmlhbnQpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fZm9udFZhcmlhbnQgIT09IGZvbnRWYXJpYW50KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9mb250VmFyaWFudCA9IGZvbnRWYXJpYW50O1xuICAgICAgICAgICAgdGhpcy5zdHlsZUlEKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZm9udCB3ZWlnaHRcbiAgICAgKiAoJ25vcm1hbCcsICdib2xkJywgJ2JvbGRlcicsICdsaWdodGVyJyBhbmQgJzEwMCcsICcyMDAnLCAnMzAwJywgJzQwMCcsICc1MDAnLCAnNjAwJywgJzcwMCcsIDgwMCcgb3IgJzkwMCcpXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0IGZvbnRXZWlnaHQoKTogVGV4dFN0eWxlRm9udFdlaWdodFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvbnRXZWlnaHQ7XG4gICAgfVxuICAgIHNldCBmb250V2VpZ2h0KGZvbnRXZWlnaHQ6IFRleHRTdHlsZUZvbnRXZWlnaHQpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fZm9udFdlaWdodCAhPT0gZm9udFdlaWdodClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZm9udFdlaWdodCA9IGZvbnRXZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBhbW91bnQgb2Ygc3BhY2luZyBiZXR3ZWVuIGxldHRlcnMsIGRlZmF1bHQgaXMgMFxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBsZXR0ZXJTcGFjaW5nKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xldHRlclNwYWNpbmc7XG4gICAgfVxuICAgIHNldCBsZXR0ZXJTcGFjaW5nKGxldHRlclNwYWNpbmc6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9sZXR0ZXJTcGFjaW5nICE9PSBsZXR0ZXJTcGFjaW5nKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9sZXR0ZXJTcGFjaW5nID0gbGV0dGVyU3BhY2luZztcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGxpbmUgaGVpZ2h0LCBhIG51bWJlciB0aGF0IHJlcHJlc2VudHMgdGhlIHZlcnRpY2FsIHNwYWNlIHRoYXQgYSBsZXR0ZXIgdXNlc1xuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBsaW5lSGVpZ2h0KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmVIZWlnaHQ7XG4gICAgfVxuICAgIHNldCBsaW5lSGVpZ2h0KGxpbmVIZWlnaHQ6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9saW5lSGVpZ2h0ICE9PSBsaW5lSGVpZ2h0KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9saW5lSGVpZ2h0ID0gbGluZUhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHNwYWNlIGJldHdlZW4gbGluZXNcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgbGVhZGluZygpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sZWFkaW5nO1xuICAgIH1cbiAgICBzZXQgbGVhZGluZyhsZWFkaW5nOiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fbGVhZGluZyAhPT0gbGVhZGluZylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fbGVhZGluZyA9IGxlYWRpbmc7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBsaW5lSm9pbiBwcm9wZXJ0eSBzZXRzIHRoZSB0eXBlIG9mIGNvcm5lciBjcmVhdGVkLCBpdCBjYW4gcmVzb2x2ZSBzcGlrZWQgdGV4dCBpc3N1ZXMuXG4gICAgICogRGVmYXVsdCBpcyAnbWl0ZXInIChjcmVhdGVzIGEgc2hhcnAgY29ybmVyKS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQgbGluZUpvaW4oKTogVGV4dFN0eWxlTGluZUpvaW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saW5lSm9pbjtcbiAgICB9XG4gICAgc2V0IGxpbmVKb2luKGxpbmVKb2luOiBUZXh0U3R5bGVMaW5lSm9pbilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9saW5lSm9pbiAhPT0gbGluZUpvaW4pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2xpbmVKb2luID0gbGluZUpvaW47XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtaXRlciBsaW1pdCB0byB1c2Ugd2hlbiB1c2luZyB0aGUgJ21pdGVyJyBsaW5lSm9pbiBtb2RlXG4gICAgICogVGhpcyBjYW4gcmVkdWNlIG9yIGluY3JlYXNlIHRoZSBzcGlraW5lc3Mgb2YgcmVuZGVyZWQgdGV4dC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgbWl0ZXJMaW1pdCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9taXRlckxpbWl0O1xuICAgIH1cbiAgICBzZXQgbWl0ZXJMaW1pdChtaXRlckxpbWl0OiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fbWl0ZXJMaW1pdCAhPT0gbWl0ZXJMaW1pdClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fbWl0ZXJMaW1pdCA9IG1pdGVyTGltaXQ7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9jY2FzaW9uYWxseSBzb21lIGZvbnRzIGFyZSBjcm9wcGVkLiBBZGRpbmcgc29tZSBwYWRkaW5nIHdpbGwgcHJldmVudCB0aGlzIGZyb20gaGFwcGVuaW5nXG4gICAgICogYnkgYWRkaW5nIHBhZGRpbmcgdG8gYWxsIHNpZGVzIG9mIHRoZSB0ZXh0LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBwYWRkaW5nKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhZGRpbmc7XG4gICAgfVxuICAgIHNldCBwYWRkaW5nKHBhZGRpbmc6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9wYWRkaW5nICE9PSBwYWRkaW5nKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9wYWRkaW5nID0gcGFkZGluZztcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBjYW52YXMgZmlsbHN0eWxlIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSB0ZXh0IHN0cm9rZVxuICAgICAqIGUuZyAnYmx1ZScsICcjRkNGRjAwJ1xuICAgICAqXG4gICAgICogQG1lbWJlciB7c3RyaW5nfG51bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgc3Ryb2tlKCk6IHN0cmluZyB8IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0cm9rZTtcbiAgICB9XG4gICAgc2V0IHN0cm9rZShzdHJva2U6IHN0cmluZyB8IG51bWJlcilcbiAgICB7XG4gICAgICAgIC8vIFRPRE86IENhbid0IGhhdmUgZGlmZmVyZW50IHR5cGVzIGZvciBnZXR0ZXIgYW5kIHNldHRlci4gVGhlIGdldHRlciBzaG91bGRuJ3QgaGF2ZSB0aGUgbnVtYmVyIHR5cGUgYXNcbiAgICAgICAgLy8gICAgICAgdGhlIHNldHRlciBjb252ZXJ0cyB0byBzdHJpbmcuIFNlZSB0aGlzIHRocmVhZCBmb3IgbW9yZSBkZXRhaWxzOlxuICAgICAgICAvLyAgICAgICBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzI1MjFcbiAgICAgICAgY29uc3Qgb3V0cHV0Q29sb3IgPSBnZXRDb2xvcihzdHJva2UpO1xuICAgICAgICBpZiAodGhpcy5fc3Ryb2tlICE9PSBvdXRwdXRDb2xvcilcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3Ryb2tlID0gb3V0cHV0Q29sb3I7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgbnVtYmVyIHRoYXQgcmVwcmVzZW50cyB0aGUgdGhpY2tuZXNzIG9mIHRoZSBzdHJva2UuXG4gICAgICogRGVmYXVsdCBpcyAwIChubyBzdHJva2UpXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHN0cm9rZVRoaWNrbmVzcygpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdHJva2VUaGlja25lc3M7XG4gICAgfVxuICAgIHNldCBzdHJva2VUaGlja25lc3Moc3Ryb2tlVGhpY2tuZXNzOiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fc3Ryb2tlVGhpY2tuZXNzICE9PSBzdHJva2VUaGlja25lc3MpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N0cm9rZVRoaWNrbmVzcyA9IHN0cm9rZVRoaWNrbmVzcztcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2VsaW5lIG9mIHRoZSB0ZXh0IHRoYXQgaXMgcmVuZGVyZWQuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0IHRleHRCYXNlbGluZSgpOiBUZXh0U3R5bGVUZXh0QmFzZWxpbmVcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXh0QmFzZWxpbmU7XG4gICAgfVxuICAgIHNldCB0ZXh0QmFzZWxpbmUodGV4dEJhc2VsaW5lOiBUZXh0U3R5bGVUZXh0QmFzZWxpbmUpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fdGV4dEJhc2VsaW5lICE9PSB0ZXh0QmFzZWxpbmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3RleHRCYXNlbGluZSA9IHRleHRCYXNlbGluZTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpbSB0cmFuc3BhcmVudCBib3JkZXJzXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCB0cmltKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmltO1xuICAgIH1cbiAgICBzZXQgdHJpbSh0cmltOiBib29sZWFuKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyaW0gIT09IHRyaW0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3RyaW0gPSB0cmltO1xuICAgICAgICAgICAgdGhpcy5zdHlsZUlEKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIb3cgbmV3bGluZXMgYW5kIHNwYWNlcyBzaG91bGQgYmUgaGFuZGxlZC5cbiAgICAgKiBEZWZhdWx0IGlzICdwcmUnIChwcmVzZXJ2ZSwgcHJlc2VydmUpLlxuICAgICAqXG4gICAgICogIHZhbHVlICAgICAgIHwgTmV3IGxpbmVzICAgICB8ICAgU3BhY2VzXG4gICAgICogIC0tLSAgICAgICAgIHwgLS0tICAgICAgICAgICB8ICAgLS0tXG4gICAgICogJ25vcm1hbCcgICAgIHwgQ29sbGFwc2UgICAgICB8ICAgQ29sbGFwc2VcbiAgICAgKiAncHJlJyAgICAgICAgfCBQcmVzZXJ2ZSAgICAgIHwgICBQcmVzZXJ2ZVxuICAgICAqICdwcmUtbGluZScgICB8IFByZXNlcnZlICAgICAgfCAgIENvbGxhcHNlXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0IHdoaXRlU3BhY2UoKTogVGV4dFN0eWxlV2hpdGVTcGFjZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3doaXRlU3BhY2U7XG4gICAgfVxuICAgIHNldCB3aGl0ZVNwYWNlKHdoaXRlU3BhY2U6IFRleHRTdHlsZVdoaXRlU3BhY2UpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fd2hpdGVTcGFjZSAhPT0gd2hpdGVTcGFjZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fd2hpdGVTcGFjZSA9IHdoaXRlU3BhY2U7XG4gICAgICAgICAgICB0aGlzLnN0eWxlSUQrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBpZiB3b3JkIHdyYXAgc2hvdWxkIGJlIHVzZWRcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IHdvcmRXcmFwKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl93b3JkV3JhcDtcbiAgICB9XG4gICAgc2V0IHdvcmRXcmFwKHdvcmRXcmFwOiBib29sZWFuKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX3dvcmRXcmFwICE9PSB3b3JkV3JhcClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fd29yZFdyYXAgPSB3b3JkV3JhcDtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIGF0IHdoaWNoIHRleHQgd2lsbCB3cmFwLCBpdCBuZWVkcyB3b3JkV3JhcCB0byBiZSBzZXQgdG8gdHJ1ZVxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB3b3JkV3JhcFdpZHRoKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dvcmRXcmFwV2lkdGg7XG4gICAgfVxuICAgIHNldCB3b3JkV3JhcFdpZHRoKHdvcmRXcmFwV2lkdGg6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl93b3JkV3JhcFdpZHRoICE9PSB3b3JkV3JhcFdpZHRoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl93b3JkV3JhcFdpZHRoID0gd29yZFdyYXBXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJRCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgZm9udCBzdHlsZSBzdHJpbmcgdG8gdXNlIGZvciBgVGV4dE1ldHJpY3MubWVhc3VyZUZvbnQoKWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEZvbnQgc3R5bGUgc3RyaW5nLCBmb3IgcGFzc2luZyB0byBgVGV4dE1ldHJpY3MubWVhc3VyZUZvbnQoKWBcbiAgICAgKi9cbiAgICBwdWJsaWMgdG9Gb250U3RyaW5nKCk6IHN0cmluZ1xuICAgIHtcbiAgICAgICAgLy8gYnVpbGQgY2FudmFzIGFwaSBmb250IHNldHRpbmcgZnJvbSBpbmRpdmlkdWFsIGNvbXBvbmVudHMuIENvbnZlcnQgYSBudW1lcmljIHRoaXMuZm9udFNpemUgdG8gcHhcbiAgICAgICAgY29uc3QgZm9udFNpemVTdHJpbmcgPSAodHlwZW9mIHRoaXMuZm9udFNpemUgPT09ICdudW1iZXInKSA/IGAke3RoaXMuZm9udFNpemV9cHhgIDogdGhpcy5mb250U2l6ZTtcblxuICAgICAgICAvLyBDbGVhbi11cCBmb250RmFtaWx5IHByb3BlcnR5IGJ5IHF1b3RpbmcgZWFjaCBmb250IG5hbWVcbiAgICAgICAgLy8gdGhpcyB3aWxsIHN1cHBvcnQgZm9udCBuYW1lcyB3aXRoIHNwYWNlc1xuICAgICAgICBsZXQgZm9udEZhbWlsaWVzOiBzdHJpbmd8c3RyaW5nW10gPSB0aGlzLmZvbnRGYW1pbHk7XG5cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuZm9udEZhbWlseSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbGllcyA9IHRoaXMuZm9udEZhbWlseS5zcGxpdCgnLCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IGZvbnRGYW1pbGllcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gVHJpbSBhbnkgZXh0cmEgd2hpdGUtc3BhY2VcbiAgICAgICAgICAgIGxldCBmb250RmFtaWx5ID0gZm9udEZhbWlsaWVzW2ldLnRyaW0oKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZm9udCBhbHJlYWR5IGNvbnRhaW5zIHN0cmluZ3NcbiAgICAgICAgICAgIGlmICghKC8oW1xcXCJcXCddKVteXFwnXFxcIl0rXFwxLykudGVzdChmb250RmFtaWx5KSAmJiBnZW5lcmljRm9udEZhbWlsaWVzLmluZGV4T2YoZm9udEZhbWlseSkgPCAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHkgPSBgXCIke2ZvbnRGYW1pbHl9XCJgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKGZvbnRGYW1pbGllcyBhcyBzdHJpbmdbXSlbaV0gPSBmb250RmFtaWx5O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGAke3RoaXMuZm9udFN0eWxlfSAke3RoaXMuZm9udFZhcmlhbnR9ICR7dGhpcy5mb250V2VpZ2h0fSAke2ZvbnRTaXplU3RyaW5nfSAkeyhmb250RmFtaWxpZXMgYXMgc3RyaW5nW10pLmpvaW4oJywnKX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIGNvbnZlcnQgaGV4YWRlY2ltYWwgY29sb3JzIHRvIHN0cmluZ3MsIGFuZCBzaW1wbHkgcmV0dXJuIHRoZSBjb2xvciBpZiBpdCdzIGEgc3RyaW5nLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gY29sb3JcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbG9yIGFzIGEgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBnZXRTaW5nbGVDb2xvcihjb2xvcjogc3RyaW5nfG51bWJlcik6IHN0cmluZ1xue1xuICAgIGlmICh0eXBlb2YgY29sb3IgPT09ICdudW1iZXInKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIGhleDJzdHJpbmcoY29sb3IpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnKVxuICAgIHtcbiAgICAgICAgaWYgKCBjb2xvci5pbmRleE9mKCcweCcpID09PSAwIClcbiAgICAgICAge1xuICAgICAgICAgICAgY29sb3IgPSBjb2xvci5yZXBsYWNlKCcweCcsICcjJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29sb3I7XG59XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBjb252ZXJ0IGhleGFkZWNpbWFsIGNvbG9ycyB0byBzdHJpbmdzLCBhbmQgc2ltcGx5IHJldHVybiB0aGUgY29sb3IgaWYgaXQncyBhIHN0cmluZy5cbiAqIFRoaXMgdmVyc2lvbiBjYW4gYWxzbyBjb252ZXJ0IGFycmF5IG9mIGNvbG9yc1xuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcnxudW1iZXJbXX0gY29sb3JcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbG9yIGFzIGEgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBnZXRDb2xvcihjb2xvcjogKHN0cmluZ3xudW1iZXIpW10pOiBzdHJpbmdbXTtcbmZ1bmN0aW9uIGdldENvbG9yKGNvbG9yOiBzdHJpbmd8bnVtYmVyKTogc3RyaW5nO1xuZnVuY3Rpb24gZ2V0Q29sb3IoY29sb3I6IHN0cmluZ3xudW1iZXJ8KHN0cmluZ3xudW1iZXIpW10pOiBzdHJpbmd8c3RyaW5nW11cbntcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29sb3IpKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIGdldFNpbmdsZUNvbG9yKGNvbG9yKTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvci5sZW5ndGg7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29sb3JbaV0gPSBnZXRTaW5nbGVDb2xvcihjb2xvcltpXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29sb3IgYXMgc3RyaW5nW107XG4gICAgfVxufVxuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gY29udmVydCBoZXhhZGVjaW1hbCBjb2xvcnMgdG8gc3RyaW5ncywgYW5kIHNpbXBseSByZXR1cm4gdGhlIGNvbG9yIGlmIGl0J3MgYSBzdHJpbmcuXG4gKiBUaGlzIHZlcnNpb24gY2FuIGFsc28gY29udmVydCBhcnJheSBvZiBjb2xvcnNcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheTEgLSBGaXJzdCBhcnJheSB0byBjb21wYXJlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheTIgLSBTZWNvbmQgYXJyYXkgdG8gY29tcGFyZVxuICogQHJldHVybiB7Ym9vbGVhbn0gRG8gdGhlIGFycmF5cyBjb250YWluIHRoZSBzYW1lIHZhbHVlcyBpbiB0aGUgc2FtZSBvcmRlclxuICovXG5mdW5jdGlvbiBhcmVBcnJheXNFcXVhbDxUPihhcnJheTE6IFRbXSwgYXJyYXkyOiBUW10pOiBib29sZWFuXG57XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5MSkgfHwgIUFycmF5LmlzQXJyYXkoYXJyYXkyKSlcbiAgICB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoYXJyYXkxLmxlbmd0aCAhPT0gYXJyYXkyLmxlbmd0aClcbiAgICB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5MS5sZW5ndGg7ICsraSlcbiAgICB7XG4gICAgICAgIGlmIChhcnJheTFbaV0gIT09IGFycmF5MltpXSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBlbnN1cmUgdGhhdCBvYmplY3QgcHJvcGVydGllcyBhcmUgY29waWVkIGJ5IHZhbHVlLCBhbmQgbm90IGJ5IHJlZmVyZW5jZVxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgLSBUYXJnZXQgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBpbnRvXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIC0gU291cmNlIG9iamVjdCBmb3IgdGhlIHByb3BlcnRpZXMgdG8gY29weVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5T2JqIC0gT2JqZWN0IGNvbnRhaW5pbmcgcHJvcGVydGllcyBuYW1lcyB3ZSB3YW50IHRvIGxvb3Agb3ZlclxuICovXG5mdW5jdGlvbiBkZWVwQ29weVByb3BlcnRpZXModGFyZ2V0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBzb3VyY2U6IFJlY29yZDxzdHJpbmcsIGFueT4sIHByb3BlcnR5T2JqOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBwcm9wIGluIHByb3BlcnR5T2JqKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZVtwcm9wXSkpIHtcbiAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHNvdXJjZVtwcm9wXS5zbGljZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFRleHRTdHlsZSwgVGV4dFN0eWxlV2hpdGVTcGFjZSB9IGZyb20gJy4vVGV4dFN0eWxlJztcblxuaW50ZXJmYWNlIElGb250TWV0cmljcyB7XG4gICAgYXNjZW50OiBudW1iZXI7XG4gICAgZGVzY2VudDogbnVtYmVyO1xuICAgIGZvbnRTaXplOiBudW1iZXI7XG59XG5cbnR5cGUgQ2hhcmFjdGVyV2lkdGhDYWNoZSA9IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH07XG5cbi8qKlxuICogVGhlIFRleHRNZXRyaWNzIG9iamVjdCByZXByZXNlbnRzIHRoZSBtZWFzdXJlbWVudCBvZiBhIGJsb2NrIG9mIHRleHQgd2l0aCBhIHNwZWNpZmllZCBzdHlsZS5cbiAqXG4gKiBgYGBqc1xuICogbGV0IHN0eWxlID0gbmV3IFBJWEkuVGV4dFN0eWxlKHtmb250RmFtaWx5IDogJ0FyaWFsJywgZm9udFNpemU6IDI0LCBmaWxsIDogMHhmZjEwMTAsIGFsaWduIDogJ2NlbnRlcid9KVxuICogbGV0IHRleHRNZXRyaWNzID0gUElYSS5UZXh0TWV0cmljcy5tZWFzdXJlVGV4dCgnWW91ciB0ZXh0Jywgc3R5bGUpXG4gKiBgYGBcbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXh0TWV0cmljc1xue1xuICAgIHB1YmxpYyB0ZXh0OiBzdHJpbmc7XG4gICAgcHVibGljIHN0eWxlOiBUZXh0U3R5bGU7XG4gICAgcHVibGljIHdpZHRoOiBudW1iZXI7XG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyO1xuICAgIHB1YmxpYyBsaW5lczogc3RyaW5nW107XG4gICAgcHVibGljIGxpbmVXaWR0aHM6IG51bWJlcltdO1xuICAgIHB1YmxpYyBsaW5lSGVpZ2h0OiBudW1iZXI7XG4gICAgcHVibGljIG1heExpbmVXaWR0aDogbnVtYmVyO1xuICAgIHB1YmxpYyBmb250UHJvcGVydGllczogSUZvbnRNZXRyaWNzO1xuXG4gICAgcHVibGljIHN0YXRpYyBNRVRSSUNTX1NUUklORzogc3RyaW5nO1xuICAgIHB1YmxpYyBzdGF0aWMgQkFTRUxJTkVfU1lNQk9MOiBzdHJpbmc7XG4gICAgcHVibGljIHN0YXRpYyBCQVNFTElORV9NVUxUSVBMSUVSOiBudW1iZXI7XG5cbiAgICAvLyBUT0RPOiBUaGVzZSBzaG91bGQgYmUgcHJvdGVjdGVkIGJ1dCB0aGV5J3JlIGluaXRpYWxpemVkIG91dHNpZGUgb2YgdGhlIGNsYXNzLlxuICAgIHB1YmxpYyBzdGF0aWMgX2NhbnZhczogSFRNTENhbnZhc0VsZW1lbnR8T2Zmc2NyZWVuQ2FudmFzO1xuICAgIHB1YmxpYyBzdGF0aWMgX2NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRHxPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgcHVibGljIHN0YXRpYyBfZm9udHM6IHsgW2ZvbnQ6IHN0cmluZ106IElGb250TWV0cmljcyB9O1xuICAgIHB1YmxpYyBzdGF0aWMgX25ld2xpbmVzOiBudW1iZXJbXTtcbiAgICBwdWJsaWMgc3RhdGljIF9icmVha2luZ1NwYWNlczogbnVtYmVyW107XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSB0ZXh0IHRoYXQgd2FzIG1lYXN1cmVkXG4gICAgICogQHBhcmFtIHtQSVhJLlRleHRTdHlsZX0gc3R5bGUgLSB0aGUgc3R5bGUgdGhhdCB3YXMgbWVhc3VyZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggLSB0aGUgbWVhc3VyZWQgd2lkdGggb2YgdGhlIHRleHRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gdGhlIG1lYXN1cmVkIGhlaWdodCBvZiB0aGUgdGV4dFxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGxpbmVzIC0gYW4gYXJyYXkgb2YgdGhlIGxpbmVzIG9mIHRleHQgYnJva2VuIGJ5IG5ldyBsaW5lcyBhbmQgd3JhcHBpbmcgaWYgc3BlY2lmaWVkIGluIHN0eWxlXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gbGluZVdpZHRocyAtIGFuIGFycmF5IG9mIHRoZSBsaW5lIHdpZHRocyBmb3IgZWFjaCBsaW5lIG1hdGNoZWQgdG8gYGxpbmVzYFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsaW5lSGVpZ2h0IC0gdGhlIG1lYXN1cmVkIGxpbmUgaGVpZ2h0IGZvciB0aGlzIHN0eWxlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heExpbmVXaWR0aCAtIHRoZSBtYXhpbXVtIGxpbmUgd2lkdGggZm9yIGFsbCBtZWFzdXJlZCBsaW5lc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmb250UHJvcGVydGllcyAtIHRoZSBmb250IHByb3BlcnRpZXMgb2JqZWN0IGZyb20gVGV4dE1ldHJpY3MubWVhc3VyZUZvbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0OiBzdHJpbmcsIHN0eWxlOiBUZXh0U3R5bGUsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBsaW5lczogc3RyaW5nW10sIGxpbmVXaWR0aHM6IG51bWJlcltdLFxuICAgICAgICBsaW5lSGVpZ2h0OiBudW1iZXIsIG1heExpbmVXaWR0aDogbnVtYmVyLCBmb250UHJvcGVydGllczogSUZvbnRNZXRyaWNzKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0ZXh0IHRoYXQgd2FzIG1lYXN1cmVkXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzdHlsZSB0aGF0IHdhcyBtZWFzdXJlZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlRleHRTdHlsZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3R5bGUgPSBzdHlsZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1lYXN1cmVkIHdpZHRoIG9mIHRoZSB0ZXh0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1lYXN1cmVkIGhlaWdodCBvZiB0aGUgdGV4dFxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gYXJyYXkgb2YgbGluZXMgb2YgdGhlIHRleHQgYnJva2VuIGJ5IG5ldyBsaW5lcyBhbmQgd3JhcHBpbmcgaXMgc3BlY2lmaWVkIGluIHN0eWxlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ1tdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saW5lcyA9IGxpbmVzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBhcnJheSBvZiB0aGUgbGluZSB3aWR0aHMgZm9yIGVhY2ggbGluZSBtYXRjaGVkIHRvIGBsaW5lc2BcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpbmVXaWR0aHMgPSBsaW5lV2lkdGhzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWVhc3VyZWQgbGluZSBoZWlnaHQgZm9yIHRoaXMgc3R5bGVcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saW5lSGVpZ2h0ID0gbGluZUhlaWdodDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1heGltdW0gbGluZSB3aWR0aCBmb3IgYWxsIG1lYXN1cmVkIGxpbmVzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4TGluZVdpZHRoID0gbWF4TGluZVdpZHRoO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZm9udCBwcm9wZXJ0aWVzIG9iamVjdCBmcm9tIFRleHRNZXRyaWNzLm1lYXN1cmVGb250XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuSUZvbnRNZXRyaWNzfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb250UHJvcGVydGllcyA9IGZvbnRQcm9wZXJ0aWVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1lYXN1cmVzIHRoZSBzdXBwbGllZCBzdHJpbmcgb2YgdGV4dCBhbmQgcmV0dXJucyBhIFJlY3RhbmdsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIHRleHQgdG8gbWVhc3VyZS5cbiAgICAgKiBAcGFyYW0ge1BJWEkuVGV4dFN0eWxlfSBzdHlsZSAtIHRoZSB0ZXh0IHN0eWxlIHRvIHVzZSBmb3IgbWVhc3VyaW5nXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbd29yZFdyYXBdIC0gb3B0aW9uYWwgb3ZlcnJpZGUgZm9yIGlmIHdvcmQtd3JhcCBzaG91bGQgYmUgYXBwbGllZCB0byB0aGUgdGV4dC5cbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBbY2FudmFzXSAtIG9wdGlvbmFsIHNwZWNpZmljYXRpb24gb2YgdGhlIGNhbnZhcyB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlRleHRNZXRyaWNzfSBtZWFzdXJlZCB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSB0ZXh0LlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgbWVhc3VyZVRleHQodGV4dDogc3RyaW5nLCBzdHlsZTogVGV4dFN0eWxlLCB3b3JkV3JhcDogYm9vbGVhbiwgY2FudmFzID0gVGV4dE1ldHJpY3MuX2NhbnZhcyk6IFRleHRNZXRyaWNzXG4gICAge1xuICAgICAgICB3b3JkV3JhcCA9ICh3b3JkV3JhcCA9PT0gdW5kZWZpbmVkIHx8IHdvcmRXcmFwID09PSBudWxsKSA/IHN0eWxlLndvcmRXcmFwIDogd29yZFdyYXA7XG4gICAgICAgIGNvbnN0IGZvbnQgPSBzdHlsZS50b0ZvbnRTdHJpbmcoKTtcbiAgICAgICAgY29uc3QgZm9udFByb3BlcnRpZXMgPSBUZXh0TWV0cmljcy5tZWFzdXJlRm9udChmb250KTtcblxuICAgICAgICAvLyBmYWxsYmFjayBpbiBjYXNlIFVBIGRpc2FsbG93IGNhbnZhcyBkYXRhIGV4dHJhY3Rpb25cbiAgICAgICAgLy8gKHRvRGF0YVVSSSwgZ2V0SW1hZ2VEYXRhIGZ1bmN0aW9ucylcbiAgICAgICAgaWYgKGZvbnRQcm9wZXJ0aWVzLmZvbnRTaXplID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBmb250UHJvcGVydGllcy5mb250U2l6ZSA9IHN0eWxlLmZvbnRTaXplIGFzIG51bWJlcjtcbiAgICAgICAgICAgIGZvbnRQcm9wZXJ0aWVzLmFzY2VudCA9IHN0eWxlLmZvbnRTaXplIGFzIG51bWJlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICBjb250ZXh0LmZvbnQgPSBmb250O1xuXG4gICAgICAgIGNvbnN0IG91dHB1dFRleHQgPSB3b3JkV3JhcCA/IFRleHRNZXRyaWNzLndvcmRXcmFwKHRleHQsIHN0eWxlLCBjYW52YXMpIDogdGV4dDtcbiAgICAgICAgY29uc3QgbGluZXMgPSBvdXRwdXRUZXh0LnNwbGl0KC8oPzpcXHJcXG58XFxyfFxcbikvKTtcbiAgICAgICAgY29uc3QgbGluZVdpZHRocyA9IG5ldyBBcnJheTxudW1iZXI+KGxpbmVzLmxlbmd0aCk7XG4gICAgICAgIGxldCBtYXhMaW5lV2lkdGggPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVXaWR0aCA9IGNvbnRleHQubWVhc3VyZVRleHQobGluZXNbaV0pLndpZHRoICsgKChsaW5lc1tpXS5sZW5ndGggLSAxKSAqIHN0eWxlLmxldHRlclNwYWNpbmcpO1xuXG4gICAgICAgICAgICBsaW5lV2lkdGhzW2ldID0gbGluZVdpZHRoO1xuICAgICAgICAgICAgbWF4TGluZVdpZHRoID0gTWF0aC5tYXgobWF4TGluZVdpZHRoLCBsaW5lV2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB3aWR0aCA9IG1heExpbmVXaWR0aCArIHN0eWxlLnN0cm9rZVRoaWNrbmVzcztcblxuICAgICAgICBpZiAoc3R5bGUuZHJvcFNoYWRvdylcbiAgICAgICAge1xuICAgICAgICAgICAgd2lkdGggKz0gc3R5bGUuZHJvcFNoYWRvd0Rpc3RhbmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IHN0eWxlLmxpbmVIZWlnaHQgfHwgZm9udFByb3BlcnRpZXMuZm9udFNpemUgKyBzdHlsZS5zdHJva2VUaGlja25lc3M7XG4gICAgICAgIGxldCBoZWlnaHQgPSBNYXRoLm1heChsaW5lSGVpZ2h0LCBmb250UHJvcGVydGllcy5mb250U2l6ZSArIHN0eWxlLnN0cm9rZVRoaWNrbmVzcylcbiAgICAgICAgICAgICsgKChsaW5lcy5sZW5ndGggLSAxKSAqIChsaW5lSGVpZ2h0ICsgc3R5bGUubGVhZGluZykpO1xuXG4gICAgICAgIGlmIChzdHlsZS5kcm9wU2hhZG93KVxuICAgICAgICB7XG4gICAgICAgICAgICBoZWlnaHQgKz0gc3R5bGUuZHJvcFNoYWRvd0Rpc3RhbmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0TWV0cmljcyhcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICBzdHlsZSxcbiAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgbGluZXMsXG4gICAgICAgICAgICBsaW5lV2lkdGhzLFxuICAgICAgICAgICAgbGluZUhlaWdodCArIHN0eWxlLmxlYWRpbmcsXG4gICAgICAgICAgICBtYXhMaW5lV2lkdGgsXG4gICAgICAgICAgICBmb250UHJvcGVydGllc1xuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgbmV3bGluZXMgdG8gYSBzdHJpbmcgdG8gaGF2ZSBpdCBvcHRpbWFsbHkgZml0IGludG8gdGhlIGhvcml6b250YWxcbiAgICAgKiBib3VuZHMgc2V0IGJ5IHRoZSBUZXh0IG9iamVjdCdzIHdvcmRXcmFwV2lkdGggcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gU3RyaW5nIHRvIGFwcGx5IHdvcmQgd3JhcHBpbmcgdG9cbiAgICAgKiBAcGFyYW0ge1BJWEkuVGV4dFN0eWxlfSBzdHlsZSAtIHRoZSBzdHlsZSB0byB1c2Ugd2hlbiB3cmFwcGluZ1xuICAgICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IFtjYW52YXNdIC0gb3B0aW9uYWwgc3BlY2lmaWNhdGlvbiBvZiB0aGUgY2FudmFzIHRvIHVzZSBmb3IgbWVhc3VyaW5nLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gTmV3IHN0cmluZyB3aXRoIG5ldyBsaW5lcyBhcHBsaWVkIHdoZXJlIHJlcXVpcmVkXG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgd29yZFdyYXAodGV4dDogc3RyaW5nLCBzdHlsZTogVGV4dFN0eWxlLCBjYW52YXMgPSBUZXh0TWV0cmljcy5fY2FudmFzKTogc3RyaW5nXG4gICAge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgbGV0IHdpZHRoID0gMDtcbiAgICAgICAgbGV0IGxpbmUgPSAnJztcbiAgICAgICAgbGV0IGxpbmVzID0gJyc7XG5cbiAgICAgICAgY29uc3QgY2FjaGU6IENoYXJhY3RlcldpZHRoQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBjb25zdCB7IGxldHRlclNwYWNpbmcsIHdoaXRlU3BhY2UgfSA9IHN0eWxlO1xuXG4gICAgICAgIC8vIEhvdyB0byBoYW5kbGUgd2hpdGVzcGFjZXNcbiAgICAgICAgY29uc3QgY29sbGFwc2VTcGFjZXMgPSBUZXh0TWV0cmljcy5jb2xsYXBzZVNwYWNlcyh3aGl0ZVNwYWNlKTtcbiAgICAgICAgY29uc3QgY29sbGFwc2VOZXdsaW5lcyA9IFRleHRNZXRyaWNzLmNvbGxhcHNlTmV3bGluZXMod2hpdGVTcGFjZSk7XG5cbiAgICAgICAgLy8gd2hldGhlciBvciBub3Qgc3BhY2VzIG1heSBiZSBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIG9mIGxpbmVzXG4gICAgICAgIGxldCBjYW5QcmVwZW5kU3BhY2VzID0gIWNvbGxhcHNlU3BhY2VzO1xuXG4gICAgICAgIC8vIFRoZXJlIGlzIGxldHRlclNwYWNpbmcgYWZ0ZXIgZXZlcnkgY2hhciBleGNlcHQgdGhlIGxhc3Qgb25lXG4gICAgICAgIC8vIHRfaF9pX3NfJyAnX2lfc18nICdfYV9uXycgJ19lX3hfYV9tX3BfbF9lXycgJ18hXG4gICAgICAgIC8vIHNvIGZvciBjb252ZW5pZW5jZSB0aGUgYWJvdmUgbmVlZHMgdG8gYmUgY29tcGFyZWQgdG8gd2lkdGggKyAxIGV4dHJhIGxldHRlclNwYWNlXG4gICAgICAgIC8vIHRfaF9pX3NfJyAnX2lfc18nICdfYV9uXycgJ19lX3hfYV9tX3BfbF9lXycgJ18hX1xuICAgICAgICAvLyBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cbiAgICAgICAgLy8gQW5kIHRoZW4gdGhlIGZpbmFsIHNwYWNlIGlzIHNpbXBseSBubyBhcHBlbmRlZCB0byBlYWNoIGxpbmVcbiAgICAgICAgY29uc3Qgd29yZFdyYXBXaWR0aCA9IHN0eWxlLndvcmRXcmFwV2lkdGggKyBsZXR0ZXJTcGFjaW5nO1xuXG4gICAgICAgIC8vIGJyZWFrIHRleHQgaW50byB3b3Jkcywgc3BhY2VzIGFuZCBuZXdsaW5lIGNoYXJzXG4gICAgICAgIGNvbnN0IHRva2VucyA9IFRleHRNZXRyaWNzLnRva2VuaXplKHRleHQpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIHdvcmQsIHNwYWNlIG9yIG5ld2xpbmVDaGFyXG4gICAgICAgICAgICBsZXQgdG9rZW4gPSB0b2tlbnNbaV07XG5cbiAgICAgICAgICAgIC8vIGlmIHdvcmQgaXMgYSBuZXcgbGluZVxuICAgICAgICAgICAgaWYgKFRleHRNZXRyaWNzLmlzTmV3bGluZSh0b2tlbikpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8ga2VlcCB0aGUgbmV3IGxpbmVcbiAgICAgICAgICAgICAgICBpZiAoIWNvbGxhcHNlTmV3bGluZXMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsaW5lcyArPSBUZXh0TWV0cmljcy5hZGRMaW5lKGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICBjYW5QcmVwZW5kU3BhY2VzID0gIWNvbGxhcHNlU3BhY2VzO1xuICAgICAgICAgICAgICAgICAgICBsaW5lID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgd2Ugc2hvdWxkIGNvbGxhcHNlIG5ldyBsaW5lc1xuICAgICAgICAgICAgICAgIC8vIHdlIHNpbXBseSBjb252ZXJ0IGl0IGludG8gYSBzcGFjZVxuICAgICAgICAgICAgICAgIHRva2VuID0gJyAnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiB3ZSBzaG91bGQgY29sbGFwc2UgcmVwZWF0ZWQgd2hpdGVzcGFjZXNcbiAgICAgICAgICAgIGlmIChjb2xsYXBzZVNwYWNlcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBib3RoIHRoaXMgYW5kIHRoZSBsYXN0IHRva2VucyBmb3Igc3BhY2VzXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycklzQnJlYWtpbmdTcGFjZSA9IFRleHRNZXRyaWNzLmlzQnJlYWtpbmdTcGFjZSh0b2tlbik7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdElzQnJlYWtpbmdTcGFjZSA9IFRleHRNZXRyaWNzLmlzQnJlYWtpbmdTcGFjZShsaW5lW2xpbmUubGVuZ3RoIC0gMV0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJJc0JyZWFraW5nU3BhY2UgJiYgbGFzdElzQnJlYWtpbmdTcGFjZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZ2V0IHdvcmQgd2lkdGggZnJvbSBjYWNoZSBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgY29uc3QgdG9rZW5XaWR0aCA9IFRleHRNZXRyaWNzLmdldEZyb21DYWNoZSh0b2tlbiwgbGV0dGVyU3BhY2luZywgY2FjaGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgICAvLyB3b3JkIGlzIGxvbmdlciB0aGFuIGRlc2lyZWQgYm91bmRzXG4gICAgICAgICAgICBpZiAodG9rZW5XaWR0aCA+IHdvcmRXcmFwV2lkdGgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgYXJlIG5vdCBhbHJlYWR5IGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBsaW5lXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUgIT09ICcnKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnQgbmV3bGluZXMgZm9yIG92ZXJmbG93IHdvcmRzXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzICs9IFRleHRNZXRyaWNzLmFkZExpbmUobGluZSk7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGJyZWFrIGxhcmdlIHdvcmQgb3ZlciBtdWx0aXBsZSBsaW5lc1xuICAgICAgICAgICAgICAgIGlmIChUZXh0TWV0cmljcy5jYW5CcmVha1dvcmRzKHRva2VuLCBzdHlsZS5icmVha1dvcmRzKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJyZWFrIHdvcmQgaW50byBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSBUZXh0TWV0cmljcy53b3JkV3JhcFNwbGl0KHRva2VuKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHRoZSBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2hhcmFjdGVycy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXIgPSBjaGFyYWN0ZXJzW2pdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgayA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgbm90IGF0IHRoZSBlbmQgb2YgdGhlIHRva2VuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjaGFyYWN0ZXJzW2ogKyBrXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2hhciA9IGNoYXJhY3RlcnNbaiArIGtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RDaGFyID0gY2hhcltjaGFyLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hvdWxkIG5vdCBzcGxpdCBjaGFyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghVGV4dE1ldHJpY3MuY2FuQnJlYWtDaGFycyhsYXN0Q2hhciwgbmV4dENoYXIsIHRva2VuLCBqLCBzdHlsZS5icmVha1dvcmRzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbWJpbmUgY2hhcnMgJiBtb3ZlIGZvcndhcmQgb25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIgKz0gbmV4dENoYXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaiArPSBjaGFyLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlcldpZHRoID0gVGV4dE1ldHJpY3MuZ2V0RnJvbUNhY2hlKGNoYXIsIGxldHRlclNwYWNpbmcsIGNhY2hlLCBjb250ZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJhY3RlcldpZHRoICsgd2lkdGggPiB3b3JkV3JhcFdpZHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzICs9IFRleHRNZXRyaWNzLmFkZExpbmUobGluZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuUHJlcGVuZFNwYWNlcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgKz0gY2hhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IGNoYXJhY3RlcldpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gcnVuIHdvcmQgb3V0IG9mIHRoZSBib3VuZHNcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgd29yZHMgaW4gdGhpcyBsaW5lIGFscmVhZHlcbiAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoYXQgbGluZSBhbmQgc3RhcnQgYSBuZXcgb25lXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzICs9IFRleHRNZXRyaWNzLmFkZExpbmUobGluZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0xhc3RUb2tlbiA9IGkgPT09IHRva2Vucy5sZW5ndGggLSAxO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGdpdmUgaXQgaXRzIG93biBsaW5lIGlmIGl0J3Mgbm90IHRoZSBlbmRcbiAgICAgICAgICAgICAgICAgICAgbGluZXMgKz0gVGV4dE1ldHJpY3MuYWRkTGluZSh0b2tlbiwgIWlzTGFzdFRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgY2FuUHJlcGVuZFNwYWNlcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBsaW5lID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHdvcmQgY291bGQgZml0XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gd29yZCB3b24ndCBmaXQgYmVjYXVzZSBvZiBleGlzdGluZyB3b3Jkc1xuICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGEgbmV3IGxpbmVcbiAgICAgICAgICAgICAgICBpZiAodG9rZW5XaWR0aCArIHdpZHRoID4gd29yZFdyYXBXaWR0aClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0cyBhIHNwYWNlIHdlIGRvbid0IHdhbnQgaXRcbiAgICAgICAgICAgICAgICAgICAgY2FuUHJlcGVuZFNwYWNlcyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhIG5ldyBsaW5lXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzICs9IFRleHRNZXRyaWNzLmFkZExpbmUobGluZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnQgYSBuZXcgbGluZVxuICAgICAgICAgICAgICAgICAgICBsaW5lID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBkb24ndCBhZGQgc3BhY2VzIHRvIHRoZSBiZWdpbm5pbmcgb2YgbGluZXNcbiAgICAgICAgICAgICAgICBpZiAobGluZS5sZW5ndGggPiAwIHx8ICFUZXh0TWV0cmljcy5pc0JyZWFraW5nU3BhY2UodG9rZW4pIHx8IGNhblByZXBlbmRTcGFjZXMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIHdvcmQgdG8gdGhlIGN1cnJlbnQgbGluZVxuICAgICAgICAgICAgICAgICAgICBsaW5lICs9IHRva2VuO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB3aWR0aCBjb3VudGVyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IHRva2VuV2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGluZXMgKz0gVGV4dE1ldHJpY3MuYWRkTGluZShsaW5lLCBmYWxzZSk7XG5cbiAgICAgICAgcmV0dXJuIGxpbmVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZpZW5pZW5jZSBmdW5jdGlvbiBmb3IgbG9nZ2luZyBlYWNoIGxpbmUgYWRkZWQgZHVyaW5nIHRoZSB3b3JkV3JhcFxuICAgICAqIG1ldGhvZFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgbGluZSAgICAgICAgLSBUaGUgbGluZSBvZiB0ZXh0IHRvIGFkZFxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59ICBuZXdMaW5lICAgICAtIEFkZCBuZXcgbGluZSBjaGFyYWN0ZXIgdG8gZW5kXG4gICAgICogQHJldHVybiB7c3RyaW5nfSAgQSBmb3JtYXR0ZWQgbGluZVxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGFkZExpbmUobGluZTogc3RyaW5nLCBuZXdMaW5lID0gdHJ1ZSk6IHN0cmluZ1xuICAgIHtcbiAgICAgICAgbGluZSA9IFRleHRNZXRyaWNzLnRyaW1SaWdodChsaW5lKTtcblxuICAgICAgICBsaW5lID0gKG5ld0xpbmUpID8gYCR7bGluZX1cXG5gIDogbGluZTtcblxuICAgICAgICByZXR1cm4gbGluZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzICYgc2V0cyB0aGUgd2lkdGhzIG9mIGNhbGN1bGF0ZWQgY2hhcmFjdGVycyBpbiBhIGNhY2hlIG9iamVjdFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgICAgICAgICAgICBrZXkgICAgICAgICAgICAtIFRoZSBrZXlcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgICBsZXR0ZXJTcGFjaW5nICAtIFRoZSBsZXR0ZXIgc3BhY2luZ1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gICAgICAgICAgICAgICAgICAgIGNhY2hlICAgICAgICAgIC0gVGhlIGNhY2hlXG4gICAgICogQHBhcmFtICB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSAgY29udGV4dCAgICAgICAgLSBUaGUgY2FudmFzIGNvbnRleHRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgICBUaGUgZnJvbSBjYWNoZS5cbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBnZXRGcm9tQ2FjaGUoa2V5OiBzdHJpbmcsIGxldHRlclNwYWNpbmc6IG51bWJlciwgY2FjaGU6IENoYXJhY3RlcldpZHRoQ2FjaGUsXG4gICAgICAgIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRHxPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIGxldCB3aWR0aCA9IGNhY2hlW2tleV07XG5cbiAgICAgICAgaWYgKHR5cGVvZiB3aWR0aCAhPT0gJ251bWJlcicpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHNwYWNpbmcgPSAoKGtleS5sZW5ndGgpICogbGV0dGVyU3BhY2luZyk7XG5cbiAgICAgICAgICAgIHdpZHRoID0gY29udGV4dC5tZWFzdXJlVGV4dChrZXkpLndpZHRoICsgc3BhY2luZztcbiAgICAgICAgICAgIGNhY2hlW2tleV0gPSB3aWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB3aWR0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgd2Ugc2hvdWxkIGNvbGxhcHNlIGJyZWFraW5nIHNwYWNlc1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgd2hpdGVTcGFjZSAtIFRoZSBUZXh0U3R5bGUgcHJvcGVydHkgd2hpdGVTcGFjZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59ICBzaG91bGQgY29sbGFwc2VcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBjb2xsYXBzZVNwYWNlcyh3aGl0ZVNwYWNlOiBUZXh0U3R5bGVXaGl0ZVNwYWNlKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuICh3aGl0ZVNwYWNlID09PSAnbm9ybWFsJyB8fCB3aGl0ZVNwYWNlID09PSAncHJlLWxpbmUnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgd2Ugc2hvdWxkIGNvbGxhcHNlIG5ld0xpbmUgY2hhcnNcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgIHdoaXRlU3BhY2UgLSBUaGUgd2hpdGUgc3BhY2VcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSAgc2hvdWxkIGNvbGxhcHNlXG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgY29sbGFwc2VOZXdsaW5lcyh3aGl0ZVNwYWNlOiBUZXh0U3R5bGVXaGl0ZVNwYWNlKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuICh3aGl0ZVNwYWNlID09PSAnbm9ybWFsJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdHJpbXMgYnJlYWtpbmcgd2hpdGVzcGFjZXMgZnJvbSBzdHJpbmdcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgdGV4dCAtIFRoZSB0ZXh0XG4gICAgICogQHJldHVybiB7c3RyaW5nfSAgdHJpbW1lZCBzdHJpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyB0cmltUmlnaHQodGV4dDogc3RyaW5nKTogc3RyaW5nXG4gICAge1xuICAgICAgICBpZiAodHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gdGV4dC5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgY2hhciA9IHRleHRbaV07XG5cbiAgICAgICAgICAgIGlmICghVGV4dE1ldHJpY3MuaXNCcmVha2luZ1NwYWNlKGNoYXIpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZSgwLCAtMSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGNoYXIgaXMgYSBuZXdsaW5lLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICBjaGFyIC0gVGhlIGNoYXJhY3RlclxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59ICBUcnVlIGlmIG5ld2xpbmUsIEZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBpc05ld2xpbmUoY2hhcjogc3RyaW5nKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjaGFyICE9PSAnc3RyaW5nJylcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChUZXh0TWV0cmljcy5fbmV3bGluZXMuaW5kZXhPZihjaGFyLmNoYXJDb2RlQXQoMCkpID49IDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgY2hhciBpcyBhIGJyZWFraW5nIHdoaXRlc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gIGNoYXIgLSBUaGUgY2hhcmFjdGVyXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gIFRydWUgaWYgd2hpdGVzcGFjZSwgRmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGlzQnJlYWtpbmdTcGFjZShjaGFyOiBzdHJpbmcpOiBib29sZWFuXG4gICAge1xuICAgICAgICBpZiAodHlwZW9mIGNoYXIgIT09ICdzdHJpbmcnKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFRleHRNZXRyaWNzLl9icmVha2luZ1NwYWNlcy5pbmRleE9mKGNoYXIuY2hhckNvZGVBdCgwKSkgPj0gMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgc3RyaW5nIGludG8gd29yZHMsIGJyZWFraW5nLXNwYWNlcyBhbmQgbmV3TGluZSBjaGFyYWN0ZXJzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gIHRleHQgLSBUaGUgdGV4dFxuICAgICAqIEByZXR1cm4ge3N0cmluZ1tdfSAgQSB0b2tlbml6ZWQgYXJyYXlcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyB0b2tlbml6ZSh0ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXVxuICAgIHtcbiAgICAgICAgY29uc3QgdG9rZW5zOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsZXQgdG9rZW4gPSAnJztcblxuICAgICAgICBpZiAodHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW5zO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBjaGFyID0gdGV4dFtpXTtcblxuICAgICAgICAgICAgaWYgKFRleHRNZXRyaWNzLmlzQnJlYWtpbmdTcGFjZShjaGFyKSB8fCBUZXh0TWV0cmljcy5pc05ld2xpbmUoY2hhcikpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuICE9PSAnJylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSAnJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0b2tlbnMucHVzaChjaGFyKTtcblxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0b2tlbiArPSBjaGFyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRva2VuICE9PSAnJylcbiAgICAgICAge1xuICAgICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRva2VucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkYWJsZSBoZWxwZXIgbWV0aG9kIHVzZWQgaW50ZXJuYWxseSBieSBUZXh0TWV0cmljcywgZXhwb3NlZCB0byBhbGxvdyBjdXN0b21pemluZyB0aGUgY2xhc3MncyBiZWhhdmlvci5cbiAgICAgKlxuICAgICAqIEl0IGFsbG93cyBvbmUgdG8gY3VzdG9taXNlIHdoaWNoIHdvcmRzIHNob3VsZCBicmVha1xuICAgICAqIEV4YW1wbGVzIGFyZSBpZiB0aGUgdG9rZW4gaXMgQ0pLIG9yIG51bWJlcnMuXG4gICAgICogSXQgbXVzdCByZXR1cm4gYSBib29sZWFuLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgdG9rZW4gICAgICAgLSBUaGUgdG9rZW5cbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSAgYnJlYWtXb3JkcyAtIFRoZSBzdHlsZSBhdHRyIGJyZWFrIHdvcmRzXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gd2hldGhlciB0byBicmVhayB3b3JkIG9yIG5vdFxuICAgICAqL1xuICAgIHN0YXRpYyBjYW5CcmVha1dvcmRzKF90b2tlbjogc3RyaW5nLCBicmVha1dvcmRzOiBib29sZWFuKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIGJyZWFrV29yZHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGFibGUgaGVscGVyIG1ldGhvZCB1c2VkIGludGVybmFsbHkgYnkgVGV4dE1ldHJpY3MsIGV4cG9zZWQgdG8gYWxsb3cgY3VzdG9taXppbmcgdGhlIGNsYXNzJ3MgYmVoYXZpb3IuXG4gICAgICpcbiAgICAgKiBJdCBhbGxvd3Mgb25lIHRvIGRldGVybWluZSB3aGV0aGVyIGEgcGFpciBvZiBjaGFyYWN0ZXJzXG4gICAgICogc2hvdWxkIGJlIGJyb2tlbiBieSBuZXdsaW5lc1xuICAgICAqIEZvciBleGFtcGxlIGNlcnRhaW4gY2hhcmFjdGVycyBpbiBDSksgbGFuZ3Mgb3IgbnVtYmVycy5cbiAgICAgKiBJdCBtdXN0IHJldHVybiBhIGJvb2xlYW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICBjaGFyICAgICAgICAtIFRoZSBjaGFyYWN0ZXJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICBuZXh0Q2hhciAgICAtIFRoZSBuZXh0IGNoYXJhY3RlclxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gIHRva2VuICAgICAgIC0gVGhlIHRva2VuL3dvcmQgdGhlIGNoYXJhY3RlcnMgYXJlIGZyb21cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBpbmRleCAgICAgICAtIFRoZSBpbmRleCBpbiB0aGUgdG9rZW4gb2YgdGhlIGNoYXJcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSAgYnJlYWtXb3JkcyAtIFRoZSBzdHlsZSBhdHRyIGJyZWFrIHdvcmRzXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gd2hldGhlciB0byBicmVhayB3b3JkIG9yIG5vdFxuICAgICAqL1xuICAgIHN0YXRpYyBjYW5CcmVha0NoYXJzKF9jaGFyOiBzdHJpbmcsIF9uZXh0Q2hhcjogc3RyaW5nLCBfdG9rZW46IHN0cmluZywgX2luZGV4OiBudW1iZXIsXG4gICAgICAgIF9icmVha1dvcmRzOiBib29sZWFuKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGFibGUgaGVscGVyIG1ldGhvZCB1c2VkIGludGVybmFsbHkgYnkgVGV4dE1ldHJpY3MsIGV4cG9zZWQgdG8gYWxsb3cgY3VzdG9taXppbmcgdGhlIGNsYXNzJ3MgYmVoYXZpb3IuXG4gICAgICpcbiAgICAgKiBJdCBpcyBjYWxsZWQgd2hlbiBhIHRva2VuICh1c3VhbGx5IGEgd29yZCkgaGFzIHRvIGJlIHNwbGl0IGludG8gc2VwYXJhdGUgcGllY2VzXG4gICAgICogaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHRoZSBwb2ludCB0byBicmVhayBhIHdvcmQuXG4gICAgICogSXQgbXVzdCByZXR1cm4gYW4gYXJyYXkgb2YgY2hhcmFjdGVycy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gQ29ycmVjdGx5IHNwbGl0cyBlbW9qaXMsIGVnIFwiXHVEODNFXHVERDJBXHVEODNFXHVERDJBXCIgd2lsbCByZXN1bHQgaW4gdHdvIGVsZW1lbnQgYXJyYXksIGVhY2ggd2l0aCBvbmUgZW1vamkuXG4gICAgICogVGV4dE1ldHJpY3Mud29yZFdyYXBTcGxpdCA9ICh0b2tlbikgPT4gWy4uLnRva2VuXTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gIHRva2VuIC0gVGhlIHRva2VuIHRvIHNwbGl0XG4gICAgICogQHJldHVybiB7c3RyaW5nW119IFRoZSBjaGFyYWN0ZXJzIG9mIHRoZSB0b2tlblxuICAgICAqL1xuICAgIHN0YXRpYyB3b3JkV3JhcFNwbGl0KHRva2VuOiBzdHJpbmcpOiBzdHJpbmdbXVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRva2VuLnNwbGl0KCcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBhc2NlbnQsIGRlc2NlbnQgYW5kIGZvbnRTaXplIG9mIGEgZ2l2ZW4gZm9udC1zdHlsZVxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb250IC0gU3RyaW5nIHJlcHJlc2VudGluZyB0aGUgc3R5bGUgb2YgdGhlIGZvbnRcbiAgICAgKiBAcmV0dXJuIHtQSVhJLklGb250TWV0cmljc30gRm9udCBwcm9wZXJ0aWVzIG9iamVjdFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgbWVhc3VyZUZvbnQoZm9udDogc3RyaW5nKTogSUZvbnRNZXRyaWNzXG4gICAge1xuICAgICAgICAvLyBhcyB0aGlzIG1ldGhvZCBpcyB1c2VkIGZvciBwcmVwYXJpbmcgYXNzZXRzLCBkb24ndCByZWNhbGN1bGF0ZSB0aGluZ3MgaWYgd2UgZG9uJ3QgbmVlZCB0b1xuICAgICAgICBpZiAoVGV4dE1ldHJpY3MuX2ZvbnRzW2ZvbnRdKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gVGV4dE1ldHJpY3MuX2ZvbnRzW2ZvbnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcGVydGllczogSUZvbnRNZXRyaWNzID0ge1xuICAgICAgICAgICAgYXNjZW50OiAwLFxuICAgICAgICAgICAgZGVzY2VudDogMCxcbiAgICAgICAgICAgIGZvbnRTaXplOiAwLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IFRleHRNZXRyaWNzLl9jYW52YXM7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBUZXh0TWV0cmljcy5fY29udGV4dDtcblxuICAgICAgICBjb250ZXh0LmZvbnQgPSBmb250O1xuXG4gICAgICAgIGNvbnN0IG1ldHJpY3NTdHJpbmcgPSBUZXh0TWV0cmljcy5NRVRSSUNTX1NUUklORyArIFRleHRNZXRyaWNzLkJBU0VMSU5FX1NZTUJPTDtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLmNlaWwoY29udGV4dC5tZWFzdXJlVGV4dChtZXRyaWNzU3RyaW5nKS53aWR0aCk7XG4gICAgICAgIGxldCBiYXNlbGluZSA9IE1hdGguY2VpbChjb250ZXh0Lm1lYXN1cmVUZXh0KFRleHRNZXRyaWNzLkJBU0VMSU5FX1NZTUJPTCkud2lkdGgpO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSAyICogYmFzZWxpbmU7XG5cbiAgICAgICAgYmFzZWxpbmUgPSBiYXNlbGluZSAqIFRleHRNZXRyaWNzLkJBU0VMSU5FX01VTFRJUExJRVIgfCAwO1xuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyNmMDAnO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIGNvbnRleHQuZm9udCA9IGZvbnQ7XG5cbiAgICAgICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSAnYWxwaGFiZXRpYyc7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyMwMDAnO1xuICAgICAgICBjb250ZXh0LmZpbGxUZXh0KG1ldHJpY3NTdHJpbmcsIDAsIGJhc2VsaW5lKTtcblxuICAgICAgICBjb25zdCBpbWFnZWRhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KS5kYXRhO1xuICAgICAgICBjb25zdCBwaXhlbHMgPSBpbWFnZWRhdGEubGVuZ3RoO1xuICAgICAgICBjb25zdCBsaW5lID0gd2lkdGggKiA0O1xuXG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgbGV0IGlkeCA9IDA7XG4gICAgICAgIGxldCBzdG9wID0gZmFsc2U7XG5cbiAgICAgICAgLy8gYXNjZW50LiBzY2FuIGZyb20gdG9wIHRvIGJvdHRvbSB1bnRpbCB3ZSBmaW5kIGEgbm9uIHJlZCBwaXhlbFxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZWxpbmU7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsaW5lOyBqICs9IDQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlZGF0YVtpZHggKyBqXSAhPT0gMjU1KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc3RvcClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZHggKz0gbGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3BlcnRpZXMuYXNjZW50ID0gYmFzZWxpbmUgLSBpO1xuXG4gICAgICAgIGlkeCA9IHBpeGVscyAtIGxpbmU7XG4gICAgICAgIHN0b3AgPSBmYWxzZTtcblxuICAgICAgICAvLyBkZXNjZW50LiBzY2FuIGZyb20gYm90dG9tIHRvIHRvcCB1bnRpbCB3ZSBmaW5kIGEgbm9uIHJlZCBwaXhlbFxuICAgICAgICBmb3IgKGkgPSBoZWlnaHQ7IGkgPiBiYXNlbGluZTsgLS1pKVxuICAgICAgICB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxpbmU7IGogKz0gNClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VkYXRhW2lkeCArIGpdICE9PSAyNTUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdG9wID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXN0b3ApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWR4IC09IGxpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm9wZXJ0aWVzLmRlc2NlbnQgPSBpIC0gYmFzZWxpbmU7XG4gICAgICAgIHByb3BlcnRpZXMuZm9udFNpemUgPSBwcm9wZXJ0aWVzLmFzY2VudCArIHByb3BlcnRpZXMuZGVzY2VudDtcblxuICAgICAgICBUZXh0TWV0cmljcy5fZm9udHNbZm9udF0gPSBwcm9wZXJ0aWVzO1xuXG4gICAgICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIGZvbnQgbWV0cmljcyBpbiBtZXRyaWNzIGNhY2hlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZm9udF0gLSBmb250IG5hbWUuIElmIGZvbnQgbmFtZSBub3Qgc2V0IHRoZW4gY2xlYXIgY2FjaGUgZm9yIGFsbCBmb250cy5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGNsZWFyTWV0cmljcyhmb250ID0gJycpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoZm9udClcbiAgICAgICAge1xuICAgICAgICAgICAgZGVsZXRlIFRleHRNZXRyaWNzLl9mb250c1tmb250XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIFRleHRNZXRyaWNzLl9mb250cyA9IHt9O1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEludGVybmFsIHJldHVybiBvYmplY3QgZm9yIHtAbGluayBQSVhJLlRleHRNZXRyaWNzLm1lYXN1cmVGb250IGBUZXh0TWV0cmljcy5tZWFzdXJlRm9udGB9LlxuICpcbiAqIEB0eXBlZGVmIHtvYmplY3R9IEZvbnRNZXRyaWNzXG4gKiBAcHJvcGVydHkge251bWJlcn0gYXNjZW50IC0gVGhlIGFzY2VudCBkaXN0YW5jZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IGRlc2NlbnQgLSBUaGUgZGVzY2VudCBkaXN0YW5jZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IGZvbnRTaXplIC0gRm9udCBzaXplIGZyb20gYXNjZW50IHRvIGRlc2NlbnRcbiAqIEBtZW1iZXJvZiBQSVhJLlRleHRNZXRyaWNzXG4gKiBAcHJpdmF0ZVxuICovXG5cbmNvbnN0IGNhbnZhcyA9ICgoKTogSFRNTENhbnZhc0VsZW1lbnR8T2Zmc2NyZWVuQ2FudmFzID0+XG57XG4gICAgdHJ5XG4gICAge1xuICAgICAgICAvLyBPZmZzY3JlZW5DYW52YXMyRCBtZWFzdXJlVGV4dCBjYW4gYmUgdXAgdG8gNDAlIGZhc3Rlci5cbiAgICAgICAgY29uc3QgYyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoMCwgMCk7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5tZWFzdXJlVGV4dClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgfVxuICAgIGNhdGNoIChleClcbiAgICB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB9XG59KSgpO1xuXG5jYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gMTA7XG5cbi8qKlxuICogQ2FjaGVkIGNhbnZhcyBlbGVtZW50IGZvciBtZWFzdXJpbmcgdGV4dFxuICpcbiAqIEBtZW1iZXJvZiBQSVhJLlRleHRNZXRyaWNzXG4gKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG5UZXh0TWV0cmljcy5fY2FudmFzID0gY2FudmFzO1xuXG4vKipcbiAqIENhY2hlIGZvciBjb250ZXh0IHRvIHVzZS5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSS5UZXh0TWV0cmljc1xuICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAqIEBwcml2YXRlXG4gKi9cblRleHRNZXRyaWNzLl9jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbi8qKlxuICogQ2FjaGUgb2Yge0BzZWUgUElYSS5UZXh0TWV0cmljcy5Gb250TWV0cmljc30gb2JqZWN0cy5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSS5UZXh0TWV0cmljc1xuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblRleHRNZXRyaWNzLl9mb250cyA9IHt9O1xuXG4vKipcbiAqIFN0cmluZyB1c2VkIGZvciBjYWxjdWxhdGUgZm9udCBtZXRyaWNzLlxuICogVGhlc2UgY2hhcmFjdGVycyBhcmUgYWxsIHRhbGwgdG8gaGVscCBjYWxjdWxhdGUgdGhlIGhlaWdodCByZXF1aXJlZCBmb3IgdGV4dC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyb2YgUElYSS5UZXh0TWV0cmljc1xuICogQG5hbWUgTUVUUklDU19TVFJJTkdcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAZGVmYXVsdCB8XHUwMEM5cVx1MDBDNVxuICovXG5UZXh0TWV0cmljcy5NRVRSSUNTX1NUUklORyA9ICd8XHUwMEM5cVx1MDBDNSc7XG5cbi8qKlxuICogQmFzZWxpbmUgc3ltYm9sIGZvciBjYWxjdWxhdGUgZm9udCBtZXRyaWNzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJvZiBQSVhJLlRleHRNZXRyaWNzXG4gKiBAbmFtZSBCQVNFTElORV9TWU1CT0xcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAZGVmYXVsdCBNXG4gKi9cblRleHRNZXRyaWNzLkJBU0VMSU5FX1NZTUJPTCA9ICdNJztcblxuLyoqXG4gKiBCYXNlbGluZSBtdWx0aXBsaWVyIGZvciBjYWxjdWxhdGUgZm9udCBtZXRyaWNzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJvZiBQSVhJLlRleHRNZXRyaWNzXG4gKiBAbmFtZSBCQVNFTElORV9NVUxUSVBMSUVSXG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHQgMS40XG4gKi9cblRleHRNZXRyaWNzLkJBU0VMSU5FX01VTFRJUExJRVIgPSAxLjQ7XG5cbi8qKlxuICogQ2FjaGUgb2YgbmV3IGxpbmUgY2hhcnMuXG4gKlxuICogQG1lbWJlcm9mIFBJWEkuVGV4dE1ldHJpY3NcbiAqIEB0eXBlIHtudW1iZXJbXX1cbiAqIEBwcml2YXRlXG4gKi9cblRleHRNZXRyaWNzLl9uZXdsaW5lcyA9IFtcbiAgICAweDAwMEEsIC8vIGxpbmUgZmVlZFxuICAgIDB4MDAwRCwgLy8gY2FycmlhZ2UgcmV0dXJuXG5dO1xuXG4vKipcbiAqIENhY2hlIG9mIGJyZWFraW5nIHNwYWNlcy5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSS5UZXh0TWV0cmljc1xuICogQHR5cGUge251bWJlcltdfVxuICogQHByaXZhdGVcbiAqL1xuVGV4dE1ldHJpY3MuX2JyZWFraW5nU3BhY2VzID0gW1xuICAgIDB4MDAwOSwgLy8gY2hhcmFjdGVyIHRhYnVsYXRpb25cbiAgICAweDAwMjAsIC8vIHNwYWNlXG4gICAgMHgyMDAwLCAvLyBlbiBxdWFkXG4gICAgMHgyMDAxLCAvLyBlbSBxdWFkXG4gICAgMHgyMDAyLCAvLyBlbiBzcGFjZVxuICAgIDB4MjAwMywgLy8gZW0gc3BhY2VcbiAgICAweDIwMDQsIC8vIHRocmVlLXBlci1lbSBzcGFjZVxuICAgIDB4MjAwNSwgLy8gZm91ci1wZXItZW0gc3BhY2VcbiAgICAweDIwMDYsIC8vIHNpeC1wZXItZW0gc3BhY2VcbiAgICAweDIwMDgsIC8vIHB1bmN0dWF0aW9uIHNwYWNlXG4gICAgMHgyMDA5LCAvLyB0aGluIHNwYWNlXG4gICAgMHgyMDBBLCAvLyBoYWlyIHNwYWNlXG4gICAgMHgyMDVGLCAvLyBtZWRpdW0gbWF0aGVtYXRpY2FsIHNwYWNlXG4gICAgMHgzMDAwLCAvLyBpZGVvZ3JhcGhpYyBzcGFjZVxuXTtcblxuLyoqXG4gKiBBIG51bWJlciwgb3IgYSBzdHJpbmcgY29udGFpbmluZyBhIG51bWJlci5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHR5cGVkZWYgSUZvbnRNZXRyaWNzXG4gKiBAcHJvcGVydHkge251bWJlcn0gYXNjZW50IC0gRm9udCBhc2NlbnRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkZXNjZW50IC0gRm9udCBkZXNjZW50XG4gKiBAcHJvcGVydHkge251bWJlcn0gZm9udFNpemUgLSBGb250IHNpemVcbiAqL1xuIiwgIi8qIGVzbGludCBtYXgtZGVwdGg6IFsyLCA4XSAqL1xuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnQHBpeGkvc3ByaXRlJztcbmltcG9ydCB7IFRleHR1cmUgIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHsgc2lnbiwgdHJpbUNhbnZhcywgaGV4MnJnYiwgc3RyaW5nMmhleCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IFRFWFRfR1JBRElFTlQgfSBmcm9tICcuL2NvbnN0JztcbmltcG9ydCB7IFRleHRTdHlsZSB9IGZyb20gJy4vVGV4dFN0eWxlJztcbmltcG9ydCB7IFRleHRNZXRyaWNzIH0gZnJvbSAnLi9UZXh0TWV0cmljcyc7XG5cbmltcG9ydCB0eXBlIHsgSURlc3Ryb3lPcHRpb25zIH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5pbXBvcnQgdHlwZSB7IFJlbmRlcmVyIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgdHlwZSB7IElUZXh0U3R5bGUgfSBmcm9tICcuL1RleHRTdHlsZSc7XG5cbmNvbnN0IGRlZmF1bHREZXN0cm95T3B0aW9uczogSURlc3Ryb3lPcHRpb25zID0ge1xuICAgIHRleHR1cmU6IHRydWUsXG4gICAgY2hpbGRyZW46IGZhbHNlLFxuICAgIGJhc2VUZXh0dXJlOiB0cnVlLFxufTtcblxuLyoqXG4gKiBBIFRleHQgT2JqZWN0IHdpbGwgY3JlYXRlIGEgbGluZSBvciBtdWx0aXBsZSBsaW5lcyBvZiB0ZXh0LlxuICpcbiAqIFRoZSB0ZXh0IGlzIGNyZWF0ZWQgdXNpbmcgdGhlIFtDYW52YXMgQVBJXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2FudmFzX0FQSSkuXG4gKlxuICogVGhlIHByaW1hcnkgYWR2YW50YWdlIG9mIHRoaXMgY2xhc3Mgb3ZlciBCaXRtYXBUZXh0IGlzIHRoYXQgeW91IGhhdmUgZ3JlYXQgY29udHJvbCBvdmVyIHRoZSBzdHlsZSBvZiB0aGUgbmV4dCxcbiAqIHdoaWNoIHlvdSBjYW4gY2hhbmdlIGF0IHJ1bnRpbWUuXG4gKlxuICogVGhlIHByaW1hcnkgZGlzYWR2YW50YWdlcyBpcyB0aGF0IGVhY2ggcGllY2Ugb2YgdGV4dCBoYXMgaXQncyBvd24gdGV4dHVyZSwgd2hpY2ggY2FuIHVzZSBtb3JlIG1lbW9yeS5cbiAqIFdoZW4gdGV4dCBjaGFuZ2VzLCB0aGlzIHRleHR1cmUgaGFzIHRvIGJlIHJlLWdlbmVyYXRlZCBhbmQgcmUtdXBsb2FkZWQgdG8gdGhlIEdQVSwgdGFraW5nIHVwIHRpbWUuXG4gKlxuICogVG8gc3BsaXQgYSBsaW5lIHlvdSBjYW4gdXNlICdcXG4nIGluIHlvdXIgdGV4dCBzdHJpbmcsIG9yLCBvbiB0aGUgYHN0eWxlYCBvYmplY3QsXG4gKiBjaGFuZ2UgaXRzIGB3b3JkV3JhcGAgcHJvcGVydHkgdG8gdHJ1ZSBhbmQgYW5kIGdpdmUgdGhlIGB3b3JkV3JhcFdpZHRoYCBwcm9wZXJ0eSBhIHZhbHVlLlxuICpcbiAqIEEgVGV4dCBjYW4gYmUgY3JlYXRlZCBkaXJlY3RseSBmcm9tIGEgc3RyaW5nIGFuZCBhIHN0eWxlIG9iamVjdCxcbiAqIHdoaWNoIGNhbiBiZSBnZW5lcmF0ZWQgW2hlcmVdKGh0dHBzOi8vcGl4aWpzLmlvL3BpeGktdGV4dC1zdHlsZSkuXG4gKlxuICogYGBganNcbiAqIGxldCB0ZXh0ID0gbmV3IFBJWEkuVGV4dCgnVGhpcyBpcyBhIFBpeGlKUyB0ZXh0Jyx7Zm9udEZhbWlseSA6ICdBcmlhbCcsIGZvbnRTaXplOiAyNCwgZmlsbCA6IDB4ZmYxMDEwLCBhbGlnbiA6ICdjZW50ZXInfSk7XG4gKiBgYGBcbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuU3ByaXRlXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgVGV4dCBleHRlbmRzIFNwcml0ZVxue1xuICAgIHB1YmxpYyBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICAgIHB1YmxpYyBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgcHVibGljIGxvY2FsU3R5bGVJRDogbnVtYmVyO1xuICAgIHB1YmxpYyBkaXJ0eTogYm9vbGVhbjtcblxuICAgIF9yZXNvbHV0aW9uOiBudW1iZXI7XG4gICAgX2F1dG9SZXNvbHV0aW9uOiBib29sZWFuO1xuICAgIHByb3RlY3RlZCBfdGV4dDogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBfZm9udDogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBfc3R5bGU6IFRleHRTdHlsZTtcbiAgICBwcm90ZWN0ZWQgX3N0eWxlTGlzdGVuZXI6ICgpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBfb3duQ2FudmFzOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgc3RyaW5nIHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIHRleHQgdG8gZGlzcGxheVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fFBJWEkuVGV4dFN0eWxlfSBbc3R5bGVdIC0gVGhlIHN0eWxlIHBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBbY2FudmFzXSAtIFRoZSBjYW52YXMgZWxlbWVudCBmb3IgZHJhd2luZyB0ZXh0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLCBzdHlsZTogUGFydGlhbDxJVGV4dFN0eWxlPnxUZXh0U3R5bGUsIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpXG4gICAge1xuICAgICAgICBsZXQgb3duQ2FudmFzID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFjYW52YXMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgb3duQ2FudmFzID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IDM7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSAzO1xuXG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSBUZXh0dXJlLmZyb20oY2FudmFzKTtcblxuICAgICAgICB0ZXh0dXJlLm9yaWcgPSBuZXcgUmVjdGFuZ2xlKCk7XG4gICAgICAgIHRleHR1cmUudHJpbSA9IG5ldyBSZWN0YW5nbGUoKTtcblxuICAgICAgICBzdXBlcih0ZXh0dXJlKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcCB0cmFjayBpZiB0aGlzIFRleHQgb2JqZWN0IGNyZWF0ZWQgaXQncyBvd24gY2FudmFzXG4gICAgICAgICAqIGVsZW1lbnQgKGB0cnVlYCkgb3IgdXNlcyB0aGUgY29uc3RydWN0b3IgYXJndW1lbnQgKGBmYWxzZWApLlxuICAgICAgICAgKiBVc2VkIHRvIHdvcmthcm91bmQgYSBHQyBpc3N1ZXMgd2l0aCBTYWZhcmkgPCAxMyB3aGVuXG4gICAgICAgICAqIGRlc3Ryb3lpbmcgVGV4dC4gU2VlIGBkZXN0cm95YCBmb3IgbW9yZSBpbmZvLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fb3duQ2FudmFzID0gb3duQ2FudmFzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY2FudmFzIGVsZW1lbnQgdGhhdCBldmVyeXRoaW5nIGlzIGRyYXduIHRvXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjYW52YXMgMmQgY29udGV4dCB0aGF0IGV2ZXJ5dGhpbmcgaXMgZHJhd24gd2l0aFxuICAgICAgICAgKiBAbWVtYmVyIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVzb2x1dGlvbiAvIGRldmljZSBwaXhlbCByYXRpbyBvZiB0aGUgY2FudmFzLlxuICAgICAgICAgKiBUaGlzIGlzIHNldCB0byBhdXRvbWF0aWNhbGx5IG1hdGNoIHRoZSByZW5kZXJlciByZXNvbHV0aW9uIGJ5IGRlZmF1bHQsIGJ1dCBjYW4gYmUgb3ZlcnJpZGRlbiBieSBzZXR0aW5nIG1hbnVhbGx5LlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDFcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3Jlc29sdXRpb24gPSBzZXR0aW5ncy5SRVNPTFVUSU9OO1xuICAgICAgICB0aGlzLl9hdXRvUmVzb2x1dGlvbiA9IHRydWU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByaXZhdGUgdHJhY2tlciBmb3IgdGhlIGN1cnJlbnQgdGV4dC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGV4dCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByaXZhdGUgdHJhY2tlciBmb3IgdGhlIGN1cnJlbnQgc3R5bGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3N0eWxlID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByaXZhdGUgbGlzdGVuZXIgdG8gdHJhY2sgc3R5bGUgY2hhbmdlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7RnVuY3Rpb259XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9zdHlsZUxpc3RlbmVyID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJpdmF0ZSB0cmFja2VyIGZvciB0aGUgY3VycmVudCBmb250LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9mb250ID0gJyc7XG5cbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5zdHlsZSA9IHN0eWxlO1xuXG4gICAgICAgIHRoaXMubG9jYWxTdHlsZUlEID0gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0ZXh0IHRvIGl0cyBjYW52YXMsIGFuZCB1cGRhdGVzIGl0cyB0ZXh0dXJlLlxuICAgICAqIEJ5IGRlZmF1bHQgdGhpcyBpcyB1c2VkIGludGVybmFsbHkgdG8gZW5zdXJlIHRoZSB0ZXh0dXJlIGlzIGNvcnJlY3QgYmVmb3JlIHJlbmRlcmluZyxcbiAgICAgKiBidXQgaXQgY2FuIGJlIHVzZWQgY2FsbGVkIGV4dGVybmFsbHksIGZvciBleGFtcGxlIGZyb20gdGhpcyBjbGFzcyB0byAncHJlLWdlbmVyYXRlJyB0aGUgdGV4dHVyZSBmcm9tIGEgcGllY2Ugb2YgdGV4dCxcbiAgICAgKiBhbmQgdGhlbiBzaGFyZWQgYWNyb3NzIG11bHRpcGxlIFNwcml0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlc3BlY3REaXJ0eSAtIFdoZXRoZXIgdG8gYWJvcnQgdXBkYXRpbmcgdGhlIHRleHQgaWYgdGhlIFRleHQgaXNuJ3QgZGlydHkgYW5kIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVRleHQocmVzcGVjdERpcnR5OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLl9zdHlsZTtcblxuICAgICAgICAvLyBjaGVjayBpZiBzdHlsZSBoYXMgY2hhbmdlZC4uXG4gICAgICAgIGlmICh0aGlzLmxvY2FsU3R5bGVJRCAhPT0gc3R5bGUuc3R5bGVJRClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmxvY2FsU3R5bGVJRCA9IHN0eWxlLnN0eWxlSUQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuZGlydHkgJiYgcmVzcGVjdERpcnR5KVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mb250ID0gdGhpcy5fc3R5bGUudG9Gb250U3RyaW5nKCk7XG5cbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgY29uc3QgbWVhc3VyZWQgPSBUZXh0TWV0cmljcy5tZWFzdXJlVGV4dCh0aGlzLl90ZXh0IHx8ICcgJywgdGhpcy5fc3R5bGUsIHRoaXMuX3N0eWxlLndvcmRXcmFwLCB0aGlzLmNhbnZhcyk7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gbWVhc3VyZWQud2lkdGg7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IG1lYXN1cmVkLmhlaWdodDtcbiAgICAgICAgY29uc3QgbGluZXMgPSBtZWFzdXJlZC5saW5lcztcbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IG1lYXN1cmVkLmxpbmVIZWlnaHQ7XG4gICAgICAgIGNvbnN0IGxpbmVXaWR0aHMgPSBtZWFzdXJlZC5saW5lV2lkdGhzO1xuICAgICAgICBjb25zdCBtYXhMaW5lV2lkdGggPSBtZWFzdXJlZC5tYXhMaW5lV2lkdGg7XG4gICAgICAgIGNvbnN0IGZvbnRQcm9wZXJ0aWVzID0gbWVhc3VyZWQuZm9udFByb3BlcnRpZXM7XG5cbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSBNYXRoLmNlaWwoKE1hdGgubWF4KDEsIHdpZHRoKSArIChzdHlsZS5wYWRkaW5nICogMikpICogdGhpcy5fcmVzb2x1dGlvbik7XG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IE1hdGguY2VpbCgoTWF0aC5tYXgoMSwgaGVpZ2h0KSArIChzdHlsZS5wYWRkaW5nICogMikpICogdGhpcy5fcmVzb2x1dGlvbik7XG5cbiAgICAgICAgY29udGV4dC5zY2FsZSh0aGlzLl9yZXNvbHV0aW9uLCB0aGlzLl9yZXNvbHV0aW9uKTtcblxuICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgICBjb250ZXh0LmZvbnQgPSB0aGlzLl9mb250O1xuICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0eWxlLnN0cm9rZVRoaWNrbmVzcztcbiAgICAgICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSBzdHlsZS50ZXh0QmFzZWxpbmU7XG4gICAgICAgIGNvbnRleHQubGluZUpvaW4gPSBzdHlsZS5saW5lSm9pbjtcbiAgICAgICAgY29udGV4dC5taXRlckxpbWl0ID0gc3R5bGUubWl0ZXJMaW1pdDtcblxuICAgICAgICBsZXQgbGluZVBvc2l0aW9uWDogbnVtYmVyO1xuICAgICAgICBsZXQgbGluZVBvc2l0aW9uWTogbnVtYmVyO1xuXG4gICAgICAgIC8vIHJlcXVpcmUgMiBwYXNzZXMgaWYgYSBzaGFkb3c7IHRoZSBmaXJzdCB0byBkcmF3IHRoZSBkcm9wIHNoYWRvdywgdGhlIHNlY29uZCB0byBkcmF3IHRoZSB0ZXh0XG4gICAgICAgIGNvbnN0IHBhc3Nlc0NvdW50ID0gc3R5bGUuZHJvcFNoYWRvdyA/IDIgOiAxO1xuXG4gICAgICAgIC8vIEZvciB2NCwgd2UgZHJldyB0ZXh0IGF0IHRoZSBjb2xvdXJzIG9mIHRoZSBkcm9wIHNoYWRvdyB1bmRlcm5lYXRoIHRoZSBub3JtYWwgdGV4dC4gVGhpcyBnYXZlIHRoZSBjb3JyZWN0IHpJbmRleCxcbiAgICAgICAgLy8gYnV0IGZlYXR1cmVzIHN1Y2ggYXMgYWxwaGEgYW5kIHNoYWRvd2JsdXIgZGlkIG5vdCBsb29rIHJpZ2h0IGF0IGFsbCwgc2luY2Ugd2Ugd2VyZSB1c2luZyBhY3R1YWwgdGV4dCBhcyBhIHNoYWRvdy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gRm9yIHY1LjAuMCwgd2UgbW92ZWQgb3ZlciB0byBqdXN0IHVzZSB0aGUgY2FudmFzIEFQSSBmb3IgZHJvcCBzaGFkb3dzLCB3aGljaCBtYWRlIHRoZW0gbG9vayBtdWNoIG5pY2VyIGFuZCBtb3JlXG4gICAgICAgIC8vIHZpc3VhbGx5IHBsZWFzZSwgYnV0IG5vdyBiZWNhdXNlIHRoZSBzdHJva2UgaXMgZHJhd24gYW5kIHRoZW4gdGhlIGZpbGwsIGRyb3Agc2hhZG93cyB3b3VsZCBhcHBlYXIgb24gYm90aCB0aGUgZmlsbFxuICAgICAgICAvLyBhbmQgdGhlIHN0cm9rZTsgYW5kIGZpbGwgZHJvcCBzaGFkb3dzIHdvdWxkIGFwcGVhciBvdmVyIHRoZSB0b3Agb2YgdGhlIHN0cm9rZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gRm9yIHY1LjEuMSwgdGhlIG5ldyByb3V0ZSBpcyB0byByZXZlcnQgdG8gdjQgc3R5bGUgb2YgZHJhd2luZyB0ZXh0IGZpcnN0IHRvIGdldCB0aGUgZHJvcCBzaGFkb3dzIHVuZGVybmVhdGggbm9ybWFsXG4gICAgICAgIC8vIHRleHQsIGJ1dCBpbnN0ZWFkIGRyYXdpbmcgdGV4dCBpbiB0aGUgY29ycmVjdCBsb2NhdGlvbiwgd2UnbGwgZHJhdyBpdCBvZmYgc2NyZWVuICgtcGFkZGluZ1kpLCBhbmQgdGhlbiBhZGp1c3QgdGhlXG4gICAgICAgIC8vIGRyb3Agc2hhZG93IHNvIG9ubHkgdGhhdCBhcHBlYXJzIG9uIHNjcmVlbiAoK3BhZGRpbmdZKS4gTm93IHdlJ2xsIGhhdmUgdGhlIGNvcnJlY3QgZHJhdyBvcmRlciBvZiB0aGUgc2hhZG93XG4gICAgICAgIC8vIGJlbmVhdGggdGhlIHRleHQsIHdoaWxzdCBhbHNvIGhhdmluZyB0aGUgcHJvcGVyIHRleHQgc2hhZG93IHN0eWxpbmcuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFzc2VzQ291bnQ7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgaXNTaGFkb3dQYXNzID0gc3R5bGUuZHJvcFNoYWRvdyAmJiBpID09PSAwO1xuICAgICAgICAgICAgLy8gd2Ugb25seSB3YW50IHRoZSBkcm9wIHNoYWRvdywgc28gcHV0IHRleHQgd2F5IG9mZi1zY3JlZW5cbiAgICAgICAgICAgIGNvbnN0IGRzT2Zmc2V0VGV4dCA9IGlzU2hhZG93UGFzcyA/IE1hdGguY2VpbChNYXRoLm1heCgxLCBoZWlnaHQpICsgKHN0eWxlLnBhZGRpbmcgKiAyKSkgOiAwO1xuICAgICAgICAgICAgY29uc3QgZHNPZmZzZXRTaGFkb3cgPSBkc09mZnNldFRleHQgKiB0aGlzLl9yZXNvbHV0aW9uO1xuXG4gICAgICAgICAgICBpZiAoaXNTaGFkb3dQYXNzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIE9uIFNhZmFyaSwgdGV4dCB3aXRoIGdyYWRpZW50IGFuZCBkcm9wIHNoYWRvd3MgdG9nZXRoZXIgZG8gbm90IHBvc2l0aW9uIGNvcnJlY3RseVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzY2FsZSBvZiB0aGUgY2FudmFzIGlzIG5vdCAxOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk3Njg5XG4gICAgICAgICAgICAgICAgLy8gVGhlcmVmb3JlIHdlJ2xsIHNldCB0aGUgc3R5bGVzIHRvIGJlIGEgcGxhaW4gYmxhY2sgd2hpbHN0IGdlbmVyYXRpbmcgdGhpcyBkcm9wIHNoYWRvd1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRyb3BTaGFkb3dDb2xvciA9IHN0eWxlLmRyb3BTaGFkb3dDb2xvcjtcbiAgICAgICAgICAgICAgICBjb25zdCByZ2IgPSBoZXgycmdiKHR5cGVvZiBkcm9wU2hhZG93Q29sb3IgPT09ICdudW1iZXInID8gZHJvcFNoYWRvd0NvbG9yIDogc3RyaW5nMmhleChkcm9wU2hhZG93Q29sb3IpKTtcblxuICAgICAgICAgICAgICAgIGNvbnRleHQuc2hhZG93Q29sb3IgPSBgcmdiYSgke3JnYlswXSAqIDI1NX0sJHtyZ2JbMV0gKiAyNTV9LCR7cmdiWzJdICogMjU1fSwke3N0eWxlLmRyb3BTaGFkb3dBbHBoYX0pYDtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNoYWRvd0JsdXIgPSBzdHlsZS5kcm9wU2hhZG93Qmx1cjtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNoYWRvd09mZnNldFggPSBNYXRoLmNvcyhzdHlsZS5kcm9wU2hhZG93QW5nbGUpICogc3R5bGUuZHJvcFNoYWRvd0Rpc3RhbmNlO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2hhZG93T2Zmc2V0WSA9IChNYXRoLnNpbihzdHlsZS5kcm9wU2hhZG93QW5nbGUpICogc3R5bGUuZHJvcFNoYWRvd0Rpc3RhbmNlKSArIGRzT2Zmc2V0U2hhZG93O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIHNldCBjYW52YXMgdGV4dCBzdHlsZXNcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuX2dlbmVyYXRlRmlsbFN0eWxlKHN0eWxlLCBsaW5lcywgbWVhc3VyZWQpO1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IENhbid0IGhhdmUgZGlmZmVyZW50IHR5cGVzIGZvciBnZXR0ZXIgYW5kIHNldHRlci4gVGhlIGdldHRlciBzaG91bGRuJ3QgaGF2ZSB0aGUgbnVtYmVyIHR5cGUgYXNcbiAgICAgICAgICAgICAgICAvLyAgICAgICB0aGUgc2V0dGVyIGNvbnZlcnRzIHRvIHN0cmluZy4gU2VlIHRoaXMgdGhyZWFkIGZvciBtb3JlIGRldGFpbHM6XG4gICAgICAgICAgICAgICAgLy8gICAgICAgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8yNTIxXG4gICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0eWxlLnN0cm9rZSBhcyBzdHJpbmc7XG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LnNoYWRvd0NvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNoYWRvd0JsdXIgPSAwO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2hhZG93T2Zmc2V0WCA9IDA7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zaGFkb3dPZmZzZXRZID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZHJhdyBsaW5lcyBsaW5lIGJ5IGxpbmVcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGluZVBvc2l0aW9uWCA9IHN0eWxlLnN0cm9rZVRoaWNrbmVzcyAvIDI7XG4gICAgICAgICAgICAgICAgbGluZVBvc2l0aW9uWSA9ICgoc3R5bGUuc3Ryb2tlVGhpY2tuZXNzIC8gMikgKyAoaSAqIGxpbmVIZWlnaHQpKSArIGZvbnRQcm9wZXJ0aWVzLmFzY2VudDtcblxuICAgICAgICAgICAgICAgIGlmIChzdHlsZS5hbGlnbiA9PT0gJ3JpZ2h0JylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVQb3NpdGlvblggKz0gbWF4TGluZVdpZHRoIC0gbGluZVdpZHRoc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc3R5bGUuYWxpZ24gPT09ICdjZW50ZXInKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZVBvc2l0aW9uWCArPSAobWF4TGluZVdpZHRoIC0gbGluZVdpZHRoc1tpXSkgLyAyO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzdHlsZS5zdHJva2UgJiYgc3R5bGUuc3Ryb2tlVGhpY2tuZXNzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3TGV0dGVyU3BhY2luZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBvc2l0aW9uWCArIHN0eWxlLnBhZGRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lUG9zaXRpb25ZICsgc3R5bGUucGFkZGluZyAtIGRzT2Zmc2V0VGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuZmlsbClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xldHRlclNwYWNpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQb3NpdGlvblggKyBzdHlsZS5wYWRkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBvc2l0aW9uWSArIHN0eWxlLnBhZGRpbmcgLSBkc09mZnNldFRleHRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIHRleHQgd2l0aCBsZXR0ZXItc3BhY2luZy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSB0ZXh0IHRvIGRyYXdcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIEhvcml6b250YWwgcG9zaXRpb24gdG8gZHJhdyB0aGUgdGV4dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVmVydGljYWwgcG9zaXRpb24gdG8gZHJhdyB0aGUgdGV4dFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU3Ryb2tlPWZhbHNlXSAtIElzIHRoaXMgZHJhd2luZyBmb3IgdGhlIG91dHNpZGUgc3Ryb2tlIG9mIHRoZVxuICAgICAqICB0ZXh0PyBJZiBub3QsIGl0J3MgZm9yIHRoZSBpbnNpZGUgZmlsbFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBkcmF3TGV0dGVyU3BhY2luZyh0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBpc1N0cm9rZSA9IGZhbHNlKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLl9zdHlsZTtcblxuICAgICAgICAvLyBsZXR0ZXJTcGFjaW5nIG9mIDAgbWVhbnMgbm9ybWFsXG4gICAgICAgIGNvbnN0IGxldHRlclNwYWNpbmcgPSBzdHlsZS5sZXR0ZXJTcGFjaW5nO1xuXG4gICAgICAgIGlmIChsZXR0ZXJTcGFjaW5nID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoaXNTdHJva2UpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZVRleHQodGV4dCwgeCwgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxUZXh0KHRleHQsIHgsIHkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY3VycmVudFBvc2l0aW9uID0geDtcblxuICAgICAgICAvLyBVc2luZyBBcnJheS5mcm9tIGNvcnJlY3RseSBzcGxpdHMgY2hhcmFjdGVycyB3aGlsc3Qga2VlcGluZyBlbW9qaSB0b2dldGhlci5cbiAgICAgICAgLy8gVGhpcyBpcyBub3Qgc3VwcG9ydGVkIG9uIElFIGFzIGl0IHJlcXVpcmVzIEVTNiwgc28gcmVndWxhciB0ZXh0IHNwbGl0dGluZyBvY2N1cnMuXG4gICAgICAgIC8vIFRoaXMgYWxzbyBkb2Vzbid0IGFjY291bnQgZm9yIGVtb2ppIHRoYXQgYXJlIG11bHRpcGxlIGVtb2ppIHB1dCB0b2dldGhlciB0byBtYWtlIHNvbWV0aGluZyBlbHNlLlxuICAgICAgICAvLyBIYW5kbGluZyBhbGwgb2YgdGhpcyB3b3VsZCByZXF1aXJlIGEgYmlnIGxpYnJhcnkgaXRzZWxmLlxuICAgICAgICAvLyBodHRwczovL21lZGl1bS5jb20vQGdpbHRheWFyL2l0ZXJhdGluZy1vdmVyLWVtb2ppLWNoYXJhY3RlcnMtdGhlLWVzNi13YXktZjA2ZTQ1ODk1MTZcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL29ybGluZy9ncmFwaGVtZS1zcGxpdHRlclxuICAgICAgICBjb25zdCBzdHJpbmdBcnJheSA9IEFycmF5LmZyb20gPyBBcnJheS5mcm9tKHRleHQpIDogdGV4dC5zcGxpdCgnJyk7XG4gICAgICAgIGxldCBwcmV2aW91c1dpZHRoID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoO1xuICAgICAgICBsZXQgY3VycmVudFdpZHRoID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ0FycmF5Lmxlbmd0aDsgKytpKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q2hhciA9IHN0cmluZ0FycmF5W2ldO1xuXG4gICAgICAgICAgICBpZiAoaXNTdHJva2UpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZVRleHQoY3VycmVudENoYXIsIGN1cnJlbnRQb3NpdGlvbiwgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxUZXh0KGN1cnJlbnRDaGFyLCBjdXJyZW50UG9zaXRpb24sIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFdpZHRoID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQuc3Vic3RyaW5nKGkgKyAxKSkud2lkdGg7XG4gICAgICAgICAgICBjdXJyZW50UG9zaXRpb24gKz0gcHJldmlvdXNXaWR0aCAtIGN1cnJlbnRXaWR0aCArIGxldHRlclNwYWNpbmc7XG4gICAgICAgICAgICBwcmV2aW91c1dpZHRoID0gY3VycmVudFdpZHRoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0ZXh0dXJlIHNpemUgYmFzZWQgb24gY2FudmFzIHNpemVcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVUZXh0dXJlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuY2FudmFzO1xuXG4gICAgICAgIGlmICh0aGlzLl9zdHlsZS50cmltKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0cmltbWVkID0gdHJpbUNhbnZhcyhjYW52YXMpO1xuXG4gICAgICAgICAgICBpZiAodHJpbW1lZC5kYXRhKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHRyaW1tZWQud2lkdGg7XG4gICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IHRyaW1tZWQuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5wdXRJbWFnZURhdGEodHJpbW1lZC5kYXRhLCAwLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSB0aGlzLl90ZXh0dXJlO1xuICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMuX3N0eWxlO1xuICAgICAgICBjb25zdCBwYWRkaW5nID0gc3R5bGUudHJpbSA/IDAgOiBzdHlsZS5wYWRkaW5nO1xuICAgICAgICBjb25zdCBiYXNlVGV4dHVyZSA9IHRleHR1cmUuYmFzZVRleHR1cmU7XG5cbiAgICAgICAgdGV4dHVyZS50cmltLndpZHRoID0gdGV4dHVyZS5fZnJhbWUud2lkdGggPSBNYXRoLmNlaWwoY2FudmFzLndpZHRoIC8gdGhpcy5fcmVzb2x1dGlvbik7XG4gICAgICAgIHRleHR1cmUudHJpbS5oZWlnaHQgPSB0ZXh0dXJlLl9mcmFtZS5oZWlnaHQgPSBNYXRoLmNlaWwoY2FudmFzLmhlaWdodCAvIHRoaXMuX3Jlc29sdXRpb24pO1xuICAgICAgICB0ZXh0dXJlLnRyaW0ueCA9IC1wYWRkaW5nO1xuICAgICAgICB0ZXh0dXJlLnRyaW0ueSA9IC1wYWRkaW5nO1xuXG4gICAgICAgIHRleHR1cmUub3JpZy53aWR0aCA9IHRleHR1cmUuX2ZyYW1lLndpZHRoIC0gKHBhZGRpbmcgKiAyKTtcbiAgICAgICAgdGV4dHVyZS5vcmlnLmhlaWdodCA9IHRleHR1cmUuX2ZyYW1lLmhlaWdodCAtIChwYWRkaW5nICogMik7XG5cbiAgICAgICAgLy8gY2FsbCBzcHJpdGUgb25UZXh0dXJlVXBkYXRlIHRvIHVwZGF0ZSBzY2FsZSBpZiBfd2lkdGggb3IgX2hlaWdodCB3ZXJlIHNldFxuICAgICAgICB0aGlzLl9vblRleHR1cmVVcGRhdGUoKTtcblxuICAgICAgICBiYXNlVGV4dHVyZS5zZXRSZWFsU2l6ZShjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQsIHRoaXMuX3Jlc29sdXRpb24pO1xuXG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHVwZGF0ZXMgdHJhbnNmb3JtIG9mIGFsbCBvYmplY3RzIGZyb20gdGhlIHJvb3QgdG8gdGhpcyBvbmVcbiAgICAgICAgdGhpcy5fcmVjdXJzaXZlUG9zdFVwZGF0ZVRyYW5zZm9ybSgpO1xuXG4gICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIHRoZSBvYmplY3QgdXNpbmcgdGhlIFdlYkdMIHJlbmRlcmVyXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlclxuICAgICAqL1xuICAgIHByb3RlY3RlZCBfcmVuZGVyKHJlbmRlcmVyOiBSZW5kZXJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9hdXRvUmVzb2x1dGlvbiAmJiB0aGlzLl9yZXNvbHV0aW9uICE9PSByZW5kZXJlci5yZXNvbHV0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHV0aW9uID0gcmVuZGVyZXIucmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVUZXh0KHRydWUpO1xuXG4gICAgICAgIHN1cGVyLl9yZW5kZXIocmVuZGVyZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxvY2FsIGJvdW5kcyBvZiB0aGUgdGV4dCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSByZWN0IC0gVGhlIG91dHB1dCByZWN0YW5nbGUuXG4gICAgICogQHJldHVybiB7UElYSS5SZWN0YW5nbGV9IFRoZSBib3VuZHMuXG4gICAgICovXG4gICAgcHVibGljIGdldExvY2FsQm91bmRzKHJlY3Q6IFJlY3RhbmdsZSk6IFJlY3RhbmdsZVxuICAgIHtcbiAgICAgICAgdGhpcy51cGRhdGVUZXh0KHRydWUpO1xuXG4gICAgICAgIHJldHVybiBzdXBlci5nZXRMb2NhbEJvdW5kcy5jYWxsKHRoaXMsIHJlY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNhbGN1bGF0ZXMgdGhlIGJvdW5kcyBvZiB0aGUgVGV4dCBhcyBhIHJlY3RhbmdsZS4gVGhlIGJvdW5kcyBjYWxjdWxhdGlvbiB0YWtlcyB0aGUgd29ybGRUcmFuc2Zvcm0gaW50byBhY2NvdW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX2NhbGN1bGF0ZUJvdW5kcygpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnVwZGF0ZVRleHQodHJ1ZSk7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVmVydGljZXMoKTtcbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhbHJlYWR5IGRvbmUgdGhpcyBvbiBUSElTIGZyYW1lLlxuICAgICAgICB0aGlzLl9ib3VuZHMuYWRkUXVhZCh0aGlzLnZlcnRleERhdGEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyB0aGUgZmlsbCBzdHlsZS4gQ2FuIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgYSBncmFkaWVudCBiYXNlZCBvbiB0aGUgZmlsbCBzdHlsZSBiZWluZyBhbiBhcnJheVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gc3R5bGUgLSBUaGUgc3R5bGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gbGluZXMgLSBUaGUgbGluZXMgb2YgdGV4dC5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8bnVtYmVyfENhbnZhc0dyYWRpZW50fSBUaGUgZmlsbCBzdHlsZVxuICAgICAqL1xuICAgIHByaXZhdGUgX2dlbmVyYXRlRmlsbFN0eWxlKHN0eWxlOiBUZXh0U3R5bGUsIGxpbmVzOiBzdHJpbmdbXSwgbWV0cmljczogVGV4dE1ldHJpY3MpOiBzdHJpbmd8Q2FudmFzR3JhZGllbnR8Q2FudmFzUGF0dGVyblxuICAgIHtcbiAgICAgICAgLy8gVE9ETzogQ2FuJ3QgaGF2ZSBkaWZmZXJlbnQgdHlwZXMgZm9yIGdldHRlciBhbmQgc2V0dGVyLiBUaGUgZ2V0dGVyIHNob3VsZG4ndCBoYXZlIHRoZSBudW1iZXIgdHlwZSBhc1xuICAgICAgICAvLyAgICAgICB0aGUgc2V0dGVyIGNvbnZlcnRzIHRvIHN0cmluZy4gU2VlIHRoaXMgdGhyZWFkIGZvciBtb3JlIGRldGFpbHM6XG4gICAgICAgIC8vICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMjUyMVxuICAgICAgICBjb25zdCBmaWxsU3R5bGU6IHN0cmluZ3xzdHJpbmdbXXxDYW52YXNHcmFkaWVudHxDYW52YXNQYXR0ZXJuID0gc3R5bGUuZmlsbCBhcyBhbnk7XG5cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGZpbGxTdHlsZSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBmaWxsU3R5bGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmlsbFN0eWxlLmxlbmd0aCA9PT0gMSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZpbGxTdHlsZVswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoZSBncmFkaWVudCB3aWxsIGJlIGV2ZW5seSBzcGFjZWQgb3V0IGFjY29yZGluZyB0byBob3cgbGFyZ2UgdGhlIGFycmF5IGlzLlxuICAgICAgICAvLyBbJyNGRjAwMDAnLCAnIzAwRkYwMCcsICcjMDAwMEZGJ10gd291bGQgY3JlYXRlZCBzdG9wcyBhdCAwLjI1LCAwLjUgYW5kIDAuNzVcbiAgICAgICAgbGV0IGdyYWRpZW50OiBzdHJpbmdbXXxDYW52YXNHcmFkaWVudDtcblxuICAgICAgICAvLyBhIGRyb3BzaGFkb3cgd2lsbCBlbmxhcmdlIHRoZSBjYW52YXMgYW5kIHJlc3VsdCBpbiB0aGUgZ3JhZGllbnQgYmVpbmdcbiAgICAgICAgLy8gZ2VuZXJhdGVkIHdpdGggdGhlIGluY29ycmVjdCBkaW1lbnNpb25zXG4gICAgICAgIGNvbnN0IGRyb3BTaGFkb3dDb3JyZWN0aW9uID0gKHN0eWxlLmRyb3BTaGFkb3cpID8gc3R5bGUuZHJvcFNoYWRvd0Rpc3RhbmNlIDogMDtcblxuICAgICAgICAvLyBzaG91bGQgYWxzbyB0YWtlIHBhZGRpbmcgaW50byBhY2NvdW50LCBwYWRkaW5nIGNhbiBvZmZzZXQgdGhlIGdyYWRpZW50XG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSBzdHlsZS5wYWRkaW5nIHx8IDA7XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLmNlaWwodGhpcy5jYW52YXMud2lkdGggLyB0aGlzLl9yZXNvbHV0aW9uKSAtIGRyb3BTaGFkb3dDb3JyZWN0aW9uIC0gKHBhZGRpbmcgKiAyKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5jZWlsKHRoaXMuY2FudmFzLmhlaWdodCAvIHRoaXMuX3Jlc29sdXRpb24pIC0gZHJvcFNoYWRvd0NvcnJlY3Rpb24gLSAocGFkZGluZyAqIDIpO1xuXG4gICAgICAgIC8vIG1ha2UgYSBjb3B5IG9mIHRoZSBzdHlsZSBzZXR0aW5ncywgc28gd2UgY2FuIG1hbmlwdWxhdGUgdGhlbSBsYXRlclxuICAgICAgICBjb25zdCBmaWxsID0gZmlsbFN0eWxlLnNsaWNlKCk7XG4gICAgICAgIGNvbnN0IGZpbGxHcmFkaWVudFN0b3BzID0gc3R5bGUuZmlsbEdyYWRpZW50U3RvcHMuc2xpY2UoKTtcblxuICAgICAgICAvLyB3YW50aW5nIHRvIGV2ZW5seSBkaXN0cmlidXRlIHRoZSBmaWxscy4gU28gYW4gYXJyYXkgb2YgNCBjb2xvdXJzIHNob3VsZCBnaXZlIGZpbGxzIG9mIDAuMjUsIDAuNSBhbmQgMC43NVxuICAgICAgICBpZiAoIWZpbGxHcmFkaWVudFN0b3BzLmxlbmd0aClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoUGx1czEgPSBmaWxsLmxlbmd0aCArIDE7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoUGx1czE7ICsraSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmaWxsR3JhZGllbnRTdG9wcy5wdXNoKGkgLyBsZW5ndGhQbHVzMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzdG9wIHRoZSBibGVlZGluZyBvZiB0aGUgbGFzdCBncmFkaWVudCBvbiB0aGUgbGluZSBhYm92ZSB0byB0aGUgdG9wIGdyYWRpZW50IG9mIHRoZSB0aGlzIGxpbmVcbiAgICAgICAgLy8gYnkgaGFyZCBkZWZpbmluZyB0aGUgZmlyc3QgZ3JhZGllbnQgY29sb3VyIGF0IHBvaW50IDAsIGFuZCBsYXN0IGdyYWRpZW50IGNvbG91ciBhdCBwb2ludCAxXG4gICAgICAgIGZpbGwudW5zaGlmdChmaWxsU3R5bGVbMF0pO1xuICAgICAgICBmaWxsR3JhZGllbnRTdG9wcy51bnNoaWZ0KDApO1xuXG4gICAgICAgIGZpbGwucHVzaChmaWxsU3R5bGVbZmlsbFN0eWxlLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgZmlsbEdyYWRpZW50U3RvcHMucHVzaCgxKTtcblxuICAgICAgICBpZiAoc3R5bGUuZmlsbEdyYWRpZW50VHlwZSA9PT0gVEVYVF9HUkFESUVOVC5MSU5FQVJfVkVSVElDQUwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IHRoZSBncmFkaWVudCBhdCB0aGUgdG9wIGNlbnRlciBvZiB0aGUgY2FudmFzLCBhbmQgZW5kIGF0IHRoZSBib3R0b20gbWlkZGxlIG9mIHRoZSBjYW52YXNcbiAgICAgICAgICAgIGdyYWRpZW50ID0gdGhpcy5jb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KHdpZHRoIC8gMiwgcGFkZGluZywgd2lkdGggLyAyLCBoZWlnaHQgKyBwYWRkaW5nKTtcblxuICAgICAgICAgICAgLy8gd2UgbmVlZCB0byByZXBlYXQgdGhlIGdyYWRpZW50IHNvIHRoYXQgZWFjaCBpbmRpdmlkdWFsIGxpbmUgb2YgdGV4dCBoYXMgdGhlIHNhbWUgdmVydGljYWwgZ3JhZGllbnQgZWZmZWN0XG4gICAgICAgICAgICAvLyBbJyNGRjAwMDAnLCAnIzAwRkYwMCcsICcjMDAwMEZGJ10gb3ZlciAyIGxpbmVzIHdvdWxkIGNyZWF0ZSBzdG9wcyBhdCAwLjEyNSwgMC4yNSwgMC4zNzUsIDAuNjI1LCAwLjc1LCAwLjg3NVxuXG4gICAgICAgICAgICAvLyBUaGVyZSdzIHBvdGVudGlhbCBmb3IgZmxvYXRpbmcgcG9pbnQgcHJlY2lzaW9uIGlzc3VlcyBhdCB0aGUgc2VhbXMgYmV0d2VlbiBncmFkaWVudCByZXBlYXRzLlxuICAgICAgICAgICAgLy8gVGhlIGxvb3AgYmVsb3cgZ2VuZXJhdGVzIHRoZSBzdG9wcyBpbiBvcmRlciwgc28gdHJhY2sgdGhlIGxhc3QgZ2VuZXJhdGVkIG9uZSB0byBwcmV2ZW50XG4gICAgICAgICAgICAvLyBmbG9hdGluZyBwb2ludCBwcmVjaXNpb24gZnJvbSBtYWtpbmcgdXMgZ28gdGhlIHRlZW5pZXN0IGJpdCBiYWNrd2FyZHMsIHJlc3VsdGluZyBpblxuICAgICAgICAgICAgLy8gdGhlIGZpcnN0IGFuZCBsYXN0IGNvbG9ycyBnZXR0aW5nIHN3YXBwZWQuXG4gICAgICAgICAgICBsZXQgbGFzdEl0ZXJhdGlvblN0b3AgPSAwO1xuXG4gICAgICAgICAgICAvLyBBY3R1YWwgaGVpZ2h0IG9mIHRoZSB0ZXh0IGl0c2VsZiwgbm90IGNvdW50aW5nIHNwYWNpbmcgZm9yIGxpbmVIZWlnaHQvbGVhZGluZy9kcm9wU2hhZG93IGV0Y1xuICAgICAgICAgICAgY29uc3QgdGV4dEhlaWdodCA9IG1ldHJpY3MuZm9udFByb3BlcnRpZXMuZm9udFNpemUgKyBzdHlsZS5zdHJva2VUaGlja25lc3M7XG5cbiAgICAgICAgICAgIC8vIHRleHRIZWlnaHQsIGJ1dCBhcyBhIDAtMSBzaXplIGluIGdsb2JhbCBncmFkaWVudCBzdG9wIHNwYWNlXG4gICAgICAgICAgICBjb25zdCBncmFkU3RvcExpbmVIZWlnaHQgPSB0ZXh0SGVpZ2h0IC8gaGVpZ2h0O1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoaXNMaW5lVG9wID0gbWV0cmljcy5saW5lSGVpZ2h0ICogaTtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZmlsbC5sZW5ndGg7IGorKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIDAtMSBzdG9wIHBvaW50IGZvciB0aGUgY3VycmVudCBsaW5lLCBtdWx0aXBsaWVkIHRvIGdsb2JhbCBzcGFjZSBhZnRlcndhcmRzXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lU3RvcCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWxsR3JhZGllbnRTdG9wc1tqXSA9PT0gJ251bWJlcicpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVTdG9wID0gZmlsbEdyYWRpZW50U3RvcHNbal07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3RvcCA9IGogLyBmaWxsLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbFN0b3AgPSAodGhpc0xpbmVUb3AgLyBoZWlnaHQpICsgKGxpbmVTdG9wICogZ3JhZFN0b3BMaW5lSGVpZ2h0KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGNvbG9yIHN0b3AgZ2VuZXJhdGlvbiBnb2luZyBiYWNrd2FyZHMgZnJvbSBmbG9hdGluZyBwb2ludCBpbXByZWNpc2lvblxuICAgICAgICAgICAgICAgICAgICBsZXQgY2xhbXBlZFN0b3AgPSBNYXRoLm1heChsYXN0SXRlcmF0aW9uU3RvcCwgZ2xvYmFsU3RvcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY2xhbXBlZFN0b3AgPSBNYXRoLm1pbihjbGFtcGVkU3RvcCwgMSk7IC8vIENhcCBhdCAxIGFzIHdlbGwgZm9yIHNhZmV0eSdzIHNha2UgdG8gYXZvaWQgYSBwb3NzaWJsZSB0aHJvdy5cbiAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKGNsYW1wZWRTdG9wLCBmaWxsW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEl0ZXJhdGlvblN0b3AgPSBjbGFtcGVkU3RvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBzdGFydCB0aGUgZ3JhZGllbnQgYXQgdGhlIGNlbnRlciBsZWZ0IG9mIHRoZSBjYW52YXMsIGFuZCBlbmQgYXQgdGhlIGNlbnRlciByaWdodCBvZiB0aGUgY2FudmFzXG4gICAgICAgICAgICBncmFkaWVudCA9IHRoaXMuY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudChwYWRkaW5nLCBoZWlnaHQgLyAyLCB3aWR0aCArIHBhZGRpbmcsIGhlaWdodCAvIDIpO1xuXG4gICAgICAgICAgICAvLyBjYW4ganVzdCBldmVubHkgc3BhY2Ugb3V0IHRoZSBncmFkaWVudHMgaW4gdGhpcyBjYXNlLCBhcyBtdWx0aXBsZSBsaW5lcyBtYWtlcyBubyBkaWZmZXJlbmNlXG4gICAgICAgICAgICAvLyB0byBhbiBldmVuIGxlZnQgdG8gcmlnaHQgZ3JhZGllbnRcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsSXRlcmF0aW9ucyA9IGZpbGwubGVuZ3RoICsgMTtcbiAgICAgICAgICAgIGxldCBjdXJyZW50SXRlcmF0aW9uID0gMTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxsLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCBzdG9wOiBudW1iZXI7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpbGxHcmFkaWVudFN0b3BzW2ldID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3AgPSBmaWxsR3JhZGllbnRTdG9wc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcCA9IGN1cnJlbnRJdGVyYXRpb24gLyB0b3RhbEl0ZXJhdGlvbnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcChzdG9wLCBmaWxsW2ldKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50SXRlcmF0aW9uKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ3JhZGllbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhpcyB0ZXh0IG9iamVjdC5cbiAgICAgKiBOb3RlKiBVbmxpa2UgYSBTcHJpdGUsIGEgVGV4dCBvYmplY3Qgd2lsbCBhdXRvbWF0aWNhbGx5IGRlc3Ryb3kgaXRzIGJhc2VUZXh0dXJlIGFuZCB0ZXh0dXJlIGFzXG4gICAgICogdGhlIG1ham9yaXR5IG9mIHRoZSB0aW1lIHRoZSB0ZXh0dXJlIHdpbGwgbm90IGJlIHNoYXJlZCB3aXRoIGFueSBvdGhlciBTcHJpdGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R8Ym9vbGVhbn0gW29wdGlvbnNdIC0gT3B0aW9ucyBwYXJhbWV0ZXIuIEEgYm9vbGVhbiB3aWxsIGFjdCBhcyBpZiBhbGwgb3B0aW9uc1xuICAgICAqICBoYXZlIGJlZW4gc2V0IHRvIHRoYXQgdmFsdWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNoaWxkcmVuPWZhbHNlXSAtIGlmIHNldCB0byB0cnVlLCBhbGwgdGhlIGNoaWxkcmVuIHdpbGwgaGF2ZSB0aGVpclxuICAgICAqICBkZXN0cm95IG1ldGhvZCBjYWxsZWQgYXMgd2VsbC4gJ29wdGlvbnMnIHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRob3NlIGNhbGxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudGV4dHVyZT10cnVlXSAtIFNob3VsZCBpdCBkZXN0cm95IHRoZSBjdXJyZW50IHRleHR1cmUgb2YgdGhlIHNwcml0ZSBhcyB3ZWxsXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5iYXNlVGV4dHVyZT10cnVlXSAtIFNob3VsZCBpdCBkZXN0cm95IHRoZSBiYXNlIHRleHR1cmUgb2YgdGhlIHNwcml0ZSBhcyB3ZWxsXG4gICAgICovXG4gICAgcHVibGljIGRlc3Ryb3kob3B0aW9uczogSURlc3Ryb3lPcHRpb25zfGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdib29sZWFuJylcbiAgICAgICAge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHsgY2hpbGRyZW46IG9wdGlvbnMgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0RGVzdHJveU9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIHN1cGVyLmRlc3Ryb3kob3B0aW9ucyk7XG5cbiAgICAgICAgLy8gc2V0IGNhbnZhcyB3aWR0aCBhbmQgaGVpZ2h0IHRvIDAgdG8gd29ya2Fyb3VuZCBtZW1vcnkgbGVhayBpbiBTYWZhcmkgPCAxM1xuICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81MjUzMjYxNC90b3RhbC1jYW52YXMtbWVtb3J5LXVzZS1leGNlZWRzLXRoZS1tYXhpbXVtLWxpbWl0LXNhZmFyaS0xMlxuICAgICAgICBpZiAodGhpcy5fb3duQ2FudmFzKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy53aWR0aCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gcmVzZXQgdGhlIHRoZSBjb250ZXh0IGFuZCBjYW52YXMuLiBkb250IHdhbnQgdGhpcyBoYW5naW5nIGFyb3VuZCBpbiBtZW1vcnkhXG4gICAgICAgIHRoaXMuY29udGV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMuY2FudmFzID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9zdHlsZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIHRoZSBUZXh0LCBzZXR0aW5nIHRoaXMgd2lsbCBhY3R1YWxseSBtb2RpZnkgdGhlIHNjYWxlIHRvIGFjaGlldmUgdGhlIHZhbHVlIHNldFxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB3aWR0aCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dCh0cnVlKTtcblxuICAgICAgICByZXR1cm4gTWF0aC5hYnModGhpcy5zY2FsZS54KSAqIHRoaXMuX3RleHR1cmUub3JpZy53aWR0aDtcbiAgICB9XG5cbiAgICBzZXQgd2lkdGgodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dCh0cnVlKTtcblxuICAgICAgICBjb25zdCBzID0gc2lnbih0aGlzLnNjYWxlLngpIHx8IDE7XG5cbiAgICAgICAgdGhpcy5zY2FsZS54ID0gcyAqIHZhbHVlIC8gdGhpcy5fdGV4dHVyZS5vcmlnLndpZHRoO1xuICAgICAgICB0aGlzLl93aWR0aCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBoZWlnaHQgb2YgdGhlIFRleHQsIHNldHRpbmcgdGhpcyB3aWxsIGFjdHVhbGx5IG1vZGlmeSB0aGUgc2NhbGUgdG8gYWNoaWV2ZSB0aGUgdmFsdWUgc2V0XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGhlaWdodCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dCh0cnVlKTtcblxuICAgICAgICByZXR1cm4gTWF0aC5hYnModGhpcy5zY2FsZS55KSAqIHRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgc2V0IGhlaWdodCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy51cGRhdGVUZXh0KHRydWUpO1xuXG4gICAgICAgIGNvbnN0IHMgPSBzaWduKHRoaXMuc2NhbGUueSkgfHwgMTtcblxuICAgICAgICB0aGlzLnNjYWxlLnkgPSBzICogdmFsdWUgLyB0aGlzLl90ZXh0dXJlLm9yaWcuaGVpZ2h0O1xuICAgICAgICB0aGlzLl9oZWlnaHQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHN0eWxlIG9mIHRoZSB0ZXh0LiBTZXQgdXAgYW4gZXZlbnQgbGlzdGVuZXIgdG8gbGlzdGVuIGZvciBjaGFuZ2VzIG9uIHRoZSBzdHlsZVxuICAgICAqIG9iamVjdCBhbmQgbWFyayB0aGUgdGV4dCBhcyBkaXJ0eS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge29iamVjdHxQSVhJLlRleHRTdHlsZX1cbiAgICAgKi9cbiAgICBnZXQgc3R5bGUoKTogVGV4dFN0eWxlfFBhcnRpYWw8SVRleHRTdHlsZT5cbiAgICB7XG4gICAgICAgIC8vIFRPRE86IENhbid0IGhhdmUgZGlmZmVyZW50IHR5cGVzIGZvciBnZXR0ZXIgYW5kIHNldHRlci4gVGhlIGdldHRlciBzaG91bGRuJ3QgaGF2ZSB0aGUgSVRleHRTdHlsZVxuICAgICAgICAvLyAgICAgICBzaW5jZSB0aGUgc2V0dGVyIGNyZWF0ZXMgdGhlIFRleHRTdHlsZS4gU2VlIHRoaXMgdGhyZWFkIGZvciBtb3JlIGRldGFpbHM6XG4gICAgICAgIC8vICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMjUyMVxuICAgICAgICByZXR1cm4gdGhpcy5fc3R5bGU7XG4gICAgfVxuXG4gICAgc2V0IHN0eWxlKHN0eWxlOiBUZXh0U3R5bGV8UGFydGlhbDxJVGV4dFN0eWxlPilcbiAgICB7XG4gICAgICAgIHN0eWxlID0gc3R5bGUgfHwge307XG5cbiAgICAgICAgaWYgKHN0eWxlIGluc3RhbmNlb2YgVGV4dFN0eWxlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdHlsZSA9IHN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3R5bGUgPSBuZXcgVGV4dFN0eWxlKHN0eWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubG9jYWxTdHlsZUlEID0gLTE7XG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29weSBmb3IgdGhlIHRleHQgb2JqZWN0LiBUbyBzcGxpdCBhIGxpbmUgeW91IGNhbiB1c2UgJ1xcbicuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0IHRleHQoKTogc3RyaW5nXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dDtcbiAgICB9XG5cbiAgICBzZXQgdGV4dCh0ZXh0OiBzdHJpbmcpXG4gICAge1xuICAgICAgICB0ZXh0ID0gU3RyaW5nKHRleHQgPT09IG51bGwgfHwgdGV4dCA9PT0gdW5kZWZpbmVkID8gJycgOiB0ZXh0KTtcblxuICAgICAgICBpZiAodGhpcy5fdGV4dCA9PT0gdGV4dClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmVzb2x1dGlvbiAvIGRldmljZSBwaXhlbCByYXRpbyBvZiB0aGUgY2FudmFzLlxuICAgICAqIFRoaXMgaXMgc2V0IHRvIGF1dG9tYXRpY2FsbHkgbWF0Y2ggdGhlIHJlbmRlcmVyIHJlc29sdXRpb24gYnkgZGVmYXVsdCwgYnV0IGNhbiBiZSBvdmVycmlkZGVuIGJ5IHNldHRpbmcgbWFudWFsbHkuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDFcbiAgICAgKi9cbiAgICBnZXQgcmVzb2x1dGlvbigpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNvbHV0aW9uO1xuICAgIH1cblxuICAgIHNldCByZXNvbHV0aW9uKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLl9hdXRvUmVzb2x1dGlvbiA9IGZhbHNlO1xuXG4gICAgICAgIGlmICh0aGlzLl9yZXNvbHV0aW9uID09PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcmVzb2x1dGlvbiA9IHZhbHVlO1xuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tICdAcGl4aS9zZXR0aW5ncyc7XG5cbi8qKlxuICogRGVmYXVsdCBudW1iZXIgb2YgdXBsb2FkcyBwZXIgZnJhbWUgdXNpbmcgcHJlcGFyZSBwbHVnaW4uXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlcm9mIFBJWEkuc2V0dGluZ3NcbiAqIEBuYW1lIFVQTE9BRFNfUEVSX0ZSQU1FXG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHQgNFxuICovXG5zZXR0aW5ncy5VUExPQURTX1BFUl9GUkFNRSA9IDQ7XG5cbmV4cG9ydCB7IHNldHRpbmdzIH07XG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiLyoqXG4gKiBDb3VudExpbWl0ZXIgbGltaXRzIHRoZSBudW1iZXIgb2YgaXRlbXMgaGFuZGxlZCBieSBhIHtAbGluayBQSVhJLkJhc2VQcmVwYXJlfSB0byBhIHNwZWNpZmllZFxuICogbnVtYmVyIG9mIGl0ZW1zIHBlciBmcmFtZS5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBDb3VudExpbWl0ZXJcbntcbiAgICBwdWJsaWMgbWF4SXRlbXNQZXJGcmFtZTogbnVtYmVyO1xuICAgIHB1YmxpYyBpdGVtc0xlZnQ6IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4SXRlbXNQZXJGcmFtZSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0aGF0IGNhbiBiZSBwcmVwYXJlZCBlYWNoIGZyYW1lLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1heEl0ZW1zUGVyRnJhbWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdGhhdCBjYW4gYmUgcHJlcGFyZWQgZWFjaCBmcmFtZS5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4SXRlbXNQZXJGcmFtZSA9IG1heEl0ZW1zUGVyRnJhbWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIGl0ZW1zIHRoYXQgY2FuIGJlIHByZXBhcmVkIGluIHRoZSBjdXJyZW50IGZyYW1lLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pdGVtc0xlZnQgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0cyBhbnkgY291bnRpbmcgcHJvcGVydGllcyB0byBzdGFydCBmcmVzaCBvbiBhIG5ldyBmcmFtZS5cbiAgICAgKi9cbiAgICBiZWdpbkZyYW1lKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuaXRlbXNMZWZ0ID0gdGhpcy5tYXhJdGVtc1BlckZyYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgYW5vdGhlciBpdGVtIGNhbiBiZSB1cGxvYWRlZC4gVGhpcyBzaG91bGQgb25seSBiZSBjYWxsZWQgb25jZSBwZXIgaXRlbS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgaXRlbSBpcyBhbGxvd2VkIHRvIGJlIHVwbG9hZGVkLlxuICAgICAqL1xuICAgIGFsbG93ZWRUb1VwbG9hZCgpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtc0xlZnQtLSA+IDA7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFRleHR1cmUsIEJhc2VUZXh0dXJlIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBUaWNrZXIsIFVQREFURV9QUklPUklUWSB9IGZyb20gJ0BwaXhpL3RpY2tlcic7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcbmltcG9ydCB7IENvbnRhaW5lciwgRGlzcGxheU9iamVjdCB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuaW1wb3J0IHsgVGV4dCwgVGV4dFN0eWxlLCBUZXh0TWV0cmljcyB9IGZyb20gJ0BwaXhpL3RleHQnO1xuaW1wb3J0IHsgQ291bnRMaW1pdGVyIH0gZnJvbSAnLi9Db3VudExpbWl0ZXInO1xuXG5pbXBvcnQgdHlwZSB7IEFic3RyYWN0UmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcblxuaW50ZXJmYWNlIElBcnJvd0Z1bmN0aW9uIHtcbiAgICAoKTogdm9pZDtcbn1cbmludGVyZmFjZSBJVXBsb2FkSG9vayB7XG4gICAgKGhlbHBlcjogQWJzdHJhY3RSZW5kZXJlciB8IEJhc2VQcmVwYXJlLCBpdGVtOiBJRGlzcGxheU9iamVjdEV4dGVuZGVkKTogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIElGaW5kSG9vayB7XG4gICAgKGl0ZW06IGFueSwgcXVldWU6IEFycmF5PGFueT4pOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEaXNwbGF5T2JqZWN0RXh0ZW5kZWQgZXh0ZW5kcyBEaXNwbGF5T2JqZWN0IHtcbiAgICBfdGV4dHVyZXM/OiBBcnJheTxUZXh0dXJlPjtcbiAgICBfdGV4dHVyZT86IFRleHR1cmU7XG4gICAgc3R5bGU/OiBUZXh0U3R5bGU7XG59XG5cbi8qKlxuICogQnVpbHQtaW4gaG9vayB0byBmaW5kIG11bHRpcGxlIHRleHR1cmVzIGZyb20gb2JqZWN0cyBsaWtlIEFuaW1hdGVkU3ByaXRlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IGl0ZW0gLSBEaXNwbGF5IG9iamVjdCB0byBjaGVja1xuICogQHBhcmFtIHtBcnJheTwqPn0gcXVldWUgLSBDb2xsZWN0aW9uIG9mIGl0ZW1zIHRvIHVwbG9hZFxuICogQHJldHVybiB7Ym9vbGVhbn0gaWYgYSBQSVhJLlRleHR1cmUgb2JqZWN0IHdhcyBmb3VuZC5cbiAqL1xuXG5mdW5jdGlvbiBmaW5kTXVsdGlwbGVCYXNlVGV4dHVyZXMoaXRlbTogSURpc3BsYXlPYmplY3RFeHRlbmRlZCwgcXVldWU6IEFycmF5PGFueT4pOiBib29sZWFuXG57XG4gICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xuXG4gICAgLy8gT2JqZWN0cyB3aXRoIG11bHRpcGxlIHRleHR1cmVzXG4gICAgaWYgKGl0ZW0gJiYgaXRlbS5fdGV4dHVyZXMgJiYgaXRlbS5fdGV4dHVyZXMubGVuZ3RoKVxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLl90ZXh0dXJlcy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGl0ZW0uX3RleHR1cmVzW2ldIGluc3RhbmNlb2YgVGV4dHVyZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlVGV4dHVyZSA9IGl0ZW0uX3RleHR1cmVzW2ldLmJhc2VUZXh0dXJlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHF1ZXVlLmluZGV4T2YoYmFzZVRleHR1cmUpID09PSAtMSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goYmFzZVRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQnVpbHQtaW4gaG9vayB0byBmaW5kIEJhc2VUZXh0dXJlcyBmcm9tIFRleHR1cmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5UZXh0dXJlfSBpdGVtIC0gRGlzcGxheSBvYmplY3QgdG8gY2hlY2tcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IHF1ZXVlIC0gQ29sbGVjdGlvbiBvZiBpdGVtcyB0byB1cGxvYWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGlmIGEgUElYSS5UZXh0dXJlIG9iamVjdCB3YXMgZm91bmQuXG4gKi9cbmZ1bmN0aW9uIGZpbmRCYXNlVGV4dHVyZShpdGVtOiBUZXh0dXJlLCBxdWV1ZTogQXJyYXk8YW55Pik6IGJvb2xlYW5cbntcbiAgICBpZiAoaXRlbS5iYXNlVGV4dHVyZSBpbnN0YW5jZW9mIEJhc2VUZXh0dXJlKVxuICAgIHtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IGl0ZW0uYmFzZVRleHR1cmU7XG5cbiAgICAgICAgaWYgKHF1ZXVlLmluZGV4T2YodGV4dHVyZSkgPT09IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKHRleHR1cmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEJ1aWx0LWluIGhvb2sgdG8gZmluZCB0ZXh0dXJlcyBmcm9tIG9iamVjdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBpdGVtIC0gRGlzcGxheSBvYmplY3QgdG8gY2hlY2tcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IHF1ZXVlIC0gQ29sbGVjdGlvbiBvZiBpdGVtcyB0byB1cGxvYWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGlmIGEgUElYSS5UZXh0dXJlIG9iamVjdCB3YXMgZm91bmQuXG4gKi9cbmZ1bmN0aW9uIGZpbmRUZXh0dXJlKGl0ZW06IElEaXNwbGF5T2JqZWN0RXh0ZW5kZWQsIHF1ZXVlOiBBcnJheTxhbnk+KTogYm9vbGVhblxue1xuICAgIGlmIChpdGVtLl90ZXh0dXJlICYmIGl0ZW0uX3RleHR1cmUgaW5zdGFuY2VvZiBUZXh0dXJlKVxuICAgIHtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IGl0ZW0uX3RleHR1cmUuYmFzZVRleHR1cmU7XG5cbiAgICAgICAgaWYgKHF1ZXVlLmluZGV4T2YodGV4dHVyZSkgPT09IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKHRleHR1cmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEJ1aWx0LWluIGhvb2sgdG8gZHJhdyBQSVhJLlRleHQgdG8gaXRzIHRleHR1cmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5BYnN0cmFjdFJlbmRlcmVyfFBJWEkuQmFzZVByZXBhcmV9IGhlbHBlciAtIE5vdCB1c2VkIGJ5IHRoaXMgdXBsb2FkIGhhbmRsZXJcbiAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBpdGVtIC0gSXRlbSB0byBjaGVja1xuICogQHJldHVybiB7Ym9vbGVhbn0gSWYgaXRlbSB3YXMgdXBsb2FkZWQuXG4gKi9cbmZ1bmN0aW9uIGRyYXdUZXh0KF9oZWxwZXI6IEFic3RyYWN0UmVuZGVyZXIgfCBCYXNlUHJlcGFyZSwgaXRlbTogSURpc3BsYXlPYmplY3RFeHRlbmRlZCk6IGJvb2xlYW5cbntcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFRleHQpXG4gICAge1xuICAgICAgICAvLyB1cGRhdGluZyB0ZXh0IHdpbGwgcmV0dXJuIGVhcmx5IGlmIGl0IGlzIG5vdCBkaXJ0eVxuICAgICAgICBpdGVtLnVwZGF0ZVRleHQodHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEJ1aWx0LWluIGhvb2sgdG8gY2FsY3VsYXRlIGEgdGV4dCBzdHlsZSBmb3IgYSBQSVhJLlRleHQgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1BJWEkuQWJzdHJhY3RSZW5kZXJlcnxQSVhJLkJhc2VQcmVwYXJlfSBoZWxwZXIgLSBOb3QgdXNlZCBieSB0aGlzIHVwbG9hZCBoYW5kbGVyXG4gKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gaXRlbSAtIEl0ZW0gdG8gY2hlY2tcbiAqIEByZXR1cm4ge2Jvb2xlYW59IElmIGl0ZW0gd2FzIHVwbG9hZGVkLlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVUZXh0U3R5bGUoX2hlbHBlcjogQWJzdHJhY3RSZW5kZXJlciB8IEJhc2VQcmVwYXJlLCBpdGVtOiBJRGlzcGxheU9iamVjdEV4dGVuZGVkKTogYm9vbGVhblxue1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgVGV4dFN0eWxlKVxuICAgIHtcbiAgICAgICAgY29uc3QgZm9udCA9IGl0ZW0udG9Gb250U3RyaW5nKCk7XG5cbiAgICAgICAgVGV4dE1ldHJpY3MubWVhc3VyZUZvbnQoZm9udCk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEJ1aWx0LWluIGhvb2sgdG8gZmluZCBUZXh0IG9iamVjdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBpdGVtIC0gRGlzcGxheSBvYmplY3QgdG8gY2hlY2tcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IHF1ZXVlIC0gQ29sbGVjdGlvbiBvZiBpdGVtcyB0byB1cGxvYWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGlmIGEgUElYSS5UZXh0IG9iamVjdCB3YXMgZm91bmQuXG4gKi9cbmZ1bmN0aW9uIGZpbmRUZXh0KGl0ZW06IElEaXNwbGF5T2JqZWN0RXh0ZW5kZWQsIHF1ZXVlOiBBcnJheTxhbnk+KTogYm9vbGVhblxue1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgVGV4dClcbiAgICB7XG4gICAgICAgIC8vIHB1c2ggdGhlIHRleHQgc3R5bGUgdG8gcHJlcGFyZSBpdCAtIHRoaXMgY2FuIGJlIHJlYWxseSBleHBlbnNpdmVcbiAgICAgICAgaWYgKHF1ZXVlLmluZGV4T2YoaXRlbS5zdHlsZSkgPT09IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGl0ZW0uc3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFsc28gcHVzaCB0aGUgdGV4dCBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gcmVuZGVyIGl0ICh0byBjYW52YXMvdGV4dHVyZSkgaWYgbmVlZGVkXG4gICAgICAgIGlmIChxdWV1ZS5pbmRleE9mKGl0ZW0pID09PSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgcXVldWUucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhbHNvIHB1c2ggdGhlIFRleHQncyB0ZXh0dXJlIGZvciB1cGxvYWQgdG8gR1BVXG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSBpdGVtLl90ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG4gICAgICAgIGlmIChxdWV1ZS5pbmRleE9mKHRleHR1cmUpID09PSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgcXVldWUucHVzaCh0ZXh0dXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBCdWlsdC1pbiBob29rIHRvIGZpbmQgVGV4dFN0eWxlIG9iamVjdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5UZXh0U3R5bGV9IGl0ZW0gLSBEaXNwbGF5IG9iamVjdCB0byBjaGVja1xuICogQHBhcmFtIHtBcnJheTwqPn0gcXVldWUgLSBDb2xsZWN0aW9uIG9mIGl0ZW1zIHRvIHVwbG9hZFxuICogQHJldHVybiB7Ym9vbGVhbn0gaWYgYSBQSVhJLlRleHRTdHlsZSBvYmplY3Qgd2FzIGZvdW5kLlxuICovXG5mdW5jdGlvbiBmaW5kVGV4dFN0eWxlKGl0ZW06IFRleHRTdHlsZSwgcXVldWU6IEFycmF5PGFueT4pOiBib29sZWFuXG57XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBUZXh0U3R5bGUpXG4gICAge1xuICAgICAgICBpZiAocXVldWUuaW5kZXhPZihpdGVtKSA9PT0gLTEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goaXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogVGhlIHByZXBhcmUgbWFuYWdlciBwcm92aWRlcyBmdW5jdGlvbmFsaXR5IHRvIHVwbG9hZCBjb250ZW50IHRvIHRoZSBHUFUuXG4gKlxuICogQmFzZVByZXBhcmUgaGFuZGxlcyBiYXNpYyBxdWV1aW5nIGZ1bmN0aW9uYWxpdHkgYW5kIGlzIGV4dGVuZGVkIGJ5XG4gKiB7QGxpbmsgUElYSS5QcmVwYXJlfSBhbmQge0BsaW5rIFBJWEkuQ2FudmFzUHJlcGFyZX1cbiAqIHRvIHByb3ZpZGUgcHJlcGFyYXRpb24gY2FwYWJpbGl0aWVzIHNwZWNpZmljIHRvIHRoZWlyIHJlc3BlY3RpdmUgcmVuZGVyZXJzLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDcmVhdGUgYSBzcHJpdGVcbiAqIGNvbnN0IHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb20oJ3NvbWV0aGluZy5wbmcnKTtcbiAqXG4gKiAvLyBMb2FkIG9iamVjdCBpbnRvIEdQVVxuICogYXBwLnJlbmRlcmVyLnBsdWdpbnMucHJlcGFyZS51cGxvYWQoc3ByaXRlLCAoKSA9PiB7XG4gKlxuICogICAgIC8vVGV4dHVyZShzKSBoYXMgYmVlbiB1cGxvYWRlZCB0byBHUFVcbiAqICAgICBhcHAuc3RhZ2UuYWRkQ2hpbGQoc3ByaXRlKTtcbiAqXG4gKiB9KVxuICpcbiAqIEBhYnN0cmFjdFxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgQmFzZVByZXBhcmVcbntcbiAgICBwcml2YXRlIGxpbWl0ZXI6IENvdW50TGltaXRlcjtcbiAgICBwcm90ZWN0ZWQgcmVuZGVyZXI6IEFic3RyYWN0UmVuZGVyZXI7XG4gICAgcHJvdGVjdGVkIHVwbG9hZEhvb2tIZWxwZXI6IGFueTtcbiAgICBwcm90ZWN0ZWQgcXVldWU6IEFycmF5PGFueT47XG4gICAgcHVibGljIGFkZEhvb2tzOiBBcnJheTxhbnk+O1xuICAgIHB1YmxpYyB1cGxvYWRIb29rczogQXJyYXk8YW55PjtcbiAgICBwdWJsaWMgY29tcGxldGVzOiBBcnJheTxhbnk+O1xuICAgIHB1YmxpYyB0aWNraW5nOiBib29sZWFuO1xuICAgIHByaXZhdGUgZGVsYXllZFRpY2s6IElBcnJvd0Z1bmN0aW9uO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5BYnN0cmFjdFJlbmRlcmVyfSByZW5kZXJlciAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHJlbmRlcmVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IEFic3RyYWN0UmVuZGVyZXIpXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGxpbWl0ZXIgdG8gYmUgdXNlZCB0byBjb250cm9sIGhvdyBxdWlja2x5IGl0ZW1zIGFyZSBwcmVwYXJlZC5cbiAgICAgICAgICogQHR5cGUge1BJWEkuQ291bnRMaW1pdGVyfFBJWEkuVGltZUxpbWl0ZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpbWl0ZXIgPSBuZXcgQ291bnRMaW1pdGVyKHNldHRpbmdzLlVQTE9BRFNfUEVSX0ZSQU1FKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVmZXJlbmNlIHRvIHRoZSByZW5kZXJlci5cbiAgICAgICAgICogQHR5cGUge1BJWEkuQWJzdHJhY3RSZW5kZXJlcn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb25seSByZWFsIGRpZmZlcmVuY2UgYmV0d2VlbiBDYW52YXNQcmVwYXJlIGFuZCBQcmVwYXJlIGlzIHdoYXQgdGhleSBwYXNzXG4gICAgICAgICAqIHRvIHVwbG9hZCBob29rcy4gVGhhdCBkaWZmZXJlbnQgcGFyYW1ldGVyIGlzIHN0b3JlZCBoZXJlLlxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVwbG9hZEhvb2tIZWxwZXIgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb2xsZWN0aW9uIG9mIGl0ZW1zIHRvIHVwbG9hZHMgYXQgb25jZS5cbiAgICAgICAgICogQHR5cGUge0FycmF5PCo+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb2xsZWN0aW9uIG9mIGFkZGl0aW9uYWwgaG9va3MgZm9yIGZpbmRpbmcgYXNzZXRzLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8RnVuY3Rpb24+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hZGRIb29rcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb2xsZWN0aW9uIG9mIGFkZGl0aW9uYWwgaG9va3MgZm9yIHByb2Nlc3NpbmcgYXNzZXRzLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8RnVuY3Rpb24+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cGxvYWRIb29rcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsYmFjayB0byBjYWxsIGFmdGVyIGNvbXBsZXRlZC5cbiAgICAgICAgICogQHR5cGUge0FycmF5PEZ1bmN0aW9uPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29tcGxldGVzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHByZXBhcmUgaXMgdGlja2luZyAocnVubmluZykuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWNraW5nID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqICdib3VuZCcgY2FsbCBmb3IgcHJlcGFyZUl0ZW1zKCkuXG4gICAgICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVsYXllZFRpY2sgPSAoKTogdm9pZCA9PlxuICAgICAgICB7XG4gICAgICAgICAgICAvLyB1bmxpa2VseSwgYnV0IGluIGNhc2Ugd2Ugd2VyZSBkZXN0cm95ZWQgYmV0d2VlbiB0aWNrKCkgYW5kIGRlbGF5ZWRUaWNrKClcbiAgICAgICAgICAgIGlmICghdGhpcy5xdWV1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXBhcmVJdGVtcygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGhvb2tzIHRvIGZpbmQgdGhlIGNvcnJlY3QgdGV4dHVyZVxuICAgICAgICB0aGlzLnJlZ2lzdGVyRmluZEhvb2soZmluZFRleHQpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRmluZEhvb2soZmluZFRleHRTdHlsZSk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJGaW5kSG9vayhmaW5kTXVsdGlwbGVCYXNlVGV4dHVyZXMpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRmluZEhvb2soZmluZEJhc2VUZXh0dXJlKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckZpbmRIb29rKGZpbmRUZXh0dXJlKTtcblxuICAgICAgICAvLyB1cGxvYWQgaG9va3NcbiAgICAgICAgdGhpcy5yZWdpc3RlclVwbG9hZEhvb2soZHJhd1RleHQpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVXBsb2FkSG9vayhjYWxjdWxhdGVUZXh0U3R5bGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwbG9hZCBhbGwgdGhlIHRleHR1cmVzIGFuZCBncmFwaGljcyB0byB0aGUgR1BVLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxQSVhJLkRpc3BsYXlPYmplY3R8UElYSS5Db250YWluZXJ8UElYSS5CYXNlVGV4dHVyZXxQSVhJLlRleHR1cmV8UElYSS5HcmFwaGljc3xQSVhJLlRleHR9IGl0ZW0gLVxuICAgICAqICAgICAgICBFaXRoZXIgdGhlIGNvbnRhaW5lciBvciBkaXNwbGF5IG9iamVjdCB0byBzZWFyY2ggZm9yIGl0ZW1zIHRvIHVwbG9hZCwgdGhlIGl0ZW1zIHRvIHVwbG9hZCB0aGVtc2VsdmVzLFxuICAgICAqICAgICAgICBvciB0aGUgY2FsbGJhY2sgZnVuY3Rpb24sIGlmIGl0ZW1zIGhhdmUgYmVlbiBhZGRlZCB1c2luZyBgcHJlcGFyZS5hZGRgLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtkb25lXSAtIE9wdGlvbmFsIGNhbGxiYWNrIHdoZW4gYWxsIHF1ZXVlZCB1cGxvYWRzIGhhdmUgY29tcGxldGVkXG4gICAgICovXG4gICAgdXBsb2FkKGl0ZW06IElEaXNwbGF5T2JqZWN0RXh0ZW5kZWQgfCBJVXBsb2FkSG9vayB8IElGaW5kSG9vayB8ICgoKSA9PiB2b2lkKSwgZG9uZTogKCkgPT4gdm9pZCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAge1xuICAgICAgICAgICAgZG9uZSA9IGl0ZW0gYXMgKCkgPT4gdm9pZDtcbiAgICAgICAgICAgIGl0ZW0gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgYSBkaXNwbGF5IG9iamVjdCwgc2VhcmNoIGZvciBpdGVtc1xuICAgICAgICAvLyB0aGF0IHdlIGNvdWxkIHVwbG9hZFxuICAgICAgICBpZiAoaXRlbSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5hZGQoaXRlbSBhcyBJRGlzcGxheU9iamVjdEV4dGVuZGVkIHwgSVVwbG9hZEhvb2sgfCBJRmluZEhvb2spO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IHRoZSBpdGVtcyBmb3IgdXBsb2FkIGZyb20gdGhlIGRpc3BsYXlcbiAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoZG9uZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRlcy5wdXNoKGRvbmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMudGlja2luZylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpY2tpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIFRpY2tlci5zeXN0ZW0uYWRkT25jZSh0aGlzLnRpY2ssIHRoaXMsIFVQREFURV9QUklPUklUWS5VVElMSVRZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkb25lKVxuICAgICAgICB7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGljayB1cGRhdGVcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGljaygpOiB2b2lkXG4gICAge1xuICAgICAgICBzZXRUaW1lb3V0KHRoaXMuZGVsYXllZFRpY2ssIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjdHVhbGx5IHByZXBhcmUgaXRlbXMuIFRoaXMgaXMgaGFuZGxlZCBvdXRzaWRlIG9mIHRoZSB0aWNrIGJlY2F1c2UgaXQgd2lsbCB0YWtlIGEgd2hpbGVcbiAgICAgKiBhbmQgd2UgZG8gTk9UIHdhbnQgdG8gYmxvY2sgdGhlIGN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lIGZyb20gcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcmVwYXJlSXRlbXMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5saW1pdGVyLmJlZ2luRnJhbWUoKTtcbiAgICAgICAgLy8gVXBsb2FkIHRoZSBncmFwaGljc1xuICAgICAgICB3aGlsZSAodGhpcy5xdWV1ZS5sZW5ndGggJiYgdGhpcy5saW1pdGVyLmFsbG93ZWRUb1VwbG9hZCgpKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5xdWV1ZVswXTtcbiAgICAgICAgICAgIGxldCB1cGxvYWRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoaXRlbSAmJiAhaXRlbS5fZGVzdHJveWVkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLnVwbG9hZEhvb2tzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXBsb2FkSG9va3NbaV0odGhpcy51cGxvYWRIb29rSGVscGVyLCBpdGVtKSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdXBsb2FkZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2UncmUgZmluaXNoZWRcbiAgICAgICAgaWYgKCF0aGlzLnF1ZXVlLmxlbmd0aClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy50aWNraW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlcyA9IHRoaXMuY29tcGxldGVzLnNsaWNlKDApO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlcy5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gY29tcGxldGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlc1tpXSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gaWYgd2UgYXJlIG5vdCBmaW5pc2hlZCwgb24gdGhlIG5leHQgckFGIGRvIHRoaXMgYWdhaW5cbiAgICAgICAgICAgIFRpY2tlci5zeXN0ZW0uYWRkT25jZSh0aGlzLnRpY2ssIHRoaXMsIFVQREFURV9QUklPUklUWS5VVElMSVRZKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgaG9va3MgZm9yIGZpbmRpbmcgaXRlbXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhZGRIb29rIC0gRnVuY3Rpb24gY2FsbCB0aGF0IHRha2VzIHR3byBwYXJhbWV0ZXJzOiBgaXRlbToqLCBxdWV1ZTpBcnJheWBcbiAgICAgKiAgICAgICAgICBmdW5jdGlvbiBtdXN0IHJldHVybiBgdHJ1ZWAgaWYgaXQgd2FzIGFibGUgdG8gYWRkIGl0ZW0gdG8gdGhlIHF1ZXVlLlxuICAgICAqIEByZXR1cm4ge3RoaXN9IEluc3RhbmNlIG9mIHBsdWdpbiBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcmVnaXN0ZXJGaW5kSG9vayhhZGRIb29rOiBJRmluZEhvb2spOiB0aGlzXG4gICAge1xuICAgICAgICBpZiAoYWRkSG9vaylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5hZGRIb29rcy5wdXNoKGFkZEhvb2spO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBob29rcyBmb3IgdXBsb2FkaW5nIGl0ZW1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gdXBsb2FkSG9vayAtIEZ1bmN0aW9uIGNhbGwgdGhhdCB0YWtlcyB0d28gcGFyYW1ldGVyczogYHByZXBhcmU6Q2FudmFzUHJlcGFyZSwgaXRlbToqYCBhbmRcbiAgICAgKiAgICAgICAgICBmdW5jdGlvbiBtdXN0IHJldHVybiBgdHJ1ZWAgaWYgaXQgd2FzIGFibGUgdG8gaGFuZGxlIHVwbG9hZCBvZiBpdGVtLlxuICAgICAqIEByZXR1cm4ge3RoaXN9IEluc3RhbmNlIG9mIHBsdWdpbiBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcmVnaXN0ZXJVcGxvYWRIb29rKHVwbG9hZEhvb2s6IElVcGxvYWRIb29rKTogdGhpc1xuICAgIHtcbiAgICAgICAgaWYgKHVwbG9hZEhvb2spXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSG9va3MucHVzaCh1cGxvYWRIb29rKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hbnVhbGx5IGFkZCBhbiBpdGVtIHRvIHRoZSB1cGxvYWRpbmcgcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdHxQSVhJLkNvbnRhaW5lcnxQSVhJLkJhc2VUZXh0dXJlfFBJWEkuVGV4dHVyZXxQSVhJLkdyYXBoaWNzfFBJWEkuVGV4dHwqfSBpdGVtIC0gT2JqZWN0IHRvXG4gICAgICogICAgICAgIGFkZCB0byB0aGUgcXVldWVcbiAgICAgKiBAcmV0dXJuIHt0aGlzfSBJbnN0YW5jZSBvZiBwbHVnaW4gZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIGFkZChpdGVtOiBJRGlzcGxheU9iamVjdEV4dGVuZGVkIHwgSVVwbG9hZEhvb2sgfCBJRmluZEhvb2spOiB0aGlzXG4gICAge1xuICAgICAgICAvLyBBZGQgYWRkaXRpb25hbCBob29rcyBmb3IgZmluZGluZyBlbGVtZW50cyBvbiBzcGVjaWFsXG4gICAgICAgIC8vIHR5cGVzIG9mIG9iamVjdHMgdGhhdFxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5hZGRIb29rcy5sZW5ndGg7IGkgPCBsZW47IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWRkSG9va3NbaV0oaXRlbSwgdGhpcy5xdWV1ZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgY2hpbGRyZW4gcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBDb250YWluZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBpdGVtLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGl0ZW0uY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIHBsdWdpbiwgZG9uJ3QgdXNlIGFmdGVyIHRoaXMuXG4gICAgICpcbiAgICAgKi9cbiAgICBkZXN0cm95KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnRpY2tpbmcpXG4gICAgICAgIHtcbiAgICAgICAgICAgIFRpY2tlci5zeXN0ZW0ucmVtb3ZlKHRoaXMudGljaywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aWNraW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWRkSG9va3MgPSBudWxsO1xuICAgICAgICB0aGlzLnVwbG9hZEhvb2tzID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XG4gICAgICAgIHRoaXMuY29tcGxldGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMubGltaXRlciA9IG51bGw7XG4gICAgICAgIHRoaXMudXBsb2FkSG9va0hlbHBlciA9IG51bGw7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEJhc2VUZXh0dXJlIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBHcmFwaGljcyB9IGZyb20gJ0BwaXhpL2dyYXBoaWNzJztcbmltcG9ydCB7IEJhc2VQcmVwYXJlLCBJRGlzcGxheU9iamVjdEV4dGVuZGVkIH0gZnJvbSAnLi9CYXNlUHJlcGFyZSc7XG5cbmltcG9ydCB0eXBlIHsgQWJzdHJhY3RSZW5kZXJlciwgUmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcblxuLyoqXG4gKiBCdWlsdC1pbiBob29rIHRvIHVwbG9hZCBQSVhJLlRleHR1cmUgb2JqZWN0cyB0byB0aGUgR1BVLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gaW5zdGFuY2Ugb2YgdGhlIHdlYmdsIHJlbmRlcmVyXG4gKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGl0ZW0gLSBJdGVtIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtib29sZWFufSBJZiBpdGVtIHdhcyB1cGxvYWRlZC5cbiAqL1xuZnVuY3Rpb24gdXBsb2FkQmFzZVRleHR1cmVzKHJlbmRlcmVyOiBBYnN0cmFjdFJlbmRlcmVyIHwgQmFzZVByZXBhcmUsIGl0ZW06IElEaXNwbGF5T2JqZWN0RXh0ZW5kZWQgfCBCYXNlVGV4dHVyZSk6IGJvb2xlYW5cbntcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEJhc2VUZXh0dXJlKVxuICAgIHtcbiAgICAgICAgLy8gaWYgdGhlIHRleHR1cmUgYWxyZWFkeSBoYXMgYSBHTCB0ZXh0dXJlLCB0aGVuIHRoZSB0ZXh0dXJlIGhhcyBiZWVuIHByZXBhcmVkIG9yIHJlbmRlcmVkXG4gICAgICAgIC8vIGJlZm9yZSBub3cuIElmIHRoZSB0ZXh0dXJlIGNoYW5nZWQsIHRoZW4gdGhlIGNoYW5nZXIgc2hvdWxkIGJlIGNhbGxpbmcgdGV4dHVyZS51cGRhdGUoKSB3aGljaFxuICAgICAgICAvLyByZXVwbG9hZHMgdGhlIHRleHR1cmUgd2l0aG91dCBuZWVkIGZvciBwcmVwYXJpbmcgaXQgYWdhaW5cbiAgICAgICAgaWYgKCFpdGVtLl9nbFRleHR1cmVzWyhyZW5kZXJlciBhcyBSZW5kZXJlcikuQ09OVEVYVF9VSURdKVxuICAgICAgICB7XG4gICAgICAgICAgICAocmVuZGVyZXIgYXMgUmVuZGVyZXIpLnRleHR1cmUuYmluZChpdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBCdWlsdC1pbiBob29rIHRvIHVwbG9hZCBQSVhJLkdyYXBoaWNzIHRvIHRoZSBHUFUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBpbnN0YW5jZSBvZiB0aGUgd2ViZ2wgcmVuZGVyZXJcbiAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBpdGVtIC0gSXRlbSB0byBjaGVja1xuICogQHJldHVybiB7Ym9vbGVhbn0gSWYgaXRlbSB3YXMgdXBsb2FkZWQuXG4gKi9cbmZ1bmN0aW9uIHVwbG9hZEdyYXBoaWNzKHJlbmRlcmVyOiBBYnN0cmFjdFJlbmRlcmVyIHwgQmFzZVByZXBhcmUsIGl0ZW06IElEaXNwbGF5T2JqZWN0RXh0ZW5kZWQpOiBib29sZWFuXG57XG4gICAgaWYgKCEoaXRlbSBpbnN0YW5jZW9mIEdyYXBoaWNzKSlcbiAgICB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGdlb21ldHJ5IH0gPSBpdGVtO1xuXG4gICAgLy8gdXBkYXRlIGRpcnR5IGdyYXBoaWNzIHRvIGdldCBiYXRjaGVzXG4gICAgaXRlbS5maW5pc2hQb2x5KCk7XG4gICAgZ2VvbWV0cnkudXBkYXRlQmF0Y2hlcygpO1xuXG4gICAgY29uc3QgeyBiYXRjaGVzIH0gPSBnZW9tZXRyeTtcblxuICAgIC8vIHVwbG9hZCBhbGwgdGV4dHVyZXMgZm91bmQgaW4gc3R5bGVzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXRjaGVzLmxlbmd0aDsgaSsrKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB0ZXh0dXJlIH0gPSBiYXRjaGVzW2ldLnN0eWxlO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICB1cGxvYWRCYXNlVGV4dHVyZXMocmVuZGVyZXIsIHRleHR1cmUuYmFzZVRleHR1cmUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gaWYgaXRzIG5vdCBiYXRjaGFibGUgLSB1cGRhdGUgdmFvIGZvciBwYXJ0aWN1bGFyIHNoYWRlclxuICAgIGlmICghZ2VvbWV0cnkuYmF0Y2hhYmxlKVxuICAgIHtcbiAgICAgICAgKHJlbmRlcmVyIGFzIFJlbmRlcmVyKS5nZW9tZXRyeS5iaW5kKGdlb21ldHJ5LCAoaXRlbSBhcyBhbnkpLl9yZXNvbHZlRGlyZWN0U2hhZGVyKChyZW5kZXJlciBhcyBSZW5kZXJlcikpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBCdWlsdC1pbiBob29rIHRvIGZpbmQgZ3JhcGhpY3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBpdGVtIC0gRGlzcGxheSBvYmplY3QgdG8gY2hlY2tcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IHF1ZXVlIC0gQ29sbGVjdGlvbiBvZiBpdGVtcyB0byB1cGxvYWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGlmIGEgUElYSS5HcmFwaGljcyBvYmplY3Qgd2FzIGZvdW5kLlxuICovXG5mdW5jdGlvbiBmaW5kR3JhcGhpY3MoaXRlbTogSURpc3BsYXlPYmplY3RFeHRlbmRlZCwgcXVldWU6IEFycmF5PGFueT4pOiBib29sZWFuXG57XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBHcmFwaGljcylcbiAgICB7XG4gICAgICAgIHF1ZXVlLnB1c2goaXRlbSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFRoZSBwcmVwYXJlIHBsdWdpbiBwcm92aWRlcyByZW5kZXJlci1zcGVjaWZpYyBwbHVnaW5zIGZvciBwcmUtcmVuZGVyaW5nIERpc3BsYXlPYmplY3RzLiBUaGVzZSBwbHVnaW5zIGFyZSB1c2VmdWwgZm9yXG4gKiBhc3luY2hyb25vdXNseSBwcmVwYXJpbmcgYW5kIHVwbG9hZGluZyB0byB0aGUgR1BVIGFzc2V0cywgdGV4dHVyZXMsIGdyYXBoaWNzIHdhaXRpbmcgdG8gYmUgZGlzcGxheWVkLlxuICpcbiAqIERvIG5vdCBpbnN0YW50aWF0ZSB0aGlzIHBsdWdpbiBkaXJlY3RseS4gSXQgaXMgYXZhaWxhYmxlIGZyb20gdGhlIGByZW5kZXJlci5wbHVnaW5zYCBwcm9wZXJ0eS5cbiAqIFNlZSB7QGxpbmsgUElYSS5DYW52YXNSZW5kZXJlciNwbHVnaW5zfSBvciB7QGxpbmsgUElYSS5SZW5kZXJlciNwbHVnaW5zfS5cbiAqIEBleGFtcGxlXG4gKiAvLyBDcmVhdGUgYSBuZXcgYXBwbGljYXRpb25cbiAqIGNvbnN0IGFwcCA9IG5ldyBQSVhJLkFwcGxpY2F0aW9uKCk7XG4gKiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFwcC52aWV3KTtcbiAqXG4gKiAvLyBEb24ndCBzdGFydCByZW5kZXJpbmcgcmlnaHQgYXdheVxuICogYXBwLnN0b3AoKTtcbiAqXG4gKiAvLyBjcmVhdGUgYSBkaXNwbGF5IG9iamVjdFxuICogY29uc3QgcmVjdCA9IG5ldyBQSVhJLkdyYXBoaWNzKClcbiAqICAgICAuYmVnaW5GaWxsKDB4MDBmZjAwKVxuICogICAgIC5kcmF3UmVjdCg0MCwgNDAsIDIwMCwgMjAwKTtcbiAqXG4gKiAvLyBBZGQgdG8gdGhlIHN0YWdlXG4gKiBhcHAuc3RhZ2UuYWRkQ2hpbGQocmVjdCk7XG4gKlxuICogLy8gRG9uJ3Qgc3RhcnQgcmVuZGVyaW5nIHVudGlsIHRoZSBncmFwaGljIGlzIHVwbG9hZGVkIHRvIHRoZSBHUFVcbiAqIGFwcC5yZW5kZXJlci5wbHVnaW5zLnByZXBhcmUudXBsb2FkKGFwcC5zdGFnZSwgKCkgPT4ge1xuICogICAgIGFwcC5zdGFydCgpO1xuICogfSk7XG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLkJhc2VQcmVwYXJlXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgUHJlcGFyZSBleHRlbmRzIEJhc2VQcmVwYXJlXG57XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHJlbmRlcmVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgIHtcbiAgICAgICAgc3VwZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMudXBsb2FkSG9va0hlbHBlciA9IHRoaXMucmVuZGVyZXI7XG5cbiAgICAgICAgLy8gQWRkIHRleHR1cmVzIGFuZCBncmFwaGljcyB0byB1cGxvYWRcbiAgICAgICAgdGhpcy5yZWdpc3RlckZpbmRIb29rKGZpbmRHcmFwaGljcyk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJVcGxvYWRIb29rKHVwbG9hZEJhc2VUZXh0dXJlcyk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJVcGxvYWRIb29rKHVwbG9hZEdyYXBoaWNzKTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBUaW1lTGltaXRlciBsaW1pdHMgdGhlIG51bWJlciBvZiBpdGVtcyBoYW5kbGVkIGJ5IGEge0BsaW5rIFBJWEkuQmFzZVByZXBhcmV9IHRvIGEgc3BlY2lmaWVkXG4gKiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHBlciBmcmFtZS5cbiAqXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBUaW1lTGltaXRlclxue1xuICAgIHB1YmxpYyBtYXhNaWxsaXNlY29uZHM6IG51bWJlcjtcbiAgICBwdWJsaWMgZnJhbWVTdGFydDogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhNaWxsaXNlY29uZHMgLSBUaGUgbWF4aW11bSBtaWxsaXNlY29uZHMgdGhhdCBjYW4gYmUgc3BlbnQgcHJlcGFyaW5nIGl0ZW1zIGVhY2ggZnJhbWUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobWF4TWlsbGlzZWNvbmRzOiBudW1iZXIpXG4gICAge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRoYXQgY2FuIGJlIHNwZW50IHByZXBhcmluZyBpdGVtcyBlYWNoIGZyYW1lLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhNaWxsaXNlY29uZHMgPSBtYXhNaWxsaXNlY29uZHM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc3RhcnQgdGltZSBvZiB0aGUgY3VycmVudCBmcmFtZS5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZnJhbWVTdGFydCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIGFueSBjb3VudGluZyBwcm9wZXJ0aWVzIHRvIHN0YXJ0IGZyZXNoIG9uIGEgbmV3IGZyYW1lLlxuICAgICAqL1xuICAgIGJlZ2luRnJhbWUoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5mcmFtZVN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIGFub3RoZXIgaXRlbSBjYW4gYmUgdXBsb2FkZWQuIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UgcGVyIGl0ZW0uXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGl0ZW0gaXMgYWxsb3dlZCB0byBiZSB1cGxvYWRlZC5cbiAgICAgKi9cbiAgICBhbGxvd2VkVG9VcGxvYWQoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIERhdGUubm93KCkgLSB0aGlzLmZyYW1lU3RhcnQgPCB0aGlzLm1heE1pbGxpc2Vjb25kcztcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgeyBUZXh0dXJlLCBCYXNlVGV4dHVyZSB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHsgZ2V0UmVzb2x1dGlvbk9mVXJsIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBEaWN0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyByZXNvdXJjZXMgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgSVBvaW50RGF0YSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIEpTT04gZGF0YSBmb3IgYSBzcHJpdGVzaGVldCBhdGxhcy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJU3ByaXRlc2hlZXRGcmFtZURhdGEge1xuICAgIGZyYW1lOiB7XG4gICAgICAgIHg6IG51bWJlcjtcbiAgICAgICAgeTogbnVtYmVyO1xuICAgICAgICB3OiBudW1iZXI7XG4gICAgICAgIGg6IG51bWJlcjtcbiAgICB9O1xuICAgIHRyaW1tZWQ/OiBib29sZWFuO1xuICAgIHJvdGF0ZWQ/OiBib29sZWFuO1xuICAgIHNvdXJjZVNpemU/OiB7XG4gICAgICAgIHc6IG51bWJlcjtcbiAgICAgICAgaDogbnVtYmVyO1xuICAgIH07XG4gICAgc3ByaXRlU291cmNlU2l6ZT86IHtcbiAgICAgICAgeDogbnVtYmVyO1xuICAgICAgICB5OiBudW1iZXI7XG4gICAgfTtcbiAgICBhbmNob3I/OiBJUG9pbnREYXRhO1xufVxuXG4vKipcbiAqIEF0bGFzIGZvcm1hdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJU3ByaXRlc2hlZXREYXRhIHtcbiAgICBmcmFtZXM6IERpY3Q8SVNwcml0ZXNoZWV0RnJhbWVEYXRhPjtcbiAgICBhbmltYXRpb25zPzogRGljdDxzdHJpbmdbXT47XG4gICAgbWV0YToge1xuICAgICAgICBzY2FsZTogc3RyaW5nO1xuICAgIH07XG59XG5cbi8qKlxuICogVXRpbGl0eSBjbGFzcyBmb3IgbWFpbnRhaW5pbmcgcmVmZXJlbmNlIHRvIGEgY29sbGVjdGlvblxuICogb2YgVGV4dHVyZXMgb24gYSBzaW5nbGUgU3ByaXRlc2hlZXQuXG4gKlxuICogVG8gYWNjZXNzIGEgc3ByaXRlIHNoZWV0IGZyb20geW91ciBjb2RlIHBhc3MgaXRzIEpTT04gZGF0YSBmaWxlIHRvIFBpeGkncyBsb2FkZXI6XG4gKlxuICogYGBganNcbiAqIFBJWEkuTG9hZGVyLnNoYXJlZC5hZGQoXCJpbWFnZXMvc3ByaXRlc2hlZXQuanNvblwiKS5sb2FkKHNldHVwKTtcbiAqXG4gKiBmdW5jdGlvbiBzZXR1cCgpIHtcbiAqICAgbGV0IHNoZWV0ID0gUElYSS5Mb2FkZXIuc2hhcmVkLnJlc291cmNlc1tcImltYWdlcy9zcHJpdGVzaGVldC5qc29uXCJdLnNwcml0ZXNoZWV0O1xuICogICAuLi5cbiAqIH1cbiAqIGBgYFxuICogV2l0aCB0aGUgYHNoZWV0LnRleHR1cmVzYCB5b3UgY2FuIGNyZWF0ZSBTcHJpdGUgb2JqZWN0cyxgc2hlZXQuYW5pbWF0aW9uc2AgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGFuIEFuaW1hdGVkU3ByaXRlLlxuICpcbiAqIFNwcml0ZSBzaGVldHMgY2FuIGJlIHBhY2tlZCB1c2luZyB0b29scyBsaWtlIHtAbGluayBodHRwczovL2NvZGVhbmR3ZWIuY29tL3RleHR1cmVwYWNrZXJ8VGV4dHVyZVBhY2tlcn0sXG4gKiB7QGxpbmsgaHR0cHM6Ly9yZW5kZXJoanMubmV0L3Nob2Vib3gvfFNob2Vib3h9IG9yIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20va3J6eXN6dG9mLW8vc3ByaXRlc2hlZXQuanN8U3ByaXRlc2hlZXQuanN9LlxuICogRGVmYXVsdCBhbmNob3IgcG9pbnRzIChzZWUge0BsaW5rIFBJWEkuVGV4dHVyZSNkZWZhdWx0QW5jaG9yfSkgYW5kIGdyb3VwaW5nIG9mIGFuaW1hdGlvbiBzcHJpdGVzIGFyZSBjdXJyZW50bHkgb25seVxuICogc3VwcG9ydGVkIGJ5IFRleHR1cmVQYWNrZXIuXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgU3ByaXRlc2hlZXRcbntcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgVGV4dHVyZXMgdG8gYnVpbGQgcGVyIHByb2Nlc3MuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDEwMDBcbiAgICAgKi9cbiAgICBzdGF0aWMgcmVhZG9ubHkgQkFUQ0hfU0laRSA9IDEwMDA7XG5cbiAgICBwdWJsaWMgYmFzZVRleHR1cmU6IEJhc2VUZXh0dXJlO1xuICAgIHB1YmxpYyB0ZXh0dXJlczogRGljdDxUZXh0dXJlPjtcbiAgICBwdWJsaWMgYW5pbWF0aW9uczogRGljdDxUZXh0dXJlW10+O1xuICAgIHB1YmxpYyBkYXRhOiBJU3ByaXRlc2hlZXREYXRhO1xuICAgIHB1YmxpYyByZXNvbHV0aW9uOiBudW1iZXI7XG5cbiAgICBwcml2YXRlIF90ZXh0dXJlOiBUZXh0dXJlO1xuICAgIHByaXZhdGUgX2ZyYW1lczogRGljdDxJU3ByaXRlc2hlZXRGcmFtZURhdGE+O1xuICAgIHByaXZhdGUgX2ZyYW1lS2V5czogc3RyaW5nW107XG4gICAgcHJpdmF0ZSBfYmF0Y2hJbmRleDogbnVtYmVyO1xuICAgIHByaXZhdGUgX2NhbGxiYWNrOiAodGV4dHVyZXM6IERpY3Q8VGV4dHVyZT4pID0+IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV8UElYSS5UZXh0dXJlfSBiYXNlVGV4dHVyZSAtIFJlZmVyZW5jZSB0byB0aGUgc291cmNlIEJhc2VUZXh0dXJlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAtIFNwcml0ZXNoZWV0IGltYWdlIGRhdGEuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNvbHV0aW9uRmlsZW5hbWVdIC0gVGhlIGZpbGVuYW1lIHRvIGNvbnNpZGVyIHdoZW4gZGV0ZXJtaW5pbmdcbiAgICAgKiAgICAgICAgdGhlIHJlc29sdXRpb24gb2YgdGhlIHNwcml0ZXNoZWV0LiBJZiBub3QgcHJvdmlkZWQsIHRoZSBpbWFnZVVybCB3aWxsXG4gICAgICogICAgICAgIGJlIHVzZWQgb24gdGhlIEJhc2VUZXh0dXJlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IEJhc2VUZXh0dXJlIHwgVGV4dHVyZSwgZGF0YTogSVNwcml0ZXNoZWV0RGF0YSwgcmVzb2x1dGlvbkZpbGVuYW1lOiBzdHJpbmcgPSBudWxsKVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZmVyZW5jZSB0byBvcmlnaW5hbCBzb3VyY2UgaW1hZ2UgZnJvbSB0aGUgTG9hZGVyLiBUaGlzIHJlZmVyZW5jZSBpcyByZXRhaW5lZCBzbyB3ZVxuICAgICAgICAgKiBjYW4gZGVzdHJveSB0aGUgVGV4dHVyZSBsYXRlciBvbi4gSXQgaXMgbmV2ZXIgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAgICAgKiBAdHlwZSB7UElYSS5UZXh0dXJlfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IHRleHR1cmUgaW5zdGFuY2VvZiBUZXh0dXJlID8gdGV4dHVyZSA6IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZmVyZW5jZSB0byB0aHMgc291cmNlIHRleHR1cmUuXG4gICAgICAgICAqIEB0eXBlIHtQSVhJLkJhc2VUZXh0dXJlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYXNlVGV4dHVyZSA9IHRleHR1cmUgaW5zdGFuY2VvZiBCYXNlVGV4dHVyZSA/IHRleHR1cmUgOiB0aGlzLl90ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcCBjb250YWluaW5nIGFsbCB0ZXh0dXJlcyBvZiB0aGUgc3ByaXRlIHNoZWV0LlxuICAgICAgICAgKiBDYW4gYmUgdXNlZCB0byBjcmVhdGUgYSB7QGxpbmsgUElYSS5TcHJpdGV8U3ByaXRlfTpcbiAgICAgICAgICogYGBganNcbiAgICAgICAgICogbmV3IFBJWEkuU3ByaXRlKHNoZWV0LnRleHR1cmVzW1wiaW1hZ2UucG5nXCJdKTtcbiAgICAgICAgICogYGBgXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGV4dHVyZXMgPSB7fTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXAgY29udGFpbmluZyB0aGUgdGV4dHVyZXMgZm9yIGVhY2ggYW5pbWF0aW9uLlxuICAgICAgICAgKiBDYW4gYmUgdXNlZCB0byBjcmVhdGUgYW4ge0BsaW5rIFBJWEkuQW5pbWF0ZWRTcHJpdGV8QW5pbWF0ZWRTcHJpdGV9OlxuICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgKiBuZXcgUElYSS5BbmltYXRlZFNwcml0ZShzaGVldC5hbmltYXRpb25zW1wiYW5pbV9uYW1lXCJdKVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbmltYXRpb25zID0ge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZmVyZW5jZSB0byB0aGUgb3JpZ2luYWwgSlNPTiBkYXRhLlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcblxuICAgICAgICBjb25zdCByZXNvdXJjZSA9IHRoaXMuYmFzZVRleHR1cmUucmVzb3VyY2UgYXMgcmVzb3VyY2VzLkltYWdlUmVzb3VyY2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZXNvbHV0aW9uIG9mIHRoZSBzcHJpdGVzaGVldC5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IHRoaXMuX3VwZGF0ZVJlc29sdXRpb24ocmVzb2x1dGlvbkZpbGVuYW1lIHx8IChyZXNvdXJjZSA/IHJlc291cmNlLnVybCA6IG51bGwpKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwIG9mIHNwcml0ZXNoZWV0IGZyYW1lcy5cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2ZyYW1lcyA9IHRoaXMuZGF0YS5mcmFtZXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbGxlY3Rpb24gb2YgZnJhbWUgbmFtZXMuXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmdbXX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2ZyYW1lS2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX2ZyYW1lcyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1cnJlbnQgYmF0Y2ggaW5kZXggYmVpbmcgcHJvY2Vzc2VkLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYmF0Y2hJbmRleCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxiYWNrIHdoZW4gcGFyc2UgaXMgY29tcGxldGVkLlxuICAgICAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9jYWxsYmFjayA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgdGhlIHJlc29sdXRpb24gZnJvbSB0aGUgZmlsZW5hbWUgb3IgZmFsbGJhY2tcbiAgICAgKiB0byB0aGUgbWV0YS5zY2FsZSBmaWVsZCBvZiB0aGUgSlNPTiBkYXRhLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzb2x1dGlvbkZpbGVuYW1lIC0gVGhlIGZpbGVuYW1lIHRvIHVzZSBmb3IgcmVzb2x2aW5nXG4gICAgICogICAgICAgIHRoZSBkZWZhdWx0IHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uIHRvIHVzZSBmb3Igc3ByaXRlc2hlZXQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfdXBkYXRlUmVzb2x1dGlvbihyZXNvbHV0aW9uRmlsZW5hbWU6IHN0cmluZyA9IG51bGwpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgc2NhbGUgfSA9IHRoaXMuZGF0YS5tZXRhO1xuXG4gICAgICAgIC8vIFVzZSBhIGRlZmF1bHRWYWx1ZSBvZiBgbnVsbGAgdG8gY2hlY2sgaWYgYSB1cmwtYmFzZWQgcmVzb2x1dGlvbiBpcyBzZXRcbiAgICAgICAgbGV0IHJlc29sdXRpb24gPSBnZXRSZXNvbHV0aW9uT2ZVcmwocmVzb2x1dGlvbkZpbGVuYW1lLCBudWxsKTtcblxuICAgICAgICAvLyBObyByZXNvbHV0aW9uIGZvdW5kIHZpYSBVUkxcbiAgICAgICAgaWYgKHJlc29sdXRpb24gPT09IG51bGwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgc2NhbGUgdmFsdWUgb3IgZGVmYXVsdCB0byAxXG4gICAgICAgICAgICByZXNvbHV0aW9uID0gc2NhbGUgIT09IHVuZGVmaW5lZCA/IHBhcnNlRmxvYXQoc2NhbGUpIDogMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvciBub24tMSByZXNvbHV0aW9ucywgdXBkYXRlIGJhc2VUZXh0dXJlXG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSAxKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmJhc2VUZXh0dXJlLnNldFJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzb2x1dGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXIgc3ByaXRlc2hlZXQgZnJvbSBsb2FkZWQgZGF0YS4gVGhpcyBpcyBkb25lIGFzeW5jaHJvbm91c2x5XG4gICAgICogdG8gcHJldmVudCBjcmVhdGluZyB0b28gbWFueSBUZXh0dXJlIHdpdGhpbiBhIHNpbmdsZSBwcm9jZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayB3aGVuIGNvbXBsZXRlIHJldHVybnNcbiAgICAgKiAgICAgICAgYSBtYXAgb2YgdGhlIFRleHR1cmVzIGZvciB0aGlzIHNwcml0ZXNoZWV0LlxuICAgICAqL1xuICAgIHB1YmxpYyBwYXJzZShjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX2JhdGNoSW5kZXggPSAwO1xuICAgICAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuXG4gICAgICAgIGlmICh0aGlzLl9mcmFtZUtleXMubGVuZ3RoIDw9IFNwcml0ZXNoZWV0LkJBVENIX1NJWkUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NGcmFtZXMoMCk7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy5fcGFyc2VDb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fbmV4dEJhdGNoKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGEgYmF0Y2ggb2YgZnJhbWVzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbml0aWFsRnJhbWVJbmRleCAtIFRoZSBpbmRleCBvZiBmcmFtZSB0byBzdGFydC5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9wcm9jZXNzRnJhbWVzKGluaXRpYWxGcmFtZUluZGV4OiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBsZXQgZnJhbWVJbmRleCA9IGluaXRpYWxGcmFtZUluZGV4O1xuICAgICAgICBjb25zdCBtYXhGcmFtZXMgPSBTcHJpdGVzaGVldC5CQVRDSF9TSVpFO1xuXG4gICAgICAgIHdoaWxlIChmcmFtZUluZGV4IC0gaW5pdGlhbEZyYW1lSW5kZXggPCBtYXhGcmFtZXMgJiYgZnJhbWVJbmRleCA8IHRoaXMuX2ZyYW1lS2V5cy5sZW5ndGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLl9mcmFtZUtleXNbZnJhbWVJbmRleF07XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5fZnJhbWVzW2ldO1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IGRhdGEuZnJhbWU7XG5cbiAgICAgICAgICAgIGlmIChyZWN0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCBmcmFtZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgbGV0IHRyaW0gPSBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVNpemUgPSBkYXRhLnRyaW1tZWQgIT09IGZhbHNlICYmIGRhdGEuc291cmNlU2l6ZVxuICAgICAgICAgICAgICAgICAgICA/IGRhdGEuc291cmNlU2l6ZSA6IGRhdGEuZnJhbWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBvcmlnID0gbmV3IFJlY3RhbmdsZShcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihzb3VyY2VTaXplLncpIC8gdGhpcy5yZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKHNvdXJjZVNpemUuaCkgLyB0aGlzLnJlc29sdXRpb25cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEucm90YXRlZClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGZyYW1lID0gbmV3IFJlY3RhbmdsZShcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC54KSAvIHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC55KSAvIHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC5oKSAvIHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC53KSAvIHRoaXMucmVzb2x1dGlvblxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBmcmFtZSA9IG5ldyBSZWN0YW5nbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKHJlY3QueCkgLyB0aGlzLnJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKHJlY3QueSkgLyB0aGlzLnJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKHJlY3QudykgLyB0aGlzLnJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKHJlY3QuaCkgLyB0aGlzLnJlc29sdXRpb25cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyAgQ2hlY2sgdG8gc2VlIGlmIHRoZSBzcHJpdGUgaXMgdHJpbW1lZFxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnRyaW1tZWQgIT09IGZhbHNlICYmIGRhdGEuc3ByaXRlU291cmNlU2l6ZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRyaW0gPSBuZXcgUmVjdGFuZ2xlKFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihkYXRhLnNwcml0ZVNvdXJjZVNpemUueCkgLyB0aGlzLnJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKGRhdGEuc3ByaXRlU291cmNlU2l6ZS55KSAvIHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC53KSAvIHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC5oKSAvIHRoaXMucmVzb2x1dGlvblxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZXNbaV0gPSBuZXcgVGV4dHVyZShcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYXNlVGV4dHVyZSxcbiAgICAgICAgICAgICAgICAgICAgZnJhbWUsXG4gICAgICAgICAgICAgICAgICAgIG9yaWcsXG4gICAgICAgICAgICAgICAgICAgIHRyaW0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGEucm90YXRlZCA/IDIgOiAwLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmFuY2hvclxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBsZXRzIGFsc28gYWRkIHRoZSBmcmFtZSB0byBwaXhpJ3MgZ2xvYmFsIGNhY2hlIGZvciAnZnJvbScgYW5kICdmcm9tTG9hZGVyJyBmdW5jdGlvbnNcbiAgICAgICAgICAgICAgICBUZXh0dXJlLmFkZFRvQ2FjaGUodGhpcy50ZXh0dXJlc1tpXSwgaSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZyYW1lSW5kZXgrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlIGFuaW1hdGlvbnMgY29uZmlnXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgX3Byb2Nlc3NBbmltYXRpb25zKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbnMgPSB0aGlzLmRhdGEuYW5pbWF0aW9ucyB8fCB7fTtcblxuICAgICAgICBmb3IgKGNvbnN0IGFuaW1OYW1lIGluIGFuaW1hdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc1thbmltTmFtZV0gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5pbWF0aW9uc1thbmltTmFtZV0ubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgZnJhbWVOYW1lID0gYW5pbWF0aW9uc1thbmltTmFtZV1baV07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNbYW5pbU5hbWVdLnB1c2godGhpcy50ZXh0dXJlc1tmcmFtZU5hbWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBwYXJzZSBoYXMgY29tcGxldGVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIF9wYXJzZUNvbXBsZXRlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2s7XG5cbiAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBudWxsO1xuICAgICAgICB0aGlzLl9iYXRjaEluZGV4ID0gMDtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCB0aGlzLnRleHR1cmVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCZWdpbiB0aGUgbmV4dCBiYXRjaCBvZiB0ZXh0dXJlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBfbmV4dEJhdGNoKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NGcmFtZXModGhpcy5fYmF0Y2hJbmRleCAqIFNwcml0ZXNoZWV0LkJBVENIX1NJWkUpO1xuICAgICAgICB0aGlzLl9iYXRjaEluZGV4Kys7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2JhdGNoSW5kZXggKiBTcHJpdGVzaGVldC5CQVRDSF9TSVpFIDwgdGhpcy5fZnJhbWVLZXlzLmxlbmd0aClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9uZXh0QmF0Y2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcnNlQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveSBTcHJpdGVzaGVldCBhbmQgZG9uJ3QgdXNlIGFmdGVyIHRoaXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtkZXN0cm95QmFzZT1mYWxzZV0gLSBXaGV0aGVyIHRvIGRlc3Ryb3kgdGhlIGJhc2UgdGV4dHVyZSBhcyB3ZWxsXG4gICAgICovXG4gICAgcHVibGljIGRlc3Ryb3koZGVzdHJveUJhc2UgPSBmYWxzZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGZvciAoY29uc3QgaSBpbiB0aGlzLnRleHR1cmVzKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmVzW2ldLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9mcmFtZXMgPSBudWxsO1xuICAgICAgICB0aGlzLl9mcmFtZUtleXMgPSBudWxsO1xuICAgICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLnRleHR1cmVzID0gbnVsbDtcbiAgICAgICAgaWYgKGRlc3Ryb3lCYXNlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlPy5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmJhc2VUZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90ZXh0dXJlID0gbnVsbDtcbiAgICAgICAgdGhpcy5iYXNlVGV4dHVyZSA9IG51bGw7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IHVybCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB7IFNwcml0ZXNoZWV0IH0gZnJvbSAnLi9TcHJpdGVzaGVldCc7XG5pbXBvcnQgeyBMb2FkZXJSZXNvdXJjZSB9IGZyb20gJ0BwaXhpL2xvYWRlcnMnO1xuaW1wb3J0IHR5cGUgeyBMb2FkZXIsIElMb2FkZXJSZXNvdXJjZSB9IGZyb20gJ0BwaXhpL2xvYWRlcnMnO1xuXG4vKipcbiAqIHtAbGluayBQSVhJLkxvYWRlciBMb2FkZXJ9IG1pZGRsZXdhcmUgZm9yIGxvYWRpbmcgdGV4dHVyZSBhdGxhc2VzIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgd2l0aFxuICogVGV4dHVyZVBhY2tlciBvciBzaW1pbGFyIEpTT04tYmFzZWQgc3ByaXRlc2hlZXQuXG4gKlxuICogVGhpcyBtaWRkbGV3YXJlIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVzIFRleHR1cmUgcmVzb3VyY2VzLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqIEBpbXBsZW1lbnRzIFBJWEkuSUxvYWRlclBsdWdpblxuICovXG5leHBvcnQgY2xhc3MgU3ByaXRlc2hlZXRMb2FkZXJcbntcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYWZ0ZXIgYSByZXNvdXJjZSBpcyBsb2FkZWQuXG4gICAgICogQHNlZSBQSVhJLkxvYWRlci5sb2FkZXJNaWRkbGV3YXJlXG4gICAgICogQHBhcmFtIHtQSVhJLkxvYWRlclJlc291cmNlfSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG5leHRcbiAgICAgKi9cbiAgICBzdGF0aWMgdXNlKHJlc291cmNlOiBJTG9hZGVyUmVzb3VyY2UsIG5leHQ6ICguLi5hcmdzOiB1bmtub3duW10pID0+IHZvaWQpOiB2b2lkXG4gICAge1xuICAgICAgICAvLyBiZWNhdXNlIHRoaXMgaXMgbWlkZGxld2FyZSwgaXQgZXhlY3V0ZSBpbiBsb2FkZXIgY29udGV4dC4gYHRoaXNgID0gbG9hZGVyXG4gICAgICAgIGNvbnN0IGxvYWRlciA9ICh0aGlzIGFzIGFueSkgYXMgTG9hZGVyO1xuICAgICAgICBjb25zdCBpbWFnZVJlc291cmNlTmFtZSA9IGAke3Jlc291cmNlLm5hbWV9X2ltYWdlYDtcblxuICAgICAgICAvLyBza2lwIGlmIG5vIGRhdGEsIGl0cyBub3QganNvbiwgaXQgaXNuJ3Qgc3ByaXRlc2hlZXQgZGF0YSwgb3IgdGhlIGltYWdlIHJlc291cmNlIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGlmICghcmVzb3VyY2UuZGF0YVxuICAgICAgICAgICAgfHwgcmVzb3VyY2UudHlwZSAhPT0gTG9hZGVyUmVzb3VyY2UuVFlQRS5KU09OXG4gICAgICAgICAgICB8fCAhcmVzb3VyY2UuZGF0YS5mcmFtZXNcbiAgICAgICAgICAgIHx8IGxvYWRlci5yZXNvdXJjZXNbaW1hZ2VSZXNvdXJjZU5hbWVdXG4gICAgICAgIClcbiAgICAgICAge1xuICAgICAgICAgICAgbmV4dCgpO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2FkT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luOiByZXNvdXJjZS5jcm9zc09yaWdpbixcbiAgICAgICAgICAgIG1ldGFkYXRhOiByZXNvdXJjZS5tZXRhZGF0YS5pbWFnZU1ldGFkYXRhLFxuICAgICAgICAgICAgcGFyZW50UmVzb3VyY2U6IHJlc291cmNlLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc291cmNlUGF0aCA9IFNwcml0ZXNoZWV0TG9hZGVyLmdldFJlc291cmNlUGF0aChyZXNvdXJjZSwgbG9hZGVyLmJhc2VVcmwpO1xuXG4gICAgICAgIC8vIGxvYWQgdGhlIGltYWdlIGZvciB0aGlzIHNoZWV0XG4gICAgICAgIGxvYWRlci5hZGQoaW1hZ2VSZXNvdXJjZU5hbWUsIHJlc291cmNlUGF0aCwgbG9hZE9wdGlvbnMsIGZ1bmN0aW9uIG9uSW1hZ2VMb2FkKHJlczogSUxvYWRlclJlc291cmNlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAocmVzLmVycm9yKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5leHQocmVzLmVycm9yKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3ByaXRlc2hlZXQgPSBuZXcgU3ByaXRlc2hlZXQoXG4gICAgICAgICAgICAgICAgcmVzLnRleHR1cmUsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuZGF0YSxcbiAgICAgICAgICAgICAgICByZXNvdXJjZS51cmxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHNwcml0ZXNoZWV0LnBhcnNlKCgpID0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2Uuc3ByaXRlc2hlZXQgPSBzcHJpdGVzaGVldDtcbiAgICAgICAgICAgICAgICByZXNvdXJjZS50ZXh0dXJlcyA9IHNwcml0ZXNoZWV0LnRleHR1cmVzO1xuICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNwcml0ZXNoZWV0cyByb290IHBhdGhcbiAgICAgKiBAcGFyYW0ge1BJWEkuTG9hZGVyUmVzb3VyY2V9IHJlc291cmNlIC0gUmVzb3VyY2UgdG8gY2hlY2sgcGF0aFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVXJsIC0gQmFzZSByb290IHVybFxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRSZXNvdXJjZVBhdGgocmVzb3VyY2U6IElMb2FkZXJSZXNvdXJjZSwgYmFzZVVybDogc3RyaW5nKTogc3RyaW5nXG4gICAge1xuICAgICAgICAvLyBQcmVwZW5kIHVybCBwYXRoIHVubGVzcyB0aGUgcmVzb3VyY2UgaW1hZ2UgaXMgYSBkYXRhIHVybFxuICAgICAgICBpZiAocmVzb3VyY2UuaXNEYXRhVXJsKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZGF0YS5tZXRhLmltYWdlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVybC5yZXNvbHZlKHJlc291cmNlLnVybC5yZXBsYWNlKGJhc2VVcmwsICcnKSwgcmVzb3VyY2UuZGF0YS5tZXRhLmltYWdlKTtcbiAgICB9XG59XG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiaW1wb3J0IHsgVGV4dHVyZSwgVGV4dHVyZU1hdHJpeCB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHsgUG9pbnQsIFJlY3RhbmdsZSwgVHJhbnNmb3JtICB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnQHBpeGkvc3ByaXRlJztcbmltcG9ydCB7IGRlcHJlY2F0aW9uIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciwgSUJhc2VUZXh0dXJlT3B0aW9ucywgVGV4dHVyZVNvdXJjZSB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBJRGVzdHJveU9wdGlvbnMgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmltcG9ydCB0eXBlIHsgSVBvaW50LCBJUG9pbnREYXRhLCBJU2l6ZSwgT2JzZXJ2YWJsZVBvaW50IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbmNvbnN0IHRlbXBQb2ludCA9IG5ldyBQb2ludCgpO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWludGVyZmFjZVxuZXhwb3J0IGludGVyZmFjZSBUaWxpbmdTcHJpdGUgZXh0ZW5kcyBHbG9iYWxNaXhpbnMuVGlsaW5nU3ByaXRlIHt9XG5cbi8qKlxuICogQSB0aWxpbmcgc3ByaXRlIGlzIGEgZmFzdCB3YXkgb2YgcmVuZGVyaW5nIGEgdGlsaW5nIGltYWdlXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLlNwcml0ZVxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIFRpbGluZ1Nwcml0ZSBleHRlbmRzIFNwcml0ZVxue1xuICAgIHB1YmxpYyB0aWxlVHJhbnNmb3JtOiBUcmFuc2Zvcm07XG4gICAgcHVibGljIHV2TWF0cml4OiBUZXh0dXJlTWF0cml4O1xuICAgIHB1YmxpYyB1dlJlc3BlY3RBbmNob3I6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuVGV4dHVyZX0gdGV4dHVyZSAtIHRoZSB0ZXh0dXJlIG9mIHRoZSB0aWxpbmcgc3ByaXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt3aWR0aD0xMDBdIC0gdGhlIHdpZHRoIG9mIHRoZSB0aWxpbmcgc3ByaXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHQ9MTAwXSAtIHRoZSBoZWlnaHQgb2YgdGhlIHRpbGluZyBzcHJpdGVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0dXJlOiBUZXh0dXJlLCB3aWR0aCA9IDEwMCwgaGVpZ2h0ID0gMTAwKVxuICAgIHtcbiAgICAgICAgc3VwZXIodGV4dHVyZSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRpbGUgdHJhbnNmb3JtXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWxlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd2l0aCBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSB0aWxpbmcgc3ByaXRlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogbWF0cml4IHRoYXQgaXMgYXBwbGllZCB0byBVViB0byBnZXQgdGhlIGNvb3JkcyBpbiBUZXh0dXJlIG5vcm1hbGl6ZWQgc3BhY2UgdG8gY29vcmRzIGluIEJhc2VUZXh0dXJlIHNwYWNlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZU1hdHJpeH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXZNYXRyaXggPSB0aGlzLnRleHR1cmUudXZNYXRyaXggfHwgbmV3IFRleHR1cmVNYXRyaXgodGV4dHVyZSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBsdWdpbiB0aGF0IGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgdGhpcyBlbGVtZW50LlxuICAgICAgICAgKiBBbGxvd3MgdG8gY3VzdG9taXplIHRoZSByZW5kZXJpbmcgcHJvY2VzcyB3aXRob3V0IG92ZXJyaWRpbmcgJ19yZW5kZXInIG1ldGhvZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAndGlsaW5nU3ByaXRlJ1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wbHVnaW5OYW1lID0gJ3RpbGluZ1Nwcml0ZSc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgb3Igbm90IGFuY2hvciBhZmZlY3RzIHV2c1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51dlJlc3BlY3RBbmNob3IgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyBmcmFtZSBjbGFtcGluZyBpbiBjb3JyZXNwb25kaW5nIHRleHR1cmVUcmFuc2Zvcm0sIHNob3J0Y3V0XG4gICAgICogQ2hhbmdlIHRvIC0wLjUgdG8gYWRkIGEgcGl4ZWwgdG8gdGhlIGVkZ2UsIHJlY29tbWVuZGVkIGZvciB0cmFuc3BhcmVudCB0cmltbWVkIHRleHR1cmVzIGluIGF0bGFzXG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCAwLjVcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGNsYW1wTWFyZ2luKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXZNYXRyaXguY2xhbXBNYXJnaW47XG4gICAgfVxuXG4gICAgc2V0IGNsYW1wTWFyZ2luKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLnV2TWF0cml4LmNsYW1wTWFyZ2luID0gdmFsdWU7XG4gICAgICAgIHRoaXMudXZNYXRyaXgudXBkYXRlKHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBzY2FsaW5nIG9mIHRoZSBpbWFnZSB0aGF0IGlzIGJlaW5nIHRpbGVkXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtQSVhJLk9ic2VydmFibGVQb2ludH1cbiAgICAgKi9cbiAgICBnZXQgdGlsZVNjYWxlKCk6IE9ic2VydmFibGVQb2ludFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZVRyYW5zZm9ybS5zY2FsZTtcbiAgICB9XG5cbiAgICBzZXQgdGlsZVNjYWxlKHZhbHVlOiBPYnNlcnZhYmxlUG9pbnQpXG4gICAge1xuICAgICAgICB0aGlzLnRpbGVUcmFuc2Zvcm0uc2NhbGUuY29weUZyb20odmFsdWUgYXMgSVBvaW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb2Zmc2V0IG9mIHRoZSBpbWFnZSB0aGF0IGlzIGJlaW5nIHRpbGVkXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtQSVhJLk9ic2VydmFibGVQb2ludH1cbiAgICAgKi9cbiAgICBnZXQgdGlsZVBvc2l0aW9uKCk6IE9ic2VydmFibGVQb2ludFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZVRyYW5zZm9ybS5wb3NpdGlvbjtcbiAgICB9XG5cbiAgICBzZXQgdGlsZVBvc2l0aW9uKHZhbHVlOiBPYnNlcnZhYmxlUG9pbnQpXG4gICAge1xuICAgICAgICB0aGlzLnRpbGVUcmFuc2Zvcm0ucG9zaXRpb24uY29weUZyb20odmFsdWUgYXMgSVBvaW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9vblRleHR1cmVVcGRhdGUoKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMudXZNYXRyaXgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudXZNYXRyaXgudGV4dHVyZSA9IHRoaXMuX3RleHR1cmU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FjaGVkVGludCA9IDB4RkZGRkZGO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIG9iamVjdCB1c2luZyB0aGUgV2ViR0wgcmVuZGVyZXJcbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9yZW5kZXIocmVuZGVyZXI6IFJlbmRlcmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gdHdlYWsgb3VyIHRleHR1cmUgdGVtcG9yYXJpbHkuLlxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5fdGV4dHVyZTtcblxuICAgICAgICBpZiAoIXRleHR1cmUgfHwgIXRleHR1cmUudmFsaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGlsZVRyYW5zZm9ybS51cGRhdGVMb2NhbFRyYW5zZm9ybSgpO1xuICAgICAgICB0aGlzLnV2TWF0cml4LnVwZGF0ZSgpO1xuXG4gICAgICAgIHJlbmRlcmVyLmJhdGNoLnNldE9iamVjdFJlbmRlcmVyKHJlbmRlcmVyLnBsdWdpbnNbdGhpcy5wbHVnaW5OYW1lXSk7XG4gICAgICAgIHJlbmRlcmVyLnBsdWdpbnNbdGhpcy5wbHVnaW5OYW1lXS5yZW5kZXIodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgYm91bmRzIG9mIHRoZSB0aWxpbmcgc3ByaXRlLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBfY2FsY3VsYXRlQm91bmRzKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IG1pblggPSB0aGlzLl93aWR0aCAqIC10aGlzLl9hbmNob3IuX3g7XG4gICAgICAgIGNvbnN0IG1pblkgPSB0aGlzLl9oZWlnaHQgKiAtdGhpcy5fYW5jaG9yLl95O1xuICAgICAgICBjb25zdCBtYXhYID0gdGhpcy5fd2lkdGggKiAoMSAtIHRoaXMuX2FuY2hvci5feCk7XG4gICAgICAgIGNvbnN0IG1heFkgPSB0aGlzLl9oZWlnaHQgKiAoMSAtIHRoaXMuX2FuY2hvci5feSk7XG5cbiAgICAgICAgdGhpcy5fYm91bmRzLmFkZEZyYW1lKHRoaXMudHJhbnNmb3JtLCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCBib3VuZHMgb2YgdGhlIHNwcml0ZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVjdGFuZ2xlfSByZWN0IC0gVGhlIG91dHB1dCByZWN0YW5nbGUuXG4gICAgICogQHJldHVybiB7UElYSS5SZWN0YW5nbGV9IFRoZSBib3VuZHMuXG4gICAgICovXG4gICAgcHVibGljIGdldExvY2FsQm91bmRzKHJlY3Q6IFJlY3RhbmdsZSk6IFJlY3RhbmdsZVxuICAgIHtcbiAgICAgICAgLy8gd2UgY2FuIGRvIGEgZmFzdCBsb2NhbCBib3VuZHMgaWYgdGhlIHNwcml0ZSBoYXMgbm8gY2hpbGRyZW4hXG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fYm91bmRzLm1pblggPSB0aGlzLl93aWR0aCAqIC10aGlzLl9hbmNob3IuX3g7XG4gICAgICAgICAgICB0aGlzLl9ib3VuZHMubWluWSA9IHRoaXMuX2hlaWdodCAqIC10aGlzLl9hbmNob3IuX3k7XG4gICAgICAgICAgICB0aGlzLl9ib3VuZHMubWF4WCA9IHRoaXMuX3dpZHRoICogKDEgLSB0aGlzLl9hbmNob3IuX3gpO1xuICAgICAgICAgICAgdGhpcy5fYm91bmRzLm1heFkgPSB0aGlzLl9oZWlnaHQgKiAoMSAtIHRoaXMuX2FuY2hvci5feSk7XG5cbiAgICAgICAgICAgIGlmICghcmVjdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2xvY2FsQm91bmRzUmVjdClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvY2FsQm91bmRzUmVjdCA9IG5ldyBSZWN0YW5nbGUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZWN0ID0gdGhpcy5fbG9jYWxCb3VuZHNSZWN0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYm91bmRzLmdldFJlY3RhbmdsZShyZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdXBlci5nZXRMb2NhbEJvdW5kcy5jYWxsKHRoaXMsIHJlY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIHBvaW50IGlzIGluc2lkZSB0aGlzIHRpbGluZyBzcHJpdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcG9pbnQgLSB0aGUgcG9pbnQgdG8gY2hlY2tcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgc3ByaXRlIGNvbnRhaW5zIHRoZSBwb2ludC5cbiAgICAgKi9cbiAgICBwdWJsaWMgY29udGFpbnNQb2ludChwb2ludDogSVBvaW50RGF0YSk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKHBvaW50LCB0ZW1wUG9pbnQpO1xuXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fd2lkdGg7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuX2hlaWdodDtcbiAgICAgICAgY29uc3QgeDEgPSAtd2lkdGggKiB0aGlzLmFuY2hvci5feDtcblxuICAgICAgICBpZiAodGVtcFBvaW50LnggPj0geDEgJiYgdGVtcFBvaW50LnggPCB4MSArIHdpZHRoKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB5MSA9IC1oZWlnaHQgKiB0aGlzLmFuY2hvci5feTtcblxuICAgICAgICAgICAgaWYgKHRlbXBQb2ludC55ID49IHkxICYmIHRlbXBQb2ludC55IDwgeTEgKyBoZWlnaHQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhpcyBzcHJpdGUgYW5kIG9wdGlvbmFsbHkgaXRzIHRleHR1cmUgYW5kIGNoaWxkcmVuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdHxib29sZWFufSBbb3B0aW9uc10gLSBPcHRpb25zIHBhcmFtZXRlci4gQSBib29sZWFuIHdpbGwgYWN0IGFzIGlmIGFsbCBvcHRpb25zXG4gICAgICogIGhhdmUgYmVlbiBzZXQgdG8gdGhhdCB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2hpbGRyZW49ZmFsc2VdIC0gaWYgc2V0IHRvIHRydWUsIGFsbCB0aGUgY2hpbGRyZW4gd2lsbCBoYXZlIHRoZWlyIGRlc3Ryb3lcbiAgICAgKiAgICAgIG1ldGhvZCBjYWxsZWQgYXMgd2VsbC4gJ29wdGlvbnMnIHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRob3NlIGNhbGxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudGV4dHVyZT1mYWxzZV0gLSBTaG91bGQgaXQgZGVzdHJveSB0aGUgY3VycmVudCB0ZXh0dXJlIG9mIHRoZSBzcHJpdGUgYXMgd2VsbFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYmFzZVRleHR1cmU9ZmFsc2VdIC0gU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIGJhc2UgdGV4dHVyZSBvZiB0aGUgc3ByaXRlIGFzIHdlbGxcbiAgICAgKi9cbiAgICBwdWJsaWMgZGVzdHJveShvcHRpb25zOiBJRGVzdHJveU9wdGlvbnN8Ym9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3kob3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy50aWxlVHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgdGhpcy51dk1hdHJpeCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIG5ldyB0aWxpbmcgc3ByaXRlIGJhc2VkIG9uIHRoZSBzb3VyY2UgeW91IHByb3ZpZGUuXG4gICAgICogVGhlIHNvdXJjZSBjYW4gYmUgLSBmcmFtZSBpZCwgaW1hZ2UgdXJsLCB2aWRlbyB1cmwsIGNhbnZhcyBlbGVtZW50LCB2aWRlbyBlbGVtZW50LCBiYXNlIHRleHR1cmVcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xQSVhJLlRleHR1cmV8SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gc291cmNlIC0gU291cmNlIHRvIGNyZWF0ZSB0ZXh0dXJlIGZyb21cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFNlZSB7QGxpbmsgUElYSS5CYXNlVGV4dHVyZX0ncyBjb25zdHJ1Y3RvciBmb3Igb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy53aWR0aCAtIHJlcXVpcmVkIHdpZHRoIG9mIHRoZSB0aWxpbmcgc3ByaXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuaGVpZ2h0IC0gcmVxdWlyZWQgaGVpZ2h0IG9mIHRoZSB0aWxpbmcgc3ByaXRlXG4gICAgICogQHJldHVybiB7UElYSS5UaWxpbmdTcHJpdGV9IFRoZSBuZXdseSBjcmVhdGVkIHRleHR1cmVcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbShzb3VyY2U6IFRleHR1cmVTb3VyY2UsIG9wdGlvbnM6IElTaXplICYgSUJhc2VUZXh0dXJlT3B0aW9ucyk6IFRpbGluZ1Nwcml0ZVxuICAgIHtcbiAgICAgICAgLy8gRGVwcmVjYXRlZFxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZXByZWNhdGlvbignNS4zLjAnLCAnVGlsaW5nU3ByaXRlLmZyb20gdXNlIG9wdGlvbnMgaW5zdGVhZCBvZiB3aWR0aCBhbmQgaGVpZ2h0IGFyZ3MnKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7IHdpZHRoOiBvcHRpb25zLCBoZWlnaHQ6IGFyZ3VtZW50c1syXSB9IGFzIElTaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBUaWxpbmdTcHJpdGUoXG4gICAgICAgICAgICBUZXh0dXJlLmZyb20oc291cmNlLCBvcHRpb25zKSxcbiAgICAgICAgICAgIG9wdGlvbnMud2lkdGgsXG4gICAgICAgICAgICBvcHRpb25zLmhlaWdodFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgc3ByaXRlLCBzZXR0aW5nIHRoaXMgd2lsbCBhY3R1YWxseSBtb2RpZnkgdGhlIHNjYWxlIHRvIGFjaGlldmUgdGhlIHZhbHVlIHNldFxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB3aWR0aCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgICB9XG5cbiAgICBzZXQgd2lkdGgodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGhlaWdodCBvZiB0aGUgVGlsaW5nU3ByaXRlLCBzZXR0aW5nIHRoaXMgd2lsbCBhY3R1YWxseSBtb2RpZnkgdGhlIHNjYWxlIHRvIGFjaGlldmUgdGhlIHZhbHVlIHNldFxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBoZWlnaHQoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xuICAgIH1cblxuICAgIHNldCBoZWlnaHQodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBPYmplY3RSZW5kZXJlciwgU2hhZGVyLCBTdGF0ZSwgUXVhZFV2IH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBXUkFQX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB7IE1hdHJpeCB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHsgcHJlbXVsdGlwbHlUaW50VG9SZ2JhLCBjb3JyZWN0QmxlbmRNb2RlIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuXG5pbXBvcnQgdmVydGV4IGZyb20gJy4vdGlsaW5nU3ByaXRlLnZlcnQnO1xuaW1wb3J0IGZyYWdtZW50IGZyb20gJy4vdGlsaW5nU3ByaXRlLmZyYWcnO1xuaW1wb3J0IGZyYWdtZW50U2ltcGxlIGZyb20gJy4vdGlsaW5nU3ByaXRlX3NpbXBsZS5mcmFnJztcblxuaW1wb3J0IHR5cGUgeyBSZW5kZXJlciB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBUaWxpbmdTcHJpdGUgfSBmcm9tICcuL1RpbGluZ1Nwcml0ZSc7XG5cbmNvbnN0IHRlbXBNYXQgPSBuZXcgTWF0cml4KCk7XG5cbi8qKlxuICogV2ViR0wgcmVuZGVyZXIgcGx1Z2luIGZvciB0aWxpbmcgc3ByaXRlc1xuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqIEBleHRlbmRzIFBJWEkuT2JqZWN0UmVuZGVyZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFRpbGluZ1Nwcml0ZVJlbmRlcmVyIGV4dGVuZHMgT2JqZWN0UmVuZGVyZXJcbntcbiAgICBwdWJsaWMgc2hhZGVyOiBTaGFkZXI7XG4gICAgcHVibGljIHNpbXBsZVNoYWRlcjogU2hhZGVyO1xuICAgIHB1YmxpYyBxdWFkOiBRdWFkVXY7XG4gICAgcHVibGljIHJlYWRvbmx5IHN0YXRlOiBTdGF0ZTtcblxuICAgIC8qKlxuICAgICAqIGNvbnN0cnVjdG9yIGZvciByZW5kZXJlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIHRpbGluZyBhd2Vzb21lbmVzcyB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFJlbmRlcmVyKVxuICAgIHtcbiAgICAgICAgc3VwZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0geyBnbG9iYWxzOiB0aGlzLnJlbmRlcmVyLmdsb2JhbFVuaWZvcm1zIH07XG5cbiAgICAgICAgdGhpcy5zaGFkZXIgPSBTaGFkZXIuZnJvbSh2ZXJ0ZXgsIGZyYWdtZW50LCB1bmlmb3Jtcyk7XG5cbiAgICAgICAgdGhpcy5zaW1wbGVTaGFkZXIgPSBTaGFkZXIuZnJvbSh2ZXJ0ZXgsIGZyYWdtZW50U2ltcGxlLCB1bmlmb3Jtcyk7XG5cbiAgICAgICAgdGhpcy5xdWFkID0gbmV3IFF1YWRVdigpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgV2ViR0wgc3RhdGUgaW4gd2hpY2ggdGhpcyByZW5kZXJlciB3aWxsIHdvcmsuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuU3RhdGV9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLmZvcjJkKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuVGlsaW5nU3ByaXRlfSB0cyAtIHRpbGluZ1Nwcml0ZSB0byBiZSByZW5kZXJlZFxuICAgICAqL1xuICAgIHB1YmxpYyByZW5kZXIodHM6IFRpbGluZ1Nwcml0ZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcbiAgICAgICAgY29uc3QgcXVhZCA9IHRoaXMucXVhZDtcblxuICAgICAgICBsZXQgdmVydGljZXMgPSBxdWFkLnZlcnRpY2VzO1xuXG4gICAgICAgIHZlcnRpY2VzWzBdID0gdmVydGljZXNbNl0gPSAodHMuX3dpZHRoKSAqIC10cy5hbmNob3IueDtcbiAgICAgICAgdmVydGljZXNbMV0gPSB2ZXJ0aWNlc1szXSA9IHRzLl9oZWlnaHQgKiAtdHMuYW5jaG9yLnk7XG5cbiAgICAgICAgdmVydGljZXNbMl0gPSB2ZXJ0aWNlc1s0XSA9ICh0cy5fd2lkdGgpICogKDEuMCAtIHRzLmFuY2hvci54KTtcbiAgICAgICAgdmVydGljZXNbNV0gPSB2ZXJ0aWNlc1s3XSA9IHRzLl9oZWlnaHQgKiAoMS4wIC0gdHMuYW5jaG9yLnkpO1xuXG4gICAgICAgIGlmICh0cy51dlJlc3BlY3RBbmNob3IpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZlcnRpY2VzID0gcXVhZC51dnM7XG5cbiAgICAgICAgICAgIHZlcnRpY2VzWzBdID0gdmVydGljZXNbNl0gPSAtdHMuYW5jaG9yLng7XG4gICAgICAgICAgICB2ZXJ0aWNlc1sxXSA9IHZlcnRpY2VzWzNdID0gLXRzLmFuY2hvci55O1xuXG4gICAgICAgICAgICB2ZXJ0aWNlc1syXSA9IHZlcnRpY2VzWzRdID0gMS4wIC0gdHMuYW5jaG9yLng7XG4gICAgICAgICAgICB2ZXJ0aWNlc1s1XSA9IHZlcnRpY2VzWzddID0gMS4wIC0gdHMuYW5jaG9yLnk7XG4gICAgICAgIH1cblxuICAgICAgICBxdWFkLmludmFsaWRhdGUoKTtcblxuICAgICAgICBjb25zdCB0ZXggPSB0cy5fdGV4dHVyZTtcbiAgICAgICAgY29uc3QgYmFzZVRleCA9IHRleC5iYXNlVGV4dHVyZTtcbiAgICAgICAgY29uc3QgbHQgPSB0cy50aWxlVHJhbnNmb3JtLmxvY2FsVHJhbnNmb3JtO1xuICAgICAgICBjb25zdCB1diA9IHRzLnV2TWF0cml4O1xuICAgICAgICBsZXQgaXNTaW1wbGUgPSBiYXNlVGV4LmlzUG93ZXJPZlR3b1xuICAgICAgICAgICAgJiYgdGV4LmZyYW1lLndpZHRoID09PSBiYXNlVGV4LndpZHRoICYmIHRleC5mcmFtZS5oZWlnaHQgPT09IGJhc2VUZXguaGVpZ2h0O1xuXG4gICAgICAgIC8vIGF1dG8sIGZvcmNlIHJlcGVhdCB3cmFwTW9kZSBmb3IgYmlnIHRpbGluZyB0ZXh0dXJlc1xuICAgICAgICBpZiAoaXNTaW1wbGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghYmFzZVRleC5fZ2xUZXh0dXJlc1tyZW5kZXJlci5DT05URVhUX1VJRF0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGJhc2VUZXgud3JhcE1vZGUgPT09IFdSQVBfTU9ERVMuQ0xBTVApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVGV4LndyYXBNb2RlID0gV1JBUF9NT0RFUy5SRVBFQVQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlzU2ltcGxlID0gYmFzZVRleC53cmFwTW9kZSAhPT0gV1JBUF9NT0RFUy5DTEFNUDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNoYWRlciA9IGlzU2ltcGxlID8gdGhpcy5zaW1wbGVTaGFkZXIgOiB0aGlzLnNoYWRlcjtcblxuICAgICAgICBjb25zdCB3ID0gdGV4LndpZHRoO1xuICAgICAgICBjb25zdCBoID0gdGV4LmhlaWdodDtcbiAgICAgICAgY29uc3QgVyA9IHRzLl93aWR0aDtcbiAgICAgICAgY29uc3QgSCA9IHRzLl9oZWlnaHQ7XG5cbiAgICAgICAgdGVtcE1hdC5zZXQobHQuYSAqIHcgLyBXLFxuICAgICAgICAgICAgbHQuYiAqIHcgLyBILFxuICAgICAgICAgICAgbHQuYyAqIGggLyBXLFxuICAgICAgICAgICAgbHQuZCAqIGggLyBILFxuICAgICAgICAgICAgbHQudHggLyBXLFxuICAgICAgICAgICAgbHQudHkgLyBIKTtcblxuICAgICAgICAvLyB0aGF0IHBhcnQgaXMgdGhlIHNhbWUgYXMgYWJvdmU6XG4gICAgICAgIC8vIHRlbXBNYXQuaWRlbnRpdHkoKTtcbiAgICAgICAgLy8gdGVtcE1hdC5zY2FsZSh0ZXgud2lkdGgsIHRleC5oZWlnaHQpO1xuICAgICAgICAvLyB0ZW1wTWF0LnByZXBlbmQobHQpO1xuICAgICAgICAvLyB0ZW1wTWF0LnNjYWxlKDEuMCAvIHRzLl93aWR0aCwgMS4wIC8gdHMuX2hlaWdodCk7XG5cbiAgICAgICAgdGVtcE1hdC5pbnZlcnQoKTtcbiAgICAgICAgaWYgKGlzU2ltcGxlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wTWF0LnByZXBlbmQodXYubWFwQ29vcmQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgc2hhZGVyLnVuaWZvcm1zLnVNYXBDb29yZCA9IHV2Lm1hcENvb3JkLnRvQXJyYXkodHJ1ZSk7XG4gICAgICAgICAgICBzaGFkZXIudW5pZm9ybXMudUNsYW1wRnJhbWUgPSB1di51Q2xhbXBGcmFtZTtcbiAgICAgICAgICAgIHNoYWRlci51bmlmb3Jtcy51Q2xhbXBPZmZzZXQgPSB1di51Q2xhbXBPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgICAgICBzaGFkZXIudW5pZm9ybXMudVRyYW5zZm9ybSA9IHRlbXBNYXQudG9BcnJheSh0cnVlKTtcbiAgICAgICAgc2hhZGVyLnVuaWZvcm1zLnVDb2xvciA9IHByZW11bHRpcGx5VGludFRvUmdiYSh0cy50aW50LCB0cy53b3JsZEFscGhhLFxuICAgICAgICAgICAgc2hhZGVyLnVuaWZvcm1zLnVDb2xvciwgYmFzZVRleC5hbHBoYU1vZGUgYXMgYW55KTtcbiAgICAgICAgc2hhZGVyLnVuaWZvcm1zLnRyYW5zbGF0aW9uTWF0cml4ID0gdHMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtLnRvQXJyYXkodHJ1ZSk7XG4gICAgICAgIHNoYWRlci51bmlmb3Jtcy51U2FtcGxlciA9IHRleDtcblxuICAgICAgICByZW5kZXJlci5zaGFkZXIuYmluZChzaGFkZXIpO1xuICAgICAgICByZW5kZXJlci5nZW9tZXRyeS5iaW5kKHF1YWQpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUuYmxlbmRNb2RlID0gY29ycmVjdEJsZW5kTW9kZSh0cy5ibGVuZE1vZGUsIGJhc2VUZXguYWxwaGFNb2RlIGFzIGFueSk7XG4gICAgICAgIHJlbmRlcmVyLnN0YXRlLnNldCh0aGlzLnN0YXRlKTtcbiAgICAgICAgcmVuZGVyZXIuZ2VvbWV0cnkuZHJhdyh0aGlzLnJlbmRlcmVyLmdsLlRSSUFOR0xFUywgNiwgMCk7XG4gICAgfVxufVxuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwgImltcG9ydCB0eXBlIHsgVGV4dHVyZU1hdHJpeCwgQnVmZmVyIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5cbi8qKlxuICogQ2xhc3MgY29udHJvbHMgY2FjaGUgZm9yIFVWIG1hcHBpbmcgZnJvbSBUZXh0dXJlIG5vcm1hbCBzcGFjZSB0byBCYXNlVGV4dHVyZSBub3JtYWwgc3BhY2UuXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgTWVzaEJhdGNoVXZzXG57XG4gICAgcHVibGljIHJlYWRvbmx5IGRhdGE6IEZsb2F0MzJBcnJheTtcbiAgICBwdWJsaWMgdXZCdWZmZXI6IEJ1ZmZlcjtcbiAgICBwdWJsaWMgdXZNYXRyaXg6IFRleHR1cmVNYXRyaXg7XG5cbiAgICBwcml2YXRlIF9idWZmZXJVcGRhdGVJZDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3RleHR1cmVVcGRhdGVJZDogbnVtYmVyO1xuXG4gICAgLy8gSW50ZXJuYWwtb25seSBwcm9wZXJ0aWVzXG4gICAgX3VwZGF0ZUlEOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuQnVmZmVyfSB1dkJ1ZmZlciAtIEJ1ZmZlciB3aXRoIG5vcm1hbGl6ZWQgdXYnc1xuICAgICAqIEBwYXJhbSB7UElYSS5UZXh0dXJlTWF0cml4fSB1dk1hdHJpeCAtIE1hdGVyaWFsIFVWIG1hdHJpeFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHV2QnVmZmVyOiBCdWZmZXIsIHV2TWF0cml4OiBUZXh0dXJlTWF0cml4KVxuICAgIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1ZmZlciB3aXRoIG5vcm1hbGl6ZWQgVVYnc1xuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLkJ1ZmZlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXZCdWZmZXIgPSB1dkJ1ZmZlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWF0ZXJpYWwgVVYgbWF0cml4XG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZU1hdHJpeH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXZNYXRyaXggPSB1dk1hdHJpeDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVVYgQnVmZmVyIGRhdGFcbiAgICAgICAgICogQG1lbWJlciB7RmxvYXQzMkFycmF5fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fYnVmZmVyVXBkYXRlSWQgPSAtMTtcblxuICAgICAgICB0aGlzLl90ZXh0dXJlVXBkYXRlSWQgPSAtMTtcblxuICAgICAgICB0aGlzLl91cGRhdGVJRCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdXBkYXRlc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZm9yY2VVcGRhdGVdIC0gZm9yY2UgdGhlIHVwZGF0ZVxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGUoZm9yY2VVcGRhdGU/OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKCFmb3JjZVVwZGF0ZVxuICAgICAgICAgICAgJiYgdGhpcy5fYnVmZmVyVXBkYXRlSWQgPT09IHRoaXMudXZCdWZmZXIuX3VwZGF0ZUlEXG4gICAgICAgICAgICAmJiB0aGlzLl90ZXh0dXJlVXBkYXRlSWQgPT09IHRoaXMudXZNYXRyaXguX3VwZGF0ZUlEXG4gICAgICAgIClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYnVmZmVyVXBkYXRlSWQgPSB0aGlzLnV2QnVmZmVyLl91cGRhdGVJRDtcbiAgICAgICAgdGhpcy5fdGV4dHVyZVVwZGF0ZUlkID0gdGhpcy51dk1hdHJpeC5fdXBkYXRlSUQ7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMudXZCdWZmZXIuZGF0YSBhcyBGbG9hdDMyQXJyYXk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmRhdGEgfHwgdGhpcy5kYXRhLmxlbmd0aCAhPT0gZGF0YS5sZW5ndGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgICh0aGlzLmRhdGEgYXMgYW55KSA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51dk1hdHJpeC5tdWx0aXBseVV2cyhkYXRhLCB0aGlzLmRhdGEpO1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZUlEKys7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBQb2ludCwgUG9seWdvbiB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHsgQkxFTkRfTU9ERVMsIERSQVdfTU9ERVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcbmltcG9ydCB7IE1lc2hCYXRjaFV2cyB9IGZyb20gJy4vTWVzaEJhdGNoVXZzJztcbmltcG9ydCB7IE1lc2hNYXRlcmlhbCB9IGZyb20gJy4vTWVzaE1hdGVyaWFsJztcblxuaW1wb3J0IHR5cGUgeyBJRGVzdHJveU9wdGlvbnMgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmltcG9ydCB0eXBlIHsgVGV4dHVyZSwgUmVuZGVyZXIsIEdlb21ldHJ5LCBCdWZmZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgSVBvaW50RGF0YSB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG5jb25zdCB0ZW1wUG9pbnQgPSBuZXcgUG9pbnQoKTtcbmNvbnN0IHRlbXBQb2x5Z29uID0gbmV3IFBvbHlnb24oKTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1pbnRlcmZhY2VcbmV4cG9ydCBpbnRlcmZhY2UgTWVzaCBleHRlbmRzIEdsb2JhbE1peGlucy5NZXNoIHt9XG5cbi8qKlxuICogQmFzZSBtZXNoIGNsYXNzLlxuICpcbiAqIFRoaXMgY2xhc3MgZW1wb3dlcnMgeW91IHRvIGhhdmUgbWF4aW11bSBmbGV4aWJpbGl0eSB0byByZW5kZXIgYW55IGtpbmQgb2YgV2ViR0wgdmlzdWFscyB5b3UgY2FuIHRoaW5rIG9mLlxuICogVGhpcyBjbGFzcyBhc3N1bWVzIGEgY2VydGFpbiBsZXZlbCBvZiBXZWJHTCBrbm93bGVkZ2UuXG4gKiBJZiB5b3Uga25vdyBhIGJpdCB0aGlzIHNob3VsZCBhYnN0cmFjdCBlbm91Z2ggYXdheSB0byBtYWtlIHlvdSBsaWZlIGVhc2llciFcbiAqXG4gKiBQcmV0dHkgbXVjaCBBTEwgV2ViR0wgY2FuIGJlIGJyb2tlbiBkb3duIGludG8gdGhlIGZvbGxvd2luZzpcbiAqIC0gR2VvbWV0cnkgLSBUaGUgc3RydWN0dXJlIGFuZCBkYXRhIGZvciB0aGUgbWVzaC4gVGhpcyBjYW4gaW5jbHVkZSBhbnl0aGluZyBmcm9tIHBvc2l0aW9ucywgdXZzLCBub3JtYWxzLCBjb2xvcnMgZXRjLi5cbiAqIC0gU2hhZGVyIC0gVGhpcyBpcyB0aGUgc2hhZGVyIHRoYXQgUGl4aUpTIHdpbGwgcmVuZGVyIHRoZSBnZW9tZXRyeSB3aXRoIChhdHRyaWJ1dGVzIGluIHRoZSBzaGFkZXIgbXVzdCBtYXRjaCB0aGUgZ2VvbWV0cnkpXG4gKiAtIFN0YXRlIC0gVGhpcyBpcyB0aGUgc3RhdGUgb2YgV2ViR0wgcmVxdWlyZWQgdG8gcmVuZGVyIHRoZSBtZXNoLlxuICpcbiAqIFRocm91Z2ggYSBjb21iaW5hdGlvbiBvZiB0aGUgYWJvdmUgZWxlbWVudHMgeW91IGNhbiByZW5kZXIgYW55dGhpbmcgeW91IHdhbnQsIDJEIG9yIDNEIVxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5Db250YWluZXJcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNoIGV4dGVuZHMgQ29udGFpbmVyXG57XG4gICAgcHVibGljIHJlYWRvbmx5IGdlb21ldHJ5OiBHZW9tZXRyeTtcbiAgICBwdWJsaWMgc2hhZGVyOiBNZXNoTWF0ZXJpYWw7XG4gICAgcHVibGljIHN0YXRlOiBTdGF0ZTtcbiAgICBwdWJsaWMgZHJhd01vZGU6IERSQVdfTU9ERVM7XG4gICAgcHVibGljIHN0YXJ0OiBudW1iZXI7XG4gICAgcHVibGljIHNpemU6IG51bWJlcjtcblxuICAgIHByaXZhdGUgdmVydGV4RGF0YTogRmxvYXQzMkFycmF5O1xuICAgIHByaXZhdGUgdmVydGV4RGlydHk6IG51bWJlcjtcbiAgICBwcml2YXRlIF90cmFuc2Zvcm1JRDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3JvdW5kUGl4ZWxzOiBib29sZWFuO1xuICAgIHByaXZhdGUgYmF0Y2hVdnM6IE1lc2hCYXRjaFV2cztcblxuICAgIC8vIEludGVybmFsLW9ubHkgcHJvcGVydGllc1xuICAgIHV2czogRmxvYXQzMkFycmF5O1xuICAgIGluZGljZXM6IFVpbnQxNkFycmF5O1xuICAgIF90aW50UkdCOiBudW1iZXI7XG4gICAgX3RleHR1cmU6IFRleHR1cmU7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuR2VvbWV0cnl9IGdlb21ldHJ5IC0gdGhlIGdlb21ldHJ5IHRoZSBtZXNoIHdpbGwgdXNlXG4gICAgICogQHBhcmFtIHtQSVhJLk1lc2hNYXRlcmlhbH0gc2hhZGVyIC0gdGhlIHNoYWRlciB0aGUgbWVzaCB3aWxsIHVzZVxuICAgICAqIEBwYXJhbSB7UElYSS5TdGF0ZX0gW3N0YXRlXSAtIHRoZSBzdGF0ZSB0aGF0IHRoZSBXZWJHTCBjb250ZXh0IGlzIHJlcXVpcmVkIHRvIGJlIGluIHRvIHJlbmRlciB0aGUgbWVzaFxuICAgICAqICAgICAgICBpZiBubyBzdGF0ZSBpcyBwcm92aWRlZCwgdXNlcyB7QGxpbmsgUElYSS5TdGF0ZS5mb3IyZH0gdG8gY3JlYXRlIGEgMkQgc3RhdGUgZm9yIFBpeGlKUy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2RyYXdNb2RlPVBJWEkuRFJBV19NT0RFUy5UUklBTkdMRVNdIC0gdGhlIGRyYXdNb2RlLCBjYW4gYmUgYW55IG9mIHRoZSBQSVhJLkRSQVdfTU9ERVMgY29uc3RzXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZ2VvbWV0cnk6IEdlb21ldHJ5LCBzaGFkZXI6IE1lc2hNYXRlcmlhbCwgc3RhdGU/OiBTdGF0ZSwgZHJhd01vZGUgPSBEUkFXX01PREVTLlRSSUFOR0xFUylcbiAgICB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluY2x1ZGVzIHZlcnRleCBwb3NpdGlvbnMsIGZhY2UgaW5kaWNlcywgbm9ybWFscywgY29sb3JzLCBVVnMsIGFuZFxuICAgICAgICAgKiBjdXN0b20gYXR0cmlidXRlcyB3aXRoaW4gYnVmZmVycywgcmVkdWNpbmcgdGhlIGNvc3Qgb2YgcGFzc2luZyBhbGxcbiAgICAgICAgICogdGhpcyBkYXRhIHRvIHRoZSBHUFUuIENhbiBiZSBzaGFyZWQgYmV0d2VlbiBtdWx0aXBsZSBNZXNoIG9iamVjdHMuXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuR2VvbWV0cnl9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IGdlb21ldHJ5O1xuXG4gICAgICAgIGdlb21ldHJ5LnJlZkNvdW50Kys7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgdGhlIHZlcnRleCBhbmQgZnJhZ21lbnQgc2hhZGVycyB0aGF0IHByb2Nlc3NlcyB0aGUgZ2VvbWV0cnkgYW5kIHJ1bnMgb24gdGhlIEdQVS5cbiAgICAgICAgICogQ2FuIGJlIHNoYXJlZCBiZXR3ZWVuIG11bHRpcGxlIE1lc2ggb2JqZWN0cy5cbiAgICAgICAgICogQG1lbWJlciB7UElYSS5TaGFkZXJ8UElYSS5NZXNoTWF0ZXJpYWx9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNoYWRlciA9IHNoYWRlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVwcmVzZW50cyB0aGUgV2ViR0wgc3RhdGUgdGhlIE1lc2ggcmVxdWlyZWQgdG8gcmVuZGVyLCBleGNsdWRlcyBzaGFkZXIgYW5kIGdlb21ldHJ5LiBFLmcuLFxuICAgICAgICAgKiBibGVuZCBtb2RlLCBjdWxsaW5nLCBkZXB0aCB0ZXN0aW5nLCBkaXJlY3Rpb24gb2YgcmVuZGVyaW5nIHRyaWFuZ2xlcywgYmFja2ZhY2UsIGV0Yy5cbiAgICAgICAgICogQG1lbWJlciB7UElYSS5TdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZSB8fCBTdGF0ZS5mb3IyZCgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd2F5IHRoZSBNZXNoIHNob3VsZCBiZSBkcmF3biwgY2FuIGJlIGFueSBvZiB0aGUge0BsaW5rIFBJWEkuRFJBV19NT0RFU30gY29uc3RhbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBzZWUgUElYSS5EUkFXX01PREVTXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRyYXdNb2RlID0gZHJhd01vZGU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFR5cGljYWxseSB0aGUgaW5kZXggb2YgdGhlIEluZGV4QnVmZmVyIHdoZXJlIHRvIHN0YXJ0IGRyYXdpbmcuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFydCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhvdyBtdWNoIG9mIHRoZSBnZW9tZXRyeSB0byBkcmF3LCBieSBkZWZhdWx0IGAwYCByZW5kZXJzIGV2ZXJ5dGhpbmcuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlYXNlIGFyZSB1c2VkIGFzIGVhc3kgYWNjZXNzIGZvciBiYXRjaGluZ1xuICAgICAgICAgKiBAbWVtYmVyIHtGbG9hdDMyQXJyYXl9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnV2cyA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZWFzZSBhcmUgdXNlZCBhcyBlYXN5IGFjY2VzcyBmb3IgYmF0Y2hpbmdcbiAgICAgICAgICogQG1lbWJlciB7VWludDE2QXJyYXl9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluZGljZXMgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGlzIGlzIHRoZSBjYWNoaW5nIGxheWVyIHVzZWQgYnkgdGhlIGJhdGNoZXJcbiAgICAgICAgICogQG1lbWJlciB7RmxvYXQzMkFycmF5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0ZXhEYXRhID0gbmV3IEZsb2F0MzJBcnJheSgxKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZ2VvbWV0cnkgaXMgY2hhbmdlZCB1c2VkIHRvIGRlY2lkZSB0byByZS10cmFuc2Zvcm1cbiAgICAgICAgICogdGhlIHZlcnRleERhdGEuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmVydGV4RGlydHkgPSAwO1xuXG4gICAgICAgIHRoaXMuX3RyYW5zZm9ybUlEID0gLTE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVybmFsIHJvdW5kUGl4ZWxzIGZpZWxkXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9yb3VuZFBpeGVscyA9IHNldHRpbmdzLlJPVU5EX1BJWEVMUztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQmF0Y2hlZCBVVidzIGFyZSBjYWNoZWQgZm9yIGF0bGFzIHRleHR1cmVzXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuTWVzaEJhdGNoVXZzfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYXRjaFV2cyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG8gY2hhbmdlIG1lc2ggdXYncywgY2hhbmdlIGl0cyB1dkJ1ZmZlciBkYXRhIGFuZCBpbmNyZW1lbnQgaXRzIF91cGRhdGVJRC5cbiAgICAgKiBAbWVtYmVyIHtQSVhJLkJ1ZmZlcn1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBnZXQgdXZCdWZmZXIoKTogQnVmZmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW9tZXRyeS5idWZmZXJzWzFdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvIGNoYW5nZSBtZXNoIHZlcnRpY2VzLCBjaGFuZ2UgaXRzIHV2QnVmZmVyIGRhdGEgYW5kIGluY3JlbWVudCBpdHMgX3VwZGF0ZUlELlxuICAgICAqIEluY3JlbWVudGluZyBfdXBkYXRlSUQgaXMgb3B0aW9uYWwgYmVjYXVzZSBtb3N0IG9mIE1lc2ggb2JqZWN0cyBkbyBpdCBhbnl3YXkuXG4gICAgICogQG1lbWJlciB7UElYSS5CdWZmZXJ9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IHZlcnRpY2VzQnVmZmVyKCk6IEJ1ZmZlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnkuYnVmZmVyc1swXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Ige0BsaW5rIFBJWEkuTWVzaCNzaGFkZXJ9LlxuICAgICAqIEBtZW1iZXIge1BJWEkuTWVzaE1hdGVyaWFsfVxuICAgICAqL1xuICAgIHNldCBtYXRlcmlhbCh2YWx1ZTogTWVzaE1hdGVyaWFsKVxuICAgIHtcbiAgICAgICAgdGhpcy5zaGFkZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgbWF0ZXJpYWwoKTogTWVzaE1hdGVyaWFsXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFkZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJsZW5kIG1vZGUgdG8gYmUgYXBwbGllZCB0byB0aGUgTWVzaC4gQXBwbHkgYSB2YWx1ZSBvZlxuICAgICAqIGBQSVhJLkJMRU5EX01PREVTLk5PUk1BTGAgdG8gcmVzZXQgdGhlIGJsZW5kIG1vZGUuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgUElYSS5CTEVORF9NT0RFUy5OT1JNQUw7XG4gICAgICogQHNlZSBQSVhJLkJMRU5EX01PREVTXG4gICAgICovXG4gICAgc2V0IGJsZW5kTW9kZSh2YWx1ZTogQkxFTkRfTU9ERVMpXG4gICAge1xuICAgICAgICB0aGlzLnN0YXRlLmJsZW5kTW9kZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBibGVuZE1vZGUoKTogQkxFTkRfTU9ERVNcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmJsZW5kTW9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlIFBpeGlKUyB3aWxsIE1hdGguZmxvb3IoKSB4L3kgdmFsdWVzIHdoZW4gcmVuZGVyaW5nLCBzdG9wcGluZyBwaXhlbCBpbnRlcnBvbGF0aW9uLlxuICAgICAqIEFkdmFudGFnZXMgY2FuIGluY2x1ZGUgc2hhcnBlciBpbWFnZSBxdWFsaXR5IChsaWtlIHRleHQpIGFuZCBmYXN0ZXIgcmVuZGVyaW5nIG9uIGNhbnZhcy5cbiAgICAgKiBUaGUgbWFpbiBkaXNhZHZhbnRhZ2UgaXMgbW92ZW1lbnQgb2Ygb2JqZWN0cyBtYXkgYXBwZWFyIGxlc3Mgc21vb3RoLlxuICAgICAqIFRvIHNldCB0aGUgZ2xvYmFsIGRlZmF1bHQsIGNoYW5nZSB7QGxpbmsgUElYSS5zZXR0aW5ncy5ST1VORF9QSVhFTFN9XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgc2V0IHJvdW5kUGl4ZWxzKHZhbHVlOiBib29sZWFuKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX3JvdW5kUGl4ZWxzICE9PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fdHJhbnNmb3JtSUQgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yb3VuZFBpeGVscyA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCByb3VuZFBpeGVscygpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fcm91bmRQaXhlbHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGx5IHRpbnQgYXBwbGllZCB0byB0aGUgTWVzaC4gVGhpcyBpcyBhIGhleCB2YWx1ZS4gQSB2YWx1ZSBvZlxuICAgICAqIGAweEZGRkZGRmAgd2lsbCByZW1vdmUgYW55IHRpbnQgZWZmZWN0LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDB4RkZGRkZGXG4gICAgICovXG4gICAgZ2V0IHRpbnQoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFkZXIudGludDtcbiAgICB9XG5cbiAgICBzZXQgdGludCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5zaGFkZXIudGludCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0dXJlIHRoYXQgdGhlIE1lc2ggdXNlcy5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZX1cbiAgICAgKi9cbiAgICBnZXQgdGV4dHVyZSgpOiBUZXh0dXJlXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFkZXIudGV4dHVyZTtcbiAgICB9XG5cbiAgICBzZXQgdGV4dHVyZSh2YWx1ZTogVGV4dHVyZSlcbiAgICB7XG4gICAgICAgIHRoaXMuc2hhZGVyLnRleHR1cmUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFuZGFyZCByZW5kZXJlciBkcmF3LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gSW5zdGFuY2UgdG8gcmVuZGVyZXIuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9yZW5kZXIocmVuZGVyZXI6IFJlbmRlcmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gc2V0IHByb3BlcnRpZXMgZm9yIGJhdGNoaW5nLi5cbiAgICAgICAgLy8gVE9ETyBjb3VsZCB1c2UgYSBkaWZmZXJlbnQgd2F5IHRvIGdyYWIgdmVydHM/XG4gICAgICAgIGNvbnN0IHZlcnRpY2VzID0gdGhpcy5nZW9tZXRyeS5idWZmZXJzWzBdLmRhdGE7XG5cbiAgICAgICAgLy8gVE9ETyBiZW5jaG1hcmsgY2hlY2sgZm9yIGF0dHJpYnV0ZSBzaXplLi5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5zaGFkZXIuYmF0Y2hhYmxlXG4gICAgICAgICAgICAmJiB0aGlzLmRyYXdNb2RlID09PSBEUkFXX01PREVTLlRSSUFOR0xFU1xuICAgICAgICAgICAgJiYgdmVydGljZXMubGVuZ3RoIDwgTWVzaC5CQVRDSEFCTEVfU0laRSAqIDJcbiAgICAgICAgKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJUb0JhdGNoKHJlbmRlcmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlckRlZmF1bHQocmVuZGVyZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhbmRhcmQgbm9uLWJhdGNoaW5nIHdheSBvZiByZW5kZXJpbmcuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgLSBJbnN0YW5jZSB0byByZW5kZXJlci5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX3JlbmRlckRlZmF1bHQocmVuZGVyZXI6IFJlbmRlcmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3Qgc2hhZGVyID0gdGhpcy5zaGFkZXI7XG5cbiAgICAgICAgc2hhZGVyLmFscGhhID0gdGhpcy53b3JsZEFscGhhO1xuICAgICAgICBpZiAoc2hhZGVyLnVwZGF0ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgc2hhZGVyLnVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVuZGVyZXIuYmF0Y2guZmx1c2goKTtcblxuICAgICAgICBpZiAoc2hhZGVyLnByb2dyYW0udW5pZm9ybURhdGEudHJhbnNsYXRpb25NYXRyaXgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNoYWRlci51bmlmb3Jtcy50cmFuc2xhdGlvbk1hdHJpeCA9IHRoaXMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtLnRvQXJyYXkodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBiaW5kIGFuZCBzeW5jIHVuaWZvcm1zLi5cbiAgICAgICAgcmVuZGVyZXIuc2hhZGVyLmJpbmQoc2hhZGVyKTtcblxuICAgICAgICAvLyBzZXQgc3RhdGUuLlxuICAgICAgICByZW5kZXJlci5zdGF0ZS5zZXQodGhpcy5zdGF0ZSk7XG5cbiAgICAgICAgLy8gYmluZCB0aGUgZ2VvbWV0cnkuLi5cbiAgICAgICAgcmVuZGVyZXIuZ2VvbWV0cnkuYmluZCh0aGlzLmdlb21ldHJ5LCBzaGFkZXIpO1xuXG4gICAgICAgIC8vIHRoZW4gcmVuZGVyIGl0XG4gICAgICAgIHJlbmRlcmVyLmdlb21ldHJ5LmRyYXcodGhpcy5kcmF3TW9kZSwgdGhpcy5zaXplLCB0aGlzLnN0YXJ0LCB0aGlzLmdlb21ldHJ5Lmluc3RhbmNlQ291bnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcmluZyBieSB1c2luZyB0aGUgQmF0Y2ggc3lzdGVtLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gSW5zdGFuY2UgdG8gcmVuZGVyZXIuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9yZW5kZXJUb0JhdGNoKHJlbmRlcmVyOiBSZW5kZXJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeTtcblxuICAgICAgICBpZiAodGhpcy5zaGFkZXIudXZNYXRyaXgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2hhZGVyLnV2TWF0cml4LnVwZGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVVdnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldCBwcm9wZXJ0aWVzIGZvciBiYXRjaGluZy4uXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVmVydGljZXMoKTtcbiAgICAgICAgdGhpcy5pbmRpY2VzID0gZ2VvbWV0cnkuaW5kZXhCdWZmZXIuZGF0YSBhcyBVaW50MTZBcnJheTtcbiAgICAgICAgdGhpcy5fdGludFJHQiA9IHRoaXMuc2hhZGVyLl90aW50UkdCO1xuICAgICAgICB0aGlzLl90ZXh0dXJlID0gdGhpcy5zaGFkZXIudGV4dHVyZTtcblxuICAgICAgICBjb25zdCBwbHVnaW5OYW1lID0gdGhpcy5tYXRlcmlhbC5wbHVnaW5OYW1lO1xuXG4gICAgICAgIHJlbmRlcmVyLmJhdGNoLnNldE9iamVjdFJlbmRlcmVyKHJlbmRlcmVyLnBsdWdpbnNbcGx1Z2luTmFtZV0pO1xuICAgICAgICByZW5kZXJlci5wbHVnaW5zW3BsdWdpbk5hbWVdLnJlbmRlcih0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHZlcnRleERhdGEgZmllbGQgYmFzZWQgb24gdHJhbnNmb3JtIGFuZCB2ZXJ0aWNlc1xuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVWZXJ0aWNlcygpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7XG4gICAgICAgIGNvbnN0IHZlcnRpY2VzID0gZ2VvbWV0cnkuYnVmZmVyc1swXS5kYXRhO1xuXG4gICAgICAgIGlmICgoZ2VvbWV0cnkgYXMgYW55KS52ZXJ0ZXhEaXJ0eUlkID09PSB0aGlzLnZlcnRleERpcnR5ICYmIHRoaXMuX3RyYW5zZm9ybUlEID09PSB0aGlzLnRyYW5zZm9ybS5fd29ybGRJRClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdHJhbnNmb3JtSUQgPSB0aGlzLnRyYW5zZm9ybS5fd29ybGRJRDtcblxuICAgICAgICBpZiAodGhpcy52ZXJ0ZXhEYXRhLmxlbmd0aCAhPT0gdmVydGljZXMubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnZlcnRleERhdGEgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzLmxlbmd0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB3dCA9IHRoaXMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtO1xuICAgICAgICBjb25zdCBhID0gd3QuYTtcbiAgICAgICAgY29uc3QgYiA9IHd0LmI7XG4gICAgICAgIGNvbnN0IGMgPSB3dC5jO1xuICAgICAgICBjb25zdCBkID0gd3QuZDtcbiAgICAgICAgY29uc3QgdHggPSB3dC50eDtcbiAgICAgICAgY29uc3QgdHkgPSB3dC50eTtcblxuICAgICAgICBjb25zdCB2ZXJ0ZXhEYXRhID0gdGhpcy52ZXJ0ZXhEYXRhO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGV4RGF0YS5sZW5ndGggLyAyOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSB2ZXJ0aWNlc1soaSAqIDIpXTtcbiAgICAgICAgICAgIGNvbnN0IHkgPSB2ZXJ0aWNlc1soaSAqIDIpICsgMV07XG5cbiAgICAgICAgICAgIHZlcnRleERhdGFbKGkgKiAyKV0gPSAoYSAqIHgpICsgKGMgKiB5KSArIHR4O1xuICAgICAgICAgICAgdmVydGV4RGF0YVsoaSAqIDIpICsgMV0gPSAoYiAqIHgpICsgKGQgKiB5KSArIHR5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX3JvdW5kUGl4ZWxzKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uID0gc2V0dGluZ3MuUkVTT0xVVElPTjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXhEYXRhLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZlcnRleERhdGFbaV0gPSBNYXRoLnJvdW5kKCh2ZXJ0ZXhEYXRhW2ldICogcmVzb2x1dGlvbiB8IDApIC8gcmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnZlcnRleERpcnR5ID0gKGdlb21ldHJ5IGFzIGFueSkudmVydGV4RGlydHlJZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHV2IGZpZWxkIGJhc2VkIG9uIGZyb20gZ2VvbWV0cnkgdXYncyBvciBiYXRjaFV2c1xuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVVdnMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZ2VvbVV2cyA9IHRoaXMuZ2VvbWV0cnkuYnVmZmVyc1sxXTtcblxuICAgICAgICBpZiAoIXRoaXMuc2hhZGVyLnV2TWF0cml4LmlzU2ltcGxlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYmF0Y2hVdnMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5iYXRjaFV2cyA9IG5ldyBNZXNoQmF0Y2hVdnMoZ2VvbVV2cywgdGhpcy5zaGFkZXIudXZNYXRyaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iYXRjaFV2cy51cGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMudXZzID0gdGhpcy5iYXRjaFV2cy5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy51dnMgPSBnZW9tVXZzLmRhdGEgYXMgRmxvYXQzMkFycmF5O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgYm91bmRzIG9mIHRoZSBtZXNoIGFzIGEgcmVjdGFuZ2xlLiBUaGUgYm91bmRzIGNhbGN1bGF0aW9uIHRha2VzIHRoZSB3b3JsZFRyYW5zZm9ybSBpbnRvIGFjY291bnQuXG4gICAgICogdGhlcmUgbXVzdCBiZSBhIGFWZXJ0ZXhQb3NpdGlvbiBhdHRyaWJ1dGUgcHJlc2VudCBpbiB0aGUgZ2VvbWV0cnkgZm9yIGJvdW5kcyB0byBiZSBjYWxjdWxhdGVkIGNvcnJlY3RseS5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX2NhbGN1bGF0ZUJvdW5kcygpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZVZlcnRpY2VzKCk7XG5cbiAgICAgICAgdGhpcy5fYm91bmRzLmFkZFZlcnRleERhdGEodGhpcy52ZXJ0ZXhEYXRhLCAwLCB0aGlzLnZlcnRleERhdGEubGVuZ3RoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyBpZiBhIHBvaW50IGlzIGluc2lkZSB0aGlzIG1lc2guIFdvcmtzIG9ubHkgZm9yIFBJWEkuRFJBV19NT0RFUy5UUklBTkdMRVMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuSVBvaW50RGF0YX0gcG9pbnQgLSB0aGUgcG9pbnQgdG8gdGVzdFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRoZSByZXN1bHQgb2YgdGhlIHRlc3RcbiAgICAgKi9cbiAgICBwdWJsaWMgY29udGFpbnNQb2ludChwb2ludDogSVBvaW50RGF0YSk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5nZXRCb3VuZHMoKS5jb250YWlucyhwb2ludC54LCBwb2ludC55KSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybS5hcHBseUludmVyc2UocG9pbnQsIHRlbXBQb2ludCk7XG5cbiAgICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLmdlb21ldHJ5LmdldEJ1ZmZlcignYVZlcnRleFBvc2l0aW9uJykuZGF0YTtcblxuICAgICAgICBjb25zdCBwb2ludHMgPSB0ZW1wUG9seWdvbi5wb2ludHM7XG4gICAgICAgIGNvbnN0IGluZGljZXMgPSAgdGhpcy5nZW9tZXRyeS5nZXRJbmRleCgpLmRhdGE7XG4gICAgICAgIGNvbnN0IGxlbiA9IGluZGljZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCBzdGVwID0gdGhpcy5kcmF3TW9kZSA9PT0gNCA/IDMgOiAxO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpICsgMiA8IGxlbjsgaSArPSBzdGVwKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBpbmQwID0gaW5kaWNlc1tpXSAqIDI7XG4gICAgICAgICAgICBjb25zdCBpbmQxID0gaW5kaWNlc1tpICsgMV0gKiAyO1xuICAgICAgICAgICAgY29uc3QgaW5kMiA9IGluZGljZXNbaSArIDJdICogMjtcblxuICAgICAgICAgICAgcG9pbnRzWzBdID0gdmVydGljZXNbaW5kMF07XG4gICAgICAgICAgICBwb2ludHNbMV0gPSB2ZXJ0aWNlc1tpbmQwICsgMV07XG4gICAgICAgICAgICBwb2ludHNbMl0gPSB2ZXJ0aWNlc1tpbmQxXTtcbiAgICAgICAgICAgIHBvaW50c1szXSA9IHZlcnRpY2VzW2luZDEgKyAxXTtcbiAgICAgICAgICAgIHBvaW50c1s0XSA9IHZlcnRpY2VzW2luZDJdO1xuICAgICAgICAgICAgcG9pbnRzWzVdID0gdmVydGljZXNbaW5kMiArIDFdO1xuXG4gICAgICAgICAgICBpZiAodGVtcFBvbHlnb24uY29udGFpbnModGVtcFBvaW50LngsIHRlbXBQb2ludC55KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIE1lc2ggb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R8Ym9vbGVhbn0gW29wdGlvbnNdIC0gT3B0aW9ucyBwYXJhbWV0ZXIuIEEgYm9vbGVhbiB3aWxsIGFjdCBhcyBpZiBhbGxcbiAgICAgKiAgb3B0aW9ucyBoYXZlIGJlZW4gc2V0IHRvIHRoYXQgdmFsdWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNoaWxkcmVuPWZhbHNlXSAtIGlmIHNldCB0byB0cnVlLCBhbGwgdGhlIGNoaWxkcmVuIHdpbGwgaGF2ZVxuICAgICAqICB0aGVpciBkZXN0cm95IG1ldGhvZCBjYWxsZWQgYXMgd2VsbC4gJ29wdGlvbnMnIHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRob3NlIGNhbGxzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZXN0cm95KG9wdGlvbnM6IElEZXN0cm95T3B0aW9uc3xib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgc3VwZXIuZGVzdHJveShvcHRpb25zKTtcblxuICAgICAgICB0aGlzLmdlb21ldHJ5LnJlZkNvdW50LS07XG4gICAgICAgIGlmICh0aGlzLmdlb21ldHJ5LnJlZkNvdW50ID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5LmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgICh0aGlzIGFzIGFueSkuZ2VvbWV0cnkgPSBudWxsO1xuICAgICAgICB0aGlzLnNoYWRlciA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnV2cyA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5kaWNlcyA9IG51bGw7XG4gICAgICAgIHRoaXMudmVydGV4RGF0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHZlcnRpY2VzIHRvIGNvbnNpZGVyIGJhdGNoYWJsZS4gR2VuZXJhbGx5LCB0aGUgY29tcGxleGl0eVxuICAgICAqIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAbWVtYmVyb2YgUElYSS5NZXNoXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXIge251bWJlcn0gQkFUQ0hBQkxFX1NJWkVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIEJBVENIQUJMRV9TSVpFID0gMTAwO1xufVxuXG4iLCAiaW1wb3J0IHsgUHJvZ3JhbSwgU2hhZGVyLCBUZXh0dXJlTWF0cml4IH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBNYXRyaXggfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB7IHByZW11bHRpcGx5VGludFRvUmdiYSB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCBmcmFnbWVudCBmcm9tICcuL3NoYWRlci9tZXNoLmZyYWcnO1xuaW1wb3J0IHZlcnRleCBmcm9tICcuL3NoYWRlci9tZXNoLnZlcnQnO1xuXG5pbXBvcnQgdHlwZSB7IFRleHR1cmUgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgRGljdCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBJTWVzaE1hdGVyaWFsT3B0aW9ucyB7XG4gICAgYWxwaGE/OiBudW1iZXI7XG4gICAgdGludD86IG51bWJlcjtcbiAgICBwbHVnaW5OYW1lPzogc3RyaW5nO1xuICAgIHByb2dyYW0/OiBQcm9ncmFtO1xuICAgIHVuaWZvcm1zPzogRGljdDx1bmtub3duPjtcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1pbnRlcmZhY2VcbmV4cG9ydCBpbnRlcmZhY2UgTWVzaE1hdGVyaWFsIGV4dGVuZHMgR2xvYmFsTWl4aW5zLk1lc2hNYXRlcmlhbCB7fVxuXG4vKipcbiAqIFNsaWdodGx5IG9waW5pb25hdGVkIGRlZmF1bHQgc2hhZGVyIGZvciBQaXhpSlMgMkQgb2JqZWN0cy5cbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqIEBleHRlbmRzIFBJWEkuU2hhZGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNoTWF0ZXJpYWwgZXh0ZW5kcyBTaGFkZXJcbntcbiAgICBwdWJsaWMgcmVhZG9ubHkgdXZNYXRyaXg6IFRleHR1cmVNYXRyaXg7XG5cbiAgICBwdWJsaWMgYmF0Y2hhYmxlOiBib29sZWFuO1xuICAgIHB1YmxpYyBwbHVnaW5OYW1lOiBzdHJpbmc7XG5cbiAgICAvLyBJbnRlcm5hbC1vbmx5IHByb3BlcnRpZXNcbiAgICBfdGludFJHQjogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfY29sb3JEaXJ0eTogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9hbHBoYTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3RpbnQ6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5UZXh0dXJlfSB1U2FtcGxlciAtIFRleHR1cmUgdGhhdCBtYXRlcmlhbCB1c2VzIHRvIHJlbmRlci5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gQWRkaXRpb25hbCBvcHRpb25zXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmFscGhhPTFdIC0gRGVmYXVsdCBhbHBoYS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMudGludD0weEZGRkZGRl0gLSBEZWZhdWx0IHRpbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBsdWdpbk5hbWU9J2JhdGNoJ10gLSBSZW5kZXJlciBwbHVnaW4gZm9yIGJhdGNoaW5nLlxuICAgICAqIEBwYXJhbSB7UElYSS5Qcm9ncmFtfSBbb3B0aW9ucy5wcm9ncmFtPTB4RkZGRkZGXSAtIEN1c3RvbSBwcm9ncmFtLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy51bmlmb3Jtc10gLSBDdXN0b20gdW5pZm9ybXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodVNhbXBsZXI6IFRleHR1cmUsIG9wdGlvbnM/OiBJTWVzaE1hdGVyaWFsT3B0aW9ucylcbiAgICB7XG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0ge1xuICAgICAgICAgICAgdVNhbXBsZXIsXG4gICAgICAgICAgICBhbHBoYTogMSxcbiAgICAgICAgICAgIHVUZXh0dXJlTWF0cml4OiBNYXRyaXguSURFTlRJVFksXG4gICAgICAgICAgICB1Q29sb3I6IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDEsIDEsIDFdKSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTZXQgZGVmYXVsdHNcbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdGludDogMHhGRkZGRkYsXG4gICAgICAgICAgICBhbHBoYTogMSxcbiAgICAgICAgICAgIHBsdWdpbk5hbWU6ICdiYXRjaCcsXG4gICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnVuaWZvcm1zKVxuICAgICAgICB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHVuaWZvcm1zLCBvcHRpb25zLnVuaWZvcm1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG9wdGlvbnMucHJvZ3JhbSB8fCBQcm9ncmFtLmZyb20odmVydGV4LCBmcmFnbWVudCksIHVuaWZvcm1zKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogT25seSBkbyB1cGRhdGUgaWYgdGludCBvciBhbHBoYSBjaGFuZ2VzLlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fY29sb3JEaXJ0eSA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUZXh0dXJlTWF0cml4IGluc3RhbmNlIGZvciB0aGlzIE1lc2gsIHVzZWQgdG8gdHJhY2sgVGV4dHVyZSBjaGFuZ2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZU1hdHJpeH1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnV2TWF0cml4ID0gbmV3IFRleHR1cmVNYXRyaXgodVNhbXBsZXIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgdHJ1ZWAgaWYgc2hhZGVyIGNhbiBiZSBiYXRjaCB3aXRoIHRoZSByZW5kZXJlcidzIGJhdGNoIHN5c3RlbS5cbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYXRjaGFibGUgPSBvcHRpb25zLnByb2dyYW0gPT09IHVuZGVmaW5lZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyZXIgcGx1Z2luIGZvciBiYXRjaGluZ1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdiYXRjaCdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGx1Z2luTmFtZSA9IG9wdGlvbnMucGx1Z2luTmFtZTtcblxuICAgICAgICB0aGlzLnRpbnQgPSBvcHRpb25zLnRpbnQ7XG4gICAgICAgIHRoaXMuYWxwaGEgPSBvcHRpb25zLmFscGhhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZmVyZW5jZSB0byB0aGUgdGV4dHVyZSBiZWluZyByZW5kZXJlZC5cbiAgICAgKiBAbWVtYmVyIHtQSVhJLlRleHR1cmV9XG4gICAgICovXG4gICAgZ2V0IHRleHR1cmUoKTogVGV4dHVyZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMudVNhbXBsZXI7XG4gICAgfVxuICAgIHNldCB0ZXh0dXJlKHZhbHVlOiBUZXh0dXJlKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMudW5pZm9ybXMudVNhbXBsZXIgIT09IHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnVuaWZvcm1zLnVTYW1wbGVyID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnV2TWF0cml4LnRleHR1cmUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBhdXRvbWF0aWNhbGx5IHNldCBieSB0aGUgb2JqZWN0IHVzaW5nIHRoaXMuXG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCAxXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCBhbHBoYSh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzLl9hbHBoYSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuX2FscGhhID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX2NvbG9yRGlydHkgPSB0cnVlO1xuICAgIH1cbiAgICBnZXQgYWxwaGEoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWxwaGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGludCBmb3IgdGhlIG1hdGVyaWFsLlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCAweEZGRkZGRlxuICAgICAqL1xuICAgIHNldCB0aW50KHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMuX3RpbnQpIHJldHVybjtcblxuICAgICAgICB0aGlzLl90aW50ID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX3RpbnRSR0IgPSAodmFsdWUgPj4gMTYpICsgKHZhbHVlICYgMHhmZjAwKSArICgodmFsdWUgJiAweGZmKSA8PCAxNik7XG4gICAgICAgIHRoaXMuX2NvbG9yRGlydHkgPSB0cnVlO1xuICAgIH1cbiAgICBnZXQgdGludCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgY2FsbGVkIGF1dG9tYXRpY2FsbHkgYnkgdGhlIE1lc2guIEludGVuZGVkIHRvIGJlIG92ZXJyaWRkZW4gZm9yIGN1c3RvbVxuICAgICAqIE1lc2hNYXRlcmlhbCBvYmplY3RzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGUoKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbG9yRGlydHkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbG9yRGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGJhc2VUZXh0dXJlID0gdGhpcy50ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG4gICAgICAgICAgICBwcmVtdWx0aXBseVRpbnRUb1JnYmEoXG4gICAgICAgICAgICAgICAgdGhpcy5fdGludCwgdGhpcy5fYWxwaGEsIHRoaXMudW5pZm9ybXMudUNvbG9yLCAoYmFzZVRleHR1cmUuYWxwaGFNb2RlIGFzIHVua25vd24gYXMgYm9vbGVhbilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXZNYXRyaXgudXBkYXRlKCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybXMudVRleHR1cmVNYXRyaXggPSB0aGlzLnV2TWF0cml4Lm1hcENvb3JkO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFRZUEVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB7IEJ1ZmZlciwgR2VvbWV0cnkgfSBmcm9tICdAcGl4aS9jb3JlJztcblxuaW1wb3J0IHR5cGUgeyBJQXJyYXlCdWZmZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcblxuLyoqXG4gKiBTdGFuZGFyZCAyRCBnZW9tZXRyeSB1c2VkIGluIFBpeGlKUy5cbiAqXG4gKiBHZW9tZXRyeSBjYW4gYmUgZGVmaW5lZCB3aXRob3V0IHBhc3NpbmcgaW4gYSBzdHlsZSBvciBkYXRhIGlmIHJlcXVpcmVkLlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBnZW9tZXRyeSA9IG5ldyBQSVhJLkdlb21ldHJ5KCk7XG4gKlxuICogZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCdwb3NpdGlvbnMnLCBbMCwgMCwgMTAwLCAwLCAxMDAsIDEwMCwgMCwgMTAwXSwgMik7XG4gKiBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3V2cycsIFswLDAsMSwwLDEsMSwwLDFdLCAyKTtcbiAqIGdlb21ldHJ5LmFkZEluZGV4KFswLDEsMiwxLDMsMl0pO1xuICpcbiAqIGBgYFxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQGV4dGVuZHMgUElYSS5HZW9tZXRyeVxuICovXG5leHBvcnQgY2xhc3MgTWVzaEdlb21ldHJ5IGV4dGVuZHMgR2VvbWV0cnlcbntcbiAgICAvLyBJbnRlcm5hbC1vbmx5IHByb3BlcnRpZXNcbiAgICBfdXBkYXRlSWQ6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fG51bWJlcltdfSBbdmVydGljZXNdIC0gUG9zaXRpb25hbCBkYXRhIG9uIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fG51bWJlcltdfSBbdXZzXSAtIFRleHR1cmUgVVZzLlxuICAgICAqIEBwYXJhbSB7VWludDE2QXJyYXl8bnVtYmVyW119IFtpbmRleF0gLSBJbmRleEJ1ZmZlclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHZlcnRpY2VzPzogSUFycmF5QnVmZmVyLCB1dnM/OiBJQXJyYXlCdWZmZXIsIGluZGV4PzogSUFycmF5QnVmZmVyKVxuICAgIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICBjb25zdCB2ZXJ0aWNlc0J1ZmZlciA9IG5ldyBCdWZmZXIodmVydGljZXMpO1xuICAgICAgICBjb25zdCB1dnNCdWZmZXIgPSBuZXcgQnVmZmVyKHV2cywgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IGluZGV4QnVmZmVyID0gbmV3IEJ1ZmZlcihpbmRleCwgdHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoJ2FWZXJ0ZXhQb3NpdGlvbicsIHZlcnRpY2VzQnVmZmVyLCAyLCBmYWxzZSwgVFlQRVMuRkxPQVQpXG4gICAgICAgICAgICAuYWRkQXR0cmlidXRlKCdhVGV4dHVyZUNvb3JkJywgdXZzQnVmZmVyLCAyLCBmYWxzZSwgVFlQRVMuRkxPQVQpXG4gICAgICAgICAgICAuYWRkSW5kZXgoaW5kZXhCdWZmZXIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXJ0eSBmbGFnIHRvIGxpbWl0IHVwZGF0ZSBjYWxscyBvbiBNZXNoLiBGb3IgZXhhbXBsZSxcbiAgICAgICAgICogbGltaXRpbmcgdXBkYXRlcyBvbiBhIHNpbmdsZSBNZXNoIGluc3RhbmNlIHdpdGggYSBzaGFyZWQgR2VvbWV0cnlcbiAgICAgICAgICogd2l0aGluIHRoZSByZW5kZXIgbG9vcC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAtMVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdXBkYXRlSWQgPSAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgdmVydGV4IHBvc2l0aW9uIGlzIHVwZGF0ZWQuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZ2V0IHZlcnRleERpcnR5SWQoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXJzWzBdLl91cGRhdGVJRDtcbiAgICB9XG59XG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuXG4vKipcbiAqIE5vcm1hbGl6ZWQgcGFyc2VkIGRhdGEgZnJvbSAuZm50IGZpbGVzLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEJpdG1hcEZvbnREYXRhXG57XG4gICAgcHVibGljIGluZm86IElCaXRtYXBGb250RGF0YUluZm9bXTtcbiAgICBwdWJsaWMgY29tbW9uOiBJQml0bWFwRm9udERhdGFDb21tb25bXTtcbiAgICBwdWJsaWMgcGFnZTogSUJpdG1hcEZvbnREYXRhUGFnZVtdO1xuICAgIHB1YmxpYyBjaGFyOiBJQml0bWFwRm9udERhdGFDaGFyW107XG4gICAgcHVibGljIGtlcm5pbmc6IElCaXRtYXBGb250RGF0YUtlcm5pbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLklCaXRtYXBGb250RGF0YUluZm9bXX1cbiAgICAgICAgICogQHJlYWRPbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluZm8gPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5JQml0bWFwRm9udERhdGFDb21tb25bXX1cbiAgICAgICAgICogQHJlYWRPbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbW1vbiA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLklCaXRtYXBGb250RGF0YVBhZ2VbXX1cbiAgICAgICAgICogQHJlYWRPbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhZ2UgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5JQml0bWFwRm9udERhdGFDaGFyW119XG4gICAgICAgICAqIEByZWFkT25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFyID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuSUJpdG1hcEZvbnREYXRhS2VybmluZ1tdfVxuICAgICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMua2VybmluZyA9IFtdO1xuICAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQml0bWFwRm9udERhdGFJbmZvIHtcbiAgICBmYWNlOiBzdHJpbmc7XG4gICAgc2l6ZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCaXRtYXBGb250RGF0YUNvbW1vbiB7XG4gICAgbGluZUhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCaXRtYXBGb250RGF0YVBhZ2Uge1xuICAgIGlkOiBudW1iZXI7XG4gICAgZmlsZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCaXRtYXBGb250RGF0YUNoYXIge1xuICAgIGlkOiBudW1iZXI7XG4gICAgcGFnZTogbnVtYmVyO1xuICAgIHg6IG51bWJlcjtcbiAgICB5OiBudW1iZXI7XG4gICAgd2lkdGg6IG51bWJlcjtcbiAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICB4b2Zmc2V0OiBudW1iZXI7XG4gICAgeW9mZnNldDogbnVtYmVyO1xuICAgIHhhZHZhbmNlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJpdG1hcEZvbnREYXRhS2VybmluZyB7XG4gICAgZmlyc3Q6IG51bWJlcjtcbiAgICBzZWNvbmQ6IG51bWJlcjtcbiAgICBhbW91bnQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHR5cGVkZWYge29iamVjdH0gSUJpdG1hcEZvbnREYXRhSW5mb1xuICogQHByb3BlcnR5IHtzdHJpbmd9IGZhY2VcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzaXplXG4gKi9cblxuLyoqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHR5cGVkZWYge29iamVjdH0gSUJpdG1hcEZvbnREYXRhQ29tbW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGluZUhlaWdodFxuICovXG5cbi8qKlxuICogQG1lbWJlcm9mIFBJWElcbiAqIEB0eXBlZGVmIHtvYmplY3R9IElCaXRtYXBGb250RGF0YVBhZ2VcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpZFxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZpbGVcbiAqL1xuXG4vKipcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBJQml0bWFwRm9udERhdGFDaGFyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwYWdlXG4gKiBAcHJvcGVydHkge251bWJlcn0geFxuICogQHByb3BlcnR5IHtudW1iZXJ9IHlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWR0aFxuICogQHByb3BlcnR5IHtudW1iZXJ9IGhlaWdodFxuICogQHByb3BlcnR5IHtudW1iZXJ9IHhvZmZzZXRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB5b2Zmc2V0XG4gKiBAcHJvcGVydHkge251bWJlcn0geGFkdmFuY2VcbiAqL1xuXG4vKipcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBJQml0bWFwRm9udERhdGFLZXJuaW5nXG4gKiBAcHJvcGVydHkge251bWJlcn0gZmlyc3RcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzZWNvbmRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBhbW91bnRcbiAqL1xuIiwgImltcG9ydCB7IEJpdG1hcEZvbnREYXRhIH0gZnJvbSAnLi4vQml0bWFwRm9udERhdGEnO1xuXG4vKipcbiAqIEludGVybmFsIGRhdGEgZm9ybWF0IHVzZWQgdG8gY29udmVydCB0byBCaXRtYXBGb250RGF0YS5cbiAqIEBwcml2YXRlXG4gKi9cbmludGVyZmFjZSBJQml0bWFwRm9udFJhd0RhdGEge1xuICAgIGluZm86IHtcbiAgICAgICAgZmFjZTogc3RyaW5nO1xuICAgICAgICBzaXplOiBzdHJpbmc7XG4gICAgfVtdO1xuICAgIGNvbW1vbjogeyBsaW5lSGVpZ2h0OiBzdHJpbmcgfVtdO1xuICAgIHBhZ2U6IHtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgZmlsZTogc3RyaW5nO1xuICAgIH1bXTtcbiAgICBjaGFyczoge1xuICAgICAgICBjb3VudDogbnVtYmVyO1xuICAgIH1bXTtcbiAgICBjaGFyOiB7XG4gICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgIHBhZ2U6IHN0cmluZztcbiAgICAgICAgeDogc3RyaW5nO1xuICAgICAgICB5OiBzdHJpbmc7XG4gICAgICAgIHdpZHRoOiBzdHJpbmc7XG4gICAgICAgIGhlaWdodDogc3RyaW5nO1xuICAgICAgICB4b2Zmc2V0OiBzdHJpbmc7XG4gICAgICAgIHlvZmZzZXQ6IHN0cmluZztcbiAgICAgICAgeGFkdmFuY2U6IHN0cmluZztcbiAgICB9W107XG4gICAga2VybmluZ3M/OiB7XG4gICAgICAgIGNvdW50OiBudW1iZXI7XG4gICAgfVtdO1xuICAgIGtlcm5pbmc/OiB7XG4gICAgICAgIGZpcnN0OiBzdHJpbmc7XG4gICAgICAgIHNlY29uZDogc3RyaW5nO1xuICAgICAgICBhbW91bnQ6IHN0cmluZztcbiAgICB9W107XG59XG5cbi8qKlxuICogQml0bWFwRm9udCBmb3JtYXQgdGhhdCdzIFRleHQtYmFzZWQuXG4gKlxuICogQGNsYXNzXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgVGV4dEZvcm1hdFxue1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHJlc291cmNlIHJlZmVycyB0byB0eHQgZm9udCBkYXRhLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHthbnl9IGRhdGFcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHJlc291cmNlIGNvdWxkIGJlIHRyZWF0ZWQgYXMgZm9udCBkYXRhLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgc3RhdGljIHRlc3QoZGF0YTogdW5rbm93bik6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgJiYgZGF0YS5pbmRleE9mKCdpbmZvIGZhY2U9JykgPT09IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCB0ZXh0IGZvbnQgZGF0YSB0byBhIGphdmFzY3JpcHQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR4dCAtIFJhdyBzdHJpbmcgZGF0YSB0byBiZSBjb252ZXJ0ZWRcbiAgICAgKiBAcmV0dXJuIHtQSVhJLkJpdG1hcEZvbnREYXRhfSBQYXJzZWQgZm9udCBkYXRhXG4gICAgICovXG4gICAgc3RhdGljIHBhcnNlKHR4dDogc3RyaW5nKTogQml0bWFwRm9udERhdGFcbiAgICB7XG4gICAgICAgIC8vIFJldHJpZXZlIGRhdGEgaXRlbVxuICAgICAgICBjb25zdCBpdGVtcyA9IHR4dC5tYXRjaCgvXlthLXpdK1xccysuKyQvZ20pO1xuICAgICAgICBjb25zdCByYXdEYXRhOiBJQml0bWFwRm9udFJhd0RhdGEgPSB7XG4gICAgICAgICAgICBpbmZvOiBbXSxcbiAgICAgICAgICAgIGNvbW1vbjogW10sXG4gICAgICAgICAgICBwYWdlOiBbXSxcbiAgICAgICAgICAgIGNoYXI6IFtdLFxuICAgICAgICAgICAgY2hhcnM6IFtdLFxuICAgICAgICAgICAga2VybmluZzogW10sXG4gICAgICAgICAgICBrZXJuaW5nczogW10sXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChjb25zdCBpIGluIGl0ZW1zKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBFeHRyYWN0IGl0ZW0gbmFtZVxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGl0ZW1zW2ldLm1hdGNoKC9eW2Etel0rL2dtKVswXSBhcyBrZXlvZiBCaXRtYXBGb250RGF0YTtcblxuICAgICAgICAgICAgLy8gRXh0cmFjdCBpdGVtIGF0dHJpYnV0ZSBsaXN0IGFzIHN0cmluZyBleC46IFwid2lkdGg9MTBcIlxuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlTGlzdCA9IGl0ZW1zW2ldLm1hdGNoKC9bYS16QS1aXSs9KFteXFxzXCInXSt8XCIoW15cIl0qKVwiKS9nbSk7XG5cbiAgICAgICAgICAgIC8vIENvbnZlcnQgYXR0cmlidXRlIGxpc3QgaW50byBhbiBvYmplY3RcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhOiBhbnkgPSB7fTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBpIGluIGF0dHJpYnV0ZUxpc3QpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gU3BsaXQga2V5LXZhbHVlIHBhaXJzXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BsaXQgPSBhdHRyaWJ1dGVMaXN0W2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gc3BsaXRbMF07XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZXZlbnR1YWwgcXVvdGVzIGZyb20gdmFsdWVcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJWYWx1ZSA9IHNwbGl0WzFdLnJlcGxhY2UoL1wiL2dtLCAnJyk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gY29udmVydCB2YWx1ZSBpbnRvIGZsb2F0XG4gICAgICAgICAgICAgICAgY29uc3QgZmxvYXRWYWx1ZSA9IHBhcnNlRmxvYXQoc3RyVmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgLy8gVXNlIHN0cmluZyB2YWx1ZSBjYXNlIGZsb2F0IHZhbHVlIGlzIE5hTlxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaXNOYU4oZmxvYXRWYWx1ZSkgPyBzdHJWYWx1ZSA6IGZsb2F0VmFsdWU7XG5cbiAgICAgICAgICAgICAgICBpdGVtRGF0YVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFB1c2ggY3VycmVudCBpdGVtIHRvIHRoZSByZXN1bHRpbmcgZGF0YVxuICAgICAgICAgICAgcmF3RGF0YVtuYW1lXS5wdXNoKGl0ZW1EYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvbnQgPSBuZXcgQml0bWFwRm9udERhdGEoKTtcblxuICAgICAgICByYXdEYXRhLmluZm8uZm9yRWFjaCgoaW5mbykgPT4gZm9udC5pbmZvLnB1c2goe1xuICAgICAgICAgICAgZmFjZTogaW5mby5mYWNlLFxuICAgICAgICAgICAgc2l6ZTogcGFyc2VJbnQoaW5mby5zaXplLCAxMCksXG4gICAgICAgIH0pKTtcblxuICAgICAgICByYXdEYXRhLmNvbW1vbi5mb3JFYWNoKChjb21tb24pID0+IGZvbnQuY29tbW9uLnB1c2goe1xuICAgICAgICAgICAgbGluZUhlaWdodDogcGFyc2VJbnQoY29tbW9uLmxpbmVIZWlnaHQsIDEwKSxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHJhd0RhdGEucGFnZS5mb3JFYWNoKChwYWdlKSA9PiBmb250LnBhZ2UucHVzaCh7XG4gICAgICAgICAgICBpZDogcGFyc2VJbnQocGFnZS5pZCwgMTApLFxuICAgICAgICAgICAgZmlsZTogcGFnZS5maWxlLFxuICAgICAgICB9KSk7XG5cbiAgICAgICAgcmF3RGF0YS5jaGFyLmZvckVhY2goKGNoYXIpID0+IGZvbnQuY2hhci5wdXNoKHtcbiAgICAgICAgICAgIGlkOiBwYXJzZUludChjaGFyLmlkLCAxMCksXG4gICAgICAgICAgICBwYWdlOiBwYXJzZUludChjaGFyLnBhZ2UsIDEwKSxcbiAgICAgICAgICAgIHg6IHBhcnNlSW50KGNoYXIueCwgMTApLFxuICAgICAgICAgICAgeTogcGFyc2VJbnQoY2hhci55LCAxMCksXG4gICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQoY2hhci53aWR0aCwgMTApLFxuICAgICAgICAgICAgaGVpZ2h0OiBwYXJzZUludChjaGFyLmhlaWdodCwgMTApLFxuICAgICAgICAgICAgeG9mZnNldDogcGFyc2VJbnQoY2hhci54b2Zmc2V0LCAxMCksXG4gICAgICAgICAgICB5b2Zmc2V0OiBwYXJzZUludChjaGFyLnlvZmZzZXQsIDEwKSxcbiAgICAgICAgICAgIHhhZHZhbmNlOiBwYXJzZUludChjaGFyLnhhZHZhbmNlLCAxMCksXG4gICAgICAgIH0pKTtcblxuICAgICAgICByYXdEYXRhLmtlcm5pbmcuZm9yRWFjaCgoa2VybmluZykgPT4gZm9udC5rZXJuaW5nLnB1c2goe1xuICAgICAgICAgICAgZmlyc3Q6IHBhcnNlSW50KGtlcm5pbmcuZmlyc3QsIDEwKSxcbiAgICAgICAgICAgIHNlY29uZDogcGFyc2VJbnQoa2VybmluZy5zZWNvbmQsIDEwKSxcbiAgICAgICAgICAgIGFtb3VudDogcGFyc2VJbnQoa2VybmluZy5hbW91bnQsIDEwKSxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHJldHVybiBmb250O1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBCaXRtYXBGb250RGF0YSB9IGZyb20gJy4uL0JpdG1hcEZvbnREYXRhJztcblxuLyoqXG4gKiBCaXRtYXBGb250IGZvcm1hdCB0aGF0J3MgWE1MLWJhc2VkLlxuICpcbiAqIEBjbGFzc1xuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIFhNTEZvcm1hdFxue1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHJlc291cmNlIHJlZmVycyB0byB4bWwgZm9udCBkYXRhLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHthbnl9IGRhdGFcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHJlc291cmNlIGNvdWxkIGJlIHRyZWF0ZWQgYXMgZm9udCBkYXRhLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgc3RhdGljIHRlc3QoZGF0YTogdW5rbm93bik6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiBkYXRhIGluc3RhbmNlb2YgWE1MRG9jdW1lbnRcbiAgICAgICAgICAgICYmIGRhdGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhZ2UnKS5sZW5ndGhcbiAgICAgICAgICAgICYmIGRhdGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2luZm8nKVswXS5nZXRBdHRyaWJ1dGUoJ2ZhY2UnKSAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IHRoZSBYTUwgaW50byBCaXRtYXBGb250RGF0YSB0aGF0IHdlIGNhbiB1c2UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1hNTERvY3VtZW50fSB4bWxcbiAgICAgKiBAcmV0dXJuIHtCaXRtYXBGb250RGF0YX0gRGF0YSB0byB1c2UgZm9yIEJpdG1hcEZvbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgcGFyc2UoeG1sOiBYTUxEb2N1bWVudCk6IEJpdG1hcEZvbnREYXRhXG4gICAge1xuICAgICAgICBjb25zdCBkYXRhID0gbmV3IEJpdG1hcEZvbnREYXRhKCk7XG4gICAgICAgIGNvbnN0IGluZm8gPSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2luZm8nKTtcbiAgICAgICAgY29uc3QgY29tbW9uID0geG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjb21tb24nKTtcbiAgICAgICAgY29uc3QgcGFnZSA9IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGFnZScpO1xuICAgICAgICBjb25zdCBjaGFyID0geG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjaGFyJyk7XG4gICAgICAgIGNvbnN0IGtlcm5pbmcgPSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2tlcm5pbmcnKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZm8ubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRhdGEuaW5mby5wdXNoKHtcbiAgICAgICAgICAgICAgICBmYWNlOiBpbmZvW2ldLmdldEF0dHJpYnV0ZSgnZmFjZScpLFxuICAgICAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KGluZm9baV0uZ2V0QXR0cmlidXRlKCdzaXplJyksIDEwKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21tb24ubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRhdGEuY29tbW9uLnB1c2goe1xuICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IHBhcnNlSW50KGNvbW1vbltpXS5nZXRBdHRyaWJ1dGUoJ2xpbmVIZWlnaHQnKSwgMTApLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2UubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRhdGEucGFnZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBpZDogcGFyc2VJbnQocGFnZVtpXS5nZXRBdHRyaWJ1dGUoJ2lkJyksIDEwKSB8fCAwLFxuICAgICAgICAgICAgICAgIGZpbGU6IHBhZ2VbaV0uZ2V0QXR0cmlidXRlKCdmaWxlJyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhci5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbGV0dGVyID0gY2hhcltpXTtcblxuICAgICAgICAgICAgZGF0YS5jaGFyLnB1c2goe1xuICAgICAgICAgICAgICAgIGlkOiBwYXJzZUludChsZXR0ZXIuZ2V0QXR0cmlidXRlKCdpZCcpLCAxMCksXG4gICAgICAgICAgICAgICAgcGFnZTogcGFyc2VJbnQobGV0dGVyLmdldEF0dHJpYnV0ZSgncGFnZScpLCAxMCkgfHwgMCxcbiAgICAgICAgICAgICAgICB4OiBwYXJzZUludChsZXR0ZXIuZ2V0QXR0cmlidXRlKCd4JyksIDEwKSxcbiAgICAgICAgICAgICAgICB5OiBwYXJzZUludChsZXR0ZXIuZ2V0QXR0cmlidXRlKCd5JyksIDEwKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQobGV0dGVyLmdldEF0dHJpYnV0ZSgnd2lkdGgnKSwgMTApLFxuICAgICAgICAgICAgICAgIGhlaWdodDogcGFyc2VJbnQobGV0dGVyLmdldEF0dHJpYnV0ZSgnaGVpZ2h0JyksIDEwKSxcbiAgICAgICAgICAgICAgICB4b2Zmc2V0OiBwYXJzZUludChsZXR0ZXIuZ2V0QXR0cmlidXRlKCd4b2Zmc2V0JyksIDEwKSxcbiAgICAgICAgICAgICAgICB5b2Zmc2V0OiBwYXJzZUludChsZXR0ZXIuZ2V0QXR0cmlidXRlKCd5b2Zmc2V0JyksIDEwKSxcbiAgICAgICAgICAgICAgICB4YWR2YW5jZTogcGFyc2VJbnQobGV0dGVyLmdldEF0dHJpYnV0ZSgneGFkdmFuY2UnKSwgMTApLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtlcm5pbmcubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRhdGEua2VybmluZy5wdXNoKHtcbiAgICAgICAgICAgICAgICBmaXJzdDogcGFyc2VJbnQoa2VybmluZ1tpXS5nZXRBdHRyaWJ1dGUoJ2ZpcnN0JyksIDEwKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IHBhcnNlSW50KGtlcm5pbmdbaV0uZ2V0QXR0cmlidXRlKCdzZWNvbmQnKSwgMTApLFxuICAgICAgICAgICAgICAgIGFtb3VudDogcGFyc2VJbnQoa2VybmluZ1tpXS5nZXRBdHRyaWJ1dGUoJ2Ftb3VudCcpLCAxMCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBCaXRtYXBGb250RGF0YSB9IGZyb20gJy4uL0JpdG1hcEZvbnREYXRhJztcbmltcG9ydCB7IFhNTEZvcm1hdCB9IGZyb20gJy4vWE1MRm9ybWF0JztcblxuLyoqXG4gKiBCaXRtYXBGb250IGZvcm1hdCB0aGF0J3MgWE1MLWJhc2VkLlxuICpcbiAqIEBjbGFzc1xuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIFhNTFN0cmluZ0Zvcm1hdFxue1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHJlc291cmNlIHJlZmVycyB0byB0ZXh0IHhtbCBmb250IGRhdGEuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2FueX0gZGF0YVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgcmVzb3VyY2UgY291bGQgYmUgdHJlYXRlZCBhcyBmb250IGRhdGEsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgdGVzdChkYXRhOiB1bmtub3duKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyAmJiBkYXRhLmluZGV4T2YoJzxmb250PicpID4gLTEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHhtbCA9IG5ldyBzZWxmLkRPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhkYXRhLCAndGV4dC94bWwnKTtcblxuICAgICAgICAgICAgcmV0dXJuIFhNTEZvcm1hdC50ZXN0KHhtbCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCB0aGUgdGV4dCBYTUwgaW50byBCaXRtYXBGb250RGF0YSB0aGF0IHdlIGNhbiB1c2UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30geG1sVHh0XG4gICAgICogQHJldHVybiB7Qml0bWFwRm9udERhdGF9IERhdGEgdG8gdXNlIGZvciBCaXRtYXBGb250XG4gICAgICovXG4gICAgc3RhdGljIHBhcnNlKHhtbFR4dDogc3RyaW5nKTogQml0bWFwRm9udERhdGFcbiAgICB7XG4gICAgICAgIGNvbnN0IHhtbCA9IG5ldyB3aW5kb3cuRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHhtbFR4dCwgJ3RleHQveG1sJyk7XG5cbiAgICAgICAgcmV0dXJuIFhNTEZvcm1hdC5wYXJzZSh4bWwpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBUZXh0Rm9ybWF0IH0gZnJvbSAnLi9UZXh0Rm9ybWF0JztcbmltcG9ydCB7IFhNTEZvcm1hdCB9IGZyb20gJy4vWE1MRm9ybWF0JztcbmltcG9ydCB7IFhNTFN0cmluZ0Zvcm1hdCB9IGZyb20gJy4vWE1MU3RyaW5nRm9ybWF0JztcblxuLy8gUmVnaXN0ZXJlZCBmb3JtYXRzLCBtYXliZSBtYWtlIHRoaXMgZXh0ZW5zaWJsZSBpbiB0aGUgZnV0dXJlP1xuY29uc3QgZm9ybWF0cyA9IFtcbiAgICBUZXh0Rm9ybWF0LFxuICAgIFhNTEZvcm1hdCxcbiAgICBYTUxTdHJpbmdGb3JtYXQsXG5dIGFzIGNvbnN0O1xuXG4vKipcbiAqIEF1dG8tZGV0ZWN0IEJpdG1hcEZvbnQgcGFyc2luZyBmb3JtYXQgYmFzZWQgb24gZGF0YS5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge2FueX0gZGF0YSAtIERhdGEgdG8gZGV0ZWN0IGZvcm1hdFxuICogQHJldHVybiB7YW55fSBGb3JtYXQgb3IgbnVsbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXV0b0RldGVjdEZvcm1hdChkYXRhOiB1bmtub3duKTogdHlwZW9mIGZvcm1hdHNbbnVtYmVyXSB8IG51bGxcbntcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1hdHMubGVuZ3RoOyBpKyspXG4gICAge1xuICAgICAgICBpZiAoZm9ybWF0c1tpXS50ZXN0KGRhdGEpKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0c1tpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuIiwgImltcG9ydCB7IFRleHRTdHlsZSwgVGV4dE1ldHJpY3MsIFRFWFRfR1JBRElFTlQgfSBmcm9tICdAcGl4aS90ZXh0JztcblxuLy8gVE9ETzogUHJldmVudCBjb2RlIGR1cGxpY2F0aW9uIGIvdyBnZW5lcmF0ZUZpbGxTdHlsZSAmIFRleHQjZ2VuZXJhdGVGaWxsU3R5bGVcblxuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGZpbGwgc3R5bGUuIENhbiBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIGEgZ3JhZGllbnQgYmFzZWQgb24gdGhlIGZpbGwgc3R5bGUgYmVpbmcgYW4gYXJyYXlcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IHN0eWxlIC0gVGhlIHN0eWxlLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gbGluZXMgLSBUaGUgbGluZXMgb2YgdGV4dC5cbiAqIEByZXR1cm4ge3N0cmluZ3xudW1iZXJ8Q2FudmFzR3JhZGllbnR9IFRoZSBmaWxsIHN0eWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUZpbGxTdHlsZShcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LFxuICAgIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICBzdHlsZTogVGV4dFN0eWxlLFxuICAgIHJlc29sdXRpb246IG51bWJlcixcbiAgICBsaW5lczogc3RyaW5nW10sXG4gICAgbWV0cmljczogVGV4dE1ldHJpY3Ncbik6IHN0cmluZ3xDYW52YXNHcmFkaWVudHxDYW52YXNQYXR0ZXJuXG57XG4gICAgLy8gVE9ETzogQ2FuJ3QgaGF2ZSBkaWZmZXJlbnQgdHlwZXMgZm9yIGdldHRlciBhbmQgc2V0dGVyLiBUaGUgZ2V0dGVyIHNob3VsZG4ndCBoYXZlIHRoZSBudW1iZXIgdHlwZSBhc1xuICAgIC8vICAgICAgIHRoZSBzZXR0ZXIgY29udmVydHMgdG8gc3RyaW5nLiBTZWUgdGhpcyB0aHJlYWQgZm9yIG1vcmUgZGV0YWlsczpcbiAgICAvLyAgICAgICBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzI1MjFcbiAgICBjb25zdCBmaWxsU3R5bGU6IHN0cmluZ3xzdHJpbmdbXXxDYW52YXNHcmFkaWVudHxDYW52YXNQYXR0ZXJuID0gc3R5bGUuZmlsbCBhcyBhbnk7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmlsbFN0eWxlKSlcbiAgICB7XG4gICAgICAgIHJldHVybiBmaWxsU3R5bGU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGZpbGxTdHlsZS5sZW5ndGggPT09IDEpXG4gICAge1xuICAgICAgICByZXR1cm4gZmlsbFN0eWxlWzBdO1xuICAgIH1cblxuICAgIC8vIHRoZSBncmFkaWVudCB3aWxsIGJlIGV2ZW5seSBzcGFjZWQgb3V0IGFjY29yZGluZyB0byBob3cgbGFyZ2UgdGhlIGFycmF5IGlzLlxuICAgIC8vIFsnI0ZGMDAwMCcsICcjMDBGRjAwJywgJyMwMDAwRkYnXSB3b3VsZCBjcmVhdGVkIHN0b3BzIGF0IDAuMjUsIDAuNSBhbmQgMC43NVxuICAgIGxldCBncmFkaWVudDogc3RyaW5nW118Q2FudmFzR3JhZGllbnQ7XG5cbiAgICAvLyBhIGRyb3BzaGFkb3cgd2lsbCBlbmxhcmdlIHRoZSBjYW52YXMgYW5kIHJlc3VsdCBpbiB0aGUgZ3JhZGllbnQgYmVpbmdcbiAgICAvLyBnZW5lcmF0ZWQgd2l0aCB0aGUgaW5jb3JyZWN0IGRpbWVuc2lvbnNcbiAgICBjb25zdCBkcm9wU2hhZG93Q29ycmVjdGlvbiA9IChzdHlsZS5kcm9wU2hhZG93KSA/IHN0eWxlLmRyb3BTaGFkb3dEaXN0YW5jZSA6IDA7XG5cbiAgICAvLyBzaG91bGQgYWxzbyB0YWtlIHBhZGRpbmcgaW50byBhY2NvdW50LCBwYWRkaW5nIGNhbiBvZmZzZXQgdGhlIGdyYWRpZW50XG4gICAgY29uc3QgcGFkZGluZyA9IHN0eWxlLnBhZGRpbmcgfHwgMDtcblxuICAgIGNvbnN0IHdpZHRoID0gTWF0aC5jZWlsKGNhbnZhcy53aWR0aCAvIHJlc29sdXRpb24pIC0gZHJvcFNoYWRvd0NvcnJlY3Rpb24gLSAocGFkZGluZyAqIDIpO1xuICAgIGNvbnN0IGhlaWdodCA9IE1hdGguY2VpbChjYW52YXMuaGVpZ2h0IC8gcmVzb2x1dGlvbikgLSBkcm9wU2hhZG93Q29ycmVjdGlvbiAtIChwYWRkaW5nICogMik7XG5cbiAgICAvLyBtYWtlIGEgY29weSBvZiB0aGUgc3R5bGUgc2V0dGluZ3MsIHNvIHdlIGNhbiBtYW5pcHVsYXRlIHRoZW0gbGF0ZXJcbiAgICBjb25zdCBmaWxsID0gZmlsbFN0eWxlLnNsaWNlKCk7XG4gICAgY29uc3QgZmlsbEdyYWRpZW50U3RvcHMgPSBzdHlsZS5maWxsR3JhZGllbnRTdG9wcy5zbGljZSgpO1xuXG4gICAgLy8gd2FudGluZyB0byBldmVubHkgZGlzdHJpYnV0ZSB0aGUgZmlsbHMuIFNvIGFuIGFycmF5IG9mIDQgY29sb3VycyBzaG91bGQgZ2l2ZSBmaWxscyBvZiAwLjI1LCAwLjUgYW5kIDAuNzVcbiAgICBpZiAoIWZpbGxHcmFkaWVudFN0b3BzLmxlbmd0aClcbiAgICB7XG4gICAgICAgIGNvbnN0IGxlbmd0aFBsdXMxID0gZmlsbC5sZW5ndGggKyAxO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoUGx1czE7ICsraSlcbiAgICAgICAge1xuICAgICAgICAgICAgZmlsbEdyYWRpZW50U3RvcHMucHVzaChpIC8gbGVuZ3RoUGx1czEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gc3RvcCB0aGUgYmxlZWRpbmcgb2YgdGhlIGxhc3QgZ3JhZGllbnQgb24gdGhlIGxpbmUgYWJvdmUgdG8gdGhlIHRvcCBncmFkaWVudCBvZiB0aGUgdGhpcyBsaW5lXG4gICAgLy8gYnkgaGFyZCBkZWZpbmluZyB0aGUgZmlyc3QgZ3JhZGllbnQgY29sb3VyIGF0IHBvaW50IDAsIGFuZCBsYXN0IGdyYWRpZW50IGNvbG91ciBhdCBwb2ludCAxXG4gICAgZmlsbC51bnNoaWZ0KGZpbGxTdHlsZVswXSk7XG4gICAgZmlsbEdyYWRpZW50U3RvcHMudW5zaGlmdCgwKTtcblxuICAgIGZpbGwucHVzaChmaWxsU3R5bGVbZmlsbFN0eWxlLmxlbmd0aCAtIDFdKTtcbiAgICBmaWxsR3JhZGllbnRTdG9wcy5wdXNoKDEpO1xuXG4gICAgaWYgKHN0eWxlLmZpbGxHcmFkaWVudFR5cGUgPT09IFRFWFRfR1JBRElFTlQuTElORUFSX1ZFUlRJQ0FMKVxuICAgIHtcbiAgICAgICAgLy8gc3RhcnQgdGhlIGdyYWRpZW50IGF0IHRoZSB0b3AgY2VudGVyIG9mIHRoZSBjYW52YXMsIGFuZCBlbmQgYXQgdGhlIGJvdHRvbSBtaWRkbGUgb2YgdGhlIGNhbnZhc1xuICAgICAgICBncmFkaWVudCA9IGNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQod2lkdGggLyAyLCBwYWRkaW5nLCB3aWR0aCAvIDIsIGhlaWdodCArIHBhZGRpbmcpO1xuXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gcmVwZWF0IHRoZSBncmFkaWVudCBzbyB0aGF0IGVhY2ggaW5kaXZpZHVhbCBsaW5lIG9mIHRleHQgaGFzIHRoZSBzYW1lIHZlcnRpY2FsIGdyYWRpZW50IGVmZmVjdFxuICAgICAgICAvLyBbJyNGRjAwMDAnLCAnIzAwRkYwMCcsICcjMDAwMEZGJ10gb3ZlciAyIGxpbmVzIHdvdWxkIGNyZWF0ZSBzdG9wcyBhdCAwLjEyNSwgMC4yNSwgMC4zNzUsIDAuNjI1LCAwLjc1LCAwLjg3NVxuXG4gICAgICAgIC8vIFRoZXJlJ3MgcG90ZW50aWFsIGZvciBmbG9hdGluZyBwb2ludCBwcmVjaXNpb24gaXNzdWVzIGF0IHRoZSBzZWFtcyBiZXR3ZWVuIGdyYWRpZW50IHJlcGVhdHMuXG4gICAgICAgIC8vIFRoZSBsb29wIGJlbG93IGdlbmVyYXRlcyB0aGUgc3RvcHMgaW4gb3JkZXIsIHNvIHRyYWNrIHRoZSBsYXN0IGdlbmVyYXRlZCBvbmUgdG8gcHJldmVudFxuICAgICAgICAvLyBmbG9hdGluZyBwb2ludCBwcmVjaXNpb24gZnJvbSBtYWtpbmcgdXMgZ28gdGhlIHRlZW5pZXN0IGJpdCBiYWNrd2FyZHMsIHJlc3VsdGluZyBpblxuICAgICAgICAvLyB0aGUgZmlyc3QgYW5kIGxhc3QgY29sb3JzIGdldHRpbmcgc3dhcHBlZC5cbiAgICAgICAgbGV0IGxhc3RJdGVyYXRpb25TdG9wID0gMDtcblxuICAgICAgICAvLyBBY3R1YWwgaGVpZ2h0IG9mIHRoZSB0ZXh0IGl0c2VsZiwgbm90IGNvdW50aW5nIHNwYWNpbmcgZm9yIGxpbmVIZWlnaHQvbGVhZGluZy9kcm9wU2hhZG93IGV0Y1xuICAgICAgICBjb25zdCB0ZXh0SGVpZ2h0ID0gbWV0cmljcy5mb250UHJvcGVydGllcy5mb250U2l6ZSArIHN0eWxlLnN0cm9rZVRoaWNrbmVzcztcblxuICAgICAgICAvLyB0ZXh0SGVpZ2h0LCBidXQgYXMgYSAwLTEgc2l6ZSBpbiBnbG9iYWwgZ3JhZGllbnQgc3RvcCBzcGFjZVxuICAgICAgICBjb25zdCBncmFkU3RvcExpbmVIZWlnaHQgPSB0ZXh0SGVpZ2h0IC8gaGVpZ2h0O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHRoaXNMaW5lVG9wID0gbWV0cmljcy5saW5lSGVpZ2h0ICogaTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmaWxsLmxlbmd0aDsgaisrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIDAtMSBzdG9wIHBvaW50IGZvciB0aGUgY3VycmVudCBsaW5lLCBtdWx0aXBsaWVkIHRvIGdsb2JhbCBzcGFjZSBhZnRlcndhcmRzXG4gICAgICAgICAgICAgICAgbGV0IGxpbmVTdG9wID0gMDtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmlsbEdyYWRpZW50U3RvcHNbal0gPT09ICdudW1iZXInKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZVN0b3AgPSBmaWxsR3JhZGllbnRTdG9wc1tqXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZVN0b3AgPSBqIC8gZmlsbC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsU3RvcCA9ICh0aGlzTGluZVRvcCAvIGhlaWdodCkgKyAobGluZVN0b3AgKiBncmFkU3RvcExpbmVIZWlnaHQpO1xuXG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBjb2xvciBzdG9wIGdlbmVyYXRpb24gZ29pbmcgYmFja3dhcmRzIGZyb20gZmxvYXRpbmcgcG9pbnQgaW1wcmVjaXNpb25cbiAgICAgICAgICAgICAgICBsZXQgY2xhbXBlZFN0b3AgPSBNYXRoLm1heChsYXN0SXRlcmF0aW9uU3RvcCwgZ2xvYmFsU3RvcCk7XG5cbiAgICAgICAgICAgICAgICBjbGFtcGVkU3RvcCA9IE1hdGgubWluKGNsYW1wZWRTdG9wLCAxKTsgLy8gQ2FwIGF0IDEgYXMgd2VsbCBmb3Igc2FmZXR5J3Mgc2FrZSB0byBhdm9pZCBhIHBvc3NpYmxlIHRocm93LlxuICAgICAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcChjbGFtcGVkU3RvcCwgZmlsbFtqXSk7XG4gICAgICAgICAgICAgICAgbGFzdEl0ZXJhdGlvblN0b3AgPSBjbGFtcGVkU3RvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICAvLyBzdGFydCB0aGUgZ3JhZGllbnQgYXQgdGhlIGNlbnRlciBsZWZ0IG9mIHRoZSBjYW52YXMsIGFuZCBlbmQgYXQgdGhlIGNlbnRlciByaWdodCBvZiB0aGUgY2FudmFzXG4gICAgICAgIGdyYWRpZW50ID0gY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudChwYWRkaW5nLCBoZWlnaHQgLyAyLCB3aWR0aCArIHBhZGRpbmcsIGhlaWdodCAvIDIpO1xuXG4gICAgICAgIC8vIGNhbiBqdXN0IGV2ZW5seSBzcGFjZSBvdXQgdGhlIGdyYWRpZW50cyBpbiB0aGlzIGNhc2UsIGFzIG11bHRpcGxlIGxpbmVzIG1ha2VzIG5vIGRpZmZlcmVuY2VcbiAgICAgICAgLy8gdG8gYW4gZXZlbiBsZWZ0IHRvIHJpZ2h0IGdyYWRpZW50XG4gICAgICAgIGNvbnN0IHRvdGFsSXRlcmF0aW9ucyA9IGZpbGwubGVuZ3RoICsgMTtcbiAgICAgICAgbGV0IGN1cnJlbnRJdGVyYXRpb24gPSAxO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsbC5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IHN0b3A6IG51bWJlcjtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWxsR3JhZGllbnRTdG9wc1tpXSA9PT0gJ251bWJlcicpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3RvcCA9IGZpbGxHcmFkaWVudFN0b3BzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0b3AgPSBjdXJyZW50SXRlcmF0aW9uIC8gdG90YWxJdGVyYXRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKHN0b3AsIGZpbGxbaV0pO1xuICAgICAgICAgICAgY3VycmVudEl0ZXJhdGlvbisrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdyYWRpZW50O1xufVxuIiwgImltcG9ydCB7IGdlbmVyYXRlRmlsbFN0eWxlIH0gZnJvbSAnLi9nZW5lcmF0ZUZpbGxTdHlsZSc7XG5pbXBvcnQgeyBoZXgycmdiLCBzdHJpbmcyaGV4IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBUZXh0TWV0cmljcywgVGV4dFN0eWxlIH0gZnJvbSAnQHBpeGkvdGV4dCc7XG5cbi8vIFRPRE86IFByZXZlbnQgY29kZSBkdXBsaWNhdGlvbiBiL3cgZHJhd0dseXBoICYgVGV4dCN1cGRhdGVUZXh0XG5cbi8qKlxuICogRHJhd3MgdGhlIGdseXBoIGBtZXRyaWNzLnRleHRgIG9uIHRoZSBnaXZlbiBjYW52YXMuXG4gKlxuICogSWdub3JlZCBiZWNhdXNlIG5vdCBkaXJlY3RseSBleHBvc2VkLlxuICpcbiAqIEBpZ25vcmVcbiAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGNhbnZhc1xuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHRcbiAqIEBwYXJhbSB7VGV4dE1ldHJpY3N9IG1ldHJpY3NcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcGFyYW0ge251bWJlcn0geVxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb25cbiAqIEBwYXJhbSB7VGV4dFN0eWxlfSBzdHlsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZHJhd0dseXBoKFxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsXG4gICAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIG1ldHJpY3M6IFRleHRNZXRyaWNzLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXIsXG4gICAgcmVzb2x1dGlvbjogbnVtYmVyLFxuICAgIHN0eWxlOiBUZXh0U3R5bGVcbik6IHZvaWRcbntcbiAgICBjb25zdCBjaGFyID0gbWV0cmljcy50ZXh0O1xuICAgIGNvbnN0IGZvbnRQcm9wZXJ0aWVzID0gbWV0cmljcy5mb250UHJvcGVydGllcztcblxuICAgIGNvbnRleHQudHJhbnNsYXRlKHgsIHkpO1xuICAgIGNvbnRleHQuc2NhbGUocmVzb2x1dGlvbiwgcmVzb2x1dGlvbik7XG5cbiAgICBjb25zdCB0eCA9IHN0eWxlLnN0cm9rZVRoaWNrbmVzcyAvIDI7XG4gICAgY29uc3QgdHkgPSAtKHN0eWxlLnN0cm9rZVRoaWNrbmVzcyAvIDIpO1xuXG4gICAgY29udGV4dC5mb250ID0gc3R5bGUudG9Gb250U3RyaW5nKCk7XG4gICAgY29udGV4dC5saW5lV2lkdGggPSBzdHlsZS5zdHJva2VUaGlja25lc3M7XG4gICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSBzdHlsZS50ZXh0QmFzZWxpbmU7XG4gICAgY29udGV4dC5saW5lSm9pbiA9IHN0eWxlLmxpbmVKb2luO1xuICAgIGNvbnRleHQubWl0ZXJMaW1pdCA9IHN0eWxlLm1pdGVyTGltaXQ7XG5cbiAgICAvLyBzZXQgY2FudmFzIHRleHQgc3R5bGVzXG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBnZW5lcmF0ZUZpbGxTdHlsZShjYW52YXMsIGNvbnRleHQsIHN0eWxlLCByZXNvbHV0aW9uLCBbY2hhcl0sIG1ldHJpY3MpO1xuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHlsZS5zdHJva2UgYXMgc3RyaW5nO1xuXG4gICAgY29udGV4dC5mb250ID0gc3R5bGUudG9Gb250U3RyaW5nKCk7XG4gICAgY29udGV4dC5saW5lV2lkdGggPSBzdHlsZS5zdHJva2VUaGlja25lc3M7XG4gICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSBzdHlsZS50ZXh0QmFzZWxpbmU7XG4gICAgY29udGV4dC5saW5lSm9pbiA9IHN0eWxlLmxpbmVKb2luO1xuICAgIGNvbnRleHQubWl0ZXJMaW1pdCA9IHN0eWxlLm1pdGVyTGltaXQ7XG5cbiAgICAvLyBzZXQgY2FudmFzIHRleHQgc3R5bGVzXG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBnZW5lcmF0ZUZpbGxTdHlsZShjYW52YXMsIGNvbnRleHQsIHN0eWxlLCByZXNvbHV0aW9uLCBbY2hhcl0sIG1ldHJpY3MpO1xuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHlsZS5zdHJva2UgYXMgc3RyaW5nO1xuXG4gICAgY29uc3QgZHJvcFNoYWRvd0NvbG9yID0gc3R5bGUuZHJvcFNoYWRvd0NvbG9yO1xuICAgIGNvbnN0IHJnYiA9IGhleDJyZ2IodHlwZW9mIGRyb3BTaGFkb3dDb2xvciA9PT0gJ251bWJlcicgPyBkcm9wU2hhZG93Q29sb3IgOiBzdHJpbmcyaGV4KGRyb3BTaGFkb3dDb2xvcikpO1xuXG4gICAgaWYgKHN0eWxlLmRyb3BTaGFkb3cpXG4gICAge1xuICAgICAgICBjb250ZXh0LnNoYWRvd0NvbG9yID0gYHJnYmEoJHtyZ2JbMF0gKiAyNTV9LCR7cmdiWzFdICogMjU1fSwke3JnYlsyXSAqIDI1NX0sJHtzdHlsZS5kcm9wU2hhZG93QWxwaGF9KWA7XG4gICAgICAgIGNvbnRleHQuc2hhZG93Qmx1ciA9IHN0eWxlLmRyb3BTaGFkb3dCbHVyO1xuICAgICAgICBjb250ZXh0LnNoYWRvd09mZnNldFggPSBNYXRoLmNvcyhzdHlsZS5kcm9wU2hhZG93QW5nbGUpICogc3R5bGUuZHJvcFNoYWRvd0Rpc3RhbmNlO1xuICAgICAgICBjb250ZXh0LnNoYWRvd09mZnNldFkgPSBNYXRoLnNpbihzdHlsZS5kcm9wU2hhZG93QW5nbGUpICogc3R5bGUuZHJvcFNoYWRvd0Rpc3RhbmNlO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICBjb250ZXh0LnNoYWRvd0NvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgY29udGV4dC5zaGFkb3dCbHVyID0gMDtcbiAgICAgICAgY29udGV4dC5zaGFkb3dPZmZzZXRYID0gMDtcbiAgICAgICAgY29udGV4dC5zaGFkb3dPZmZzZXRZID0gMDtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUuc3Ryb2tlICYmIHN0eWxlLnN0cm9rZVRoaWNrbmVzcylcbiAgICB7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dChjaGFyLCB0eCwgdHkgKyBtZXRyaWNzLmxpbmVIZWlnaHQgLSBmb250UHJvcGVydGllcy5kZXNjZW50KTtcbiAgICB9XG4gICAgaWYgKHN0eWxlLmZpbGwpXG4gICAge1xuICAgICAgICBjb250ZXh0LmZpbGxUZXh0KGNoYXIsIHR4LCB0eSArIG1ldHJpY3MubGluZUhlaWdodCAtIGZvbnRQcm9wZXJ0aWVzLmRlc2NlbnQpO1xuICAgIH1cblxuICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApOyAvLyBkZWZhdWx0cyBuZWVkZWQgZm9yIG9sZGVyIGJyb3dzZXJzIChlLmcuIE9wZXJhIDI5KVxuXG4gICAgY29udGV4dC5maWxsU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAwKSc7XG59XG4iLCAiLyoqXG4gKiBQcm9jZXNzZXMgdGhlIHBhc3NlZCBjaGFyYWN0ZXIgc2V0IGRhdGEgYW5kIHJldHVybnMgYSBmbGF0dGVuZWQgYXJyYXkgb2YgYWxsIHRoZSBjaGFyYWN0ZXJzLlxuICpcbiAqIElnbm9yZWQgYmVjYXVzZSBub3QgZGlyZWN0bHkgZXhwb3NlZC5cbiAqXG4gKiBAaWdub3JlXG4gKiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdIHwgc3RyaW5nW11bXSB9IGNoYXJzXG4gKiBAcmV0dXJucyB7c3RyaW5nW119XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlQ2hhcmFjdGVycyhjaGFyczogc3RyaW5nIHwgKHN0cmluZyB8IHN0cmluZ1tdKVtdKTogc3RyaW5nW11cbntcbiAgICAvLyBTcGxpdCB0aGUgY2hhcnMgc3RyaW5nIGludG8gaW5kaXZpZHVhbCBjaGFyYWN0ZXJzXG4gICAgaWYgKHR5cGVvZiBjaGFycyA9PT0gJ3N0cmluZycpXG4gICAge1xuICAgICAgICBjaGFycyA9IFtjaGFyc107XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGFuIGFycmF5IG9mIGNoYXJhY3RlcnMrcmFuZ2VzXG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBjaGFycy5sZW5ndGg7IGkgPCBqOyBpKyspXG4gICAge1xuICAgICAgICBjb25zdCBpdGVtID0gY2hhcnNbaV07XG5cbiAgICAgICAgLy8gSGFuZGxlIHJhbmdlIGRlbGltaXRlZCBieSBzdGFydC9lbmQgY2hhcnNcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmxlbmd0aCAhPT0gMilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFtCaXRtYXBGb250XTogSW52YWxpZCBjaGFyYWN0ZXIgcmFuZ2UgbGVuZ3RoLCBleHBlY3RpbmcgMiBnb3QgJHtpdGVtLmxlbmd0aH0uYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0Q29kZSA9IGl0ZW1bMF0uY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZENvZGUgPSBpdGVtWzFdLmNoYXJDb2RlQXQoMCk7XG5cbiAgICAgICAgICAgIGlmIChlbmRDb2RlIDwgc3RhcnRDb2RlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignW0JpdG1hcEZvbnRdOiBJbnZhbGlkIGNoYXJhY3RlciByYW5nZS4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0Q29kZSwgaiA9IGVuZENvZGU7IGkgPD0gajsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEhhbmRsZSBhIGNoYXJhY3RlciBzZXQgc3RyaW5nXG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goLi4uaXRlbS5zcGxpdCgnJykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApXG4gICAge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1tCaXRtYXBGb250XTogRW1wdHkgc2V0IHdoZW4gcmVzb2x2aW5nIGNoYXJhY3RlcnMuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsICJpbXBvcnQgeyBnZXRSZXNvbHV0aW9uT2ZVcmwgfSBmcm9tICdAcGl4aS91dGlscyc7XG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB7IFRleHR1cmUsIEJhc2VUZXh0dXJlIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBUZXh0U3R5bGUsIFRleHRNZXRyaWNzIH0gZnJvbSAnQHBpeGkvdGV4dCc7XG5pbXBvcnQgeyBhdXRvRGV0ZWN0Rm9ybWF0IH0gZnJvbSAnLi9mb3JtYXRzJztcbmltcG9ydCB7IEJpdG1hcEZvbnREYXRhIH0gZnJvbSAnLi9CaXRtYXBGb250RGF0YSc7XG5pbXBvcnQgeyByZXNvbHZlQ2hhcmFjdGVycywgZHJhd0dseXBoIH0gZnJvbSAnLi91dGlscyc7XG5cbmltcG9ydCB0eXBlIHsgRGljdCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB0eXBlIHsgSVRleHRTdHlsZSB9IGZyb20gJ0BwaXhpL3RleHQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElCaXRtYXBGb250Q2hhcmFjdGVyXG57XG4gICAgeE9mZnNldDogbnVtYmVyO1xuICAgIHlPZmZzZXQ6IG51bWJlcjtcbiAgICB4QWR2YW5jZTogbnVtYmVyO1xuICAgIHRleHR1cmU6IFRleHR1cmU7XG4gICAgcGFnZTogbnVtYmVyO1xuICAgIGtlcm5pbmc6IERpY3Q8bnVtYmVyPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQml0bWFwRm9udE9wdGlvbnNcbntcbiAgICBjaGFycz86IHN0cmluZyB8IChzdHJpbmcgfCBzdHJpbmdbXSlbXTtcbiAgICByZXNvbHV0aW9uPzogbnVtYmVyO1xuICAgIHBhZGRpbmc/OiBudW1iZXI7XG4gICAgdGV4dHVyZVdpZHRoPzogbnVtYmVyO1xuICAgIHRleHR1cmVIZWlnaHQ/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQml0bWFwRm9udCByZXByZXNlbnRzIGEgdHlwZWZhY2UgYXZhaWxhYmxlIGZvciB1c2Ugd2l0aCB0aGUgQml0bWFwVGV4dCBjbGFzcy4gVXNlIHRoZSBgaW5zdGFsbGBcbiAqIG1ldGhvZCBmb3IgYWRkaW5nIGEgZm9udCB0byBiZSB1c2VkLlxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEJpdG1hcEZvbnRcbntcbiAgICAvKipcbiAgICAgKiBUaGlzIGNoYXJhY3RlciBzZXQgaW5jbHVkZXMgYWxsIHRoZSBsZXR0ZXJzIGluIHRoZSBhbHBoYWJldCAoYm90aCBsb3dlci0gYW5kIHVwcGVyLSBjYXNlKS5cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlciB7c3RyaW5nW11bXX1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIEJpdG1hcEZvbnQuZnJvbShcIkV4YW1wbGVGb250XCIsIHN0eWxlLCB7IGNoYXJzOiBCaXRtYXBGb250LkFMUEhBIH0pXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBBTFBIQSA9IFtbJ2EnLCAneiddLCBbJ0EnLCAnWiddLCAnICddO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBjaGFyYWN0ZXIgc2V0IGluY2x1ZGVzIGFsbCBkZWNpbWFsIGRpZ2l0cyAoZnJvbSAwIHRvIDkpLlxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmdbXVtdfVxuICAgICAqIEBleGFtcGxlXG4gICAgICogQml0bWFwRm9udC5mcm9tKFwiRXhhbXBsZUZvbnRcIiwgc3R5bGUsIHsgY2hhcnM6IEJpdG1hcEZvbnQuTlVNRVJJQyB9KVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTlVNRVJJQyA9IFtbJzAnLCAnOSddXTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgY2hhcmFjdGVyIHNldCBpcyB0aGUgdW5pb24gb2YgYEJpdG1hcEZvbnQuQUxQSEFgIGFuZCBgQml0bWFwRm9udC5OVU1FUklDYC5cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlciB7c3RyaW5nW11bXX1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEFMUEhBTlVNRVJJQyA9IFtbJ2EnLCAneiddLCBbJ0EnLCAnWiddLCBbJzAnLCAnOSddLCAnICddO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBjaGFyYWN0ZXIgc2V0IGNvbnNpc3RzIG9mIGFsbCB0aGUgQVNDSUkgdGFibGUuXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXIge3N0cmluZ1tdW119XG4gICAgICogQHNlZSBodHRwOi8vd3d3LmFzY2lpdGFibGUuY29tL1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQVNDSUkgPSBbWycgJywgJ34nXV07XG5cbiAgICAvKipcbiAgICAgKiBDb2xsZWN0aW9uIG9mIGRlZmF1bHQgb3B0aW9ucyB3aGVuIHVzaW5nIGBCaXRtYXBGb250LmZyb21gLlxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXIge1BJWEkuSUJpdG1hcEZvbnRPcHRpb25zfVxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByZXNvbHV0aW9uPTFcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdGV4dHVyZVdpZHRoPTUxMlxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0ZXh0dXJlSGVpZ2h0PTUxMlxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwYWRkaW5nPTRcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xzdHJpbmdbXXxzdHJpbmdbXVtdfSBjaGFycz1QSVhJLkJpdG1hcEZvbnQuQUxQSEFOVU1FUklDXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBkZWZhdWx0T3B0aW9uczogSUJpdG1hcEZvbnRPcHRpb25zID0ge1xuICAgICAgICByZXNvbHV0aW9uOiAxLFxuICAgICAgICB0ZXh0dXJlV2lkdGg6IDUxMixcbiAgICAgICAgdGV4dHVyZUhlaWdodDogNTEyLFxuICAgICAgICBwYWRkaW5nOiA0LFxuICAgICAgICBjaGFyczogQml0bWFwRm9udC5BTFBIQU5VTUVSSUMsXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbGxlY3Rpb24gb2YgYXZhaWxhYmxlL2luc3RhbGxlZCBmb250cy5cbiAgICAgKlxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyIHtPYmplY3QuPHN0cmluZywgUElYSS5CaXRtYXBGb250Pn1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGF2YWlsYWJsZTogRGljdDxCaXRtYXBGb250PiA9IHt9O1xuICAgIHB1YmxpYyByZWFkb25seSBmb250OiBzdHJpbmc7XG4gICAgcHVibGljIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcbiAgICBwdWJsaWMgcmVhZG9ubHkgbGluZUhlaWdodDogbnVtYmVyO1xuICAgIHB1YmxpYyByZWFkb25seSBjaGFyczogRGljdDxJQml0bWFwRm9udENoYXJhY3Rlcj47XG4gICAgcHVibGljIHJlYWRvbmx5IHBhZ2VUZXh0dXJlczogRGljdDxUZXh0dXJlPjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5CaXRtYXBGb250RGF0YX0gZGF0YVxuICAgICAqIEBwYXJhbSB7UElYSS5UZXh0dXJlW118T2JqZWN0LjxzdHJpbmcsIFBJWEkuVGV4dHVyZT59IHRleHR1cmVzXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGF0YTogQml0bWFwRm9udERhdGEsIHRleHR1cmVzOiBUZXh0dXJlW118RGljdDxUZXh0dXJlPilcbiAgICB7XG4gICAgICAgIGNvbnN0IFtpbmZvXSA9IGRhdGEuaW5mbztcbiAgICAgICAgY29uc3QgW2NvbW1vbl0gPSBkYXRhLmNvbW1vbjtcbiAgICAgICAgY29uc3QgW3BhZ2VdID0gZGF0YS5wYWdlO1xuICAgICAgICBjb25zdCByZXMgPSBnZXRSZXNvbHV0aW9uT2ZVcmwocGFnZS5maWxlKTtcbiAgICAgICAgY29uc3QgcGFnZVRleHR1cmVzOiBEaWN0PFRleHR1cmU+ID0ge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmb250IGZhY2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvbnQgPSBpbmZvLmZhY2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzaXplIG9mIHRoZSBmb250IGZhY2UgaW4gcGl4ZWxzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gaW5mby5zaXplO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbGluZS1oZWlnaHQgb2YgdGhlIGZvbnQgZmFjZSBpbiBwaXhlbHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpbmVIZWlnaHQgPSBjb21tb24ubGluZUhlaWdodCAvIHJlcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1hcCBvZiBjaGFyYWN0ZXJzIGJ5IGNoYXJhY3RlciBjb2RlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtvYmplY3R9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFycyA9IHt9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFwIG9mIGJhc2UgcGFnZSB0ZXh0dXJlcyAoaS5lLiwgc2hlZXRzIG9mIGdseXBocykuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdH1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhZ2VUZXh0dXJlcyA9IHBhZ2VUZXh0dXJlcztcblxuICAgICAgICAvLyBDb252ZXJ0IHRoZSBpbnB1dCBUZXh0dXJlLCBUZXh0dXJlcyBvciBvYmplY3RcbiAgICAgICAgLy8gaW50byBhIHBhZ2UgVGV4dHVyZSBsb29rdXAgYnkgXCJpZFwiXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5wYWdlLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB7IGlkLCBmaWxlIH0gPSBkYXRhLnBhZ2VbaV07XG5cbiAgICAgICAgICAgIHBhZ2VUZXh0dXJlc1tpZF0gPSB0ZXh0dXJlcyBpbnN0YW5jZW9mIEFycmF5XG4gICAgICAgICAgICAgICAgPyB0ZXh0dXJlc1tpXSA6IHRleHR1cmVzW2ZpbGVdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGFyc2UgbGV0dGVyc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuY2hhci5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgeyBpZCwgcGFnZSB9ID0gZGF0YS5jaGFyW2ldO1xuICAgICAgICAgICAgbGV0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCwgeG9mZnNldCwgeW9mZnNldCwgeGFkdmFuY2UgfSA9IGRhdGEuY2hhcltpXTtcblxuICAgICAgICAgICAgeCAvPSByZXM7XG4gICAgICAgICAgICB5IC89IHJlcztcbiAgICAgICAgICAgIHdpZHRoIC89IHJlcztcbiAgICAgICAgICAgIGhlaWdodCAvPSByZXM7XG4gICAgICAgICAgICB4b2Zmc2V0IC89IHJlcztcbiAgICAgICAgICAgIHlvZmZzZXQgLz0gcmVzO1xuICAgICAgICAgICAgeGFkdmFuY2UgLz0gcmVzO1xuXG4gICAgICAgICAgICBjb25zdCByZWN0ID0gbmV3IFJlY3RhbmdsZShcbiAgICAgICAgICAgICAgICB4ICsgKHBhZ2VUZXh0dXJlc1twYWdlXS5mcmFtZS54IC8gcmVzKSxcbiAgICAgICAgICAgICAgICB5ICsgKHBhZ2VUZXh0dXJlc1twYWdlXS5mcmFtZS55IC8gcmVzKSxcbiAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMuY2hhcnNbaWRdID0ge1xuICAgICAgICAgICAgICAgIHhPZmZzZXQ6IHhvZmZzZXQsXG4gICAgICAgICAgICAgICAgeU9mZnNldDogeW9mZnNldCxcbiAgICAgICAgICAgICAgICB4QWR2YW5jZTogeGFkdmFuY2UsXG4gICAgICAgICAgICAgICAga2VybmluZzoge30sXG4gICAgICAgICAgICAgICAgdGV4dHVyZTogbmV3IFRleHR1cmUoXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VUZXh0dXJlc1twYWdlXS5iYXNlVGV4dHVyZSxcbiAgICAgICAgICAgICAgICAgICAgcmVjdFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgcGFnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYXJzZSBrZXJuaW5nc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEua2VybmluZy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IHsgZmlyc3QsIHNlY29uZCwgYW1vdW50IH0gPSBkYXRhLmtlcm5pbmdbaV07XG5cbiAgICAgICAgICAgIGZpcnN0IC89IHJlcztcbiAgICAgICAgICAgIHNlY29uZCAvPSByZXM7XG4gICAgICAgICAgICBhbW91bnQgLz0gcmVzO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jaGFyc1tzZWNvbmRdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnNbc2Vjb25kXS5rZXJuaW5nW2ZpcnN0XSA9IGFtb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSByZWZlcmVuY2VzIHRvIGNyZWF0ZWQgZ2x5cGggdGV4dHVyZXMuXG4gICAgICovXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZFxuICAgIHtcbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLmNoYXJzKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNoYXJzW2lkXS50ZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnNbaWRdLnRleHR1cmUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLnBhZ2VUZXh0dXJlcylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5wYWdlVGV4dHVyZXNbaWRdLmRlc3Ryb3kodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VUZXh0dXJlc1tpZF0gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHJlYWRvbmx5IG51bGwuXG4gICAgICAgICh0aGlzIGFzIGFueSkuY2hhcnMgPSBudWxsO1xuICAgICAgICAodGhpcyBhcyBhbnkpLnBhZ2VUZXh0dXJlcyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBuZXcgYml0bWFwIGZvbnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtYTUxEb2N1bWVudHxzdHJpbmd8UElYSS5CaXRtYXBGb250RGF0YX0gZGF0YSAtIFRoZVxuICAgICAqICAgICAgICBjaGFyYWN0ZXJzIG1hcCB0aGF0IGNvdWxkIGJlIHByb3ZpZGVkIGFzIHhtbCBvciByYXcgc3RyaW5nLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIFBJWEkuVGV4dHVyZT58UElYSS5UZXh0dXJlfFBJWEkuVGV4dHVyZVtdfVxuICAgICAqICAgICAgICB0ZXh0dXJlcyAtIExpc3Qgb2YgdGV4dHVyZXMgZm9yIGVhY2ggcGFnZS5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkJpdG1hcEZvbnR9IFJlc3VsdCBmb250IG9iamVjdCB3aXRoIGZvbnQsIHNpemUsIGxpbmVIZWlnaHRcbiAgICAgKiAgICAgICAgIGFuZCBjaGFyIGZpZWxkcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGluc3RhbGwoXG4gICAgICAgIGRhdGE6IHN0cmluZ3xYTUxEb2N1bWVudHxCaXRtYXBGb250RGF0YSxcbiAgICAgICAgdGV4dHVyZXM6IFRleHR1cmV8VGV4dHVyZVtdfERpY3Q8VGV4dHVyZT5cbiAgICApOiBCaXRtYXBGb250XG4gICAge1xuICAgICAgICBsZXQgZm9udERhdGE7XG5cbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCaXRtYXBGb250RGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgZm9udERhdGEgPSBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gYXV0b0RldGVjdEZvcm1hdChkYXRhKTtcblxuICAgICAgICAgICAgaWYgKCFmb3JtYXQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnJlY29nbml6ZWQgZGF0YSBmb3JtYXQgZm9yIGZvbnQuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvbnREYXRhID0gZm9ybWF0LnBhcnNlKGRhdGEgYXMgYW55KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNpbmdsZSB0ZXh0dXJlLCBjb252ZXJ0IHRvIGxpc3RcbiAgICAgICAgaWYgKHRleHR1cmVzIGluc3RhbmNlb2YgVGV4dHVyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGV4dHVyZXMgPSBbdGV4dHVyZXNdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9udCA9IG5ldyBCaXRtYXBGb250KGZvbnREYXRhLCB0ZXh0dXJlcyk7XG5cbiAgICAgICAgQml0bWFwRm9udC5hdmFpbGFibGVbZm9udC5mb250XSA9IGZvbnQ7XG5cbiAgICAgICAgcmV0dXJuIGZvbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGJpdG1hcCBmb250IGJ5IG5hbWUuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHVuaW5zdGFsbChuYW1lOiBzdHJpbmcpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBmb250ID0gQml0bWFwRm9udC5hdmFpbGFibGVbbmFtZV07XG5cbiAgICAgICAgaWYgKCFmb250KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGZvbnQgZm91bmQgbmFtZWQgJyR7bmFtZX0nYCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb250LmRlc3Ryb3koKTtcbiAgICAgICAgZGVsZXRlIEJpdG1hcEZvbnQuYXZhaWxhYmxlW25hbWVdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIGJpdG1hcC1mb250IGZvciB0aGUgZ2l2ZW4gc3R5bGUgYW5kIGNoYXJhY3RlciBzZXQuIFRoaXMgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAqIGtlcm5pbmdzIHlldC4gV2l0aCBgc3R5bGVgIHByb3BlcnRpZXMsIG9ubHkgdGhlIGZvbGxvd2luZyBub24tbGF5b3V0IHByb3BlcnRpZXMgYXJlIHVzZWQ6XG4gICAgICpcbiAgICAgKiAtIHtAbGluayBQSVhJLlRleHRTdHlsZSNkcm9wU2hhZG93fGRyb3BTaGFkb3d9XG4gICAgICogLSB7QGxpbmsgUElYSS5UZXh0U3R5bGUjZHJvcFNoYWRvd0Rpc3RhbmNlfGRyb3BTaGFkb3dEaXN0YW5jZX1cbiAgICAgKiAtIHtAbGluayBQSVhJLlRleHRTdHlsZSNkcm9wU2hhZG93Q29sb3J8ZHJvcFNoYWRvd0NvbG9yfVxuICAgICAqIC0ge0BsaW5rIFBJWEkuVGV4dFN0eWxlI2Ryb3BTaGFkb3dCbHVyfGRyb3BTaGFkb3dCbHVyfVxuICAgICAqIC0ge0BsaW5rIFBJWEkuVGV4dFN0eWxlI2Ryb3BTaGFkb3dBbmdsZXxkcm9wU2hhZG93QW5nbGV9XG4gICAgICogLSB7QGxpbmsgUElYSS5UZXh0U3R5bGUjZmlsbHxmaWxsfVxuICAgICAqIC0ge0BsaW5rIFBJWEkuVGV4dFN0eWxlI2ZpbGxHcmFkaWVudFN0b3BzfGZpbGxHcmFkaWVudFN0b3BzfVxuICAgICAqIC0ge0BsaW5rIFBJWEkuVGV4dFN0eWxlI2ZpbGxHcmFkaWVudFR5cGV8ZmlsbEdyYWRpZW50VHlwZX1cbiAgICAgKiAtIHtAbGluayBQSVhJLlRleHRTdHlsZSNmb250RmFtaWx5fGZvbnRGYW1pbHl9XG4gICAgICogLSB7QGxpbmsgUElYSS5UZXh0U3R5bGUjZm9udFNpemV8Zm9udFNpemV9XG4gICAgICogLSB7QGxpbmsgUElYSS5UZXh0U3R5bGUjZm9udFZhcmlhbnR8Zm9udFZhcmlhbnR9XG4gICAgICogLSB7QGxpbmsgUElYSS5UZXh0U3R5bGUjZm9udFdlaWdodHxmb250V2VpZ2h0fVxuICAgICAqIC0ge0BsaW5rIFBJWEkuVGV4dFN0eWxlI2xpbmVKb2lufGxpbmVKb2lufVxuICAgICAqIC0ge0BsaW5rIFBJWEkuVGV4dFN0eWxlI21pdGVyTGltaXR8bWl0ZXJMaW1pdH1cbiAgICAgKiAtIHtAbGluayBQSVhJLlRleHRTdHlsZSNzdHJva2V8c3Ryb2tlfVxuICAgICAqIC0ge0BsaW5rIFBJWEkuVGV4dFN0eWxlI3N0cm9rZVRoaWNrbmVzc3xzdHJva2VUaGlja25lc3N9XG4gICAgICogLSB7QGxpbmsgUElYSS5UZXh0U3R5bGUjdGV4dEJhc2VsaW5lfHRleHRCYXNlbGluZX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGN1c3RvbSBmb250IHRvIHVzZSB3aXRoIEJpdG1hcFRleHQuXG4gICAgICogQHBhcmFtIHtvYmplY3R8UElYSS5UZXh0U3R5bGV9IFtzdHlsZV0gLSBTdHlsZSBvcHRpb25zIHRvIHJlbmRlciB3aXRoIEJpdG1hcEZvbnQuXG4gICAgICogQHBhcmFtIHtQSVhJLklCaXRtYXBGb250T3B0aW9uc30gW29wdGlvbnNdIC0gU2V0dXAgb3B0aW9ucyBmb3IgZm9udCBvciBuYW1lIG9mIHRoZSBmb250LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfHN0cmluZ1tdW119IFtvcHRpb25zLmNoYXJzPVBJWEkuQml0bWFwRm9udC5BTFBIQU5VTUVSSUNdIC0gY2hhcmFjdGVycyBpbmNsdWRlZFxuICAgICAqICAgICAgaW4gdGhlIGZvbnQgc2V0LiBZb3UgY2FuIGFsc28gdXNlIHJhbmdlcy4gRm9yIGV4YW1wbGUsIGBbWydhJywgJ3onXSwgWydBJywgJ1onXSwgXCIhQCMkJV4mKigpfnt9W10gXCJdYC5cbiAgICAgKiAgICAgIERvbid0IGZvcmdldCB0byBpbmNsdWRlIHNwYWNlcyAnICcgaW4geW91ciBjaGFyYWN0ZXIgc2V0IVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5yZXNvbHV0aW9uPTFdIC0gUmVuZGVyIHJlc29sdXRpb24gZm9yIGdseXBocy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMudGV4dHVyZVdpZHRoPTUxMl0gLSBPcHRpb25hbCB3aWR0aCBvZiBhdGxhcywgc21hbGxlciB2YWx1ZXMgdG8gcmVkdWNlIG1lbW9yeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMudGV4dHVyZUhlaWdodD01MTJdIC0gT3B0aW9uYWwgaGVpZ2h0IG9mIGF0bGFzLCBzbWFsbGVyIHZhbHVlcyB0byByZWR1Y2UgbWVtb3J5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5wYWRkaW5nPTRdIC0gUGFkZGluZyBiZXR3ZWVuIGdseXBocyBvbiB0ZXh0dXJlIGF0bGFzLlxuICAgICAqIEByZXR1cm4ge1BJWEkuQml0bWFwRm9udH0gRm9udCBnZW5lcmF0ZWQgYnkgc3R5bGUgb3B0aW9ucy5cbiAgICAgKiBAc3RhdGljXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBQSVhJLkJpdG1hcEZvbnQuZnJvbShcIlRpdGxlRm9udFwiLCB7XG4gICAgICogICAgIGZvbnRGYW1pbHk6IFwiQXJpYWxcIixcbiAgICAgKiAgICAgZm9udFNpemU6IDEyLFxuICAgICAqICAgICBzdHJva2VUaGlja25lc3M6IDIsXG4gICAgICogICAgIGZpbGw6IFwicHVycGxlXCJcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGNvbnN0IHRpdGxlID0gbmV3IFBJWEkuQml0bWFwVGV4dChcIlRoaXMgaXMgdGhlIHRpdGxlXCIsIHsgZm9udE5hbWU6IFwiVGl0bGVGb250XCIgfSk7XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBmcm9tKG5hbWU6IHN0cmluZywgdGV4dFN0eWxlPzogVGV4dFN0eWxlIHwgUGFydGlhbDxJVGV4dFN0eWxlPiwgb3B0aW9ucz86IElCaXRtYXBGb250T3B0aW9ucyk6IEJpdG1hcEZvbnRcbiAgICB7XG4gICAgICAgIGlmICghbmFtZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdbQml0bWFwRm9udF0gUHJvcGVydHkgYG5hbWVgIGlzIHJlcXVpcmVkLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2hhcnMsXG4gICAgICAgICAgICBwYWRkaW5nLFxuICAgICAgICAgICAgcmVzb2x1dGlvbixcbiAgICAgICAgICAgIHRleHR1cmVXaWR0aCxcbiAgICAgICAgICAgIHRleHR1cmVIZWlnaHQgfSA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICB7fSwgQml0bWFwRm9udC5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgICAgY29uc3QgY2hhcnNMaXN0ID0gcmVzb2x2ZUNoYXJhY3RlcnMoY2hhcnMpO1xuICAgICAgICBjb25zdCBzdHlsZSA9IHRleHRTdHlsZSBpbnN0YW5jZW9mIFRleHRTdHlsZSA/IHRleHRTdHlsZSA6IG5ldyBUZXh0U3R5bGUodGV4dFN0eWxlKTtcbiAgICAgICAgY29uc3QgbGluZVdpZHRoID0gdGV4dHVyZVdpZHRoO1xuICAgICAgICBjb25zdCBmb250RGF0YSA9IG5ldyBCaXRtYXBGb250RGF0YSgpO1xuXG4gICAgICAgIGZvbnREYXRhLmluZm9bMF0gPSB7XG4gICAgICAgICAgICBmYWNlOiBzdHlsZS5mb250RmFtaWx5IGFzIHN0cmluZyxcbiAgICAgICAgICAgIHNpemU6IHN0eWxlLmZvbnRTaXplIGFzIG51bWJlcixcbiAgICAgICAgfTtcbiAgICAgICAgZm9udERhdGEuY29tbW9uWzBdID0ge1xuICAgICAgICAgICAgbGluZUhlaWdodDogc3R5bGUuZm9udFNpemUgYXMgbnVtYmVyLFxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBwb3NpdGlvblggPSAwO1xuICAgICAgICBsZXQgcG9zaXRpb25ZID0gMDtcblxuICAgICAgICBsZXQgY2FudmFzO1xuICAgICAgICBsZXQgY29udGV4dDtcbiAgICAgICAgbGV0IGJhc2VUZXh0dXJlO1xuICAgICAgICBsZXQgbWF4Q2hhckhlaWdodCA9IDA7XG4gICAgICAgIGNvbnN0IGJhc2VUZXh0dXJlcyA9IFtdO1xuICAgICAgICBjb25zdCB0ZXh0dXJlczogVGV4dHVyZVtdID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyc0xpc3QubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghY2FudmFzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHRleHR1cmVXaWR0aDtcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdGV4dHVyZUhlaWdodDtcblxuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZSA9IG5ldyBCYXNlVGV4dHVyZShjYW52YXMsIHsgcmVzb2x1dGlvbiB9KTtcblxuICAgICAgICAgICAgICAgIGJhc2VUZXh0dXJlcy5wdXNoKGJhc2VUZXh0dXJlKTtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlcy5wdXNoKG5ldyBUZXh0dXJlKGJhc2VUZXh0dXJlKSk7XG5cbiAgICAgICAgICAgICAgICBmb250RGF0YS5wYWdlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpZDogdGV4dHVyZXMubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZTogJycsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE1lYXN1cmUgZ2x5cGggZGltZW5zaW9uc1xuICAgICAgICAgICAgY29uc3QgbWV0cmljcyA9IFRleHRNZXRyaWNzLm1lYXN1cmVUZXh0KGNoYXJzTGlzdFtpXSwgc3R5bGUsIGZhbHNlLCBjYW52YXMpO1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBtZXRyaWNzLndpZHRoO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5jZWlsKG1ldHJpY3MuaGVpZ2h0KTtcblxuICAgICAgICAgICAgLy8gVGhpcyBpcyB1Z2x5IC0gYnV0IGl0YWxpY3MgYXJlIGdpdmVuIG1vcmUgc3BhY2Ugc28gdGhleSBkb24ndCBvdmVybGFwXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlR2x5cGhXaWR0aCA9IE1hdGguY2VpbCgoc3R5bGUuZm9udFN0eWxlID09PSAnaXRhbGljJyA/IDIgOiAxKSAqIHdpZHRoKTtcblxuICAgICAgICAgICAgLy8gQ2FuJ3QgZml0IGNoYXIgYW55bW9yZTogbmV4dCBjYW52YXMgcGxlYXNlIVxuICAgICAgICAgICAgaWYgKHBvc2l0aW9uWSA+PSB0ZXh0dXJlSGVpZ2h0IC0gKGhlaWdodCAqIHJlc29sdXRpb24pKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvblkgPT09IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHVzZXIgZGVidWdnaW5nIGFuIGluZmluaXRlIGxvb3AgKG9yIGRvIHdlPyA6KVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFtCaXRtYXBGb250XSB0ZXh0dXJlSGVpZ2h0ICR7dGV4dHVyZUhlaWdodH1weCBpcyBgXG4gICAgICAgICAgICAgICAgICAgICAgICArIGB0b28gc21hbGwgZm9yICR7c3R5bGUuZm9udFNpemV9cHggZm9udHNgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAtLWk7XG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGF0bGFzIG9uY2UgY3VycmVudCBoYXMgZmlsbGVkIHVwXG4gICAgICAgICAgICAgICAgY2FudmFzID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBiYXNlVGV4dHVyZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25ZID0gMDtcbiAgICAgICAgICAgICAgICBwb3NpdGlvblggPSAwO1xuICAgICAgICAgICAgICAgIG1heENoYXJIZWlnaHQgPSAwO1xuXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1heENoYXJIZWlnaHQgPSBNYXRoLm1heChoZWlnaHQgKyBtZXRyaWNzLmZvbnRQcm9wZXJ0aWVzLmRlc2NlbnQsIG1heENoYXJIZWlnaHQpO1xuXG4gICAgICAgICAgICAvLyBXcmFwIGxpbmUgb25jZSBmdWxsIHJvdyBoYXMgYmVlbiByZW5kZXJlZFxuICAgICAgICAgICAgaWYgKCh0ZXh0dXJlR2x5cGhXaWR0aCAqIHJlc29sdXRpb24pICsgcG9zaXRpb25YID49IGxpbmVXaWR0aClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25ZICs9IG1heENoYXJIZWlnaHQgKiByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uWSA9IE1hdGguY2VpbChwb3NpdGlvblkpO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IDA7XG4gICAgICAgICAgICAgICAgbWF4Q2hhckhlaWdodCA9IDA7XG5cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZHJhd0dseXBoKGNhbnZhcywgY29udGV4dCwgbWV0cmljcywgcG9zaXRpb25YLCBwb3NpdGlvblksIHJlc29sdXRpb24sIHN0eWxlKTtcblxuICAgICAgICAgICAgLy8gVW5pcXVlIChudW1lcmljKSBJRCBtYXBwaW5nIHRvIHRoaXMgZ2x5cGhcbiAgICAgICAgICAgIGNvbnN0IGlkID0gbWV0cmljcy50ZXh0LmNoYXJDb2RlQXQoMCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHRleHR1cmUgaG9sZGluZyBqdXN0IHRoZSBnbHlwaFxuICAgICAgICAgICAgZm9udERhdGEuY2hhci5wdXNoKHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBwYWdlOiB0ZXh0dXJlcy5sZW5ndGggLSAxLFxuICAgICAgICAgICAgICAgIHg6IHBvc2l0aW9uWCAvIHJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgeTogcG9zaXRpb25ZIC8gcmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICB3aWR0aDogdGV4dHVyZUdseXBoV2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgICAgIHhvZmZzZXQ6IDAsXG4gICAgICAgICAgICAgICAgeW9mZnNldDogMCxcbiAgICAgICAgICAgICAgICB4YWR2YW5jZTogTWF0aC5jZWlsKHdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAtIChzdHlsZS5kcm9wU2hhZG93ID8gc3R5bGUuZHJvcFNoYWRvd0Rpc3RhbmNlIDogMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC0gKHN0eWxlLnN0cm9rZSA/IHN0eWxlLnN0cm9rZVRoaWNrbmVzcyA6IDApKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwb3NpdGlvblggKz0gKHRleHR1cmVHbHlwaFdpZHRoICsgKDIgKiBwYWRkaW5nKSkgKiByZXNvbHV0aW9uO1xuICAgICAgICAgICAgcG9zaXRpb25YID0gTWF0aC5jZWlsKHBvc2l0aW9uWCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb250ID0gbmV3IEJpdG1hcEZvbnQoZm9udERhdGEsIHRleHR1cmVzKTtcblxuICAgICAgICAvLyBNYWtlIGl0IGVhc2llciB0byByZXBsYWNlIGEgZm9udFxuICAgICAgICBpZiAoQml0bWFwRm9udC5hdmFpbGFibGVbbmFtZV0gIT09IHVuZGVmaW5lZClcbiAgICAgICAge1xuICAgICAgICAgICAgQml0bWFwRm9udC51bmluc3RhbGwobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBCaXRtYXBGb250LmF2YWlsYWJsZVtuYW1lXSA9IGZvbnQ7XG5cbiAgICAgICAgcmV0dXJuIGZvbnQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAaW50ZXJmYWNlIElCaXRtYXBGb250T3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmcgfCBzdHJpbmdbXSB8IHN0cmluZ1tdW119IFtjaGFycz1QSVhJLkJpdG1hcEZvbnQuQUxQSEFOVU1FUklDXSAtIHRoZSBjaGFyYWN0ZXIgc2V0IHRvIGdlbmVyYXRlXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3Jlc29sdXRpb249MV0gLSB0aGUgcmVzb2x1dGlvbiBmb3IgcmVuZGVyaW5nXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BhZGRpbmc9NF0gLSB0aGUgcGFkZGluZyBiZXR3ZWVuIGdseXBocyBpbiB0aGUgYXRsYXNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGV4dHVyZVdpZHRoPTUxMl0gLSB0aGUgd2lkdGggb2YgdGhlIHRleHR1cmUgYXRsYXNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGV4dHVyZUhlaWdodD01MTJdIC0gdGhlIGhlaWdodCBvZiB0aGUgdGV4dHVyZSBhdGxhc1xuICovXG5cbiIsICJpbXBvcnQgeyBPYnNlcnZhYmxlUG9pbnQsIFBvaW50IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcbmltcG9ydCB7IE1lc2gsIE1lc2hHZW9tZXRyeSwgTWVzaE1hdGVyaWFsIH0gZnJvbSAnQHBpeGkvbWVzaCc7XG5pbXBvcnQgeyByZW1vdmVJdGVtcywgZGVwcmVjYXRpb24gfSBmcm9tICdAcGl4aS91dGlscyc7XG5pbXBvcnQgeyBCaXRtYXBGb250IH0gZnJvbSAnLi9CaXRtYXBGb250JztcblxuaW1wb3J0IHR5cGUgeyBEaWN0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBSZWN0YW5nbGUgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgSUJpdG1hcFRleHRTdHlsZSB9IGZyb20gJy4vQml0bWFwVGV4dFN0eWxlJztcbmltcG9ydCB0eXBlIHsgVGV4dFN0eWxlQWxpZ24gfSBmcm9tICdAcGl4aS90ZXh0JztcbmltcG9ydCB0eXBlIHsgQml0bWFwRm9udERhdGEgfSBmcm9tICcuL0JpdG1hcEZvbnREYXRhJztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuaW1wb3J0IHR5cGUgeyBJRGVzdHJveU9wdGlvbnMgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcblxuaW50ZXJmYWNlIFBhZ2VNZXNoRGF0YSB7XG4gICAgaW5kZXg6IG51bWJlcjtcbiAgICBpbmRleENvdW50OiBudW1iZXI7XG4gICAgdmVydGV4Q291bnQ6IG51bWJlcjtcbiAgICB1dnNDb3VudDogbnVtYmVyO1xuICAgIHRvdGFsOiBudW1iZXI7XG4gICAgbWVzaDogTWVzaDtcbiAgICB2ZXJ0aWNlcz86IEZsb2F0MzJBcnJheTtcbiAgICB1dnM/OiBGbG9hdDMyQXJyYXk7XG4gICAgaW5kaWNlcz86IFVpbnQxNkFycmF5O1xufVxuaW50ZXJmYWNlIENoYXJSZW5kZXJEYXRhIHtcbiAgICB0ZXh0dXJlOiBUZXh0dXJlO1xuICAgIGxpbmU6IG51bWJlcjtcbiAgICBjaGFyQ29kZTogbnVtYmVyO1xuICAgIHBvc2l0aW9uOiBQb2ludDtcbn1cblxuY29uc3QgcGFnZU1lc2hEYXRhUG9vbDogUGFnZU1lc2hEYXRhW10gPSBbXTtcbmNvbnN0IGNoYXJSZW5kZXJEYXRhUG9vbDogQ2hhclJlbmRlckRhdGFbXSA9IFtdO1xuXG4vKipcbiAqIEEgQml0bWFwVGV4dCBvYmplY3Qgd2lsbCBjcmVhdGUgYSBsaW5lIG9yIG11bHRpcGxlIGxpbmVzIG9mIHRleHQgdXNpbmcgYml0bWFwIGZvbnQuXG4gKlxuICogVGhlIHByaW1hcnkgYWR2YW50YWdlIG9mIHRoaXMgY2xhc3Mgb3ZlciBUZXh0IGlzIHRoYXQgYWxsIG9mIHlvdXIgdGV4dHVyZXMgYXJlIHByZS1nZW5lcmF0ZWQgYW5kIGxvYWRpbmcsXG4gKiBtZWFuaW5nIHRoYXQgcmVuZGVyaW5nIGlzIGZhc3QsIGFuZCBjaGFuZ2luZyB0ZXh0IGhhcyBubyBwZXJmb3JtYW5jZSBpbXBsaWNhdGlvbnMuXG4gKlxuICogU3VwcG9ydGluZyBjaGFyYWN0ZXIgc2V0cyBvdGhlciB0aGFuIGxhdGluLCBzdWNoIGFzIENKSyBsYW5ndWFnZXMsIG1heSBiZSBpbXByYWN0aWNhbCBkdWUgdG8gdGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzLlxuICpcbiAqIFRvIHNwbGl0IGEgbGluZSB5b3UgY2FuIHVzZSAnXFxuJywgJ1xccicgb3IgJ1xcclxcbicgaW4geW91ciBzdHJpbmcuXG4gKlxuICogUGl4aUpTIGNhbiBhdXRvLWdlbmVyYXRlIGZvbnRzIG9uLXRoZS1mbHkgdXNpbmcgQml0bWFwRm9udCBvciB1c2UgZm50IGZpbGVzIHByb3ZpZGVkIGJ5OlxuICogaHR0cDovL3d3dy5hbmdlbGNvZGUuY29tL3Byb2R1Y3RzL2JtZm9udC8gZm9yIFdpbmRvd3Mgb3JcbiAqIGh0dHA6Ly93d3cuYm1nbHlwaC5jb20vIGZvciBNYWMuXG4gKlxuICogQSBCaXRtYXBUZXh0IGNhbiBvbmx5IGJlIGNyZWF0ZWQgd2hlbiB0aGUgZm9udCBpcyBsb2FkZWQuXG4gKlxuICogYGBganNcbiAqIC8vIGluIHRoaXMgY2FzZSB0aGUgZm9udCBpcyBpbiBhIGZpbGUgY2FsbGVkICdkZXN5cmVsLmZudCdcbiAqIGxldCBiaXRtYXBUZXh0ID0gbmV3IFBJWEkuQml0bWFwVGV4dChcInRleHQgdXNpbmcgYSBmYW5jeSBmb250IVwiLCB7Zm9udDogXCIzNXB4IERlc3lyZWxcIiwgYWxpZ246IFwicmlnaHRcIn0pO1xuICogYGBgXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLkNvbnRhaW5lclxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xuZXhwb3J0IGNsYXNzIEJpdG1hcFRleHQgZXh0ZW5kcyBDb250YWluZXJcbntcbiAgICBwdWJsaWMgc3RhdGljIHN0eWxlRGVmYXVsdHM6IFBhcnRpYWw8SUJpdG1hcFRleHRTdHlsZT4gPSB7XG4gICAgICAgIGFsaWduOiAnbGVmdCcsXG4gICAgICAgIHRpbnQ6IDB4RkZGRkZGLFxuICAgICAgICBtYXhXaWR0aDogMCxcbiAgICAgICAgbGV0dGVyU3BhY2luZzogMCxcbiAgICB9O1xuICAgIHB1YmxpYyBkaXJ0eTogYm9vbGVhbjtcbiAgICBwcm90ZWN0ZWQgX3RleHRXaWR0aDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfdGV4dEhlaWdodDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBfdGV4dDogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBfbWF4V2lkdGg6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX21heExpbmVIZWlnaHQ6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2xldHRlclNwYWNpbmc6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgX2FuY2hvcjogT2JzZXJ2YWJsZVBvaW50O1xuICAgIHByb3RlY3RlZCBfZm9udE5hbWU6IHN0cmluZztcbiAgICBwcm90ZWN0ZWQgX2ZvbnRTaXplOiBudW1iZXI7XG4gICAgcHJvdGVjdGVkIF9hbGlnbjogVGV4dFN0eWxlQWxpZ247XG4gICAgcHJvdGVjdGVkIF9hY3RpdmVQYWdlc01lc2hEYXRhOiBQYWdlTWVzaERhdGFbXTtcbiAgICBwcm90ZWN0ZWQgX3RpbnQgPSAweEZGRkZGRjtcbiAgICBwcm90ZWN0ZWQgX3JvdW5kUGl4ZWxzOiBib29sZWFuO1xuICAgIHByaXZhdGUgX3RleHR1cmVDYWNoZTogUmVjb3JkPG51bWJlciwgVGV4dHVyZT47XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIEEgc3RyaW5nIHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIHRleHQgdG8gZGlzcGxheS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gc3R5bGUgLSBUaGUgc3R5bGUgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3R5bGUuZm9udE5hbWUgLSBUaGUgaW5zdGFsbGVkIEJpdG1hcEZvbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0eWxlLmZvbnRTaXplXSAtIFRoZSBzaXplIG9mIHRoZSBmb250IGluIHBpeGVscywgZS5nLiAyNC4gSWYgdW5kZWZpbmVkLFxuICAgICAqLiAgICAgdGhpcyB3aWxsIGRlZmF1bHQgdG8gdGhlIEJpdG1hcEZvbnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0eWxlLmFsaWduPSdsZWZ0J10gLSBBbGlnbm1lbnQgZm9yIG11bHRpbGluZSB0ZXh0ICgnbGVmdCcsICdjZW50ZXInIG9yICdyaWdodCcpLFxuICAgICAqICAgICAgZG9lcyBub3QgYWZmZWN0IHNpbmdsZSBsaW5lIHRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdHlsZS50aW50PTB4RkZGRkZGXSAtIFRoZSB0aW50IGNvbG9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3R5bGUubGV0dGVyU3BhY2luZz0wXSAtIFRoZSBhbW91bnQgb2Ygc3BhY2luZyBiZXR3ZWVuIGxldHRlcnMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdHlsZS5tYXhXaWR0aD0wXSAtIFRoZSBtYXggd2lkdGggb2YgdGhlIHRleHQgYmVmb3JlIGxpbmUgd3JhcHBpbmcuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLCBzdHlsZTogUGFydGlhbDxJQml0bWFwVGV4dFN0eWxlPiA9IHt9KVxuICAgIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICBpZiAoc3R5bGUuZm9udClcbiAgICAgICAge1xuICAgICAgICAgICAgZGVwcmVjYXRpb24oJzUuMy4wJywgJ1BJWEkuQml0bWFwVGV4dCBjb25zdHJ1Y3RvciBzdHlsZS5mb250IHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQuJyk7XG5cbiAgICAgICAgICAgIHRoaXMuX3VwZ3JhZGVTdHlsZShzdHlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcHBseSB0aGUgZGVmYXVsdHNcbiAgICAgICAgY29uc3QgeyBhbGlnbiwgdGludCwgbWF4V2lkdGgsIGxldHRlclNwYWNpbmcsIGZvbnROYW1lLCBmb250U2l6ZSB9ID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgIHt9LCBCaXRtYXBUZXh0LnN0eWxlRGVmYXVsdHMsIHN0eWxlKTtcblxuICAgICAgICBpZiAoIUJpdG1hcEZvbnQuYXZhaWxhYmxlW2ZvbnROYW1lXSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEJpdG1hcEZvbnQgXCIke2ZvbnROYW1lfVwiYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29sbGVjdGlvbiBvZiBwYWdlIG1lc2ggZGF0YS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7b2JqZWN0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYWN0aXZlUGFnZXNNZXNoRGF0YSA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcml2YXRlIHRyYWNrZXIgZm9yIHRoZSB3aWR0aCBvZiB0aGUgb3ZlcmFsbCB0ZXh0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3RleHRXaWR0aCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByaXZhdGUgdHJhY2tlciBmb3IgdGhlIGhlaWdodCBvZiB0aGUgb3ZlcmFsbCB0ZXh0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3RleHRIZWlnaHQgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcml2YXRlIHRyYWNrZXIgZm9yIHRoZSBjdXJyZW50IHRleHQgYWxpZ24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2FsaWduID0gYWxpZ247XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByaXZhdGUgdHJhY2tlciBmb3IgdGhlIGN1cnJlbnQgdGludC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGludCA9IHRpbnQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByaXZhdGUgdHJhY2tlciBmb3IgdGhlIGN1cnJlbnQgZm9udCBuYW1lLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9mb250TmFtZSA9IGZvbnROYW1lO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcml2YXRlIHRyYWNrZXIgZm9yIHRoZSBjdXJyZW50IGZvbnQgc2l6ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fZm9udFNpemUgPSBmb250U2l6ZSB8fCBCaXRtYXBGb250LmF2YWlsYWJsZVtmb250TmFtZV0uc2l6ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJpdmF0ZSB0cmFja2VyIGZvciB0aGUgY3VycmVudCB0ZXh0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl90ZXh0ID0gdGV4dDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1heCB3aWR0aCBvZiB0aGlzIGJpdG1hcCB0ZXh0IGluIHBpeGVscy4gSWYgdGhlIHRleHQgcHJvdmlkZWQgaXMgbG9uZ2VyIHRoYW4gdGhlXG4gICAgICAgICAqIHZhbHVlIHByb3ZpZGVkLCBsaW5lIGJyZWFrcyB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgaW5zZXJ0ZWQgaW4gdGhlIGxhc3Qgd2hpdGVzcGFjZS5cbiAgICAgICAgICogRGlzYWJsZSBieSBzZXR0aW5nIHZhbHVlIHRvIDBcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fbWF4V2lkdGggPSBtYXhXaWR0aDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1heCBsaW5lIGhlaWdodC4gVGhpcyBpcyB1c2VmdWwgd2hlbiB0cnlpbmcgdG8gdXNlIHRoZSB0b3RhbCBoZWlnaHQgb2YgdGhlIFRleHQsXG4gICAgICAgICAqIGllOiB3aGVuIHRyeWluZyB0byB2ZXJ0aWNhbGx5IGFsaWduLiAoSW50ZXJuYWxseSB1c2VkKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9tYXhMaW5lSGVpZ2h0ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTGV0dGVyIHNwYWNpbmcuIFRoaXMgaXMgdXNlZnVsIGZvciBzZXR0aW5nIHRoZSBzcGFjZSBiZXR3ZWVuIGNoYXJhY3RlcnMuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2xldHRlclNwYWNpbmcgPSBsZXR0ZXJTcGFjaW5nO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUZXh0IGFuY2hvci4gcmVhZC1vbmx5XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuT2JzZXJ2YWJsZVBvaW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYW5jaG9yID0gbmV3IE9ic2VydmFibGVQb2ludCgoKTogdm9pZCA9PiB7IHRoaXMuZGlydHkgPSB0cnVlOyB9LCB0aGlzLCAwLCAwKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSBQaXhpSlMgd2lsbCBNYXRoLmZsb29yKCkgeC95IHZhbHVlcyB3aGVuIHJlbmRlcmluZ1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLnNldHRpbmdzLlJPVU5EX1BJWEVMU1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcm91bmRQaXhlbHMgPSBzZXR0aW5ncy5ST1VORF9QSVhFTFM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0byBgdHJ1ZWAgaWYgdGhlIEJpdG1hcFRleHQgbmVlZHMgdG8gYmUgcmVkcmF3bi5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZWQgY2hhciB0ZXh0dXJlIGlzIGRlc3Ryb3llZCB3aGVuIEJpdG1hcFRleHQgaXMgZGVzdHJveWVkXG4gICAgICAgICAqIEBtZW1iZXIge1JlY29yZDxudW1iZXIsIFRleHR1cmU+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGV4dHVyZUNhY2hlID0ge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0ZXh0IGFuZCB1cGRhdGVzIGl0IHdoZW4gbmVlZGVkLiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZFxuICAgICAqIGlmIHRoZSBCaXRtYXBGb250IGlzIHJlZ2VuZXJhdGVkLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVUZXh0KCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBCaXRtYXBGb250LmF2YWlsYWJsZVt0aGlzLl9mb250TmFtZV07XG4gICAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5fZm9udFNpemUgLyBkYXRhLnNpemU7XG4gICAgICAgIGNvbnN0IHBvcyA9IG5ldyBQb2ludCgpO1xuICAgICAgICBjb25zdCBjaGFyczogQ2hhclJlbmRlckRhdGFbXSA9IFtdO1xuICAgICAgICBjb25zdCBsaW5lV2lkdGhzID0gW107XG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLl90ZXh0LnJlcGxhY2UoLyg/OlxcclxcbnxcXHIpL2csICdcXG4nKSB8fCAnICc7XG4gICAgICAgIGNvbnN0IHRleHRMZW5ndGggPSB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLl9tYXhXaWR0aCAqIGRhdGEuc2l6ZSAvIHRoaXMuX2ZvbnRTaXplO1xuXG4gICAgICAgIGxldCBwcmV2Q2hhckNvZGUgPSBudWxsO1xuICAgICAgICBsZXQgbGFzdExpbmVXaWR0aCA9IDA7XG4gICAgICAgIGxldCBtYXhMaW5lV2lkdGggPSAwO1xuICAgICAgICBsZXQgbGluZSA9IDA7XG4gICAgICAgIGxldCBsYXN0QnJlYWtQb3MgPSAtMTtcbiAgICAgICAgbGV0IGxhc3RCcmVha1dpZHRoID0gMDtcbiAgICAgICAgbGV0IHNwYWNlc1JlbW92ZWQgPSAwO1xuICAgICAgICBsZXQgbWF4TGluZUhlaWdodCA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0TGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgY29uc3QgY2hhciA9IHRleHQuY2hhckF0KGkpO1xuXG4gICAgICAgICAgICBpZiAoKC8oPzpcXHMpLykudGVzdChjaGFyKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYXN0QnJlYWtQb3MgPSBpO1xuICAgICAgICAgICAgICAgIGxhc3RCcmVha1dpZHRoID0gbGFzdExpbmVXaWR0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcXHInIHx8IGNoYXIgPT09ICdcXG4nKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxpbmVXaWR0aHMucHVzaChsYXN0TGluZVdpZHRoKTtcbiAgICAgICAgICAgICAgICBtYXhMaW5lV2lkdGggPSBNYXRoLm1heChtYXhMaW5lV2lkdGgsIGxhc3RMaW5lV2lkdGgpO1xuICAgICAgICAgICAgICAgICsrbGluZTtcbiAgICAgICAgICAgICAgICArK3NwYWNlc1JlbW92ZWQ7XG5cbiAgICAgICAgICAgICAgICBwb3MueCA9IDA7XG4gICAgICAgICAgICAgICAgcG9zLnkgKz0gZGF0YS5saW5lSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHByZXZDaGFyQ29kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhID0gZGF0YS5jaGFyc1tjaGFyQ29kZV07XG5cbiAgICAgICAgICAgIGlmICghY2hhckRhdGEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcmV2Q2hhckNvZGUgJiYgY2hhckRhdGEua2VybmluZ1twcmV2Q2hhckNvZGVdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBvcy54ICs9IGNoYXJEYXRhLmtlcm5pbmdbcHJldkNoYXJDb2RlXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY2hhclJlbmRlckRhdGEgPSBjaGFyUmVuZGVyRGF0YVBvb2wucG9wKCkgfHwge1xuICAgICAgICAgICAgICAgIHRleHR1cmU6IFRleHR1cmUuRU1QVFksXG4gICAgICAgICAgICAgICAgbGluZTogMCxcbiAgICAgICAgICAgICAgICBjaGFyQ29kZTogMCxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IFBvaW50KCksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjaGFyUmVuZGVyRGF0YS50ZXh0dXJlID0gY2hhckRhdGEudGV4dHVyZTtcbiAgICAgICAgICAgIGNoYXJSZW5kZXJEYXRhLmxpbmUgPSBsaW5lO1xuICAgICAgICAgICAgY2hhclJlbmRlckRhdGEuY2hhckNvZGUgPSBjaGFyQ29kZTtcbiAgICAgICAgICAgIGNoYXJSZW5kZXJEYXRhLnBvc2l0aW9uLnggPSBwb3MueCArIGNoYXJEYXRhLnhPZmZzZXQgKyAodGhpcy5fbGV0dGVyU3BhY2luZyAvIDIpO1xuICAgICAgICAgICAgY2hhclJlbmRlckRhdGEucG9zaXRpb24ueSA9IHBvcy55ICsgY2hhckRhdGEueU9mZnNldDtcblxuICAgICAgICAgICAgY2hhcnMucHVzaChjaGFyUmVuZGVyRGF0YSk7XG5cbiAgICAgICAgICAgIHBvcy54ICs9IGNoYXJEYXRhLnhBZHZhbmNlICsgdGhpcy5fbGV0dGVyU3BhY2luZztcbiAgICAgICAgICAgIGxhc3RMaW5lV2lkdGggPSBwb3MueDtcbiAgICAgICAgICAgIG1heExpbmVIZWlnaHQgPSBNYXRoLm1heChtYXhMaW5lSGVpZ2h0LCAoY2hhckRhdGEueU9mZnNldCArIGNoYXJEYXRhLnRleHR1cmUuaGVpZ2h0KSk7XG4gICAgICAgICAgICBwcmV2Q2hhckNvZGUgPSBjaGFyQ29kZTtcblxuICAgICAgICAgICAgaWYgKGxhc3RCcmVha1BvcyAhPT0gLTEgJiYgbWF4V2lkdGggPiAwICYmIHBvcy54ID4gbWF4V2lkdGgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgKytzcGFjZXNSZW1vdmVkO1xuICAgICAgICAgICAgICAgIHJlbW92ZUl0ZW1zKGNoYXJzLCAxICsgbGFzdEJyZWFrUG9zIC0gc3BhY2VzUmVtb3ZlZCwgMSArIGkgLSBsYXN0QnJlYWtQb3MpO1xuICAgICAgICAgICAgICAgIGkgPSBsYXN0QnJlYWtQb3M7XG4gICAgICAgICAgICAgICAgbGFzdEJyZWFrUG9zID0gLTE7XG5cbiAgICAgICAgICAgICAgICBsaW5lV2lkdGhzLnB1c2gobGFzdEJyZWFrV2lkdGgpO1xuICAgICAgICAgICAgICAgIG1heExpbmVXaWR0aCA9IE1hdGgubWF4KG1heExpbmVXaWR0aCwgbGFzdEJyZWFrV2lkdGgpO1xuICAgICAgICAgICAgICAgIGxpbmUrKztcblxuICAgICAgICAgICAgICAgIHBvcy54ID0gMDtcbiAgICAgICAgICAgICAgICBwb3MueSArPSBkYXRhLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgcHJldkNoYXJDb2RlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxhc3RDaGFyID0gdGV4dC5jaGFyQXQodGV4dC5sZW5ndGggLSAxKTtcblxuICAgICAgICBpZiAobGFzdENoYXIgIT09ICdcXHInICYmIGxhc3RDaGFyICE9PSAnXFxuJylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCgvKD86XFxzKS8pLnRlc3QobGFzdENoYXIpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhc3RMaW5lV2lkdGggPSBsYXN0QnJlYWtXaWR0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGluZVdpZHRocy5wdXNoKGxhc3RMaW5lV2lkdGgpO1xuICAgICAgICAgICAgbWF4TGluZVdpZHRoID0gTWF0aC5tYXgobWF4TGluZVdpZHRoLCBsYXN0TGluZVdpZHRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxpbmVBbGlnbk9mZnNldHMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBsaW5lOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBhbGlnbk9mZnNldCA9IDA7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9hbGlnbiA9PT0gJ3JpZ2h0JylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhbGlnbk9mZnNldCA9IG1heExpbmVXaWR0aCAtIGxpbmVXaWR0aHNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9hbGlnbiA9PT0gJ2NlbnRlcicpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYWxpZ25PZmZzZXQgPSAobWF4TGluZVdpZHRoIC0gbGluZVdpZHRoc1tpXSkgLyAyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsaW5lQWxpZ25PZmZzZXRzLnB1c2goYWxpZ25PZmZzZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGVuQ2hhcnMgPSBjaGFycy5sZW5ndGg7XG5cbiAgICAgICAgY29uc3QgcGFnZXNNZXNoRGF0YTogUmVjb3JkPG51bWJlciwgUGFnZU1lc2hEYXRhPiA9IHt9O1xuXG4gICAgICAgIGNvbnN0IG5ld1BhZ2VzTWVzaERhdGE6IFBhZ2VNZXNoRGF0YVtdID0gW107XG5cbiAgICAgICAgY29uc3QgYWN0aXZlUGFnZXNNZXNoRGF0YSA9IHRoaXMuX2FjdGl2ZVBhZ2VzTWVzaERhdGE7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3RpdmVQYWdlc01lc2hEYXRhLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBwYWdlTWVzaERhdGFQb29sLnB1c2goYWN0aXZlUGFnZXNNZXNoRGF0YVtpXSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbkNoYXJzOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBjaGFyc1tpXS50ZXh0dXJlO1xuICAgICAgICAgICAgY29uc3QgYmFzZVRleHR1cmVVaWQgPSB0ZXh0dXJlLmJhc2VUZXh0dXJlLnVpZDtcblxuICAgICAgICAgICAgaWYgKCFwYWdlc01lc2hEYXRhW2Jhc2VUZXh0dXJlVWlkXSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFnZU1lc2hEYXRhID0gcGFnZU1lc2hEYXRhUG9vbC5wb3AoKTtcblxuICAgICAgICAgICAgICAgIGlmICghcGFnZU1lc2hEYXRhKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgTWVzaEdlb21ldHJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IE1lc2hNYXRlcmlhbChUZXh0dXJlLkVNUFRZKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gbmV3IE1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcblxuICAgICAgICAgICAgICAgICAgICBwYWdlTWVzaERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Q291bnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhDb3VudDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2c0NvdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljZXM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB1dnM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHJlc2V0IGRhdGEuLlxuICAgICAgICAgICAgICAgIHBhZ2VNZXNoRGF0YS5pbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgcGFnZU1lc2hEYXRhLmluZGV4Q291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHBhZ2VNZXNoRGF0YS52ZXJ0ZXhDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgcGFnZU1lc2hEYXRhLnV2c0NvdW50ID0gMDtcbiAgICAgICAgICAgICAgICBwYWdlTWVzaERhdGEudG90YWwgPSAwO1xuXG4gICAgICAgICAgICAgICAgLy8gVE9ETyBuZWVkIHRvIGdldCBwYWdlIHRleHR1cmUgaGVyZSBzb21laG93Li5cbiAgICAgICAgICAgICAgICBjb25zdCB7IF90ZXh0dXJlQ2FjaGUgfSA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICBfdGV4dHVyZUNhY2hlW2Jhc2VUZXh0dXJlVWlkXSA9IF90ZXh0dXJlQ2FjaGVbYmFzZVRleHR1cmVVaWRdIHx8IG5ldyBUZXh0dXJlKHRleHR1cmUuYmFzZVRleHR1cmUpO1xuICAgICAgICAgICAgICAgIHBhZ2VNZXNoRGF0YS5tZXNoLnRleHR1cmUgPSBfdGV4dHVyZUNhY2hlW2Jhc2VUZXh0dXJlVWlkXTtcblxuICAgICAgICAgICAgICAgIHBhZ2VNZXNoRGF0YS5tZXNoLnRpbnQgPSB0aGlzLl90aW50O1xuXG4gICAgICAgICAgICAgICAgbmV3UGFnZXNNZXNoRGF0YS5wdXNoKHBhZ2VNZXNoRGF0YSk7XG5cbiAgICAgICAgICAgICAgICBwYWdlc01lc2hEYXRhW2Jhc2VUZXh0dXJlVWlkXSA9IHBhZ2VNZXNoRGF0YTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGFnZXNNZXNoRGF0YVtiYXNlVGV4dHVyZVVpZF0udG90YWwrKztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxldHMgZmluZCBhbnkgcHJldmlvdXNseSBhY3RpdmUgcGFnZU1lc2hEYXRhcyB0aGF0IGFyZSBubyBsb25nZXIgcmVxdWlyZWQgZm9yXG4gICAgICAgIC8vIHRoZSB1cGRhdGVkIHRleHQgKGlmIGFueSksIHJlbW92ZWQgYW5kIHJldHVybiB0aGVtIHRvIHRoZSBwb29sLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGl2ZVBhZ2VzTWVzaERhdGEubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChuZXdQYWdlc01lc2hEYXRhLmluZGV4T2YoYWN0aXZlUGFnZXNNZXNoRGF0YVtpXSkgPT09IC0xKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGQoYWN0aXZlUGFnZXNNZXNoRGF0YVtpXS5tZXNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5leHQgbGV0cyBhZGQgYW55IG5ldyBtZXNoZXMsIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gYWRkZWQgdG8gdGhpcyBCaXRtYXBUZXh0XG4gICAgICAgIC8vIHdlIG9ubHkgYWRkIGlmIGl0cyBub3QgYWxyZWFkeSBhIGNoaWxkIG9mIHRoaXMgQml0bWFwT2JqZWN0XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3UGFnZXNNZXNoRGF0YS5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKG5ld1BhZ2VzTWVzaERhdGFbaV0ubWVzaC5wYXJlbnQgIT09IHRoaXMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDaGlsZChuZXdQYWdlc01lc2hEYXRhW2ldLm1lc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWN0aXZlIHBhZ2UgbWVzaCBkYXRhcyBhcmUgc2V0IHRvIGJlIHRoZSBuZXcgcGFnZXMgYWRkZWQuXG4gICAgICAgIHRoaXMuX2FjdGl2ZVBhZ2VzTWVzaERhdGEgPSBuZXdQYWdlc01lc2hEYXRhO1xuXG4gICAgICAgIGZvciAoY29uc3QgaSBpbiBwYWdlc01lc2hEYXRhKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBwYWdlTWVzaERhdGEgPSBwYWdlc01lc2hEYXRhW2ldO1xuICAgICAgICAgICAgY29uc3QgdG90YWwgPSBwYWdlTWVzaERhdGEudG90YWw7XG5cbiAgICAgICAgICAgIC8vIGxldHMgb25seSBhbGxvY2F0ZSBuZXcgYnVmZmVycyBpZiB3ZSBjYW4gZml0IHRoZSBuZXcgdGV4dCBpbiB0aGUgY3VycmVudCBvbmVzLi5cbiAgICAgICAgICAgIC8vIHVubGVzcyB0aGF0IGlzLCB3ZSB3aWxsIGJlIGJhdGNoaW5nLiBDdXJyZW50bHkgYmF0Y2hpbmcgZG9zZSBub3QgcmVzcGVjdCB0aGUgc2l6ZSBwcm9wZXJ0eSBvZiBtZXNoXG4gICAgICAgICAgICBpZiAoIShwYWdlTWVzaERhdGEuaW5kaWNlcz8ubGVuZ3RoID4gNiAqIHRvdGFsKSB8fCBwYWdlTWVzaERhdGEudmVydGljZXMubGVuZ3RoIDwgTWVzaC5CQVRDSEFCTEVfU0laRSAqIDIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFnZU1lc2hEYXRhLnZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheSg0ICogMiAqIHRvdGFsKTtcbiAgICAgICAgICAgICAgICBwYWdlTWVzaERhdGEudXZzID0gbmV3IEZsb2F0MzJBcnJheSg0ICogMiAqIHRvdGFsKTtcbiAgICAgICAgICAgICAgICBwYWdlTWVzaERhdGEuaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheSg2ICogdG90YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gcGFnZU1lc2hEYXRhLnRvdGFsO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRpY2VzID0gcGFnZU1lc2hEYXRhLnZlcnRpY2VzO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIGdhcmJhZ2UgYXQgdGhlIGVuZCBvZiB0aGUgdmVydGljZXMgYnVmZmVyLiBUaGlzIHdpbGwgcHJldmVudCB0aGUgYm91bmRzIG1pc2NhbGN1bGF0aW9uLlxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSB0b3RhbCAqIDQgKiAyOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlc1tpXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBhcyBhIGJ1ZmZlciBtYXliZSBiaWdnZXIgdGhhbiB0aGUgY3VycmVudCB3b3JkLCB3ZSBzZXQgdGhlIHNpemUgb2YgdGhlIG1lc2hNYXRlcmlhbFxuICAgICAgICAgICAgLy8gdG8gbWF0Y2ggdGhlIG51bWJlciBvZiBsZXR0ZXJzIG5lZWRlZFxuICAgICAgICAgICAgcGFnZU1lc2hEYXRhLm1lc2guc2l6ZSA9IDYgKiB0b3RhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuQ2hhcnM7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgY2hhciA9IGNoYXJzW2ldO1xuICAgICAgICAgICAgbGV0IG9mZnNldCA9IGNoYXIucG9zaXRpb24ueCArIGxpbmVBbGlnbk9mZnNldHNbY2hhci5saW5lXTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3JvdW5kUGl4ZWxzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IE1hdGgucm91bmQob2Zmc2V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgeFBvcyA9IG9mZnNldCAqIHNjYWxlO1xuICAgICAgICAgICAgY29uc3QgeVBvcyA9IGNoYXIucG9zaXRpb24ueSAqIHNjYWxlO1xuICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9IGNoYXIudGV4dHVyZTtcblxuICAgICAgICAgICAgY29uc3QgcGFnZU1lc2ggPSBwYWdlc01lc2hEYXRhW3RleHR1cmUuYmFzZVRleHR1cmUudWlkXTtcblxuICAgICAgICAgICAgY29uc3QgdGV4dHVyZUZyYW1lID0gdGV4dHVyZS5mcmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVVdnMgPSB0ZXh0dXJlLl91dnM7XG5cbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFnZU1lc2guaW5kZXgrKztcblxuICAgICAgICAgICAgcGFnZU1lc2guaW5kaWNlc1soaW5kZXggKiA2KSArIDBdID0gMCArIChpbmRleCAqIDQpO1xuICAgICAgICAgICAgcGFnZU1lc2guaW5kaWNlc1soaW5kZXggKiA2KSArIDFdID0gMSArIChpbmRleCAqIDQpO1xuICAgICAgICAgICAgcGFnZU1lc2guaW5kaWNlc1soaW5kZXggKiA2KSArIDJdID0gMiArIChpbmRleCAqIDQpO1xuICAgICAgICAgICAgcGFnZU1lc2guaW5kaWNlc1soaW5kZXggKiA2KSArIDNdID0gMCArIChpbmRleCAqIDQpO1xuICAgICAgICAgICAgcGFnZU1lc2guaW5kaWNlc1soaW5kZXggKiA2KSArIDRdID0gMiArIChpbmRleCAqIDQpO1xuICAgICAgICAgICAgcGFnZU1lc2guaW5kaWNlc1soaW5kZXggKiA2KSArIDVdID0gMyArIChpbmRleCAqIDQpO1xuXG4gICAgICAgICAgICBwYWdlTWVzaC52ZXJ0aWNlc1soaW5kZXggKiA4KSArIDBdID0geFBvcztcbiAgICAgICAgICAgIHBhZ2VNZXNoLnZlcnRpY2VzWyhpbmRleCAqIDgpICsgMV0gPSB5UG9zO1xuXG4gICAgICAgICAgICBwYWdlTWVzaC52ZXJ0aWNlc1soaW5kZXggKiA4KSArIDJdID0geFBvcyArICh0ZXh0dXJlRnJhbWUud2lkdGggKiBzY2FsZSk7XG4gICAgICAgICAgICBwYWdlTWVzaC52ZXJ0aWNlc1soaW5kZXggKiA4KSArIDNdID0geVBvcztcblxuICAgICAgICAgICAgcGFnZU1lc2gudmVydGljZXNbKGluZGV4ICogOCkgKyA0XSA9IHhQb3MgKyAodGV4dHVyZUZyYW1lLndpZHRoICogc2NhbGUpO1xuICAgICAgICAgICAgcGFnZU1lc2gudmVydGljZXNbKGluZGV4ICogOCkgKyA1XSA9IHlQb3MgKyAodGV4dHVyZUZyYW1lLmhlaWdodCAqIHNjYWxlKTtcblxuICAgICAgICAgICAgcGFnZU1lc2gudmVydGljZXNbKGluZGV4ICogOCkgKyA2XSA9IHhQb3M7XG4gICAgICAgICAgICBwYWdlTWVzaC52ZXJ0aWNlc1soaW5kZXggKiA4KSArIDddID0geVBvcyArICh0ZXh0dXJlRnJhbWUuaGVpZ2h0ICogc2NhbGUpO1xuXG4gICAgICAgICAgICBwYWdlTWVzaC51dnNbKGluZGV4ICogOCkgKyAwXSA9IHRleHR1cmVVdnMueDA7XG4gICAgICAgICAgICBwYWdlTWVzaC51dnNbKGluZGV4ICogOCkgKyAxXSA9IHRleHR1cmVVdnMueTA7XG5cbiAgICAgICAgICAgIHBhZ2VNZXNoLnV2c1soaW5kZXggKiA4KSArIDJdID0gdGV4dHVyZVV2cy54MTtcbiAgICAgICAgICAgIHBhZ2VNZXNoLnV2c1soaW5kZXggKiA4KSArIDNdID0gdGV4dHVyZVV2cy55MTtcblxuICAgICAgICAgICAgcGFnZU1lc2gudXZzWyhpbmRleCAqIDgpICsgNF0gPSB0ZXh0dXJlVXZzLngyO1xuICAgICAgICAgICAgcGFnZU1lc2gudXZzWyhpbmRleCAqIDgpICsgNV0gPSB0ZXh0dXJlVXZzLnkyO1xuXG4gICAgICAgICAgICBwYWdlTWVzaC51dnNbKGluZGV4ICogOCkgKyA2XSA9IHRleHR1cmVVdnMueDM7XG4gICAgICAgICAgICBwYWdlTWVzaC51dnNbKGluZGV4ICogOCkgKyA3XSA9IHRleHR1cmVVdnMueTM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90ZXh0V2lkdGggPSBtYXhMaW5lV2lkdGggKiBzY2FsZTtcbiAgICAgICAgdGhpcy5fdGV4dEhlaWdodCA9IChwb3MueSArIGRhdGEubGluZUhlaWdodCkgKiBzY2FsZTtcblxuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gcGFnZXNNZXNoRGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcGFnZU1lc2hEYXRhID0gcGFnZXNNZXNoRGF0YVtpXTtcblxuICAgICAgICAgICAgLy8gYXBwbHkgYW5jaG9yXG4gICAgICAgICAgICBpZiAodGhpcy5hbmNob3IueCAhPT0gMCB8fCB0aGlzLmFuY2hvci55ICE9PSAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCB2ZXJ0ZXhDb3VudCA9IDA7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3JPZmZzZXRYID0gdGhpcy5fdGV4dFdpZHRoICogdGhpcy5hbmNob3IueDtcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3JPZmZzZXRZID0gdGhpcy5fdGV4dEhlaWdodCAqIHRoaXMuYW5jaG9yLnk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VNZXNoRGF0YS50b3RhbDsgaSsrKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZU1lc2hEYXRhLnZlcnRpY2VzW3ZlcnRleENvdW50KytdIC09IGFuY2hvck9mZnNldFg7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VNZXNoRGF0YS52ZXJ0aWNlc1t2ZXJ0ZXhDb3VudCsrXSAtPSBhbmNob3JPZmZzZXRZO1xuXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VNZXNoRGF0YS52ZXJ0aWNlc1t2ZXJ0ZXhDb3VudCsrXSAtPSBhbmNob3JPZmZzZXRYO1xuICAgICAgICAgICAgICAgICAgICBwYWdlTWVzaERhdGEudmVydGljZXNbdmVydGV4Q291bnQrK10gLT0gYW5jaG9yT2Zmc2V0WTtcblxuICAgICAgICAgICAgICAgICAgICBwYWdlTWVzaERhdGEudmVydGljZXNbdmVydGV4Q291bnQrK10gLT0gYW5jaG9yT2Zmc2V0WDtcbiAgICAgICAgICAgICAgICAgICAgcGFnZU1lc2hEYXRhLnZlcnRpY2VzW3ZlcnRleENvdW50KytdIC09IGFuY2hvck9mZnNldFk7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFnZU1lc2hEYXRhLnZlcnRpY2VzW3ZlcnRleENvdW50KytdIC09IGFuY2hvck9mZnNldFg7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VNZXNoRGF0YS52ZXJ0aWNlc1t2ZXJ0ZXhDb3VudCsrXSAtPSBhbmNob3JPZmZzZXRZO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fbWF4TGluZUhlaWdodCA9IG1heExpbmVIZWlnaHQgKiBzY2FsZTtcblxuICAgICAgICAgICAgY29uc3QgdmVydGV4QnVmZmVyID0gcGFnZU1lc2hEYXRhLm1lc2guZ2VvbWV0cnkuZ2V0QnVmZmVyKCdhVmVydGV4UG9zaXRpb24nKTtcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVCdWZmZXIgPSBwYWdlTWVzaERhdGEubWVzaC5nZW9tZXRyeS5nZXRCdWZmZXIoJ2FUZXh0dXJlQ29vcmQnKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4QnVmZmVyID0gcGFnZU1lc2hEYXRhLm1lc2guZ2VvbWV0cnkuZ2V0SW5kZXgoKTtcblxuICAgICAgICAgICAgdmVydGV4QnVmZmVyLmRhdGEgPSBwYWdlTWVzaERhdGEudmVydGljZXM7XG4gICAgICAgICAgICB0ZXh0dXJlQnVmZmVyLmRhdGEgPSBwYWdlTWVzaERhdGEudXZzO1xuICAgICAgICAgICAgaW5kZXhCdWZmZXIuZGF0YSA9IHBhZ2VNZXNoRGF0YS5pbmRpY2VzO1xuXG4gICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIudXBkYXRlKCk7XG4gICAgICAgICAgICB0ZXh0dXJlQnVmZmVyLnVwZGF0ZSgpO1xuICAgICAgICAgICAgaW5kZXhCdWZmZXIudXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjaGFyUmVuZGVyRGF0YVBvb2wucHVzaChjaGFyc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB0cmFuc2Zvcm0gb2YgdGhpcyBvYmplY3RcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdXBkYXRlVHJhbnNmb3JtKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgdGhpcy5jb250YWluZXJVcGRhdGVUcmFuc2Zvcm0oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgdGV4dCBiZWZvcmUgY2FsbGluZyBwYXJlbnQncyBnZXRMb2NhbEJvdW5kc1xuICAgICAqXG4gICAgICogQHJldHVybiB7UElYSS5SZWN0YW5nbGV9IFRoZSByZWN0YW5ndWxhciBib3VuZGluZyBhcmVhXG4gICAgICovXG4gICAgcHVibGljIGdldExvY2FsQm91bmRzKCk6IFJlY3RhbmdsZVxuICAgIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuXG4gICAgICAgIHJldHVybiBzdXBlci5nZXRMb2NhbEJvdW5kcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGV4dCB3aGVuIG5lZWRlZFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdmFsaWRhdGUoKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGV4dCgpO1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHRpbnQgb2YgdGhlIEJpdG1hcFRleHQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDB4ZmZmZmZmXG4gICAgICovXG4gICAgcHVibGljIGdldCB0aW50KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIHNldCB0aW50KHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fdGludCA9PT0gdmFsdWUpIHJldHVybjtcblxuICAgICAgICB0aGlzLl90aW50ID0gdmFsdWU7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9hY3RpdmVQYWdlc01lc2hEYXRhLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVQYWdlc01lc2hEYXRhW2ldLm1lc2gudGludCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGFsaWdubWVudCBvZiB0aGUgQml0bWFwVGV4dCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICogQGRlZmF1bHQgJ2xlZnQnXG4gICAgICovXG4gICAgcHVibGljIGdldCBhbGlnbigpOiBUZXh0U3R5bGVBbGlnblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsaWduO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXQgYWxpZ24odmFsdWU6IFRleHRTdHlsZUFsaWduKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2FsaWduICE9PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fYWxpZ24gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIEJpdG1hcEZvbnQuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIGdldCBmb250TmFtZSgpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb250TmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0IGZvbnROYW1lKHZhbHVlOiBzdHJpbmcpXG4gICAge1xuICAgICAgICBpZiAoIUJpdG1hcEZvbnQuYXZhaWxhYmxlW3ZhbHVlXSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEJpdG1hcEZvbnQgXCIke3ZhbHVlfVwiYCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fZm9udE5hbWUgIT09IHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9mb250TmFtZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2l6ZSBvZiB0aGUgZm9udCB0byBkaXNwbGF5LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgZm9udFNpemUoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9udFNpemU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldCBmb250U2l6ZSh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2ZvbnRTaXplICE9PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZm9udFNpemUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGFuY2hvciBzZXRzIHRoZSBvcmlnaW4gcG9pbnQgb2YgdGhlIHRleHQuXG4gICAgICpcbiAgICAgKiBUaGUgZGVmYXVsdCBpcyBgKDAsMClgLCB0aGlzIG1lYW5zIHRoZSB0ZXh0J3Mgb3JpZ2luIGlzIHRoZSB0b3AgbGVmdC5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgdGhlIGFuY2hvciB0byBgKDAuNSwwLjUpYCBtZWFucyB0aGUgdGV4dCdzIG9yaWdpbiBpcyBjZW50ZXJlZC5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgdGhlIGFuY2hvciB0byBgKDEsMSlgIHdvdWxkIG1lYW4gdGhlIHRleHQncyBvcmlnaW4gcG9pbnQgd2lsbCBiZSB0aGUgYm90dG9tIHJpZ2h0IGNvcm5lci5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuUG9pbnQgfCBudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBhbmNob3IoKTogT2JzZXJ2YWJsZVBvaW50XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXQgYW5jaG9yKHZhbHVlOiBPYnNlcnZhYmxlUG9pbnQpXG4gICAge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fYW5jaG9yLnNldCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9hbmNob3IuY29weUZyb20odmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHQgb2YgdGhlIEJpdG1hcFRleHQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgdGV4dCgpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXh0O1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXQgdGV4dCh0ZXh0OiBzdHJpbmcpXG4gICAge1xuICAgICAgICB0ZXh0ID0gU3RyaW5nKHRleHQgPT09IG51bGwgfHwgdGV4dCA9PT0gdW5kZWZpbmVkID8gJycgOiB0ZXh0KTtcblxuICAgICAgICBpZiAodGhpcy5fdGV4dCA9PT0gdGV4dClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWF4IHdpZHRoIG9mIHRoaXMgYml0bWFwIHRleHQgaW4gcGl4ZWxzLiBJZiB0aGUgdGV4dCBwcm92aWRlZCBpcyBsb25nZXIgdGhhbiB0aGVcbiAgICAgKiB2YWx1ZSBwcm92aWRlZCwgbGluZSBicmVha3Mgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGluc2VydGVkIGluIHRoZSBsYXN0IHdoaXRlc3BhY2UuXG4gICAgICogRGlzYWJsZSBieSBzZXR0aW5nIHRoZSB2YWx1ZSB0byAwLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgbWF4V2lkdGgoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWF4V2lkdGg7XG4gICAgfVxuXG4gICAgcHVibGljIHNldCBtYXhXaWR0aCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX21heFdpZHRoID09PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21heFdpZHRoID0gdmFsdWU7XG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXggbGluZSBoZWlnaHQuIFRoaXMgaXMgdXNlZnVsIHdoZW4gdHJ5aW5nIHRvIHVzZSB0aGUgdG90YWwgaGVpZ2h0IG9mIHRoZSBUZXh0LFxuICAgICAqIGkuZS4gd2hlbiB0cnlpbmcgdG8gdmVydGljYWxseSBhbGlnbi5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IG1heExpbmVIZWlnaHQoKTogbnVtYmVyXG4gICAge1xuICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX21heExpbmVIZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIHRoZSBvdmVyYWxsIHRleHQsIGRpZmZlcmVudCBmcm9tIGZvbnRTaXplLFxuICAgICAqIHdoaWNoIGlzIGRlZmluZWQgaW4gdGhlIHN0eWxlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHRleHRXaWR0aCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHRoaXMudmFsaWRhdGUoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dFdpZHRoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZGl0aW9uYWwgc3BhY2UgYmV0d2VlbiBjaGFyYWN0ZXJzLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgbGV0dGVyU3BhY2luZygpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sZXR0ZXJTcGFjaW5nO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXQgbGV0dGVyU3BhY2luZyh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX2xldHRlclNwYWNpbmcgIT09IHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9sZXR0ZXJTcGFjaW5nID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHRydWUgUGl4aUpTIHdpbGwgTWF0aC5mbG9vcigpIHgveSB2YWx1ZXMgd2hlbiByZW5kZXJpbmcsIHN0b3BwaW5nIHBpeGVsIGludGVycG9sYXRpb24uXG4gICAgICogQWR2YW50YWdlcyBjYW4gaW5jbHVkZSBzaGFycGVyIGltYWdlIHF1YWxpdHkgKGxpa2UgdGV4dCkgYW5kIGZhc3RlciByZW5kZXJpbmcgb24gY2FudmFzLlxuICAgICAqIFRoZSBtYWluIGRpc2FkdmFudGFnZSBpcyBtb3ZlbWVudCBvZiBvYmplY3RzIG1heSBhcHBlYXIgbGVzcyBzbW9vdGguXG4gICAgICogVG8gc2V0IHRoZSBnbG9iYWwgZGVmYXVsdCwgY2hhbmdlIHtAbGluayBQSVhJLnNldHRpbmdzLlJPVU5EX1BJWEVMU31cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgUElYSS5zZXR0aW5ncy5ST1VORF9QSVhFTFNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHJvdW5kUGl4ZWxzKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yb3VuZFBpeGVscztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0IHJvdW5kUGl4ZWxzKHZhbHVlOiBib29sZWFuKVxuICAgIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLl9yb3VuZFBpeGVscylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fcm91bmRQaXhlbHMgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGhlaWdodCBvZiB0aGUgb3ZlcmFsbCB0ZXh0LCBkaWZmZXJlbnQgZnJvbSBmb250U2l6ZSxcbiAgICAgKiB3aGljaCBpcyBkZWZpbmVkIGluIHRoZSBzdHlsZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgcHVibGljIGdldCB0ZXh0SGVpZ2h0KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl90ZXh0SGVpZ2h0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCBjb252ZXJ0IG9sZCBzdHlsZS5mb250IGNvbnN0cnVjdG9yIHBhcmFtIHRvIGZvbnROYW1lICYgZm9udFNpemUgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4zLjBcbiAgICAgKi9cbiAgICBfdXBncmFkZVN0eWxlKHN0eWxlOiBQYXJ0aWFsPElCaXRtYXBUZXh0U3R5bGU+KTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzdHlsZS5mb250ID09PSAnc3RyaW5nJylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVTcGxpdCA9IHN0eWxlLmZvbnQuc3BsaXQoJyAnKTtcblxuICAgICAgICAgICAgc3R5bGUuZm9udE5hbWUgPSB2YWx1ZVNwbGl0Lmxlbmd0aCA9PT0gMVxuICAgICAgICAgICAgICAgID8gdmFsdWVTcGxpdFswXVxuICAgICAgICAgICAgICAgIDogdmFsdWVTcGxpdC5zbGljZSgxKS5qb2luKCcgJyk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZVNwbGl0Lmxlbmd0aCA+PSAyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gcGFyc2VJbnQodmFsdWVTcGxpdFswXSwgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgc3R5bGUuZm9udE5hbWUgPSBzdHlsZS5mb250Lm5hbWU7XG4gICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IHR5cGVvZiBzdHlsZS5mb250LnNpemUgPT09ICdudW1iZXInXG4gICAgICAgICAgICAgICAgPyBzdHlsZS5mb250LnNpemVcbiAgICAgICAgICAgICAgICA6IHBhcnNlSW50KHN0eWxlLmZvbnQuc2l6ZSwgMTApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVzdHJveShvcHRpb25zPzogYm9vbGVhbiB8IElEZXN0cm95T3B0aW9ucyk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgX3RleHR1cmVDYWNoZSB9ID0gdGhpcztcblxuICAgICAgICBmb3IgKGNvbnN0IGlkIGluIF90ZXh0dXJlQ2FjaGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBfdGV4dHVyZUNhY2hlW2lkXTtcblxuICAgICAgICAgICAgdGV4dHVyZS5kZXN0cm95KCk7XG4gICAgICAgICAgICBkZWxldGUgX3RleHR1cmVDYWNoZVtpZF07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90ZXh0dXJlQ2FjaGUgPSBudWxsO1xuXG4gICAgICAgIHN1cGVyLmRlc3Ryb3kob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBiaXRtYXAgZm9udCB3aXRoIGRhdGEgYW5kIGEgdGV4dHVyZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMy4wXG4gICAgICogQHNlZSBQSVhJLkJpdG1hcEZvbnQuaW5zdGFsbFxuICAgICAqIEBzdGF0aWNcbiAgICAgKi9cbiAgICBzdGF0aWMgcmVnaXN0ZXJGb250KGRhdGE6IHN0cmluZ3xYTUxEb2N1bWVudHxCaXRtYXBGb250RGF0YSwgdGV4dHVyZXM6IFRleHR1cmV8VGV4dHVyZVtdfERpY3Q8VGV4dHVyZT4pOiBCaXRtYXBGb250XG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbignNS4zLjAnLCAnUElYSS5CaXRtYXBUZXh0LnJlZ2lzdGVyRm9udCBpcyBkZXByZWNhdGVkLCB1c2UgUElYSS5CaXRtYXBGb250Lmluc3RhbGwnKTtcblxuICAgICAgICByZXR1cm4gQml0bWFwRm9udC5pbnN0YWxsKGRhdGEsIHRleHR1cmVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgaW5zdGFsbGVkIGZvbnRzLlxuICAgICAqXG4gICAgICogQHNlZSBQSVhJLkJpdG1hcEZvbnQuYXZhaWxhYmxlXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4zLjBcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsIFBJWEkuQml0bWFwRm9udD59XG4gICAgICovXG4gICAgc3RhdGljIGdldCBmb250cygpOiBEaWN0PEJpdG1hcEZvbnQ+XG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbignNS4zLjAnLCAnUElYSS5CaXRtYXBUZXh0LmZvbnRzIGlzIGRlcHJlY2F0ZWQsIHVzZSBQSVhJLkJpdG1hcEZvbnQuYXZhaWxhYmxlJyk7XG5cbiAgICAgICAgcmV0dXJuIEJpdG1hcEZvbnQuYXZhaWxhYmxlO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBMb2FkZXJSZXNvdXJjZSB9IGZyb20gJ0BwaXhpL2xvYWRlcnMnO1xuaW1wb3J0IHsgYXV0b0RldGVjdEZvcm1hdCB9IGZyb20gJy4vZm9ybWF0cyc7XG5pbXBvcnQgeyBCaXRtYXBGb250IH0gZnJvbSAnLi9CaXRtYXBGb250JztcblxuaW1wb3J0IHR5cGUgeyBJTG9hZGVyUmVzb3VyY2UgfSBmcm9tICdAcGl4aS9sb2FkZXJzJztcbmltcG9ydCB0eXBlIHsgRGljdCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcbmltcG9ydCB0eXBlIHsgTG9hZGVyIH0gZnJvbSAnQHBpeGkvbG9hZGVycyc7XG5pbXBvcnQgdHlwZSB7IFRleHR1cmUgfSBmcm9tICdAcGl4aS9jb3JlJztcblxuLyoqXG4gKiB7QGxpbmsgUElYSS5Mb2FkZXIgTG9hZGVyfSBtaWRkbGV3YXJlIGZvciBsb2FkaW5nXG4gKiBiaXRtYXAtYmFzZWQgZm9udHMgc3VpdGFibGUgZm9yIHVzaW5nIHdpdGgge0BsaW5rIFBJWEkuQml0bWFwVGV4dH0uXG4gKiBAY2xhc3NcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAaW1wbGVtZW50cyBQSVhJLklMb2FkZXJQbHVnaW5cbiAqL1xuZXhwb3J0IGNsYXNzIEJpdG1hcEZvbnRMb2FkZXJcbntcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgcGx1Z2luIGlzIGluc3RhbGxlZC5cbiAgICAgKlxuICAgICAqIEBzZWUgUElYSS5Mb2FkZXIucmVnaXN0ZXJQbHVnaW5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGFkZCgpOiB2b2lkXG4gICAge1xuICAgICAgICBMb2FkZXJSZXNvdXJjZS5zZXRFeHRlbnNpb25YaHJUeXBlKCdmbnQnLCBMb2FkZXJSZXNvdXJjZS5YSFJfUkVTUE9OU0VfVFlQRS5URVhUKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYWZ0ZXIgYSByZXNvdXJjZSBpcyBsb2FkZWQuXG4gICAgICogQHNlZSBQSVhJLkxvYWRlci5sb2FkZXJNaWRkbGV3YXJlXG4gICAgICogQHBhcmFtIHtQSVhJLkxvYWRlclJlc291cmNlfSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG5leHRcbiAgICAgKi9cbiAgICBzdGF0aWMgdXNlKHRoaXM6IExvYWRlciwgcmVzb3VyY2U6IElMb2FkZXJSZXNvdXJjZSwgbmV4dDogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZm9ybWF0ID0gYXV0b0RldGVjdEZvcm1hdChyZXNvdXJjZS5kYXRhKTtcblxuICAgICAgICAvLyBSZXNvdXJjZSB3YXMgbm90IHJlY29nbmlzZWQgYXMgYW55IG9mIHRoZSBleHBlY3RlZCBmb250IGRhdGEgZm9ybWF0XG4gICAgICAgIGlmICghZm9ybWF0KVxuICAgICAgICB7XG4gICAgICAgICAgICBuZXh0KCk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSBCaXRtYXBGb250TG9hZGVyLmdldEJhc2VVcmwodGhpcywgcmVzb3VyY2UpO1xuICAgICAgICBjb25zdCBkYXRhID0gZm9ybWF0LnBhcnNlKHJlc291cmNlLmRhdGEpO1xuICAgICAgICBjb25zdCB0ZXh0dXJlczogRGljdDxUZXh0dXJlPiA9IHt9O1xuXG4gICAgICAgIC8vIEhhbmRsZSBjb21wbGV0ZWQsIHdoZW4gdGhlIG51bWJlciBvZiB0ZXh0dXJlc1xuICAgICAgICAvLyBsb2FkIGlzIHRoZSBzYW1lIG51bWJlciBhcyByZWZlcmVuY2VzIGluIHRoZSBmbnQgZmlsZVxuICAgICAgICBjb25zdCBjb21wbGV0ZWQgPSAocGFnZTogSUxvYWRlclJlc291cmNlKTogdm9pZCA9PlxuICAgICAgICB7XG4gICAgICAgICAgICB0ZXh0dXJlc1twYWdlLm1ldGFkYXRhLnBhZ2VGaWxlXSA9IHBhZ2UudGV4dHVyZTtcblxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRleHR1cmVzKS5sZW5ndGggPT09IGRhdGEucGFnZS5sZW5ndGgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuYml0bWFwRm9udCA9IEJpdG1hcEZvbnQuaW5zdGFsbChkYXRhLCB0ZXh0dXJlcyk7XG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5wYWdlLmxlbmd0aDsgKytpKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBwYWdlRmlsZSA9IGRhdGEucGFnZVtpXS5maWxlO1xuICAgICAgICAgICAgY29uc3QgdXJsID0gYmFzZVVybCArIHBhZ2VGaWxlO1xuICAgICAgICAgICAgbGV0IGV4aXN0cyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBpbmNhc2UgdGhlIGltYWdlIGlzIGxvYWRlZCBvdXRzaWRlXG4gICAgICAgICAgICAvLyB1c2luZyB0aGUgc2FtZSBsb2FkZXIsIHJlc291cmNlIHdpbGwgYmUgYXZhaWxhYmxlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5yZXNvdXJjZXMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgYml0bWFwUmVzb3VyY2U6IElMb2FkZXJSZXNvdXJjZSA9IHRoaXMucmVzb3VyY2VzW25hbWVdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGJpdG1hcFJlc291cmNlLnVybCA9PT0gdXJsKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYml0bWFwUmVzb3VyY2UubWV0YWRhdGEucGFnZUZpbGUgPSBwYWdlRmlsZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJpdG1hcFJlc291cmNlLnRleHR1cmUpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZChiaXRtYXBSZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRtYXBSZXNvdXJjZS5vbkFmdGVyTWlkZGxld2FyZS5hZGQoY29tcGxldGVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBleGlzdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHRleHR1cmUgaXMgbm90IGxvYWRlZCwgd2UnbGwgYXR0ZW1wdCB0byBhZGRcbiAgICAgICAgICAgIC8vIGl0IHRvIHRoZSBsb2FkIGFuZCBhZGQgdGhlIHRleHR1cmUgdG8gdGhlIGxpc3RcbiAgICAgICAgICAgIGlmICghZXhpc3RzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIFN0YW5kYXJkIGxvYWRpbmcgb3B0aW9ucyBmb3IgaW1hZ2VzXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY3Jvc3NPcmlnaW46IHJlc291cmNlLmNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgICAgICAgICBsb2FkVHlwZTogTG9hZGVyUmVzb3VyY2UuTE9BRF9UWVBFLklNQUdFLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgcGFnZUZpbGUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlLm1ldGFkYXRhLmltYWdlTWV0YWRhdGFcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50UmVzb3VyY2U6IHJlc291cmNlLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFkZCh1cmwsIG9wdGlvbnMsIGNvbXBsZXRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZm9sZGVyIHBhdGggZnJvbSBhIHJlc291cmNlXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuTG9hZGVyfSBsb2FkZXJcbiAgICAgKiBAcGFyYW0ge1BJWEkuTG9hZGVyUmVzb3VyY2V9IHJlc291cmNlXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGdldEJhc2VVcmwobG9hZGVyOiBMb2FkZXIsIHJlc291cmNlOiBJTG9hZGVyUmVzb3VyY2UpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIGxldCByZXNVcmwgPSAhcmVzb3VyY2UuaXNEYXRhVXJsID8gQml0bWFwRm9udExvYWRlci5kaXJuYW1lKHJlc291cmNlLnVybCkgOiAnJztcblxuICAgICAgICBpZiAocmVzb3VyY2UuaXNEYXRhVXJsKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAocmVzVXJsID09PSAnLicpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzVXJsID0gJyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsb2FkZXIuYmFzZVVybCAmJiByZXNVcmwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gaWYgYmFzZXVybCBoYXMgYSB0cmFpbGluZyBzbGFzaCB0aGVuIGFkZCBvbmUgdG8gcmVzVXJsIHNvIHRoZSByZXBsYWNlIHdvcmtzIGJlbG93XG4gICAgICAgICAgICAgICAgaWYgKGxvYWRlci5iYXNlVXJsLmNoYXJBdChsb2FkZXIuYmFzZVVybC5sZW5ndGggLSAxKSA9PT0gJy8nKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzVXJsICs9ICcvJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgYmFzZVVybCBmcm9tIHJlc1VybFxuICAgICAgICByZXNVcmwgPSByZXNVcmwucmVwbGFjZShsb2FkZXIuYmFzZVVybCwgJycpO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGFuIHJlc1VybCBub3csIGl0IG5lZWRzIGEgdHJhaWxpbmcgc2xhc2guIEVuc3VyZSB0aGF0IGl0IGRvZXMgaWYgdGhlIHN0cmluZyBpc24ndCBlbXB0eS5cbiAgICAgICAgaWYgKHJlc1VybCAmJiByZXNVcmwuY2hhckF0KHJlc1VybC5sZW5ndGggLSAxKSAhPT0gJy8nKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXNVcmwgKz0gJy8nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc1VybDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlbWVudCBmb3IgTm9kZUpTJ3MgcGF0aC5kaXJuYW1lXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gUGF0aCB0byBnZXQgZGlyZWN0b3J5IGZvclxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGRpcm5hbWUodXJsOiBzdHJpbmcpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIGNvbnN0IGRpciA9IHVybFxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFwvZywgJy8nKSAvLyBjb252ZXJ0IHdpbmRvd3Mgbm90YXRpb24gdG8gVU5JWCBub3RhdGlvbiwgVVJMLXNhZmUgYmVjYXVzZSBpdCdzIGEgZm9yYmlkZGVuIGNoYXJhY3RlclxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcLyQvLCAnJykgLy8gcmVwbGFjZSB0cmFpbGluZyBzbGFzaFxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcL1teXFwvXSokLywgJycpOyAvLyByZW1vdmUgZXZlcnl0aGluZyBhZnRlciB0aGUgbGFzdFxuXG4gICAgICAgIC8vIEZpbGUgcmVxdWVzdCBpcyByZWxhdGl2ZSwgdXNlIGN1cnJlbnQgZGlyZWN0b3J5XG4gICAgICAgIGlmIChkaXIgPT09IHVybClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuICcuJztcbiAgICAgICAgfVxuICAgICAgICAvLyBTdGFydGVkIHdpdGggYSBzbGFzaFxuICAgICAgICBlbHNlIGlmIChkaXIgPT09ICcnKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gJy8nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRpcjtcbiAgICB9XG59XG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiaW1wb3J0IHsgRmlsdGVyLCBkZWZhdWx0VmVydGV4IH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgZnJhZ21lbnQgZnJvbSAnLi9hbHBoYS5mcmFnJztcblxuLyoqXG4gKiBTaW1wbGVzdCBmaWx0ZXIgLSBhcHBsaWVzIGFscGhhLlxuICpcbiAqIFVzZSB0aGlzIGluc3RlYWQgb2YgQ29udGFpbmVyJ3MgYWxwaGEgcHJvcGVydHkgdG8gYXZvaWQgdmlzdWFsIGxheWVyaW5nIG9mIGluZGl2aWR1YWwgZWxlbWVudHMuXG4gKiBBbHBoYUZpbHRlciBhcHBsaWVzIGFscGhhIGV2ZW5seSBhY3Jvc3MgdGhlIGVudGlyZSBkaXNwbGF5IG9iamVjdCBhbmQgYW55IG9wYXF1ZSBlbGVtZW50cyBpdCBjb250YWlucy5cbiAqIElmIGVsZW1lbnRzIGFyZSBub3Qgb3BhcXVlLCB0aGV5IHdpbGwgYmxlbmQgd2l0aCBlYWNoIG90aGVyIGFueXdheS5cbiAqXG4gKiBWZXJ5IGhhbmR5IGlmIHlvdSB3YW50IHRvIHVzZSBjb21tb24gZmVhdHVyZXMgb2YgYWxsIGZpbHRlcnM6XG4gKlxuICogMS4gQXNzaWduIGEgYmxlbmRNb2RlIHRvIHRoaXMgZmlsdGVyLCBibGVuZCBhbGwgZWxlbWVudHMgaW5zaWRlIGRpc3BsYXkgb2JqZWN0IHdpdGggYmFja2dyb3VuZC5cbiAqXG4gKiAyLiBUbyB1c2UgY2xpcHBpbmcgaW4gZGlzcGxheSBjb29yZGluYXRlcywgYXNzaWduIGEgZmlsdGVyQXJlYSB0byB0aGUgc2FtZSBjb250YWluZXIgdGhhdCBoYXMgdGhpcyBmaWx0ZXIuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLkZpbHRlclxuICogQG1lbWJlcm9mIFBJWEkuZmlsdGVyc1xuICovXG5leHBvcnQgY2xhc3MgQWxwaGFGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXJcbntcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FscGhhPTFdIC0gQW1vdW50IG9mIGFscGhhIGZyb20gMCB0byAxLCB3aGVyZSAwIGlzIHRyYW5zcGFyZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWxwaGEgPSAxLjApXG4gICAge1xuICAgICAgICBzdXBlcihkZWZhdWx0VmVydGV4LCBmcmFnbWVudCwgeyB1QWxwaGE6IDEgfSk7XG5cbiAgICAgICAgdGhpcy5hbHBoYSA9IGFscGhhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvZWZmaWNpZW50IGZvciBhbHBoYSBtdWx0aXBsaWNhdGlvblxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDFcbiAgICAgKi9cbiAgICBnZXQgYWxwaGEoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy51QWxwaGE7XG4gICAgfVxuXG4gICAgc2V0IGFscGhhKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLnVuaWZvcm1zLnVBbHBoYSA9IHZhbHVlO1xuICAgIH1cbn1cbiIsICIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsICJjb25zdCB2ZXJ0VGVtcGxhdGUgPSBgXG4gICAgYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xuXG4gICAgdW5pZm9ybSBtYXQzIHByb2plY3Rpb25NYXRyaXg7XG5cbiAgICB1bmlmb3JtIGZsb2F0IHN0cmVuZ3RoO1xuXG4gICAgdmFyeWluZyB2ZWMyIHZCbHVyVGV4Q29vcmRzWyVzaXplJV07XG5cbiAgICB1bmlmb3JtIHZlYzQgaW5wdXRTaXplO1xuICAgIHVuaWZvcm0gdmVjNCBvdXRwdXRGcmFtZTtcblxuICAgIHZlYzQgZmlsdGVyVmVydGV4UG9zaXRpb24oIHZvaWQgKVxuICAgIHtcbiAgICAgICAgdmVjMiBwb3NpdGlvbiA9IGFWZXJ0ZXhQb3NpdGlvbiAqIG1heChvdXRwdXRGcmFtZS56dywgdmVjMigwLikpICsgb3V0cHV0RnJhbWUueHk7XG5cbiAgICAgICAgcmV0dXJuIHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB2ZWMzKHBvc2l0aW9uLCAxLjApKS54eSwgMC4wLCAxLjApO1xuICAgIH1cblxuICAgIHZlYzIgZmlsdGVyVGV4dHVyZUNvb3JkKCB2b2lkIClcbiAgICB7XG4gICAgICAgIHJldHVybiBhVmVydGV4UG9zaXRpb24gKiAob3V0cHV0RnJhbWUuencgKiBpbnB1dFNpemUuencpO1xuICAgIH1cblxuICAgIHZvaWQgbWFpbih2b2lkKVxuICAgIHtcbiAgICAgICAgZ2xfUG9zaXRpb24gPSBmaWx0ZXJWZXJ0ZXhQb3NpdGlvbigpO1xuXG4gICAgICAgIHZlYzIgdGV4dHVyZUNvb3JkID0gZmlsdGVyVGV4dHVyZUNvb3JkKCk7XG4gICAgICAgICVibHVyJVxuICAgIH1gO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVCbHVyVmVydFNvdXJjZShrZXJuZWxTaXplOiBudW1iZXIsIHg6IGJvb2xlYW4pOiBzdHJpbmdcbntcbiAgICBjb25zdCBoYWxmTGVuZ3RoID0gTWF0aC5jZWlsKGtlcm5lbFNpemUgLyAyKTtcblxuICAgIGxldCB2ZXJ0U291cmNlID0gdmVydFRlbXBsYXRlO1xuXG4gICAgbGV0IGJsdXJMb29wID0gJyc7XG4gICAgbGV0IHRlbXBsYXRlO1xuXG4gICAgaWYgKHgpXG4gICAge1xuICAgICAgICB0ZW1wbGF0ZSA9ICd2Qmx1clRleENvb3Jkc1slaW5kZXglXSA9ICB0ZXh0dXJlQ29vcmQgKyB2ZWMyKCVzYW1wbGVJbmRleCUgKiBzdHJlbmd0aCwgMC4wKTsnO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICB0ZW1wbGF0ZSA9ICd2Qmx1clRleENvb3Jkc1slaW5kZXglXSA9ICB0ZXh0dXJlQ29vcmQgKyB2ZWMyKDAuMCwgJXNhbXBsZUluZGV4JSAqIHN0cmVuZ3RoKTsnO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2VybmVsU2l6ZTsgaSsrKVxuICAgIHtcbiAgICAgICAgbGV0IGJsdXIgPSB0ZW1wbGF0ZS5yZXBsYWNlKCclaW5kZXglJywgaS50b1N0cmluZygpKTtcblxuICAgICAgICBibHVyID0gYmx1ci5yZXBsYWNlKCclc2FtcGxlSW5kZXglJywgYCR7aSAtIChoYWxmTGVuZ3RoIC0gMSl9LjBgKTtcblxuICAgICAgICBibHVyTG9vcCArPSBibHVyO1xuICAgICAgICBibHVyTG9vcCArPSAnXFxuJztcbiAgICB9XG5cbiAgICB2ZXJ0U291cmNlID0gdmVydFNvdXJjZS5yZXBsYWNlKCclYmx1ciUnLCBibHVyTG9vcCk7XG4gICAgdmVydFNvdXJjZSA9IHZlcnRTb3VyY2UucmVwbGFjZSgnJXNpemUlJywga2VybmVsU2l6ZS50b1N0cmluZygpKTtcblxuICAgIHJldHVybiB2ZXJ0U291cmNlO1xufVxuIiwgImludGVyZmFjZSBJR0FVU1NJQU5fVkFMVUVTIHtcbiAgICBbeDogbnVtYmVyXTogbnVtYmVyW107XG59XG5jb25zdCBHQVVTU0lBTl9WQUxVRVM6IElHQVVTU0lBTl9WQUxVRVMgPSB7XG4gICAgNTogWzAuMTUzMzg4LCAwLjIyMTQ2MSwgMC4yNTAzMDFdLFxuICAgIDc6IFswLjA3MTMwMywgMC4xMzE1MTQsIDAuMTg5ODc5LCAwLjIxNDYwN10sXG4gICAgOTogWzAuMDI4NTMyLCAwLjA2NzIzNCwgMC4xMjQwMDksIDAuMTc5MDQ0LCAwLjIwMjM2XSxcbiAgICAxMTogWzAuMDA5MywgMC4wMjgwMDIsIDAuMDY1OTg0LCAwLjEyMTcwMywgMC4xNzU3MTMsIDAuMTk4NTk2XSxcbiAgICAxMzogWzAuMDAyNDA2LCAwLjAwOTI1NSwgMC4wMjc4NjcsIDAuMDY1NjY2LCAwLjEyMTExNywgMC4xNzQ4NjgsIDAuMTk3NjQxXSxcbiAgICAxNTogWzAuMDAwNDg5LCAwLjAwMjQwMywgMC4wMDkyNDYsIDAuMDI3ODQsIDAuMDY1NjAyLCAwLjEyMDk5OSwgMC4xNzQ2OTcsIDAuMTk3NDQ4XSxcbn07XG5cbmNvbnN0IGZyYWdUZW1wbGF0ZSA9IFtcbiAgICAndmFyeWluZyB2ZWMyIHZCbHVyVGV4Q29vcmRzWyVzaXplJV07JyxcbiAgICAndW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7JyxcblxuICAgICd2b2lkIG1haW4odm9pZCknLFxuICAgICd7JyxcbiAgICAnICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wKTsnLFxuICAgICcgICAgJWJsdXIlJyxcbiAgICAnfScsXG5cbl0uam9pbignXFxuJyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUJsdXJGcmFnU291cmNlKGtlcm5lbFNpemU6IG51bWJlcik6IHN0cmluZ1xue1xuICAgIGNvbnN0IGtlcm5lbCA9IEdBVVNTSUFOX1ZBTFVFU1trZXJuZWxTaXplXTtcbiAgICBjb25zdCBoYWxmTGVuZ3RoID0ga2VybmVsLmxlbmd0aDtcblxuICAgIGxldCBmcmFnU291cmNlID0gZnJhZ1RlbXBsYXRlO1xuXG4gICAgbGV0IGJsdXJMb29wID0gJyc7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnZ2xfRnJhZ0NvbG9yICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdkJsdXJUZXhDb29yZHNbJWluZGV4JV0pICogJXZhbHVlJTsnO1xuICAgIGxldCB2YWx1ZTogbnVtYmVyO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXJuZWxTaXplOyBpKyspXG4gICAge1xuICAgICAgICBsZXQgYmx1ciA9IHRlbXBsYXRlLnJlcGxhY2UoJyVpbmRleCUnLCBpLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIHZhbHVlID0gaTtcblxuICAgICAgICBpZiAoaSA+PSBoYWxmTGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZSA9IGtlcm5lbFNpemUgLSBpIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJsdXIgPSBibHVyLnJlcGxhY2UoJyV2YWx1ZSUnLCBrZXJuZWxbdmFsdWVdLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIGJsdXJMb29wICs9IGJsdXI7XG4gICAgICAgIGJsdXJMb29wICs9ICdcXG4nO1xuICAgIH1cblxuICAgIGZyYWdTb3VyY2UgPSBmcmFnU291cmNlLnJlcGxhY2UoJyVibHVyJScsIGJsdXJMb29wKTtcbiAgICBmcmFnU291cmNlID0gZnJhZ1NvdXJjZS5yZXBsYWNlKCclc2l6ZSUnLCBrZXJuZWxTaXplLnRvU3RyaW5nKCkpO1xuXG4gICAgcmV0dXJuIGZyYWdTb3VyY2U7XG59XG4iLCAiLyoqXG4gKiBEaWZmZXJlbnQgdHlwZXMgb2YgZW52aXJvbm1lbnRzIGZvciBXZWJHTC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQG5hbWUgRU5WXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFdFQkdMX0xFR0FDWSAtIFVzZWQgZm9yIG9sZGVyIHYxIFdlYkdMIGRldmljZXMuIFBpeGlKUyB3aWxsIGFpbSB0byBlbnN1cmUgY29tcGF0aWJpbGl0eVxuICogIHdpdGggb2xkZXIgLyBsZXNzIGFkdmFuY2VkIGRldmljZXMuIElmIHlvdSBleHBlcmllbmNlIHVuZXhwbGFpbmVkIGZsaWNrZXJpbmcgcHJlZmVyIHRoaXMgZW52aXJvbm1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gV0VCR0wgLSBWZXJzaW9uIDEgb2YgV2ViR0xcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBXRUJHTDIgLSBWZXJzaW9uIDIgb2YgV2ViR0xcbiAqL1xuZXhwb3J0IGVudW0gRU5WIHtcbiAgICBXRUJHTF9MRUdBQ1ksXG4gICAgV0VCR0wsXG4gICAgV0VCR0wyLFxufVxuXG4vKipcbiAqIENvbnN0YW50IHRvIGlkZW50aWZ5IHRoZSBSZW5kZXJlciBUeXBlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAbmFtZSBSRU5ERVJFUl9UWVBFXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFVOS05PV04gLSBVbmtub3duIHJlbmRlciB0eXBlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFdFQkdMIC0gV2ViR0wgcmVuZGVyIHR5cGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gQ0FOVkFTIC0gQ2FudmFzIHJlbmRlciB0eXBlLlxuICovXG5leHBvcnQgZW51bSBSRU5ERVJFUl9UWVBFIHtcbiAgICBVTktOT1dOLFxuICAgIFdFQkdMLFxuICAgIENBTlZBUyxcbn1cblxuLyoqXG4gKiBCaXR3aXNlIE9SIG9mIG1hc2tzIHRoYXQgaW5kaWNhdGUgdGhlIGJ1ZmZlcnMgdG8gYmUgY2xlYXJlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQG5hbWUgQlVGRkVSX0JJVFNcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gQ09MT1IgLSBJbmRpY2F0ZXMgdGhlIGJ1ZmZlcnMgY3VycmVudGx5IGVuYWJsZWQgZm9yIGNvbG9yIHdyaXRpbmcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gREVQVEggLSBJbmRpY2F0ZXMgdGhlIGRlcHRoIGJ1ZmZlci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTVEVOQ0lMIC0gSW5kaWNhdGVzIHRoZSBzdGVuY2lsIGJ1ZmZlci5cbiAqL1xuZXhwb3J0IGVudW0gQlVGRkVSX0JJVFMge1xuICAgIENPTE9SID0gMHgwMDAwNDAwMCxcbiAgICBERVBUSCA9IDB4MDAwMDAxMDAsXG4gICAgU1RFTkNJTCA9IDB4MDAwMDA0MDBcbn1cblxuLyoqXG4gKiBWYXJpb3VzIGJsZW5kIG1vZGVzIHN1cHBvcnRlZCBieSBQSVhJLlxuICpcbiAqIElNUE9SVEFOVCAtIFRoZSBXZWJHTCByZW5kZXJlciBvbmx5IHN1cHBvcnRzIHRoZSBOT1JNQUwsIEFERCwgTVVMVElQTFkgYW5kIFNDUkVFTiBibGVuZCBtb2Rlcy5cbiAqIEFueXRoaW5nIGVsc2Ugd2lsbCBzaWxlbnRseSBhY3QgbGlrZSBOT1JNQUwuXG4gKlxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBuYW1lIEJMRU5EX01PREVTXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IE5PUk1BTFxuICogQHByb3BlcnR5IHtudW1iZXJ9IEFERFxuICogQHByb3BlcnR5IHtudW1iZXJ9IE1VTFRJUExZXG4gKiBAcHJvcGVydHkge251bWJlcn0gU0NSRUVOXG4gKiBAcHJvcGVydHkge251bWJlcn0gT1ZFUkxBWVxuICogQHByb3BlcnR5IHtudW1iZXJ9IERBUktFTlxuICogQHByb3BlcnR5IHtudW1iZXJ9IExJR0hURU5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDT0xPUl9ET0RHRVxuICogQHByb3BlcnR5IHtudW1iZXJ9IENPTE9SX0JVUk5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBIQVJEX0xJR0hUXG4gKiBAcHJvcGVydHkge251bWJlcn0gU09GVF9MSUdIVFxuICogQHByb3BlcnR5IHtudW1iZXJ9IERJRkZFUkVOQ0VcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBFWENMVVNJT05cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBIVUVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTQVRVUkFUSU9OXG4gKiBAcHJvcGVydHkge251bWJlcn0gQ09MT1JcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBMVU1JTk9TSVRZXG4gKiBAcHJvcGVydHkge251bWJlcn0gTk9STUFMX05QTVxuICogQHByb3BlcnR5IHtudW1iZXJ9IEFERF9OUE1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTQ1JFRU5fTlBNXG4gKiBAcHJvcGVydHkge251bWJlcn0gTk9ORVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNSQ19JTlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNSQ19PVVRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTUkNfQVRPUFxuICogQHByb3BlcnR5IHtudW1iZXJ9IERTVF9PVkVSXG4gKiBAcHJvcGVydHkge251bWJlcn0gRFNUX0lOXG4gKiBAcHJvcGVydHkge251bWJlcn0gRFNUX09VVFxuICogQHByb3BlcnR5IHtudW1iZXJ9IERTVF9BVE9QXG4gKiBAcHJvcGVydHkge251bWJlcn0gU1VCVFJBQ1RcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTUkNfT1ZFUlxuICogQHByb3BlcnR5IHtudW1iZXJ9IEVSQVNFXG4gKiBAcHJvcGVydHkge251bWJlcn0gWE9SXG4gKi9cbmV4cG9ydCBlbnVtIEJMRU5EX01PREVTIHtcbiAgICBOT1JNQUwgPSAwLFxuICAgIEFERCA9IDEsXG4gICAgTVVMVElQTFkgPSAyLFxuICAgIFNDUkVFTiA9IDMsXG4gICAgT1ZFUkxBWSA9IDQsXG4gICAgREFSS0VOID0gNSxcbiAgICBMSUdIVEVOID0gNixcbiAgICBDT0xPUl9ET0RHRSA9IDcsXG4gICAgQ09MT1JfQlVSTiA9IDgsXG4gICAgSEFSRF9MSUdIVCA9IDksXG4gICAgU09GVF9MSUdIVCA9IDEwLFxuICAgIERJRkZFUkVOQ0UgPSAxMSxcbiAgICBFWENMVVNJT04gPSAxMixcbiAgICBIVUUgPSAxMyxcbiAgICBTQVRVUkFUSU9OID0gMTQsXG4gICAgQ09MT1IgPSAxNSxcbiAgICBMVU1JTk9TSVRZID0gMTYsXG4gICAgTk9STUFMX05QTSA9IDE3LFxuICAgIEFERF9OUE0gPSAxOCxcbiAgICBTQ1JFRU5fTlBNID0gMTksXG4gICAgTk9ORSA9IDIwLFxuXG4gICAgU1JDX09WRVIgPSAwLFxuICAgIFNSQ19JTiA9IDIxLFxuICAgIFNSQ19PVVQgPSAyMixcbiAgICBTUkNfQVRPUCA9IDIzLFxuICAgIERTVF9PVkVSID0gMjQsXG4gICAgRFNUX0lOID0gMjUsXG4gICAgRFNUX09VVCA9IDI2LFxuICAgIERTVF9BVE9QID0gMjcsXG4gICAgRVJBU0UgPSAyNixcbiAgICBTVUJUUkFDVCA9IDI4LFxuICAgIFhPUiA9IDI5LFxufVxuXG4vKipcbiAqIFZhcmlvdXMgd2ViZ2wgZHJhdyBtb2Rlcy4gVGhlc2UgY2FuIGJlIHVzZWQgdG8gc3BlY2lmeSB3aGljaCBHTCBkcmF3TW9kZSB0byB1c2VcbiAqIHVuZGVyIGNlcnRhaW4gc2l0dWF0aW9ucyBhbmQgcmVuZGVyZXJzLlxuICpcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAbmFtZSBEUkFXX01PREVTXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFBPSU5UU1xuICogQHByb3BlcnR5IHtudW1iZXJ9IExJTkVTXG4gKiBAcHJvcGVydHkge251bWJlcn0gTElORV9MT09QXG4gKiBAcHJvcGVydHkge251bWJlcn0gTElORV9TVFJJUFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFRSSUFOR0xFU1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFRSSUFOR0xFX1NUUklQXG4gKiBAcHJvcGVydHkge251bWJlcn0gVFJJQU5HTEVfRkFOXG4gKi9cbmV4cG9ydCBlbnVtIERSQVdfTU9ERVMge1xuICAgIFBPSU5UUyxcbiAgICBMSU5FUyxcbiAgICBMSU5FX0xPT1AsXG4gICAgTElORV9TVFJJUCxcbiAgICBUUklBTkdMRVMsXG4gICAgVFJJQU5HTEVfU1RSSVAsXG4gICAgVFJJQU5HTEVfRkFOLFxufVxuXG4vKipcbiAqIFZhcmlvdXMgR0wgdGV4dHVyZS9yZXNvdXJjZXMgZm9ybWF0cy5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHN0YXRpY1xuICogQG5hbWUgRk9STUFUU1xuICogQGVudW0ge251bWJlcn1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSR0JBPTY0MDhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSR0I9NjQwN1xuICogQHByb3BlcnR5IHtudW1iZXJ9IEFMUEhBPTY0MDZcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBMVU1JTkFOQ0U9NjQwOVxuICogQHByb3BlcnR5IHtudW1iZXJ9IExVTUlOQU5DRV9BTFBIQT02NDEwXG4gKiBAcHJvcGVydHkge251bWJlcn0gREVQVEhfQ09NUE9ORU5UPTY0MDJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBERVBUSF9TVEVOQ0lMPTM0MDQxXG4gKi9cbmV4cG9ydCBlbnVtIEZPUk1BVFMge1xuICAgIFJHQkEgPSA2NDA4LFxuICAgIFJHQiA9IDY0MDcsXG4gICAgQUxQSEEgPSA2NDA2LFxuICAgIExVTUlOQU5DRSA9IDY0MDksXG4gICAgTFVNSU5BTkNFX0FMUEhBID0gNjQxMCxcbiAgICBERVBUSF9DT01QT05FTlQgPSA2NDAyLFxuICAgIERFUFRIX1NURU5DSUwgPSAzNDA0MSxcbn1cblxuLyoqXG4gKiBWYXJpb3VzIEdMIHRhcmdldCB0eXBlcy5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHN0YXRpY1xuICogQG5hbWUgVEFSR0VUU1xuICogQGVudW0ge251bWJlcn1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBURVhUVVJFXzJEPTM1NTNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBURVhUVVJFX0NVQkVfTUFQPTM0MDY3XG4gKiBAcHJvcGVydHkge251bWJlcn0gVEVYVFVSRV8yRF9BUlJBWT0zNTg2NlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWD0zNDA2OVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWD0zNDA3MFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWT0zNDA3MVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWT0zNDA3MlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWj0zNDA3M1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWj0zNDA3NFxuICovXG5leHBvcnQgZW51bSBUQVJHRVRTIHtcbiAgICBURVhUVVJFXzJEID0gMzU1MyxcbiAgICBURVhUVVJFX0NVQkVfTUFQID0gMzQwNjcsXG4gICAgVEVYVFVSRV8yRF9BUlJBWSA9IDM1ODY2LFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCA9IDM0MDY5LFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWCA9IDM0MDcwLFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWSA9IDM0MDcxLFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWSA9IDM0MDcyLFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWiA9IDM0MDczLFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWiA9IDM0MDc0LFxufVxuXG4vKipcbiAqIFZhcmlvdXMgR0wgZGF0YSBmb3JtYXQgdHlwZXMuXG4gKlxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBzdGF0aWNcbiAqIEBuYW1lIFRZUEVTXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFVOU0lHTkVEX0JZVEU9NTEyMVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFVOU0lHTkVEX1NIT1JUPTUxMjNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTlNJR05FRF9TSE9SVF81XzZfNT0zMzYzNVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFVOU0lHTkVEX1NIT1JUXzRfNF80XzQ9MzI4MTlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTlNJR05FRF9TSE9SVF81XzVfNV8xPTMyODIwXG4gKiBAcHJvcGVydHkge251bWJlcn0gRkxPQVQ9NTEyNlxuICogQHByb3BlcnR5IHtudW1iZXJ9IEhBTEZfRkxPQVQ9MzYxOTNcbiAqL1xuZXhwb3J0IGVudW0gVFlQRVMge1xuICAgIFVOU0lHTkVEX0JZVEUgPSA1MTIxLFxuICAgIFVOU0lHTkVEX1NIT1JUID0gNTEyMyxcbiAgICBVTlNJR05FRF9TSE9SVF81XzZfNSA9IDMzNjM1LFxuICAgIFVOU0lHTkVEX1NIT1JUXzRfNF80XzQgPSAzMjgxOSxcbiAgICBVTlNJR05FRF9TSE9SVF81XzVfNV8xID0gMzI4MjAsXG4gICAgRkxPQVQgPSA1MTI2LFxuICAgIEhBTEZfRkxPQVQgPSAzNjE5Myxcbn1cblxuLyoqXG4gKiBUaGUgc2NhbGUgbW9kZXMgdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHBpeGkuXG4gKlxuICogVGhlIHtAbGluayBQSVhJLnNldHRpbmdzLlNDQUxFX01PREV9IHNjYWxlIG1vZGUgYWZmZWN0cyB0aGUgZGVmYXVsdCBzY2FsaW5nIG1vZGUgb2YgZnV0dXJlIG9wZXJhdGlvbnMuXG4gKiBJdCBjYW4gYmUgcmUtYXNzaWduZWQgdG8gZWl0aGVyIExJTkVBUiBvciBORUFSRVNULCBkZXBlbmRpbmcgdXBvbiBzdWl0YWJpbGl0eS5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHN0YXRpY1xuICogQG5hbWUgU0NBTEVfTU9ERVNcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gTElORUFSIFNtb290aCBzY2FsaW5nXG4gKiBAcHJvcGVydHkge251bWJlcn0gTkVBUkVTVCBQaXhlbGF0aW5nIHNjYWxpbmdcbiAqL1xuZXhwb3J0IGVudW0gU0NBTEVfTU9ERVMge1xuICAgIE5FQVJFU1QsXG4gICAgTElORUFSLFxufVxuXG4vKipcbiAqIFRoZSB3cmFwIG1vZGVzIHRoYXQgYXJlIHN1cHBvcnRlZCBieSBwaXhpLlxuICpcbiAqIFRoZSB7QGxpbmsgUElYSS5zZXR0aW5ncy5XUkFQX01PREV9IHdyYXAgbW9kZSBhZmZlY3RzIHRoZSBkZWZhdWx0IHdyYXBwaW5nIG1vZGUgb2YgZnV0dXJlIG9wZXJhdGlvbnMuXG4gKiBJdCBjYW4gYmUgcmUtYXNzaWduZWQgdG8gZWl0aGVyIENMQU1QIG9yIFJFUEVBVCwgZGVwZW5kaW5nIHVwb24gc3VpdGFiaWxpdHkuXG4gKiBJZiB0aGUgdGV4dHVyZSBpcyBub24gcG93ZXIgb2YgdHdvIHRoZW4gY2xhbXAgd2lsbCBiZSB1c2VkIHJlZ2FyZGxlc3MgYXMgV2ViR0wgY2FuXG4gKiBvbmx5IHVzZSBSRVBFQVQgaWYgdGhlIHRleHR1cmUgaXMgcG8yLlxuICpcbiAqIFRoaXMgcHJvcGVydHkgb25seSBhZmZlY3RzIFdlYkdMLlxuICpcbiAqIEBuYW1lIFdSQVBfTU9ERVNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IENMQU1QIC0gVGhlIHRleHR1cmVzIHV2cyBhcmUgY2xhbXBlZFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFJFUEVBVCAtIFRoZSB0ZXh0dXJlIHV2cyB0aWxlIGFuZCByZXBlYXRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBNSVJST1JFRF9SRVBFQVQgLSBUaGUgdGV4dHVyZSB1dnMgdGlsZSBhbmQgcmVwZWF0IHdpdGggbWlycm9yaW5nXG4gKi9cbmV4cG9ydCBlbnVtIFdSQVBfTU9ERVMge1xuICAgIENMQU1QID0gMzMwNzEsXG4gICAgUkVQRUFUID0gMTA0OTcsXG4gICAgTUlSUk9SRURfUkVQRUFUID0gMzM2NDgsXG59XG5cbi8qKlxuICogTWlwbWFwIGZpbHRlcmluZyBtb2RlcyB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcGl4aS5cbiAqXG4gKiBUaGUge0BsaW5rIFBJWEkuc2V0dGluZ3MuTUlQTUFQX1RFWFRVUkVTfSBhZmZlY3RzIGRlZmF1bHQgdGV4dHVyZSBmaWx0ZXJpbmcuXG4gKiBNaXBtYXBzIGFyZSBnZW5lcmF0ZWQgZm9yIGEgYmFzZVRleHR1cmUgaWYgaXRzIGBtaXBtYXBgIGZpZWxkIGlzIGBPTmAsXG4gKiBvciBpdHMgYFBPVzJgIGFuZCB0ZXh0dXJlIGRpbWVuc2lvbnMgYXJlIHBvd2VycyBvZiAyLlxuICogRHVlIHRvIHBsYXRmb3JtIHJlc3RyaWN0aW9uLCBgT05gIG9wdGlvbiB3aWxsIHdvcmsgbGlrZSBgUE9XMmAgZm9yIHdlYmdsLTEuXG4gKlxuICogVGhpcyBwcm9wZXJ0eSBvbmx5IGFmZmVjdHMgV2ViR0wuXG4gKlxuICogQG5hbWUgTUlQTUFQX01PREVTXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHN0YXRpY1xuICogQGVudW0ge251bWJlcn1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBPRkYgLSBObyBtaXBtYXBzXG4gKiBAcHJvcGVydHkge251bWJlcn0gUE9XMiAtIEdlbmVyYXRlIG1pcG1hcHMgaWYgdGV4dHVyZSBkaW1lbnNpb25zIGFyZSBwb3cyXG4gKiBAcHJvcGVydHkge251bWJlcn0gT04gLSBBbHdheXMgZ2VuZXJhdGUgbWlwbWFwc1xuICovXG5leHBvcnQgZW51bSBNSVBNQVBfTU9ERVMge1xuICAgIE9GRixcbiAgICBQT1cyLFxuICAgIE9OLFxufVxuXG4vKipcbiAqIEhvdyB0byB0cmVhdCB0ZXh0dXJlcyB3aXRoIHByZW11bHRpcGxpZWQgYWxwaGFcbiAqXG4gKiBAbmFtZSBBTFBIQV9NT0RFU1xuICogQG1lbWJlcm9mIFBJWElcbiAqIEBzdGF0aWNcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJvcGVydHkge251bWJlcn0gTk9fUFJFTVVMVElQTElFRF9BTFBIQSAtIFNvdXJjZSBpcyBub3QgcHJlbXVsdGlwbGllZCwgbGVhdmUgaXQgbGlrZSB0aGF0LlxuICogIE9wdGlvbiBmb3IgY29tcHJlc3NlZCBhbmQgZGF0YSB0ZXh0dXJlcyB0aGF0IGFyZSBjcmVhdGVkIGZyb20gdHlwZWQgYXJyYXlzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFBSRU1VTFRJUExZX09OX1VQTE9BRCAtIFNvdXJjZSBpcyBub3QgcHJlbXVsdGlwbGllZCwgcHJlbXVsdGlwbHkgb24gdXBsb2FkLlxuICogIERlZmF1bHQgb3B0aW9uLCB1c2VkIGZvciBhbGwgbG9hZGVkIGltYWdlcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBQUkVNVUxUSVBMSUVEX0FMUEhBIC0gU291cmNlIGlzIGFscmVhZHkgcHJlbXVsdGlwbGllZFxuICogIEV4YW1wbGU6IHNwaW5lIGF0bGFzZXMgd2l0aCBgX3BtYWAgc3VmZml4LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IE5QTSAtIEFsaWFzIGZvciBOT19QUkVNVUxUSVBMSUVEX0FMUEhBLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFVOUEFDSyAtIERlZmF1bHQgb3B0aW9uLCBhbGlhcyBmb3IgUFJFTVVMVElQTFlfT05fVVBMT0FELlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFBNQSAtIEFsaWFzIGZvciBQUkVNVUxUSVBMSUVEX0FMUEhBLlxuICovXG5leHBvcnQgZW51bSBBTFBIQV9NT0RFUyB7XG4gICAgTlBNID0gMCxcbiAgICBVTlBBQ0sgPSAxLFxuICAgIFBNQSA9IDIsXG4gICAgTk9fUFJFTVVMVElQTElFRF9BTFBIQSA9IDAsXG4gICAgUFJFTVVMVElQTFlfT05fVVBMT0FEID0gMSxcbiAgICBQUkVNVUxUSVBMWV9BTFBIQSA9IDIsXG59XG5cbi8qKlxuICogSG93IHRvIGNsZWFyIHJlbmRlclRleHR1cmVzIGluIGZpbHRlclxuICpcbiAqIEBuYW1lIENMRUFSX01PREVTXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHN0YXRpY1xuICogQGVudW0ge251bWJlcn1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBCTEVORCAtIFByZXNlcnZlIHRoZSBpbmZvcm1hdGlvbiBpbiB0aGUgdGV4dHVyZSwgYmxlbmQgYWJvdmVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDTEVBUiAtIE11c3QgdXNlIGBnbC5jbGVhcmAgb3BlcmF0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gQkxJVCAtIENsZWFyIG9yIGJsaXQgaXQsIGRlcGVuZHMgb24gZGV2aWNlIGFuZCBsZXZlbCBvZiBwYXJhbm9pYVxuICogQHByb3BlcnR5IHtudW1iZXJ9IE5PIC0gQWxpYXMgZm9yIEJMRU5ELCBzYW1lIGFzIGBmYWxzZWAgaW4gZWFybGllciB2ZXJzaW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFlFUyAtIEFsaWFzIGZvciBDTEVBUiwgc2FtZSBhcyBgdHJ1ZWAgaW4gZWFybGllciB2ZXJzaW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IEFVVE8gLSBBbGlhcyBmb3IgQkxJVFxuICovXG5leHBvcnQgZW51bSBDTEVBUl9NT0RFUyB7XG4gICAgTk8gPSAwLFxuICAgIFlFUyA9IDEsXG4gICAgQVVUTyA9IDIsXG4gICAgQkxFTkQgPSAwLFxuICAgIENMRUFSID0gMSxcbiAgICBCTElUID0gMixcbn1cblxuLyoqXG4gKiBUaGUgZ2MgbW9kZXMgdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHBpeGkuXG4gKlxuICogVGhlIHtAbGluayBQSVhJLnNldHRpbmdzLkdDX01PREV9IEdhcmJhZ2UgQ29sbGVjdGlvbiBtb2RlIGZvciBQaXhpSlMgdGV4dHVyZXMgaXMgQVVUT1xuICogSWYgc2V0IHRvIEdDX01PREUsIHRoZSByZW5kZXJlciB3aWxsIG9jY2FzaW9uYWxseSBjaGVjayB0ZXh0dXJlcyB1c2FnZS4gSWYgdGhleSBhcmUgbm90XG4gKiB1c2VkIGZvciBhIHNwZWNpZmllZCBwZXJpb2Qgb2YgdGltZSB0aGV5IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBHUFUuIFRoZXkgd2lsbCBvZiBjb3Vyc2VcbiAqIGJlIHVwbG9hZGVkIGFnYWluIHdoZW4gdGhleSBhcmUgcmVxdWlyZWQuIFRoaXMgaXMgYSBzaWxlbnQgYmVoaW5kIHRoZSBzY2VuZXMgcHJvY2VzcyB0aGF0XG4gKiBzaG91bGQgZW5zdXJlIHRoYXQgdGhlIEdQVSBkb2VzIG5vdCAgZ2V0IGZpbGxlZCB1cC5cbiAqXG4gKiBIYW5keSBmb3IgbW9iaWxlIGRldmljZXMhXG4gKiBUaGlzIHByb3BlcnR5IG9ubHkgYWZmZWN0cyBXZWJHTC5cbiAqXG4gKiBAbmFtZSBHQ19NT0RFU1xuICogQGVudW0ge251bWJlcn1cbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAcHJvcGVydHkge251bWJlcn0gQVVUTyAtIEdhcmJhZ2UgY29sbGVjdGlvbiB3aWxsIGhhcHBlbiBwZXJpb2RpY2FsbHkgYXV0b21hdGljYWxseVxuICogQHByb3BlcnR5IHtudW1iZXJ9IE1BTlVBTCAtIEdhcmJhZ2UgY29sbGVjdGlvbiB3aWxsIG5lZWQgdG8gYmUgY2FsbGVkIG1hbnVhbGx5XG4gKi9cbmV4cG9ydCBlbnVtIEdDX01PREVTIHtcbiAgICBBVVRPLFxuICAgIE1BTlVBTCxcbn1cblxuLyoqXG4gKiBDb25zdGFudHMgdGhhdCBzcGVjaWZ5IGZsb2F0IHByZWNpc2lvbiBpbiBzaGFkZXJzLlxuICpcbiAqIEBuYW1lIFBSRUNJU0lPTlxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBjb25zdGFudFxuICogQHN0YXRpY1xuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBMT1c9J2xvd3AnXG4gKiBAcHJvcGVydHkge3N0cmluZ30gTUVESVVNPSdtZWRpdW1wJ1xuICogQHByb3BlcnR5IHtzdHJpbmd9IEhJR0g9J2hpZ2hwJ1xuICovXG5leHBvcnQgZW51bSBQUkVDSVNJT04ge1xuICAgIExPVyA9ICdsb3dwJyxcbiAgICBNRURJVU0gPSAnbWVkaXVtcCcsXG4gICAgSElHSCA9ICdoaWdocCcsXG59XG5cbi8qKlxuICogQ29uc3RhbnRzIGZvciBtYXNrIGltcGxlbWVudGF0aW9ucy5cbiAqIFdlIHVzZSBgdHlwZWAgc3VmZml4IGJlY2F1c2UgaXQgbGVhZHMgdG8gdmVyeSBkaWZmZXJlbnQgYmVoYXZpb3Vyc1xuICpcbiAqIEBuYW1lIE1BU0tfVFlQRVNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IE5PTkUgLSBNYXNrIGlzIGlnbm9yZWRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTQ0lTU09SIC0gU2Npc3NvciBtYXNrLCByZWN0YW5nbGUgb24gc2NyZWVuLCBjaGVhcFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNURU5DSUwgLSBTdGVuY2lsIG1hc2ssIDEtYml0LCBtZWRpdW0sIHdvcmtzIG9ubHkgaWYgcmVuZGVyZXIgc3VwcG9ydHMgc3RlbmNpbFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFNQUklURSAtIE1hc2sgdGhhdCB1c2VzIFNwcml0ZU1hc2tGaWx0ZXIsIHVzZXMgdGVtcG9yYXJ5IFJlbmRlclRleHR1cmVcbiAqL1xuZXhwb3J0IGVudW0gTUFTS19UWVBFUyB7XG4gICAgTk9ORSA9IDAsXG4gICAgU0NJU1NPUiA9IDEsXG4gICAgU1RFTkNJTCA9IDIsXG4gICAgU1BSSVRFID0gMyxcbn1cblxuLyoqXG4gKiBDb25zdGFudHMgZm9yIG11bHRpLXNhbXBsaW5nIGFudGlhbGlhc2luZy5cbiAqXG4gKiBAc2VlIFBJWEkuRnJhbWVidWZmZXIjbXVsdGlzYW1wbGVcbiAqXG4gKiBAbmFtZSBNU0FBX1FVQUxJVFlcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAc3RhdGljXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByb3BlcnR5IHtudW1iZXJ9IE5PTkUgLSBObyBtdWx0aXNhbXBsaW5nIGZvciB0aGlzIHJlbmRlclRleHR1cmVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBMT1cgLSBUcnkgMiBzYW1wbGVzXG4gKiBAcHJvcGVydHkge251bWJlcn0gTUVESVVNIC0gVHJ5IDQgc2FtcGxlc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IEhJR0ggLSBUcnkgOCBzYW1wbGVzXG4gKi9cbmV4cG9ydCBlbnVtIE1TQUFfUVVBTElUWSB7XG4gICAgTk9ORSA9IDAsXG4gICAgTE9XID0gMixcbiAgICBNRURJVU0gPSA0LFxuICAgIEhJR0ggPSA4XG59XG4iLCAiaW1wb3J0IHsgRmlsdGVyIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcbmltcG9ydCB7IGdlbmVyYXRlQmx1clZlcnRTb3VyY2UgfSBmcm9tICcuL2dlbmVyYXRlQmx1clZlcnRTb3VyY2UnO1xuaW1wb3J0IHsgZ2VuZXJhdGVCbHVyRnJhZ1NvdXJjZSB9IGZyb20gJy4vZ2VuZXJhdGVCbHVyRnJhZ1NvdXJjZSc7XG5pbXBvcnQgeyBDTEVBUl9NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbmltcG9ydCB0eXBlIHsgUmVuZGVyVGV4dHVyZSwgc3lzdGVtcyB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuXG4vKipcbiAqIFRoZSBCbHVyRmlsdGVyUGFzcyBhcHBsaWVzIGEgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbCBHYXVzc2lhbiBibHVyIHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuRmlsdGVyXG4gKiBAbWVtYmVyb2YgUElYSS5maWx0ZXJzXG4gKi9cbmV4cG9ydCBjbGFzcyBCbHVyRmlsdGVyUGFzcyBleHRlbmRzIEZpbHRlclxue1xuICAgIHB1YmxpYyBob3Jpem9udGFsOiBib29sZWFuO1xuICAgIHB1YmxpYyBzdHJlbmd0aDogbnVtYmVyO1xuICAgIHB1YmxpYyBwYXNzZXM6IG51bWJlcjtcblxuICAgIHByaXZhdGUgX3F1YWxpdHk6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaG9yaXpvbnRhbCAtIERvIHBhc3MgYWxvbmcgdGhlIHgtYXhpcyAoYHRydWVgKSBvciB5LWF4aXMgKGBmYWxzZWApLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RyZW5ndGg9OF0gLSBUaGUgc3RyZW5ndGggb2YgdGhlIGJsdXIgZmlsdGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcXVhbGl0eT00XSAtIFRoZSBxdWFsaXR5IG9mIHRoZSBibHVyIGZpbHRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Jlc29sdXRpb249UElYSS5zZXR0aW5ncy5GSUxURVJfUkVTT0xVVElPTl0gLSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgYmx1ciBmaWx0ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtrZXJuZWxTaXplPTVdIC0gVGhlIGtlcm5lbFNpemUgb2YgdGhlIGJsdXIgZmlsdGVyLk9wdGlvbnM6IDUsIDcsIDksIDExLCAxMywgMTUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaG9yaXpvbnRhbDogYm9vbGVhbiwgc3RyZW5ndGggPSA4LCBxdWFsaXR5ID0gNCwgcmVzb2x1dGlvbiA9IHNldHRpbmdzLkZJTFRFUl9SRVNPTFVUSU9OLCBrZXJuZWxTaXplID0gNSlcbiAgICB7XG4gICAgICAgIGNvbnN0IHZlcnRTcmMgPSBnZW5lcmF0ZUJsdXJWZXJ0U291cmNlKGtlcm5lbFNpemUsIGhvcml6b250YWwpO1xuICAgICAgICBjb25zdCBmcmFnU3JjID0gZ2VuZXJhdGVCbHVyRnJhZ1NvdXJjZShrZXJuZWxTaXplKTtcblxuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIC8vIHZlcnRleCBzaGFkZXJcbiAgICAgICAgICAgIHZlcnRTcmMsXG4gICAgICAgICAgICAvLyBmcmFnbWVudCBzaGFkZXJcbiAgICAgICAgICAgIGZyYWdTcmNcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmhvcml6b250YWwgPSBob3Jpem9udGFsO1xuXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG5cbiAgICAgICAgdGhpcy5fcXVhbGl0eSA9IDA7XG5cbiAgICAgICAgdGhpcy5xdWFsaXR5ID0gcXVhbGl0eTtcblxuICAgICAgICB0aGlzLmJsdXIgPSBzdHJlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBmaWx0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuc3lzdGVtcy5GaWx0ZXJTeXN0ZW19IGZpbHRlck1hbmFnZXIgLSBUaGUgbWFuYWdlci5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gaW5wdXQgLSBUaGUgaW5wdXQgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJUZXh0dXJlfSBvdXRwdXQgLSBUaGUgb3V0cHV0IHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge1BJWEkuQ0xFQVJfTU9ERVN9IGNsZWFyTW9kZSAtIEhvdyB0byBjbGVhclxuICAgICAqL1xuICAgIHB1YmxpYyBhcHBseShcbiAgICAgICAgZmlsdGVyTWFuYWdlcjogc3lzdGVtcy5GaWx0ZXJTeXN0ZW0sIGlucHV0OiBSZW5kZXJUZXh0dXJlLCBvdXRwdXQ6IFJlbmRlclRleHR1cmUsIGNsZWFyTW9kZTogQ0xFQVJfTU9ERVNcbiAgICApOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAob3V0cHV0KVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodGhpcy5ob3Jpem9udGFsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybXMuc3RyZW5ndGggPSAoMSAvIG91dHB1dC53aWR0aCkgKiAob3V0cHV0LndpZHRoIC8gaW5wdXQud2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybXMuc3RyZW5ndGggPSAoMSAvIG91dHB1dC5oZWlnaHQpICogKG91dHB1dC5oZWlnaHQgLyBpbnB1dC5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuaG9yaXpvbnRhbCkgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybXMuc3RyZW5ndGggPSAoMSAvIGZpbHRlck1hbmFnZXIucmVuZGVyZXIud2lkdGgpICogKGZpbHRlck1hbmFnZXIucmVuZGVyZXIud2lkdGggLyBpbnB1dC53aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmlmb3Jtcy5zdHJlbmd0aCA9ICgxIC8gZmlsdGVyTWFuYWdlci5yZW5kZXJlci5oZWlnaHQpICogKGZpbHRlck1hbmFnZXIucmVuZGVyZXIuaGVpZ2h0IC8gaW5wdXQuaGVpZ2h0KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2NyZWVuIHNwYWNlIVxuICAgICAgICB0aGlzLnVuaWZvcm1zLnN0cmVuZ3RoICo9IHRoaXMuc3RyZW5ndGg7XG4gICAgICAgIHRoaXMudW5pZm9ybXMuc3RyZW5ndGggLz0gdGhpcy5wYXNzZXM7XG5cbiAgICAgICAgaWYgKHRoaXMucGFzc2VzID09PSAxKVxuICAgICAgICB7XG4gICAgICAgICAgICBmaWx0ZXJNYW5hZ2VyLmFwcGx5RmlsdGVyKHRoaXMsIGlucHV0LCBvdXRwdXQsIGNsZWFyTW9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCByZW5kZXJUYXJnZXQgPSBmaWx0ZXJNYW5hZ2VyLmdldEZpbHRlclRleHR1cmUoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlcmVyID0gZmlsdGVyTWFuYWdlci5yZW5kZXJlcjtcblxuICAgICAgICAgICAgbGV0IGZsaXAgPSBpbnB1dDtcbiAgICAgICAgICAgIGxldCBmbG9wID0gcmVuZGVyVGFyZ2V0O1xuXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmJsZW5kID0gZmFsc2U7XG4gICAgICAgICAgICBmaWx0ZXJNYW5hZ2VyLmFwcGx5RmlsdGVyKHRoaXMsIGZsaXAsIGZsb3AsIENMRUFSX01PREVTLkNMRUFSKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnBhc3NlcyAtIDE7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJNYW5hZ2VyLmJpbmRBbmRDbGVhcihmbGlwLCBDTEVBUl9NT0RFUy5CTElUKTtcblxuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybXMudVNhbXBsZXIgPSBmbG9wO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZsb3A7XG5cbiAgICAgICAgICAgICAgICBmbG9wID0gZmxpcDtcbiAgICAgICAgICAgICAgICBmbGlwID0gdGVtcDtcblxuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNoYWRlci5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmdlb21ldHJ5LmRyYXcoNSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYmxlbmQgPSB0cnVlO1xuICAgICAgICAgICAgZmlsdGVyTWFuYWdlci5hcHBseUZpbHRlcih0aGlzLCBmbG9wLCBvdXRwdXQsIGNsZWFyTW9kZSk7XG4gICAgICAgICAgICBmaWx0ZXJNYW5hZ2VyLnJldHVybkZpbHRlclRleHR1cmUocmVuZGVyVGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzdHJlbmd0aCBvZiBib3RoIHRoZSBibHVyLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDE2XG4gICAgICovXG4gICAgZ2V0IGJsdXIoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJlbmd0aDtcbiAgICB9XG5cbiAgICBzZXQgYmx1cih2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5wYWRkaW5nID0gMSArIChNYXRoLmFicyh2YWx1ZSkgKiAyKTtcbiAgICAgICAgdGhpcy5zdHJlbmd0aCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHF1YWxpdHkgb2YgdGhlIGJsdXIgYnkgbW9kaWZ5aW5nIHRoZSBudW1iZXIgb2YgcGFzc2VzLiBNb3JlIHBhc3NlcyBtZWFucyBoaWdoZXJcbiAgICAgKiBxdWFpbGl0eSBibHVyaW5nIGJ1dCB0aGUgbG93ZXIgdGhlIHBlcmZvcm1hbmNlLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDRcbiAgICAgKi9cbiAgICBnZXQgcXVhbGl0eSgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWFsaXR5O1xuICAgIH1cblxuICAgIHNldCBxdWFsaXR5KHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLl9xdWFsaXR5ID0gdmFsdWU7XG4gICAgICAgIHRoaXMucGFzc2VzID0gdmFsdWU7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEZpbHRlciB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tICdAcGl4aS9zZXR0aW5ncyc7XG5pbXBvcnQgeyBCbHVyRmlsdGVyUGFzcyB9IGZyb20gJy4vQmx1ckZpbHRlclBhc3MnO1xuaW1wb3J0IHsgQ0xFQVJfTU9ERVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuXG5pbXBvcnQgdHlwZSB7IFJlbmRlclRleHR1cmUsIHN5c3RlbXMgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgQkxFTkRfTU9ERVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuXG4vKipcbiAqIFRoZSBCbHVyRmlsdGVyIGFwcGxpZXMgYSBHYXVzc2lhbiBibHVyIHRvIGFuIG9iamVjdC5cbiAqXG4gKiBUaGUgc3RyZW5ndGggb2YgdGhlIGJsdXIgY2FuIGJlIHNldCBmb3IgdGhlIHgtYXhpcyBhbmQgeS1heGlzIHNlcGFyYXRlbHkuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLkZpbHRlclxuICogQG1lbWJlcm9mIFBJWEkuZmlsdGVyc1xuICovXG5leHBvcnQgY2xhc3MgQmx1ckZpbHRlciBleHRlbmRzIEZpbHRlclxue1xuICAgIHB1YmxpYyBibHVyWEZpbHRlcjogQmx1ckZpbHRlclBhc3M7XG4gICAgcHVibGljIGJsdXJZRmlsdGVyOiBCbHVyRmlsdGVyUGFzcztcblxuICAgIHByaXZhdGUgX3JlcGVhdEVkZ2VQaXhlbHM6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0cmVuZ3RoPThdIC0gVGhlIHN0cmVuZ3RoIG9mIHRoZSBibHVyIGZpbHRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3F1YWxpdHk9NF0gLSBUaGUgcXVhbGl0eSBvZiB0aGUgYmx1ciBmaWx0ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyZXNvbHV0aW9uPVBJWEkuc2V0dGluZ3MuRklMVEVSX1JFU09MVVRJT05dIC0gVGhlIHJlc29sdXRpb24gb2YgdGhlIGJsdXIgZmlsdGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBba2VybmVsU2l6ZT01XSAtIFRoZSBrZXJuZWxTaXplIG9mIHRoZSBibHVyIGZpbHRlci5PcHRpb25zOiA1LCA3LCA5LCAxMSwgMTMsIDE1LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN0cmVuZ3RoID0gOCwgcXVhbGl0eSA9IDQsIHJlc29sdXRpb24gPSBzZXR0aW5ncy5GSUxURVJfUkVTT0xVVElPTiwga2VybmVsU2l6ZSA9IDUpXG4gICAge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuYmx1clhGaWx0ZXIgPSBuZXcgQmx1ckZpbHRlclBhc3ModHJ1ZSwgc3RyZW5ndGgsIHF1YWxpdHksIHJlc29sdXRpb24sIGtlcm5lbFNpemUpO1xuICAgICAgICB0aGlzLmJsdXJZRmlsdGVyID0gbmV3IEJsdXJGaWx0ZXJQYXNzKGZhbHNlLCBzdHJlbmd0aCwgcXVhbGl0eSwgcmVzb2x1dGlvbiwga2VybmVsU2l6ZSk7XG5cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy5xdWFsaXR5ID0gcXVhbGl0eTtcbiAgICAgICAgdGhpcy5ibHVyID0gc3RyZW5ndGg7XG5cbiAgICAgICAgdGhpcy5yZXBlYXRFZGdlUGl4ZWxzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgZmlsdGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLnN5c3RlbXMuRmlsdGVyU3lzdGVtfSBmaWx0ZXJNYW5hZ2VyIC0gVGhlIG1hbmFnZXIuXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlclRleHR1cmV9IGlucHV0IC0gVGhlIGlucHV0IHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gb3V0cHV0IC0gVGhlIG91dHB1dCB0YXJnZXQuXG4gICAgICogQHBhcmFtIHtQSVhJLkNMRUFSX01PREVTfSBjbGVhck1vZGUgLSBIb3cgdG8gY2xlYXJcbiAgICAgKi9cbiAgICBhcHBseShmaWx0ZXJNYW5hZ2VyOiBzeXN0ZW1zLkZpbHRlclN5c3RlbSwgaW5wdXQ6IFJlbmRlclRleHR1cmUsIG91dHB1dDogUmVuZGVyVGV4dHVyZSwgY2xlYXJNb2RlOiBDTEVBUl9NT0RFUyk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHhTdHJlbmd0aCA9IE1hdGguYWJzKHRoaXMuYmx1clhGaWx0ZXIuc3RyZW5ndGgpO1xuICAgICAgICBjb25zdCB5U3RyZW5ndGggPSBNYXRoLmFicyh0aGlzLmJsdXJZRmlsdGVyLnN0cmVuZ3RoKTtcblxuICAgICAgICBpZiAoeFN0cmVuZ3RoICYmIHlTdHJlbmd0aClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcmVuZGVyVGFyZ2V0ID0gZmlsdGVyTWFuYWdlci5nZXRGaWx0ZXJUZXh0dXJlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuYmx1clhGaWx0ZXIuYXBwbHkoZmlsdGVyTWFuYWdlciwgaW5wdXQsIHJlbmRlclRhcmdldCwgQ0xFQVJfTU9ERVMuQ0xFQVIpO1xuICAgICAgICAgICAgdGhpcy5ibHVyWUZpbHRlci5hcHBseShmaWx0ZXJNYW5hZ2VyLCByZW5kZXJUYXJnZXQsIG91dHB1dCwgY2xlYXJNb2RlKTtcblxuICAgICAgICAgICAgZmlsdGVyTWFuYWdlci5yZXR1cm5GaWx0ZXJUZXh0dXJlKHJlbmRlclRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoeVN0cmVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmJsdXJZRmlsdGVyLmFwcGx5KGZpbHRlck1hbmFnZXIsIGlucHV0LCBvdXRwdXQsIGNsZWFyTW9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmJsdXJYRmlsdGVyLmFwcGx5KGZpbHRlck1hbmFnZXIsIGlucHV0LCBvdXRwdXQsIGNsZWFyTW9kZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgdXBkYXRlUGFkZGluZygpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fcmVwZWF0RWRnZVBpeGVscylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5wYWRkaW5nID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucGFkZGluZyA9IE1hdGgubWF4KE1hdGguYWJzKHRoaXMuYmx1clhGaWx0ZXIuc3RyZW5ndGgpLCBNYXRoLmFicyh0aGlzLmJsdXJZRmlsdGVyLnN0cmVuZ3RoKSkgKiAyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3RyZW5ndGggb2YgYm90aCB0aGUgYmx1clggYW5kIGJsdXJZIHByb3BlcnRpZXMgc2ltdWx0YW5lb3VzbHlcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCAyXG4gICAgICovXG4gICAgZ2V0IGJsdXIoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5ibHVyWEZpbHRlci5ibHVyO1xuICAgIH1cblxuICAgIHNldCBibHVyKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLmJsdXJYRmlsdGVyLmJsdXIgPSB0aGlzLmJsdXJZRmlsdGVyLmJsdXIgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVQYWRkaW5nKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbnVtYmVyIG9mIHBhc3NlcyBmb3IgYmx1ci4gTW9yZSBwYXNzZXMgbWVhbnMgaGlnaGVyIHF1YWlsaXR5IGJsdXJpbmcuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMVxuICAgICAqL1xuICAgIGdldCBxdWFsaXR5KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmx1clhGaWx0ZXIucXVhbGl0eTtcbiAgICB9XG5cbiAgICBzZXQgcXVhbGl0eSh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5ibHVyWEZpbHRlci5xdWFsaXR5ID0gdGhpcy5ibHVyWUZpbHRlci5xdWFsaXR5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3RyZW5ndGggb2YgdGhlIGJsdXJYIHByb3BlcnR5XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMlxuICAgICAqL1xuICAgIGdldCBibHVyWCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsdXJYRmlsdGVyLmJsdXI7XG4gICAgfVxuXG4gICAgc2V0IGJsdXJYKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLmJsdXJYRmlsdGVyLmJsdXIgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVQYWRkaW5nKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3RyZW5ndGggb2YgdGhlIGJsdXJZIHByb3BlcnR5XG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICogQGRlZmF1bHQgMlxuICAgICAqL1xuICAgIGdldCBibHVyWSgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsdXJZRmlsdGVyLmJsdXI7XG4gICAgfVxuXG4gICAgc2V0IGJsdXJZKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLmJsdXJZRmlsdGVyLmJsdXIgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVQYWRkaW5nKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYmxlbmRtb2RlIG9mIHRoZSBmaWx0ZXJcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCBQSVhJLkJMRU5EX01PREVTLk5PUk1BTFxuICAgICAqL1xuICAgIGdldCBibGVuZE1vZGUoKTogQkxFTkRfTU9ERVNcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsdXJZRmlsdGVyLmJsZW5kTW9kZTtcbiAgICB9XG5cbiAgICBzZXQgYmxlbmRNb2RlKHZhbHVlOiBCTEVORF9NT0RFUylcbiAgICB7XG4gICAgICAgIHRoaXMuYmx1cllGaWx0ZXIuYmxlbmRNb2RlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgc2V0IHRvIHRydWUgdGhlIGVkZ2Ugb2YgdGhlIHRhcmdldCB3aWxsIGJlIGNsYW1wZWRcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBnZXQgcmVwZWF0RWRnZVBpeGVscygpOiBib29sZWFuXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVwZWF0RWRnZVBpeGVscztcbiAgICB9XG5cbiAgICBzZXQgcmVwZWF0RWRnZVBpeGVscyh2YWx1ZTogYm9vbGVhbilcbiAgICB7XG4gICAgICAgIHRoaXMuX3JlcGVhdEVkZ2VQaXhlbHMgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVQYWRkaW5nKCk7XG4gICAgfVxufVxuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwgImltcG9ydCB7IEZpbHRlciwgZGVmYXVsdEZpbHRlclZlcnRleCB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IGZyYWdtZW50IGZyb20gJy4vY29sb3JNYXRyaXguZnJhZyc7XG5cbmltcG9ydCB0eXBlIHsgQXJyYXlGaXhlZCB9IGZyb20gJ0BwaXhpL3V0aWxzJztcblxuZXhwb3J0IHR5cGUgQ29sb3JNYXRyaXggPSBBcnJheUZpeGVkPG51bWJlciwgMjA+O1xuXG4vKipcbiAqIFRoZSBDb2xvck1hdHJpeEZpbHRlciBjbGFzcyBsZXRzIHlvdSBhcHBseSBhIDV4NCBtYXRyaXggdHJhbnNmb3JtYXRpb24gb24gdGhlIFJHQkFcbiAqIGNvbG9yIGFuZCBhbHBoYSB2YWx1ZXMgb2YgZXZlcnkgcGl4ZWwgb24geW91ciBkaXNwbGF5T2JqZWN0IHRvIHByb2R1Y2UgYSByZXN1bHRcbiAqIHdpdGggYSBuZXcgc2V0IG9mIFJHQkEgY29sb3IgYW5kIGFscGhhIHZhbHVlcy4gSXQncyBwcmV0dHkgcG93ZXJmdWwhXG4gKlxuICogYGBganNcbiAqICBsZXQgY29sb3JNYXRyaXggPSBuZXcgUElYSS5maWx0ZXJzLkNvbG9yTWF0cml4RmlsdGVyKCk7XG4gKiAgY29udGFpbmVyLmZpbHRlcnMgPSBbY29sb3JNYXRyaXhdO1xuICogIGNvbG9yTWF0cml4LmNvbnRyYXN0KDIpO1xuICogYGBgXG4gKiBAYXV0aG9yIENsXHUwMEU5bWVudCBDaGVuZWJhdWx0IDxjbGVtZW50QGdvb2Rib3lkaWdpdGFsLmNvbT5cbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5GaWx0ZXJcbiAqIEBtZW1iZXJvZiBQSVhJLmZpbHRlcnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvbG9yTWF0cml4RmlsdGVyIGV4dGVuZHMgRmlsdGVyXG57XG4gICAgcHVibGljIGdyYXlzY2FsZTogKHNjYWxlOiBudW1iZXIsIG11bHRpcGx5OiBib29sZWFuKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgY29uc3QgdW5pZm9ybXMgPSB7XG4gICAgICAgICAgICBtOiBuZXcgRmxvYXQzMkFycmF5KFsxLCAwLCAwLCAwLCAwLFxuICAgICAgICAgICAgICAgIDAsIDEsIDAsIDAsIDAsXG4gICAgICAgICAgICAgICAgMCwgMCwgMSwgMCwgMCxcbiAgICAgICAgICAgICAgICAwLCAwLCAwLCAxLCAwXSksXG4gICAgICAgICAgICB1QWxwaGE6IDEsXG4gICAgICAgIH07XG5cbiAgICAgICAgc3VwZXIoZGVmYXVsdEZpbHRlclZlcnRleCwgZnJhZ21lbnQsIHVuaWZvcm1zKTtcblxuICAgICAgICB0aGlzLmFscGhhID0gMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm1zIGN1cnJlbnQgbWF0cml4IGFuZCBzZXQgdGhlIG5ldyBvbmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IG1hdHJpeCAtIDV4NCBtYXRyaXhcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG11bHRpcGx5IC0gaWYgdHJ1ZSwgY3VycmVudCBtYXRyaXggYW5kIG1hdHJpeCBhcmUgbXVsdGlwbGllZC4gSWYgZmFsc2UsXG4gICAgICogIGp1c3Qgc2V0IHRoZSBjdXJyZW50IG1hdHJpeCB3aXRoIEBwYXJhbSBtYXRyaXhcbiAgICAgKi9cbiAgICBwcml2YXRlIF9sb2FkTWF0cml4KG1hdHJpeDogQ29sb3JNYXRyaXgsIG11bHRpcGx5ID0gZmFsc2UpOiB2b2lkXG4gICAge1xuICAgICAgICBsZXQgbmV3TWF0cml4ID0gbWF0cml4O1xuXG4gICAgICAgIGlmIChtdWx0aXBseSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fbXVsdGlwbHkobmV3TWF0cml4LCB0aGlzLnVuaWZvcm1zLm0sIG1hdHJpeCk7XG4gICAgICAgICAgICBuZXdNYXRyaXggPSB0aGlzLl9jb2xvck1hdHJpeChuZXdNYXRyaXgpIGFzIGFueTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldCB0aGUgbmV3IG1hdHJpeFxuICAgICAgICB0aGlzLnVuaWZvcm1zLm0gPSBuZXdNYXRyaXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbGllcyB0d28gbWF0NSdzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IG91dCAtIDV4NCBtYXRyaXggdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBhIC0gNXg0IG1hdHJpeCB0aGUgZmlyc3Qgb3BlcmFuZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IGIgLSA1eDQgbWF0cml4IHRoZSBzZWNvbmQgb3BlcmFuZFxuICAgICAqIEByZXR1cm5zIHtudW1iZXJbXX0gNXg0IG1hdHJpeFxuICAgICAqL1xuICAgIHByaXZhdGUgX211bHRpcGx5KG91dDogQ29sb3JNYXRyaXgsIGE6IENvbG9yTWF0cml4LCBiOiBDb2xvck1hdHJpeCk6IENvbG9yTWF0cml4XG4gICAge1xuICAgICAgICAvLyBSZWQgQ2hhbm5lbFxuICAgICAgICBvdXRbMF0gPSAoYVswXSAqIGJbMF0pICsgKGFbMV0gKiBiWzVdKSArIChhWzJdICogYlsxMF0pICsgKGFbM10gKiBiWzE1XSk7XG4gICAgICAgIG91dFsxXSA9IChhWzBdICogYlsxXSkgKyAoYVsxXSAqIGJbNl0pICsgKGFbMl0gKiBiWzExXSkgKyAoYVszXSAqIGJbMTZdKTtcbiAgICAgICAgb3V0WzJdID0gKGFbMF0gKiBiWzJdKSArIChhWzFdICogYls3XSkgKyAoYVsyXSAqIGJbMTJdKSArIChhWzNdICogYlsxN10pO1xuICAgICAgICBvdXRbM10gPSAoYVswXSAqIGJbM10pICsgKGFbMV0gKiBiWzhdKSArIChhWzJdICogYlsxM10pICsgKGFbM10gKiBiWzE4XSk7XG4gICAgICAgIG91dFs0XSA9IChhWzBdICogYls0XSkgKyAoYVsxXSAqIGJbOV0pICsgKGFbMl0gKiBiWzE0XSkgKyAoYVszXSAqIGJbMTldKSArIGFbNF07XG5cbiAgICAgICAgLy8gR3JlZW4gQ2hhbm5lbFxuICAgICAgICBvdXRbNV0gPSAoYVs1XSAqIGJbMF0pICsgKGFbNl0gKiBiWzVdKSArIChhWzddICogYlsxMF0pICsgKGFbOF0gKiBiWzE1XSk7XG4gICAgICAgIG91dFs2XSA9IChhWzVdICogYlsxXSkgKyAoYVs2XSAqIGJbNl0pICsgKGFbN10gKiBiWzExXSkgKyAoYVs4XSAqIGJbMTZdKTtcbiAgICAgICAgb3V0WzddID0gKGFbNV0gKiBiWzJdKSArIChhWzZdICogYls3XSkgKyAoYVs3XSAqIGJbMTJdKSArIChhWzhdICogYlsxN10pO1xuICAgICAgICBvdXRbOF0gPSAoYVs1XSAqIGJbM10pICsgKGFbNl0gKiBiWzhdKSArIChhWzddICogYlsxM10pICsgKGFbOF0gKiBiWzE4XSk7XG4gICAgICAgIG91dFs5XSA9IChhWzVdICogYls0XSkgKyAoYVs2XSAqIGJbOV0pICsgKGFbN10gKiBiWzE0XSkgKyAoYVs4XSAqIGJbMTldKSArIGFbOV07XG5cbiAgICAgICAgLy8gQmx1ZSBDaGFubmVsXG4gICAgICAgIG91dFsxMF0gPSAoYVsxMF0gKiBiWzBdKSArIChhWzExXSAqIGJbNV0pICsgKGFbMTJdICogYlsxMF0pICsgKGFbMTNdICogYlsxNV0pO1xuICAgICAgICBvdXRbMTFdID0gKGFbMTBdICogYlsxXSkgKyAoYVsxMV0gKiBiWzZdKSArIChhWzEyXSAqIGJbMTFdKSArIChhWzEzXSAqIGJbMTZdKTtcbiAgICAgICAgb3V0WzEyXSA9IChhWzEwXSAqIGJbMl0pICsgKGFbMTFdICogYls3XSkgKyAoYVsxMl0gKiBiWzEyXSkgKyAoYVsxM10gKiBiWzE3XSk7XG4gICAgICAgIG91dFsxM10gPSAoYVsxMF0gKiBiWzNdKSArIChhWzExXSAqIGJbOF0pICsgKGFbMTJdICogYlsxM10pICsgKGFbMTNdICogYlsxOF0pO1xuICAgICAgICBvdXRbMTRdID0gKGFbMTBdICogYls0XSkgKyAoYVsxMV0gKiBiWzldKSArIChhWzEyXSAqIGJbMTRdKSArIChhWzEzXSAqIGJbMTldKSArIGFbMTRdO1xuXG4gICAgICAgIC8vIEFscGhhIENoYW5uZWxcbiAgICAgICAgb3V0WzE1XSA9IChhWzE1XSAqIGJbMF0pICsgKGFbMTZdICogYls1XSkgKyAoYVsxN10gKiBiWzEwXSkgKyAoYVsxOF0gKiBiWzE1XSk7XG4gICAgICAgIG91dFsxNl0gPSAoYVsxNV0gKiBiWzFdKSArIChhWzE2XSAqIGJbNl0pICsgKGFbMTddICogYlsxMV0pICsgKGFbMThdICogYlsxNl0pO1xuICAgICAgICBvdXRbMTddID0gKGFbMTVdICogYlsyXSkgKyAoYVsxNl0gKiBiWzddKSArIChhWzE3XSAqIGJbMTJdKSArIChhWzE4XSAqIGJbMTddKTtcbiAgICAgICAgb3V0WzE4XSA9IChhWzE1XSAqIGJbM10pICsgKGFbMTZdICogYls4XSkgKyAoYVsxN10gKiBiWzEzXSkgKyAoYVsxOF0gKiBiWzE4XSk7XG4gICAgICAgIG91dFsxOV0gPSAoYVsxNV0gKiBiWzRdKSArIChhWzE2XSAqIGJbOV0pICsgKGFbMTddICogYlsxNF0pICsgKGFbMThdICogYlsxOV0pICsgYVsxOV07XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBGbG9hdDMyIEFycmF5IGFuZCBub3JtYWxpemUgdGhlIG9mZnNldCBjb21wb25lbnQgdG8gMC0xXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IG1hdHJpeCAtIDV4NCBtYXRyaXhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJbXX0gNXg0IG1hdHJpeCB3aXRoIGFsbCB2YWx1ZXMgYmV0d2VlbiAwLTFcbiAgICAgKi9cbiAgICBwcml2YXRlIF9jb2xvck1hdHJpeChtYXRyaXg6IENvbG9yTWF0cml4KTogQ29sb3JNYXRyaXhcbiAgICB7XG4gICAgICAgIC8vIENyZWF0ZSBhIEZsb2F0MzIgQXJyYXkgYW5kIG5vcm1hbGl6ZSB0aGUgb2Zmc2V0IGNvbXBvbmVudCB0byAwLTFcbiAgICAgICAgY29uc3QgbSA9IG5ldyBGbG9hdDMyQXJyYXkobWF0cml4KTtcblxuICAgICAgICBtWzRdIC89IDI1NTtcbiAgICAgICAgbVs5XSAvPSAyNTU7XG4gICAgICAgIG1bMTRdIC89IDI1NTtcbiAgICAgICAgbVsxOV0gLz0gMjU1O1xuXG4gICAgICAgIHJldHVybiBtIGFzIGFueTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIGJyaWdodG5lc3NcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiIC0gdmFsdWUgb2YgdGhlIGJyaWd0aG5lc3MgKDAtMSwgd2hlcmUgMCBpcyBibGFjaylcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG11bHRpcGx5IC0gaWYgdHJ1ZSwgY3VycmVudCBtYXRyaXggYW5kIG1hdHJpeCBhcmUgbXVsdGlwbGllZC4gSWYgZmFsc2UsXG4gICAgICogIGp1c3Qgc2V0IHRoZSBjdXJyZW50IG1hdHJpeCB3aXRoIEBwYXJhbSBtYXRyaXhcbiAgICAgKi9cbiAgICBwdWJsaWMgYnJpZ2h0bmVzcyhiOiBudW1iZXIsIG11bHRpcGx5OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbWF0cml4OiBDb2xvck1hdHJpeCA9IFtcbiAgICAgICAgICAgIGIsIDAsIDAsIDAsIDAsXG4gICAgICAgICAgICAwLCBiLCAwLCAwLCAwLFxuICAgICAgICAgICAgMCwgMCwgYiwgMCwgMCxcbiAgICAgICAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5fbG9hZE1hdHJpeChtYXRyaXgsIG11bHRpcGx5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1hdHJpY2VzIGluIGdyZXkgc2NhbGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgLSB2YWx1ZSBvZiB0aGUgZ3JleSAoMC0xLCB3aGVyZSAwIGlzIGJsYWNrKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbXVsdGlwbHkgLSBpZiB0cnVlLCBjdXJyZW50IG1hdHJpeCBhbmQgbWF0cml4IGFyZSBtdWx0aXBsaWVkLiBJZiBmYWxzZSxcbiAgICAgKiAganVzdCBzZXQgdGhlIGN1cnJlbnQgbWF0cml4IHdpdGggQHBhcmFtIG1hdHJpeFxuICAgICAqL1xuICAgIHB1YmxpYyBncmV5c2NhbGUoc2NhbGU6IG51bWJlciwgbXVsdGlwbHk6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBtYXRyaXg6IENvbG9yTWF0cml4ID0gW1xuICAgICAgICAgICAgc2NhbGUsIHNjYWxlLCBzY2FsZSwgMCwgMCxcbiAgICAgICAgICAgIHNjYWxlLCBzY2FsZSwgc2NhbGUsIDAsIDAsXG4gICAgICAgICAgICBzY2FsZSwgc2NhbGUsIHNjYWxlLCAwLCAwLFxuICAgICAgICAgICAgMCwgMCwgMCwgMSwgMCxcbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLl9sb2FkTWF0cml4KG1hdHJpeCwgbXVsdGlwbHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYmxhY2sgYW5kIHdoaXRlIG1hdHJpY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG11bHRpcGx5IC0gaWYgdHJ1ZSwgY3VycmVudCBtYXRyaXggYW5kIG1hdHJpeCBhcmUgbXVsdGlwbGllZC4gSWYgZmFsc2UsXG4gICAgICogIGp1c3Qgc2V0IHRoZSBjdXJyZW50IG1hdHJpeCB3aXRoIEBwYXJhbSBtYXRyaXhcbiAgICAgKi9cbiAgICBwdWJsaWMgYmxhY2tBbmRXaGl0ZShtdWx0aXBseTogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IG1hdHJpeDogQ29sb3JNYXRyaXggPSBbXG4gICAgICAgICAgICAwLjMsIDAuNiwgMC4xLCAwLCAwLFxuICAgICAgICAgICAgMC4zLCAwLjYsIDAuMSwgMCwgMCxcbiAgICAgICAgICAgIDAuMywgMC42LCAwLjEsIDAsIDAsXG4gICAgICAgICAgICAwLCAwLCAwLCAxLCAwLFxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuX2xvYWRNYXRyaXgobWF0cml4LCBtdWx0aXBseSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBodWUgcHJvcGVydHkgb2YgdGhlIGNvbG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gLSBpbiBkZWdyZWVzXG4gICAgICogQHBhcmFtIHtib29sZWFufSBtdWx0aXBseSAtIGlmIHRydWUsIGN1cnJlbnQgbWF0cml4IGFuZCBtYXRyaXggYXJlIG11bHRpcGxpZWQuIElmIGZhbHNlLFxuICAgICAqICBqdXN0IHNldCB0aGUgY3VycmVudCBtYXRyaXggd2l0aCBAcGFyYW0gbWF0cml4XG4gICAgICovXG4gICAgcHVibGljIGh1ZShyb3RhdGlvbjogbnVtYmVyLCBtdWx0aXBseTogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIHJvdGF0aW9uID0gKHJvdGF0aW9uIHx8IDApIC8gMTgwICogTWF0aC5QSTtcblxuICAgICAgICBjb25zdCBjb3NSID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgICAgICBjb25zdCBzaW5SID0gTWF0aC5zaW4ocm90YXRpb24pO1xuICAgICAgICBjb25zdCBzcXJ0ID0gTWF0aC5zcXJ0O1xuXG4gICAgICAgIC8qIGEgZ29vZCBhcHByb3hpbWF0aW9uIGZvciBodWUgcm90YXRpb25cbiAgICAgICAgIFRoaXMgbWF0cml4IGlzIGZhciBiZXR0ZXIgdGhhbiB0aGUgdmVyc2lvbnMgd2l0aCBtYWdpYyBsdW1pbmFuY2UgY29uc3RhbnRzXG4gICAgICAgICBmb3JtZXJseSB1c2VkIGhlcmUsIGJ1dCBhbHNvIHVzZWQgaW4gdGhlIHN0YXJsaW5nIGZyYW1ld29yayAoZmxhc2gpIGFuZCBrbm93biBmcm9tIHRoaXNcbiAgICAgICAgIG9sZCBwYXJ0IG9mIHRoZSBpbnRlcm5ldDogcXVhc2ltb25kby5jb20vYXJjaGl2ZXMvMDAwNTY1LnBocFxuXG4gICAgICAgICBUaGlzIG5ldyBtYXRyaXggaXMgYmFzZWQgb24gcmdiIGN1YmUgcm90YXRpb24gaW4gc3BhY2UuIExvb2sgaGVyZSBmb3IgYSBtb3JlIGRlc2NyaXB0aXZlXG4gICAgICAgICBpbXBsZW1lbnRhdGlvbiBhcyBhIHNoYWRlciBub3QgYSBnZW5lcmFsIG1hdHJpeDpcbiAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9ldmFudy9nbGZ4LmpzL2Jsb2IvNTg4NDFjMjM5MTliZDU5Nzg3ZWZmYzAzMzNhNDg5N2I0MzgzNTQxMi9zcmMvZmlsdGVycy9hZGp1c3QvaHVlc2F0dXJhdGlvbi5qc1xuXG4gICAgICAgICBUaGlzIGlzIHRoZSBzb3VyY2UgZm9yIHRoZSBjb2RlOlxuICAgICAgICAgc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODUwNzg4NS9zaGlmdC1odWUtb2YtYW4tcmdiLWNvbG9yLzg1MTA3NTEjODUxMDc1MVxuICAgICAgICAgKi9cblxuICAgICAgICBjb25zdCB3ID0gMSAvIDM7XG4gICAgICAgIGNvbnN0IHNxclcgPSBzcXJ0KHcpOyAvLyB3ZWlnaHQgaXNcblxuICAgICAgICBjb25zdCBhMDAgPSBjb3NSICsgKCgxLjAgLSBjb3NSKSAqIHcpO1xuICAgICAgICBjb25zdCBhMDEgPSAodyAqICgxLjAgLSBjb3NSKSkgLSAoc3FyVyAqIHNpblIpO1xuICAgICAgICBjb25zdCBhMDIgPSAodyAqICgxLjAgLSBjb3NSKSkgKyAoc3FyVyAqIHNpblIpO1xuXG4gICAgICAgIGNvbnN0IGExMCA9ICh3ICogKDEuMCAtIGNvc1IpKSArIChzcXJXICogc2luUik7XG4gICAgICAgIGNvbnN0IGExMSA9IGNvc1IgKyAodyAqICgxLjAgLSBjb3NSKSk7XG4gICAgICAgIGNvbnN0IGExMiA9ICh3ICogKDEuMCAtIGNvc1IpKSAtIChzcXJXICogc2luUik7XG5cbiAgICAgICAgY29uc3QgYTIwID0gKHcgKiAoMS4wIC0gY29zUikpIC0gKHNxclcgKiBzaW5SKTtcbiAgICAgICAgY29uc3QgYTIxID0gKHcgKiAoMS4wIC0gY29zUikpICsgKHNxclcgKiBzaW5SKTtcbiAgICAgICAgY29uc3QgYTIyID0gY29zUiArICh3ICogKDEuMCAtIGNvc1IpKTtcblxuICAgICAgICBjb25zdCBtYXRyaXg6IENvbG9yTWF0cml4ID0gW1xuICAgICAgICAgICAgYTAwLCBhMDEsIGEwMiwgMCwgMCxcbiAgICAgICAgICAgIGExMCwgYTExLCBhMTIsIDAsIDAsXG4gICAgICAgICAgICBhMjAsIGEyMSwgYTIyLCAwLCAwLFxuICAgICAgICAgICAgMCwgMCwgMCwgMSwgMCxcbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLl9sb2FkTWF0cml4KG1hdHJpeCwgbXVsdGlwbHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29udHJhc3QgbWF0cml4LCBpbmNyZWFzZSB0aGUgc2VwYXJhdGlvbiBiZXR3ZWVuIGRhcmsgYW5kIGJyaWdodFxuICAgICAqIEluY3JlYXNlIGNvbnRyYXN0IDogc2hhZG93cyBkYXJrZXIgYW5kIGhpZ2hsaWdodHMgYnJpZ2h0ZXJcbiAgICAgKiBEZWNyZWFzZSBjb250cmFzdCA6IGJyaW5nIHRoZSBzaGFkb3dzIHVwIGFuZCB0aGUgaGlnaGxpZ2h0cyBkb3duXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IC0gdmFsdWUgb2YgdGhlIGNvbnRyYXN0ICgwLTEpXG4gICAgICogQHBhcmFtIHtib29sZWFufSBtdWx0aXBseSAtIGlmIHRydWUsIGN1cnJlbnQgbWF0cml4IGFuZCBtYXRyaXggYXJlIG11bHRpcGxpZWQuIElmIGZhbHNlLFxuICAgICAqICBqdXN0IHNldCB0aGUgY3VycmVudCBtYXRyaXggd2l0aCBAcGFyYW0gbWF0cml4XG4gICAgICovXG4gICAgcHVibGljIGNvbnRyYXN0KGFtb3VudDogbnVtYmVyLCBtdWx0aXBseTogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHYgPSAoYW1vdW50IHx8IDApICsgMTtcbiAgICAgICAgY29uc3QgbyA9IC0wLjUgKiAodiAtIDEpO1xuXG4gICAgICAgIGNvbnN0IG1hdHJpeDogQ29sb3JNYXRyaXggPSBbXG4gICAgICAgICAgICB2LCAwLCAwLCAwLCBvLFxuICAgICAgICAgICAgMCwgdiwgMCwgMCwgbyxcbiAgICAgICAgICAgIDAsIDAsIHYsIDAsIG8sXG4gICAgICAgICAgICAwLCAwLCAwLCAxLCAwLFxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuX2xvYWRNYXRyaXgobWF0cml4LCBtdWx0aXBseSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzYXR1cmF0aW9uIG1hdHJpeCwgaW5jcmVhc2UgdGhlIHNlcGFyYXRpb24gYmV0d2VlbiBjb2xvcnNcbiAgICAgKiBJbmNyZWFzZSBzYXR1cmF0aW9uIDogaW5jcmVhc2UgY29udHJhc3QsIGJyaWdodG5lc3MsIGFuZCBzaGFycG5lc3NcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSBUaGUgc2F0dXJhdGlvbiBhbW91bnQgKDAtMSlcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFttdWx0aXBseV0gLSBpZiB0cnVlLCBjdXJyZW50IG1hdHJpeCBhbmQgbWF0cml4IGFyZSBtdWx0aXBsaWVkLiBJZiBmYWxzZSxcbiAgICAgKiAganVzdCBzZXQgdGhlIGN1cnJlbnQgbWF0cml4IHdpdGggQHBhcmFtIG1hdHJpeFxuICAgICAqL1xuICAgIHB1YmxpYyBzYXR1cmF0ZShhbW91bnQgPSAwLCBtdWx0aXBseT86IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB4ID0gKGFtb3VudCAqIDIgLyAzKSArIDE7XG4gICAgICAgIGNvbnN0IHkgPSAoKHggLSAxKSAqIC0wLjUpO1xuXG4gICAgICAgIGNvbnN0IG1hdHJpeDogQ29sb3JNYXRyaXggPSBbXG4gICAgICAgICAgICB4LCB5LCB5LCAwLCAwLFxuICAgICAgICAgICAgeSwgeCwgeSwgMCwgMCxcbiAgICAgICAgICAgIHksIHksIHgsIDAsIDAsXG4gICAgICAgICAgICAwLCAwLCAwLCAxLCAwLFxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuX2xvYWRNYXRyaXgobWF0cml4LCBtdWx0aXBseSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzYXR1cmF0ZSBpbWFnZSAocmVtb3ZlIGNvbG9yKVxuICAgICAqXG4gICAgICogQ2FsbCB0aGUgc2F0dXJhdGUgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqL1xuICAgIHB1YmxpYyBkZXNhdHVyYXRlKCk6IHZvaWQgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIHtcbiAgICAgICAgdGhpcy5zYXR1cmF0ZSgtMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTmVnYXRpdmUgaW1hZ2UgKGludmVyc2Ugb2YgY2xhc3NpYyByZ2IgbWF0cml4KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBtdWx0aXBseSAtIGlmIHRydWUsIGN1cnJlbnQgbWF0cml4IGFuZCBtYXRyaXggYXJlIG11bHRpcGxpZWQuIElmIGZhbHNlLFxuICAgICAqICBqdXN0IHNldCB0aGUgY3VycmVudCBtYXRyaXggd2l0aCBAcGFyYW0gbWF0cml4XG4gICAgICovXG4gICAgcHVibGljIG5lZ2F0aXZlKG11bHRpcGx5OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbWF0cml4OiBDb2xvck1hdHJpeCA9IFtcbiAgICAgICAgICAgIC0xLCAwLCAwLCAxLCAwLFxuICAgICAgICAgICAgMCwgLTEsIDAsIDEsIDAsXG4gICAgICAgICAgICAwLCAwLCAtMSwgMSwgMCxcbiAgICAgICAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5fbG9hZE1hdHJpeChtYXRyaXgsIG11bHRpcGx5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXBpYSBpbWFnZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBtdWx0aXBseSAtIGlmIHRydWUsIGN1cnJlbnQgbWF0cml4IGFuZCBtYXRyaXggYXJlIG11bHRpcGxpZWQuIElmIGZhbHNlLFxuICAgICAqICBqdXN0IHNldCB0aGUgY3VycmVudCBtYXRyaXggd2l0aCBAcGFyYW0gbWF0cml4XG4gICAgICovXG4gICAgcHVibGljIHNlcGlhKG11bHRpcGx5OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbWF0cml4OiBDb2xvck1hdHJpeCA9IFtcbiAgICAgICAgICAgIDAuMzkzLCAwLjc2ODk5OTksIDAuMTg4OTk5OTksIDAsIDAsXG4gICAgICAgICAgICAwLjM0OSwgMC42ODU5OTk5LCAwLjE2Nzk5OTk5LCAwLCAwLFxuICAgICAgICAgICAgMC4yNzIsIDAuNTMzOTk5OSwgMC4xMzA5OTk5OSwgMCwgMCxcbiAgICAgICAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5fbG9hZE1hdHJpeChtYXRyaXgsIG11bHRpcGx5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb2xvciBtb3Rpb24gcGljdHVyZSBwcm9jZXNzIGludmVudGVkIGluIDE5MTYgKHRoYW5rcyBEb21pbmljIFN6YWJsZXdza2kpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG11bHRpcGx5IC0gaWYgdHJ1ZSwgY3VycmVudCBtYXRyaXggYW5kIG1hdHJpeCBhcmUgbXVsdGlwbGllZC4gSWYgZmFsc2UsXG4gICAgICogIGp1c3Qgc2V0IHRoZSBjdXJyZW50IG1hdHJpeCB3aXRoIEBwYXJhbSBtYXRyaXhcbiAgICAgKi9cbiAgICBwdWJsaWMgdGVjaG5pY29sb3IobXVsdGlwbHk6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBtYXRyaXg6IENvbG9yTWF0cml4ID0gW1xuICAgICAgICAgICAgMS45MTI1Mjc3ODkxNDU2MDgzLCAtMC44NTQ1MzQ0OTc2OTUxNjQ1LCAtMC4wOTE1NTUwODQ4Mjc1NTU4NSwgMCwgMTEuNzkzNjAzNDM0Mzc3MzM3LFxuICAgICAgICAgICAgLTAuMzA4NzgzMzM4NTkyODA5NywgMS43NjU4OTA4NTU1NDU4NDI4LCAtMC4xMDYwMTc0MzA3NDcyMjI0NSwgMCwgLTcwLjM1MjA1MTYxNDYxMzk4LFxuICAgICAgICAgICAgLTAuMjMxMTAzMzc3NTQ4NjE2LCAtMC43NTAxODk5MTk3NDQwMjEyLCAxLjg0NzU5NzgxNjEwODE4OSwgMCwgMzAuOTUwOTQwODY5NDkxMTM4LFxuICAgICAgICAgICAgMCwgMCwgMCwgMSwgMCxcbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLl9sb2FkTWF0cml4KG1hdHJpeCwgbXVsdGlwbHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvbGFyb2lkIGZpbHRlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBtdWx0aXBseSAtIGlmIHRydWUsIGN1cnJlbnQgbWF0cml4IGFuZCBtYXRyaXggYXJlIG11bHRpcGxpZWQuIElmIGZhbHNlLFxuICAgICAqICBqdXN0IHNldCB0aGUgY3VycmVudCBtYXRyaXggd2l0aCBAcGFyYW0gbWF0cml4XG4gICAgICovXG4gICAgcHVibGljIHBvbGFyb2lkKG11bHRpcGx5OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbWF0cml4OiBDb2xvck1hdHJpeCA9IFtcbiAgICAgICAgICAgIDEuNDM4LCAtMC4wNjIsIC0wLjA2MiwgMCwgMCxcbiAgICAgICAgICAgIC0wLjEyMiwgMS4zNzgsIC0wLjEyMiwgMCwgMCxcbiAgICAgICAgICAgIC0wLjAxNiwgLTAuMDE2LCAxLjQ4MywgMCwgMCxcbiAgICAgICAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5fbG9hZE1hdHJpeChtYXRyaXgsIG11bHRpcGx5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgd2hvIHRyYW5zZm9ybXMgOiBSZWQgLT4gQmx1ZSBhbmQgQmx1ZSAtPiBSZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbXVsdGlwbHkgLSBpZiB0cnVlLCBjdXJyZW50IG1hdHJpeCBhbmQgbWF0cml4IGFyZSBtdWx0aXBsaWVkLiBJZiBmYWxzZSxcbiAgICAgKiAganVzdCBzZXQgdGhlIGN1cnJlbnQgbWF0cml4IHdpdGggQHBhcmFtIG1hdHJpeFxuICAgICAqL1xuICAgIHB1YmxpYyB0b0JHUihtdWx0aXBseTogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IG1hdHJpeDogQ29sb3JNYXRyaXggPSBbXG4gICAgICAgICAgICAwLCAwLCAxLCAwLCAwLFxuICAgICAgICAgICAgMCwgMSwgMCwgMCwgMCxcbiAgICAgICAgICAgIDEsIDAsIDAsIDAsIDAsXG4gICAgICAgICAgICAwLCAwLCAwLCAxLCAwLFxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuX2xvYWRNYXRyaXgobWF0cml4LCBtdWx0aXBseSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29sb3IgcmV2ZXJzYWwgZmlsbSBpbnRyb2R1Y2VkIGJ5IEVhc3RtYW4gS29kYWsgaW4gMTkzNS4gKHRoYW5rcyBEb21pbmljIFN6YWJsZXdza2kpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG11bHRpcGx5IC0gaWYgdHJ1ZSwgY3VycmVudCBtYXRyaXggYW5kIG1hdHJpeCBhcmUgbXVsdGlwbGllZC4gSWYgZmFsc2UsXG4gICAgICogIGp1c3Qgc2V0IHRoZSBjdXJyZW50IG1hdHJpeCB3aXRoIEBwYXJhbSBtYXRyaXhcbiAgICAgKi9cbiAgICBwdWJsaWMga29kYWNocm9tZShtdWx0aXBseTogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IG1hdHJpeDogQ29sb3JNYXRyaXggPSBbXG4gICAgICAgICAgICAxLjEyODU1ODIzOTY1OTM1MjUsIC0wLjM5NjczODIyODM2MDEzNDgsIC0wLjAzOTkyNTU5MTcyOTIxNzkzLCAwLCA2My43Mjk1ODc2MjE5NjUwMixcbiAgICAgICAgICAgIC0wLjE2NDA0MzM5OTYyMjQ0NjE2LCAxLjA4MzUyNTE1NjYyOTEzMDQsIC0wLjA1NDk4ODA1MTE1NjMzMTMyLCAwLCAyNC43MzI0MDc4OTY3MDYyMDMsXG4gICAgICAgICAgICAtMC4xNjc4NjAxMDcwNjE1NTc2MywgLTAuNTYwMzQxNjI3NzY5NTI0OCwgMS42MDE0ODUwNzYxOTY0OTQzLCAwLCAzNS42Mjk4MjgwNzQ2MDk0NixcbiAgICAgICAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5fbG9hZE1hdHJpeChtYXRyaXgsIG11bHRpcGx5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCcm93biBkZWxpY2lvdXMgYnJvd25pIGZpbHRlciAodGhhbmtzIERvbWluaWMgU3phYmxld3NraSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbXVsdGlwbHkgLSBpZiB0cnVlLCBjdXJyZW50IG1hdHJpeCBhbmQgbWF0cml4IGFyZSBtdWx0aXBsaWVkLiBJZiBmYWxzZSxcbiAgICAgKiAganVzdCBzZXQgdGhlIGN1cnJlbnQgbWF0cml4IHdpdGggQHBhcmFtIG1hdHJpeFxuICAgICAqL1xuICAgIHB1YmxpYyBicm93bmkobXVsdGlwbHk6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBtYXRyaXg6IENvbG9yTWF0cml4ID0gW1xuICAgICAgICAgICAgMC41OTk3MDIzNDk4MTU5NzE1LCAwLjM0NTUzMjQzMDQ4MzkxMjYzLCAtMC4yNzA4Mjk4Njc0NTM4MDQyLCAwLCA0Ny40MzE5Mjg1NTYwMDg3MyxcbiAgICAgICAgICAgIC0wLjAzNzcwMzI0OTgzNzc4MzE1NywgMC44NjA5NTc3NTg3OTkyNjQxLCAwLjE1MDU5NTUyMzg4NDU5OTEzLCAwLCAtMzYuOTY4NDE0OTgzMTkxMjcsXG4gICAgICAgICAgICAwLjI0MTEzNjM1MTI4MTUzMzM1LCAtMC4wNzQ0MTAzNzkwODQyMjQ5MiwgMC40NDk3MjE4MjA2NDg3NzE1MywgMCwgLTcuNTYyMDc1Mjc3NTkxMjgzLFxuICAgICAgICAgICAgMCwgMCwgMCwgMSwgMCxcbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLl9sb2FkTWF0cml4KG1hdHJpeCwgbXVsdGlwbHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZpbnRhZ2UgZmlsdGVyICh0aGFua3MgRG9taW5pYyBTemFibGV3c2tpKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBtdWx0aXBseSAtIGlmIHRydWUsIGN1cnJlbnQgbWF0cml4IGFuZCBtYXRyaXggYXJlIG11bHRpcGxpZWQuIElmIGZhbHNlLFxuICAgICAqICBqdXN0IHNldCB0aGUgY3VycmVudCBtYXRyaXggd2l0aCBAcGFyYW0gbWF0cml4XG4gICAgICovXG4gICAgcHVibGljIHZpbnRhZ2UobXVsdGlwbHk6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBtYXRyaXg6IENvbG9yTWF0cml4ID0gW1xuICAgICAgICAgICAgMC42Mjc5MzQ1NjM1NjA1OTk0LCAwLjMyMDIxODM0MjA4MTkzNjcsIC0wLjAzOTY1NDA4MjExMzEyNDUzLCAwLCA5LjY1MTI4NTgzNTI5NDEyMyxcbiAgICAgICAgICAgIDAuMDI1NzgzOTc3MDQ4MDg4NjgsIDAuNjQ0MTE4ODY0NDM3NDc3MSwgMC4wMzI1OTEyNzYxNjE0OTI5NCwgMCwgNy40NjI4MjkxNzY0NzA1OTEsXG4gICAgICAgICAgICAwLjA0NjYwNTU1NTY3ODI3MTksIC0wLjA4NTEyMzI5ODcyNDc4OTEsIDAuNTI0MTY0ODAxODcwMDQ2NSwgMCwgNS4xNTkxOTA1ODgyMzUyOTYsXG4gICAgICAgICAgICAwLCAwLCAwLCAxLCAwLFxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuX2xvYWRNYXRyaXgobWF0cml4LCBtdWx0aXBseSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2UgZG9uJ3Qga25vdyBleGFjdGx5IHdoYXQgaXQgZG9lcywga2luZCBvZiBncmFkaWVudCBtYXAsIGJ1dCBmdW5ueSB0byBwbGF5IHdpdGghXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVzYXR1cmF0aW9uIC0gVG9uZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvbmVkIC0gVG9uZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxpZ2h0Q29sb3IgLSBUb25lIHZhbHVlcywgZXhhbXBsZTogYDB4RkZFNTgwYFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkYXJrQ29sb3IgLSBUb25lIHZhbHVlcywgZXhhbXBsZTogYDB4RkZFNTgwYFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbXVsdGlwbHkgLSBpZiB0cnVlLCBjdXJyZW50IG1hdHJpeCBhbmQgbWF0cml4IGFyZSBtdWx0aXBsaWVkLiBJZiBmYWxzZSxcbiAgICAgKiAganVzdCBzZXQgdGhlIGN1cnJlbnQgbWF0cml4IHdpdGggQHBhcmFtIG1hdHJpeFxuICAgICAqL1xuICAgIHB1YmxpYyBjb2xvclRvbmUoZGVzYXR1cmF0aW9uOiBudW1iZXIsIHRvbmVkOiBudW1iZXIsIGxpZ2h0Q29sb3I6IG51bWJlciwgZGFya0NvbG9yOiBudW1iZXIsIG11bHRpcGx5OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgZGVzYXR1cmF0aW9uID0gZGVzYXR1cmF0aW9uIHx8IDAuMjtcbiAgICAgICAgdG9uZWQgPSB0b25lZCB8fCAwLjE1O1xuICAgICAgICBsaWdodENvbG9yID0gbGlnaHRDb2xvciB8fCAweEZGRTU4MDtcbiAgICAgICAgZGFya0NvbG9yID0gZGFya0NvbG9yIHx8IDB4MzM4MDAwO1xuXG4gICAgICAgIGNvbnN0IGxSID0gKChsaWdodENvbG9yID4+IDE2KSAmIDB4RkYpIC8gMjU1O1xuICAgICAgICBjb25zdCBsRyA9ICgobGlnaHRDb2xvciA+PiA4KSAmIDB4RkYpIC8gMjU1O1xuICAgICAgICBjb25zdCBsQiA9IChsaWdodENvbG9yICYgMHhGRikgLyAyNTU7XG5cbiAgICAgICAgY29uc3QgZFIgPSAoKGRhcmtDb2xvciA+PiAxNikgJiAweEZGKSAvIDI1NTtcbiAgICAgICAgY29uc3QgZEcgPSAoKGRhcmtDb2xvciA+PiA4KSAmIDB4RkYpIC8gMjU1O1xuICAgICAgICBjb25zdCBkQiA9IChkYXJrQ29sb3IgJiAweEZGKSAvIDI1NTtcblxuICAgICAgICBjb25zdCBtYXRyaXg6IENvbG9yTWF0cml4ID0gW1xuICAgICAgICAgICAgMC4zLCAwLjU5LCAwLjExLCAwLCAwLFxuICAgICAgICAgICAgbFIsIGxHLCBsQiwgZGVzYXR1cmF0aW9uLCAwLFxuICAgICAgICAgICAgZFIsIGRHLCBkQiwgdG9uZWQsIDAsXG4gICAgICAgICAgICBsUiAtIGRSLCBsRyAtIGRHLCBsQiAtIGRCLCAwLCAwLFxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuX2xvYWRNYXRyaXgobWF0cml4LCBtdWx0aXBseSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTmlnaHQgZWZmZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW50ZW5zaXR5IC0gVGhlIGludGVuc2l0eSBvZiB0aGUgbmlnaHQgZWZmZWN0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbXVsdGlwbHkgLSBpZiB0cnVlLCBjdXJyZW50IG1hdHJpeCBhbmQgbWF0cml4IGFyZSBtdWx0aXBsaWVkLiBJZiBmYWxzZSxcbiAgICAgKiAganVzdCBzZXQgdGhlIGN1cnJlbnQgbWF0cml4IHdpdGggQHBhcmFtIG1hdHJpeFxuICAgICAqL1xuICAgIHB1YmxpYyBuaWdodChpbnRlbnNpdHk6IG51bWJlciwgbXVsdGlwbHk6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBpbnRlbnNpdHkgPSBpbnRlbnNpdHkgfHwgMC4xO1xuXG4gICAgICAgIGNvbnN0IG1hdHJpeDogQ29sb3JNYXRyaXggPSBbXG4gICAgICAgICAgICBpbnRlbnNpdHkgKiAoLTIuMCksIC1pbnRlbnNpdHksIDAsIDAsIDAsXG4gICAgICAgICAgICAtaW50ZW5zaXR5LCAwLCBpbnRlbnNpdHksIDAsIDAsXG4gICAgICAgICAgICAwLCBpbnRlbnNpdHksIGludGVuc2l0eSAqIDIuMCwgMCwgMCxcbiAgICAgICAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5fbG9hZE1hdHJpeChtYXRyaXgsIG11bHRpcGx5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcmVkYXRvciBlZmZlY3RcbiAgICAgKlxuICAgICAqIEVyYXNlIHRoZSBjdXJyZW50IG1hdHJpeCBieSBzZXR0aW5nIGEgbmV3IGluZGVwZW50IG9uZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCAtIGhvdyBtdWNoIHRoZSBwcmVkYXRvciBmZWVscyBoaXMgZnV0dXJlIHZpY3RpbVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbXVsdGlwbHkgLSBpZiB0cnVlLCBjdXJyZW50IG1hdHJpeCBhbmQgbWF0cml4IGFyZSBtdWx0aXBsaWVkLiBJZiBmYWxzZSxcbiAgICAgKiAganVzdCBzZXQgdGhlIGN1cnJlbnQgbWF0cml4IHdpdGggQHBhcmFtIG1hdHJpeFxuICAgICAqL1xuICAgIHB1YmxpYyBwcmVkYXRvcihhbW91bnQ6IG51bWJlciwgbXVsdGlwbHk6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBtYXRyaXg6IENvbG9yTWF0cml4ID0gW1xuICAgICAgICAgICAgLy8gcm93IDFcbiAgICAgICAgICAgIDExLjIyNDEzMDYzMDQ5MzE2NCAqIGFtb3VudCxcbiAgICAgICAgICAgIC00Ljc5NDQ4Njk5OTUxMTcxOSAqIGFtb3VudCxcbiAgICAgICAgICAgIC0yLjg3NDYxMTg1NDU1MzIyMjcgKiBhbW91bnQsXG4gICAgICAgICAgICAwICogYW1vdW50LFxuICAgICAgICAgICAgMC40MDM0MjQzODIyMDk3Nzc4MyAqIGFtb3VudCxcbiAgICAgICAgICAgIC8vIHJvdyAyXG4gICAgICAgICAgICAtMy42MzMwNjk3NTM2NDY4NTA2ICogYW1vdW50LFxuICAgICAgICAgICAgOS4xOTMxNTcxOTYwNDQ5MjIgKiBhbW91bnQsXG4gICAgICAgICAgICAtMi45NTE4MTA4MzY3OTE5OTIgKiBhbW91bnQsXG4gICAgICAgICAgICAwICogYW1vdW50LFxuICAgICAgICAgICAgLTEuMzE2MTM1MDQ4ODY2MjcyICogYW1vdW50LFxuICAgICAgICAgICAgLy8gcm93IDNcbiAgICAgICAgICAgIC0zLjIxODQxOTc5MDI2Nzk0NDMgKiBhbW91bnQsXG4gICAgICAgICAgICAtNC4yMzc1MDMwNTE3NTc4MTI1ICogYW1vdW50LFxuICAgICAgICAgICAgNy40NzY0NDgwNTkwODIwMzEgKiBhbW91bnQsXG4gICAgICAgICAgICAwICogYW1vdW50LFxuICAgICAgICAgICAgMC44MDQ0NDU5MjIzNzQ3MjUzICogYW1vdW50LFxuICAgICAgICAgICAgLy8gcm93IDRcbiAgICAgICAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5fbG9hZE1hdHJpeChtYXRyaXgsIG11bHRpcGx5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMU0QgZWZmZWN0XG4gICAgICpcbiAgICAgKiBNdWx0aXBseSB0aGUgY3VycmVudCBtYXRyaXhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbXVsdGlwbHkgLSBpZiB0cnVlLCBjdXJyZW50IG1hdHJpeCBhbmQgbWF0cml4IGFyZSBtdWx0aXBsaWVkLiBJZiBmYWxzZSxcbiAgICAgKiAganVzdCBzZXQgdGhlIGN1cnJlbnQgbWF0cml4IHdpdGggQHBhcmFtIG1hdHJpeFxuICAgICAqL1xuICAgIHB1YmxpYyBsc2QobXVsdGlwbHk6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBtYXRyaXg6IENvbG9yTWF0cml4ID0gW1xuICAgICAgICAgICAgMiwgLTAuNCwgMC41LCAwLCAwLFxuICAgICAgICAgICAgLTAuNSwgMiwgLTAuNCwgMCwgMCxcbiAgICAgICAgICAgIC0wLjQsIC0wLjUsIDMsIDAsIDAsXG4gICAgICAgICAgICAwLCAwLCAwLCAxLCAwLFxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuX2xvYWRNYXRyaXgobWF0cml4LCBtdWx0aXBseSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXJhc2UgdGhlIGN1cnJlbnQgbWF0cml4IGJ5IHNldHRpbmcgdGhlIGRlZmF1bHQgb25lXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgbWF0cml4OiBDb2xvck1hdHJpeCA9IFtcbiAgICAgICAgICAgIDEsIDAsIDAsIDAsIDAsXG4gICAgICAgICAgICAwLCAxLCAwLCAwLCAwLFxuICAgICAgICAgICAgMCwgMCwgMSwgMCwgMCxcbiAgICAgICAgICAgIDAsIDAsIDAsIDEsIDAsXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5fbG9hZE1hdHJpeChtYXRyaXgsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWF0cml4IG9mIHRoZSBjb2xvciBtYXRyaXggZmlsdGVyXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJbXX1cbiAgICAgKiBAZGVmYXVsdCBbMSwgMCwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMCwgMSwgMF1cbiAgICAgKi9cbiAgICBnZXQgbWF0cml4KCk6IENvbG9yTWF0cml4XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5tO1xuICAgIH1cblxuICAgIHNldCBtYXRyaXgodmFsdWU6IENvbG9yTWF0cml4KVxuICAgIHtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy5tID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG9wYWNpdHkgdmFsdWUgdG8gdXNlIHdoZW4gbWl4aW5nIHRoZSBvcmlnaW5hbCBhbmQgcmVzdWx0YW50IGNvbG9ycy5cbiAgICAgKlxuICAgICAqIFdoZW4gdGhlIHZhbHVlIGlzIDAsIHRoZSBvcmlnaW5hbCBjb2xvciBpcyB1c2VkIHdpdGhvdXQgbW9kaWZpY2F0aW9uLlxuICAgICAqIFdoZW4gdGhlIHZhbHVlIGlzIDEsIHRoZSByZXN1bHQgY29sb3IgaXMgdXNlZC5cbiAgICAgKiBXaGVuIGluIHRoZSByYW5nZSAoMCwgMSkgdGhlIGNvbG9yIGlzIGludGVycG9sYXRlZCBiZXR3ZWVuIHRoZSBvcmlnaW5hbCBhbmQgcmVzdWx0IGJ5IHRoaXMgYW1vdW50LlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDFcbiAgICAgKi9cbiAgICBnZXQgYWxwaGEoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy51QWxwaGE7XG4gICAgfVxuXG4gICAgc2V0IGFscGhhKHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLnVuaWZvcm1zLnVBbHBoYSA9IHZhbHVlO1xuICAgIH1cbn1cblxuLy8gQW1lcmljYW5pemVkIGFsaWFzXG5Db2xvck1hdHJpeEZpbHRlci5wcm90b3R5cGUuZ3JheXNjYWxlID0gQ29sb3JNYXRyaXhGaWx0ZXIucHJvdG90eXBlLmdyZXlzY2FsZTtcbiIsICIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsICJpbXBvcnQgeyBGaWx0ZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB7IE1hdHJpeCwgUG9pbnQgfSBmcm9tICdAcGl4aS9tYXRoJztcbmltcG9ydCBmcmFnbWVudCBmcm9tICcuL2Rpc3BsYWNlbWVudC5mcmFnJztcbmltcG9ydCB2ZXJ0ZXggZnJvbSAnLi9kaXNwbGFjZW1lbnQudmVydCc7XG5cbmltcG9ydCB0eXBlIHsgQ0xFQVJfTU9ERVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJUZXh0dXJlLCBzeXN0ZW1zLCBUZXh0dXJlLCBJU3ByaXRlTWFza1RhcmdldCB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuXG4vKipcbiAqIFRoZSBEaXNwbGFjZW1lbnRGaWx0ZXIgY2xhc3MgdXNlcyB0aGUgcGl4ZWwgdmFsdWVzIGZyb20gdGhlIHNwZWNpZmllZCB0ZXh0dXJlXG4gKiAoY2FsbGVkIHRoZSBkaXNwbGFjZW1lbnQgbWFwKSB0byBwZXJmb3JtIGEgZGlzcGxhY2VtZW50IG9mIGFuIG9iamVjdC5cbiAqXG4gKiBZb3UgY2FuIHVzZSB0aGlzIGZpbHRlciB0byBhcHBseSBhbGwgbWFub3Igb2YgY3Jhenkgd2FycGluZyBlZmZlY3RzLlxuICogQ3VycmVudGx5IHRoZSBgcmAgcHJvcGVydHkgb2YgdGhlIHRleHR1cmUgaXMgdXNlZCB0byBvZmZzZXQgdGhlIGB4YFxuICogYW5kIHRoZSBgZ2AgcHJvcGVydHkgb2YgdGhlIHRleHR1cmUgaXMgdXNlZCB0byBvZmZzZXQgdGhlIGB5YC5cbiAqXG4gKiBUaGUgd2F5IGl0IHdvcmtzIGlzIGl0IHVzZXMgdGhlIHZhbHVlcyBvZiB0aGUgZGlzcGxhY2VtZW50IG1hcCB0byBsb29rIHVwIHRoZVxuICogY29ycmVjdCBwaXhlbHMgdG8gb3V0cHV0LiBUaGlzIG1lYW5zIGl0J3Mgbm90IHRlY2huaWNhbGx5IG1vdmluZyB0aGUgb3JpZ2luYWwuXG4gKiBJbnN0ZWFkLCBpdCdzIHN0YXJ0aW5nIGF0IHRoZSBvdXRwdXQgYW5kIGFza2luZyBcIndoaWNoIHBpeGVsIGZyb20gdGhlIG9yaWdpbmFsIGdvZXMgaGVyZVwiLlxuICogRm9yIGV4YW1wbGUsIGlmIGEgZGlzcGxhY2VtZW50IG1hcCBwaXhlbCBoYXMgYHJlZCA9IDFgIGFuZCB0aGUgZmlsdGVyIHNjYWxlIGlzIGAyMGAsXG4gKiB0aGlzIGZpbHRlciB3aWxsIG91dHB1dCB0aGUgcGl4ZWwgYXBwcm94aW1hdGVseSAyMCBwaXhlbHMgdG8gdGhlIHJpZ2h0IG9mIHRoZSBvcmlnaW5hbC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuRmlsdGVyXG4gKiBAbWVtYmVyb2YgUElYSS5maWx0ZXJzXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXNwbGFjZW1lbnRGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXJcbntcbiAgICBwdWJsaWMgbWFza1Nwcml0ZTogSVNwcml0ZU1hc2tUYXJnZXQ7XG4gICAgcHVibGljIG1hc2tNYXRyaXg6IE1hdHJpeDtcbiAgICBwdWJsaWMgc2NhbGU6IFBvaW50O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlNwcml0ZX0gc3ByaXRlIC0gVGhlIHNwcml0ZSB1c2VkIGZvciB0aGUgZGlzcGxhY2VtZW50IG1hcC4gKG1ha2Ugc3VyZSBpdHMgYWRkZWQgdG8gdGhlIHNjZW5lISlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NjYWxlXSAtIFRoZSBzY2FsZSBvZiB0aGUgZGlzcGxhY2VtZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3ByaXRlOiBJU3ByaXRlTWFza1RhcmdldCwgc2NhbGU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGNvbnN0IG1hc2tNYXRyaXggPSBuZXcgTWF0cml4KCk7XG5cbiAgICAgICAgc3ByaXRlLnJlbmRlcmFibGUgPSBmYWxzZTtcblxuICAgICAgICBzdXBlcih2ZXJ0ZXgsIGZyYWdtZW50LCB7XG4gICAgICAgICAgICBtYXBTYW1wbGVyOiBzcHJpdGUuX3RleHR1cmUsXG4gICAgICAgICAgICBmaWx0ZXJNYXRyaXg6IG1hc2tNYXRyaXgsXG4gICAgICAgICAgICBzY2FsZTogeyB4OiAxLCB5OiAxIH0sXG4gICAgICAgICAgICByb3RhdGlvbjogbmV3IEZsb2F0MzJBcnJheShbMSwgMCwgMCwgMV0pLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1hc2tTcHJpdGUgPSBzcHJpdGU7XG4gICAgICAgIHRoaXMubWFza01hdHJpeCA9IG1hc2tNYXRyaXg7XG5cbiAgICAgICAgaWYgKHNjYWxlID09PSBudWxsIHx8IHNjYWxlID09PSB1bmRlZmluZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNjYWxlID0gMjA7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogc2NhbGVYLCBzY2FsZVkgZm9yIGRpc3BsYWNlbWVudHNcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5Qb2ludH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2NhbGUgPSBuZXcgUG9pbnQoc2NhbGUsIHNjYWxlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBmaWx0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuc3lzdGVtcy5GaWx0ZXJTeXN0ZW19IGZpbHRlck1hbmFnZXIgLSBUaGUgbWFuYWdlci5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gaW5wdXQgLSBUaGUgaW5wdXQgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJUZXh0dXJlfSBvdXRwdXQgLSBUaGUgb3V0cHV0IHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge1BJWEkuQ0xFQVJfTU9ERVN9IGNsZWFyTW9kZSAtIGNsZWFyTW9kZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXBwbHkoXG4gICAgICAgIGZpbHRlck1hbmFnZXI6IHN5c3RlbXMuRmlsdGVyU3lzdGVtLCBpbnB1dDogUmVuZGVyVGV4dHVyZSwgb3V0cHV0OiBSZW5kZXJUZXh0dXJlLCBjbGVhck1vZGU6IENMRUFSX01PREVTXG4gICAgKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy8gZmlsbCBtYXNrTWF0cml4IHdpdGggX25vcm1hbGl6ZWQgc3ByaXRlIHRleHR1cmUgY29vcmRzX1xuICAgICAgICB0aGlzLnVuaWZvcm1zLmZpbHRlck1hdHJpeCA9IGZpbHRlck1hbmFnZXIuY2FsY3VsYXRlU3ByaXRlTWF0cml4KHRoaXMubWFza01hdHJpeCwgdGhpcy5tYXNrU3ByaXRlKTtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy5zY2FsZS54ID0gdGhpcy5zY2FsZS54O1xuICAgICAgICB0aGlzLnVuaWZvcm1zLnNjYWxlLnkgPSB0aGlzLnNjYWxlLnk7XG5cbiAgICAgICAgLy8gRXh0cmFjdCByb3RhdGlvbiBmcm9tIHdvcmxkIHRyYW5zZm9ybVxuICAgICAgICBjb25zdCB3dCA9IHRoaXMubWFza1Nwcml0ZS53b3JsZFRyYW5zZm9ybTtcbiAgICAgICAgY29uc3QgbGVuWCA9IE1hdGguc3FydCgod3QuYSAqIHd0LmEpICsgKHd0LmIgKiB3dC5iKSk7XG4gICAgICAgIGNvbnN0IGxlblkgPSBNYXRoLnNxcnQoKHd0LmMgKiB3dC5jKSArICh3dC5kICogd3QuZCkpO1xuXG4gICAgICAgIGlmIChsZW5YICE9PSAwICYmIGxlblkgIT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybXMucm90YXRpb25bMF0gPSB3dC5hIC8gbGVuWDtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybXMucm90YXRpb25bMV0gPSB3dC5iIC8gbGVuWDtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybXMucm90YXRpb25bMl0gPSB3dC5jIC8gbGVuWTtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybXMucm90YXRpb25bM10gPSB3dC5kIC8gbGVuWTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRyYXcgdGhlIGZpbHRlci4uLlxuICAgICAgICBmaWx0ZXJNYW5hZ2VyLmFwcGx5RmlsdGVyKHRoaXMsIGlucHV0LCBvdXRwdXQsIGNsZWFyTW9kZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgdXNlZCBmb3IgdGhlIGRpc3BsYWNlbWVudCBtYXAuIE11c3QgYmUgcG93ZXIgb2YgMiBzaXplZCB0ZXh0dXJlLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7UElYSS5UZXh0dXJlfVxuICAgICAqL1xuICAgIGdldCBtYXAoKTogVGV4dHVyZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMubWFwU2FtcGxlcjtcbiAgICB9XG5cbiAgICBzZXQgbWFwKHZhbHVlOiBUZXh0dXJlKVxuICAgIHtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy5tYXBTYW1wbGVyID0gdmFsdWU7XG4gICAgfVxufVxuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwgImltcG9ydCB7IEZpbHRlciB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHZlcnRleCBmcm9tICcuL2Z4YWEudmVydCc7XG5pbXBvcnQgZnJhZ21lbnQgZnJvbSAnLi9meGFhLmZyYWcnO1xuXG4vKipcbiAqIEJhc2ljIEZYQUEgKEZhc3QgQXBwcm94aW1hdGUgQW50aS1BbGlhc2luZykgaW1wbGVtZW50YXRpb24gYmFzZWQgb24gdGhlIGNvZGUgb24gZ2Vla3MzZC5jb21cbiAqIHdpdGggdGhlIG1vZGlmaWNhdGlvbiB0aGF0IHRoZSB0ZXh0dXJlMkRMb2Qgc3R1ZmYgd2FzIHJlbW92ZWQgc2luY2UgaXQgaXMgdW5zdXBwb3J0ZWQgYnkgV2ViR0wuXG4gKlxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWl0c3VoaWtvL3dlYmdsLW1laW5jcmFmdFxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5GaWx0ZXJcbiAqIEBtZW1iZXJvZiBQSVhJLmZpbHRlcnNcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBGWEFBRmlsdGVyIGV4dGVuZHMgRmlsdGVyXG57XG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgLy8gVE9ETyAtIG5lZWRzIHdvcmtcbiAgICAgICAgc3VwZXIodmVydGV4LCBmcmFnbWVudCk7XG4gICAgfVxufVxuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwgImltcG9ydCB7IEZpbHRlciwgZGVmYXVsdEZpbHRlclZlcnRleCB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IGZyYWdtZW50IGZyb20gJy4vbm9pc2UuZnJhZyc7XG5cbi8qKlxuICogQGF1dGhvciBWaWNvIEB2aWNvY290ZWFcbiAqIG9yaWdpbmFsIGZpbHRlcjogaHR0cHM6Ly9naXRodWIuY29tL2V2YW53L2dsZnguanMvYmxvYi9tYXN0ZXIvc3JjL2ZpbHRlcnMvYWRqdXN0L25vaXNlLmpzXG4gKi9cblxuLyoqXG4gKiBBIE5vaXNlIGVmZmVjdCBmaWx0ZXIuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLkZpbHRlclxuICogQG1lbWJlcm9mIFBJWEkuZmlsdGVyc1xuICovXG5leHBvcnQgY2xhc3MgTm9pc2VGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXJcbntcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW25vaXNlPTAuNV0gLSBUaGUgbm9pc2UgaW50ZW5zaXR5LCBzaG91bGQgYmUgYSBub3JtYWxpemVkIHZhbHVlIGluIHRoZSByYW5nZSBbMCwgMV0uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWVkXSAtIEEgcmFuZG9tIHNlZWQgZm9yIHRoZSBub2lzZSBnZW5lcmF0aW9uLiBEZWZhdWx0IGlzIGBNYXRoLnJhbmRvbSgpYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihub2lzZSA9IDAuNSwgc2VlZCA9IE1hdGgucmFuZG9tKCkpXG4gICAge1xuICAgICAgICBzdXBlcihkZWZhdWx0RmlsdGVyVmVydGV4LCBmcmFnbWVudCwge1xuICAgICAgICAgICAgdU5vaXNlOiAwLFxuICAgICAgICAgICAgdVNlZWQ6IDAsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubm9pc2UgPSBub2lzZTtcbiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYW1vdW50IG9mIG5vaXNlIHRvIGFwcGx5LCB0aGlzIHZhbHVlIHNob3VsZCBiZSBpbiB0aGUgcmFuZ2UgKDAsIDFdLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDAuNVxuICAgICAqL1xuICAgIGdldCBub2lzZSgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnVOb2lzZTtcbiAgICB9XG5cbiAgICBzZXQgbm9pc2UodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMudW5pZm9ybXMudU5vaXNlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzZWVkIHZhbHVlIHRvIGFwcGx5IHRvIHRoZSByYW5kb20gbm9pc2UgZ2VuZXJhdGlvbi4gYE1hdGgucmFuZG9tKClgIGlzIGEgZ29vZCB2YWx1ZSB0byB1c2UuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHNlZWQoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy51U2VlZDtcbiAgICB9XG5cbiAgICBzZXQgc2VlZCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy51U2VlZCA9IHZhbHVlO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBUZXh0dXJlLCBCYXNlVGV4dHVyZSwgUmVuZGVyVGV4dHVyZSwgUmVuZGVyZXIsIE1hc2tEYXRhIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICdAcGl4aS9zcHJpdGUnO1xuaW1wb3J0IHsgQ29udGFpbmVyLCBEaXNwbGF5T2JqZWN0LCBJRGVzdHJveU9wdGlvbnMgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmltcG9ydCB7IElQb2ludERhdGEsIE1hdHJpeCwgUmVjdGFuZ2xlIH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5pbXBvcnQgeyB1aWQgfSBmcm9tICdAcGl4aS91dGlscyc7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJ0BwaXhpL3NldHRpbmdzJztcbmltcG9ydCB7IENhbnZhc1JlbmRlcmVyIH0gZnJvbSAnQHBpeGkvY2FudmFzLXJlbmRlcmVyJztcblxuY29uc3QgX3RlbXBNYXRyaXggPSBuZXcgTWF0cml4KCk7XG5cbkRpc3BsYXlPYmplY3QucHJvdG90eXBlLl9jYWNoZUFzQml0bWFwID0gZmFsc2U7XG5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5fY2FjaGVEYXRhID0gbnVsbDtcblxuLy8gZmlndXJlZCB0aGVyZSdzIG5vIHBvaW50IGFkZGluZyBBTEwgdGhlIGV4dHJhIHZhcmlhYmxlcyB0byBwcm90b3R5cGUuXG4vLyB0aGlzIG1vZGVsIGNhbiBob2xkIHRoZSBpbmZvcm1hdGlvbiBuZWVkZWQuIFRoaXMgY2FuIGFsc28gYmUgZ2VuZXJhdGVkIG9uIGRlbWFuZCBhc1xuLy8gbW9zdCBvYmplY3RzIGFyZSBub3QgY2FjaGVkIGFzIGJpdG1hcHMuXG4vKipcbiAqIEBjbGFzc1xuICogQGlnbm9yZVxuICovXG5leHBvcnQgY2xhc3MgQ2FjaGVEYXRhXG57XG4gICAgcHVibGljIHRleHR1cmVDYWNoZUlkOiBzdHJpbmc7XG4gICAgcHVibGljIG9yaWdpbmFsUmVuZGVyOiAocmVuZGVyZXI6IFJlbmRlcmVyKSA9PiB2b2lkO1xuICAgIHB1YmxpYyBvcmlnaW5hbFJlbmRlckNhbnZhczogKHJlbmRlcmVyOiBDYW52YXNSZW5kZXJlcikgPT4gdm9pZDtcbiAgICBwdWJsaWMgb3JpZ2luYWxDYWxjdWxhdGVCb3VuZHM6ICgpID0+IHZvaWQ7XG4gICAgcHVibGljIG9yaWdpbmFsR2V0TG9jYWxCb3VuZHM6IChyZWN0PzogUmVjdGFuZ2xlKSA9PiBSZWN0YW5nbGU7XG4gICAgcHVibGljIG9yaWdpbmFsVXBkYXRlVHJhbnNmb3JtOiAoKSA9PiB2b2lkO1xuICAgIHB1YmxpYyBvcmlnaW5hbERlc3Ryb3k6IChvcHRpb25zPzogSURlc3Ryb3lPcHRpb25zfGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgcHVibGljIG9yaWdpbmFsTWFzazogQ29udGFpbmVyfE1hc2tEYXRhO1xuICAgIHB1YmxpYyBvcmlnaW5hbEZpbHRlckFyZWE6IFJlY3RhbmdsZTtcbiAgICBwdWJsaWMgb3JpZ2luYWxDb250YWluc1BvaW50OiAocG9pbnQ6IElQb2ludERhdGEpID0+IGJvb2xlYW47XG4gICAgcHVibGljIHNwcml0ZTogU3ByaXRlO1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgdGhpcy50ZXh0dXJlQ2FjaGVJZCA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5vcmlnaW5hbFJlbmRlciA9IG51bGw7XG4gICAgICAgIHRoaXMub3JpZ2luYWxSZW5kZXJDYW52YXMgPSBudWxsO1xuICAgICAgICB0aGlzLm9yaWdpbmFsQ2FsY3VsYXRlQm91bmRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEdldExvY2FsQm91bmRzID0gbnVsbDtcblxuICAgICAgICB0aGlzLm9yaWdpbmFsVXBkYXRlVHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbERlc3Ryb3kgPSBudWxsO1xuICAgICAgICB0aGlzLm9yaWdpbmFsTWFzayA9IG51bGw7XG4gICAgICAgIHRoaXMub3JpZ2luYWxGaWx0ZXJBcmVhID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbENvbnRhaW5zUG9pbnQgPSBudWxsO1xuICAgICAgICB0aGlzLnNwcml0ZSA9IG51bGw7XG4gICAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhEaXNwbGF5T2JqZWN0LnByb3RvdHlwZSwge1xuICAgIC8qKlxuICAgICAqIFNldCB0aGlzIHRvIHRydWUgaWYgeW91IHdhbnQgdGhpcyBkaXNwbGF5IG9iamVjdCB0byBiZSBjYWNoZWQgYXMgYSBiaXRtYXAuXG4gICAgICogVGhpcyBiYXNpY2FsbHkgdGFrZXMgYSBzbmFwIHNob3Qgb2YgdGhlIGRpc3BsYXkgb2JqZWN0IGFzIGl0IGlzIGF0IHRoYXQgbW9tZW50LiBJdCBjYW5cbiAgICAgKiBwcm92aWRlIGEgcGVyZm9ybWFuY2UgYmVuZWZpdCBmb3IgY29tcGxleCBzdGF0aWMgZGlzcGxheU9iamVjdHMuXG4gICAgICogVG8gcmVtb3ZlIHNpbXBseSBzZXQgdGhpcyBwcm9wZXJ0eSB0byBgZmFsc2VgXG4gICAgICpcbiAgICAgKiBJTVBPUlRBTlQgR09UQ0hBIC0gTWFrZSBzdXJlIHRoYXQgYWxsIHlvdXIgdGV4dHVyZXMgYXJlIHByZWxvYWRlZCBCRUZPUkUgc2V0dGluZyB0aGlzIHByb3BlcnR5IHRvIHRydWVcbiAgICAgKiBhcyBpdCB3aWxsIHRha2UgYSBzbmFwc2hvdCBvZiB3aGF0IGlzIGN1cnJlbnRseSB0aGVyZS4gSWYgdGhlIHRleHR1cmVzIGhhdmUgbm90IGxvYWRlZCB0aGVuIHRoZXkgd2lsbCBub3QgYXBwZWFyLlxuICAgICAqXG4gICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICAgICAqL1xuICAgIGNhY2hlQXNCaXRtYXA6IHtcbiAgICAgICAgZ2V0KCk6IENhY2hlRGF0YVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVBc0JpdG1hcDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHZhbHVlOiBDYWNoZURhdGEpOiB2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYWNoZUFzQml0bWFwID09PSB2YWx1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2NhY2hlQXNCaXRtYXAgPSB2YWx1ZTtcblxuICAgICAgICAgICAgbGV0IGRhdGE6IENhY2hlRGF0YTtcblxuICAgICAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2FjaGVEYXRhKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVEYXRhID0gbmV3IENhY2hlRGF0YSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLl9jYWNoZURhdGE7XG5cbiAgICAgICAgICAgICAgICBkYXRhLm9yaWdpbmFsUmVuZGVyID0gdGhpcy5yZW5kZXI7XG4gICAgICAgICAgICAgICAgZGF0YS5vcmlnaW5hbFJlbmRlckNhbnZhcyA9IHRoaXMucmVuZGVyQ2FudmFzO1xuXG4gICAgICAgICAgICAgICAgZGF0YS5vcmlnaW5hbFVwZGF0ZVRyYW5zZm9ybSA9IHRoaXMudXBkYXRlVHJhbnNmb3JtO1xuICAgICAgICAgICAgICAgIGRhdGEub3JpZ2luYWxDYWxjdWxhdGVCb3VuZHMgPSB0aGlzLmNhbGN1bGF0ZUJvdW5kcztcbiAgICAgICAgICAgICAgICBkYXRhLm9yaWdpbmFsR2V0TG9jYWxCb3VuZHMgPSB0aGlzLmdldExvY2FsQm91bmRzO1xuXG4gICAgICAgICAgICAgICAgZGF0YS5vcmlnaW5hbERlc3Ryb3kgPSB0aGlzLmRlc3Ryb3k7XG5cbiAgICAgICAgICAgICAgICBkYXRhLm9yaWdpbmFsQ29udGFpbnNQb2ludCA9IHRoaXMuY29udGFpbnNQb2ludDtcblxuICAgICAgICAgICAgICAgIGRhdGEub3JpZ2luYWxNYXNrID0gdGhpcy5fbWFzaztcbiAgICAgICAgICAgICAgICBkYXRhLm9yaWdpbmFsRmlsdGVyQXJlYSA9IHRoaXMuZmlsdGVyQXJlYTtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyID0gdGhpcy5fcmVuZGVyQ2FjaGVkO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FudmFzID0gdGhpcy5fcmVuZGVyQ2FjaGVkQ2FudmFzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95ID0gdGhpcy5fY2FjaGVBc0JpdG1hcERlc3Ryb3k7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuX2NhY2hlRGF0YTtcblxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnNwcml0ZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2Rlc3Ryb3lDYWNoZWREaXNwbGF5T2JqZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIgPSBkYXRhLm9yaWdpbmFsUmVuZGVyO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FudmFzID0gZGF0YS5vcmlnaW5hbFJlbmRlckNhbnZhcztcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kcyA9IGRhdGEub3JpZ2luYWxDYWxjdWxhdGVCb3VuZHM7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRMb2NhbEJvdW5kcyA9IGRhdGEub3JpZ2luYWxHZXRMb2NhbEJvdW5kcztcblxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSA9IGRhdGEub3JpZ2luYWxEZXN0cm95O1xuXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0gPSBkYXRhLm9yaWdpbmFsVXBkYXRlVHJhbnNmb3JtO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbnNQb2ludCA9IGRhdGEub3JpZ2luYWxDb250YWluc1BvaW50O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFzayA9IGRhdGEub3JpZ2luYWxNYXNrO1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyQXJlYSA9IGRhdGEub3JpZ2luYWxGaWx0ZXJBcmVhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0sXG59KTtcblxuLyoqXG4gKiBSZW5kZXJzIGEgY2FjaGVkIHZlcnNpb24gb2YgdGhlIHNwcml0ZSB3aXRoIFdlYkdMXG4gKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvbiBfcmVuZGVyQ2FjaGVkXG4gKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIHRoZSBXZWJHTCByZW5kZXJlclxuICovXG5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5fcmVuZGVyQ2FjaGVkID0gZnVuY3Rpb24gX3JlbmRlckNhY2hlZChyZW5kZXJlcjogUmVuZGVyZXIpOiB2b2lkXG57XG4gICAgaWYgKCF0aGlzLnZpc2libGUgfHwgdGhpcy53b3JsZEFscGhhIDw9IDAgfHwgIXRoaXMucmVuZGVyYWJsZSlcbiAgICB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9pbml0Q2FjaGVkRGlzcGxheU9iamVjdChyZW5kZXJlcik7XG5cbiAgICB0aGlzLl9jYWNoZURhdGEuc3ByaXRlLnRyYW5zZm9ybS5fd29ybGRJRCA9IHRoaXMudHJhbnNmb3JtLl93b3JsZElEO1xuICAgIHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUud29ybGRBbHBoYSA9IHRoaXMud29ybGRBbHBoYTtcbiAgICAodGhpcy5fY2FjaGVEYXRhLnNwcml0ZSBhcyBhbnkpLl9yZW5kZXIocmVuZGVyZXIpO1xufTtcblxuLyoqXG4gKiBQcmVwYXJlcyB0aGUgV2ViR0wgcmVuZGVyZXIgdG8gY2FjaGUgdGhlIHNwcml0ZVxuICpcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb24gX2luaXRDYWNoZWREaXNwbGF5T2JqZWN0XG4gKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIHRoZSBXZWJHTCByZW5kZXJlclxuICovXG5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5faW5pdENhY2hlZERpc3BsYXlPYmplY3QgPSBmdW5jdGlvbiBfaW5pdENhY2hlZERpc3BsYXlPYmplY3QocmVuZGVyZXI6IFJlbmRlcmVyKTogdm9pZFxue1xuICAgIGlmICh0aGlzLl9jYWNoZURhdGEgJiYgdGhpcy5fY2FjaGVEYXRhLnNwcml0ZSlcbiAgICB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBtYWtlIHN1cmUgYWxwaGEgaXMgc2V0IHRvIDEgb3RoZXJ3aXNlIGl0IHdpbGwgZ2V0IHJlbmRlcmVkIGFzIGludmlzaWJsZSFcbiAgICBjb25zdCBjYWNoZUFscGhhID0gdGhpcy5hbHBoYTtcblxuICAgIHRoaXMuYWxwaGEgPSAxO1xuXG4gICAgLy8gZmlyc3Qgd2UgZmx1c2ggYW55dGhpbmcgbGVmdCBpbiB0aGUgcmVuZGVyZXIgKG90aGVyd2lzZSBpdCB3b3VsZCBnZXQgcmVuZGVyZWQgdG8gdGhlIGNhY2hlZCB0ZXh0dXJlKVxuICAgIHJlbmRlcmVyLmJhdGNoLmZsdXNoKCk7XG4gICAgLy8gdGhpcy5maWx0ZXJzPSBbXTtcblxuICAgIC8vIG5leHQgd2UgZmluZCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgdW50cmFuc2Zvcm1lZCBvYmplY3RcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIGFsc28gY2FsbHMgdXBkYXRldHJhbnNmb3JtIG9uIGFsbCBpdHMgY2hpbGRyZW4gYXMgcGFydCBvZiB0aGUgbWVhc3VyaW5nLlxuICAgIC8vIFRoaXMgbWVhbnMgd2UgZG9uJ3QgbmVlZCB0byB1cGRhdGUgdGhlIHRyYW5zZm9ybSBhZ2FpbiBpbiB0aGlzIGZ1bmN0aW9uXG4gICAgLy8gVE9ETyBwYXNzIGFuIG9iamVjdCB0byBjbG9uZSB0b28/IHNhdmVzIGhhdmluZyB0byBjcmVhdGUgYSBuZXcgb25lIGVhY2ggdGltZSFcbiAgICBjb25zdCBib3VuZHMgPSAodGhpcyBhcyBDb250YWluZXIpLmdldExvY2FsQm91bmRzKG51bGwsIHRydWUpLmNsb25lKCk7XG5cbiAgICAvLyBhZGQgc29tZSBwYWRkaW5nIVxuICAgIGlmICh0aGlzLmZpbHRlcnMpXG4gICAge1xuICAgICAgICBjb25zdCBwYWRkaW5nID0gdGhpcy5maWx0ZXJzWzBdLnBhZGRpbmc7XG5cbiAgICAgICAgYm91bmRzLnBhZChwYWRkaW5nKTtcbiAgICB9XG5cbiAgICBib3VuZHMuY2VpbChzZXR0aW5ncy5SRVNPTFVUSU9OKTtcblxuICAgIC8vIGZvciBub3cgd2UgY2FjaGUgdGhlIGN1cnJlbnQgcmVuZGVyVGFyZ2V0IHRoYXQgdGhlIFdlYkdMIHJlbmRlcmVyIGlzIGN1cnJlbnRseSB1c2luZy5cbiAgICAvLyB0aGlzIGNvdWxkIGJlIG1vcmUgZWxlZ2FudC4uXG4gICAgY29uc3QgY2FjaGVkUmVuZGVyVGV4dHVyZSA9IHJlbmRlcmVyLnJlbmRlclRleHR1cmUuY3VycmVudDtcbiAgICBjb25zdCBjYWNoZWRTb3VyY2VGcmFtZSA9IHJlbmRlcmVyLnJlbmRlclRleHR1cmUuc291cmNlRnJhbWUuY2xvbmUoKTtcbiAgICBjb25zdCBjYWNoZWRQcm9qZWN0aW9uVHJhbnNmb3JtID0gcmVuZGVyZXIucHJvamVjdGlvbi50cmFuc2Zvcm07XG5cbiAgICAvLyBXZSBhbHNvIHN0b3JlIHRoZSBmaWx0ZXIgc3RhY2sgLSBJIHdpbGwgZGVmaW5pdGVseSBsb29rIHRvIGNoYW5nZSBob3cgdGhpcyB3b3JrcyBhIGxpdHRsZSBsYXRlciBkb3duIHRoZSBsaW5lLlxuICAgIC8vIGNvbnN0IHN0YWNrID0gcmVuZGVyZXIuZmlsdGVyTWFuYWdlci5maWx0ZXJTdGFjaztcblxuICAgIC8vIHRoaXMgcmVuZGVyVGV4dHVyZSB3aWxsIGJlIHVzZWQgdG8gc3RvcmUgdGhlIGNhY2hlZCBEaXNwbGF5T2JqZWN0XG4gICAgY29uc3QgcmVuZGVyVGV4dHVyZSA9IFJlbmRlclRleHR1cmUuY3JlYXRlKHsgd2lkdGg6IGJvdW5kcy53aWR0aCwgaGVpZ2h0OiBib3VuZHMuaGVpZ2h0IH0pO1xuXG4gICAgY29uc3QgdGV4dHVyZUNhY2hlSWQgPSBgY2FjaGVBc0JpdG1hcF8ke3VpZCgpfWA7XG5cbiAgICB0aGlzLl9jYWNoZURhdGEudGV4dHVyZUNhY2hlSWQgPSB0ZXh0dXJlQ2FjaGVJZDtcblxuICAgIEJhc2VUZXh0dXJlLmFkZFRvQ2FjaGUocmVuZGVyVGV4dHVyZS5iYXNlVGV4dHVyZSwgdGV4dHVyZUNhY2hlSWQpO1xuICAgIFRleHR1cmUuYWRkVG9DYWNoZShyZW5kZXJUZXh0dXJlLCB0ZXh0dXJlQ2FjaGVJZCk7XG5cbiAgICAvLyBuZWVkIHRvIHNldCAvL1xuICAgIGNvbnN0IG0gPSB0aGlzLnRyYW5zZm9ybS5sb2NhbFRyYW5zZm9ybS5jb3B5VG8oX3RlbXBNYXRyaXgpLmludmVydCgpLnRyYW5zbGF0ZSgtYm91bmRzLngsIC1ib3VuZHMueSk7XG5cbiAgICAvLyBzZXQgYWxsIHByb3BlcnRpZXMgdG8gdGhlcmUgb3JpZ2luYWwgc28gd2UgY2FuIHJlbmRlciB0byBhIHRleHR1cmVcbiAgICB0aGlzLnJlbmRlciA9IHRoaXMuX2NhY2hlRGF0YS5vcmlnaW5hbFJlbmRlcjtcblxuICAgIHJlbmRlcmVyLnJlbmRlcih0aGlzLCByZW5kZXJUZXh0dXJlLCB0cnVlLCBtLCBmYWxzZSk7XG5cbiAgICAvLyBub3cgcmVzdG9yZSB0aGUgc3RhdGUgYmUgc2V0dGluZyB0aGUgbmV3IHByb3BlcnRpZXNcbiAgICByZW5kZXJlci5wcm9qZWN0aW9uLnRyYW5zZm9ybSA9IGNhY2hlZFByb2plY3Rpb25UcmFuc2Zvcm07XG4gICAgcmVuZGVyZXIucmVuZGVyVGV4dHVyZS5iaW5kKGNhY2hlZFJlbmRlclRleHR1cmUsIGNhY2hlZFNvdXJjZUZyYW1lKTtcblxuICAgIC8vIHJlbmRlcmVyLmZpbHRlck1hbmFnZXIuZmlsdGVyU3RhY2sgPSBzdGFjaztcblxuICAgIHRoaXMucmVuZGVyID0gdGhpcy5fcmVuZGVyQ2FjaGVkO1xuICAgIC8vIHRoZSByZXN0IGlzIHRoZSBzYW1lIGFzIGZvciBDYW52YXNcbiAgICB0aGlzLnVwZGF0ZVRyYW5zZm9ybSA9IHRoaXMuZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybTtcbiAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kcyA9IHRoaXMuX2NhbGN1bGF0ZUNhY2hlZEJvdW5kcztcbiAgICB0aGlzLmdldExvY2FsQm91bmRzID0gdGhpcy5fZ2V0Q2FjaGVkTG9jYWxCb3VuZHM7XG5cbiAgICB0aGlzLl9tYXNrID0gbnVsbDtcbiAgICB0aGlzLmZpbHRlckFyZWEgPSBudWxsO1xuXG4gICAgLy8gY3JlYXRlIG91ciBjYWNoZWQgc3ByaXRlXG4gICAgY29uc3QgY2FjaGVkU3ByaXRlID0gbmV3IFNwcml0ZShyZW5kZXJUZXh0dXJlKTtcblxuICAgIGNhY2hlZFNwcml0ZS50cmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybTtcbiAgICBjYWNoZWRTcHJpdGUuYW5jaG9yLnggPSAtKGJvdW5kcy54IC8gYm91bmRzLndpZHRoKTtcbiAgICBjYWNoZWRTcHJpdGUuYW5jaG9yLnkgPSAtKGJvdW5kcy55IC8gYm91bmRzLmhlaWdodCk7XG4gICAgY2FjaGVkU3ByaXRlLmFscGhhID0gY2FjaGVBbHBoYTtcbiAgICBjYWNoZWRTcHJpdGUuX2JvdW5kcyA9IHRoaXMuX2JvdW5kcztcblxuICAgIHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUgPSBjYWNoZWRTcHJpdGU7XG5cbiAgICB0aGlzLnRyYW5zZm9ybS5fcGFyZW50SUQgPSAtMTtcbiAgICAvLyByZXN0b3JlIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIGNhY2hlZCBzcHJpdGUgdG8gYXZvaWQgdGhlIG5hc3R5IGZsaWNrZXIuLlxuICAgIGlmICghdGhpcy5wYXJlbnQpXG4gICAge1xuICAgICAgICB0aGlzLmVuYWJsZVRlbXBQYXJlbnQoKTtcbiAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy5kaXNhYmxlVGVtcFBhcmVudChudWxsKTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICB9XG5cbiAgICAvLyBtYXAgdGhlIGhpdCB0ZXN0Li5cbiAgICAodGhpcyBhcyBTcHJpdGUpLmNvbnRhaW5zUG9pbnQgPSBjYWNoZWRTcHJpdGUuY29udGFpbnNQb2ludC5iaW5kKGNhY2hlZFNwcml0ZSk7XG59O1xuXG4vKipcbiAqIFJlbmRlcnMgYSBjYWNoZWQgdmVyc2lvbiBvZiB0aGUgc3ByaXRlIHdpdGggY2FudmFzXG4gKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvbiBfcmVuZGVyQ2FjaGVkQ2FudmFzXG4gKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICogQHBhcmFtIHtQSVhJLkNhbnZhc1JlbmRlcmVyfSByZW5kZXJlciAtIFRoZSBjYW52YXMgcmVuZGVyZXJcbiAqL1xuRGlzcGxheU9iamVjdC5wcm90b3R5cGUuX3JlbmRlckNhY2hlZENhbnZhcyA9IGZ1bmN0aW9uIF9yZW5kZXJDYWNoZWRDYW52YXMocmVuZGVyZXI6IENhbnZhc1JlbmRlcmVyKTogdm9pZFxue1xuICAgIGlmICghdGhpcy52aXNpYmxlIHx8IHRoaXMud29ybGRBbHBoYSA8PSAwIHx8ICF0aGlzLnJlbmRlcmFibGUpXG4gICAge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5faW5pdENhY2hlZERpc3BsYXlPYmplY3RDYW52YXMocmVuZGVyZXIpO1xuXG4gICAgdGhpcy5fY2FjaGVEYXRhLnNwcml0ZS53b3JsZEFscGhhID0gdGhpcy53b3JsZEFscGhhO1xuICAgICh0aGlzLl9jYWNoZURhdGEuc3ByaXRlIGFzIGFueSkuX3JlbmRlckNhbnZhcyhyZW5kZXJlcik7XG59O1xuXG4vLyBUT0RPIHRoaXMgY2FuIGJlIHRoZSBzYW1lIGFzIHRoZSBXZWJHTCB2ZXJzaW9uLi4gd2lsbCBuZWVkIHRvIGRvIGEgbGl0dGxlIHR3ZWFraW5nIGZpcnN0IHRob3VnaC4uXG4vKipcbiAqIFByZXBhcmVzIHRoZSBDYW52YXMgcmVuZGVyZXIgdG8gY2FjaGUgdGhlIHNwcml0ZVxuICpcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb24gX2luaXRDYWNoZWREaXNwbGF5T2JqZWN0Q2FudmFzXG4gKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICogQHBhcmFtIHtQSVhJLkNhbnZhc1JlbmRlcmVyfSByZW5kZXJlciAtIFRoZSBjYW52YXMgcmVuZGVyZXJcbiAqL1xuRGlzcGxheU9iamVjdC5wcm90b3R5cGUuX2luaXRDYWNoZWREaXNwbGF5T2JqZWN0Q2FudmFzID0gZnVuY3Rpb24gX2luaXRDYWNoZWREaXNwbGF5T2JqZWN0Q2FudmFzKFxuICAgIHJlbmRlcmVyOiBDYW52YXNSZW5kZXJlclxuKTogdm9pZFxue1xuICAgIGlmICh0aGlzLl9jYWNoZURhdGEgJiYgdGhpcy5fY2FjaGVEYXRhLnNwcml0ZSlcbiAgICB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBnZXQgYm91bmRzIGFjdHVhbGx5IHRyYW5zZm9ybXMgdGhlIG9iamVjdCBmb3IgdXMgYWxyZWFkeSFcbiAgICBjb25zdCBib3VuZHMgPSAodGhpcyBhcyBDb250YWluZXIpLmdldExvY2FsQm91bmRzKG51bGwsIHRydWUpO1xuXG4gICAgY29uc3QgY2FjaGVBbHBoYSA9IHRoaXMuYWxwaGE7XG5cbiAgICB0aGlzLmFscGhhID0gMTtcblxuICAgIGNvbnN0IGNhY2hlZFJlbmRlclRhcmdldCA9IHJlbmRlcmVyLmNvbnRleHQ7XG4gICAgY29uc3QgY2FjaGVkUHJvamVjdGlvblRyYW5zZm9ybSA9IChyZW5kZXJlciBhcyBhbnkpLl9wcm9qVHJhbnNmb3JtO1xuXG4gICAgYm91bmRzLmNlaWwoc2V0dGluZ3MuUkVTT0xVVElPTik7XG5cbiAgICBjb25zdCByZW5kZXJUZXh0dXJlID0gUmVuZGVyVGV4dHVyZS5jcmVhdGUoeyB3aWR0aDogYm91bmRzLndpZHRoLCBoZWlnaHQ6IGJvdW5kcy5oZWlnaHQgfSk7XG5cbiAgICBjb25zdCB0ZXh0dXJlQ2FjaGVJZCA9IGBjYWNoZUFzQml0bWFwXyR7dWlkKCl9YDtcblxuICAgIHRoaXMuX2NhY2hlRGF0YS50ZXh0dXJlQ2FjaGVJZCA9IHRleHR1cmVDYWNoZUlkO1xuXG4gICAgQmFzZVRleHR1cmUuYWRkVG9DYWNoZShyZW5kZXJUZXh0dXJlLmJhc2VUZXh0dXJlLCB0ZXh0dXJlQ2FjaGVJZCk7XG4gICAgVGV4dHVyZS5hZGRUb0NhY2hlKHJlbmRlclRleHR1cmUsIHRleHR1cmVDYWNoZUlkKTtcblxuICAgIC8vIG5lZWQgdG8gc2V0IC8vXG4gICAgY29uc3QgbSA9IF90ZW1wTWF0cml4O1xuXG4gICAgdGhpcy50cmFuc2Zvcm0ubG9jYWxUcmFuc2Zvcm0uY29weVRvKG0pO1xuICAgIG0uaW52ZXJ0KCk7XG5cbiAgICBtLnR4IC09IGJvdW5kcy54O1xuICAgIG0udHkgLT0gYm91bmRzLnk7XG5cbiAgICAvLyBtLmFwcGVuZCh0aGlzLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybS4pXG4gICAgLy8gc2V0IGFsbCBwcm9wZXJ0aWVzIHRvIHRoZXJlIG9yaWdpbmFsIHNvIHdlIGNhbiByZW5kZXIgdG8gYSB0ZXh0dXJlXG4gICAgdGhpcy5yZW5kZXJDYW52YXMgPSB0aGlzLl9jYWNoZURhdGEub3JpZ2luYWxSZW5kZXJDYW52YXM7XG5cbiAgICByZW5kZXJlci5yZW5kZXIodGhpcywgcmVuZGVyVGV4dHVyZSwgdHJ1ZSwgbSwgZmFsc2UpO1xuICAgIC8vIG5vdyByZXN0b3JlIHRoZSBzdGF0ZSBiZSBzZXR0aW5nIHRoZSBuZXcgcHJvcGVydGllc1xuICAgIHJlbmRlcmVyLmNvbnRleHQgPSBjYWNoZWRSZW5kZXJUYXJnZXQ7XG4gICAgKHJlbmRlcmVyIGFzIGFueSkuX3Byb2pUcmFuc2Zvcm0gPSBjYWNoZWRQcm9qZWN0aW9uVHJhbnNmb3JtO1xuXG4gICAgdGhpcy5yZW5kZXJDYW52YXMgPSB0aGlzLl9yZW5kZXJDYWNoZWRDYW52YXM7XG4gICAgLy8gdGhlIHJlc3QgaXMgdGhlIHNhbWUgYXMgZm9yIFdlYkdMXG4gICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0gPSB0aGlzLmRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm07XG4gICAgdGhpcy5jYWxjdWxhdGVCb3VuZHMgPSB0aGlzLl9jYWxjdWxhdGVDYWNoZWRCb3VuZHM7XG4gICAgdGhpcy5nZXRMb2NhbEJvdW5kcyA9IHRoaXMuX2dldENhY2hlZExvY2FsQm91bmRzO1xuXG4gICAgdGhpcy5fbWFzayA9IG51bGw7XG4gICAgdGhpcy5maWx0ZXJBcmVhID0gbnVsbDtcblxuICAgIC8vIGNyZWF0ZSBvdXIgY2FjaGVkIHNwcml0ZVxuICAgIGNvbnN0IGNhY2hlZFNwcml0ZSA9IG5ldyBTcHJpdGUocmVuZGVyVGV4dHVyZSk7XG5cbiAgICBjYWNoZWRTcHJpdGUudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtID0gdGhpcy50cmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm07XG4gICAgY2FjaGVkU3ByaXRlLmFuY2hvci54ID0gLShib3VuZHMueCAvIGJvdW5kcy53aWR0aCk7XG4gICAgY2FjaGVkU3ByaXRlLmFuY2hvci55ID0gLShib3VuZHMueSAvIGJvdW5kcy5oZWlnaHQpO1xuICAgIGNhY2hlZFNwcml0ZS5hbHBoYSA9IGNhY2hlQWxwaGE7XG4gICAgY2FjaGVkU3ByaXRlLl9ib3VuZHMgPSB0aGlzLl9ib3VuZHM7XG5cbiAgICB0aGlzLl9jYWNoZURhdGEuc3ByaXRlID0gY2FjaGVkU3ByaXRlO1xuXG4gICAgdGhpcy50cmFuc2Zvcm0uX3BhcmVudElEID0gLTE7XG4gICAgLy8gcmVzdG9yZSB0aGUgdHJhbnNmb3JtIG9mIHRoZSBjYWNoZWQgc3ByaXRlIHRvIGF2b2lkIHRoZSBuYXN0eSBmbGlja2VyLi5cbiAgICBpZiAoIXRoaXMucGFyZW50KVxuICAgIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSAocmVuZGVyZXIgYXMgYW55KS5fdGVtcERpc3BsYXlPYmplY3RQYXJlbnQ7XG4gICAgICAgIHRoaXMudXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICB9XG5cbiAgICAvLyBtYXAgdGhlIGhpdCB0ZXN0Li5cbiAgICAodGhpcyBhcyBTcHJpdGUpLmNvbnRhaW5zUG9pbnQgPSBjYWNoZWRTcHJpdGUuY29udGFpbnNQb2ludC5iaW5kKGNhY2hlZFNwcml0ZSk7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGJvdW5kcyBvZiB0aGUgY2FjaGVkIHNwcml0ZVxuICpcbiAqIEBwcml2YXRlXG4gKi9cbkRpc3BsYXlPYmplY3QucHJvdG90eXBlLl9jYWxjdWxhdGVDYWNoZWRCb3VuZHMgPSBmdW5jdGlvbiBfY2FsY3VsYXRlQ2FjaGVkQm91bmRzKCk6IHZvaWRcbntcbiAgICB0aGlzLl9ib3VuZHMuY2xlYXIoKTtcbiAgICB0aGlzLl9jYWNoZURhdGEuc3ByaXRlLnRyYW5zZm9ybS5fd29ybGRJRCA9IHRoaXMudHJhbnNmb3JtLl93b3JsZElEO1xuICAgICh0aGlzLl9jYWNoZURhdGEuc3ByaXRlIGFzIGFueSkuX2NhbGN1bGF0ZUJvdW5kcygpO1xuICAgIHRoaXMuX2JvdW5kcy51cGRhdGVJRCA9ICh0aGlzIGFzIGFueSkuX2JvdW5kc0lEO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBib3VuZHMgb2YgdGhlIGNhY2hlZCBzcHJpdGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge1JlY3RhbmdsZX0gVGhlIGxvY2FsIGJvdW5kcy5cbiAqL1xuRGlzcGxheU9iamVjdC5wcm90b3R5cGUuX2dldENhY2hlZExvY2FsQm91bmRzID0gZnVuY3Rpb24gX2dldENhY2hlZExvY2FsQm91bmRzKCk6IFJlY3RhbmdsZVxue1xuICAgIHJldHVybiB0aGlzLl9jYWNoZURhdGEuc3ByaXRlLmdldExvY2FsQm91bmRzKG51bGwpO1xufTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGUgY2FjaGVkIHNwcml0ZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5fZGVzdHJveUNhY2hlZERpc3BsYXlPYmplY3QgPSBmdW5jdGlvbiBfZGVzdHJveUNhY2hlZERpc3BsYXlPYmplY3QoKTogdm9pZFxue1xuICAgIHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUuX3RleHR1cmUuZGVzdHJveSh0cnVlKTtcbiAgICB0aGlzLl9jYWNoZURhdGEuc3ByaXRlID0gbnVsbDtcblxuICAgIEJhc2VUZXh0dXJlLnJlbW92ZUZyb21DYWNoZSh0aGlzLl9jYWNoZURhdGEudGV4dHVyZUNhY2hlSWQpO1xuICAgIFRleHR1cmUucmVtb3ZlRnJvbUNhY2hlKHRoaXMuX2NhY2hlRGF0YS50ZXh0dXJlQ2FjaGVJZCk7XG5cbiAgICB0aGlzLl9jYWNoZURhdGEudGV4dHVyZUNhY2hlSWQgPSBudWxsO1xufTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGUgY2FjaGVkIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R8Ym9vbGVhbn0gW29wdGlvbnNdIC0gT3B0aW9ucyBwYXJhbWV0ZXIuIEEgYm9vbGVhbiB3aWxsIGFjdCBhcyBpZiBhbGwgb3B0aW9uc1xuICogIGhhdmUgYmVlbiBzZXQgdG8gdGhhdCB2YWx1ZS5cbiAqICBVc2VkIHdoZW4gZGVzdHJveWluZyBjb250YWluZXJzLCBzZWUgdGhlIENvbnRhaW5lci5kZXN0cm95IG1ldGhvZC5cbiAqL1xuRGlzcGxheU9iamVjdC5wcm90b3R5cGUuX2NhY2hlQXNCaXRtYXBEZXN0cm95ID0gZnVuY3Rpb24gX2NhY2hlQXNCaXRtYXBEZXN0cm95KG9wdGlvbnM6IElEZXN0cm95T3B0aW9uc3xib29sZWFuKTogdm9pZFxue1xuICAgIHRoaXMuY2FjaGVBc0JpdG1hcCA9IGZhbHNlO1xuICAgIHRoaXMuZGVzdHJveShvcHRpb25zKTtcbn07XG4iLCAiaW1wb3J0IHsgRGlzcGxheU9iamVjdCwgQ29udGFpbmVyIH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5cbi8qKlxuICogVGhlIGluc3RhbmNlIG5hbWUgb2YgdGhlIG9iamVjdC5cbiAqXG4gKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICogQG1lbWJlciB7c3RyaW5nfSBuYW1lXG4gKi9cbkRpc3BsYXlPYmplY3QucHJvdG90eXBlLm5hbWUgPSBudWxsO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGRpc3BsYXkgb2JqZWN0IGluIHRoZSBjb250YWluZXIuXG4gKlxuICogUmVjdXJzaXZlIHNlYXJjaGVzIGFyZSBkb25lIGluIGEgcHJlb3JkZXIgdHJhdmVyc2FsLlxuICpcbiAqIEBtZXRob2QgZ2V0Q2hpbGRCeU5hbWVcbiAqIEBtZW1iZXJvZiBQSVhJLkNvbnRhaW5lciNcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gSW5zdGFuY2UgbmFtZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn1bZGVlcD1mYWxzZV0gLSBXaGV0aGVyIHRvIHNlYXJjaCByZWN1cnNpdmVseVxuICogQHJldHVybiB7UElYSS5EaXNwbGF5T2JqZWN0fSBUaGUgY2hpbGQgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gKi9cbkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0Q2hpbGRCeU5hbWUgPSBmdW5jdGlvbiBnZXRDaGlsZEJ5TmFtZShuYW1lOiBzdHJpbmcsIGRlZXA/OiBib29sZWFuKTogRGlzcGxheU9iamVjdFxue1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspXG4gICAge1xuICAgICAgICBpZiAodGhpcy5jaGlsZHJlbltpXS5uYW1lID09PSBuYW1lKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbltpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWVwKVxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGo7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSAodGhpcy5jaGlsZHJlbltpXSBhcyBDb250YWluZXIpO1xuXG4gICAgICAgICAgICBpZiAoIWNoaWxkLmdldENoaWxkQnlOYW1lKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAodGhpcy5jaGlsZHJlbltpXSBhcyBDb250YWluZXIpLmdldENoaWxkQnlOYW1lKG5hbWUsIHRydWUpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn07XG4iLCAiaW1wb3J0IHsgRGlzcGxheU9iamVjdCB9IGZyb20gJ0BwaXhpL2Rpc3BsYXknO1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tICdAcGl4aS9tYXRoJztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBnbG9iYWwgcG9zaXRpb24gb2YgdGhlIGRpc3BsYXlPYmplY3QuIERvZXMgbm90IGRlcGVuZCBvbiBvYmplY3Qgc2NhbGUsIHJvdGF0aW9uIGFuZCBwaXZvdC5cbiAqXG4gKiBAbWV0aG9kIGdldEdsb2JhbFBvc2l0aW9uXG4gKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICogQHBhcmFtIHtQSVhJLlBvaW50fSBbcG9pbnQ9bmV3IFBJWEkuUG9pbnQoKV0gLSBUaGUgcG9pbnQgdG8gd3JpdGUgdGhlIGdsb2JhbCB2YWx1ZSB0by5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NraXBVcGRhdGU9ZmFsc2VdIC0gU2V0dGluZyB0byB0cnVlIHdpbGwgc3RvcCB0aGUgdHJhbnNmb3JtcyBvZiB0aGUgc2NlbmUgZ3JhcGggZnJvbVxuICogIGJlaW5nIHVwZGF0ZWQuIFRoaXMgbWVhbnMgdGhlIGNhbGN1bGF0aW9uIHJldHVybmVkIE1BWSBiZSBvdXQgb2YgZGF0ZSBCVVQgd2lsbCBnaXZlIHlvdSBhXG4gKiAgbmljZSBwZXJmb3JtYW5jZSBib29zdC5cbiAqIEByZXR1cm4ge1BJWEkuUG9pbnR9IFRoZSB1cGRhdGVkIHBvaW50LlxuICovXG5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5nZXRHbG9iYWxQb3NpdGlvbiA9IGZ1bmN0aW9uIGdldEdsb2JhbFBvc2l0aW9uKHBvaW50OiBQb2ludCA9IG5ldyBQb2ludCgpLCBza2lwVXBkYXRlID0gZmFsc2UpOiBQb2ludFxue1xuICAgIGlmICh0aGlzLnBhcmVudClcbiAgICB7XG4gICAgICAgIHRoaXMucGFyZW50LnRvR2xvYmFsKHRoaXMucG9zaXRpb24sIHBvaW50LCBza2lwVXBkYXRlKTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgcG9pbnQueCA9IHRoaXMucG9zaXRpb24ueDtcbiAgICAgICAgcG9pbnQueSA9IHRoaXMucG9zaXRpb24ueTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9pbnQ7XG59O1xuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwgImltcG9ydCB7IE1lc2hHZW9tZXRyeSB9IGZyb20gJ0BwaXhpL21lc2gnO1xuXG5leHBvcnQgY2xhc3MgUGxhbmVHZW9tZXRyeSBleHRlbmRzIE1lc2hHZW9tZXRyeVxue1xuICAgIHB1YmxpYyBzZWdXaWR0aDogbnVtYmVyO1xuICAgIHB1YmxpYyBzZWdIZWlnaHQ6IG51bWJlcjtcbiAgICBwdWJsaWMgd2lkdGg6IG51bWJlcjtcbiAgICBwdWJsaWMgaGVpZ2h0OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcih3aWR0aCA9IDEwMCwgaGVpZ2h0ID0gMTAwLCBzZWdXaWR0aCA9IDEwLCBzZWdIZWlnaHQgPSAxMClcbiAgICB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5zZWdXaWR0aCA9IHNlZ1dpZHRoO1xuICAgICAgICB0aGlzLnNlZ0hlaWdodCA9IHNlZ0hlaWdodDtcblxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuYnVpbGQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZyZXNoZXMgcGxhbmUgY29vcmRpbmF0ZXNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGJ1aWxkKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5zZWdXaWR0aCAqIHRoaXMuc2VnSGVpZ2h0O1xuICAgICAgICBjb25zdCB2ZXJ0cyA9IFtdO1xuICAgICAgICBjb25zdCB1dnMgPSBbXTtcbiAgICAgICAgY29uc3QgaW5kaWNlcyA9IFtdO1xuXG4gICAgICAgIGNvbnN0IHNlZ21lbnRzWCA9IHRoaXMuc2VnV2lkdGggLSAxO1xuICAgICAgICBjb25zdCBzZWdtZW50c1kgPSB0aGlzLnNlZ0hlaWdodCAtIDE7XG5cbiAgICAgICAgY29uc3Qgc2l6ZVggPSAodGhpcy53aWR0aCkgLyBzZWdtZW50c1g7XG4gICAgICAgIGNvbnN0IHNpemVZID0gKHRoaXMuaGVpZ2h0KSAvIHNlZ21lbnRzWTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSAoaSAlIHRoaXMuc2VnV2lkdGgpO1xuICAgICAgICAgICAgY29uc3QgeSA9ICgoaSAvIHRoaXMuc2VnV2lkdGgpIHwgMCk7XG5cbiAgICAgICAgICAgIHZlcnRzLnB1c2goeCAqIHNpemVYLCB5ICogc2l6ZVkpO1xuICAgICAgICAgICAgdXZzLnB1c2goeCAvIHNlZ21lbnRzWCwgeSAvIHNlZ21lbnRzWSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b3RhbFN1YiA9IHNlZ21lbnRzWCAqIHNlZ21lbnRzWTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsU3ViOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHhwb3MgPSBpICUgc2VnbWVudHNYO1xuICAgICAgICAgICAgY29uc3QgeXBvcyA9IChpIC8gc2VnbWVudHNYKSB8IDA7XG5cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gKHlwb3MgKiB0aGlzLnNlZ1dpZHRoKSArIHhwb3M7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZTIgPSAoeXBvcyAqIHRoaXMuc2VnV2lkdGgpICsgeHBvcyArIDE7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZTMgPSAoKHlwb3MgKyAxKSAqIHRoaXMuc2VnV2lkdGgpICsgeHBvcztcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlNCA9ICgoeXBvcyArIDEpICogdGhpcy5zZWdXaWR0aCkgKyB4cG9zICsgMTtcblxuICAgICAgICAgICAgaW5kaWNlcy5wdXNoKHZhbHVlLCB2YWx1ZTIsIHZhbHVlMyxcbiAgICAgICAgICAgICAgICB2YWx1ZTIsIHZhbHVlNCwgdmFsdWUzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYnVmZmVyc1swXS5kYXRhID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0cyk7XG4gICAgICAgIHRoaXMuYnVmZmVyc1sxXS5kYXRhID0gbmV3IEZsb2F0MzJBcnJheSh1dnMpO1xuICAgICAgICB0aGlzLmluZGV4QnVmZmVyLmRhdGEgPSBuZXcgVWludDE2QXJyYXkoaW5kaWNlcyk7XG5cbiAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIGNoYW5nZXMgYXJlIHVwbG9hZGVkXG4gICAgICAgIHRoaXMuYnVmZmVyc1swXS51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5idWZmZXJzWzFdLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLmluZGV4QnVmZmVyLnVwZGF0ZSgpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBNZXNoR2VvbWV0cnkgfSBmcm9tICdAcGl4aS9tZXNoJztcbmltcG9ydCB0eXBlIHsgSVBvaW50IH0gZnJvbSAnQHBpeGkvbWF0aCc7XG5cbi8qKlxuICogUm9wZUdlb21ldHJ5IGFsbG93cyB5b3UgdG8gZHJhdyBhIGdlb21ldHJ5IGFjcm9zcyBzZXZlcmFsIHBvaW50cyBhbmQgdGhlbiBtYW5pcHVsYXRlIHRoZXNlIHBvaW50cy5cbiAqXG4gKiBgYGBqc1xuICogZm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XG4gKiAgICAgcG9pbnRzLnB1c2gobmV3IFBJWEkuUG9pbnQoaSAqIDUwLCAwKSk7XG4gKiB9O1xuICogY29uc3Qgcm9wZSA9IG5ldyBQSVhJLlJvcGVHZW9tZXRyeSgxMDAsIHBvaW50cyk7XG4gKiBgYGBcbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuTWVzaEdlb21ldHJ5XG4gKiBAbWVtYmVyb2YgUElYSVxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIFJvcGVHZW9tZXRyeSBleHRlbmRzIE1lc2hHZW9tZXRyeVxue1xuICAgIHB1YmxpYyBwb2ludHM6IElQb2ludFtdO1xuICAgIHB1YmxpYyByZWFkb25seSB0ZXh0dXJlU2NhbGU6IG51bWJlcjtcbiAgICBfd2lkdGg6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGg9MjAwXSAtIFRoZSB3aWR0aCAoaS5lLiwgdGhpY2tuZXNzKSBvZiB0aGUgcm9wZS5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUG9pbnRbXX0gW3BvaW50c10gLSBBbiBhcnJheSBvZiB7QGxpbmsgUElYSS5Qb2ludH0gb2JqZWN0cyB0byBjb25zdHJ1Y3QgdGhpcyByb3BlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGV4dHVyZVNjYWxlPTBdIC0gQnkgZGVmYXVsdCB0aGUgcm9wZSB0ZXh0dXJlIHdpbGwgYmUgc3RyZXRjaGVkIHRvIG1hdGNoXG4gICAgICogICAgIHJvcGUgbGVuZ3RoLiBJZiB0ZXh0dXJlU2NhbGUgaXMgcG9zaXRpdmUgdGhpcyB2YWx1ZSB3aWxsIGJlIHRyZWF0ZWQgYXMgYSBzY2FsaW5nXG4gICAgICogICAgIGZhY3RvciBhbmQgdGhlIHRleHR1cmUgd2lsbCBwcmVzZXJ2ZSBpdHMgYXNwZWN0IHJhdGlvIGluc3RlYWQuIFRvIGNyZWF0ZSBhIHRpbGluZyByb3BlXG4gICAgICogICAgIHNldCBiYXNlVGV4dHVyZS53cmFwTW9kZSB0byB7QGxpbmsgUElYSS5XUkFQX01PREVTLlJFUEVBVH0gYW5kIHVzZSBhIHBvd2VyIG9mIHR3byB0ZXh0dXJlLFxuICAgICAqICAgICB0aGVuIHNldCB0ZXh0dXJlU2NhbGU9MSB0byBrZWVwIHRoZSBvcmlnaW5hbCB0ZXh0dXJlIHBpeGVsIHNpemUuXG4gICAgICogICAgIEluIG9yZGVyIHRvIHJlZHVjZSBhbHBoYSBjaGFubmVsIGFydGlmYWN0cyBwcm92aWRlIGEgbGFyZ2VyIHRleHR1cmUgYW5kIGRvd25zYW1wbGUgLVxuICAgICAqICAgICBpLmUuIHNldCB0ZXh0dXJlU2NhbGU9MC41IHRvIHNjYWxlIGl0IGRvd24gdHdpY2UuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iod2lkdGggPSAyMDAsIHBvaW50czogSVBvaW50W10sIHRleHR1cmVTY2FsZSA9IDApXG4gICAge1xuICAgICAgICBzdXBlcihuZXcgRmxvYXQzMkFycmF5KHBvaW50cy5sZW5ndGggKiA0KSxcbiAgICAgICAgICAgIG5ldyBGbG9hdDMyQXJyYXkocG9pbnRzLmxlbmd0aCAqIDQpLFxuICAgICAgICAgICAgbmV3IFVpbnQxNkFycmF5KChwb2ludHMubGVuZ3RoIC0gMSkgKiA2KSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGFycmF5IG9mIHBvaW50cyB0aGF0IGRldGVybWluZSB0aGUgcm9wZVxuICAgICAgICAgKiBAbWVtYmVyIHtQSVhJLlBvaW50W119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHdpZHRoIChpLmUuLCB0aGlja25lc3MpIG9mIHRoZSByb3BlLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEByZWFkT25seVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUm9wZSB0ZXh0dXJlIHNjYWxlLCBpZiB6ZXJvIHRoZW4gdGhlIHJvcGUgdGV4dHVyZSBpcyBzdHJldGNoZWQuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHJlYWRPbmx5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRleHR1cmVTY2FsZSA9IHRleHR1cmVTY2FsZTtcblxuICAgICAgICB0aGlzLmJ1aWxkKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIChpLmUuLCB0aGlja25lc3MpIG9mIHRoZSByb3BlLlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICBnZXQgd2lkdGgoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVmcmVzaGVzIFJvcGUgaW5kaWNlcyBhbmQgdXZzXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGJ1aWxkKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IHRoaXMucG9pbnRzO1xuXG4gICAgICAgIGlmICghcG9pbnRzKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgdmVydGV4QnVmZmVyID0gdGhpcy5nZXRCdWZmZXIoJ2FWZXJ0ZXhQb3NpdGlvbicpO1xuICAgICAgICBjb25zdCB1dkJ1ZmZlciA9IHRoaXMuZ2V0QnVmZmVyKCdhVGV4dHVyZUNvb3JkJyk7XG4gICAgICAgIGNvbnN0IGluZGV4QnVmZmVyID0gdGhpcy5nZXRJbmRleCgpO1xuXG4gICAgICAgIC8vIGlmIHRvbyBsaXR0bGUgcG9pbnRzLCBvciB0ZXh0dXJlIGhhc24ndCBnb3QgVVZzIHNldCB5ZXQganVzdCBtb3ZlIG9uLlxuICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCA8IDEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZSBudW1iZXIgb2YgcG9pbnRzIGhhcyBjaGFuZ2VkIHdlIHdpbGwgbmVlZCB0byByZWNyZWF0ZSB0aGUgYXJyYXlidWZmZXJzXG4gICAgICAgIGlmICh2ZXJ0ZXhCdWZmZXIuZGF0YS5sZW5ndGggLyA0ICE9PSBwb2ludHMubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIuZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkocG9pbnRzLmxlbmd0aCAqIDQpO1xuICAgICAgICAgICAgdXZCdWZmZXIuZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkocG9pbnRzLmxlbmd0aCAqIDQpO1xuICAgICAgICAgICAgaW5kZXhCdWZmZXIuZGF0YSA9IG5ldyBVaW50MTZBcnJheSgocG9pbnRzLmxlbmd0aCAtIDEpICogNik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1dnMgPSB1dkJ1ZmZlci5kYXRhO1xuICAgICAgICBjb25zdCBpbmRpY2VzID0gaW5kZXhCdWZmZXIuZGF0YTtcblxuICAgICAgICB1dnNbMF0gPSAwO1xuICAgICAgICB1dnNbMV0gPSAwO1xuICAgICAgICB1dnNbMl0gPSAwO1xuICAgICAgICB1dnNbM10gPSAxO1xuXG4gICAgICAgIGxldCBhbW91bnQgPSAwO1xuICAgICAgICBsZXQgcHJldiA9IHBvaW50c1swXTtcbiAgICAgICAgY29uc3QgdGV4dHVyZVdpZHRoID0gdGhpcy5fd2lkdGggKiB0aGlzLnRleHR1cmVTY2FsZTtcbiAgICAgICAgY29uc3QgdG90YWwgPSBwb2ludHMubGVuZ3RoOyAvLyAtIDE7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyB0aW1lIHRvIGRvIHNvbWUgc21hcnQgZHJhd2luZyFcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gaSAqIDQ7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnRleHR1cmVTY2FsZSA+IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHBpeGVsIGRpc3RhbmNlIGZyb20gcHJldmlvdXMgcG9pbnRcbiAgICAgICAgICAgICAgICBjb25zdCBkeCA9IHByZXYueCAtIHBvaW50c1tpXS54O1xuICAgICAgICAgICAgICAgIGNvbnN0IGR5ID0gcHJldi55IC0gcG9pbnRzW2ldLnk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKGR4ICogZHgpICsgKGR5ICogZHkpKTtcblxuICAgICAgICAgICAgICAgIHByZXYgPSBwb2ludHNbaV07XG4gICAgICAgICAgICAgICAgYW1vdW50ICs9IGRpc3RhbmNlIC8gdGV4dHVyZVdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIHN0cmV0Y2ggdGV4dHVyZVxuICAgICAgICAgICAgICAgIGFtb3VudCA9IGkgLyAodG90YWwgLSAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXZzW2luZGV4XSA9IGFtb3VudDtcbiAgICAgICAgICAgIHV2c1tpbmRleCArIDFdID0gMDtcblxuICAgICAgICAgICAgdXZzW2luZGV4ICsgMl0gPSBhbW91bnQ7XG4gICAgICAgICAgICB1dnNbaW5kZXggKyAzXSA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW5kZXhDb3VudCA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbCAtIDE7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBpICogMjtcblxuICAgICAgICAgICAgaW5kaWNlc1tpbmRleENvdW50KytdID0gaW5kZXg7XG4gICAgICAgICAgICBpbmRpY2VzW2luZGV4Q291bnQrK10gPSBpbmRleCArIDE7XG4gICAgICAgICAgICBpbmRpY2VzW2luZGV4Q291bnQrK10gPSBpbmRleCArIDI7XG5cbiAgICAgICAgICAgIGluZGljZXNbaW5kZXhDb3VudCsrXSA9IGluZGV4ICsgMjtcbiAgICAgICAgICAgIGluZGljZXNbaW5kZXhDb3VudCsrXSA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgIGluZGljZXNbaW5kZXhDb3VudCsrXSA9IGluZGV4ICsgMztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBjaGFuZ2VzIGFyZSB1cGxvYWRlZFxuICAgICAgICB1dkJ1ZmZlci51cGRhdGUoKTtcbiAgICAgICAgaW5kZXhCdWZmZXIudXBkYXRlKCk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVWZXJ0aWNlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlZnJlc2hlcyB2ZXJ0aWNlcyBvZiBSb3BlIG1lc2hcbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlVmVydGljZXMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5wb2ludHM7XG5cbiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPCAxKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGFzdFBvaW50ID0gcG9pbnRzWzBdO1xuICAgICAgICBsZXQgbmV4dFBvaW50O1xuICAgICAgICBsZXQgcGVycFggPSAwO1xuICAgICAgICBsZXQgcGVycFkgPSAwO1xuXG4gICAgICAgIGNvbnN0IHZlcnRpY2VzID0gdGhpcy5idWZmZXJzWzBdLmRhdGE7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gcG9pbnRzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBpICogNDtcblxuICAgICAgICAgICAgaWYgKGkgPCBwb2ludHMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuZXh0UG9pbnQgPSBwb2ludHNbaSArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5leHRQb2ludCA9IHBvaW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwZXJwWSA9IC0obmV4dFBvaW50LnggLSBsYXN0UG9pbnQueCk7XG4gICAgICAgICAgICBwZXJwWCA9IG5leHRQb2ludC55IC0gbGFzdFBvaW50Lnk7XG5cbiAgICAgICAgICAgIGxldCByYXRpbyA9ICgxIC0gKGkgLyAodG90YWwgLSAxKSkpICogMTA7XG5cbiAgICAgICAgICAgIGlmIChyYXRpbyA+IDEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmF0aW8gPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwZXJwTGVuZ3RoID0gTWF0aC5zcXJ0KChwZXJwWCAqIHBlcnBYKSArIChwZXJwWSAqIHBlcnBZKSk7XG4gICAgICAgICAgICBjb25zdCBudW0gPSB0aGlzLnRleHR1cmVTY2FsZSA+IDAgPyB0aGlzLnRleHR1cmVTY2FsZSAqIHRoaXMuX3dpZHRoIC8gMiA6IHRoaXMuX3dpZHRoIC8gMjtcblxuICAgICAgICAgICAgcGVycFggLz0gcGVycExlbmd0aDtcbiAgICAgICAgICAgIHBlcnBZIC89IHBlcnBMZW5ndGg7XG5cbiAgICAgICAgICAgIHBlcnBYICo9IG51bTtcbiAgICAgICAgICAgIHBlcnBZICo9IG51bTtcblxuICAgICAgICAgICAgdmVydGljZXNbaW5kZXhdID0gcG9pbnQueCArIHBlcnBYO1xuICAgICAgICAgICAgdmVydGljZXNbaW5kZXggKyAxXSA9IHBvaW50LnkgKyBwZXJwWTtcbiAgICAgICAgICAgIHZlcnRpY2VzW2luZGV4ICsgMl0gPSBwb2ludC54IC0gcGVycFg7XG4gICAgICAgICAgICB2ZXJ0aWNlc1tpbmRleCArIDNdID0gcG9pbnQueSAtIHBlcnBZO1xuXG4gICAgICAgICAgICBsYXN0UG9pbnQgPSBwb2ludDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYnVmZmVyc1swXS51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnRleHR1cmVTY2FsZSA+IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGQoKTsgLy8gd2UgbmVlZCB0byB1cGRhdGUgVVZzXG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZlcnRpY2VzKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTWVzaCwgTWVzaE1hdGVyaWFsIH0gZnJvbSAnQHBpeGkvbWVzaCc7XG5pbXBvcnQgeyBXUkFQX01PREVTIH0gZnJvbSAnQHBpeGkvY29uc3RhbnRzJztcbmltcG9ydCB7IFJvcGVHZW9tZXRyeSB9IGZyb20gJy4vZ2VvbWV0cnkvUm9wZUdlb21ldHJ5JztcblxuaW1wb3J0IHR5cGUgeyBUZXh0dXJlLCBSZW5kZXJlciB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBJUG9pbnQgfSBmcm9tICdAcGl4aS9tYXRoJztcblxuLyoqXG4gKiBUaGUgcm9wZSBhbGxvd3MgeW91IHRvIGRyYXcgYSB0ZXh0dXJlIGFjcm9zcyBzZXZlcmFsIHBvaW50cyBhbmQgdGhlbiBtYW5pcHVsYXRlIHRoZXNlIHBvaW50c1xuICpcbiAqYGBganNcbiAqIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykge1xuICogICAgIHBvaW50cy5wdXNoKG5ldyBQSVhJLlBvaW50KGkgKiA1MCwgMCkpO1xuICogfTtcbiAqIGxldCByb3BlID0gbmV3IFBJWEkuU2ltcGxlUm9wZShQSVhJLlRleHR1cmUuZnJvbShcInNuYWtlLnBuZ1wiKSwgcG9pbnRzKTtcbiAqICBgYGBcbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuTWVzaFxuICogQG1lbWJlcm9mIFBJWElcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBTaW1wbGVSb3BlIGV4dGVuZHMgTWVzaFxue1xuICAgIHB1YmxpYyBhdXRvVXBkYXRlOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlRleHR1cmV9IHRleHR1cmUgLSBUaGUgdGV4dHVyZSB0byB1c2Ugb24gdGhlIHJvcGUuXG4gICAgICogQHBhcmFtIHtQSVhJLlBvaW50W119IHBvaW50cyAtIEFuIGFycmF5IG9mIHtAbGluayBQSVhJLlBvaW50fSBvYmplY3RzIHRvIGNvbnN0cnVjdCB0aGlzIHJvcGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt0ZXh0dXJlU2NhbGU9MF0gLSBPcHRpb25hbC4gUG9zaXRpdmUgdmFsdWVzIHNjYWxlIHJvcGUgdGV4dHVyZVxuICAgICAqIGtlZXBpbmcgaXRzIGFzcGVjdCByYXRpby4gWW91IGNhbiByZWR1Y2UgYWxwaGEgY2hhbm5lbCBhcnRpZmFjdHMgYnkgcHJvdmlkaW5nIGEgbGFyZ2VyIHRleHR1cmVcbiAgICAgKiBhbmQgZG93bnNhbXBsaW5nIGhlcmUuIElmIHNldCB0byB6ZXJvLCB0ZXh0dXJlIHdpbGwgYmUgc3RyZWNoZWQgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0dXJlOiBUZXh0dXJlLCBwb2ludHM6IElQb2ludFtdLCB0ZXh0dXJlU2NhbGUgPSAwKVxuICAgIHtcbiAgICAgICAgY29uc3Qgcm9wZUdlb21ldHJ5ID0gbmV3IFJvcGVHZW9tZXRyeSh0ZXh0dXJlLmhlaWdodCwgcG9pbnRzLCB0ZXh0dXJlU2NhbGUpO1xuICAgICAgICBjb25zdCBtZXNoTWF0ZXJpYWwgPSBuZXcgTWVzaE1hdGVyaWFsKHRleHR1cmUpO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlU2NhbGUgPiAwKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBhdHRlbXB0IHRvIHNldCBVViB3cmFwcGluZywgd2lsbCBmYWlsIG9uIG5vbi1wb3dlciBvZiB0d28gdGV4dHVyZXNcbiAgICAgICAgICAgIHRleHR1cmUuYmFzZVRleHR1cmUud3JhcE1vZGUgPSBXUkFQX01PREVTLlJFUEVBVDtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihyb3BlR2VvbWV0cnksIG1lc2hNYXRlcmlhbCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlLWNhbGN1bGF0ZSB2ZXJ0aWNlcyBieSByb3BlIHBvaW50cyBlYWNoIGZyYW1lXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmF1dG9VcGRhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIF9yZW5kZXIocmVuZGVyZXI6IFJlbmRlcmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgZ2VvbWV0cnk6IFJvcGVHZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnkgYXMgYW55O1xuXG4gICAgICAgIGlmICh0aGlzLmF1dG9VcGRhdGUgfHwgZ2VvbWV0cnkuX3dpZHRoICE9PSB0aGlzLnNoYWRlci50ZXh0dXJlLmhlaWdodClcbiAgICAgICAge1xuICAgICAgICAgICAgZ2VvbWV0cnkuX3dpZHRoID0gdGhpcy5zaGFkZXIudGV4dHVyZS5oZWlnaHQ7XG4gICAgICAgICAgICBnZW9tZXRyeS51cGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyLl9yZW5kZXIocmVuZGVyZXIpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBNZXNoLCBNZXNoTWF0ZXJpYWwgfSBmcm9tICdAcGl4aS9tZXNoJztcbmltcG9ydCB7IFBsYW5lR2VvbWV0cnkgfSBmcm9tICcuL2dlb21ldHJ5L1BsYW5lR2VvbWV0cnknO1xuXG5pbXBvcnQgdHlwZXsgUmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgSURlc3Ryb3lPcHRpb25zIH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5cbi8qKlxuICogVGhlIFNpbXBsZVBsYW5lIGFsbG93cyB5b3UgdG8gZHJhdyBhIHRleHR1cmUgYWNyb3NzIHNldmVyYWwgcG9pbnRzIGFuZCB0aGVuIG1hbmlwdWxhdGUgdGhlc2UgcG9pbnRzXG4gKlxuICpgYGBqc1xuICogZm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XG4gKiAgICAgcG9pbnRzLnB1c2gobmV3IFBJWEkuUG9pbnQoaSAqIDUwLCAwKSk7XG4gKiB9O1xuICogbGV0IFNpbXBsZVBsYW5lID0gbmV3IFBJWEkuU2ltcGxlUGxhbmUoUElYSS5UZXh0dXJlLmZyb20oXCJzbmFrZS5wbmdcIiksIHBvaW50cyk7XG4gKiAgYGBgXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLk1lc2hcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKlxuICovXG5leHBvcnQgY2xhc3MgU2ltcGxlUGxhbmUgZXh0ZW5kcyBNZXNoXG57XG4gICAgcHJvdGVjdGVkIF90ZXh0dXJlSUQ6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5UZXh0dXJlfSB0ZXh0dXJlIC0gVGhlIHRleHR1cmUgdG8gdXNlIG9uIHRoZSBTaW1wbGVQbGFuZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmVydGljZXNYIC0gVGhlIG51bWJlciBvZiB2ZXJ0aWNlcyBpbiB0aGUgeC1heGlzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZlcnRpY2VzWSAtIFRoZSBudW1iZXIgb2YgdmVydGljZXMgaW4gdGhlIHktYXhpc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IFRleHR1cmUsIHZlcnRpY2VzWDogbnVtYmVyLCB2ZXJ0aWNlc1k6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGNvbnN0IHBsYW5lR2VvbWV0cnkgPSBuZXcgUGxhbmVHZW9tZXRyeSh0ZXh0dXJlLndpZHRoLCB0ZXh0dXJlLmhlaWdodCwgdmVydGljZXNYLCB2ZXJ0aWNlc1kpO1xuICAgICAgICBjb25zdCBtZXNoTWF0ZXJpYWwgPSBuZXcgTWVzaE1hdGVyaWFsKFRleHR1cmUuV0hJVEUpO1xuXG4gICAgICAgIHN1cGVyKHBsYW5lR2VvbWV0cnksIG1lc2hNYXRlcmlhbCk7XG5cbiAgICAgICAgLy8gbGV0cyBjYWxsIHRoZSBzZXR0ZXIgdG8gZW5zdXJlIGFsbCBuZWNlc3NhcnkgdXBkYXRlcyBhcmUgcGVyZm9ybWVkXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgZm9yIG92ZXJyaWRlcywgdG8gZG8gc29tZXRoaW5nIGluIGNhc2UgdGV4dHVyZSBmcmFtZSB3YXMgY2hhbmdlZC5cbiAgICAgKiBNZXNoZXMgYmFzZWQgb24gcGxhbmUgY2FuIG92ZXJyaWRlIGl0IGFuZCBjaGFuZ2UgbW9yZSBkZXRhaWxzIGJhc2VkIG9uIHRleHR1cmUuXG4gICAgICovXG4gICAgcHVibGljIHRleHR1cmVVcGRhdGVkKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX3RleHR1cmVJRCA9IHRoaXMuc2hhZGVyLnRleHR1cmUuX3VwZGF0ZUlEO1xuXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5OiBQbGFuZUdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeSBhcyBhbnk7XG5cbiAgICAgICAgZ2VvbWV0cnkud2lkdGggPSB0aGlzLnNoYWRlci50ZXh0dXJlLndpZHRoO1xuICAgICAgICBnZW9tZXRyeS5oZWlnaHQgPSB0aGlzLnNoYWRlci50ZXh0dXJlLmhlaWdodDtcblxuICAgICAgICBnZW9tZXRyeS5idWlsZCgpO1xuICAgIH1cblxuICAgIHNldCB0ZXh0dXJlKHZhbHVlOiBUZXh0dXJlKVxuICAgIHtcbiAgICAgICAgLy8gVHJhY2sgdGV4dHVyZSBzYW1lIHdheSBzcHJpdGUgZG9lcy5cbiAgICAgICAgLy8gRm9yIGdlbmVyYXRlZCBtZXNoZXMgbGlrZSBOaW5lU2xpY2VQbGFuZSBpdCBjYW4gY2hhbmdlIHRoZSBnZW9tZXRyeS5cbiAgICAgICAgLy8gVW5mb3J0dW5hdGVseSwgdGhpcyBtZXRob2QgbWlnaHQgbm90IHdvcmsgaWYgeW91IGRpcmVjdGx5IGNoYW5nZSB0ZXh0dXJlIGluIG1hdGVyaWFsLlxuXG4gICAgICAgIGlmICh0aGlzLnNoYWRlci50ZXh0dXJlID09PSB2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zaGFkZXIudGV4dHVyZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl90ZXh0dXJlSUQgPSAtMTtcblxuICAgICAgICBpZiAodmFsdWUuYmFzZVRleHR1cmUudmFsaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZVVwZGF0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlLm9uY2UoJ3VwZGF0ZScsIHRoaXMudGV4dHVyZVVwZGF0ZWQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHRleHR1cmUoKTogVGV4dHVyZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhZGVyLnRleHR1cmU7XG4gICAgfVxuXG4gICAgX3JlbmRlcihyZW5kZXJlcjogUmVuZGVyZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5fdGV4dHVyZUlEICE9PSB0aGlzLnNoYWRlci50ZXh0dXJlLl91cGRhdGVJRClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlVXBkYXRlZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIuX3JlbmRlcihyZW5kZXJlcik7XG4gICAgfVxuXG4gICAgcHVibGljIGRlc3Ryb3kob3B0aW9uczogSURlc3Ryb3lPcHRpb25zfGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnNoYWRlci50ZXh0dXJlLm9mZigndXBkYXRlJywgdGhpcy50ZXh0dXJlVXBkYXRlZCwgdGhpcyk7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3kob3B0aW9ucyk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IE1lc2gsIE1lc2hHZW9tZXRyeSwgTWVzaE1hdGVyaWFsIH0gZnJvbSAnQHBpeGkvbWVzaCc7XG5pbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5cbmltcG9ydCB0eXBlIHsgSVR5cGVkQXJyYXksIElBcnJheUJ1ZmZlciwgUmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgRFJBV19NT0RFUyB9IGZyb20gJ0BwaXhpL2NvbnN0YW50cyc7XG5cbi8qKlxuICogVGhlIFNpbXBsZSBNZXNoIGNsYXNzIG1pbWljcyBNZXNoIGluIFBpeGlKUyB2NCwgcHJvdmlkaW5nIGVhc3ktdG8tdXNlIGNvbnN0cnVjdG9yIGFyZ3VtZW50cy5cbiAqIEZvciBtb3JlIHJvYnVzdCBjdXN0b21pemF0aW9uLCB1c2Uge0BsaW5rIFBJWEkuTWVzaH0uXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLk1lc2hcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbmV4cG9ydCBjbGFzcyBTaW1wbGVNZXNoIGV4dGVuZHMgTWVzaFxue1xuICAgIHB1YmxpYyBhdXRvVXBkYXRlOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlRleHR1cmV9IFt0ZXh0dXJlPVRleHR1cmUuRU1QVFldIC0gVGhlIHRleHR1cmUgdG8gdXNlXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IFt2ZXJ0aWNlc10gLSBpZiB5b3Ugd2FudCB0byBzcGVjaWZ5IHRoZSB2ZXJ0aWNlc1xuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fSBbdXZzXSAtIGlmIHlvdSB3YW50IHRvIHNwZWNpZnkgdGhlIHV2c1xuICAgICAqIEBwYXJhbSB7VWludDE2QXJyYXl9IFtpbmRpY2VzXSAtIGlmIHlvdSB3YW50IHRvIHNwZWNpZnkgdGhlIGluZGljZXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2RyYXdNb2RlXSAtIHRoZSBkcmF3TW9kZSwgY2FuIGJlIGFueSBvZiB0aGUgTWVzaC5EUkFXX01PREVTIGNvbnN0c1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICB0ZXh0dXJlID0gVGV4dHVyZS5FTVBUWSxcbiAgICAgICAgdmVydGljZXM/OiBJQXJyYXlCdWZmZXIsXG4gICAgICAgIHV2cz86IElBcnJheUJ1ZmZlcixcbiAgICAgICAgaW5kaWNlcz86IElBcnJheUJ1ZmZlcixcbiAgICAgICAgZHJhd01vZGU/OiBEUkFXX01PREVTXG4gICAgKVxuICAgIHtcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgTWVzaEdlb21ldHJ5KHZlcnRpY2VzLCB1dnMsIGluZGljZXMpO1xuXG4gICAgICAgIGdlb21ldHJ5LmdldEJ1ZmZlcignYVZlcnRleFBvc2l0aW9uJykuc3RhdGljID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgbWVzaE1hdGVyaWFsID0gbmV3IE1lc2hNYXRlcmlhbCh0ZXh0dXJlKTtcblxuICAgICAgICBzdXBlcihnZW9tZXRyeSwgbWVzaE1hdGVyaWFsLCBudWxsLCBkcmF3TW9kZSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHVwbG9hZCB2ZXJ0aWNlcyBidWZmZXIgZWFjaCBmcmFtZVxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hdXRvVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb2xsZWN0aW9uIG9mIHZlcnRpY2VzIGRhdGEuXG4gICAgICogQG1lbWJlciB7RmxvYXQzMkFycmF5fVxuICAgICAqL1xuICAgIGdldCB2ZXJ0aWNlcygpOiBJVHlwZWRBcnJheVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnkuZ2V0QnVmZmVyKCdhVmVydGV4UG9zaXRpb24nKS5kYXRhO1xuICAgIH1cbiAgICBzZXQgdmVydGljZXModmFsdWU6IElUeXBlZEFycmF5KVxuICAgIHtcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5nZXRCdWZmZXIoJ2FWZXJ0ZXhQb3NpdGlvbicpLmRhdGEgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBfcmVuZGVyKHJlbmRlcmVyOiBSZW5kZXJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmF1dG9VcGRhdGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnkuZ2V0QnVmZmVyKCdhVmVydGV4UG9zaXRpb24nKS51cGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyLl9yZW5kZXIocmVuZGVyZXIpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBTaW1wbGVQbGFuZSB9IGZyb20gJy4vU2ltcGxlUGxhbmUnO1xuXG5pbXBvcnQgdHlwZSB7IElUeXBlZEFycmF5IH0gZnJvbSAnQHBpeGkvY29yZSc7XG5cbmNvbnN0IERFRkFVTFRfQk9SREVSX1NJWkUgPSAxMDtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1pbnRlcmZhY2VcbmV4cG9ydCBpbnRlcmZhY2UgTmluZVNsaWNlUGxhbmUgZXh0ZW5kcyBHbG9iYWxNaXhpbnMuTmluZVNsaWNlUGxhbmUge31cblxuLyoqXG4gKiBUaGUgTmluZVNsaWNlUGxhbmUgYWxsb3dzIHlvdSB0byBzdHJldGNoIGEgdGV4dHVyZSB1c2luZyA5LXNsaWNlIHNjYWxpbmcuIFRoZSBjb3JuZXJzIHdpbGwgcmVtYWluIHVuc2NhbGVkICh1c2VmdWxcbiAqIGZvciBidXR0b25zIHdpdGggcm91bmRlZCBjb3JuZXJzIGZvciBleGFtcGxlKSBhbmQgdGhlIG90aGVyIGFyZWFzIHdpbGwgYmUgc2NhbGVkIGhvcml6b250YWxseSBhbmQgb3IgdmVydGljYWxseVxuICpcbiAqYGBganNcbiAqIGxldCBQbGFuZTkgPSBuZXcgUElYSS5OaW5lU2xpY2VQbGFuZShQSVhJLlRleHR1cmUuZnJvbSgnQm94V2l0aFJvdW5kZWRDb3JuZXJzLnBuZycpLCAxNSwgMTUsIDE1LCAxNSk7XG4gKiAgYGBgXG4gKiA8cHJlPlxuICogICAgICBBICAgICAgICAgICAgICAgICAgICAgICAgICBCXG4gKiAgICArLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tK1xuICogIEMgfCAxIHwgICAgICAgICAgMiAgICAgICAgICAgfCAzIHxcbiAqICAgICstLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSstLS0rXG4gKiAgICB8ICAgfCAgICAgICAgICAgICAgICAgICAgICB8ICAgfFxuICogICAgfCA0IHwgICAgICAgICAgNSAgICAgICAgICAgfCA2IHxcbiAqICAgIHwgICB8ICAgICAgICAgICAgICAgICAgICAgIHwgICB8XG4gKiAgICArLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tK1xuICogIEQgfCA3IHwgICAgICAgICAgOCAgICAgICAgICAgfCA5IHxcbiAqICAgICstLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSstLS0rXG5cbiAqICBXaGVuIGNoYW5naW5nIHRoaXMgb2JqZWN0cyB3aWR0aCBhbmQvb3IgaGVpZ2h0OlxuICogICAgIGFyZWFzIDEgMyA3IGFuZCA5IHdpbGwgcmVtYWluIHVuc2NhbGVkLlxuICogICAgIGFyZWFzIDIgYW5kIDggd2lsbCBiZSBzdHJldGNoZWQgaG9yaXpvbnRhbGx5XG4gKiAgICAgYXJlYXMgNCBhbmQgNiB3aWxsIGJlIHN0cmV0Y2hlZCB2ZXJ0aWNhbGx5XG4gKiAgICAgYXJlYSA1IHdpbGwgYmUgc3RyZXRjaGVkIGJvdGggaG9yaXpvbnRhbGx5IGFuZCB2ZXJ0aWNhbGx5XG4gKiA8L3ByZT5cbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuU2ltcGxlUGxhbmVcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKlxuICovXG5leHBvcnQgY2xhc3MgTmluZVNsaWNlUGxhbmUgZXh0ZW5kcyBTaW1wbGVQbGFuZVxue1xuICAgIHByaXZhdGUgX29yaWdXaWR0aDogbnVtYmVyO1xuICAgIHByaXZhdGUgX29yaWdIZWlnaHQ6IG51bWJlcjtcbiAgICBfbGVmdFdpZHRoOiBudW1iZXI7XG4gICAgX3JpZ2h0V2lkdGg6IG51bWJlcjtcbiAgICBfdG9wSGVpZ2h0OiBudW1iZXI7XG4gICAgX2JvdHRvbUhlaWdodDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQSVhJLlRleHR1cmV9IHRleHR1cmUgLSBUaGUgdGV4dHVyZSB0byB1c2Ugb24gdGhlIE5pbmVTbGljZVBsYW5lLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVmdFdpZHRoPTEwXSAtIHNpemUgb2YgdGhlIGxlZnQgdmVydGljYWwgYmFyIChBKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdG9wSGVpZ2h0PTEwXSAtIHNpemUgb2YgdGhlIHRvcCBob3Jpem9udGFsIGJhciAoQylcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JpZ2h0V2lkdGg9MTBdIC0gc2l6ZSBvZiB0aGUgcmlnaHQgdmVydGljYWwgYmFyIChCKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYm90dG9tSGVpZ2h0PTEwXSAtIHNpemUgb2YgdGhlIGJvdHRvbSBob3Jpem9udGFsIGJhciAoRClcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgdGV4dHVyZTogVGV4dHVyZSxcbiAgICAgICAgbGVmdFdpZHRoID0gREVGQVVMVF9CT1JERVJfU0laRSxcbiAgICAgICAgdG9wSGVpZ2h0ID0gREVGQVVMVF9CT1JERVJfU0laRSxcbiAgICAgICAgcmlnaHRXaWR0aCA9IERFRkFVTFRfQk9SREVSX1NJWkUsXG4gICAgICAgIGJvdHRvbUhlaWdodCA9IERFRkFVTFRfQk9SREVSX1NJWkVcbiAgICApXG4gICAge1xuICAgICAgICBzdXBlcihUZXh0dXJlLldISVRFLCA0LCA0KTtcblxuICAgICAgICB0aGlzLl9vcmlnV2lkdGggPSB0ZXh0dXJlLm9yaWcud2lkdGg7XG4gICAgICAgIHRoaXMuX29yaWdIZWlnaHQgPSB0ZXh0dXJlLm9yaWcuaGVpZ2h0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd2lkdGggb2YgdGhlIE5pbmVTbGljZVBsYW5lLCBzZXR0aW5nIHRoaXMgd2lsbCBhY3R1YWxseSBtb2RpZnkgdGhlIHZlcnRpY2VzIGFuZCBVVidzIG9mIHRoaXMgcGxhbmVcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAb3ZlcnJpZGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3dpZHRoID0gdGhpcy5fb3JpZ1dpZHRoO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBOaW5lU2xpY2VQbGFuZSwgc2V0dGluZyB0aGlzIHdpbGwgYWN0dWFsbHkgbW9kaWZ5IHRoZSB2ZXJ0aWNlcyBhbmQgVVYncyBvZiB0aGlzIHBsYW5lXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQG92ZXJyaWRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9oZWlnaHQgPSB0aGlzLl9vcmlnSGVpZ2h0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd2lkdGggb2YgdGhlIGxlZnQgY29sdW1uIChhKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9sZWZ0V2lkdGggPSBsZWZ0V2lkdGg7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgcmlnaHQgY29sdW1uIChiKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9yaWdodFdpZHRoID0gcmlnaHRXaWR0aDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGhlaWdodCBvZiB0aGUgdG9wIHJvdyAoYylcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdG9wSGVpZ2h0ID0gdG9wSGVpZ2h0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBib3R0b20gcm93IChkKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9ib3R0b21IZWlnaHQgPSBib3R0b21IZWlnaHQ7XG5cbiAgICAgICAgLy8gbGV0cyBjYWxsIHRoZSBzZXR0ZXIgdG8gZW5zdXJlIGFsbCBuZWNlc3NhcnkgdXBkYXRlcyBhcmUgcGVyZm9ybWVkXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XG4gICAgfVxuXG4gICAgcHVibGljIHRleHR1cmVVcGRhdGVkKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX3RleHR1cmVJRCA9IHRoaXMuc2hhZGVyLnRleHR1cmUuX3VwZGF0ZUlEO1xuICAgICAgICB0aGlzLl9yZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgZ2V0IHZlcnRpY2VzKCk6IElUeXBlZEFycmF5XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW9tZXRyeS5nZXRCdWZmZXIoJ2FWZXJ0ZXhQb3NpdGlvbicpLmRhdGE7XG4gICAgfVxuXG4gICAgc2V0IHZlcnRpY2VzKHZhbHVlOiBJVHlwZWRBcnJheSlcbiAgICB7XG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuZ2V0QnVmZmVyKCdhVmVydGV4UG9zaXRpb24nKS5kYXRhID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgaG9yaXpvbnRhbCB2ZXJ0aWNlcy5cbiAgICAgKlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVIb3Jpem9udGFsVmVydGljZXMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuXG4gICAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5fZ2V0TWluU2NhbGUoKTtcblxuICAgICAgICB2ZXJ0aWNlc1s5XSA9IHZlcnRpY2VzWzExXSA9IHZlcnRpY2VzWzEzXSA9IHZlcnRpY2VzWzE1XSA9IHRoaXMuX3RvcEhlaWdodCAqIHNjYWxlO1xuICAgICAgICB2ZXJ0aWNlc1sxN10gPSB2ZXJ0aWNlc1sxOV0gPSB2ZXJ0aWNlc1syMV0gPSB2ZXJ0aWNlc1syM10gPSB0aGlzLl9oZWlnaHQgLSAodGhpcy5fYm90dG9tSGVpZ2h0ICogc2NhbGUpO1xuICAgICAgICB2ZXJ0aWNlc1syNV0gPSB2ZXJ0aWNlc1syN10gPSB2ZXJ0aWNlc1syOV0gPSB2ZXJ0aWNlc1szMV0gPSB0aGlzLl9oZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdmVydGljYWwgdmVydGljZXMuXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlVmVydGljYWxWZXJ0aWNlcygpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7XG5cbiAgICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLl9nZXRNaW5TY2FsZSgpO1xuXG4gICAgICAgIHZlcnRpY2VzWzJdID0gdmVydGljZXNbMTBdID0gdmVydGljZXNbMThdID0gdmVydGljZXNbMjZdID0gdGhpcy5fbGVmdFdpZHRoICogc2NhbGU7XG4gICAgICAgIHZlcnRpY2VzWzRdID0gdmVydGljZXNbMTJdID0gdmVydGljZXNbMjBdID0gdmVydGljZXNbMjhdID0gdGhpcy5fd2lkdGggLSAodGhpcy5fcmlnaHRXaWR0aCAqIHNjYWxlKTtcbiAgICAgICAgdmVydGljZXNbNl0gPSB2ZXJ0aWNlc1sxNF0gPSB2ZXJ0aWNlc1syMl0gPSB2ZXJ0aWNlc1szMF0gPSB0aGlzLl93aWR0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzbWFsbGVyIG9mIGEgc2V0IG9mIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHNjYWxlIG9mIG5pbmUgc2xpY2UgY29ybmVycy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gU21hbGxlciBudW1iZXIgb2YgdmVydGljYWwgYW5kIGhvcml6b250YWwgc2NhbGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIF9nZXRNaW5TY2FsZSgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLl9sZWZ0V2lkdGggKyB0aGlzLl9yaWdodFdpZHRoO1xuICAgICAgICBjb25zdCBzY2FsZVcgPSB0aGlzLl93aWR0aCA+IHcgPyAxLjAgOiB0aGlzLl93aWR0aCAvIHc7XG5cbiAgICAgICAgY29uc3QgaCA9IHRoaXMuX3RvcEhlaWdodCArIHRoaXMuX2JvdHRvbUhlaWdodDtcbiAgICAgICAgY29uc3Qgc2NhbGVIID0gdGhpcy5faGVpZ2h0ID4gaCA/IDEuMCA6IHRoaXMuX2hlaWdodCAvIGg7XG5cbiAgICAgICAgY29uc3Qgc2NhbGUgPSBNYXRoLm1pbihzY2FsZVcsIHNjYWxlSCk7XG5cbiAgICAgICAgcmV0dXJuIHNjYWxlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgTmluZVNsaWNlUGxhbmUsIHNldHRpbmcgdGhpcyB3aWxsIGFjdHVhbGx5IG1vZGlmeSB0aGUgdmVydGljZXMgYW5kIFVWJ3Mgb2YgdGhpcyBwbGFuZVxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB3aWR0aCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgICB9XG5cbiAgICBzZXQgd2lkdGgodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBOaW5lU2xpY2VQbGFuZSwgc2V0dGluZyB0aGlzIHdpbGwgYWN0dWFsbHkgbW9kaWZ5IHRoZSB2ZXJ0aWNlcyBhbmQgVVYncyBvZiB0aGlzIHBsYW5lXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGhlaWdodCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gICAgfVxuXG4gICAgc2V0IGhlaWdodCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgd2lkdGggb2YgdGhlIGxlZnQgY29sdW1uXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGxlZnRXaWR0aCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sZWZ0V2lkdGg7XG4gICAgfVxuXG4gICAgc2V0IGxlZnRXaWR0aCh2YWx1ZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5fbGVmdFdpZHRoID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgd2lkdGggb2YgdGhlIHJpZ2h0IGNvbHVtblxuICAgICAqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCByaWdodFdpZHRoKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JpZ2h0V2lkdGg7XG4gICAgfVxuXG4gICAgc2V0IHJpZ2h0V2lkdGgodmFsdWU6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMuX3JpZ2h0V2lkdGggPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBoZWlnaHQgb2YgdGhlIHRvcCByb3dcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgdG9wSGVpZ2h0KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvcEhlaWdodDtcbiAgICB9XG5cbiAgICBzZXQgdG9wSGVpZ2h0KHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLl90b3BIZWlnaHQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBoZWlnaHQgb2YgdGhlIGJvdHRvbSByb3dcbiAgICAgKlxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgYm90dG9tSGVpZ2h0KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JvdHRvbUhlaWdodDtcbiAgICB9XG5cbiAgICBzZXQgYm90dG9tSGVpZ2h0KHZhbHVlOiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLl9ib3R0b21IZWlnaHQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZnJlc2hlcyBOaW5lU2xpY2VQbGFuZSBjb29yZHMuIEFsbCBvZiB0aGVtLlxuICAgICAqL1xuICAgIHByaXZhdGUgX3JlZnJlc2goKTogdm9pZFxuICAgIHtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IHRoaXMudGV4dHVyZTtcblxuICAgICAgICBjb25zdCB1dnMgPSB0aGlzLmdlb21ldHJ5LmJ1ZmZlcnNbMV0uZGF0YTtcblxuICAgICAgICB0aGlzLl9vcmlnV2lkdGggPSB0ZXh0dXJlLm9yaWcud2lkdGg7XG4gICAgICAgIHRoaXMuX29yaWdIZWlnaHQgPSB0ZXh0dXJlLm9yaWcuaGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IF91dncgPSAxLjAgLyB0aGlzLl9vcmlnV2lkdGg7XG4gICAgICAgIGNvbnN0IF91dmggPSAxLjAgLyB0aGlzLl9vcmlnSGVpZ2h0O1xuXG4gICAgICAgIHV2c1swXSA9IHV2c1s4XSA9IHV2c1sxNl0gPSB1dnNbMjRdID0gMDtcbiAgICAgICAgdXZzWzFdID0gdXZzWzNdID0gdXZzWzVdID0gdXZzWzddID0gMDtcbiAgICAgICAgdXZzWzZdID0gdXZzWzE0XSA9IHV2c1syMl0gPSB1dnNbMzBdID0gMTtcbiAgICAgICAgdXZzWzI1XSA9IHV2c1syN10gPSB1dnNbMjldID0gdXZzWzMxXSA9IDE7XG5cbiAgICAgICAgdXZzWzJdID0gdXZzWzEwXSA9IHV2c1sxOF0gPSB1dnNbMjZdID0gX3V2dyAqIHRoaXMuX2xlZnRXaWR0aDtcbiAgICAgICAgdXZzWzRdID0gdXZzWzEyXSA9IHV2c1syMF0gPSB1dnNbMjhdID0gMSAtIChfdXZ3ICogdGhpcy5fcmlnaHRXaWR0aCk7XG4gICAgICAgIHV2c1s5XSA9IHV2c1sxMV0gPSB1dnNbMTNdID0gdXZzWzE1XSA9IF91dmggKiB0aGlzLl90b3BIZWlnaHQ7XG4gICAgICAgIHV2c1sxN10gPSB1dnNbMTldID0gdXZzWzIxXSA9IHV2c1syM10gPSAxIC0gKF91dmggKiB0aGlzLl9ib3R0b21IZWlnaHQpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlSG9yaXpvbnRhbFZlcnRpY2VzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVmVydGljYWxWZXJ0aWNlcygpO1xuXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuYnVmZmVyc1swXS51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5idWZmZXJzWzFdLnVwZGF0ZSgpO1xuICAgIH1cbn1cbiIsICIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsICJpbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSAnQHBpeGkvY29yZSc7XG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICdAcGl4aS9zcHJpdGUnO1xuaW1wb3J0IHsgVGlja2VyLCBVUERBVEVfUFJJT1JJVFkgfSBmcm9tICdAcGl4aS90aWNrZXInO1xuaW1wb3J0IHR5cGUgeyBJRGVzdHJveU9wdGlvbnMgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcblxuLyoqXG4gKiBBbiBBbmltYXRlZFNwcml0ZSBpcyBhIHNpbXBsZSB3YXkgdG8gZGlzcGxheSBhbiBhbmltYXRpb24gZGVwaWN0ZWQgYnkgYSBsaXN0IG9mIHRleHR1cmVzLlxuICpcbiAqIGBgYGpzXG4gKiBsZXQgYWxpZW5JbWFnZXMgPSBbXCJpbWFnZV9zZXF1ZW5jZV8wMS5wbmdcIixcImltYWdlX3NlcXVlbmNlXzAyLnBuZ1wiLFwiaW1hZ2Vfc2VxdWVuY2VfMDMucG5nXCIsXCJpbWFnZV9zZXF1ZW5jZV8wNC5wbmdcIl07XG4gKiBsZXQgdGV4dHVyZUFycmF5ID0gW107XG4gKlxuICogZm9yIChsZXQgaT0wOyBpIDwgNDsgaSsrKVxuICoge1xuICogICAgICBsZXQgdGV4dHVyZSA9IFBJWEkuVGV4dHVyZS5mcm9tKGFsaWVuSW1hZ2VzW2ldKTtcbiAqICAgICAgdGV4dHVyZUFycmF5LnB1c2godGV4dHVyZSk7XG4gKiB9O1xuICpcbiAqIGxldCBhbmltYXRlZFNwcml0ZSA9IG5ldyBQSVhJLkFuaW1hdGVkU3ByaXRlKHRleHR1cmVBcnJheSk7XG4gKiBgYGBcbiAqXG4gKiBUaGUgbW9yZSBlZmZpY2llbnQgYW5kIHNpbXBsZXIgd2F5IHRvIGNyZWF0ZSBhbiBhbmltYXRlZCBzcHJpdGUgaXMgdXNpbmcgYSB7QGxpbmsgUElYSS5TcHJpdGVzaGVldH1cbiAqIGNvbnRhaW5pbmcgdGhlIGFuaW1hdGlvbiBkZWZpbml0aW9uczpcbiAqXG4gKiBgYGBqc1xuICogUElYSS5Mb2FkZXIuc2hhcmVkLmFkZChcImFzc2V0cy9zcHJpdGVzaGVldC5qc29uXCIpLmxvYWQoc2V0dXApO1xuICpcbiAqIGZ1bmN0aW9uIHNldHVwKCkge1xuICogICBsZXQgc2hlZXQgPSBQSVhJLkxvYWRlci5zaGFyZWQucmVzb3VyY2VzW1wiYXNzZXRzL3Nwcml0ZXNoZWV0Lmpzb25cIl0uc3ByaXRlc2hlZXQ7XG4gKiAgIGFuaW1hdGVkU3ByaXRlID0gbmV3IFBJWEkuQW5pbWF0ZWRTcHJpdGUoc2hlZXQuYW5pbWF0aW9uc1tcImltYWdlX3NlcXVlbmNlXCJdKTtcbiAqICAgLi4uXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkuU3ByaXRlXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG5leHBvcnQgY2xhc3MgQW5pbWF0ZWRTcHJpdGUgZXh0ZW5kcyBTcHJpdGVcbntcbiAgICBwdWJsaWMgYW5pbWF0aW9uU3BlZWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgbG9vcDogYm9vbGVhbjtcbiAgICBwdWJsaWMgdXBkYXRlQW5jaG9yOiBib29sZWFuO1xuICAgIHB1YmxpYyBvbkNvbXBsZXRlOiAoKSA9PiB2b2lkO1xuICAgIHB1YmxpYyBvbkZyYW1lQ2hhbmdlOiAoY3VycmVudEZyYW1lOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgcHVibGljIG9uTG9vcDogKCkgPT4gdm9pZDtcblxuICAgIHByaXZhdGUgX3BsYXlpbmc6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfdGV4dHVyZXM6IFRleHR1cmVbXTtcbiAgICBwcml2YXRlIF9kdXJhdGlvbnM6IG51bWJlcltdO1xuICAgIHByaXZhdGUgX2F1dG9VcGRhdGU6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfaXNDb25uZWN0ZWRUb1RpY2tlcjogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9jdXJyZW50VGltZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3ByZXZpb3VzRnJhbWU6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5UZXh0dXJlW118UElYSS5BbmltYXRlZFNwcml0ZS5GcmFtZU9iamVjdFtdfSB0ZXh0dXJlcyAtIEFuIGFycmF5IG9mIHtAbGluayBQSVhJLlRleHR1cmV9IG9yIGZyYW1lXG4gICAgICogIG9iamVjdHMgdGhhdCBtYWtlIHVwIHRoZSBhbmltYXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbYXV0b1VwZGF0ZT10cnVlXSAtIFdoZXRoZXIgdG8gdXNlIFBJWEkuVGlja2VyLnNoYXJlZCB0byBhdXRvIHVwZGF0ZSBhbmltYXRpb24gdGltZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0dXJlczogVGV4dHVyZVtdfEZyYW1lT2JqZWN0W10sIGF1dG9VcGRhdGUgPSB0cnVlKVxuICAgIHtcbiAgICAgICAgc3VwZXIodGV4dHVyZXNbMF0gaW5zdGFuY2VvZiBUZXh0dXJlID8gdGV4dHVyZXNbMF0gOiB0ZXh0dXJlc1swXS50ZXh0dXJlKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge1BJWEkuVGV4dHVyZVtdfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGV4dHVyZXMgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyW119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9kdXJhdGlvbnMgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgdHJ1ZWAgdXNlcyBQSVhJLlRpY2tlci5zaGFyZWQgdG8gYXV0byB1cGRhdGUgYW5pbWF0aW9uIHRpbWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9hdXRvVXBkYXRlID0gYXV0b1VwZGF0ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogYHRydWVgIGlmIHRoZSBpbnN0YW5jZSBpcyBjdXJyZW50bHkgY29ubmVjdGVkIHRvIFBJWEkuVGlja2VyLnNoYXJlZCB0byBhdXRvIHVwZGF0ZSBhbmltYXRpb24gdGltZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzcGVlZCB0aGF0IHRoZSBBbmltYXRlZFNwcml0ZSB3aWxsIHBsYXkgYXQuIEhpZ2hlciBpcyBmYXN0ZXIsIGxvd2VyIGlzIHNsb3dlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAxXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFuaW1hdGlvblNwZWVkID0gMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBvciBub3QgdGhlIGFuaW1hdGUgc3ByaXRlIHJlcGVhdHMgYWZ0ZXIgcGxheWluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sb29wID0gdHJ1ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIGFuY2hvciB0byBbVGV4dHVyZSdzIGRlZmF1bHRBbmNob3Jde0BsaW5rIFBJWEkuVGV4dHVyZSNkZWZhdWx0QW5jaG9yfSB3aGVuIGZyYW1lIGNoYW5nZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFVzZWZ1bCB3aXRoIFtzcHJpdGUgc2hlZXQgYW5pbWF0aW9uc117QGxpbmsgUElYSS5TcHJpdGVzaGVldCNhbmltYXRpb25zfSBjcmVhdGVkIHdpdGggdG9vbHMuXG4gICAgICAgICAqIENoYW5naW5nIGFuY2hvciBmb3IgZWFjaCBmcmFtZSBhbGxvd3MgdG8gcGluIHNwcml0ZSBvcmlnaW4gdG8gY2VydGFpbiBtb3ZpbmcgZmVhdHVyZVxuICAgICAgICAgKiBvZiB0aGUgZnJhbWUgKGUuZy4gbGVmdCBmb290KS5cbiAgICAgICAgICpcbiAgICAgICAgICogTm90ZTogRW5hYmxpbmcgdGhpcyB3aWxsIG92ZXJyaWRlIGFueSBwcmV2aW91c2x5IHNldCBgYW5jaG9yYCBvbiBlYWNoIGZyYW1lIGNoYW5nZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXBkYXRlQW5jaG9yID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZXItYXNzaWduZWQgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGFuIEFuaW1hdGVkU3ByaXRlIGZpbmlzaGVzIHBsYXlpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIGFuaW1hdGlvbi5vbkNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgKiAgIC8vIGZpbmlzaGVkIVxuICAgICAgICAgKiB9O1xuICAgICAgICAgKiBAbWVtYmVyIHtGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Db21wbGV0ZSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZXItYXNzaWduZWQgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGFuIEFuaW1hdGVkU3ByaXRlIGNoYW5nZXMgd2hpY2ggdGV4dHVyZSBpcyBiZWluZyByZW5kZXJlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYW5pbWF0aW9uLm9uRnJhbWVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAqICAgLy8gdXBkYXRlZCFcbiAgICAgICAgICogfTtcbiAgICAgICAgICogQG1lbWJlciB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRnJhbWVDaGFuZ2UgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VyLWFzc2lnbmVkIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBgbG9vcGAgaXMgdHJ1ZSwgYW5kIGFuIEFuaW1hdGVkU3ByaXRlIGlzIHBsYXllZCBhbmRcbiAgICAgICAgICogbG9vcHMgYXJvdW5kIHRvIHN0YXJ0IGFnYWluLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiBhbmltYXRpb24ub25Mb29wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgKiAgIC8vIGxvb3BlZCFcbiAgICAgICAgICogfTtcbiAgICAgICAgICogQG1lbWJlciB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uTG9vcCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVsYXBzZWQgdGltZSBzaW5jZSBhbmltYXRpb24gaGFzIGJlZW4gc3RhcnRlZCwgdXNlZCBpbnRlcm5hbGx5IHRvIGRpc3BsYXkgY3VycmVudCB0ZXh0dXJlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9jdXJyZW50VGltZSA9IDA7XG5cbiAgICAgICAgdGhpcy5fcGxheWluZyA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGV4dHVyZSBpbmRleCB0aGF0IHdhcyBkaXNwbGF5ZWQgbGFzdCB0aW1lXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3ByZXZpb3VzRnJhbWUgPSBudWxsO1xuXG4gICAgICAgIHRoaXMudGV4dHVyZXMgPSB0ZXh0dXJlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgQW5pbWF0ZWRTcHJpdGUuXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RvcCgpOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuX3BsYXlpbmcpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuX2F1dG9VcGRhdGUgJiYgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlcilcbiAgICAgICAge1xuICAgICAgICAgICAgVGlja2VyLnNoYXJlZC5yZW1vdmUodGhpcy51cGRhdGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGxheXMgdGhlIEFuaW1hdGVkU3ByaXRlLlxuICAgICAqXG4gICAgICovXG4gICAgcHVibGljIHBsYXkoKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX3BsYXlpbmcpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BsYXlpbmcgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5fYXV0b1VwZGF0ZSAmJiAhdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlcilcbiAgICAgICAge1xuICAgICAgICAgICAgVGlja2VyLnNoYXJlZC5hZGQodGhpcy51cGRhdGUsIHRoaXMsIFVQREFURV9QUklPUklUWS5ISUdIKTtcbiAgICAgICAgICAgIHRoaXMuX2lzQ29ubmVjdGVkVG9UaWNrZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIEFuaW1hdGVkU3ByaXRlIGFuZCBnb2VzIHRvIGEgc3BlY2lmaWMgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZnJhbWVOdW1iZXIgLSBGcmFtZSBpbmRleCB0byBzdG9wIGF0LlxuICAgICAqL1xuICAgIHB1YmxpYyBnb3RvQW5kU3RvcChmcmFtZU51bWJlcjogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG5cbiAgICAgICAgY29uc3QgcHJldmlvdXNGcmFtZSA9IHRoaXMuY3VycmVudEZyYW1lO1xuXG4gICAgICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gZnJhbWVOdW1iZXI7XG5cbiAgICAgICAgaWYgKHByZXZpb3VzRnJhbWUgIT09IHRoaXMuY3VycmVudEZyYW1lKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdvZXMgdG8gYSBzcGVjaWZpYyBmcmFtZSBhbmQgYmVnaW5zIHBsYXlpbmcgdGhlIEFuaW1hdGVkU3ByaXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyYW1lTnVtYmVyIC0gRnJhbWUgaW5kZXggdG8gc3RhcnQgYXQuXG4gICAgICovXG4gICAgcHVibGljIGdvdG9BbmRQbGF5KGZyYW1lTnVtYmVyOiBudW1iZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBjb25zdCBwcmV2aW91c0ZyYW1lID0gdGhpcy5jdXJyZW50RnJhbWU7XG5cbiAgICAgICAgdGhpcy5fY3VycmVudFRpbWUgPSBmcmFtZU51bWJlcjtcblxuICAgICAgICBpZiAocHJldmlvdXNGcmFtZSAhPT0gdGhpcy5jdXJyZW50RnJhbWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGV4dHVyZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhVGltZSAtIFRpbWUgc2luY2UgbGFzdCB0aWNrLlxuICAgICAqL1xuICAgIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGVsYXBzZWQgPSB0aGlzLmFuaW1hdGlvblNwZWVkICogZGVsdGFUaW1lO1xuICAgICAgICBjb25zdCBwcmV2aW91c0ZyYW1lID0gdGhpcy5jdXJyZW50RnJhbWU7XG5cbiAgICAgICAgaWYgKHRoaXMuX2R1cmF0aW9ucyAhPT0gbnVsbClcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGxhZyA9IHRoaXMuX2N1cnJlbnRUaW1lICUgMSAqIHRoaXMuX2R1cmF0aW9uc1t0aGlzLmN1cnJlbnRGcmFtZV07XG5cbiAgICAgICAgICAgIGxhZyArPSBlbGFwc2VkIC8gNjAgKiAxMDAwO1xuXG4gICAgICAgICAgICB3aGlsZSAobGFnIDwgMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50VGltZS0tO1xuICAgICAgICAgICAgICAgIGxhZyArPSB0aGlzLl9kdXJhdGlvbnNbdGhpcy5jdXJyZW50RnJhbWVdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzaWduID0gTWF0aC5zaWduKHRoaXMuYW5pbWF0aW9uU3BlZWQgKiBkZWx0YVRpbWUpO1xuXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VGltZSA9IE1hdGguZmxvb3IodGhpcy5fY3VycmVudFRpbWUpO1xuXG4gICAgICAgICAgICB3aGlsZSAobGFnID49IHRoaXMuX2R1cmF0aW9uc1t0aGlzLmN1cnJlbnRGcmFtZV0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGFnIC09IHRoaXMuX2R1cmF0aW9uc1t0aGlzLmN1cnJlbnRGcmFtZV0gKiBzaWduO1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRUaW1lICs9IHNpZ247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRUaW1lICs9IGxhZyAvIHRoaXMuX2R1cmF0aW9uc1t0aGlzLmN1cnJlbnRGcmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VGltZSArPSBlbGFwc2VkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRUaW1lIDwgMCAmJiAhdGhpcy5sb29wKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmdvdG9BbmRTdG9wKDApO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5vbkNvbXBsZXRlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2N1cnJlbnRUaW1lID49IHRoaXMuX3RleHR1cmVzLmxlbmd0aCAmJiAhdGhpcy5sb29wKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmdvdG9BbmRTdG9wKHRoaXMuX3RleHR1cmVzLmxlbmd0aCAtIDEpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5vbkNvbXBsZXRlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZXZpb3VzRnJhbWUgIT09IHRoaXMuY3VycmVudEZyYW1lKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodGhpcy5sb29wICYmIHRoaXMub25Mb29wKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvblNwZWVkID4gMCAmJiB0aGlzLmN1cnJlbnRGcmFtZSA8IHByZXZpb3VzRnJhbWUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uTG9vcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmFuaW1hdGlvblNwZWVkIDwgMCAmJiB0aGlzLmN1cnJlbnRGcmFtZSA+IHByZXZpb3VzRnJhbWUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uTG9vcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy51cGRhdGVUZXh0dXJlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBkaXNwbGF5ZWQgdGV4dHVyZSB0byBtYXRjaCB0aGUgY3VycmVudCBmcmFtZSBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVUZXh0dXJlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRGcmFtZSA9IHRoaXMuY3VycmVudEZyYW1lO1xuXG4gICAgICAgIGlmICh0aGlzLl9wcmV2aW91c0ZyYW1lID09PSBjdXJyZW50RnJhbWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3ByZXZpb3VzRnJhbWUgPSBjdXJyZW50RnJhbWU7XG5cbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IHRoaXMuX3RleHR1cmVzW2N1cnJlbnRGcmFtZV07XG4gICAgICAgIHRoaXMuX3RleHR1cmVJRCA9IC0xO1xuICAgICAgICB0aGlzLl90ZXh0dXJlVHJpbW1lZElEID0gLTE7XG4gICAgICAgIHRoaXMuX2NhY2hlZFRpbnQgPSAweEZGRkZGRjtcbiAgICAgICAgdGhpcy51dnMgPSB0aGlzLl90ZXh0dXJlLl91dnMudXZzRmxvYXQzMjtcblxuICAgICAgICBpZiAodGhpcy51cGRhdGVBbmNob3IpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2FuY2hvci5jb3B5RnJvbSh0aGlzLl90ZXh0dXJlLmRlZmF1bHRBbmNob3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub25GcmFtZUNoYW5nZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5vbkZyYW1lQ2hhbmdlKHRoaXMuY3VycmVudEZyYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBBbmltYXRlZFNwcml0ZSBhbmQgZGVzdHJveXMgaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdHxib29sZWFufSBbb3B0aW9uc10gLSBPcHRpb25zIHBhcmFtZXRlci4gQSBib29sZWFuIHdpbGwgYWN0IGFzIGlmIGFsbCBvcHRpb25zXG4gICAgICogIGhhdmUgYmVlbiBzZXQgdG8gdGhhdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNoaWxkcmVuPWZhbHNlXSAtIElmIHNldCB0byB0cnVlLCBhbGwgdGhlIGNoaWxkcmVuIHdpbGwgaGF2ZSB0aGVpciBkZXN0cm95XG4gICAgICogICAgICBtZXRob2QgY2FsbGVkIGFzIHdlbGwuICdvcHRpb25zJyB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aG9zZSBjYWxscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRleHR1cmU9ZmFsc2VdIC0gU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIGN1cnJlbnQgdGV4dHVyZSBvZiB0aGUgc3ByaXRlIGFzIHdlbGwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5iYXNlVGV4dHVyZT1mYWxzZV0gLSBTaG91bGQgaXQgZGVzdHJveSB0aGUgYmFzZSB0ZXh0dXJlIG9mIHRoZSBzcHJpdGUgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVzdHJveShvcHRpb25zOiBJRGVzdHJveU9wdGlvbnN8Ym9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICBzdXBlci5kZXN0cm95KG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMub25Db21wbGV0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMub25GcmFtZUNoYW5nZSA9IG51bGw7XG4gICAgICAgIHRoaXMub25Mb29wID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNob3J0IGhhbmQgd2F5IG9mIGNyZWF0aW5nIGFuIEFuaW1hdGVkU3ByaXRlIGZyb20gYW4gYXJyYXkgb2YgZnJhbWUgaWRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGZyYW1lcyAtIFRoZSBhcnJheSBvZiBmcmFtZXMgaWRzIHRoZSBBbmltYXRlZFNwcml0ZSB3aWxsIHVzZSBhcyBpdHMgdGV4dHVyZSBmcmFtZXMuXG4gICAgICogQHJldHVybiB7UElYSS5BbmltYXRlZFNwcml0ZX0gVGhlIG5ldyBhbmltYXRlZCBzcHJpdGUgd2l0aCB0aGUgc3BlY2lmaWVkIGZyYW1lcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGZyb21GcmFtZXMoZnJhbWVzOiBzdHJpbmdbXSk6IEFuaW1hdGVkU3ByaXRlXG4gICAge1xuICAgICAgICBjb25zdCB0ZXh0dXJlcyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhbWVzLmxlbmd0aDsgKytpKVxuICAgICAgICB7XG4gICAgICAgICAgICB0ZXh0dXJlcy5wdXNoKFRleHR1cmUuZnJvbShmcmFtZXNbaV0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgQW5pbWF0ZWRTcHJpdGUodGV4dHVyZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc2hvcnQgaGFuZCB3YXkgb2YgY3JlYXRpbmcgYW4gQW5pbWF0ZWRTcHJpdGUgZnJvbSBhbiBhcnJheSBvZiBpbWFnZSBpZHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gaW1hZ2VzIC0gVGhlIGFycmF5IG9mIGltYWdlIHVybHMgdGhlIEFuaW1hdGVkU3ByaXRlIHdpbGwgdXNlIGFzIGl0cyB0ZXh0dXJlIGZyYW1lcy5cbiAgICAgKiBAcmV0dXJuIHtQSVhJLkFuaW1hdGVkU3ByaXRlfSBUaGUgbmV3IGFuaW1hdGUgc3ByaXRlIHdpdGggdGhlIHNwZWNpZmllZCBpbWFnZXMgYXMgZnJhbWVzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUltYWdlcyhpbWFnZXM6IHN0cmluZ1tdKTogQW5pbWF0ZWRTcHJpdGVcbiAgICB7XG4gICAgICAgIGNvbnN0IHRleHR1cmVzID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyArK2kpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRleHR1cmVzLnB1c2goVGV4dHVyZS5mcm9tKGltYWdlc1tpXSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBBbmltYXRlZFNwcml0ZSh0ZXh0dXJlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIG51bWJlciBvZiBmcmFtZXMgaW4gdGhlIEFuaW1hdGVkU3ByaXRlLiBUaGlzIGlzIHRoZSBzYW1lIGFzIG51bWJlciBvZiB0ZXh0dXJlc1xuICAgICAqIGFzc2lnbmVkIHRvIHRoZSBBbmltYXRlZFNwcml0ZS5cbiAgICAgKlxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICovXG4gICAgZ2V0IHRvdGFsRnJhbWVzKCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmVzLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYXJyYXkgb2YgdGV4dHVyZXMgdXNlZCBmb3IgdGhpcyBBbmltYXRlZFNwcml0ZS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZVtdfVxuICAgICAqL1xuICAgIGdldCB0ZXh0dXJlcygpOiBUZXh0dXJlW118RnJhbWVPYmplY3RbXVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmVzO1xuICAgIH1cblxuICAgIHNldCB0ZXh0dXJlcyh2YWx1ZTogVGV4dHVyZVtdfEZyYW1lT2JqZWN0W10pXG4gICAge1xuICAgICAgICBpZiAodmFsdWVbMF0gaW5zdGFuY2VvZiBUZXh0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlcyA9IHZhbHVlIGFzIFRleHR1cmVbXTtcbiAgICAgICAgICAgIHRoaXMuX2R1cmF0aW9ucyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fZHVyYXRpb25zID0gW107XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdGV4dHVyZXMucHVzaCgodmFsdWVbaV0gYXMgRnJhbWVPYmplY3QpLnRleHR1cmUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2R1cmF0aW9ucy5wdXNoKCh2YWx1ZVtpXSBhcyBGcmFtZU9iamVjdCkudGltZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHJldmlvdXNGcmFtZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZ290b0FuZFN0b3AoMCk7XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dHVyZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogVGhlIEFuaW1hdGVkU3ByaXRlcyBjdXJyZW50IGZyYW1lIGluZGV4LlxuICAgICpcbiAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAqIEByZWFkb25seVxuICAgICovXG4gICAgZ2V0IGN1cnJlbnRGcmFtZSgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIGxldCBjdXJyZW50RnJhbWUgPSBNYXRoLmZsb29yKHRoaXMuX2N1cnJlbnRUaW1lKSAlIHRoaXMuX3RleHR1cmVzLmxlbmd0aDtcblxuICAgICAgICBpZiAoY3VycmVudEZyYW1lIDwgMClcbiAgICAgICAge1xuICAgICAgICAgICAgY3VycmVudEZyYW1lICs9IHRoaXMuX3RleHR1cmVzLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjdXJyZW50RnJhbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIHRoZSBBbmltYXRlZFNwcml0ZSBpcyBjdXJyZW50bHkgcGxheWluZy5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IHBsYXlpbmcoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXlpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byB1c2UgUElYSS5UaWNrZXIuc2hhcmVkIHRvIGF1dG8gdXBkYXRlIGFuaW1hdGlvbiB0aW1lXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBhdXRvVXBkYXRlKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvVXBkYXRlO1xuICAgIH1cblxuICAgIHNldCBhdXRvVXBkYXRlKHZhbHVlOiBib29sZWFuKVxuICAgIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLl9hdXRvVXBkYXRlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9hdXRvVXBkYXRlID0gdmFsdWU7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5fYXV0b1VwZGF0ZSAmJiB0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFRpY2tlci5zaGFyZWQucmVtb3ZlKHRoaXMudXBkYXRlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9hdXRvVXBkYXRlICYmICF0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyICYmIHRoaXMuX3BsYXlpbmcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgVGlja2VyLnNoYXJlZC5hZGQodGhpcy51cGRhdGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2lzQ29ubmVjdGVkVG9UaWNrZXIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZyYW1lT2JqZWN0IHtcbiAgICB0ZXh0dXJlOiBUZXh0dXJlO1xuICAgIHRpbWU6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBAbWVtYmVyb2YgUElYSS5BbmltYXRlZFNwcml0ZVxuICogQHR5cGVkZWYge29iamVjdH0gRnJhbWVPYmplY3RcbiAqIEB0eXBlIHtvYmplY3R9XG4gKiBAcHJvcGVydHkge1BJWEkuVGV4dHVyZX0gdGV4dHVyZSAtIFRoZSB7QGxpbmsgUElYSS5UZXh0dXJlfSBvZiB0aGUgZnJhbWVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lIC0gdGhlIGR1cmF0aW9uIG9mIHRoZSBmcmFtZSBpbiBtc1xuICovXG4iLCAiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCAiaW1wb3J0IHsgZGVwcmVjYXRpb24gfSBmcm9tICdAcGl4aS91dGlscyc7XG5pbXBvcnQgdHlwZSB7XG4gICAgc3lzdGVtcyxcbiAgICByZXNvdXJjZXMsXG4gICAgUmVuZGVyZXIsXG4gICAgSW1hZ2VTb3VyY2UsXG4gICAgQmFzZVRleHR1cmUsXG4gICAgUmVuZGVyVGV4dHVyZSxcbiAgICBUZXh0dXJlLFxuICAgIFN0YXRlLFxuICAgIEFic3RyYWN0UmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB0eXBlIHsgRGlzcGxheU9iamVjdCwgQ29udGFpbmVyIH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5pbXBvcnQgdHlwZSB7IFRpbGluZ1Nwcml0ZSB9IGZyb20gJ0BwaXhpL3Nwcml0ZS10aWxpbmcnO1xuaW1wb3J0IHR5cGUge1xuICAgIFBvaW50LFxuICAgIE9ic2VydmFibGVQb2ludCxcbiAgICBJUG9pbnQsXG4gICAgUmVjdGFuZ2xlLFxuICAgIFRyYW5zZm9ybSxcbiAgICBncm91cEQ4LFxuICAgIE1hdHJpeCB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHR5cGUgeyBJbnRlcmFjdGlvbk1hbmFnZXIsIEludGVyYWN0aW9uRGF0YSwgSW50ZXJhY3Rpb25FdmVudCB9IGZyb20gJ0BwaXhpL2ludGVyYWN0aW9uJztcbmltcG9ydCB0eXBlIHsgQWNjZXNzaWJpbGl0eU1hbmFnZXIgfSBmcm9tICdAcGl4aS9hY2Nlc3NpYmlsaXR5JztcbmltcG9ydCB0eXBlIHsgVGlja2VyIH0gZnJvbSAnQHBpeGkvdGlja2VyJztcbmltcG9ydCB0eXBlIHsgR3JhcGhpY3MsIEdyYXBoaWNzRGF0YSB9IGZyb20gJ0BwaXhpL2dyYXBoaWNzJztcbmltcG9ydCB0eXBlIHsgU3ByaXRlIH0gZnJvbSAnQHBpeGkvc3ByaXRlJztcbmltcG9ydCB0eXBlIHsgQml0bWFwVGV4dCwgQml0bWFwRm9udExvYWRlciB9IGZyb20gJ0BwaXhpL3RleHQtYml0bWFwJztcbmltcG9ydCB0eXBlIHsgQ2FudmFzUmVuZGVyVGFyZ2V0IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBMb2FkZXIsIExvYWRlclJlc291cmNlIH0gZnJvbSAnQHBpeGkvbG9hZGVycyc7XG5pbXBvcnQgdHlwZSB7IEJhc2VQcmVwYXJlLCBQcmVwYXJlIH0gZnJvbSAnQHBpeGkvcHJlcGFyZSc7XG5pbXBvcnQgdHlwZSB7IEV4dHJhY3QgfSBmcm9tICdAcGl4aS9leHRyYWN0JztcbmltcG9ydCB0eXBlIHsgQW5pbWF0ZWRTcHJpdGUgfSBmcm9tICdAcGl4aS9zcHJpdGUtYW5pbWF0ZWQnO1xuaW1wb3J0IHR5cGUgeyBNZXNoIH0gZnJvbSAnQHBpeGkvbWVzaCc7XG5pbXBvcnQgdHlwZSB7IFBhcnRpY2xlQ29udGFpbmVyIH0gZnJvbSAnQHBpeGkvcGFydGljbGVzJztcbmltcG9ydCB0eXBlIHsgU3ByaXRlc2hlZXRMb2FkZXIgfSBmcm9tICdAcGl4aS9zcHJpdGVzaGVldCc7XG5pbXBvcnQgdHlwZSB7XG4gICAgU2ltcGxlUm9wZSxcbiAgICBOaW5lU2xpY2VQbGFuZSxcbiAgICBTaW1wbGVNZXNoLFxuICAgIFNpbXBsZVBsYW5lIH0gZnJvbSAnQHBpeGkvbWVzaC1leHRyYXMnO1xuXG5jb25zdCB2NSA9ICc1LjAuMCc7XG5cbi8vIENhbnZhcyBkZXByZWNhdGlvbnMgbmVlZHMgdG8gZ2V0IG1vdmVkXG4vLyB0byB0aGUgbGVnYWN5IHBhY2thZ2UsIGJ1dCBmb3Igbm93LCB3ZSdsbFxuLy8gYWQgdGhpcyByZW1pbmRlclxudHlwZSAkRml4TGVnYWN5ID0gYW55O1xuXG4vKipcbiAqIERlcHJlY2F0aW9ucyAoYmFja3dhcmQgY29tcGF0aWJpbGl0aWVzKSBhcmUgYXV0b21hdGljYWxseSBhcHBsaWVkIGZvciBicm93c2VyIGJ1bmRsZXNcbiAqIGluIHRoZSBVTUQgbW9kdWxlIGZvcm1hdC4gSWYgdXNpbmcgV2VicGFjayBvciBSb2xsdXAsIHlvdSdsbCBuZWVkIHRvIGFwcGx5IHRoZXNlXG4gKiBkZXByZWNhdGlvbnMgbWFudWFsbHkgYnkgZG9pbmcgc29tZXRoaW5nIGxpa2UgdGhpczpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgKiBhcyBQSVhJIGZyb20gJ3BpeGkuanMnO1xuICogUElYSS51c2VEZXByZWNhdGVkKCk7IC8vIE1VU1QgYmUgYm91bmQgdG8gbmFtZXNwYWNlXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQGZ1bmN0aW9uIHVzZURlcHJlY2F0ZWRcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXNcbmV4cG9ydCBmdW5jdGlvbiB1c2VEZXByZWNhdGVkKHRoaXM6IGFueSk6IHZvaWRcbntcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICBjb25zdCBQSVhJID0gdGhpcztcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBJWEksIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjb25zdGFudCB7UmVnRXhwfHN0cmluZ30gU1ZHX1NJWkVcbiAgICAgICAgICogQG1lbWJlcm9mIFBJWElcbiAgICAgICAgICogQHNlZSBQSVhJLnJlc291cmNlcy5TVkdSZXNvdXJjZS5TVkdfU0laRVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgU1ZHX1NJWkU6IHtcbiAgICAgICAgICAgIGdldCgpOiBSZWdFeHBcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkudXRpbHMuU1ZHX1NJWkUgcHJvcGVydHkgaGFzIG1vdmVkIHRvIFBJWEkucmVzb3VyY2VzLlNWR1Jlc291cmNlLlNWR19TSVpFJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5TVkdSZXNvdXJjZS5TVkdfU0laRTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLlRyYW5zZm9ybVN0YXRpY1xuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKiBAc2VlIFBJWEkuVHJhbnNmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2Zvcm1TdGF0aWM6IHtcbiAgICAgICAgICAgIGdldCgpOiBUcmFuc2Zvcm1cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuVHJhbnNmb3JtU3RhdGljIGNsYXNzIGhhcyBiZWVuIHJlbW92ZWQsIHVzZSBQSVhJLlRyYW5zZm9ybScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuVHJhbnNmb3JtO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkuVHJhbnNmb3JtQmFzZVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKiBAc2VlIFBJWEkuVHJhbnNmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2Zvcm1CYXNlOiB7XG4gICAgICAgICAgICBnZXQoKTogVHJhbnNmb3JtXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLlRyYW5zZm9ybUJhc2UgY2xhc3MgaGFzIGJlZW4gcmVtb3ZlZCwgdXNlIFBJWEkuVHJhbnNmb3JtJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5UcmFuc2Zvcm07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdGFudHMgdGhhdCBzcGVjaWZ5IHRoZSB0cmFuc2Zvcm0gdHlwZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAY29uc3RhbnRcbiAgICAgICAgICogQG5hbWUgVFJBTlNGT1JNX01PREVcbiAgICAgICAgICogQG1lbWJlcm9mIFBJWElcbiAgICAgICAgICogQGVudW0ge251bWJlcn1cbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFNUQVRJQ1xuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gRFlOQU1JQ1xuICAgICAgICAgKi9cbiAgICAgICAgVFJBTlNGT1JNX01PREU6IHtcbiAgICAgICAgICAgIGdldCgpOiB7W25hbWU6IHN0cmluZ106IG51bWJlcn1cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuVFJBTlNGT1JNX01PREUgcHJvcGVydHkgaGFzIGJlZW4gcmVtb3ZlZCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgU1RBVElDOiAwLCBEWU5BTUlDOiAxIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY2xhc3MgUElYSS5XZWJHTFJlbmRlcmVyXG4gICAgICAgICAqIEBzZWUgUElYSS5SZW5kZXJlclxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgV2ViR0xSZW5kZXJlcjoge1xuICAgICAgICAgICAgZ2V0KCk6IHR5cGVvZiBSZW5kZXJlclxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5XZWJHTFJlbmRlcmVyIGNsYXNzIGhhcyBtb3ZlZCB0byBQSVhJLlJlbmRlcmVyJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5SZW5kZXJlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLkNhbnZhc1JlbmRlclRhcmdldFxuICAgICAgICAgKiBAc2VlIFBJWEkudXRpbHMuQ2FudmFzUmVuZGVyVGFyZ2V0XG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBDYW52YXNSZW5kZXJUYXJnZXQ6IHtcbiAgICAgICAgICAgIGdldCgpOiBDYW52YXNSZW5kZXJUYXJnZXRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuQ2FudmFzUmVuZGVyVGFyZ2V0IGNsYXNzIGhhcyBtb3ZlZCB0byBQSVhJLnV0aWxzLkNhbnZhc1JlbmRlclRhcmdldCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkudXRpbHMuQ2FudmFzUmVuZGVyVGFyZ2V0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlcm9mIFBJWElcbiAgICAgICAgICogQG5hbWUgbG9hZGVyXG4gICAgICAgICAqIEB0eXBlIHtQSVhJLkxvYWRlcn1cbiAgICAgICAgICogQHNlZSBQSVhJLkxvYWRlci5zaGFyZWRcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICovXG4gICAgICAgIGxvYWRlcjoge1xuICAgICAgICAgICAgZ2V0KCk6IExvYWRlclxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5sb2FkZXIgaW5zdGFuY2UgaGFzIG1vdmVkIHRvIFBJWEkuTG9hZGVyLnNoYXJlZCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuTG9hZGVyLnNoYXJlZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLkZpbHRlck1hbmFnZXJcbiAgICAgICAgICogQHNlZSBQSVhJLnN5c3RlbXMuRmlsdGVyU3lzdGVtXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBGaWx0ZXJNYW5hZ2VyOiB7XG4gICAgICAgICAgICBnZXQoKTogc3lzdGVtcy5GaWx0ZXJTeXN0ZW1cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuRmlsdGVyTWFuYWdlciBjbGFzcyBoYXMgbW92ZWQgdG8gUElYSS5zeXN0ZW1zLkZpbHRlclN5c3RlbScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuc3lzdGVtcy5GaWx0ZXJTeXN0ZW07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmFtZXNwYWNlIFBJWEkuQ2FudmFzVGludGVyXG4gICAgICAgICAqIEBzZWUgUElYSS5jYW52YXNVdGlsc1xuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjIuMFxuICAgICAgICAgKi9cbiAgICAgICAgQ2FudmFzVGludGVyOiB7XG4gICAgICAgICAgICBnZXQoKTogJEZpeExlZ2FjeVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKCc1LjIuMCcsICdQSVhJLkNhbnZhc1RpbnRlciBuYW1lc3BhY2UgaGFzIG1vdmVkIHRvIFBJWEkuY2FudmFzVXRpbHMnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLmNhbnZhc1V0aWxzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5hbWVzcGFjZSBQSVhJLkdyb3VwRDhcbiAgICAgICAgICogQHNlZSBQSVhJLmdyb3VwRDhcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4yLjBcbiAgICAgICAgICovXG4gICAgICAgIEdyb3VwRDg6IHtcbiAgICAgICAgICAgIGdldCgpOiB0eXBlb2YgZ3JvdXBEOFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKCc1LjIuMCcsICdQSVhJLkdyb3VwRDggbmFtZXNwYWNlIGhhcyBtb3ZlZCB0byBQSVhJLmdyb3VwRDgnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLmdyb3VwRDg7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZSBQSVhJLmFjY2Vzc2liaWxpdHlcbiAgICAgKiBAc2VlIFBJWElcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjMuMFxuICAgICAqL1xuICAgIFBJWEkuYWNjZXNzaWJpbGl0eSA9IHt9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUElYSS5hY2Nlc3NpYmlsaXR5LCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY2xhc3MgUElYSS5hY2Nlc3NpYmlsaXR5LkFjY2Vzc2liaWxpdHlNYW5hZ2VyXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMy4wXG4gICAgICAgICAqIEBzZWUgUElYSS5BY2Nlc3NpYmlsaXR5TWFuYWdlclxuICAgICAgICAgKi9cbiAgICAgICAgQWNjZXNzaWJpbGl0eU1hbmFnZXI6IHtcbiAgICAgICAgICAgIGdldCgpOiB0eXBlb2YgQWNjZXNzaWJpbGl0eU1hbmFnZXJcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbignNS4zLjAnLCAnUElYSS5hY2Nlc3NpYmlsaXR5LkFjY2Vzc2liaWxpdHlNYW5hZ2VyIG1vdmVkIHRvIFBJWEkuQWNjZXNzaWJpbGl0eU1hbmFnZXInKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLkFjY2Vzc2liaWxpdHlNYW5hZ2VyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2UgUElYSS5pbnRlcmFjdGlvblxuICAgICAqIEBzZWUgUElYSVxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMy4wXG4gICAgICovXG4gICAgUElYSS5pbnRlcmFjdGlvbiA9IHt9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUElYSS5pbnRlcmFjdGlvbiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkuaW50ZXJhY3Rpb24uSW50ZXJhY3Rpb25NYW5hZ2VyXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMy4wXG4gICAgICAgICAqIEBzZWUgUElYSS5JbnRlcmFjdGlvbk1hbmFnZXJcbiAgICAgICAgICovXG4gICAgICAgIEludGVyYWN0aW9uTWFuYWdlcjoge1xuICAgICAgICAgICAgZ2V0KCk6IHR5cGVvZiBJbnRlcmFjdGlvbk1hbmFnZXJcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbignNS4zLjAnLCAnUElYSS5pbnRlcmFjdGlvbi5JbnRlcmFjdGlvbk1hbmFnZXIgbW92ZWQgdG8gUElYSS5JbnRlcmFjdGlvbk1hbmFnZXInKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLkludGVyYWN0aW9uTWFuYWdlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLmludGVyYWN0aW9uLkludGVyYWN0aW9uRGF0YVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjMuMFxuICAgICAgICAgKiBAc2VlIFBJWEkuSW50ZXJhY3Rpb25EYXRhXG4gICAgICAgICAqL1xuICAgICAgICBJbnRlcmFjdGlvbkRhdGE6IHtcbiAgICAgICAgICAgIGdldCgpOiB0eXBlb2YgSW50ZXJhY3Rpb25EYXRhXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24oJzUuMy4wJywgJ1BJWEkuaW50ZXJhY3Rpb24uSW50ZXJhY3Rpb25EYXRhIG1vdmVkIHRvIFBJWEkuSW50ZXJhY3Rpb25EYXRhJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5JbnRlcmFjdGlvbkRhdGE7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY2xhc3MgUElYSS5pbnRlcmFjdGlvbi5JbnRlcmFjdGlvbkV2ZW50XG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMy4wXG4gICAgICAgICAqIEBzZWUgUElYSS5JbnRlcmFjdGlvbkV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBJbnRlcmFjdGlvbkV2ZW50OiB7XG4gICAgICAgICAgICBnZXQoKTogdHlwZW9mIEludGVyYWN0aW9uRXZlbnRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbignNS4zLjAnLCAnUElYSS5pbnRlcmFjdGlvbi5JbnRlcmFjdGlvbkV2ZW50IG1vdmVkIHRvIFBJWEkuSW50ZXJhY3Rpb25FdmVudCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuSW50ZXJhY3Rpb25FdmVudDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlIFBJWEkucHJlcGFyZVxuICAgICAqIEBzZWUgUElYSVxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMi4xXG4gICAgICovXG4gICAgUElYSS5wcmVwYXJlID0ge307XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQSVhJLnByZXBhcmUsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLnByZXBhcmUuQmFzZVByZXBhcmVcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4yLjFcbiAgICAgICAgICogQHNlZSBQSVhJLkJhc2VQcmVwYXJlXG4gICAgICAgICAqL1xuICAgICAgICBCYXNlUHJlcGFyZToge1xuICAgICAgICAgICAgZ2V0KCk6IHR5cGVvZiBCYXNlUHJlcGFyZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKCc1LjIuMScsICdQSVhJLnByZXBhcmUuQmFzZVByZXBhcmUgbW92ZWQgdG8gUElYSS5CYXNlUHJlcGFyZScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuQmFzZVByZXBhcmU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkucHJlcGFyZS5QcmVwYXJlXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMi4xXG4gICAgICAgICAqIEBzZWUgUElYSS5QcmVwYXJlXG4gICAgICAgICAqL1xuICAgICAgICBQcmVwYXJlOiB7XG4gICAgICAgICAgICBnZXQoKTogdHlwZW9mIFByZXBhcmVcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbignNS4yLjEnLCAnUElYSS5wcmVwYXJlLlByZXBhcmUgbW92ZWQgdG8gUElYSS5QcmVwYXJlJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5QcmVwYXJlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLnByZXBhcmUuQ2FudmFzUHJlcGFyZVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjIuMVxuICAgICAgICAgKiBAc2VlIFBJWEkuQ2FudmFzUHJlcGFyZVxuICAgICAgICAgKi9cbiAgICAgICAgQ2FudmFzUHJlcGFyZToge1xuICAgICAgICAgICAgZ2V0KCk6ICRGaXhMZWdhY3lcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbignNS4yLjEnLCAnUElYSS5wcmVwYXJlLkNhbnZhc1ByZXBhcmUgbW92ZWQgdG8gUElYSS5DYW52YXNQcmVwYXJlJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5DYW52YXNQcmVwYXJlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2UgUElYSS5leHRyYWN0XG4gICAgICogQHNlZSBQSVhJXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4yLjFcbiAgICAgKi9cbiAgICBQSVhJLmV4dHJhY3QgPSB7fTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBJWEkuZXh0cmFjdCwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkuZXh0cmFjdC5FeHRyYWN0XG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMi4xXG4gICAgICAgICAqIEBzZWUgUElYSS5FeHRyYWN0XG4gICAgICAgICAqL1xuICAgICAgICBFeHRyYWN0OiB7XG4gICAgICAgICAgICBnZXQoKTogdHlwZW9mIEV4dHJhY3RcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbignNS4yLjEnLCAnUElYSS5leHRyYWN0LkV4dHJhY3QgbW92ZWQgdG8gUElYSS5FeHRyYWN0Jyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5FeHRyYWN0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLmV4dHJhY3QuQ2FudmFzRXh0cmFjdFxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjIuMVxuICAgICAgICAgKiBAc2VlIFBJWEkuQ2FudmFzRXh0cmFjdFxuICAgICAgICAgKi9cbiAgICAgICAgQ2FudmFzRXh0cmFjdDoge1xuICAgICAgICAgICAgZ2V0KCk6ICRGaXhMZWdhY3lcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbignNS4yLjEnLCAnUElYSS5leHRyYWN0LkNhbnZhc0V4dHJhY3QgbW92ZWQgdG8gUElYSS5DYW52YXNFeHRyYWN0Jyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5DYW52YXNFeHRyYWN0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbmFtZXNwYWNlIGhhcyBiZWVuIHJlbW92ZWQuIEFsbCBjbGFzc2VzIHByZXZpb3VzIG5lc3RlZFxuICAgICAqIHVuZGVyIHRoaXMgbmFtZXNwYWNlIGhhdmUgYmVlbiBtb3ZlZCB0byB0aGUgdG9wLWxldmVsIGBQSVhJYCBvYmplY3QuXG4gICAgICogQG5hbWVzcGFjZSBQSVhJLmV4dHJhc1xuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICovXG4gICAgUElYSS5leHRyYXMgPSB7fTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBJWEkuZXh0cmFzLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY2xhc3MgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlXG4gICAgICAgICAqIEBzZWUgUElYSS5UaWxpbmdTcHJpdGVcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICovXG4gICAgICAgIFRpbGluZ1Nwcml0ZToge1xuICAgICAgICAgICAgZ2V0KCk6IHR5cGVvZiBUaWxpbmdTcHJpdGVcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZSBjbGFzcyBoYXMgbW92ZWQgdG8gUElYSS5UaWxpbmdTcHJpdGUnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLlRpbGluZ1Nwcml0ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY2xhc3MgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlUmVuZGVyZXJcbiAgICAgICAgICogQHNlZSBQSVhJLlRpbGluZ1Nwcml0ZVJlbmRlcmVyXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBUaWxpbmdTcHJpdGVSZW5kZXJlcjoge1xuICAgICAgICAgICAgZ2V0KCk6ICRGaXhMZWdhY3lcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZVJlbmRlcmVyIGNsYXNzIGhhcyBtb3ZlZCB0byBQSVhJLlRpbGluZ1Nwcml0ZVJlbmRlcmVyJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5UaWxpbmdTcHJpdGVSZW5kZXJlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY2xhc3MgUElYSS5leHRyYXMuQW5pbWF0ZWRTcHJpdGVcbiAgICAgICAgICogQHNlZSBQSVhJLkFuaW1hdGVkU3ByaXRlXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBBbmltYXRlZFNwcml0ZToge1xuICAgICAgICAgICAgZ2V0KCk6IHR5cGVvZiBBbmltYXRlZFNwcml0ZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5leHRyYXMuQW5pbWF0ZWRTcHJpdGUgY2xhc3MgaGFzIG1vdmVkIHRvIFBJWEkuQW5pbWF0ZWRTcHJpdGUnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLkFuaW1hdGVkU3ByaXRlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLmV4dHJhcy5CaXRtYXBUZXh0XG4gICAgICAgICAqIEBzZWUgUElYSS5CaXRtYXBUZXh0XG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBCaXRtYXBUZXh0OiB7XG4gICAgICAgICAgICBnZXQoKTogdHlwZW9mIEJpdG1hcFRleHRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuZXh0cmFzLkJpdG1hcFRleHQgY2xhc3MgaGFzIG1vdmVkIHRvIFBJWEkuQml0bWFwVGV4dCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuQml0bWFwVGV4dDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1ldGhvZCBQSVhJLlRpbGluZ1Nwcml0ZS5mcm9tRnJhbWVcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjMuMFxuICAgICAqIEBzZWUgUElYSS5UaWxpbmdTcHJpdGUuZnJvbVxuICAgICAqL1xuICAgIFBJWEkuVGlsaW5nU3ByaXRlLmZyb21GcmFtZSA9IGZ1bmN0aW9uIGZyb21GcmFtZShmcmFtZUlkOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogVGlsaW5nU3ByaXRlXG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbignNS4zLjAnLCAnVGlsaW5nU3ByaXRlLmZyb21GcmFtZSBpcyBkZXByZWNhdGVkLCB1c2UgVGlsaW5nU3ByaXRlLmZyb20nKTtcblxuICAgICAgICByZXR1cm4gUElYSS5UaWxpbmdTcHJpdGUuZnJvbShmcmFtZUlkLCB7IHdpZHRoLCBoZWlnaHQgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWV0aG9kIFBJWEkuVGlsaW5nU3ByaXRlLmZyb21JbWFnZVxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMy4wXG4gICAgICogQHNlZSBQSVhJLlRpbGluZ1Nwcml0ZS5mcm9tXG4gICAgICovXG4gICAgUElYSS5UaWxpbmdTcHJpdGUuZnJvbUltYWdlID0gZnVuY3Rpb24gZnJvbUltYWdlKFxuICAgICAgICBpbWFnZUlkOiBzdHJpbmcsXG4gICAgICAgIHdpZHRoOiBudW1iZXIsXG4gICAgICAgIGhlaWdodDogbnVtYmVyLFxuICAgICAgICBvcHRpb25zOiBhbnkgPSB7fSk6IFRpbGluZ1Nwcml0ZVxuICAgIHtcbiAgICAgICAgZGVwcmVjYXRpb24oJzUuMy4wJywgJ1RpbGluZ1Nwcml0ZS5mcm9tSW1hZ2UgaXMgZGVwcmVjYXRlZCwgdXNlIFRpbGluZ1Nwcml0ZS5mcm9tJyk7XG5cbiAgICAgICAgLy8gRmFsbGJhY2sgc3VwcG9ydCBmb3IgY3Jvc3NvcmlnaW4sIHNjYWxlTW9kZSBwYXJhbWV0ZXJzXG4gICAgICAgIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JylcbiAgICAgICAge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gICAgICAgICAgICAgICAgc2NhbGVNb2RlOiBhcmd1bWVudHNbNF0sXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgY3Jvc3NvcmlnaW46IGFyZ3VtZW50c1szXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgb3B0aW9ucy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgcmV0dXJuIFBJWEkuVGlsaW5nU3ByaXRlLmZyb20oaW1hZ2VJZCwgb3B0aW9ucyk7XG4gICAgfTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBJWEkudXRpbHMsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBmdW5jdGlvbiBQSVhJLnV0aWxzLmdldFN2Z1NpemVcbiAgICAgICAgICogQHNlZSBQSVhJLnJlc291cmNlcy5TVkdSZXNvdXJjZS5nZXRTaXplXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBnZXRTdmdTaXplOiB7XG4gICAgICAgICAgICBnZXQoKTogdHlwZW9mIHJlc291cmNlcy5TVkdSZXNvdXJjZS5nZXRTaXplXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLnV0aWxzLmdldFN2Z1NpemUgZnVuY3Rpb24gaGFzIG1vdmVkIHRvIFBJWEkucmVzb3VyY2VzLlNWR1Jlc291cmNlLmdldFNpemUnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLnJlc291cmNlcy5TVkdSZXNvdXJjZS5nZXRTaXplO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFsbCBjbGFzc2VzIG9uIHRoaXMgbmFtZXNwYWNlIGhhdmUgbW92ZWQgdG8gdGhlIGhpZ2gtbGV2ZWwgYFBJWElgIG9iamVjdC5cbiAgICAgKiBAbmFtZXNwYWNlIFBJWEkubWVzaFxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICovXG4gICAgUElYSS5tZXNoID0ge307XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQSVhJLm1lc2gsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLm1lc2guTWVzaFxuICAgICAgICAgKiBAc2VlIFBJWEkuU2ltcGxlTWVzaFxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgTWVzaDoge1xuICAgICAgICAgICAgZ2V0KCk6IHR5cGVvZiBTaW1wbGVNZXNoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLm1lc2guTWVzaCBjbGFzcyBoYXMgbW92ZWQgdG8gUElYSS5TaW1wbGVNZXNoJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5TaW1wbGVNZXNoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLm1lc2guTmluZVNsaWNlUGxhbmVcbiAgICAgICAgICogQHNlZSBQSVhJLk5pbmVTbGljZVBsYW5lXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBOaW5lU2xpY2VQbGFuZToge1xuICAgICAgICAgICAgZ2V0KCk6IHR5cGVvZiBOaW5lU2xpY2VQbGFuZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5tZXNoLk5pbmVTbGljZVBsYW5lIGNsYXNzIGhhcyBtb3ZlZCB0byBQSVhJLk5pbmVTbGljZVBsYW5lJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5OaW5lU2xpY2VQbGFuZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY2xhc3MgUElYSS5tZXNoLlBsYW5lXG4gICAgICAgICAqIEBzZWUgUElYSS5TaW1wbGVQbGFuZVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgUGxhbmU6IHtcbiAgICAgICAgICAgIGdldCgpOiB0eXBlb2YgU2ltcGxlUGxhbmVcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkubWVzaC5QbGFuZSBjbGFzcyBoYXMgbW92ZWQgdG8gUElYSS5TaW1wbGVQbGFuZScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuU2ltcGxlUGxhbmU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkubWVzaC5Sb3BlXG4gICAgICAgICAqIEBzZWUgUElYSS5TaW1wbGVSb3BlXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBSb3BlOiB7XG4gICAgICAgICAgICBnZXQoKTogdHlwZW9mIFNpbXBsZVJvcGVcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkubWVzaC5Sb3BlIGNsYXNzIGhhcyBtb3ZlZCB0byBQSVhJLlNpbXBsZVJvcGUnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLlNpbXBsZVJvcGU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkubWVzaC5SYXdNZXNoXG4gICAgICAgICAqIEBzZWUgUElYSS5NZXNoXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBSYXdNZXNoOiB7XG4gICAgICAgICAgICBnZXQoKTogdHlwZW9mIE1lc2hcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkubWVzaC5SYXdNZXNoIGNsYXNzIGhhcyBtb3ZlZCB0byBQSVhJLk1lc2gnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLk1lc2g7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkubWVzaC5DYW52YXNNZXNoUmVuZGVyZXJcbiAgICAgICAgICogQHNlZSBQSVhJLkNhbnZhc01lc2hSZW5kZXJlclxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgQ2FudmFzTWVzaFJlbmRlcmVyOiB7XG4gICAgICAgICAgICBnZXQoKTogJEZpeExlZ2FjeVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5tZXNoLkNhbnZhc01lc2hSZW5kZXJlciBjbGFzcyBoYXMgbW92ZWQgdG8gUElYSS5DYW52YXNNZXNoUmVuZGVyZXInKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLkNhbnZhc01lc2hSZW5kZXJlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY2xhc3MgUElYSS5tZXNoLk1lc2hSZW5kZXJlclxuICAgICAgICAgKiBAc2VlIFBJWEkuTWVzaFJlbmRlcmVyXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBNZXNoUmVuZGVyZXI6IHtcbiAgICAgICAgICAgIGdldCgpOiAkRml4TGVnYWN5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLm1lc2guTWVzaFJlbmRlcmVyIGNsYXNzIGhhcyBtb3ZlZCB0byBQSVhJLk1lc2hSZW5kZXJlcicpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuTWVzaFJlbmRlcmVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbmFtZXNwYWNlIGhhcyBiZWVuIHJlbW92ZWQgYW5kIGl0ZW1zIGhhdmUgYmVlbiBtb3ZlZCB0b1xuICAgICAqIHRoZSB0b3AtbGV2ZWwgYFBJWElgIG9iamVjdC5cbiAgICAgKiBAbmFtZXNwYWNlIFBJWEkucGFydGljbGVzXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgKi9cbiAgICBQSVhJLnBhcnRpY2xlcyA9IHt9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUElYSS5wYXJ0aWNsZXMsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjbGFzcyBQSVhJLnBhcnRpY2xlcy5QYXJ0aWNsZUNvbnRhaW5lclxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKiBAc2VlIFBJWEkuUGFydGljbGVDb250YWluZXJcbiAgICAgICAgICovXG4gICAgICAgIFBhcnRpY2xlQ29udGFpbmVyOiB7XG4gICAgICAgICAgICBnZXQoKTogdHlwZW9mIFBhcnRpY2xlQ29udGFpbmVyXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLnBhcnRpY2xlcy5QYXJ0aWNsZUNvbnRhaW5lciBjbGFzcyBoYXMgbW92ZWQgdG8gUElYSS5QYXJ0aWNsZUNvbnRhaW5lcicpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuUGFydGljbGVDb250YWluZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkucGFydGljbGVzLlBhcnRpY2xlUmVuZGVyZXJcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICogQHNlZSBQSVhJLlBhcnRpY2xlUmVuZGVyZXJcbiAgICAgICAgICovXG4gICAgICAgIFBhcnRpY2xlUmVuZGVyZXI6IHtcbiAgICAgICAgICAgIGdldCgpOiAkRml4TGVnYWN5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLnBhcnRpY2xlcy5QYXJ0aWNsZVJlbmRlcmVyIGNsYXNzIGhhcyBtb3ZlZCB0byBQSVhJLlBhcnRpY2xlUmVuZGVyZXInKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLlBhcnRpY2xlUmVuZGVyZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBuYW1lc3BhY2UgaGFzIGJlZW4gcmVtb3ZlZCBhbmQgaXRlbXMgaGF2ZSBiZWVuIG1vdmVkIHRvXG4gICAgICogdGhlIHRvcC1sZXZlbCBgUElYSWAgb2JqZWN0LlxuICAgICAqIEBuYW1lc3BhY2UgUElYSS50aWNrZXJcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqL1xuICAgIFBJWEkudGlja2VyID0ge307XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQSVhJLnRpY2tlciwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkudGlja2VyLlRpY2tlclxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKiBAc2VlIFBJWEkuVGlja2VyXG4gICAgICAgICAqL1xuICAgICAgICBUaWNrZXI6IHtcbiAgICAgICAgICAgIGdldCgpOiB0eXBlb2YgVGlja2VyXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLnRpY2tlci5UaWNrZXIgY2xhc3MgaGFzIG1vdmVkIHRvIFBJWEkuVGlja2VyJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUElYSS5UaWNrZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG5hbWUgUElYSS50aWNrZXIuc2hhcmVkXG4gICAgICAgICAqIEB0eXBlIHtQSVhJLlRpY2tlcn1cbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICogQHNlZSBQSVhJLlRpY2tlci5zaGFyZWRcbiAgICAgICAgICovXG4gICAgICAgIHNoYXJlZDoge1xuICAgICAgICAgICAgZ2V0KCk6IFRpY2tlclxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS50aWNrZXIuc2hhcmVkIGluc3RhbmNlIGhhcyBtb3ZlZCB0byBQSVhJLlRpY2tlci5zaGFyZWQnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLlRpY2tlci5zaGFyZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQWxsIGNsYXNzZXMgb24gdGhpcyBuYW1lc3BhY2UgaGF2ZSBtb3ZlZCB0byB0aGUgaGlnaC1sZXZlbCBgUElYSWAgb2JqZWN0LlxuICAgICAqIEBuYW1lc3BhY2UgUElYSS5sb2FkZXJzXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgKi9cbiAgICBQSVhJLmxvYWRlcnMgPSB7fTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBJWEkubG9hZGVycywge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGNsYXNzIFBJWEkubG9hZGVycy5Mb2FkZXJcbiAgICAgICAgICogQHNlZSBQSVhJLkxvYWRlclxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgTG9hZGVyOiB7XG4gICAgICAgICAgICBnZXQoKTogdHlwZW9mIExvYWRlclxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5sb2FkZXJzLkxvYWRlciBjbGFzcyBoYXMgbW92ZWQgdG8gUElYSS5Mb2FkZXInKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLkxvYWRlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY2xhc3MgUElYSS5sb2FkZXJzLlJlc291cmNlXG4gICAgICAgICAqIEBzZWUgUElYSS5Mb2FkZXJSZXNvdXJjZVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgUmVzb3VyY2U6IHtcbiAgICAgICAgICAgIGdldCgpOiB0eXBlb2YgTG9hZGVyUmVzb3VyY2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkubG9hZGVycy5SZXNvdXJjZSBjbGFzcyBoYXMgbW92ZWQgdG8gUElYSS5Mb2FkZXJSZXNvdXJjZScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuTG9hZGVyUmVzb3VyY2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQGZ1bmN0aW9uIFBJWEkubG9hZGVycy5iaXRtYXBGb250UGFyc2VyXG4gICAgICAgICAqIEBzZWUgUElYSS5CaXRtYXBGb250TG9hZGVyLnVzZVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgYml0bWFwRm9udFBhcnNlcjoge1xuICAgICAgICAgICAgZ2V0KCk6IHR5cGVvZiBCaXRtYXBGb250TG9hZGVyLnVzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5sb2FkZXJzLmJpdG1hcEZvbnRQYXJzZXIgZnVuY3Rpb24gaGFzIG1vdmVkIHRvIFBJWEkuQml0bWFwRm9udExvYWRlci51c2UnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLkJpdG1hcEZvbnRMb2FkZXIudXNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBmdW5jdGlvbiBQSVhJLmxvYWRlcnMucGFyc2VCaXRtYXBGb250RGF0YVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgcGFyc2VCaXRtYXBGb250RGF0YToge1xuICAgICAgICAgICAgZ2V0KCk6IHZvaWRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkubG9hZGVycy5wYXJzZUJpdG1hcEZvbnREYXRhIGZ1bmN0aW9uIGhhcyByZW1vdmVkJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQGZ1bmN0aW9uIFBJWEkubG9hZGVycy5zcHJpdGVzaGVldFBhcnNlclxuICAgICAgICAgKiBAc2VlIFBJWEkuU3ByaXRlc2hlZXRMb2FkZXIudXNlXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBzcHJpdGVzaGVldFBhcnNlcjoge1xuICAgICAgICAgICAgZ2V0KCk6IHR5cGVvZiBTcHJpdGVzaGVldExvYWRlci51c2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkubG9hZGVycy5zcHJpdGVzaGVldFBhcnNlciBmdW5jdGlvbiBoYXMgbW92ZWQgdG8gUElYSS5TcHJpdGVzaGVldExvYWRlci51c2UnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQSVhJLlNwcml0ZXNoZWV0TG9hZGVyLnVzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZnVuY3Rpb24gUElYSS5sb2FkZXJzLmdldFJlc291cmNlUGF0aFxuICAgICAgICAgKiBAc2VlIFBJWEkuU3ByaXRlc2hlZXRMb2FkZXIuZ2V0UmVzb3VyY2VQYXRoXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBnZXRSZXNvdXJjZVBhdGg6IHtcbiAgICAgICAgICAgIGdldCgpOiB0eXBlb2YgU3ByaXRlc2hlZXRMb2FkZXIuZ2V0UmVzb3VyY2VQYXRoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLmxvYWRlcnMuZ2V0UmVzb3VyY2VQYXRoIHByb3BlcnR5IGhhcyBtb3ZlZCB0byBQSVhJLlNwcml0ZXNoZWV0TG9hZGVyLmdldFJlc291cmNlUGF0aCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJWEkuU3ByaXRlc2hlZXRMb2FkZXIuZ2V0UmVzb3VyY2VQYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvbiBQSVhJLmxvYWRlcnMuTG9hZGVyLmFkZFBpeGlNaWRkbGV3YXJlXG4gICAgICogQHNlZSBQSVhJLkxvYWRlci5yZWdpc3RlclBsdWdpblxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWlkZGxld2FyZVxuICAgICAqL1xuICAgIFBJWEkuTG9hZGVyLmFkZFBpeGlNaWRkbGV3YXJlID0gZnVuY3Rpb24gYWRkUGl4aU1pZGRsZXdhcmUobWlkZGxld2FyZTogYW55KTogdHlwZW9mIExvYWRlclxuICAgIHtcbiAgICAgICAgZGVwcmVjYXRpb24odjUsXG4gICAgICAgICAgICAnUElYSS5sb2FkZXJzLkxvYWRlci5hZGRQaXhpTWlkZGxld2FyZSBmdW5jdGlvbiBpcyBkZXByZWNhdGVkLCB1c2UgUElYSS5sb2FkZXJzLkxvYWRlci5yZWdpc3RlclBsdWdpbidcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gUElYSS5sb2FkZXJzLkxvYWRlci5yZWdpc3RlclBsdWdpbih7IHVzZTogbWlkZGxld2FyZSgpIH0pO1xuICAgIH07XG5cbiAgICAvLyBjb252ZW5pZW5jZSBmb3IgY29udmVydGluZyBldmVudCBuYW1lIHRvIHNpZ25hbCBuYW1lXG4gICAgY29uc3QgZXZlbnRUb1NpZ25hbCA9IChldmVudDogYW55KTogc3RyaW5nID0+XG4gICAgICAgIGBvbiR7ZXZlbnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCl9JHtldmVudC5zbGljZSgxKX1gO1xuXG4gICAgT2JqZWN0LmFzc2lnbihQSVhJLkxvYWRlci5wcm90b3R5cGUsXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVXNlIHRoZSBjb3JyZXNwb25kaW5nIHNpZ25hbCwgZS5nLiwgZXZlbnQgYHN0YXJ0YGAgaXMgc2lnbmFsIGBvblN0YXJ0YC5cbiAgICAgICAgICAgICAqIEBtZXRob2QgUElYSS5Mb2FkZXIjb25cbiAgICAgICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uKGV2ZW50OiBhbnkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmFsID0gZXZlbnRUb1NpZ25hbChldmVudCk7XG5cbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgYFBJWEkuTG9hZGVyI29uIGlzIGNvbXBsZXRlbHkgZGVwcmVjYXRlZCwgdXNlIFBJWEkuTG9hZGVyIyR7c2lnbmFsfS5hZGRgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFVzZSB0aGUgY29ycmVzcG9uZGluZyBzaWduYWwsIGUuZy4sIGV2ZW50IGBzdGFydGBgIGlzIHNpZ25hbCBgb25TdGFydGAuXG4gICAgICAgICAgICAgKiBAbWV0aG9kIFBJWEkuTG9hZGVyI29uY2VcbiAgICAgICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uY2UoZXZlbnQ6IGFueSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduYWwgPSBldmVudFRvU2lnbmFsKGV2ZW50KTtcblxuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCBgUElYSS5Mb2FkZXIjb25jZSBpcyBjb21wbGV0ZWx5IGRlcHJlY2F0ZWQsIHVzZSBQSVhJLkxvYWRlciMke3NpZ25hbH0ub25jZWApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVXNlIHRoZSBjb3JyZXNwb25kaW5nIHNpZ25hbCwgZS5nLiwgZXZlbnQgYHN0YXJ0YGAgaXMgc2lnbmFsIGBvblN0YXJ0YC5cbiAgICAgICAgICAgICAqIEBtZXRob2QgUElYSS5Mb2FkZXIjb2ZmXG4gICAgICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvZmYoZXZlbnQ6IGFueSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduYWwgPSBldmVudFRvU2lnbmFsKGV2ZW50KTtcblxuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCBgUElYSS5Mb2FkZXIjb2ZmIGlzIGNvbXBsZXRlbHkgZGVwcmVjYXRlZCwgdXNlIFBJWEkuTG9hZGVyIyR7c2lnbmFsfS5kZXRhY2hgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIFBJWEkuZXh0cmFjdC5XZWJHTEV4dHJhY3RcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBzZWUgUElYSS5FeHRyYWN0XG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuZXh0cmFjdCwgJ1dlYkdMRXh0cmFjdCcsIHtcbiAgICAgICAgZ2V0KCk6IHR5cGVvZiBFeHRyYWN0XG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5leHRyYWN0LldlYkdMRXh0cmFjdCBtZXRob2QgaGFzIG1vdmVkIHRvIFBJWEkuRXh0cmFjdCcpO1xuXG4gICAgICAgICAgICByZXR1cm4gUElYSS5FeHRyYWN0O1xuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIFBJWEkucHJlcGFyZS5XZWJHTFByZXBhcmVcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBzZWUgUElYSS5QcmVwYXJlXG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkucHJlcGFyZSwgJ1dlYkdMUHJlcGFyZScsIHtcbiAgICAgICAgZ2V0KCk6IHR5cGVvZiBQcmVwYXJlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5wcmVwYXJlLldlYkdMUHJlcGFyZSBjbGFzcyBoYXMgbW92ZWQgdG8gUElYSS5QcmVwYXJlJyk7XG5cbiAgICAgICAgICAgIHJldHVybiBQSVhJLlByZXBhcmU7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIFBJWEkuQ29udGFpbmVyI19yZW5kZXJXZWJHTFxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgKiBAc2VlIFBJWEkuQ29udGFpbmVyI3JlbmRlclxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgSW5zdGFuY2Ugb2YgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBQSVhJLkNvbnRhaW5lci5wcm90b3R5cGUuX3JlbmRlcldlYkdMID0gZnVuY3Rpb24gX3JlbmRlcldlYkdMKHRoaXM6IENvbnRhaW5lciwgcmVuZGVyZXI6IFJlbmRlcmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLkNvbnRhaW5lci5fcmVuZGVyV2ViR0wgbWV0aG9kIGhhcyBtb3ZlZCB0byBQSVhJLkNvbnRhaW5lci5fcmVuZGVyJyk7XG5cbiAgICAgICAgdGhpcy5fcmVuZGVyKHJlbmRlcmVyKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBQSVhJLkNvbnRhaW5lciNyZW5kZXJXZWJHTFxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICogQHNlZSBQSVhJLkNvbnRhaW5lciNyZW5kZXJcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIEluc3RhbmNlIG9mIHJlbmRlcmVyXG4gICAgICovXG4gICAgUElYSS5Db250YWluZXIucHJvdG90eXBlLnJlbmRlcldlYkdMID0gZnVuY3Rpb24gcmVuZGVyV2ViR0wodGhpczogQ29udGFpbmVyLCByZW5kZXJlcjogUmVuZGVyZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuQ29udGFpbmVyLnJlbmRlcldlYkdMIG1ldGhvZCBoYXMgbW92ZWQgdG8gUElYSS5Db250YWluZXIucmVuZGVyJyk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXIocmVuZGVyZXIpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIFBJWEkuRGlzcGxheU9iamVjdCNyZW5kZXJXZWJHTFxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICogQHNlZSBQSVhJLkRpc3BsYXlPYmplY3QjcmVuZGVyXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciBJbnN0YW5jZSBvZiByZW5kZXJlclxuICAgICAqL1xuICAgIFBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUucmVuZGVyV2ViR0wgPSBmdW5jdGlvbiByZW5kZXJXZWJHTCh0aGlzOiBEaXNwbGF5T2JqZWN0LCByZW5kZXJlcjogUmVuZGVyZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuRGlzcGxheU9iamVjdC5yZW5kZXJXZWJHTCBtZXRob2QgaGFzIG1vdmVkIHRvIFBJWEkuRGlzcGxheU9iamVjdC5yZW5kZXInKTtcblxuICAgICAgICB0aGlzLnJlbmRlcihyZW5kZXJlcik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgUElYSS5Db250YWluZXIjcmVuZGVyQWR2YW5jZWRXZWJHTFxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICogQHNlZSBQSVhJLkNvbnRhaW5lciNyZW5kZXJBZHZhbmNlZFxuICAgICAqIEBwYXJhbSB7UElYSS5SZW5kZXJlcn0gcmVuZGVyZXIgSW5zdGFuY2Ugb2YgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBQSVhJLkNvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyQWR2YW5jZWRXZWJHTCA9IGZ1bmN0aW9uIHJlbmRlckFkdmFuY2VkV2ViR0wodGhpczogQ29udGFpbmVyLCByZW5kZXJlcjogUmVuZGVyZXIpOiB2b2lkXG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuQ29udGFpbmVyLnJlbmRlckFkdmFuY2VkV2ViR0wgbWV0aG9kIGhhcyBtb3ZlZCB0byBQSVhJLkNvbnRhaW5lci5yZW5kZXJBZHZhbmNlZCcpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQWR2YW5jZWQocmVuZGVyZXIpO1xuICAgIH07XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQSVhJLnNldHRpbmdzLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZhdWx0IHRyYW5zZm9ybSB0eXBlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqIEBtZW1iZXJvZiBQSVhJLnNldHRpbmdzXG4gICAgICAgICAqIEB0eXBlIHtQSVhJLlRSQU5TRk9STV9NT0RFfVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLlRSQU5TRk9STV9NT0RFLlNUQVRJQ1xuICAgICAgICAgKi9cbiAgICAgICAgVFJBTlNGT1JNX01PREU6IHtcbiAgICAgICAgICAgIGdldCgpOiBudW1iZXJcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuc2V0dGluZ3MuVFJBTlNGT1JNX01PREUgcHJvcGVydHkgaGFzIGJlZW4gcmVtb3ZlZCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KCk6IHZvaWRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuc2V0dGluZ3MuVFJBTlNGT1JNX01PREUgcHJvcGVydHkgaGFzIGJlZW4gcmVtb3ZlZCcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgQmFzZVRleHR1cmU6IEJhc2VUZXh0dXJlQW55IH0gPSBQSVhJO1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBsb2FkU291cmNlXG4gICAgICogQG1lbWJlcm9mIFBJWEkuQmFzZVRleHR1cmUjXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgKi9cbiAgICBCYXNlVGV4dHVyZUFueS5wcm90b3R5cGUubG9hZFNvdXJjZSA9IGZ1bmN0aW9uIGxvYWRTb3VyY2UoaW1hZ2U6IHN0cmluZyB8IEhUTUxJbWFnZUVsZW1lbnQpOiB2b2lkXG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuQmFzZVRleHR1cmUubG9hZFNvdXJjZSBtZXRob2QgaGFzIGJlZW4gZGVwcmVjYXRlZCcpO1xuXG4gICAgICAgIGNvbnN0IHJlc291cmNlID0gUElYSS5yZXNvdXJjZXMuYXV0b0RldGVjdFJlc291cmNlKGltYWdlKTtcblxuICAgICAgICByZXNvdXJjZS5pbnRlcm5hbCA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5zZXRSZXNvdXJjZShyZXNvdXJjZSk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfTtcblxuICAgIGxldCBiYXNlVGV4dHVyZUlkRGVwcmVjYXRpb24gPSBmYWxzZTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEJhc2VUZXh0dXJlQW55LnByb3RvdHlwZSwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG5hbWUgUElYSS5CYXNlVGV4dHVyZSNoYXNMb2FkZWRcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAc2VlIFBJWEkuQmFzZVRleHR1cmUjdmFsaWRcbiAgICAgICAgICovXG4gICAgICAgIGhhc0xvYWRlZDoge1xuICAgICAgICAgICAgZ2V0KCk6IGJvb2xlYW5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuQmFzZVRleHR1cmUuaGFzTG9hZGVkIHByb3BlcnR5IGhhcyBiZWVuIHJlbW92ZWQsIHVzZSBQSVhJLkJhc2VUZXh0dXJlLnZhbGlkJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWxpZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmFtZSBQSVhJLkJhc2VUZXh0dXJlI2ltYWdlVXJsXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqIEBzZWUgUElYSS5yZXNvdXJjZXMuSW1hZ2VSZXNvdXJjZSN1cmxcbiAgICAgICAgICovXG4gICAgICAgIGltYWdlVXJsOiB7XG4gICAgICAgICAgICBnZXQodGhpczogQmFzZVRleHR1cmUpOiBzdHJpbmdcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuQmFzZVRleHR1cmUuaW1hZ2VVcmwgcHJvcGVydHkgaGFzIGJlZW4gcmVtb3ZlZCwgdXNlIFBJWEkuQmFzZVRleHR1cmUucmVzb3VyY2UudXJsJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMucmVzb3VyY2UgYXMgcmVzb3VyY2VzLkltYWdlUmVzb3VyY2UpPy51cmw7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzZXQodGhpczogQmFzZVRleHR1cmUsIGltYWdlVXJsOiBzdHJpbmcpOiB2b2lkXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLkJhc2VUZXh0dXJlLmltYWdlVXJsIHByb3BlcnR5IGhhcyBiZWVuIHJlbW92ZWQsIHVzZSBQSVhJLkJhc2VUZXh0dXJlLnJlc291cmNlLnVybCcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzb3VyY2UpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAodGhpcy5yZXNvdXJjZSBhcyByZXNvdXJjZXMuSW1hZ2VSZXNvdXJjZSkudXJsID0gaW1hZ2VVcmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuYW1lIFBJWEkuQmFzZVRleHR1cmUjc291cmNlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8U1ZHRWxlbWVudH1cbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBzZWUgUElYSS5yZXNvdXJjZXMuQmFzZUltYWdlUmVzb3VyY2Ujc291cmNlXG4gICAgICAgICAqL1xuICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgIGdldCh0aGlzOiBCYXNlVGV4dHVyZSk6IEltYWdlU291cmNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLkJhc2VUZXh0dXJlLnNvdXJjZSBwcm9wZXJ0eSBoYXMgYmVlbiBtb3ZlZCwgdXNlIGBQSVhJLkJhc2VUZXh0dXJlLnJlc291cmNlLnNvdXJjZWAnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5yZXNvdXJjZSBhcyByZXNvdXJjZXMuQmFzZUltYWdlUmVzb3VyY2UpLnNvdXJjZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodGhpczogQmFzZVRleHR1cmUsIHNvdXJjZTogSW1hZ2VTb3VyY2UpOiB2b2lkXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLkJhc2VUZXh0dXJlLnNvdXJjZSBwcm9wZXJ0eSBoYXMgYmVlbiBtb3ZlZCwgdXNlIGBQSVhJLkJhc2VUZXh0dXJlLnJlc291cmNlLnNvdXJjZWAgJ1xuICAgICAgICAgICAgICAgICAgICArICdpZiB5b3Ugd2FudCB0byBzZXQgSFRNTENhbnZhc0VsZW1lbnQuIE90aGVyd2lzZSwgY3JlYXRlIG5ldyBCYXNlVGV4dHVyZS4nKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc291cmNlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMucmVzb3VyY2UgYXMgcmVzb3VyY2VzLkJhc2VJbWFnZVJlc291cmNlKS5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5hbWUgUElYSS5CYXNlVGV4dHVyZSNwcmVtdWx0aXBseUFscGhhXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjIuMFxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQHNlZSBQSVhJLkJhc2VUZXh0dXJlI2FscGhhTW9kZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJlbXVsdGlwbHlBbHBoYToge1xuICAgICAgICAgICAgZ2V0KHRoaXM6IEJhc2VUZXh0dXJlKTogYm9vbGVhblxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKCc1LjIuMCcsICdQSVhJLkJhc2VUZXh0dXJlLnByZW11bHRpcGx5QWxwaGEgcHJvcGVydHkgaGFzIGJlZW4gY2hhbmdlZCB0byBgYWxwaGFNb2RlYCdcbiAgICAgICAgICAgICAgICAgICAgKyAnLCBzZWUgYFBJWEkuQUxQSEFfTU9ERVNgJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbHBoYU1vZGUgIT09IDA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KHRoaXM6IEJhc2VUZXh0dXJlLCB2YWx1ZTogYm9vbGVhbik6IHZvaWRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbignNS4yLjAnLCAnUElYSS5CYXNlVGV4dHVyZS5wcmVtdWx0aXBseUFscGhhIHByb3BlcnR5IGhhcyBiZWVuIGNoYW5nZWQgdG8gYGFscGhhTW9kZWAnXG4gICAgICAgICAgICAgICAgICAgICsgJywgc2VlIGBQSVhJLkFMUEhBX01PREVTYCcpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hbHBoYU1vZGUgPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJhdGNoIGxvY2FsIGZpZWxkLCBzdG9yZXMgY3VycmVudCB0ZXh0dXJlIGxvY2F0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBuYW1lIFBJWEkuQmFzZVRleHR1cmUjX2lkXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMi4wXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBzZWUgUElYSS5CYXNlVGV4dHVyZSNfYmF0Y2hMb2NhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgX2lkOiB7XG4gICAgICAgICAgICBnZXQodGhpczogQmFzZVRleHR1cmUpOiBudW1iZXJcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2VUZXh0dXJlSWREZXByZWNhdGlvbilcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vICNwb3BlbHlzaGV2OiBUaGF0IHByb3BlcnR5IHdhcyBhIGhvdCBwbGFjZSwgSSBkb24ndCB3YW50IHRvIGNhbGwgZGVwcmVjYXRpb24gbWV0aG9kIG9uIGl0IGlmIHBvc3NpYmxlXG4gICAgICAgICAgICAgICAgICAgIGRlcHJlY2F0aW9uKCc1LjIuMCcsICdQSVhJLkJhc2VUZXh0dXJlLl9pZCBiYXRjaCBsb2NhbCBmaWVsZCBoYXMgYmVlbiBjaGFuZ2VkIHRvIGBfYmF0Y2hMb2NhdGlvbmAnKTtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVRleHR1cmVJZERlcHJlY2F0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYmF0Y2hMb2NhdGlvbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodGhpczogQmFzZVRleHR1cmUsIHZhbHVlOiBudW1iZXIpOiB2b2lkXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYmF0Y2hMb2NhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgZnJvbUltYWdlXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJvZiBQSVhJLkJhc2VUZXh0dXJlXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgKiBAc2VlIFBJWEkuQmFzZVRleHR1cmUuZnJvbVxuICAgICAqL1xuICAgIEJhc2VUZXh0dXJlQW55LmZyb21JbWFnZSA9IGZ1bmN0aW9uIGZyb21JbWFnZShcbiAgICAgICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCxcbiAgICAgICAgY3Jvc3NvcmlnaW46IHN0cmluZyB8IGJvb2xlYW4sXG4gICAgICAgIHNjYWxlTW9kZTogbnVtYmVyLFxuICAgICAgICBzY2FsZTogbnVtYmVyKTogQmFzZVRleHR1cmVcbiAgICB7XG4gICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5CYXNlVGV4dHVyZS5mcm9tSW1hZ2UgbWV0aG9kIGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggUElYSS5CYXNlVGV4dHVyZS5mcm9tJyk7XG5cbiAgICAgICAgY29uc3QgcmVzb3VyY2VPcHRpb25zID0geyBzY2FsZSwgY3Jvc3NvcmlnaW4gfTtcblxuICAgICAgICByZXR1cm4gQmFzZVRleHR1cmVBbnkuZnJvbShjYW52YXMsIHsgc2NhbGVNb2RlLCByZXNvdXJjZU9wdGlvbnMgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgZnJvbUNhbnZhc1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5CYXNlVGV4dHVyZVxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICogQHNlZSBQSVhJLkJhc2VUZXh0dXJlLmZyb21cbiAgICAgKi9cbiAgICBCYXNlVGV4dHVyZUFueS5mcm9tQ2FudmFzID0gZnVuY3Rpb24gZnJvbUNhbnZhcyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBzY2FsZU1vZGU6IG51bWJlcik6IEJhc2VUZXh0dXJlXG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuQmFzZVRleHR1cmUuZnJvbUNhbnZhcyBtZXRob2QgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCBQSVhJLkJhc2VUZXh0dXJlLmZyb20nKTtcblxuICAgICAgICByZXR1cm4gQmFzZVRleHR1cmVBbnkuZnJvbShjYW52YXMsIHsgc2NhbGVNb2RlIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGZyb21TVkdcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlcm9mIFBJWEkuQmFzZVRleHR1cmVcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBzZWUgUElYSS5CYXNlVGV4dHVyZS5mcm9tXG4gICAgICovXG4gICAgQmFzZVRleHR1cmVBbnkuZnJvbVNWRyA9IGZ1bmN0aW9uIGZyb21TVkcoXG4gICAgICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsXG4gICAgICAgIGNyb3Nzb3JpZ2luOiBzdHJpbmcgfCBib29sZWFuLFxuICAgICAgICBzY2FsZU1vZGU6IG51bWJlcixcbiAgICAgICAgc2NhbGU6IG51bWJlcik6IEJhc2VUZXh0dXJlXG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuQmFzZVRleHR1cmUuZnJvbVNWRyBtZXRob2QgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCBQSVhJLkJhc2VUZXh0dXJlLmZyb20nKTtcblxuICAgICAgICBjb25zdCByZXNvdXJjZU9wdGlvbnMgPSB7IHNjYWxlLCBjcm9zc29yaWdpbiB9O1xuXG4gICAgICAgIHJldHVybiBCYXNlVGV4dHVyZUFueS5mcm9tKGNhbnZhcywgeyBzY2FsZU1vZGUsIHJlc291cmNlT3B0aW9ucyB9KTtcbiAgICB9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUElYSS5yZXNvdXJjZXMuSW1hZ2VSZXNvdXJjZS5wcm90b3R5cGUsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuYW1lIFBJWEkucmVzb3VyY2VzLkltYWdlUmVzb3VyY2UjcHJlbXVsdGlwbHlBbHBoYVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4yLjBcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBzZWUgUElYSS5yZXNvdXJjZXMuSW1hZ2VSZXNvdXJjZSNhbHBoYU1vZGVcbiAgICAgICAgICovXG4gICAgICAgIHByZW11bHRpcGx5QWxwaGE6IHtcbiAgICAgICAgICAgIGdldCh0aGlzOiByZXNvdXJjZXMuSW1hZ2VSZXNvdXJjZSk6IGJvb2xlYW5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbignNS4yLjAnLCAnUElYSS5yZXNvdXJjZXMuSW1hZ2VSZXNvdXJjZS5wcmVtdWx0aXBseUFscGhhIHByb3BlcnR5ICdcbiAgICAgICAgICAgICAgICAgICAgKyAnaGFzIGJlZW4gY2hhbmdlZCB0byBgYWxwaGFNb2RlYCwgc2VlIGBQSVhJLkFMUEhBX01PREVTYCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxwaGFNb2RlICE9PSAwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCh0aGlzOiByZXNvdXJjZXMuSW1hZ2VSZXNvdXJjZSwgdmFsdWU6IGJvb2xlYW4pOiB2b2lkXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRpb24oJzUuMi4wJywgJ1BJWEkucmVzb3VyY2VzLkltYWdlUmVzb3VyY2UucHJlbXVsdGlwbHlBbHBoYSBwcm9wZXJ0eSAnXG4gICAgICAgICAgICAgICAgICAgICsgJ2hhcyBiZWVuIGNoYW5nZWQgdG8gYGFscGhhTW9kZWAsIHNlZSBgUElYSS5BTFBIQV9NT0RFU2AnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFscGhhTW9kZSA9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBQSVhJLlBvaW50I2NvcHlcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBzZWUgUElYSS5Qb2ludCNjb3B5RnJvbVxuICAgICAqL1xuICAgIFBJWEkuUG9pbnQucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5KHRoaXM6IFBvaW50LCBwOiBJUG9pbnQpOiBQb2ludFxuICAgIHtcbiAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLlBvaW50LmNvcHkgbWV0aG9kIGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggUElYSS5Qb2ludC5jb3B5RnJvbScpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNvcHlGcm9tKHApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIFBJWEkuT2JzZXJ2YWJsZVBvaW50I2NvcHlcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBzZWUgUElYSS5PYnNlcnZhYmxlUG9pbnQjY29weUZyb21cbiAgICAgKi9cbiAgICBQSVhJLk9ic2VydmFibGVQb2ludC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkodGhpczogT2JzZXJ2YWJsZVBvaW50LCBwOiBJUG9pbnQpOiBPYnNlcnZhYmxlUG9pbnRcbiAgICB7XG4gICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5PYnNlcnZhYmxlUG9pbnQuY29weSBtZXRob2QgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCBQSVhJLk9ic2VydmFibGVQb2ludC5jb3B5RnJvbScpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNvcHlGcm9tKHApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIFBJWEkuUmVjdGFuZ2xlI2NvcHlcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBzZWUgUElYSS5SZWN0YW5nbGUjY29weUZyb21cbiAgICAgKi9cbiAgICBQSVhJLlJlY3RhbmdsZS5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkodGhpczogUmVjdGFuZ2xlLCBwOiBSZWN0YW5nbGUpOiBSZWN0YW5nbGVcbiAgICB7XG4gICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5SZWN0YW5nbGUuY29weSBtZXRob2QgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCBQSVhJLlJlY3RhbmdsZS5jb3B5RnJvbScpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNvcHlGcm9tKHApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIFBJWEkuTWF0cml4I2NvcHlcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBzZWUgUElYSS5NYXRyaXgjY29weVRvXG4gICAgICovXG4gICAgUElYSS5NYXRyaXgucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5KHRoaXM6IE1hdHJpeCwgcDogTWF0cml4KTogTWF0cml4XG4gICAge1xuICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuTWF0cml4LmNvcHkgbWV0aG9kIGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggUElYSS5NYXRyaXguY29weVRvJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY29weVRvKHApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIFBJWEkuc3lzdGVtcy5TdGF0ZVN5c3RlbSNzZXRTdGF0ZVxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMS4wXG4gICAgICogQHNlZSBQSVhJLnN5c3RlbXMuU3RhdGVTeXN0ZW0jc2V0XG4gICAgICovXG4gICAgUElYSS5zeXN0ZW1zLlN0YXRlU3lzdGVtLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKHRoaXM6IHN5c3RlbXMuU3RhdGVTeXN0ZW0sIHM6IFN0YXRlKTogdm9pZFxuICAgIHtcbiAgICAgICAgZGVwcmVjYXRpb24oJ3Y1LjEuMCcsICdTdGF0ZVN5c3RlbS5zZXRTdGF0ZSBoYXMgYmVlbiByZW5hbWVkIHRvIFN0YXRlU3lzdGVtLnNldCcpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnNldChzKTtcbiAgICB9O1xuXG4gICAgT2JqZWN0LmFzc2lnbihQSVhJLnN5c3RlbXMuRmlsdGVyU3lzdGVtLnByb3RvdHlwZSwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCBQSVhJLkZpbHRlck1hbmFnZXIjZ2V0UmVuZGVyVGFyZ2V0XG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqIEBzZWUgUElYSS5zeXN0ZW1zLkZpbHRlclN5c3RlbSNnZXRGaWx0ZXJUZXh0dXJlXG4gICAgICAgICAqL1xuICAgICAgICBnZXRSZW5kZXJUYXJnZXQodGhpczogc3lzdGVtcy5GaWx0ZXJTeXN0ZW0sIF9jbGVhcjogYm9vbGVhbiwgcmVzb2x1dGlvbjogbnVtYmVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZXByZWNhdGlvbih2NSxcbiAgICAgICAgICAgICAgICAnUElYSS5GaWx0ZXJNYW5hZ2VyLmdldFJlbmRlclRhcmdldCBtZXRob2QgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCBQSVhJLnN5c3RlbXMuRmlsdGVyU3lzdGVtI2dldEZpbHRlclRleHR1cmUnXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWx0ZXJUZXh0dXJlKG51bGwsIHJlc29sdXRpb24pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWV0aG9kIFBJWEkuRmlsdGVyTWFuYWdlciNyZXR1cm5SZW5kZXJUYXJnZXRcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICogQHNlZSBQSVhJLnN5c3RlbXMuRmlsdGVyU3lzdGVtI3JldHVybkZpbHRlclRleHR1cmVcbiAgICAgICAgICovXG4gICAgICAgIHJldHVyblJlbmRlclRhcmdldCh0aGlzOiBzeXN0ZW1zLkZpbHRlclN5c3RlbSwgcmVuZGVyVGV4dHVyZTogYW55KVxuICAgICAgICB7XG4gICAgICAgICAgICBkZXByZWNhdGlvbih2NSxcbiAgICAgICAgICAgICAgICAnUElYSS5GaWx0ZXJNYW5hZ2VyLnJldHVyblJlbmRlclRhcmdldCBtZXRob2QgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCAnXG4gICAgICAgICAgICAgICAgKyAnUElYSS5zeXN0ZW1zLkZpbHRlclN5c3RlbS5yZXR1cm5GaWx0ZXJUZXh0dXJlJ1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5yZXR1cm5GaWx0ZXJUZXh0dXJlKHJlbmRlclRleHR1cmUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWV0aG9kIFBJWEkuc3lzdGVtcy5GaWx0ZXJTeXN0ZW0jY2FsY3VsYXRlU2NyZWVuU3BhY2VNYXRyaXhcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLk1hdHJpeH0gb3V0cHV0TWF0cml4IC0gdGhlIG1hdHJpeCB0byBvdXRwdXQgdG8uXG4gICAgICAgICAqIEByZXR1cm4ge1BJWEkuTWF0cml4fSBUaGUgbWFwcGVkIG1hdHJpeC5cbiAgICAgICAgICovXG4gICAgICAgIGNhbGN1bGF0ZVNjcmVlblNwYWNlTWF0cml4KHRoaXM6IHN5c3RlbXMuRmlsdGVyU3lzdGVtLCBvdXRwdXRNYXRyaXg6IGFueSlcbiAgICAgICAge1xuICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLnN5c3RlbXMuRmlsdGVyU3lzdGVtLmNhbGN1bGF0ZVNjcmVlblNwYWNlTWF0cml4IG1ldGhvZCBpcyByZW1vdmVkLCAnXG4gICAgICAgICAgICAgICAgKyAndXNlIGAodlRleHR1cmVDb29yZCAqIGlucHV0U2l6ZS54eSkgKyBvdXRwdXRGcmFtZS54eWAgaW5zdGVhZCcpO1xuXG4gICAgICAgICAgICBjb25zdCBtYXBwZWRNYXRyaXggPSBvdXRwdXRNYXRyaXguaWRlbnRpdHkoKTtcbiAgICAgICAgICAgIGNvbnN0IHsgc291cmNlRnJhbWUsIGRlc3RpbmF0aW9uRnJhbWUgfSA9IHRoaXMuYWN0aXZlU3RhdGU7XG5cbiAgICAgICAgICAgIG1hcHBlZE1hdHJpeC50cmFuc2xhdGUoc291cmNlRnJhbWUueCAvIGRlc3RpbmF0aW9uRnJhbWUud2lkdGgsIHNvdXJjZUZyYW1lLnkgLyBkZXN0aW5hdGlvbkZyYW1lLmhlaWdodCk7XG4gICAgICAgICAgICBtYXBwZWRNYXRyaXguc2NhbGUoZGVzdGluYXRpb25GcmFtZS53aWR0aCwgZGVzdGluYXRpb25GcmFtZS5oZWlnaHQpO1xuXG4gICAgICAgICAgICByZXR1cm4gbWFwcGVkTWF0cml4O1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWV0aG9kIFBJWEkuc3lzdGVtcy5GaWx0ZXJTeXN0ZW0jY2FsY3VsYXRlTm9ybWFsaXplZFNjcmVlblNwYWNlTWF0cml4XG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5NYXRyaXh9IG91dHB1dE1hdHJpeCAtIFRoZSBtYXRyaXggdG8gb3V0cHV0IHRvLlxuICAgICAgICAgKiBAcmV0dXJuIHtQSVhJLk1hdHJpeH0gVGhlIG1hcHBlZCBtYXRyaXguXG4gICAgICAgICAqL1xuICAgICAgICBjYWxjdWxhdGVOb3JtYWxpemVkU2NyZWVuU3BhY2VNYXRyaXgodGhpczogc3lzdGVtcy5GaWx0ZXJTeXN0ZW0sIG91dHB1dE1hdHJpeDogTWF0cml4KTogTWF0cml4XG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5zeXN0ZW1zLkZpbHRlck1hbmFnZXIuY2FsY3VsYXRlTm9ybWFsaXplZFNjcmVlblNwYWNlTWF0cml4IG1ldGhvZCBpcyByZW1vdmVkLCAnXG4gICAgICAgICAgICAgICAgKyAndXNlIGAoKHZUZXh0dXJlQ29vcmQgKiBpbnB1dFNpemUueHkpICsgb3V0cHV0RnJhbWUueHkpIC8gb3V0cHV0RnJhbWUuendgIGluc3RlYWQuJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgc291cmNlRnJhbWUsIGRlc3RpbmF0aW9uRnJhbWUgfSA9IHRoaXMuYWN0aXZlU3RhdGU7XG4gICAgICAgICAgICBjb25zdCBtYXBwZWRNYXRyaXggPSBvdXRwdXRNYXRyaXguaWRlbnRpdHkoKTtcblxuICAgICAgICAgICAgbWFwcGVkTWF0cml4LnRyYW5zbGF0ZShzb3VyY2VGcmFtZS54IC8gZGVzdGluYXRpb25GcmFtZS53aWR0aCwgc291cmNlRnJhbWUueSAvIGRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0KTtcblxuICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRlU2NhbGVYID0gKGRlc3RpbmF0aW9uRnJhbWUud2lkdGggLyBzb3VyY2VGcmFtZS53aWR0aCk7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2xhdGVTY2FsZVkgPSAoZGVzdGluYXRpb25GcmFtZS5oZWlnaHQgLyBzb3VyY2VGcmFtZS5oZWlnaHQpO1xuXG4gICAgICAgICAgICBtYXBwZWRNYXRyaXguc2NhbGUodHJhbnNsYXRlU2NhbGVYLCB0cmFuc2xhdGVTY2FsZVkpO1xuXG4gICAgICAgICAgICByZXR1cm4gbWFwcGVkTWF0cml4O1xuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZSwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG5hbWUgUElYSS5SZW5kZXJUZXh0dXJlI3NvdXJjZUZyYW1lXG4gICAgICAgICAqIEB0eXBlIHtQSVhJLlJlY3RhbmdsZX1cbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBzb3VyY2VGcmFtZToge1xuICAgICAgICAgICAgZ2V0KHRoaXM6IFJlbmRlclRleHR1cmUpOiBSZWN0YW5nbGVcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuUmVuZGVyVGV4dHVyZS5zb3VyY2VGcmFtZSBwcm9wZXJ0eSBoYXMgYmVlbiByZW1vdmVkJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJGcmFtZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmFtZSBQSVhJLlJlbmRlclRleHR1cmUjc2l6ZVxuICAgICAgICAgKiBAdHlwZSB7UElYSS5SZWN0YW5nbGV9XG4gICAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgc2l6ZToge1xuICAgICAgICAgICAgZ2V0KHRoaXM6IFJlbmRlclRleHR1cmUpOiBSZWN0YW5nbGVcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuUmVuZGVyVGV4dHVyZS5zaXplIHByb3BlcnR5IGhhcyBiZWVuIHJlbW92ZWQnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcmFtZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAY2xhc3MgQmx1clhGaWx0ZXJcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5maWx0ZXJzXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgKiBAc2VlIFBJWEkuZmlsdGVycy5CbHVyRmlsdGVyUGFzc1xuICAgICAqL1xuICAgIGNsYXNzIEJsdXJYRmlsdGVyIGV4dGVuZHMgUElYSS5maWx0ZXJzLkJsdXJGaWx0ZXJQYXNzXG4gICAge1xuICAgICAgICBjb25zdHJ1Y3RvcihzdHJlbmd0aDogbnVtYmVyLCBxdWFsaXR5OiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlciwga2VybmVsU2l6ZTogbnVtYmVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuZmlsdGVycy5CbHVyWEZpbHRlciBjbGFzcyBpcyBkZXByZWNhdGVkLCB1c2UgUElYSS5maWx0ZXJzLkJsdXJGaWx0ZXJQYXNzJyk7XG5cbiAgICAgICAgICAgIHN1cGVyKHRydWUsIHN0cmVuZ3RoLCBxdWFsaXR5LCByZXNvbHV0aW9uLCBrZXJuZWxTaXplKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBjbGFzcyBCbHVyWUZpbHRlclxuICAgICAqIEBtZW1iZXJvZiBQSVhJLmZpbHRlcnNcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBzZWUgUElYSS5maWx0ZXJzLkJsdXJGaWx0ZXJQYXNzXG4gICAgICovXG4gICAgY2xhc3MgQmx1cllGaWx0ZXIgZXh0ZW5kcyBQSVhJLmZpbHRlcnMuQmx1ckZpbHRlclBhc3NcbiAgICB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHN0cmVuZ3RoOiBudW1iZXIsIHF1YWxpdHk6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyLCBrZXJuZWxTaXplOiBudW1iZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5maWx0ZXJzLkJsdXJZRmlsdGVyIGNsYXNzIGlzIGRlcHJlY2F0ZWQsIHVzZSBQSVhJLmZpbHRlcnMuQmx1ckZpbHRlclBhc3MnKTtcblxuICAgICAgICAgICAgc3VwZXIoZmFsc2UsIHN0cmVuZ3RoLCBxdWFsaXR5LCByZXNvbHV0aW9uLCBrZXJuZWxTaXplKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24oUElYSS5maWx0ZXJzLCB7XG4gICAgICAgIEJsdXJYRmlsdGVyLFxuICAgICAgICBCbHVyWUZpbHRlcixcbiAgICB9KTtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgU3ByaXRlOiBTcHJpdGVBbnksXG4gICAgICAgIFRleHR1cmU6IFRleHR1cmVBbnksXG4gICAgICAgIEdyYXBoaWNzOiBHcmFwaGljc0FueSB9ID0gUElYSTtcblxuICAgIC8vIFN1cHBvcnQgZm9yIHBpeGkuanMtbGVnYWN5IGJpZnVyY2F0aW9uXG4gICAgLy8gZ2l2ZSB1c2VycyBhIGZyaWVuZGx5IGFzc2lzdCB0byB1c2UgbGVnYWN5XG4gICAgaWYgKCFHcmFwaGljc0FueS5wcm90b3R5cGUuZ2VuZXJhdGVDYW52YXNUZXh0dXJlKVxuICAgIHtcbiAgICAgICAgR3JhcGhpY3NBbnkucHJvdG90eXBlLmdlbmVyYXRlQ2FudmFzVGV4dHVyZSA9IGZ1bmN0aW9uIGdlbmVyYXRlQ2FudmFzVGV4dHVyZSgpOiB2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5HcmFwaGljcy5nZW5lcmF0ZUNhbnZhc1RleHR1cmUgbWV0aG9kIGlzIG9ubHkgYXZhaWxhYmxlIGluIFwicGl4aS5qcy1sZWdhY3lcIicpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICogQG1lbWJlciB7UElYSS5HcmFwaGljc30gUElYSS5HcmFwaGljcyNncmFwaGljc0RhdGFcbiAgICAgKiBAc2VlIFBJWEkuR3JhcGhpY3MjZ2VvbWV0cnlcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR3JhcGhpY3NBbnkucHJvdG90eXBlLCAnZ3JhcGhpY3NEYXRhJywge1xuICAgICAgICBnZXQodGhpczogR3JhcGhpY3MpOiBHcmFwaGljc0RhdGFbXVxuICAgICAgICB7XG4gICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkuR3JhcGhpY3MuZ3JhcGhpY3NEYXRhIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQsIHVzZSBQSVhJLkdyYXBoaWNzLmdlb21ldHJ5LmdyYXBoaWNzRGF0YScpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW9tZXRyeS5ncmFwaGljc0RhdGE7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBVc2UgdGhlc2UgdG8gZGVwcmVjYXRlIGFsbCB0aGUgU3ByaXRlIGZyb20qIG1ldGhvZHNcbiAgICBmdW5jdGlvbiBzcHJpdGVGcm9tKG5hbWU6IHN0cmluZywgc291cmNlOiBzdHJpbmcsIGNyb3Nzb3JpZ2luOiBzdHJpbmcgfCBib29sZWFuLCBzY2FsZU1vZGU6IG51bWJlcik6IFNwcml0ZVxuICAgIHtcbiAgICAgICAgZGVwcmVjYXRpb24odjUsIGBQSVhJLlNwcml0ZS4ke25hbWV9IG1ldGhvZCBpcyBkZXByZWNhdGVkLCB1c2UgUElYSS5TcHJpdGUuZnJvbWApO1xuXG4gICAgICAgIHJldHVybiBTcHJpdGVBbnkuZnJvbShzb3VyY2UsIHtcbiAgICAgICAgICAgIHJlc291cmNlT3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHNjYWxlOiBzY2FsZU1vZGUsXG4gICAgICAgICAgICAgICAgY3Jvc3NvcmlnaW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBzZWUgUElYSS5TcHJpdGUuZnJvbVxuICAgICAqIEBtZXRob2QgUElYSS5TcHJpdGUuZnJvbUltYWdlXG4gICAgICogQHJldHVybiB7UElYSS5TcHJpdGV9XG4gICAgICovXG4gICAgU3ByaXRlQW55LmZyb21JbWFnZSA9IHNwcml0ZUZyb20uYmluZChudWxsLCAnZnJvbUltYWdlJyk7XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBtZXRob2QgUElYSS5TcHJpdGUuZnJvbVNWR1xuICAgICAqIEBzZWUgUElYSS5TcHJpdGUuZnJvbVxuICAgICAqIEByZXR1cm4ge1BJWEkuU3ByaXRlfVxuICAgICAqL1xuICAgIFNwcml0ZUFueS5mcm9tU1ZHID0gc3ByaXRlRnJvbS5iaW5kKG51bGwsICdmcm9tU1ZHJyk7XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBtZXRob2QgUElYSS5TcHJpdGUuZnJvbUNhbnZhc1xuICAgICAqIEBzZWUgUElYSS5TcHJpdGUuZnJvbVxuICAgICAqIEByZXR1cm4ge1BJWEkuU3ByaXRlfVxuICAgICAqL1xuICAgIFNwcml0ZUFueS5mcm9tQ2FudmFzID0gc3ByaXRlRnJvbS5iaW5kKG51bGwsICdmcm9tQ2FudmFzJyk7XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBtZXRob2QgUElYSS5TcHJpdGUuZnJvbVZpZGVvXG4gICAgICogQHNlZSBQSVhJLlNwcml0ZS5mcm9tXG4gICAgICogQHJldHVybiB7UElYSS5TcHJpdGV9XG4gICAgICovXG4gICAgU3ByaXRlQW55LmZyb21WaWRlbyA9IHNwcml0ZUZyb20uYmluZChudWxsLCAnZnJvbVZpZGVvJyk7XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBtZXRob2QgUElYSS5TcHJpdGUuZnJvbUZyYW1lXG4gICAgICogQHNlZSBQSVhJLlNwcml0ZS5mcm9tXG4gICAgICogQHJldHVybiB7UElYSS5TcHJpdGV9XG4gICAgICovXG4gICAgU3ByaXRlQW55LmZyb21GcmFtZSA9IHNwcml0ZUZyb20uYmluZChudWxsLCAnZnJvbUZyYW1lJyk7XG5cbiAgICAvLyBVc2UgdGhlc2UgdG8gZGVwcmVjYXRlIGFsbCB0aGUgVGV4dHVyZSBmcm9tKiBtZXRob2RzXG4gICAgZnVuY3Rpb24gdGV4dHVyZUZyb20obmFtZTogc3RyaW5nLCBzb3VyY2U6IHN0cmluZywgY3Jvc3NvcmlnaW46IHN0cmluZyB8IGJvb2xlYW4sIHNjYWxlTW9kZTogbnVtYmVyKTogVGV4dHVyZVxuICAgIHtcbiAgICAgICAgZGVwcmVjYXRpb24odjUsIGBQSVhJLlRleHR1cmUuJHtuYW1lfSBtZXRob2QgaXMgZGVwcmVjYXRlZCwgdXNlIFBJWEkuVGV4dHVyZS5mcm9tYCk7XG5cbiAgICAgICAgcmV0dXJuIFRleHR1cmVBbnkuZnJvbShzb3VyY2UsIHtcbiAgICAgICAgICAgIHJlc291cmNlT3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHNjYWxlOiBzY2FsZU1vZGUsXG4gICAgICAgICAgICAgICAgY3Jvc3NvcmlnaW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBtZXRob2QgUElYSS5UZXh0dXJlLmZyb21JbWFnZVxuICAgICAqIEBzZWUgUElYSS5UZXh0dXJlLmZyb21cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlRleHR1cmV9XG4gICAgICovXG4gICAgVGV4dHVyZUFueS5mcm9tSW1hZ2UgPSB0ZXh0dXJlRnJvbS5iaW5kKG51bGwsICdmcm9tSW1hZ2UnKTtcblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICogQG1ldGhvZCBQSVhJLlRleHR1cmUuZnJvbVNWR1xuICAgICAqIEBzZWUgUElYSS5UZXh0dXJlLmZyb21cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlRleHR1cmV9XG4gICAgICovXG4gICAgVGV4dHVyZUFueS5mcm9tU1ZHID0gdGV4dHVyZUZyb20uYmluZChudWxsLCAnZnJvbVNWRycpO1xuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgKiBAbWV0aG9kIFBJWEkuVGV4dHVyZS5mcm9tQ2FudmFzXG4gICAgICogQHNlZSBQSVhJLlRleHR1cmUuZnJvbVxuICAgICAqIEByZXR1cm4ge1BJWEkuVGV4dHVyZX1cbiAgICAgKi9cbiAgICBUZXh0dXJlQW55LmZyb21DYW52YXMgPSB0ZXh0dXJlRnJvbS5iaW5kKG51bGwsICdmcm9tQ2FudmFzJyk7XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqIEBtZXRob2QgUElYSS5UZXh0dXJlLmZyb21WaWRlb1xuICAgICAqIEBzZWUgUElYSS5UZXh0dXJlLmZyb21cbiAgICAgKiBAcmV0dXJuIHtQSVhJLlRleHR1cmV9XG4gICAgICovXG4gICAgVGV4dHVyZUFueS5mcm9tVmlkZW8gPSB0ZXh0dXJlRnJvbS5iaW5kKG51bGwsICdmcm9tVmlkZW8nKTtcblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIDUuMC4wXG4gICAgICogQG1ldGhvZCBQSVhJLlRleHR1cmUuZnJvbUZyYW1lXG4gICAgICogQHNlZSBQSVhJLlRleHR1cmUuZnJvbVxuICAgICAqIEByZXR1cm4ge1BJWEkuVGV4dHVyZX1cbiAgICAgKi9cbiAgICBUZXh0dXJlQW55LmZyb21GcmFtZSA9IHRleHR1cmVGcm9tLmJpbmQobnVsbCwgJ2Zyb21GcmFtZScpO1xuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgKiBAbWVtYmVyIHtib29sZWFufSBQSVhJLkFic3RyYWN0UmVuZGVyZXIjYXV0b1Jlc2l6ZVxuICAgICAqIEBzZWUgUElYSS5BYnN0cmFjdFJlbmRlcmVyI2F1dG9EZW5zaXR5XG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuQWJzdHJhY3RSZW5kZXJlci5wcm90b3R5cGUsICdhdXRvUmVzaXplJywge1xuICAgICAgICBnZXQodGhpczogQWJzdHJhY3RSZW5kZXJlcik6IGJvb2xlYW5cbiAgICAgICAge1xuICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLkFic3RyYWN0UmVuZGVyZXIuYXV0b1Jlc2l6ZSBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkLCAnXG4gICAgICAgICAgICAgICAgKyAndXNlIFBJWEkuQWJzdHJhY3RSZW5kZXJlci5hdXRvRGVuc2l0eScpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdXRvRGVuc2l0eTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHRoaXM6IGFueSwgdmFsdWU6IGJvb2xlYW4pOiB2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS5BYnN0cmFjdFJlbmRlcmVyLmF1dG9SZXNpemUgcHJvcGVydHkgaXMgZGVwcmVjYXRlZCwgJ1xuICAgICAgICAgICAgICAgICsgJ3VzZSBQSVhJLkFic3RyYWN0UmVuZGVyZXIuYXV0b0RlbnNpdHknKTtcblxuICAgICAgICAgICAgdGhpcy5hdXRvRGVuc2l0eSA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgKiBAbWVtYmVyIHtQSVhJLnN5c3RlbXMuVGV4dHVyZVN5c3RlbX0gUElYSS5SZW5kZXJlciN0ZXh0dXJlTWFuYWdlclxuICAgICAqIEBzZWUgUElYSS5SZW5kZXJlciN0ZXh0dXJlXG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuUmVuZGVyZXIucHJvdG90eXBlLCAndGV4dHVyZU1hbmFnZXInLCB7XG4gICAgICAgIGdldCh0aGlzOiBSZW5kZXJlcilcbiAgICAgICAge1xuICAgICAgICAgICAgZGVwcmVjYXRpb24odjUsICdQSVhJLlJlbmRlcmVyLnRleHR1cmVNYW5hZ2VyIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQsIHVzZSBQSVhJLlJlbmRlcmVyLnRleHR1cmUnKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dHVyZTtcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2UgUElYSS51dGlscy5taXhpbnNcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAqL1xuICAgIFBJWEkudXRpbHMubWl4aW5zID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlcm9mIFBJWEkudXRpbHMubWl4aW5zXG4gICAgICAgICAqIEBmdW5jdGlvbiBtaXhpblxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgbWl4aW4oKTogdm9pZFxuICAgICAgICB7XG4gICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkudXRpbHMubWl4aW5zLm1peGluIGZ1bmN0aW9uIGlzIG5vIGxvbmdlciBhdmFpbGFibGUnKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXJvZiBQSVhJLnV0aWxzLm1peGluc1xuICAgICAgICAgKiBAZnVuY3Rpb24gZGVsYXlNaXhpblxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA1LjAuMFxuICAgICAgICAgKi9cbiAgICAgICAgZGVsYXlNaXhpbigpOiB2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uKHY1LCAnUElYSS51dGlscy5taXhpbnMuZGVsYXlNaXhpbiBmdW5jdGlvbiBpcyBubyBsb25nZXIgYXZhaWxhYmxlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyb2YgUElYSS51dGlscy5taXhpbnNcbiAgICAgICAgICogQGZ1bmN0aW9uIHBlcmZvcm1NaXhpbnNcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4wLjBcbiAgICAgICAgICovXG4gICAgICAgIHBlcmZvcm1NaXhpbnMoKTogdm9pZFxuICAgICAgICB7XG4gICAgICAgICAgICBkZXByZWNhdGlvbih2NSwgJ1BJWEkudXRpbHMubWl4aW5zLnBlcmZvcm1NaXhpbnMgZnVuY3Rpb24gaXMgbm8gbG9uZ2VyIGF2YWlsYWJsZScpO1xuICAgICAgICB9LFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUElYSS5CaXRtYXBUZXh0XG4gICAgICogQG1lbWJlciB7b2JqZWN0fSBmb250XG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgNS4zLjBcbiAgICAgKi9cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5CaXRtYXBUZXh0LnByb3RvdHlwZSwgJ2ZvbnQnLCB7XG4gICAgICAgIGdldCh0aGlzOiBCaXRtYXBUZXh0KTogYW55XG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uKCc1LjMuMCcsICdQSVhJLkJpdG1hcFRleHQuZm9udCBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkLCAnXG4gICAgICAgICAgICAgICAgKyAndXNlIGZvbnROYW1lLCBmb250U2l6ZSwgdGludCBvciBhbGlnbiBwcm9wZXJ0aWVzJyk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5fZm9udE5hbWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogdGhpcy5fZm9udFNpemUsXG4gICAgICAgICAgICAgICAgdGludDogdGhpcy5fdGludCxcbiAgICAgICAgICAgICAgICBhbGlnbjogdGhpcy5fYWxpZ24sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBzZXQodGhpczogQml0bWFwVGV4dCwgdmFsdWU6IGFueSlcbiAgICAgICAge1xuICAgICAgICAgICAgZGVwcmVjYXRpb24oJzUuMy4wJywgJ1BJWEkuQml0bWFwVGV4dC5mb250IHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQsICdcbiAgICAgICAgICAgICAgICArICd1c2UgZm9udE5hbWUsIGZvbnRTaXplLCB0aW50IG9yIGFsaWduIHByb3BlcnRpZXMnKTtcblxuICAgICAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHN0eWxlOiBhbnkgPSB7IGZvbnQ6IHZhbHVlIH07XG5cbiAgICAgICAgICAgIHRoaXMuX3VwZ3JhZGVTdHlsZShzdHlsZSk7XG5cbiAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gc3R5bGUuZm9udFNpemUgfHwgUElYSS5CaXRtYXBGb250LmF2YWlsYWJsZVtzdHlsZS5mb250TmFtZV0uc2l6ZTtcblxuICAgICAgICAgICAgdGhpcy5fZm9udE5hbWUgPSBzdHlsZS5mb250TmFtZTtcbiAgICAgICAgICAgIHRoaXMuX2ZvbnRTaXplID0gc3R5bGUuZm9udFNpemU7XG5cbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuIiwgImltcG9ydCAnQHBpeGkvcG9seWZpbGwnO1xuXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICdAcGl4aS91dGlscyc7XG5pbXBvcnQgeyBBY2Nlc3NpYmlsaXR5TWFuYWdlciB9IGZyb20gJ0BwaXhpL2FjY2Vzc2liaWxpdHknO1xuaW1wb3J0IHsgSW50ZXJhY3Rpb25NYW5hZ2VyIH0gZnJvbSAnQHBpeGkvaW50ZXJhY3Rpb24nO1xuaW1wb3J0IHsgQXBwbGljYXRpb24gfSBmcm9tICdAcGl4aS9hcHAnO1xuaW1wb3J0IHsgUmVuZGVyZXIsIEJhdGNoUmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB7IEV4dHJhY3QgfSBmcm9tICdAcGl4aS9leHRyYWN0JztcbmltcG9ydCB7IExvYWRlciwgQXBwTG9hZGVyUGx1Z2luIH0gZnJvbSAnQHBpeGkvbG9hZGVycyc7XG5pbXBvcnQgeyBQYXJ0aWNsZVJlbmRlcmVyIH0gZnJvbSAnQHBpeGkvcGFydGljbGVzJztcbmltcG9ydCB7IFByZXBhcmUgfSBmcm9tICdAcGl4aS9wcmVwYXJlJztcbmltcG9ydCB7IFNwcml0ZXNoZWV0TG9hZGVyIH0gZnJvbSAnQHBpeGkvc3ByaXRlc2hlZXQnO1xuaW1wb3J0IHsgVGlsaW5nU3ByaXRlUmVuZGVyZXIgfSBmcm9tICdAcGl4aS9zcHJpdGUtdGlsaW5nJztcbmltcG9ydCB7IEJpdG1hcEZvbnRMb2FkZXIgfSBmcm9tICdAcGl4aS90ZXh0LWJpdG1hcCc7XG5pbXBvcnQgeyBUaWNrZXJQbHVnaW4gfSBmcm9tICdAcGl4aS90aWNrZXInO1xuaW1wb3J0IHsgQWxwaGFGaWx0ZXIgfSBmcm9tICdAcGl4aS9maWx0ZXItYWxwaGEnO1xuaW1wb3J0IHsgQmx1ckZpbHRlciwgQmx1ckZpbHRlclBhc3MgfSBmcm9tICdAcGl4aS9maWx0ZXItYmx1cic7XG5pbXBvcnQgeyBDb2xvck1hdHJpeEZpbHRlciB9IGZyb20gJ0BwaXhpL2ZpbHRlci1jb2xvci1tYXRyaXgnO1xuaW1wb3J0IHsgRGlzcGxhY2VtZW50RmlsdGVyIH0gZnJvbSAnQHBpeGkvZmlsdGVyLWRpc3BsYWNlbWVudCc7XG5pbXBvcnQgeyBGWEFBRmlsdGVyIH0gZnJvbSAnQHBpeGkvZmlsdGVyLWZ4YWEnO1xuaW1wb3J0IHsgTm9pc2VGaWx0ZXIgfSBmcm9tICdAcGl4aS9maWx0ZXItbm9pc2UnO1xuaW1wb3J0ICdAcGl4aS9taXhpbi1jYWNoZS1hcy1iaXRtYXAnO1xuaW1wb3J0ICdAcGl4aS9taXhpbi1nZXQtY2hpbGQtYnktbmFtZSc7XG5pbXBvcnQgJ0BwaXhpL21peGluLWdldC1nbG9iYWwtcG9zaXRpb24nO1xuXG4vLyBFeHBvcnQgZGVwcmVjYXRpb25zIHNvIFJvbGx1cCBjYW4gY2FsbCBpdFxuLy8gaW4gdGhlIGZvb3RlciBhZnRlciBnbG9iYWwgaXMgZGVmaW5lZFxuLy8gb3RoZXIgbW9kdWxlIG11c3QgY2FsbCB0aGlzIG1hbnVhbGx5XG5pbXBvcnQgeyB1c2VEZXByZWNhdGVkIH0gZnJvbSAnLi91c2VEZXByZWNhdGVkJztcblxuLy8gSW5zdGFsbCByZW5kZXJlciBwbHVnaW5zXG5SZW5kZXJlci5yZWdpc3RlclBsdWdpbignYWNjZXNzaWJpbGl0eScsIEFjY2Vzc2liaWxpdHlNYW5hZ2VyKTtcblJlbmRlcmVyLnJlZ2lzdGVyUGx1Z2luKCdleHRyYWN0JywgRXh0cmFjdCk7XG5SZW5kZXJlci5yZWdpc3RlclBsdWdpbignaW50ZXJhY3Rpb24nLCBJbnRlcmFjdGlvbk1hbmFnZXIpO1xuUmVuZGVyZXIucmVnaXN0ZXJQbHVnaW4oJ3BhcnRpY2xlJywgUGFydGljbGVSZW5kZXJlcik7XG5SZW5kZXJlci5yZWdpc3RlclBsdWdpbigncHJlcGFyZScsIFByZXBhcmUpO1xuUmVuZGVyZXIucmVnaXN0ZXJQbHVnaW4oJ2JhdGNoJywgQmF0Y2hSZW5kZXJlcik7XG5SZW5kZXJlci5yZWdpc3RlclBsdWdpbigndGlsaW5nU3ByaXRlJywgVGlsaW5nU3ByaXRlUmVuZGVyZXIpO1xuXG5Mb2FkZXIucmVnaXN0ZXJQbHVnaW4oQml0bWFwRm9udExvYWRlcik7XG5Mb2FkZXIucmVnaXN0ZXJQbHVnaW4oU3ByaXRlc2hlZXRMb2FkZXIpO1xuXG5BcHBsaWNhdGlvbi5yZWdpc3RlclBsdWdpbihUaWNrZXJQbHVnaW4pO1xuQXBwbGljYXRpb24ucmVnaXN0ZXJQbHVnaW4oQXBwTG9hZGVyUGx1Z2luKTtcblxuLyoqXG4gKiBTdHJpbmcgb2YgdGhlIGN1cnJlbnQgUElYSSB2ZXJzaW9uLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdGFudFxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBuYW1lIFZFUlNJT05cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBWRVJTSU9OID0gJ19fVkVSU0lPTl9fJztcblxuLyoqXG4gKiBAbmFtZXNwYWNlIFBJWElcbiAqL1xuXG4vKipcbiAqIFRoaXMgbmFtZXNwYWNlIGNvbnRhaW5zIFdlYkdMLW9ubHkgZGlzcGxheSBmaWx0ZXJzIHRoYXQgY2FuIGJlIGFwcGxpZWRcbiAqIHRvIERpc3BsYXlPYmplY3RzIHVzaW5nIHRoZSB7QGxpbmsgUElYSS5EaXNwbGF5T2JqZWN0I2ZpbHRlcnMgZmlsdGVyc30gcHJvcGVydHkuXG4gKlxuICogU2luY2UgUGl4aUpTIG9ubHkgaGFkIGEgaGFuZGZ1bCBvZiBidWlsdC1pbiBmaWx0ZXJzLCBhZGRpdGlvbmFsIGZpbHRlcnNcbiAqIGNhbiBiZSBkb3dubG9hZGVkIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vcGl4aWpzL3BpeGktZmlsdGVycyBoZXJlfSBmcm9tIHRoZVxuICogUGl4aUpTIEZpbHRlcnMgcmVwb3NpdG9yeS5cbiAqXG4gKiBBbGwgZmlsdGVycyBtdXN0IGV4dGVuZCB7QGxpbmsgUElYSS5GaWx0ZXJ9LlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDcmVhdGUgYSBuZXcgYXBwbGljYXRpb25cbiAqIGNvbnN0IGFwcCA9IG5ldyBQSVhJLkFwcGxpY2F0aW9uKCk7XG4gKlxuICogLy8gRHJhdyBhIGdyZWVuIHJlY3RhbmdsZVxuICogY29uc3QgcmVjdCA9IG5ldyBQSVhJLkdyYXBoaWNzKClcbiAqICAgICAuYmVnaW5GaWxsKDB4MDBmZjAwKVxuICogICAgIC5kcmF3UmVjdCg0MCwgNDAsIDIwMCwgMjAwKTtcbiAqXG4gKiAvLyBBZGQgYSBibHVyIGZpbHRlclxuICogcmVjdC5maWx0ZXJzID0gW25ldyBQSVhJLmZpbHRlcnMuQmx1ckZpbHRlcigpXTtcbiAqXG4gKiAvLyBEaXNwbGF5IHJlY3RhbmdsZVxuICogYXBwLnN0YWdlLmFkZENoaWxkKHJlY3QpO1xuICogZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhcHAudmlldyk7XG4gKiBAbmFtZXNwYWNlIFBJWEkuZmlsdGVyc1xuICovXG5leHBvcnQgY29uc3QgZmlsdGVycyA9IHtcbiAgICBBbHBoYUZpbHRlcixcbiAgICBCbHVyRmlsdGVyLFxuICAgIEJsdXJGaWx0ZXJQYXNzLFxuICAgIENvbG9yTWF0cml4RmlsdGVyLFxuICAgIERpc3BsYWNlbWVudEZpbHRlcixcbiAgICBGWEFBRmlsdGVyLFxuICAgIE5vaXNlRmlsdGVyLFxufTtcblxuLy8gRXhwb3J0IEVTIGZvciB0aG9zZSBpbXBvcnRpbmcgc3BlY2lmaWNhbGx5IGJ5IG5hbWUsXG5leHBvcnQgKiBmcm9tICdAcGl4aS9hY2Nlc3NpYmlsaXR5JztcbmV4cG9ydCAqIGZyb20gJ0BwaXhpL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuZXhwb3J0ICogZnJvbSAnQHBpeGkvY29yZSc7XG5leHBvcnQgKiBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmV4cG9ydCAqIGZyb20gJ0BwaXhpL2V4dHJhY3QnO1xuZXhwb3J0ICogZnJvbSAnQHBpeGkvZ3JhcGhpY3MnO1xuZXhwb3J0ICogZnJvbSAnQHBpeGkvbG9hZGVycyc7XG5leHBvcnQgKiBmcm9tICdAcGl4aS9pbnRlcmFjdGlvbic7XG5leHBvcnQgKiBmcm9tICdAcGl4aS9tYXRoJztcbmV4cG9ydCAqIGZyb20gJ0BwaXhpL21lc2gnO1xuZXhwb3J0ICogZnJvbSAnQHBpeGkvbWVzaC1leHRyYXMnO1xuZXhwb3J0ICogZnJvbSAnQHBpeGkvcGFydGljbGVzJztcbmV4cG9ydCAqIGZyb20gJ0BwaXhpL3ByZXBhcmUnO1xuZXhwb3J0ICogZnJvbSAnQHBpeGkvcnVubmVyJztcbmV4cG9ydCAqIGZyb20gJ0BwaXhpL3Nwcml0ZSc7XG5leHBvcnQgKiBmcm9tICdAcGl4aS9zcHJpdGVzaGVldCc7XG5leHBvcnQgKiBmcm9tICdAcGl4aS9zcHJpdGUtYW5pbWF0ZWQnO1xuZXhwb3J0ICogZnJvbSAnQHBpeGkvc3ByaXRlLXRpbGluZyc7XG5leHBvcnQgKiBmcm9tICdAcGl4aS90ZXh0JztcbmV4cG9ydCAqIGZyb20gJ0BwaXhpL3RleHQtYml0bWFwJztcbmV4cG9ydCAqIGZyb20gJ0BwaXhpL3RpY2tlcic7XG5leHBvcnQgKiBmcm9tICdAcGl4aS9zZXR0aW5ncyc7XG5leHBvcnQge1xuICAgIHV0aWxzLFxuICAgIHVzZURlcHJlY2F0ZWQsXG59O1xuIiwgImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5cbmV4cG9ydCBjb25zdCBrZXlzID0gbmV3IFNldDxLZXk+KCk7XG5leHBvcnQgdHlwZSBLZXlFdmVudCA9ICd1cCcgfCAnZG93bicgfCAna2V5cHJlc3NlZCc7XG5cbmNsYXNzIEtleSBleHRlbmRzIFBJWEkudXRpbHMuRXZlbnRFbWl0dGVyIHtcblx0cHJpdmF0ZSBfcHJlc3NlZEF0OiBudW1iZXIgPSAwO1xuXG5cdGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBpZDogc3RyaW5nIHwgbnVtYmVyKSB7XG5cdFx0c3VwZXIoKTtcblx0XHRrZXlzLmFkZCh0aGlzKTtcblx0fVxuXG5cdHByaXZhdGUgX2lzUHJlc3NlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG5cdGdldCBpc1ByZXNzZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2lzUHJlc3NlZDtcblx0fVxuXG5cdGdldCBkdXJhdGlvbigpOiBudW1iZXIge1xuXHRcdGlmICghdGhpcy5faXNQcmVzc2VkKSByZXR1cm4gMDtcblx0XHRyZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMuX3ByZXNzZWRBdDtcblx0fVxuXG5cdGhhbmRsZShldmVudDogS2V5Ym9hcmRFdmVudCwgYWN0aW9uOiBLZXlFdmVudCkge1xuXHRcdHRoaXMuZW1pdChhY3Rpb24sIGV2ZW50LCB0aGlzLmR1cmF0aW9uKTtcblx0XHRpZiAoYWN0aW9uID09PSAnZG93bicgfHwgYWN0aW9uID09PSAna2V5cHJlc3NlZCcpIHtcblx0XHRcdHRoaXMuX2lzUHJlc3NlZCA9IHRydWU7XG5cdFx0XHR0aGlzLl9wcmVzc2VkQXQgPSBEYXRlLm5vdygpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9pc1ByZXNzZWQgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRvbihldmVudDogS2V5RXZlbnQsIGZuOiAoZXZlbnQ/OiBLZXlib2FyZEV2ZW50LCBkdXJhdGlvbj86IG51bWJlcikgPT4gdW5rbm93biwgY29udGV4dD86IGFueSk6IHRoaXMge1xuXHRcdHN1cGVyLm9uKGV2ZW50LCBmbiwgY29udGV4dCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRvbmNlKGV2ZW50OiBLZXlFdmVudCwgZm46IChldmVudE46IEtleWJvYXJkRXZlbnQsIGR1cmF0aW9uTjogbnVtYmVyKSA9PiB1bmtub3duLCBjb250ZXh0PzogYW55KTogdGhpcyB7XG5cdFx0c3VwZXIub25jZShldmVudCwgZm4sIGNvbnRleHQpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0aXNNaW5lRXZlbnQoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcblx0XHRpZiAodHlwZW9mIHRoaXMuaWQgPT09ICdzdHJpbmcnKSByZXR1cm4gZXZlbnQua2V5ID09PSB0aGlzLmlkO1xuXHRcdHJldHVybiBldmVudC5rZXlDb2RlID09PSB0aGlzLmlkO1xuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBRID0gbmV3IEtleSgncScpO1xuZXhwb3J0IGNvbnN0IEQgPSBuZXcgS2V5KCdkJyk7XG5leHBvcnQgY29uc3QgdXAgPSBuZXcgS2V5KCdBcnJvd1VwJyk7XG5leHBvcnQgY29uc3QgbGVmdCA9IG5ldyBLZXkoJ0Fycm93TGVmdCcpO1xuZXhwb3J0IGNvbnN0IHJpZ2h0ID0gbmV3IEtleSgnQXJyb3dSaWdodCcpO1xuZXhwb3J0IGNvbnN0IGRvd24gPSBuZXcgS2V5KCdBcnJvd0Rvd24nKTtcbmV4cG9ydCBjb25zdCBzcGFjZSA9IG5ldyBLZXkoJyAnKTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHtcblx0a2V5cy5mb3JFYWNoKGtleSA9PiB7XG5cdFx0aWYgKGtleS5pc01pbmVFdmVudChldmVudCkpIGtleS5oYW5kbGUoZXZlbnQsICdkb3duJyk7XG5cdH0pO1xufSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZXZlbnQgPT4ge1xuXHRrZXlzLmZvckVhY2goa2V5ID0+IHtcblx0XHRpZiAoa2V5LmlzTWluZUV2ZW50KGV2ZW50KSkga2V5LmhhbmRsZShldmVudCwgJ3VwJyk7XG5cdH0pO1xufSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZXZlbnQgPT4ge1xuXHRrZXlzLmZvckVhY2goa2V5ID0+IHtcblx0XHRpZiAoa2V5LmlzTWluZUV2ZW50KGV2ZW50KSkga2V5LmhhbmRsZShldmVudCwgJ2tleXByZXNzZWQnKTtcblx0fSk7XG59KTtcbiIsICJpbXBvcnQgKiBhcyBQSVhJIGZyb20gJ3BpeGkuanMnO1xuXG5leHBvcnQgdHlwZSBUb3VjaGluZ1dhbGxTaWRlID0gJ3RvcCcgfCAnYm90dG9tJyB8ICdsZWZ0JyB8ICdyaWdodCc7XG5cbmV4cG9ydCBjbGFzcyBSZWN0YW5nbGUgZXh0ZW5kcyBQSVhJLlJlY3RhbmdsZSB7XG5cdHB1YmxpYyBoYWxmV2lkdGg6IG51bWJlcjtcblx0cHVibGljIGhhbGZIZWlnaHQ6IG51bWJlcjtcblx0cHVibGljIHhBbmNob3JPZmZzZXQ6IG51bWJlcjtcblx0cHVibGljIHlBbmNob3JPZmZzZXQ6IG51bWJlcjtcblx0cHVibGljIGFuY2hvcjogUElYSS5PYnNlcnZhYmxlUG9pbnQ7XG5cblx0Y29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBhbmNob3I/OiBQSVhJLk9ic2VydmFibGVQb2ludCkge1xuXHRcdHN1cGVyKHgsIHksIHdpZHRoLCBoZWlnaHQpO1xuXHRcdHRoaXMuYW5jaG9yID0gYW5jaG9yID8/IG5ldyBQSVhJLlBvaW50KCk7XG5cdFx0dGhpcy5oYWxmV2lkdGggPSB3aWR0aCAvIDI7XG5cdFx0dGhpcy5oYWxmSGVpZ2h0ID0gaGVpZ2h0IC8gMjtcblx0XHR0aGlzLnhBbmNob3JPZmZzZXQgPSB0aGlzLndpZHRoICogdGhpcy5hbmNob3IueDtcblx0XHR0aGlzLnlBbmNob3JPZmZzZXQgPSB0aGlzLmhlaWdodCAqIHRoaXMuYW5jaG9yLnk7XG5cdH1cblxuXHRzdGF0aWMgZnJvbVNwcml0ZShzcHJpdGU6IFBJWEkuRGlzcGxheU9iamVjdCkge1xuXHRcdHJldHVybiBuZXcgUmVjdGFuZ2xlKHNwcml0ZS54LCBzcHJpdGUueSwgc3ByaXRlLmdldEJvdW5kcygpLndpZHRoLCBzcHJpdGUuZ2V0Qm91bmRzKCkuaGVpZ2h0KTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZWN0YW5nbGVDb2xsYXBzZShyZWN0YW5nbGUxOiBQSVhJLkRpc3BsYXlPYmplY3QgfCBSZWN0YW5nbGUsIHJlY3RhbmdsZTI6IFBJWEkuRGlzcGxheU9iamVjdCB8IFJlY3RhbmdsZSk6IGJvb2xlYW4ge1xuXHRjb25zdCByZWN0MSA9IHJlY3RhbmdsZTEgaW5zdGFuY2VvZiBQSVhJLlJlY3RhbmdsZSA/IHJlY3RhbmdsZTEgOiBSZWN0YW5nbGUuZnJvbVNwcml0ZShyZWN0YW5nbGUxKTtcblx0Y29uc3QgcmVjdDIgPSByZWN0YW5nbGUyIGluc3RhbmNlb2YgUElYSS5SZWN0YW5nbGUgPyByZWN0YW5nbGUyIDogUmVjdGFuZ2xlLmZyb21TcHJpdGUocmVjdGFuZ2xlMik7XG5cblx0cmV0dXJuIHJlY3QxLnggPCByZWN0Mi54ICsgcmVjdDIud2lkdGggJiYgcmVjdDEueCArIHJlY3QxLndpZHRoID4gcmVjdDIueCAmJiByZWN0MS55IDwgcmVjdDIueSArIHJlY3QyLmhlaWdodCAmJiByZWN0MS5oZWlnaHQgKyByZWN0MS55ID4gcmVjdDIueTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlQmV0d2VlblR3b1BvaW50cyhwMTogUElYSS5JUG9pbnREYXRhLCBwMjogUElYSS5JUG9pbnREYXRhKTogbnVtYmVyIHtcblx0Y29uc3QgYSA9IHAxLnggLSBwMi54O1xuXHRjb25zdCBiID0gcDEueSAtIHAyLnk7XG5cblx0cmV0dXJuIE1hdGguaHlwb3QoYSwgYik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYW5hZ2VSZWN0YW5nbGVDb2xsaXNpb25zKHJlY3RhbmdsZTE6IFBJWEkuRGlzcGxheU9iamVjdCwgcmVjdGFuZ2xlMjogUElYSS5EaXNwbGF5T2JqZWN0KTogVG91Y2hpbmdXYWxsU2lkZSB7XG5cdGNvbnN0IHJlY3QxID0gUmVjdGFuZ2xlLmZyb21TcHJpdGUocmVjdGFuZ2xlMSk7XG5cdGNvbnN0IHJlY3QyID0gUmVjdGFuZ2xlLmZyb21TcHJpdGUocmVjdGFuZ2xlMik7XG5cdGNvbnN0IHZ4ID0gcmVjdDEueCArIE1hdGguYWJzKHJlY3QxLmhhbGZXaWR0aCkgLSByZWN0MS54QW5jaG9yT2Zmc2V0IC0gKHJlY3QyLnggKyBNYXRoLmFicyhyZWN0Mi5oYWxmV2lkdGgpIC0gcmVjdDIueEFuY2hvck9mZnNldCk7XG5cdGNvbnN0IHZ5ID0gcmVjdDEueSArIE1hdGguYWJzKHJlY3QxLmhhbGZIZWlnaHQpIC0gcmVjdDEueUFuY2hvck9mZnNldCAtIChyZWN0Mi55ICsgTWF0aC5hYnMocmVjdDIuaGFsZkhlaWdodCkgLSByZWN0Mi55QW5jaG9yT2Zmc2V0KTtcblx0Y29uc3QgY29tYmluZWRIYWxmV2lkdGhzID0gTWF0aC5hYnMocmVjdDEuaGFsZldpZHRoKSArIE1hdGguYWJzKHJlY3QyLmhhbGZXaWR0aCk7XG5cdGNvbnN0IGNvbWJpbmVkSGFsZkhlaWdodHMgPSBNYXRoLmFicyhyZWN0MS5oYWxmSGVpZ2h0KSArIE1hdGguYWJzKHJlY3QyLmhhbGZIZWlnaHQpO1xuXHRsZXQgY29sbGlzaW9uLCBvdmVybGFwWCwgb3ZlcmxhcFk7XG5cblx0aWYgKE1hdGguYWJzKHZ4KSA8IGNvbWJpbmVkSGFsZldpZHRocykge1xuXHRcdGlmIChNYXRoLmFicyh2eSkgPCBjb21iaW5lZEhhbGZIZWlnaHRzKSB7XG5cdFx0XHRvdmVybGFwWCA9IGNvbWJpbmVkSGFsZldpZHRocyAtIE1hdGguYWJzKHZ4KTtcblx0XHRcdG92ZXJsYXBZID0gY29tYmluZWRIYWxmSGVpZ2h0cyAtIE1hdGguYWJzKHZ5KTtcblxuXHRcdFx0aWYgKG92ZXJsYXBYID49IG92ZXJsYXBZKSB7XG5cdFx0XHRcdGlmICh2eSA+IDApIHtcblx0XHRcdFx0XHRjb2xsaXNpb24gPSAndG9wJztcblx0XHRcdFx0XHRyZWN0MS55ID0gcmVjdDEueSArIG92ZXJsYXBZO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbGxpc2lvbiA9ICdib3R0b20nO1xuXHRcdFx0XHRcdHJlY3QxLnkgPSByZWN0MS55IC0gb3ZlcmxhcFk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICh2eCA+IDApIHtcblx0XHRcdFx0XHRjb2xsaXNpb24gPSAnbGVmdCc7XG5cdFx0XHRcdFx0cmVjdDEueCA9IHJlY3QxLnggKyBvdmVybGFwWDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb2xsaXNpb24gPSAncmlnaHQnO1xuXHRcdFx0XHRcdHJlY3QxLnggPSByZWN0MS54IC0gb3ZlcmxhcFg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY29sbGlzaW9uO1xufVxuIiwgImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBhY3R1YWxTY2VuZSB9IGZyb20gJy4uL2FwcC5qcyc7XG5pbXBvcnQgeyBpc1JlY3RhbmdsZUNvbGxhcHNlLCBtYW5hZ2VSZWN0YW5nbGVDb2xsaXNpb25zLCBUb3VjaGluZ1dhbGxTaWRlIH0gZnJvbSAnLi4vdXRpbHMvY29sbGlzaW9uc1V0aWxzLmpzJztcbmltcG9ydCB0eXBlIFdhbGxFbnRpdHkgZnJvbSAnLi9XYWxsRW50aXR5LmpzJztcblxuaW50ZXJmYWNlIEVudGl0eU9wdGlvbnMge1xuXHRoYXNHcmF2aXR5PzogYm9vbGVhbjtcblx0bWFzcz86IG51bWJlcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgRW50aXR5IGV4dGVuZHMgUElYSS5TcHJpdGUgaW1wbGVtZW50cyBFbnRpdHlPcHRpb25zIHtcblx0cHVibGljIGhhc0dyYXZpdHk6IGJvb2xlYW47XG5cdHB1YmxpYyBtYXNzOiBudW1iZXI7XG5cdHB1YmxpYyB2ZWxvY2l0eTogUElYSS5Qb2ludDtcblx0cHVibGljIHRvdWNoaW5nV2FsbDogTWFwPFRvdWNoaW5nV2FsbFNpZGUsIFdhbGxFbnRpdHk+O1xuXG5cdHByb3RlY3RlZCBjb25zdHJ1Y3Rvcih0ZXh0dXJlOiBzdHJpbmcsIG9wdGlvbnM/OiBFbnRpdHlPcHRpb25zKTtcblx0cHJvdGVjdGVkIGNvbnN0cnVjdG9yKHRleHR1cmU6IFBJWEkuVGV4dHVyZSwgb3B0aW9ucz86IEVudGl0eU9wdGlvbnMpO1xuXHRwcm90ZWN0ZWQgY29uc3RydWN0b3IodGV4dHVyZTogUElYSS5UZXh0dXJlIHwgc3RyaW5nLCBvcHRpb25zPzogRW50aXR5T3B0aW9ucykge1xuXHRcdGxldCB0ZXh0dXJlTmFtZTtcblx0XHRpZiAodHlwZW9mIHRleHR1cmUgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHR0ZXh0dXJlTmFtZSA9IHRleHR1cmU7XG5cdFx0XHR0ZXh0dXJlID0gUElYSS5Mb2FkZXIuc2hhcmVkLnJlc291cmNlc1t0ZXh0dXJlXS50ZXh0dXJlO1xuXHRcdH1cblx0XHRpZiAoIXRleHR1cmUpIHRocm93IG5ldyBFcnJvcihgVGV4dHVyZSAnJHt0ZXh0dXJlTmFtZX0nIG5vdCBmb3VuZC5gKTtcblxuXHRcdHN1cGVyKHRleHR1cmUpO1xuXHRcdHRoaXMuc2V0dXAoKTtcblx0XHR0aGlzLnZlbG9jaXR5ID0gbmV3IFBJWEkuUG9pbnQoMCwgMCk7XG5cdFx0dGhpcy5oYXNHcmF2aXR5ID0gb3B0aW9ucz8uaGFzR3Jhdml0eSA/PyBmYWxzZTtcblx0XHR0aGlzLm1hc3MgPSBvcHRpb25zPy5tYXNzID8/IDE7XG5cdFx0dGhpcy50b3VjaGluZ1dhbGwgPSBuZXcgTWFwKCk7XG5cblx0XHR0aGlzLm9uKCd1cGRhdGUnLCAoKSA9PiB0aGlzLnVwZGF0ZSgpKTtcblx0fVxuXHRcblx0cHVibGljIGdldCBpc09uR3JvdW5kKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLnRvdWNoaW5nV2FsbC5oYXMoJ3RvcCcpO1xuXHR9XG5cdFxuXHRwdWJsaWMgYWJzdHJhY3Qgc2V0dXAoKTtcblx0XG5cdHB1YmxpYyB1cGRhdGUoKSB7XG5cdFx0aWYgKHRoaXMuaXNPbkdyb3VuZCkge1xuXHRcdFx0dGhpcy5lbWl0KCdvbkdyb3VuZCcpO1xuXHRcdFx0dGhpcy5wb3NpdGlvbi55ICs9IHRoaXMudG91Y2hpbmdXYWxsLmdldCgndG9wJykuZ2V0Qm91bmRzKCkudG9wIC0gdGhpcy5nZXRCb3VuZHMoKS5ib3R0b20gKyAwLjE7XG5cdFx0XHR0aGlzLnZlbG9jaXR5LnkgPSAwO1xuXHRcdH1cblx0XHRlbHNlIGlmICh0aGlzLmhhc0dyYXZpdHkpIHRoaXMudmVsb2NpdHkueSArPSAwLjE7XG5cblx0XHR0aGlzLnBvc2l0aW9uLnggKz0gdGhpcy52ZWxvY2l0eS54O1xuXHRcdHRoaXMucG9zaXRpb24ueSArPSB0aGlzLnZlbG9jaXR5Lnk7XG5cdH1cblx0XG5cdHB1YmxpYyBtb3ZlKGRpcmVjdGlvbjogUElYSS5Qb2ludCwgc3BlZWQ6IG51bWJlcik6IHZvaWQge1xuXHRcdHRoaXMudmVsb2NpdHkueCArPSBkaXJlY3Rpb24ueCAqIHNwZWVkO1xuXHRcdHRoaXMudmVsb2NpdHkueSArPSBkaXJlY3Rpb24ueSAqIHNwZWVkO1xuXHR9XG5cdFxuXHRwdWJsaWMgbWFuYWdlV2FsbENvbGxpc2lvbnMoKSB7XG5cdFx0Y29uc3Qgd2FsbHM6IFdhbGxFbnRpdHlbXSA9IGFjdHVhbFNjZW5lLmNoaWxkcmVuLmZpbHRlcigoZW50aXR5OiBFbnRpdHkpOiBlbnRpdHkgaXMgV2FsbEVudGl0eSA9PiBlbnRpdHkuY29uc3RydWN0b3IubmFtZSA9PT0gJ1dhbGxFbnRpdHknKTtcblx0XHR3YWxscy5mb3JFYWNoKHdhbGwgPT4ge1xuXHRcdFx0aWYgKGlzUmVjdGFuZ2xlQ29sbGFwc2UodGhpcywgd2FsbCkpIHtcblx0XHRcdFx0Y29uc3QgdG91Y2hpbmdXYWxsU2lkZTogVG91Y2hpbmdXYWxsU2lkZSA9IG1hbmFnZVJlY3RhbmdsZUNvbGxpc2lvbnMod2FsbCwgdGhpcyk7XG5cdFx0XHRcdHRoaXMudG91Y2hpbmdXYWxsLnNldCh0b3VjaGluZ1dhbGxTaWRlLCB3YWxsKTtcblx0XHRcdFx0dGhpcy5lbWl0KCd0b3VjaFdhbGwnLCB0b3VjaGluZ1dhbGxTaWRlLCB3YWxsKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHR0aGlzLnRvdWNoaW5nV2FsbC5mb3JFYWNoKCh3YWxsLCBzaWRlKSA9PiB7XG5cdFx0XHRzd2l0Y2ggKHNpZGUpIHtcblx0XHRcdFx0Y2FzZSAnYm90dG9tJzpcblx0XHRcdFx0XHR0aGlzLm1vdmUobmV3IFBJWEkuUG9pbnQodGhpcy52ZWxvY2l0eS54IC8gMTAsIDEpLCAyKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XG5cdFx0XHRcdGNhc2UgJ3RvcCc6XG5cdFx0XHRcdFx0dGhpcy5tb3ZlKG5ldyBQSVhJLlBvaW50KC10aGlzLnZlbG9jaXR5LnggLyA1LCAtMSksIDIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcblx0XHRcdFx0Y2FzZSAnbGVmdCc6XG5cdFx0XHRcdFx0dGhpcy5tb3ZlKG5ldyBQSVhJLlBvaW50KC10aGlzLnZlbG9jaXR5LnggfHwgLTIsIDApLCAxKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcblx0XHRcdFx0Y2FzZSAncmlnaHQnOlxuXHRcdFx0XHRcdHRoaXMubW92ZShuZXcgUElYSS5Qb2ludCgtdGhpcy52ZWxvY2l0eS54IHx8IDIsIDApLCAxKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKCFpc1JlY3RhbmdsZUNvbGxhcHNlKHdhbGwsIHRoaXMpKSB0aGlzLnRvdWNoaW5nV2FsbC5kZWxldGUoc2lkZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRkZXN0cm95KG9wdGlvbnM/OiB7IGNoaWxkcmVuPzogYm9vbGVhbjsgdGV4dHVyZT86IGJvb2xlYW47IGJhc2VUZXh0dXJlPzogYm9vbGVhbiB9KSB7XG5cdFx0c3VwZXIuZGVzdHJveShvcHRpb25zKTtcblx0fVxufVxuIiwgImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBELCBRLCBzcGFjZSB9IGZyb20gJy4uL2NsaWVudC9JbnB1dE1hbmFnZXIuanMnO1xuaW1wb3J0IEVudGl0eSBmcm9tICcuL0VudGl0eSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciBleHRlbmRzIEVudGl0eSB7XG5cdHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcigncGxheWVyJywge1xuXHRcdFx0aGFzR3Jhdml0eTogdHJ1ZSxcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBzZXR1cCgpIHt9XG5cblx0cHVibGljIHVwZGF0ZSgpIHtcblx0XHR0aGlzLm1hbmFnZVdhbGxDb2xsaXNpb25zKCk7XG5cdFx0c3VwZXIudXBkYXRlKCk7XG5cdFx0aWYgKHRoaXMuaXNPbkdyb3VuZCkge1xuXHRcdFx0aWYgKFEuaXNQcmVzc2VkICYmIHRoaXMudmVsb2NpdHkueCA+IC00KSB0aGlzLm1vdmUobmV3IFBJWEkuUG9pbnQoLTEsIDApLCAyKTtcblx0XHRcdGlmIChELmlzUHJlc3NlZCAmJiB0aGlzLnZlbG9jaXR5LnggPCA0KSB0aGlzLm1vdmUobmV3IFBJWEkuUG9pbnQoMSwgMCksIDIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoUS5pc1ByZXNzZWQgJiYgdGhpcy52ZWxvY2l0eS54ID4gLTQpIHRoaXMubW92ZShuZXcgUElYSS5Qb2ludCgtMSwgMCksIDAuNyk7XG5cdFx0XHRpZiAoRC5pc1ByZXNzZWQgJiYgdGhpcy52ZWxvY2l0eS54IDwgNCkgdGhpcy5tb3ZlKG5ldyBQSVhJLlBvaW50KDEsIDApLCAwLjcpO1xuXHRcdFx0dGhpcy52ZWxvY2l0eS54ICo9IDAuOTA7XG5cdFx0XG5cdFx0fVxuXHRcdGlmIChzcGFjZS5pc1ByZXNzZWQgJiYgdGhpcy5pc09uR3JvdW5kKSB7XG5cdFx0XHR0aGlzLm1vdmUobmV3IFBJWEkuUG9pbnQoMCwgLTEpLCAwLjgpO1xuXHRcdFx0dGhpcy5wb3NpdGlvbi55ICs9IHRoaXMudmVsb2NpdHkueTtcblx0XHR9XG5cdFx0XG5cdH1cbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gbWFwKHZhbHVlOiBudW1iZXIsIG1pblZhbHVlOiBudW1iZXIsIG1heFZhbHVlOiBudW1iZXIsIG1pblRhcmdldDogbnVtYmVyLCBtYXhUYXJnZXQ6IG51bWJlcik6IG51bWJlciB7XG5cdGlmICh2YWx1ZSA9PT0gMCkgcmV0dXJuIDA7XG5cdHJldHVybiAoKHZhbHVlIC0gbWluVmFsdWUpICogKG1heFRhcmdldCAtIG1pblRhcmdldCkpIC8gKG1heFZhbHVlIC0gbWluVmFsdWUpICsgbWluVGFyZ2V0O1xufVxuIiwgImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgU2NlbmUgZnJvbSAnLi4vc2NlbmVzL1NjZW5lLmpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJztcbmltcG9ydCBFbnRpdHkgZnJvbSAnLi9FbnRpdHknO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdhbGxPcHRpb25zIHtcblx0eDogbnVtYmVyO1xuXHR5OiBudW1iZXI7XG5cdHdpZHRoOiBudW1iZXI7XG5cdGhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXYWxsRW50aXR5IGV4dGVuZHMgRW50aXR5IHtcblx0cHVibGljIHJlYWRvbmx5IGluaXRpYWw6IFBJWEkuUmVjdGFuZ2xlO1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpO1xuXHRwdWJsaWMgY29uc3RydWN0b3Iob3B0aW9uczogV2FsbE9wdGlvbnMpO1xuXHRwdWJsaWMgY29uc3RydWN0b3Iob3B0aW9uczogV2FsbE9wdGlvbnMgfCBudW1iZXIsIHk/OiBudW1iZXIsIHdpZHRoPzogbnVtYmVyLCBoZWlnaHQ/OiBudW1iZXIpIHtcblx0XHRzdXBlcihQSVhJLlRleHR1cmUuV0hJVEUsIHtcblx0XHRcdG1hc3M6IDEwMDAsXG5cdFx0fSk7XG5cblx0XHRpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKSB7XG5cdFx0XHR0aGlzLnBvc2l0aW9uLnNldChvcHRpb25zLCB5KTtcblx0XHRcdHRoaXMud2lkdGggPSB3aWR0aDtcblx0XHRcdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnBvc2l0aW9uLnNldChvcHRpb25zLngsIG9wdGlvbnMueSk7XG5cdFx0XHR0aGlzLndpZHRoID0gb3B0aW9ucy53aWR0aDtcblx0XHRcdHRoaXMuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7XG5cdFx0fVxuXG5cdFx0dGhpcy5pbml0aWFsID0gbmV3IFBJWEkuUmVjdGFuZ2xlKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG5cdH1cblxuXHRwdWJsaWMgcmVzaXplVG9TY2VuZShzY2VuZTogU2NlbmUpIHtcblx0XHR0aGlzLnBvc2l0aW9uLnggPSBtYXAodGhpcy5pbml0aWFsLngsIDAsIDE5MjAsIDAsIHNjZW5lLndpZHRoKTtcblx0XHR0aGlzLnBvc2l0aW9uLnkgPSBtYXAodGhpcy5pbml0aWFsLnksIDAsIDEwODAsIDAsIHNjZW5lLmhlaWdodCk7XG5cdFx0dGhpcy53aWR0aCA9IG1hcCh0aGlzLmluaXRpYWwud2lkdGgsIDAsIDE5MjAsIDAsIHNjZW5lLndpZHRoKTtcblx0XHR0aGlzLmhlaWdodCA9IG1hcCh0aGlzLmluaXRpYWwuaGVpZ2h0LCAwLCAxMDgwLCAwLCBzY2VuZS5oZWlnaHQpO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRwdWJsaWMgc2V0dXAoKSB7fVxufVxuIiwgImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBhY3R1YWxTY2VuZSB9IGZyb20gJy4uL2FwcC5qcyc7XG5pbXBvcnQgRW50aXR5IGZyb20gJy4uL2VudGl0eS9FbnRpdHknO1xuaW1wb3J0IFdhbGxFbnRpdHksIHsgV2FsbE9wdGlvbnMgfSBmcm9tICcuLi9lbnRpdHkvV2FsbEVudGl0eSc7XG5cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFNjZW5lIGV4dGVuZHMgUElYSS5Db250YWluZXIge1xuXHRwdWJsaWMgYmFja2dyb3VuZDogUElYSS5TcHJpdGU7XG5cblx0cHJvdGVjdGVkIGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5zZXR1cCgpO1xuXHR9XG5cblx0YWJzdHJhY3Qgc2V0dXAoKTtcblxuXHR1cGRhdGUoKSB7XG5cdFx0dGhpcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0dGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdHRoaXMuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG5cdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBFbnRpdHkpIGNoaWxkLmVtaXQoJ3VwZGF0ZScpO1xuXHRcdFx0aWYgKCEoY2hpbGQgaW5zdGFuY2VvZiBXYWxsRW50aXR5KSkgcmV0dXJuO1xuXHRcdFx0Y2hpbGQucmVzaXplVG9TY2VuZShhY3R1YWxTY2VuZSk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLnNvcnRDaGlsZHJlbigpO1xuXG5cdFx0dGhpcy5iYWNrZ3JvdW5kLndpZHRoID0gdGhpcy53aWR0aDtcblx0XHR0aGlzLmJhY2tncm91bmQuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdH1cblxuXHRkZXN0cm95KCkge1xuXHRcdHN1cGVyLmRlc3Ryb3koKTtcblxuXHRcdHRoaXMuYmFja2dyb3VuZC5kZXN0cm95KCk7XG5cdH1cblxuXHRwdWJsaWMgYWRkV2FsbCh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpO1xuXHRwdWJsaWMgYWRkV2FsbChvcHRpb25zOiBXYWxsT3B0aW9ucyk7XG5cdHB1YmxpYyBhZGRXYWxsKG9wdGlvbnM6IFdhbGxPcHRpb25zIHwgbnVtYmVyLCB5PzogbnVtYmVyLCB3aWR0aD86IG51bWJlciwgaGVpZ2h0PzogbnVtYmVyKSB7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJylcblx0XHRcdHRoaXMuYWRkQ2hpbGQoXG5cdFx0XHRcdG5ldyBXYWxsRW50aXR5KHtcblx0XHRcdFx0XHR4OiBvcHRpb25zLFxuXHRcdFx0XHRcdHksXG5cdFx0XHRcdFx0d2lkdGgsXG5cdFx0XHRcdFx0aGVpZ2h0LFxuXHRcdFx0XHR9KS5yZXNpemVUb1NjZW5lKHRoaXMpXG5cdFx0XHQpO1xuXHRcdGVsc2UgdGhpcy5hZGRDaGlsZChuZXcgV2FsbEVudGl0eShvcHRpb25zKS5yZXNpemVUb1NjZW5lKHRoaXMpKTtcblx0fVxufVxuIiwgImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgUGxheWVyIGZyb20gJy4uL2VudGl0eS9QbGF5ZXInO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnO1xuaW1wb3J0IFNjZW5lIGZyb20gJy4vU2NlbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBDaGFtYmVyU2NlbmUgZXh0ZW5kcyBTY2VuZSB7XG5cdHB1YmxpYyByZWFkb25seSBzcGF3blBvaW50OiBQSVhJLlBvaW50O1xuXHRwdWJsaWMgcGxheWVyOiBQbGF5ZXI7XG5cblx0cHJvdGVjdGVkIGNvbnN0cnVjdG9yKHNwYXduUG9pbnQ6IFBJWEkuUG9pbnQpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuc3Bhd25Qb2ludCA9IHNwYXduUG9pbnQ7XG5cdH1cblxuXHRwdWJsaWMgc3Bhd25QbGF5ZXIocG9zaXRpb24/OiBQSVhJLklQb2ludERhdGEpIHtcblx0XHRpZiAoIXBvc2l0aW9uKSBwb3NpdGlvbiA9IHRoaXMuc3Bhd25Qb2ludDtcblx0XHRpZiAoIXRoaXMucGxheWVyKSB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIoKTtcblx0XHR0aGlzLnBsYXllci5wb3NpdGlvbi5zZXQobWFwKHBvc2l0aW9uLngsIDAsIDE5MjAsIDAsIHdpbmRvdy5pbm5lcldpZHRoKSwgbWFwKHBvc2l0aW9uLnksIDAsIDEwODAsIDAsIHdpbmRvdy5pbm5lckhlaWdodCkpO1xuXHRcdHRoaXMuYWRkQ2hpbGQodGhpcy5wbGF5ZXIpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgaXNSZWN0YW5nbGVDb2xsYXBzZSwgUmVjdGFuZ2xlIH0gZnJvbSAnLi4vdXRpbHMvY29sbGlzaW9uc1V0aWxzLmpzJztcbmltcG9ydCBDaGFtYmVyU2NlbmUgZnJvbSAnLi9DaGFtYmVyU2NlbmUuanMnO1xuaW1wb3J0ICogYXMgUElYSSBmcm9tICdwaXhpLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVzdENoYW1iZXIgZXh0ZW5kcyBDaGFtYmVyU2NlbmUge1xuXHRwdWJsaWMgZGVidWdUZXh0OiBQSVhJLlRleHQ7XG5cdHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcihuZXcgUElYSS5Qb2ludCgxNjAwLCA1MDApKTtcblx0fVxuXG5cdHB1YmxpYyBzZXR1cCgpIHtcblx0XHR0aGlzLmJhY2tncm91bmQgPSBQSVhJLlNwcml0ZS5mcm9tKFBJWEkuTG9hZGVyLnNoYXJlZC5yZXNvdXJjZXNbJ3Rlc3RDaGFtYmVyQmFja2dyb3VuZCddLnRleHR1cmUpO1xuXHRcdHRoaXMuYmFja2dyb3VuZC53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdHRoaXMuYmFja2dyb3VuZC5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0dGhpcy5hZGRDaGlsZCh0aGlzLmJhY2tncm91bmQpO1xuXG5cdFx0dGhpcy5zcGF3blBsYXllcih7XG5cdFx0XHR4OiAxNjAwLFxuXHRcdFx0eTogNTAwLFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRXYWxsKDAsIDEwODAgLSAxODQsIDE5MjAsIDE4NCk7XG5cdFx0dGhpcy5hZGRXYWxsKDAsIDAsIDE5NCwgMTA4MCk7XG5cdFx0dGhpcy5kZWJ1Z1RleHQgPSBuZXcgUElYSS5UZXh0KCcnKTtcblx0XHR0aGlzLmFkZENoaWxkKHRoaXMuZGVidWdUZXh0KTtcblx0fVxuXG5cdHB1YmxpYyB1cGRhdGUoKSB7XG5cdFx0c3VwZXIudXBkYXRlKCk7XG5cdFx0aWYgKCFpc1JlY3RhbmdsZUNvbGxhcHNlKG5ldyBSZWN0YW5nbGUoMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCksIHRoaXMucGxheWVyKSkge1xuXHRcdFx0dGhpcy5zcGF3blBsYXllcigpO1xuXHRcdH1cblx0XHRcblx0XHR0aGlzLmRlYnVnVGV4dC50ZXh0ID0gSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0cG9zaXRpb246IHtcblx0XHRcdFx0eDogdGhpcy5wbGF5ZXIucG9zaXRpb24ueCxcblx0XHRcdFx0eTogdGhpcy5wbGF5ZXIucG9zaXRpb24ueVxuXHRcdFx0fSxcblx0XHRcdHZlbG9jaXR5OiB0aGlzLnBsYXllci52ZWxvY2l0eSxcblx0XHRcdHN0YXRlczoge1xuXHRcdFx0XHRoYXNHcmF2aXR5OiB0aGlzLnBsYXllci5oYXNHcmF2aXR5LFxuXHRcdFx0XHRvbkdyb3VuZDogICB0aGlzLnBsYXllci5pc09uR3JvdW5kLFxuXHRcdFx0fSxcblx0XHRcdHRvdWNoaW5nV2FsbHM6IFsuLi50aGlzLnBsYXllci50b3VjaGluZ1dhbGwuZW50cmllcygpXS5tYXAodyA9PiBgJHt3WzBdfWApXG5cdFx0fSwgbnVsbCwgNCk7XG5cdFx0XG5cdH1cbn1cbiIsICJpbXBvcnQgKiBhcyBQSVhJIGZyb20gJ3BpeGkuanMnO1xuaW1wb3J0IFBsYXllciBmcm9tICcuL2VudGl0eS9QbGF5ZXIuanMnO1xuaW1wb3J0IFdhbGxFbnRpdHkgZnJvbSAnLi9lbnRpdHkvV2FsbEVudGl0eS5qcyc7XG5pbXBvcnQgU2NlbmUgZnJvbSAnLi9zY2VuZXMvU2NlbmUuanMnO1xuaW1wb3J0IFRlc3RDaGFtYmVyIGZyb20gJy4vc2NlbmVzL1Rlc3RDaGFtYmVyLmpzJztcbmltcG9ydCB7IGlzUmVjdGFuZ2xlQ29sbGFwc2UgfSBmcm9tICcuL3V0aWxzL2NvbGxpc2lvbnNVdGlscy5qcyc7XG5cbmV4cG9ydCBsZXQgYWN0dWFsU2NlbmU6IFNjZW5lO1xuXG5leHBvcnQgY29uc3QgYXBwID0gbmV3IFBJWEkuQXBwbGljYXRpb24oe1xuXHRhbnRpYWxpYXM6IHRydWUsXG5cdHJlc2l6ZVRvOiB3aW5kb3csXG5cdGJhY2tncm91bmRDb2xvcjogMHhkZGRkZGQsXG59KTtcblxubG9hZFRleHR1cmVzKCkudGhlbigoKSA9PiB7XG5cdHRlc3RzKCk7XG59KTtcblxuYXN5bmMgZnVuY3Rpb24gbG9hZFRleHR1cmVzKCkge1xuXHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcblx0XHRQSVhJLkxvYWRlci5zaGFyZWQuYWRkKCd0ZXN0JywgJ2Fzc2V0cy90ZXN0LnBuZycpO1xuXHRcdFBJWEkuTG9hZGVyLnNoYXJlZC5hZGQoJ3BsYXllcicsICdhc3NldHMvcGxheWVyLnBuZycpO1xuXHRcdFBJWEkuTG9hZGVyLnNoYXJlZC5hZGQoJ3Rlc3RDaGFtYmVyQmFja2dyb3VuZCcsICdhc3NldHMvdGVzdCBsZXZlbC5wbmcnKTtcblx0XHRQSVhJLkxvYWRlci5zaGFyZWQubG9hZChyZXNvbHZlKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHRlc3RzKCkge1xuXHRQSVhJLkxvYWRlci5zaGFyZWQub25Db21wbGV0ZS5hZGQoKCkgPT4ge1xuXHRcdGNvbnN0IHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb20oUElYSS5Mb2FkZXIuc2hhcmVkLnJlc291cmNlc1sndGVzdCddLnRleHR1cmUpO1xuXHRcdHNwcml0ZS5wb3NpdGlvbi5zZXQod2luZG93LmlubmVyV2lkdGggLyAyLCB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyKTtcblx0XHRhcHAuc3RhZ2UuYWRkQ2hpbGQoc3ByaXRlKTtcblx0fSk7XG5cblx0UElYSS5UaWNrZXIuc2hhcmVkLmFkZChcblx0XHQoKSA9PiB7XG5cdFx0XHRhY3R1YWxTY2VuZT8udXBkYXRlKCk7XG5cdFx0XHR3aW5kb3dbJ3BsYXllciddID0gYWN0dWFsU2NlbmUuY2hpbGRyZW4uZmluZChjID0+IGMgaW5zdGFuY2VvZiBQbGF5ZXIpO1xuXHRcdFx0d2luZG93Wyd3YWxscyddID0gYWN0dWFsU2NlbmUuY2hpbGRyZW4uZmlsdGVyKGMgPT4gYyBpbnN0YW5jZW9mIFdhbGxFbnRpdHkpO1xuXHRcdFx0d2luZG93Wydpc1JlY3RhbmdsZUNvbGxhcHNlJ10gPSBpc1JlY3RhbmdsZUNvbGxhcHNlO1xuXHRcdH0sXG5cdFx0dW5kZWZpbmVkLFxuXHRcdFBJWEkuVVBEQVRFX1BSSU9SSVRZLkhJR0hcblx0KTtcblxuXHRzZXRTY2VuZShuZXcgVGVzdENoYW1iZXIoKSk7XG5cdHdpbmRvd1snYWN0dWFsU2NlbmUnXSA9IGFjdHVhbFNjZW5lO1xufVxuXG5mdW5jdGlvbiBzZXRTY2VuZShzY2VuZTogU2NlbmUpIHtcblx0YWN0dWFsU2NlbmUgPSBzY2VuZTtcblx0YXBwLnN0YWdlLmFkZENoaWxkKGFjdHVhbFNjZW5lKTtcbn1cblxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhcHAudmlldyk7XG53aW5kb3dbJ2FwcCddID0gYXBwO1xud2luZG93WydQSVhJJ10gPSBQSVhJO1xuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQSxJQUFDLFVBQVM7QUFNVixVQUFJLGdCQUFnQixRQUFPO0FBQzNCLFVBQUkseUJBQ0YsaUJBR0EsYUFBYSxpQkFDYixZQUFZLGlCQUNaLFNBQVMsaUJBQ1QsVUFBVSxpQkFHVDtBQUNDLFlBQUk7QUFDSixZQUFJLGNBQWMsU0FBUztBQUFJLHFCQUFVO0FBQUE7QUFDekMsZUFBTyxPQUFPLGFBQVk7QUFBQTtBQVE5QixVQUFJLE9BQU8sWUFBWSxlQUFlO0FBR3BDLGdCQUFRLFVBQVUseUJBQXlCLGdCQUFnQjtBQUMzRCxnQkFBUSxXQUFXO0FBQUE7QUFLbkIsWUFBSSxPQUFPLFVBQVUsY0FBYyxPQUFPO0FBRXhD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QUEsYUFBQSxXQUFBLFNBQUE7QUFDQSxpQkFBQSxhQUFBLFdBQUEsT0FBQTtBQUNBLGlCQUFBLGFBQUEsYUFBQSxRQUFBO0tBSFEsZUFBQSxlQUFXO0FBZ0R2QixNQUFZO0FBQVosRUFBQSxVQUFZO0FBQ1IsaUJBQUEsYUFBQSxZQUFBLEtBQUE7QUFDQSxpQkFBQSxhQUFBLFNBQUEsS0FBQTtBQUNBLGlCQUFBLGFBQUEsY0FBQSxLQUFBO0FBQ0EsaUJBQUEsYUFBQSxZQUFBLEtBQUE7QUFDQSxpQkFBQSxhQUFBLGFBQUEsS0FBQTtBQUNBLGlCQUFBLGFBQUEsWUFBQSxLQUFBO0FBQ0EsaUJBQUEsYUFBQSxhQUFBLEtBQUE7QUFDQSxpQkFBQSxhQUFBLGlCQUFBLEtBQUE7QUFDQSxpQkFBQSxhQUFBLGdCQUFBLEtBQUE7QUFDQSxpQkFBQSxhQUFBLGdCQUFBLEtBQUE7QUFDQSxpQkFBQSxhQUFBLGdCQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLGdCQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLGVBQUEsTUFBQTtBQUNBLGlCQUFBLGFBQUEsU0FBQSxNQUFBO0FBQ0EsaUJBQUEsYUFBQSxnQkFBQSxNQUFBO0FBQ0EsaUJBQUEsYUFBQSxXQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLGdCQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLGdCQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLGFBQUEsTUFBQTtBQUNBLGlCQUFBLGFBQUEsZ0JBQUEsTUFBQTtBQUNBLGlCQUFBLGFBQUEsVUFBQSxNQUFBO0FBRUEsaUJBQUEsYUFBQSxjQUFBLEtBQUE7QUFDQSxpQkFBQSxhQUFBLFlBQUEsTUFBQTtBQUNBLGlCQUFBLGFBQUEsYUFBQSxNQUFBO0FBQ0EsaUJBQUEsYUFBQSxjQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLGNBQUEsTUFBQTtBQUNBLGlCQUFBLGFBQUEsWUFBQSxNQUFBO0FBQ0EsaUJBQUEsYUFBQSxhQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLGNBQUEsTUFBQTtBQUNBLGlCQUFBLGFBQUEsV0FBQSxNQUFB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QUFBLGtCQUFBLEtBQUE7QUFDQSxTQUFBLEtBQUEsV0FBQSxLQUFBO0FBQ0EsU0FBQSxLQUFBLFlBQUEsS0FBQTtLQUhRLFFBQUEsUUFBRztBQWlCZixNQUFZO0FBQVosRUFBQSxVQUFZO0FBQ1IsbUJBQUEsZUFBQSxhQUFBLEtBQUE7QUFDQSxtQkFBQSxlQUFBLFdBQUEsS0FBQTtBQUNBLG1CQUFBLGVBQUEsWUFBQSxLQUFBO0tBSFEsa0JBQUEsa0JBQWE7QUFpQnpCLE1BQVk7QUFBWixFQUFBLFVBQVk7QUFDUixpQkFBQSxhQUFBLFdBQUEsU0FBQTtBQUNBLGlCQUFBLGFBQUEsV0FBQSxPQUFBO0FBQ0EsaUJBQUEsYUFBQSxhQUFBLFFBQUE7S0FIUSxnQkFBQSxnQkFBVztBQWdEdkIsTUFBWTtBQUFaLEVBQUEsVUFBWTtBQUNSLGlCQUFBLGFBQUEsWUFBQSxLQUFBO0FBQ0EsaUJBQUEsYUFBQSxTQUFBLEtBQUE7QUFDQSxpQkFBQSxhQUFBLGNBQUEsS0FBQTtBQUNBLGlCQUFBLGFBQUEsWUFBQSxLQUFBO0FBQ0EsaUJBQUEsYUFBQSxhQUFBLEtBQUE7QUFDQSxpQkFBQSxhQUFBLFlBQUEsS0FBQTtBQUNBLGlCQUFBLGFBQUEsYUFBQSxLQUFBO0FBQ0EsaUJBQUEsYUFBQSxpQkFBQSxLQUFBO0FBQ0EsaUJBQUEsYUFBQSxnQkFBQSxLQUFBO0FBQ0EsaUJBQUEsYUFBQSxnQkFBQSxLQUFBO0FBQ0EsaUJBQUEsYUFBQSxnQkFBQSxNQUFBO0FBQ0EsaUJBQUEsYUFBQSxnQkFBQSxNQUFBO0FBQ0EsaUJBQUEsYUFBQSxlQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLFNBQUEsTUFBQTtBQUNBLGlCQUFBLGFBQUEsZ0JBQUEsTUFBQTtBQUNBLGlCQUFBLGFBQUEsV0FBQSxNQUFBO0FBQ0EsaUJBQUEsYUFBQSxnQkFBQSxNQUFBO0FBQ0EsaUJBQUEsYUFBQSxnQkFBQSxNQUFBO0FBQ0EsaUJBQUEsYUFBQSxhQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLGdCQUFBLE1BQUE7QUFDQSxpQkFBQSxhQUFBLFVBQUEs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QUFLLEVBQUUsS0FBTyxFQUFFLEtBQUssRUFBRSxNQUFRLEVBQUUsS0FBSyxFQUFFO0FBQ3BFLFVBQUksS0FBTSxFQUFFLEtBQUssRUFBRSxLQUFPLEVBQUUsS0FBSyxFQUFFLEtBQU8sRUFBRSxLQUFLLEVBQUUsTUFBUSxFQUFFLEtBQUssRUFBRTtBQUNwRSxVQUFJLEtBQU0sRUFBRSxLQUFLLEVBQUUsS0FBTyxFQUFFLEtBQUssRUFBRSxLQUFPLEVBQUUsS0FBSyxFQUFFLE1BQVEsRUFBRSxLQUFLLEVBQUU7QUFDcEUsVUFBSSxLQUFNLEVBQUUsS0FBSyxFQUFFLEtBQU8sRUFBRSxLQUFLLEVBQUUsS0FBTyxFQUFFLEtBQUssRUFBRSxNQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU8sRUFBRTtBQUc3RSxVQUFJLEtBQU0sRUFBRSxLQUFLLEVBQUUsS0FBTyxFQUFFLEtBQUssRUFBRSxLQUFPLEVBQUUsS0FBSyxFQUFFLE1BQVEsRUFBRSxLQUFLLEVBQUU7QUFDcEUsVUFBSSxLQUFNLEVBQUUsS0FBSyxFQUFFLEtBQU8sRUFBRSxLQUFLLEVBQUUsS0FBTyxFQUFFLEtBQUssRUFBRSxNQUFRLEVBQUUsS0FBSyxFQUFFO0FBQ3BFLFVBQUksS0FBTSxFQUFFLEtBQUssRUFBRSxLQUFPLEVBQUUsS0FBSyxFQUFFLEtBQU8sRUFBRSxLQUFLLEVBQUUsTUFBUSxFQUFFLEtBQUssRUFBRTtBQUNwRSxVQUFJLEtBQU0sRUFBRSxLQUFLLEVBQUUsS0FBTyxFQUFFLEtBQUssRUFBRSxLQUFPLEVBQUUsS0FBSyxFQUFFLE1BQVEsRUFBRSxLQUFLLEVBQUU7QUFDcEUsVUFBSSxLQUFNLEVBQUUsS0FBSyxFQUFFLEtBQU8sRUFBRSxLQUFLLEVBQUUsS0FBTyxFQUFFLEtBQUssRUFBRSxNQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU8sRUFBRTtBQUc3RSxVQUFJLE1BQU8sRUFBRSxNQUFNLEVBQUUsS0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFPLEVBQUUsTUFBTSxFQUFFLE1BQVEsRUFBRSxNQUFNLEVBQUU7QUFDekUsVUFBSSxNQUFPLEVBQUUsTUFBTSxFQUFFLEtBQU8sRUFBRSxNQUFNLEVBQUUsS0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFRLEVBQUUsTUFBTSxFQUFFO0FBQ3pFLFVBQUksTUFBTyxFQUFFLE1BQU0sRUFBRSxLQUFPLEVBQUUsTUFBTSxFQUFFLEtBQU8sRUFBRSxNQUFNLEVBQUUsTUFBUSxFQUFFLE1BQU0sRUFBRTtBQUN6RSxVQUFJLE1BQU8sRUFBRSxNQUFNLEVBQUUsS0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFPLEVBQUUsTUFBTSxFQUFFLE1BQVEsRUFBRSxNQUFNLEVBQUU7QUFDekUsVUFBSSxNQUFPLEVBQUUsTUFBTSxFQUFFLEtBQU8sRUFBRSxNQUFNLEVBQUUsS0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU8sRUFBRTtBQUdsRixVQUFJLE1BQU8sRUFBRSxNQUFNLEVBQUUsS0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFPLEVBQUUsTUFBTSxFQUFFLE1BQVEsRUFBRSxNQUFNLEVBQUU7QUFDekUsVUFBSSxNQUFPLEVBQUUsTUFBTSxFQUFFLEtBQU8sRUFBRSxNQUFNLEVBQUUsS0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFRLEVBQUUsTUFBTSxFQUFFO0FBQ3pFLFVBQUksTUFBTyxFQUFFLE1BQU0sRUFBRSxLQUFPLEVBQUUsTUFBTSxFQUFFLEtBQU8sRUFBRSxNQUFNLEVBQUUsTUFBUSxFQUFFLE1BQU0sRUFBRTtBQUN6RSxVQUFJLE1BQU8sRUFBRSxNQUFNLEVBQUUsS0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFPLEVBQUUsTUFBTSxFQUFFLE1BQVEsRUFBRSxNQUFNLEVBQUU7QUFDekUsVUFBSSxNQUFPLEVBQUUsTUFBTSxFQUFFLEtBQU8sRUFBRSxNQUFNLEVBQUUsS0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU8sRUFBRTtBQUVsRixhQUFPOztBQVVILHVCQUFBLFVBQUEsZUFBUixTQUFxQjtBQUdqQixVQUFNLElBQUksSUFBSSxhQUFhO0FBRTNCLFFB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
